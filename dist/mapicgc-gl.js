(function(eA,lh){typeof exports=="object"&&typeof module<"u"?lh(exports):typeof define=="function"&&define.amd?define(["exports"],lh):(eA=typeof globalThis<"u"?globalThis:eA||self,lh(eA.mapicgcgl={}))})(this,function(eA){"use strict";var lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Zy={exports:{}};(function(n,e){(function(t,s){n.exports=s()})(lh,function(){var t,s,l;function u(a,m){if(!t)t=m;else if(!s)s=m;else{var w="var sharedChunk = {}; ("+t+")(sharedChunk); ("+s+")(sharedChunk);",S={};t(S),l=m(S),typeof window<"u"&&(l.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}u(["exports"],function(a){function m(o,r,A,h){return new(A||(A=Promise))(function(g,_){function B(D){try{U(h.next(D))}catch(V){_(V)}}function F(D){try{U(h.throw(D))}catch(V){_(V)}}function U(D){var V;D.done?g(D.value):(V=D.value,V instanceof A?V:new A(function(W){W(V)})).then(B,F)}U((h=h.apply(o,r||[])).next())})}function w(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var S=T;function T(o,r){this.x=o,this.y=r}T.prototype={clone:function(){return new T(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,A=o.y-this.y;return r*r+A*A},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),A=Math.sin(o),h=A*this.x+r*this.y;return this.x=r*this.x-A*this.y,this.y=h,this},_rotateAround:function(o,r){var A=Math.cos(o),h=Math.sin(o),g=r.y+h*(this.x-r.x)+A*(this.y-r.y);return this.x=r.x+A*(this.x-r.x)-h*(this.y-r.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},T.convert=function(o){return o instanceof T?o:Array.isArray(o)?new T(o[0],o[1]):o};var Q=w(S),I=q;function q(o,r,A,h){this.cx=3*o,this.bx=3*(A-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=A,this.p2y=h}q.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var A=o,h=0;h<8;h++){var g=this.sampleCurveX(A)-o;if(Math.abs(g)<r)return A;var _=this.sampleCurveDerivativeX(A);if(Math.abs(_)<1e-6)break;A-=g/_}var B=0,F=1;for(A=o,h=0;h<20&&(g=this.sampleCurveX(A),!(Math.abs(g-o)<r));h++)o>g?B=A:F=A,A=.5*(F-B)+B;return A},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var j=w(I);let Y,K;function ne(){return Y==null&&(Y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Y}function he(){if(K==null&&(K=!1,ne())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let h=0;h<5*5;h++){const g=4*h;r.fillStyle=`rgb(${g},${g+1},${g+2})`,r.fillRect(h%5,Math.floor(h/5),1,1)}const A=r.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&A[h]!==h){K=!0;break}}}return K||!1}function Ee(o,r,A,h){const g=new j(o,r,A,h);return function(_){return g.solve(_)}}const De=Ee(.25,.1,.25,1);function Ne(o,r,A){return Math.min(A,Math.max(r,o))}function Qe(o,r,A){const h=A-r,g=((o-r)%h+h)%h+r;return g===r?A:g}function ge(o){for(var r=arguments.length,A=new Array(r>1?r-1:0),h=1;h<r;h++)A[h-1]=arguments[h];for(const g of A)for(const _ in g)o[_]=g[_];return o}let Ze=1;function $e(o,r,A){const h={};for(const g in o)h[g]=r.call(A||this,o[g],g,o);return h}function ce(o,r,A){const h={};for(const g in o)r.call(A||this,o[g],g,o)&&(h[g]=o[g]);return h}function Ae(o){return Array.isArray(o)?o.map(Ae):typeof o=="object"&&o?$e(o,Ae):o}const xe={};function _e(o){xe[o]||(typeof console<"u"&&console.warn(o),xe[o]=!0)}function et(o,r,A){return(A.y-o.y)*(r.x-o.x)>(r.y-o.y)*(A.x-o.x)}function Je(o){let r=0;for(let A,h,g=0,_=o.length,B=_-1;g<_;B=g++)A=o[g],h=o[B],r+=(h.x-A.x)*(A.y+h.y);return r}function rt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Ye=null;function it(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const nt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Bt(o,r,A,h,g){return m(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(o,{timestamp:0});try{const B=_==null?void 0:_.format;if(!B||!B.startsWith("BGR")&&!B.startsWith("RGB"))throw new Error(`Unrecognized format ${B}`);const F=B.startsWith("BGR"),U=new Uint8ClampedArray(h*g*4);if(yield _.copyTo(U,function(D,V,W,te,ae){const oe=4*Math.max(-V,0),me=(Math.max(0,W)-W)*te*4+oe,Be=4*te,Me=Math.max(0,V),We=Math.max(0,W);return{rect:{x:Me,y:We,width:Math.min(D.width,V+te)-Me,height:Math.min(D.height,W+ae)-We},layout:[{offset:me,stride:Be}]}}(o,r,A,h,g)),F)for(let D=0;D<U.length;D+=4){const V=U[D];U[D]=U[D+2],U[D+2]=V}return U}finally{_.close()}})}let ee,pe,ye,Re;const Ge={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const r=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(o){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.getImageCanvasContext(o).getImageData(-r,-r,o.width+2*r,o.height+2*r)},getImageCanvasContext(o){const r=window.document.createElement("canvas"),A=r.getContext("2d",{willReadFrequently:!0});if(!A)throw new Error("failed to create canvas 2d context");return r.width=o.width,r.height=o.height,A.drawImage(o,0,0,o.width,o.height),A},resolveURL:o=>(ye||(ye=document.createElement("a")),ye.href=o,ye.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Re==null&&(Re=matchMedia("(prefers-reduced-motion: reduce)")),Re.matches)}},tt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class st extends Error{constructor(r,A,h,g){super(`AJAXError: ${A} (${r}): ${h}`),this.status=r,this.statusText=A,this.url=h,this.body=g}}const ot=rt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Ct=o=>tt.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function Ft(o,r){const A=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:ot(),signal:A.signal});let g=!1,_=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),_||fetch(h).then(B=>B.ok?(F=>{(o.type==="arrayBuffer"||o.type==="image"?F.arrayBuffer():o.type==="json"?F.json():F.text()).then(U=>{_||(g=!0,r(null,U,F.headers.get("Cache-Control"),F.headers.get("Expires")))}).catch(U=>{_||r(new Error(U.message))})})(B):B.blob().then(F=>r(new st(B.status,B.statusText,o.url,F)))).catch(B=>{B.code!==20&&r(new Error(B.message))}),{cancel:()=>{_=!0,g||A.abort()}}}const zt=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(rt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r);if(!rt())return(Ct(o.url)||Ft)(o,r)}if(!(/^file:/.test(A=o.url)||/^file:/.test(ot())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Ft(o,r);if(rt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var A;return function(h,g){const _=new XMLHttpRequest;_.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(_.responseType="arraybuffer");for(const B in h.headers)_.setRequestHeader(B,h.headers[B]);return h.type==="json"&&(_.responseType="text",_.setRequestHeader("Accept","application/json")),_.withCredentials=h.credentials==="include",_.onerror=()=>{g(new Error(_.statusText))},_.onload=()=>{if((_.status>=200&&_.status<300||_.status===0)&&_.response!==null){let B=_.response;if(h.type==="json")try{B=JSON.parse(_.response)}catch(F){return g(F)}g(null,B,_.getResponseHeader("Cache-Control"),_.getResponseHeader("Expires"))}else{const B=new Blob([_.response],{type:_.getResponseHeader("Content-Type")});g(new st(_.status,_.statusText,h.url,B))}},_.send(h.body),{cancel:()=>_.abort()}}(o,r)},Vt=function(o,r){return zt(ge(o,{type:"arrayBuffer"}),r)};function Jt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),A=window.location;return r.protocol===A.protocol&&r.host===A.host}function ft(o,r,A){A[o]&&A[o].indexOf(r)!==-1||(A[o]=A[o]||[],A[o].push(r))}function Ue(o,r,A){if(A&&A[o]){const h=A[o].indexOf(r);h!==-1&&A[o].splice(h,1)}}class fr{constructor(r){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ge(this,A),this.type=r}}class Zt extends fr{constructor(r){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super("error",ge({error:r},A))}}class bt{on(r,A){return this._listeners=this._listeners||{},ft(r,A,this._listeners),this}off(r,A){return Ue(r,A,this._listeners),Ue(r,A,this._oneTimeListeners),this}once(r,A){return A?(this._oneTimeListeners=this._oneTimeListeners||{},ft(r,A,this._oneTimeListeners),this):new Promise(h=>this.once(r,h))}fire(r,A){typeof r=="string"&&(r=new fr(r,A||{}));const h=r.type;if(this.listens(h)){r.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const F of g)F.call(this,r);const _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const F of _)Ue(h,F,this._oneTimeListeners),F.call(this,r);const B=this._eventedParent;B&&(ge(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),B.fire(r))}else r instanceof Zt&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,A){return this._eventedParent=r,this._eventedParentData=A,this}}var ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ut=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Pt(o,r){const A={};for(const h in o)h!=="ref"&&(A[h]=o[h]);return Ut.forEach(h=>{h in r&&(A[h]=r[h])}),A}function Qt(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let A=0;A<o.length;A++)if(!Qt(o[A],r[A]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const A in o)if(!Qt(o[A],r[A]))return!1;return!0}return o===r}const Lt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function hr(o,r,A){A.push({command:Lt.addSource,args:[o,r[o]]})}function wr(o,r,A){r.push({command:Lt.removeSource,args:[o]}),A[o]=!0}function Lr(o,r,A,h){wr(o,A,h),hr(o,r,A)}function qr(o,r,A){let h;for(h in o[A])if(Object.prototype.hasOwnProperty.call(o[A],h)&&h!=="data"&&!Qt(o[A][h],r[A][h]))return!1;for(h in r[A])if(Object.prototype.hasOwnProperty.call(r[A],h)&&h!=="data"&&!Qt(o[A][h],r[A][h]))return!1;return!0}function gr(o,r,A,h,g,_){let B;for(B in r=r||{},o=o||{})Object.prototype.hasOwnProperty.call(o,B)&&(Qt(o[B],r[B])||A.push({command:_,args:[h,B,r[B],g]}));for(B in r)Object.prototype.hasOwnProperty.call(r,B)&&!Object.prototype.hasOwnProperty.call(o,B)&&(Qt(o[B],r[B])||A.push({command:_,args:[h,B,r[B],g]}))}function br(o){return o.id}function Rt(o,r){return o[r.id]=r,o}class vt{constructor(r,A,h,g){this.message=(r?`${r}: `:"")+h,g&&(this.identifier=g),A!=null&&A.__line__&&(this.line=A.__line__)}}function Cr(o){for(var r=arguments.length,A=new Array(r>1?r-1:0),h=1;h<r;h++)A[h-1]=arguments[h];for(const g of A)for(const _ in g)o[_]=g[_];return o}class Tr extends Error{constructor(r,A){super(A),this.message=A,this.key=r}}class Dr{constructor(r){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.parent=r,this.bindings={};for(const[h,g]of A)this.bindings[h]=g}concat(r){return new Dr(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Vr={kind:"null"},xt={kind:"number"},Kt={kind:"string"},rr={kind:"boolean"},Or={kind:"color"},bi={kind:"object"},Nt={kind:"value"},$r={kind:"collator"},ue={kind:"formatted"},Z={kind:"padding"},ie={kind:"resolvedImage"},le={kind:"variableAnchorOffsetCollection"};function ve(o,r){return{kind:"array",itemType:o,N:r}}function be(o){if(o.kind==="array"){const r=be(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const ke=[Vr,xt,Kt,rr,Or,ue,bi,ve(Nt),Z,ie,le];function Oe(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Oe(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const A of ke)if(!Oe(A,r))return null}}return`Expected ${be(o)} but found ${be(r)} instead.`}function Te(o,r){return r.some(A=>A.kind===o.kind)}function Ve(o,r){return r.some(A=>A==="null"?o===null:A==="array"?Array.isArray(o):A==="object"?o&&!Array.isArray(o)&&typeof o=="object":A===typeof o)}function lt(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const ht=.96422,gt=.82521,nr=4/29,sr=6/29,jt=3*sr*sr,Yt=sr*sr*sr,ur=Math.PI/180,Br=180/Math.PI;function Rr(o){return(o%=360)<0&&(o+=360),o}function Sr(o){let[r,A,h,g]=o,_,B;const F=Mt((.2225045*(r=Le(r))+.7168786*(A=Le(A))+.0606169*(h=Le(h)))/1);r===A&&A===h?_=B=F:(_=Mt((.4360747*r+.3850649*A+.1430804*h)/ht),B=Mt((.0139322*r+.0971045*A+.7141733*h)/gt));const U=116*F-16;return[U<0?0:U,500*(_-F),200*(F-B),g]}function Le(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Mt(o){return o>Yt?Math.pow(o,1/3):o/jt+nr}function yt(o){let[r,A,h,g]=o,_=(r+16)/116,B=isNaN(A)?_:_+A/500,F=isNaN(h)?_:_-h/200;return _=1*Nr(_),B=ht*Nr(B),F=gt*Nr(F),[vr(3.1338561*B-1.6168667*_-.4906146*F),vr(-.9787684*B+1.9161415*_+.033454*F),vr(.0719453*B-.2289914*_+1.4052427*F),g]}function vr(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Nr(o){return o>sr?o*o*o:jt*(o-nr)}function di(o){return parseInt(o.padEnd(2,o),16)/255}function Ii(o,r){return qn(r?o/100:o,0,1)}function qn(o,r,A){return Math.min(Math.max(r,o),A)}function Hi(o){return!o.some(Number.isNaN)}const Wi={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class ii{constructor(r,A,h){let g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,_=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;this.r=r,this.g=A,this.b=h,this.a=g,_||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[r,A,h,g]))}static parse(r){if(r instanceof ii)return r;if(typeof r!="string")return;const A=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=Wi[h];if(g){const[B,F,U]=g;return[B/255,F/255,U/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const B=h.length<6?1:2;let F=1;return[di(h.slice(F,F+=B)),di(h.slice(F,F+=B)),di(h.slice(F,F+=B)),di(h.slice(F,F+B)||"ff")]}if(h.startsWith("rgb")){const B=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(B){const[F,U,D,V,W,te,ae,oe,me,Be,Me,We]=B,je=[V||" ",ae||" ",Be].join("");if(je==="  "||je==="  /"||je===",,"||je===",,,"){const Xe=[D,te,me].join(""),At=Xe==="%%%"?100:Xe===""?255:0;if(At){const mt=[qn(+U/At,0,1),qn(+W/At,0,1),qn(+oe/At,0,1),Me?Ii(+Me,We):1];if(Hi(mt))return mt}}return}}const _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[B,F,U,D,V,W,te,ae,oe]=_,me=[U||" ",V||" ",te].join("");if(me==="  "||me==="  /"||me===",,"||me===",,,"){const Be=[+F,qn(+D,0,100),qn(+W,0,100),ae?Ii(+ae,oe):1];if(Hi(Be))return function(Me){let[We,je,Xe,At]=Me;function mt($t){const ir=($t+We/30)%12,qt=je*Math.min(Xe,1-Xe);return Xe-qt*Math.max(-1,Math.min(ir-3,9-ir,1))}return We=Rr(We),je/=100,Xe/=100,[mt(0),mt(8),mt(4),At]}(Be)}}}(r);return A?new ii(...A,!1):void 0}get rgb(){const{r,g:A,b:h,a:g}=this,_=g||1/0;return this.overwriteGetter("rgb",[r/_,A/_,h/_,g])}get hcl(){return this.overwriteGetter("hcl",function(r){const[A,h,g,_]=Sr(r),B=Math.sqrt(h*h+g*g);return[Math.round(1e4*B)?Rr(Math.atan2(g,h)*Br):NaN,B,A,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Sr(this.rgb))}overwriteGetter(r,A){return Object.defineProperty(this,r,{value:A}),A}toString(){const[r,A,h,g]=this.rgb;return`rgba(${[r,A,h].map(_=>Math.round(255*_)).join(",")},${g})`}}ii.black=new ii(0,0,0,1),ii.white=new ii(1,1,1,1),ii.transparent=new ii(0,0,0,0),ii.red=new ii(1,0,0,1);class bo{constructor(r,A,h){this.sensitivity=r?A?"variant":"case":A?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,A){return this.collator.compare(r,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class pA{constructor(r,A,h,g,_){this.text=r,this.image=A,this.scale=h,this.fontStack=g,this.textColor=_}}class Xi{constructor(r){this.sections=r}static fromString(r){return new Xi([new pA(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Xi?r:Xi.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class Dn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Dn)return r;if(typeof r=="number")return new Dn([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const A of r)if(typeof A!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Dn(r)}}toString(){return JSON.stringify(this.values)}}const dA=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Kn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Kn)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let A=0;A<r.length;A+=2){const h=r[A],g=r[A+1];if(typeof h!="string"||!dA.has(h)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new Kn(r)}}toString(){return JSON.stringify(this.values)}}class Wr{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Wr({name:r,available:!1}):null}}function xo(o,r,A,h){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof A=="number"&&A>=0&&A<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,r,A,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,r,A,h]:[o,r,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ea(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof ii||o instanceof bo||o instanceof Xi||o instanceof Dn||o instanceof Kn||o instanceof Wr)return!0;if(Array.isArray(o)){for(const r of o)if(!Ea(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!Ea(o[r]))return!1;return!0}return!1}function mi(o){if(o===null)return Vr;if(typeof o=="string")return Kt;if(typeof o=="boolean")return rr;if(typeof o=="number")return xt;if(o instanceof ii)return Or;if(o instanceof bo)return $r;if(o instanceof Xi)return ue;if(o instanceof Dn)return Z;if(o instanceof Kn)return le;if(o instanceof Wr)return ie;if(Array.isArray(o)){const r=o.length;let A;for(const h of o){const g=mi(h);if(A){if(A===g)continue;A=Nt;break}A=g}return ve(A||Nt,r)}return bi}function Xr(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof ii||o instanceof Xi||o instanceof Dn||o instanceof Kn||o instanceof Wr?o.toString():JSON.stringify(o)}class Ia{constructor(r,A){this.type=r,this.value=A}static parse(r,A){if(r.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Ea(r[1]))return A.error("invalid value");const h=r[1];let g=mi(h);const _=A.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new Ia(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ci{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const La={string:Kt,number:xt,boolean:rr,object:bi};class Ci{constructor(r,A){this.type=r,this.args=A}static parse(r,A){if(r.length<2)return A.error("Expected at least one argument.");let h,g=1;const _=r[0];if(_==="array"){let F,U;if(r.length>2){const D=r[1];if(typeof D!="string"||!(D in La)||D==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);F=La[D],g++}else F=Nt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return A.error('The length argument to "array" must be a positive integer literal',2);U=r[2],g++}h=ve(F,U)}else{if(!La[_])throw new Error(`Types doesn't contain name = ${_}`);h=La[_]}const B=[];for(;g<r.length;g++){const F=A.parse(r[g],g,Nt);if(!F)return null;B.push(F)}return new Ci(h,B)}evaluate(r){for(let A=0;A<this.args.length;A++){const h=this.args[A].evaluate(r);if(!Oe(this.type,mi(h)))return h;if(A===this.args.length-1)throw new ci(`Expected value to be of type ${be(this.type)}, but found ${be(mi(h))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Bo={"to-boolean":rr,"to-color":Or,"to-number":xt,"to-string":Kt};class $s{constructor(r,A){this.type=r,this.args=A}static parse(r,A){if(r.length<2)return A.error("Expected at least one argument.");const h=r[0];if(!Bo[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&r.length!==2)return A.error("Expected one argument.");const g=Bo[h],_=[];for(let B=1;B<r.length;B++){const F=A.parse(r[B],B,Nt);if(!F)return null;_.push(F)}return new $s(g,_)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let A,h;for(const g of this.args){if(A=g.evaluate(r),h=null,A instanceof ii)return A;if(typeof A=="string"){const _=r.parseColor(A);if(_)return _}else if(Array.isArray(A)&&(h=A.length<3||A.length>4?`Invalid rbga value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:xo(A[0],A[1],A[2],A[3]),!h))return new ii(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new ci(h||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"padding":{let A;for(const h of this.args){A=h.evaluate(r);const g=Dn.parse(A);if(g)return g}throw new ci(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"variableAnchorOffsetCollection":{let A;for(const h of this.args){A=h.evaluate(r);const g=Kn.parse(A);if(g)return g}throw new ci(`Could not parse variableAnchorOffsetCollection from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"number":{let A=null;for(const h of this.args){if(A=h.evaluate(r),A===null)return 0;const g=Number(A);if(!isNaN(g))return g}throw new ci(`Could not convert ${JSON.stringify(A)} to number.`)}case"formatted":return Xi.fromString(Xr(this.args[0].evaluate(r)));case"resolvedImage":return Wr.fromString(Xr(this.args[0].evaluate(r)));default:return Xr(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const ql=["Unknown","Point","LineString","Polygon"];class fA{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ql[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let A=this._parseColorCache[r];return A||(A=this._parseColorCache[r]=ii.parse(r)),A}}class gA{constructor(r,A){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],g=arguments.length>3?arguments[3]:void 0,_=arguments.length>4&&arguments[4]!==void 0?arguments[4]:new Dr,B=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[];this.registry=r,this.path=h,this.key=h.map(F=>`[${F}]`).join(""),this.scope=_,this.errors=B,this.expectedType=g,this._isConstant=A}parse(r,A,h,g){let _=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return A?this.concat(A,h,g)._parse(r,_):this._parse(r,_)}_parse(r,A){function h(g,_,B){return B==="assert"?new Ci(_,[g]):B==="coerce"?new $s(_,[g]):g}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=r[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let B=_.parse(r,this);if(!B)return null;if(this.expectedType){const F=this.expectedType,U=B.type;if(F.kind!=="string"&&F.kind!=="number"&&F.kind!=="boolean"&&F.kind!=="object"&&F.kind!=="array"||U.kind!=="value")if(F.kind!=="color"&&F.kind!=="formatted"&&F.kind!=="resolvedImage"||U.kind!=="value"&&U.kind!=="string")if(F.kind!=="padding"||U.kind!=="value"&&U.kind!=="number"&&U.kind!=="array")if(F.kind!=="variableAnchorOffsetCollection"||U.kind!=="value"&&U.kind!=="array"){if(this.checkSubtype(F,U))return null}else B=h(B,F,A.typeAnnotation||"coerce");else B=h(B,F,A.typeAnnotation||"coerce");else B=h(B,F,A.typeAnnotation||"coerce");else B=h(B,F,A.typeAnnotation||"assert")}if(!(B instanceof Ia)&&B.type.kind!=="resolvedImage"&&this._isConstant(B)){const F=new fA;try{B=new Ia(B.type,B.evaluate(F))}catch(U){return this.error(U.message),null}}return B}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,A,h){const g=typeof r=="number"?this.path.concat(r):this.path,_=h?this.scope.concat(h):this.scope;return new gA(this.registry,this._isConstant,g,A||null,_,this.errors)}error(r){for(var A=arguments.length,h=new Array(A>1?A-1:0),g=1;g<A;g++)h[g-1]=arguments[g];const _=`${this.key}${h.map(B=>`[${B}]`).join("")}`;this.errors.push(new Tr(_,r))}checkSubtype(r,A){const h=Oe(r,A);return h&&this.error(h),h}}class Co{constructor(r,A,h){this.type=$r,this.locale=h,this.caseSensitive=r,this.diacriticSensitive=A}static parse(r,A){if(r.length!==2)return A.error("Expected one argument.");const h=r[1];if(typeof h!="object"||Array.isArray(h))return A.error("Collator options argument must be an object.");const g=A.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,rr);if(!g)return null;const _=A.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,rr);if(!_)return null;let B=null;return h.locale&&(B=A.parse(h.locale,1,Kt),!B)?null:new Co(g,_,B)}evaluate(r){return new bo(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const ua=8192;function So(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function Fo(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function Kl(o,r){const A=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,g=Math.pow(2,r.z);return[Math.round(A*g*ua),Math.round(h*g*ua)]}function Oc(o,r,A){const h=o[0]-r[0],g=o[1]-r[1],_=o[0]-A[0],B=o[1]-A[1];return h*B-_*g==0&&h*_<=0&&g*B<=0}function Ws(o,r){let A=!1;for(let B=0,F=r.length;B<F;B++){const U=r[B];for(let D=0,V=U.length;D<V-1;D++){if(Oc(o,U[D],U[D+1]))return!1;(g=U[D])[1]>(h=o)[1]!=(_=U[D+1])[1]>h[1]&&h[0]<(_[0]-g[0])*(h[1]-g[1])/(_[1]-g[1])+g[0]&&(A=!A)}}var h,g,_;return A}function qa(o,r){for(let A=0;A<r.length;A++)if(Ws(o,r[A]))return!0;return!1}function Eo(o,r,A,h){const g=h[0]-A[0],_=h[1]-A[1],B=(o[0]-A[0])*_-g*(o[1]-A[1]),F=(r[0]-A[0])*_-g*(r[1]-A[1]);return B>0&&F<0||B<0&&F>0}function $l(o,r,A){for(const D of A)for(let V=0;V<D.length-1;++V)if((F=[(B=D[V+1])[0]-(_=D[V])[0],B[1]-_[1]])[0]*(U=[(g=r)[0]-(h=o)[0],g[1]-h[1]])[1]-F[1]*U[0]!=0&&Eo(h,g,_,B)&&Eo(_,B,h,g))return!0;var h,g,_,B,F,U;return!1}function gn(o,r){for(let A=0;A<o.length;++A)if(!Ws(o[A],r))return!1;for(let A=0;A<o.length-1;++A)if($l(o[A],o[A+1],r))return!1;return!0}function Wl(o,r){for(let A=0;A<r.length;A++)if(gn(o,r[A]))return!0;return!1}function Io(o,r,A){const h=[];for(let g=0;g<o.length;g++){const _=[];for(let B=0;B<o[g].length;B++){const F=Kl(o[g][B],A);So(r,F),_.push(F)}h.push(_)}return h}function Ur(o,r,A){const h=[];for(let g=0;g<o.length;g++){const _=Io(o[g],r,A);h.push(_)}return h}function Xl(o,r,A,h){if(o[0]<A[0]||o[0]>A[2]){const g=.5*h;let _=o[0]-A[0]>g?-h:A[0]-o[0]>g?h:0;_===0&&(_=o[0]-A[2]>g?-h:A[2]-o[0]>g?h:0),o[0]+=_}So(r,o)}function rl(o,r,A,h){const g=Math.pow(2,h.z)*ua,_=[h.x*ua,h.y*ua],B=[];for(const F of o)for(const U of F){const D=[U.x+_[0],U.y+_[1]];Xl(D,r,A,g),B.push(D)}return B}function Fs(o,r,A,h){const g=Math.pow(2,h.z)*ua,_=[h.x*ua,h.y*ua],B=[];for(const U of o){const D=[];for(const V of U){const W=[V.x+_[0],V.y+_[1]];So(r,W),D.push(W)}B.push(D)}if(r[2]-r[0]<=g/2){(F=r)[0]=F[1]=1/0,F[2]=F[3]=-1/0;for(const U of B)for(const D of U)Xl(D,r,A,g)}var F;return B}class ha{constructor(r,A){this.type=rr,this.geojson=r,this.geometries=A}static parse(r,A){if(r.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Ea(r[1])){const h=r[1];if(h.type==="FeatureCollection")for(let g=0;g<h.features.length;++g){const _=h.features[g].geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new ha(h,h.features[g].geometry)}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new ha(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new ha(h,h)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(A,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],B=A.canonicalID();if(h.type==="Polygon"){const F=Io(h.coordinates,_,B),U=rl(A.geometry(),g,_,B);if(!Fo(g,_))return!1;for(const D of U)if(!Ws(D,F))return!1}if(h.type==="MultiPolygon"){const F=Ur(h.coordinates,_,B),U=rl(A.geometry(),g,_,B);if(!Fo(g,_))return!1;for(const D of U)if(!qa(D,F))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(A,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],B=A.canonicalID();if(h.type==="Polygon"){const F=Io(h.coordinates,_,B),U=Fs(A.geometry(),g,_,B);if(!Fo(g,_))return!1;for(const D of U)if(!gn(D,F))return!1}if(h.type==="MultiPolygon"){const F=Ur(h.coordinates,_,B),U=Fs(A.geometry(),g,_,B);if(!Fo(g,_))return!1;for(const D of U)if(!Wl(D,F))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Lo{constructor(r,A){this.type=A.type,this.name=r,this.boundExpression=A}static parse(r,A){if(r.length!==2||typeof r[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const h=r[1];return A.scope.has(h)?new Lo(h,A.scope.get(h)):A.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class mn{constructor(r,A,h,g){this.name=r,this.type=A,this._evaluate=h,this.args=g}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,A){const h=r[0],g=mn.definitions[h];if(!g)return A.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,B=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,F=B.filter(D=>{let[V]=D;return!Array.isArray(V)||V.length===r.length-1});let U=null;for(const[D,V]of F){U=new gA(A.registry,Ka,A.path,null,A.scope);const W=[];let te=!1;for(let ae=1;ae<r.length;ae++){const oe=r[ae],me=Array.isArray(D)?D[ae-1]:D.type,Be=U.parse(oe,1+W.length,me);if(!Be){te=!0;break}W.push(Be)}if(!te)if(Array.isArray(D)&&D.length!==W.length)U.error(`Expected ${D.length} arguments, but found ${W.length} instead.`);else{for(let ae=0;ae<W.length;ae++){const oe=Array.isArray(D)?D[ae]:D.type,me=W[ae];U.concat(ae+1).checkSubtype(oe,me.type)}if(U.errors.length===0)return new mn(h,_,V,W)}}if(F.length===1)A.errors.push(...U.errors);else{const D=(F.length?F:B).map(W=>{let[te]=W;return ae=te,Array.isArray(ae)?`(${ae.map(be).join(", ")})`:`(${be(ae.type)}...)`;var ae}).join(" | "),V=[];for(let W=1;W<r.length;W++){const te=A.parse(r[W],1+V.length);if(!te)return null;V.push(be(te.type))}A.error(`Expected arguments of type ${D}, but found (${V.join(", ")}) instead.`)}return null}static register(r,A){mn.definitions=A;for(const h in A)r[h]=mn}}function Ka(o){if(o instanceof Lo)return Ka(o.boundExpression);if(o instanceof mn&&o.name==="error"||o instanceof Co||o instanceof ha)return!1;const r=o instanceof $s||o instanceof Ci;let A=!0;return o.eachChild(h=>{A=r?A&&Ka(h):A&&h instanceof Ia}),!!A&&mA(o)&&yA(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function mA(o){if(o instanceof mn&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof ha)return!1;let r=!0;return o.eachChild(A=>{r&&!mA(A)&&(r=!1)}),r}function To(o){if(o instanceof mn&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(A=>{r&&!To(A)&&(r=!1)}),r}function yA(o,r){if(o instanceof mn&&r.indexOf(o.name)>=0)return!1;let A=!0;return o.eachChild(h=>{A&&!yA(h,r)&&(A=!1)}),A}function pa(o,r){const A=o.length-1;let h,g,_=0,B=A,F=0;for(;_<=B;)if(F=Math.floor((_+B)/2),h=o[F],g=o[F+1],h<=r){if(F===A||r<g)return F;_=F+1}else{if(!(h>r))throw new ci("Input is not a number.");B=F-1}return 0}class $n{constructor(r,A,h){this.type=r,this.input=A,this.labels=[],this.outputs=[];for(const[g,_]of h)this.labels.push(g),this.outputs.push(_)}static parse(r,A){if(r.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return A.error("Expected an even number of arguments.");const h=A.parse(r[1],1,xt);if(!h)return null;const g=[];let _=null;A.expectedType&&A.expectedType.kind!=="value"&&(_=A.expectedType);for(let B=1;B<r.length;B+=2){const F=B===1?-1/0:r[B],U=r[B+1],D=B,V=B+1;if(typeof F!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(g.length&&g[g.length-1][0]>=F)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const W=A.parse(U,V,_);if(!W)return null;_=_||W.type,g.push([F,W])}return new $n(_,h,g)}evaluate(r){const A=this.labels,h=this.outputs;if(A.length===1)return h[0].evaluate(r);const g=this.input.evaluate(r);if(g<=A[0])return h[0].evaluate(r);const _=A.length;return g>=A[_-1]?h[_-1].evaluate(r):h[pa(A,g)].evaluate(r)}eachChild(r){r(this.input);for(const A of this.outputs)r(A)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Mr(o,r,A){return o+A*(r-o)}function vA(o,r,A){return o.map((h,g)=>Mr(h,r[g],A))}const Zi={number:Mr,color:function(o,r,A){switch(arguments.length>3&&arguments[3]!==void 0?arguments[3]:"rgb"){case"rgb":{const[g,_,B,F]=vA(o.rgb,r.rgb,A);return new ii(g,_,B,F,!1)}case"hcl":{const[g,_,B,F]=o.hcl,[U,D,V,W]=r.hcl;let te,ae;if(isNaN(g)||isNaN(U))isNaN(g)?isNaN(U)?te=NaN:(te=U,B!==1&&B!==0||(ae=D)):(te=g,V!==1&&V!==0||(ae=_));else{let We=U-g;U>g&&We>180?We-=360:U<g&&g-U>180&&(We+=360),te=g+A*We}const[oe,me,Be,Me]=function(We){let[je,Xe,At,mt]=We;return je=isNaN(je)?0:je*ur,yt([At,Math.cos(je)*Xe,Math.sin(je)*Xe,mt])}([te,ae??Mr(_,D,A),Mr(B,V,A),Mr(F,W,A)]);return new ii(oe,me,Be,Me,!1)}case"lab":{const[g,_,B,F]=yt(vA(o.lab,r.lab,A));return new ii(g,_,B,F,!1)}}},array:vA,padding:function(o,r,A){return new Dn(vA(o.values,r.values,A))},variableAnchorOffsetCollection:function(o,r,A){const h=o.values,g=r.values;if(h.length!==g.length)throw new ci(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const _=[];for(let B=0;B<h.length;B+=2){if(h[B]!==g[B])throw new ci(`Cannot interpolate values containing mismatched anchors. from[${B}]: ${h[B]}, to[${B}]: ${g[B]}`);_.push(h[B]);const[F,U]=h[B+1],[D,V]=g[B+1];_.push([Mr(F,D,A),Mr(U,V,A)])}return new Kn(_)}};class yn{constructor(r,A,h,g,_){this.type=r,this.operator=A,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[B,F]of _)this.labels.push(B),this.outputs.push(F)}static interpolationFactor(r,A,h,g){let _=0;if(r.name==="exponential")_=$a(A,r.base,h,g);else if(r.name==="linear")_=$a(A,1,h,g);else if(r.name==="cubic-bezier"){const B=r.controlPoints;_=new j(B[0],B[1],B[2],B[3]).solve($a(A,1,h,g))}return _}static parse(r,A){let[h,g,_,...B]=r;if(!Array.isArray(g)||g.length===0)return A.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const D=g[1];if(typeof D!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:D}}else{if(g[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const D=g.slice(1);if(D.length!==4||D.some(V=>typeof V!="number"||V<0||V>1))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:D}}}if(r.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(_=A.parse(_,2,xt),!_)return null;const F=[];let U=null;h==="interpolate-hcl"||h==="interpolate-lab"?U=Or:A.expectedType&&A.expectedType.kind!=="value"&&(U=A.expectedType);for(let D=0;D<B.length;D+=2){const V=B[D],W=B[D+1],te=D+3,ae=D+4;if(typeof V!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',te);if(F.length&&F[F.length-1][0]>=V)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',te);const oe=A.parse(W,ae,U);if(!oe)return null;U=U||oe.type,F.push([V,oe])}return lt(U,xt)||lt(U,Or)||lt(U,Z)||lt(U,le)||lt(U,ve(xt))?new yn(U,h,g,_,F):A.error(`Type ${be(U)} is not interpolatable.`)}evaluate(r){const A=this.labels,h=this.outputs;if(A.length===1)return h[0].evaluate(r);const g=this.input.evaluate(r);if(g<=A[0])return h[0].evaluate(r);const _=A.length;if(g>=A[_-1])return h[_-1].evaluate(r);const B=pa(A,g),F=yn.interpolationFactor(this.interpolation,g,A[B],A[B+1]),U=h[B].evaluate(r),D=h[B+1].evaluate(r);switch(this.operator){case"interpolate":return Zi[this.type.kind](U,D,F);case"interpolate-hcl":return Zi.color(U,D,F,"hcl");case"interpolate-lab":return Zi.color(U,D,F,"lab")}}eachChild(r){r(this.input);for(const A of this.outputs)r(A)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function $a(o,r,A,h){const g=h-A,_=o-A;return g===0?0:r===1?_/g:(Math.pow(r,_)-1)/(Math.pow(r,g)-1)}class Uo{constructor(r,A){this.type=r,this.args=A}static parse(r,A){if(r.length<2)return A.error("Expectected at least one argument.");let h=null;const g=A.expectedType;g&&g.kind!=="value"&&(h=g);const _=[];for(const F of r.slice(1)){const U=A.parse(F,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!U)return null;h=h||U.type,_.push(U)}if(!h)throw new Error("No output type");const B=g&&_.some(F=>Oe(g,F.type));return new Uo(B?Nt:h,_)}evaluate(r){let A,h=null,g=0;for(const _ of this.args)if(g++,h=_.evaluate(r),h&&h instanceof Wr&&!h.available&&(A||(A=h.name),h=null,g===this.args.length&&(h=A)),h!==null)break;return h}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class Po{constructor(r,A){this.type=A.type,this.bindings=[].concat(r),this.result=A}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const A of this.bindings)r(A[1]);r(this.result)}static parse(r,A){if(r.length<4)return A.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const h=[];for(let _=1;_<r.length-1;_+=2){const B=r[_];if(typeof B!="string")return A.error(`Expected string, but found ${typeof B} instead.`,_);if(/[^a-zA-Z0-9_]/.test(B))return A.error("Variable names must contain only alphanumeric characters or '_'.",_);const F=A.parse(r[_+1],_+1);if(!F)return null;h.push([B,F])}const g=A.parse(r[r.length-1],r.length-1,A.expectedType,h);return g?new Po(h,g):null}outputDefined(){return this.result.outputDefined()}}class _A{constructor(r,A,h){this.type=r,this.index=A,this.input=h}static parse(r,A){if(r.length!==3)return A.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=A.parse(r[1],1,xt),g=A.parse(r[2],2,ve(A.expectedType||Nt));return h&&g?new _A(g.type.itemType,h,g):null}evaluate(r){const A=this.index.evaluate(r),h=this.input.evaluate(r);if(A<0)throw new ci(`Array index out of bounds: ${A} < 0.`);if(A>=h.length)throw new ci(`Array index out of bounds: ${A} > ${h.length-1}.`);if(A!==Math.floor(A))throw new ci(`Array index must be an integer, but found ${A} instead.`);return h[A]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class wA{constructor(r,A){this.type=rr,this.needle=r,this.haystack=A}static parse(r,A){if(r.length!==3)return A.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=A.parse(r[1],1,Nt),g=A.parse(r[2],2,Nt);return h&&g?Te(h.type,[rr,Kt,xt,Vr,Nt])?new wA(h,g):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${be(h.type)} instead`):null}evaluate(r){const A=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!h)return!1;if(!Ve(A,["boolean","string","number","null"]))throw new ci(`Expected first argument to be of type boolean, string, number or null, but found ${be(mi(A))} instead.`);if(!Ve(h,["string","array"]))throw new ci(`Expected second argument to be of type array or string, but found ${be(mi(h))} instead.`);return h.indexOf(A)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Es{constructor(r,A,h){this.type=xt,this.needle=r,this.haystack=A,this.fromIndex=h}static parse(r,A){if(r.length<=2||r.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=A.parse(r[1],1,Nt),g=A.parse(r[2],2,Nt);if(!h||!g)return null;if(!Te(h.type,[rr,Kt,xt,Vr,Nt]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${be(h.type)} instead`);if(r.length===4){const _=A.parse(r[3],3,xt);return _?new Es(h,g,_):null}return new Es(h,g)}evaluate(r){const A=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!Ve(A,["boolean","string","number","null"]))throw new ci(`Expected first argument to be of type boolean, string, number or null, but found ${be(mi(A))} instead.`);if(!Ve(h,["string","array"]))throw new ci(`Expected second argument to be of type array or string, but found ${be(mi(h))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(r);return h.indexOf(A,g)}return h.indexOf(A)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class da{constructor(r,A,h,g,_,B){this.inputType=r,this.type=A,this.input=h,this.cases=g,this.outputs=_,this.otherwise=B}static parse(r,A){if(r.length<5)return A.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return A.error("Expected an even number of arguments.");let h,g;A.expectedType&&A.expectedType.kind!=="value"&&(g=A.expectedType);const _={},B=[];for(let D=2;D<r.length-1;D+=2){let V=r[D];const W=r[D+1];Array.isArray(V)||(V=[V]);const te=A.concat(D);if(V.length===0)return te.error("Expected at least one branch label.");for(const oe of V){if(typeof oe!="number"&&typeof oe!="string")return te.error("Branch labels must be numbers or strings.");if(typeof oe=="number"&&Math.abs(oe)>Number.MAX_SAFE_INTEGER)return te.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof oe=="number"&&Math.floor(oe)!==oe)return te.error("Numeric branch labels must be integer values.");if(h){if(te.checkSubtype(h,mi(oe)))return null}else h=mi(oe);if(_[String(oe)]!==void 0)return te.error("Branch labels must be unique.");_[String(oe)]=B.length}const ae=A.parse(W,D,g);if(!ae)return null;g=g||ae.type,B.push(ae)}const F=A.parse(r[1],1,Nt);if(!F)return null;const U=A.parse(r[r.length-1],r.length-1,g);return U?F.type.kind!=="value"&&A.concat(1).checkSubtype(h,F.type)?null:new da(h,g,F,_,B,U):null}evaluate(r){const A=this.input.evaluate(r);return(mi(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class il{constructor(r,A,h){this.type=r,this.branches=A,this.otherwise=h}static parse(r,A){if(r.length<4)return A.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return A.error("Expected an odd number of arguments.");let h;A.expectedType&&A.expectedType.kind!=="value"&&(h=A.expectedType);const g=[];for(let B=1;B<r.length-1;B+=2){const F=A.parse(r[B],B,rr);if(!F)return null;const U=A.parse(r[B+1],B+1,h);if(!U)return null;g.push([F,U]),h=h||U.type}const _=A.parse(r[r.length-1],r.length-1,h);if(!_)return null;if(!h)throw new Error("Can't infer output type");return new il(h,g,_)}evaluate(r){for(const[A,h]of this.branches)if(A.evaluate(r))return h.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[A,h]of this.branches)r(A),r(h);r(this.otherwise)}outputDefined(){return this.branches.every(r=>{let[A,h]=r;return h.outputDefined()})&&this.otherwise.outputDefined()}}class Xs{constructor(r,A,h,g){this.type=r,this.input=A,this.beginIndex=h,this.endIndex=g}static parse(r,A){if(r.length<=2||r.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=A.parse(r[1],1,Nt),g=A.parse(r[2],2,xt);if(!h||!g)return null;if(!Te(h.type,[ve(Nt),Kt,Nt]))return A.error(`Expected first argument to be of type array or string, but found ${be(h.type)} instead`);if(r.length===4){const _=A.parse(r[3],3,xt);return _?new Xs(h.type,h,g,_):null}return new Xs(h.type,h,g)}evaluate(r){const A=this.input.evaluate(r),h=this.beginIndex.evaluate(r);if(!Ve(A,["string","array"]))throw new ci(`Expected first argument to be of type array or string, but found ${be(mi(A))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(r);return A.slice(h,g)}return A.slice(h)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Is(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function bA(o,r,A,h){return h.compare(r,A)===0}function Ls(o,r,A){const h=o!=="=="&&o!=="!=";return class o4{constructor(_,B,F){this.type=rr,this.lhs=_,this.rhs=B,this.collator=F,this.hasUntypedArgument=_.type.kind==="value"||B.type.kind==="value"}static parse(_,B){if(_.length!==3&&_.length!==4)return B.error("Expected two or three arguments.");const F=_[0];let U=B.parse(_[1],1,Nt);if(!U)return null;if(!Is(F,U.type))return B.concat(1).error(`"${F}" comparisons are not supported for type '${be(U.type)}'.`);let D=B.parse(_[2],2,Nt);if(!D)return null;if(!Is(F,D.type))return B.concat(2).error(`"${F}" comparisons are not supported for type '${be(D.type)}'.`);if(U.type.kind!==D.type.kind&&U.type.kind!=="value"&&D.type.kind!=="value")return B.error(`Cannot compare types '${be(U.type)}' and '${be(D.type)}'.`);h&&(U.type.kind==="value"&&D.type.kind!=="value"?U=new Ci(D.type,[U]):U.type.kind!=="value"&&D.type.kind==="value"&&(D=new Ci(U.type,[D])));let V=null;if(_.length===4){if(U.type.kind!=="string"&&D.type.kind!=="string"&&U.type.kind!=="value"&&D.type.kind!=="value")return B.error("Cannot use collator to compare non-string types.");if(V=B.parse(_[3],3,$r),!V)return null}return new o4(U,D,V)}evaluate(_){const B=this.lhs.evaluate(_),F=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){const U=mi(B),D=mi(F);if(U.kind!==D.kind||U.kind!=="string"&&U.kind!=="number")throw new ci(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${U.kind}, ${D.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const U=mi(B),D=mi(F);if(U.kind!=="string"||D.kind!=="string")return r(_,B,F)}return this.collator?A(_,B,F,this.collator.evaluate(_)):r(_,B,F)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const Rc=Ls("==",function(o,r,A){return r===A},bA),xA=Ls("!=",function(o,r,A){return r!==A},function(o,r,A,h){return!bA(0,r,A,h)}),zc=Ls("<",function(o,r,A){return r<A},function(o,r,A,h){return h.compare(r,A)<0}),nl=Ls(">",function(o,r,A){return r>A},function(o,r,A,h){return h.compare(r,A)>0}),sl=Ls("<=",function(o,r,A){return r<=A},function(o,r,A,h){return h.compare(r,A)<=0}),Zl=Ls(">=",function(o,r,A){return r>=A},function(o,r,A,h){return h.compare(r,A)>=0});class Wa{constructor(r,A,h,g,_){this.type=Kt,this.number=r,this.locale=A,this.currency=h,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(r,A){if(r.length!==3)return A.error("Expected two arguments.");const h=A.parse(r[1],1,xt);if(!h)return null;const g=r[2];if(typeof g!="object"||Array.isArray(g))return A.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=A.parse(g.locale,1,Kt),!_))return null;let B=null;if(g.currency&&(B=A.parse(g.currency,1,Kt),!B))return null;let F=null;if(g["min-fraction-digits"]&&(F=A.parse(g["min-fraction-digits"],1,xt),!F))return null;let U=null;return g["max-fraction-digits"]&&(U=A.parse(g["max-fraction-digits"],1,xt),!U)?null:new Wa(h,_,B,F,U)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Xa{constructor(r){this.type=ue,this.sections=r}static parse(r,A){if(r.length<2)return A.error("Expected at least one argument.");const h=r[1];if(!Array.isArray(h)&&typeof h=="object")return A.error("First argument must be an image or text section.");const g=[];let _=!1;for(let B=1;B<=r.length-1;++B){const F=r[B];if(_&&typeof F=="object"&&!Array.isArray(F)){_=!1;let U=null;if(F["font-scale"]&&(U=A.parse(F["font-scale"],1,xt),!U))return null;let D=null;if(F["text-font"]&&(D=A.parse(F["text-font"],1,ve(Kt)),!D))return null;let V=null;if(F["text-color"]&&(V=A.parse(F["text-color"],1,Or),!V))return null;const W=g[g.length-1];W.scale=U,W.font=D,W.textColor=V}else{const U=A.parse(r[B],1,Nt);if(!U)return null;const D=U.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:U,scale:null,font:null,textColor:null})}}return new Xa(g)}evaluate(r){return new Xi(this.sections.map(A=>{const h=A.content.evaluate(r);return mi(h)===ie?new pA("",h,null,null,null):new pA(Xr(h),null,A.scale?A.scale.evaluate(r):null,A.font?A.font.evaluate(r).join(","):null,A.textColor?A.textColor.evaluate(r):null)}))}eachChild(r){for(const A of this.sections)r(A.content),A.scale&&r(A.scale),A.font&&r(A.font),A.textColor&&r(A.textColor)}outputDefined(){return!1}}class Qo{constructor(r){this.type=ie,this.input=r}static parse(r,A){if(r.length!==2)return A.error("Expected two arguments.");const h=A.parse(r[1],1,Kt);return h?new Qo(h):A.error("No image name provided.")}evaluate(r){const A=this.input.evaluate(r),h=Wr.fromString(A);return h&&r.availableImages&&(h.available=r.availableImages.indexOf(A)>-1),h}eachChild(r){r(this.input)}outputDefined(){return!1}}class BA{constructor(r){this.type=xt,this.input=r}static parse(r,A){if(r.length!==2)return A.error(`Expected 1 argument, but found ${r.length-1} instead.`);const h=A.parse(r[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${be(h.type)} instead.`):new BA(h):null}evaluate(r){const A=this.input.evaluate(r);if(typeof A=="string"||Array.isArray(A))return A.length;throw new ci(`Expected value to be of type string or array, but found ${be(mi(A))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Za={"==":Rc,"!=":xA,">":nl,"<":zc,">=":Zl,"<=":sl,array:Ci,at:_A,boolean:Ci,case:il,coalesce:Uo,collator:Co,format:Xa,image:Qo,in:wA,"index-of":Es,interpolate:yn,"interpolate-hcl":yn,"interpolate-lab":yn,length:BA,let:Po,literal:Ia,match:da,number:Ci,"number-format":Wa,object:Ci,slice:Xs,step:$n,string:Ci,"to-boolean":$s,"to-color":$s,"to-number":$s,"to-string":$s,var:Lo,within:ha};function Mo(o,r){let[A,h,g,_]=r;A=A.evaluate(o),h=h.evaluate(o),g=g.evaluate(o);const B=_?_.evaluate(o):1,F=xo(A,h,g,B);if(F)throw new ci(F);return new ii(A/255,h/255,g/255,B,!1)}function Ya(o,r){return o in r}function ko(o,r){const A=r[o];return A===void 0?null:A}function Wn(o){return{type:o}}function CA(o){return{result:"success",value:o}}function P(o){return{result:"error",value:o}}function J(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Ce(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function qe(o){return!!o.expression&&o.expression.interpolated}function Ke(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function ct(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Tt(o){return o}function wt(o,r){const A=r.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",g=h||!(h||o.property!==void 0),_=o.type||(qe(r)?"exponential":"interval");if(A||r.type==="padding"){const V=A?ii.parse:Dn.parse;(o=Cr({},o)).stops&&(o.stops=o.stops.map(W=>[W[0],V(W[1])])),o.default=V(o.default?o.default:r.default)}if(o.colorSpace&&(B=o.colorSpace)!=="rgb"&&B!=="hcl"&&B!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var B;let F,U,D;if(_==="exponential")F=Kr;else if(_==="interval")F=cr;else if(_==="categorical"){F=ar,U=Object.create(null);for(const V of o.stops)U[V[0]]=V[1];D=typeof o.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);F=Li}if(h){const V={},W=[];for(let oe=0;oe<o.stops.length;oe++){const me=o.stops[oe],Be=me[0].zoom;V[Be]===void 0&&(V[Be]={zoom:Be,type:o.type,property:o.property,default:o.default,stops:[]},W.push(Be)),V[Be].stops.push([me[0].value,me[1]])}const te=[];for(const oe of W)te.push([V[oe].zoom,wt(V[oe],r)]);const ae={name:"linear"};return{kind:"composite",interpolationType:ae,interpolationFactor:yn.interpolationFactor.bind(void 0,ae),zoomStops:te.map(oe=>oe[0]),evaluate:(oe,me)=>{let{zoom:Be}=oe;return Kr({stops:te,base:o.base},r,Be).evaluate(Be,me)}}}if(g){const V=_==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:yn.interpolationFactor.bind(void 0,V),zoomStops:o.stops.map(W=>W[0]),evaluate:W=>{let{zoom:te}=W;return F(o,r,te,U,D)}}}return{kind:"source",evaluate(V,W){const te=W&&W.properties?W.properties[o.property]:void 0;return te===void 0?mr(o.default,r.default):F(o,r,te,U,D)}}}function mr(o,r,A){return o!==void 0?o:r!==void 0?r:A!==void 0?A:void 0}function ar(o,r,A,h,g){return mr(typeof A===g?h[A]:void 0,o.default,r.default)}function cr(o,r,A){if(Ke(A)!=="number")return mr(o.default,r.default);const h=o.stops.length;if(h===1||A<=o.stops[0][0])return o.stops[0][1];if(A>=o.stops[h-1][0])return o.stops[h-1][1];const g=pa(o.stops.map(_=>_[0]),A);return o.stops[g][1]}function Kr(o,r,A){const h=o.base!==void 0?o.base:1;if(Ke(A)!=="number")return mr(o.default,r.default);const g=o.stops.length;if(g===1||A<=o.stops[0][0])return o.stops[0][1];if(A>=o.stops[g-1][0])return o.stops[g-1][1];const _=pa(o.stops.map(V=>V[0]),A),B=function(V,W,te,ae){const oe=ae-te,me=V-te;return oe===0?0:W===1?me/oe:(Math.pow(W,me)-1)/(Math.pow(W,oe)-1)}(A,h,o.stops[_][0],o.stops[_+1][0]),F=o.stops[_][1],U=o.stops[_+1][1],D=Zi[r.type]||Tt;return typeof F.evaluate=="function"?{evaluate(){for(var V=arguments.length,W=new Array(V),te=0;te<V;te++)W[te]=arguments[te];const ae=F.evaluate.apply(void 0,W),oe=U.evaluate.apply(void 0,W);if(ae!==void 0&&oe!==void 0)return D(ae,oe,B,o.colorSpace)}}:D(F,U,B,o.colorSpace)}function Li(o,r,A){switch(r.type){case"color":A=ii.parse(A);break;case"formatted":A=Xi.fromString(A.toString());break;case"resolvedImage":A=Wr.fromString(A.toString());break;case"padding":A=Dn.parse(A);break;default:Ke(A)===r.type||r.type==="enum"&&r.values[A]||(A=void 0)}return mr(A,o.default,r.default)}mn.register(Za,{error:[{kind:"error"},[Kt],(o,r)=>{let[A]=r;throw new ci(A.evaluate(o))}],typeof:[Kt,[Nt],(o,r)=>{let[A]=r;return be(mi(A.evaluate(o)))}],"to-rgba":[ve(xt,4),[Or],(o,r)=>{let[A]=r;const[h,g,_,B]=A.evaluate(o).rgb;return[255*h,255*g,255*_,B]}],rgb:[Or,[xt,xt,xt],Mo],rgba:[Or,[xt,xt,xt,xt],Mo],has:{type:rr,overloads:[[[Kt],(o,r)=>{let[A]=r;return Ya(A.evaluate(o),o.properties())}],[[Kt,bi],(o,r)=>{let[A,h]=r;return Ya(A.evaluate(o),h.evaluate(o))}]]},get:{type:Nt,overloads:[[[Kt],(o,r)=>{let[A]=r;return ko(A.evaluate(o),o.properties())}],[[Kt,bi],(o,r)=>{let[A,h]=r;return ko(A.evaluate(o),h.evaluate(o))}]]},"feature-state":[Nt,[Kt],(o,r)=>{let[A]=r;return ko(A.evaluate(o),o.featureState||{})}],properties:[bi,[],o=>o.properties()],"geometry-type":[Kt,[],o=>o.geometryType()],id:[Nt,[],o=>o.id()],zoom:[xt,[],o=>o.globals.zoom],"heatmap-density":[xt,[],o=>o.globals.heatmapDensity||0],"line-progress":[xt,[],o=>o.globals.lineProgress||0],accumulated:[Nt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[xt,Wn(xt),(o,r)=>{let A=0;for(const h of r)A+=h.evaluate(o);return A}],"*":[xt,Wn(xt),(o,r)=>{let A=1;for(const h of r)A*=h.evaluate(o);return A}],"-":{type:xt,overloads:[[[xt,xt],(o,r)=>{let[A,h]=r;return A.evaluate(o)-h.evaluate(o)}],[[xt],(o,r)=>{let[A]=r;return-A.evaluate(o)}]]},"/":[xt,[xt,xt],(o,r)=>{let[A,h]=r;return A.evaluate(o)/h.evaluate(o)}],"%":[xt,[xt,xt],(o,r)=>{let[A,h]=r;return A.evaluate(o)%h.evaluate(o)}],ln2:[xt,[],()=>Math.LN2],pi:[xt,[],()=>Math.PI],e:[xt,[],()=>Math.E],"^":[xt,[xt,xt],(o,r)=>{let[A,h]=r;return Math.pow(A.evaluate(o),h.evaluate(o))}],sqrt:[xt,[xt],(o,r)=>{let[A]=r;return Math.sqrt(A.evaluate(o))}],log10:[xt,[xt],(o,r)=>{let[A]=r;return Math.log(A.evaluate(o))/Math.LN10}],ln:[xt,[xt],(o,r)=>{let[A]=r;return Math.log(A.evaluate(o))}],log2:[xt,[xt],(o,r)=>{let[A]=r;return Math.log(A.evaluate(o))/Math.LN2}],sin:[xt,[xt],(o,r)=>{let[A]=r;return Math.sin(A.evaluate(o))}],cos:[xt,[xt],(o,r)=>{let[A]=r;return Math.cos(A.evaluate(o))}],tan:[xt,[xt],(o,r)=>{let[A]=r;return Math.tan(A.evaluate(o))}],asin:[xt,[xt],(o,r)=>{let[A]=r;return Math.asin(A.evaluate(o))}],acos:[xt,[xt],(o,r)=>{let[A]=r;return Math.acos(A.evaluate(o))}],atan:[xt,[xt],(o,r)=>{let[A]=r;return Math.atan(A.evaluate(o))}],min:[xt,Wn(xt),(o,r)=>Math.min(...r.map(A=>A.evaluate(o)))],max:[xt,Wn(xt),(o,r)=>Math.max(...r.map(A=>A.evaluate(o)))],abs:[xt,[xt],(o,r)=>{let[A]=r;return Math.abs(A.evaluate(o))}],round:[xt,[xt],(o,r)=>{let[A]=r;const h=A.evaluate(o);return h<0?-Math.round(-h):Math.round(h)}],floor:[xt,[xt],(o,r)=>{let[A]=r;return Math.floor(A.evaluate(o))}],ceil:[xt,[xt],(o,r)=>{let[A]=r;return Math.ceil(A.evaluate(o))}],"filter-==":[rr,[Kt,Nt],(o,r)=>{let[A,h]=r;return o.properties()[A.value]===h.value}],"filter-id-==":[rr,[Nt],(o,r)=>{let[A]=r;return o.id()===A.value}],"filter-type-==":[rr,[Kt],(o,r)=>{let[A]=r;return o.geometryType()===A.value}],"filter-<":[rr,[Kt,Nt],(o,r)=>{let[A,h]=r;const g=o.properties()[A.value],_=h.value;return typeof g==typeof _&&g<_}],"filter-id-<":[rr,[Nt],(o,r)=>{let[A]=r;const h=o.id(),g=A.value;return typeof h==typeof g&&h<g}],"filter->":[rr,[Kt,Nt],(o,r)=>{let[A,h]=r;const g=o.properties()[A.value],_=h.value;return typeof g==typeof _&&g>_}],"filter-id->":[rr,[Nt],(o,r)=>{let[A]=r;const h=o.id(),g=A.value;return typeof h==typeof g&&h>g}],"filter-<=":[rr,[Kt,Nt],(o,r)=>{let[A,h]=r;const g=o.properties()[A.value],_=h.value;return typeof g==typeof _&&g<=_}],"filter-id-<=":[rr,[Nt],(o,r)=>{let[A]=r;const h=o.id(),g=A.value;return typeof h==typeof g&&h<=g}],"filter->=":[rr,[Kt,Nt],(o,r)=>{let[A,h]=r;const g=o.properties()[A.value],_=h.value;return typeof g==typeof _&&g>=_}],"filter-id->=":[rr,[Nt],(o,r)=>{let[A]=r;const h=o.id(),g=A.value;return typeof h==typeof g&&h>=g}],"filter-has":[rr,[Nt],(o,r)=>{let[A]=r;return A.value in o.properties()}],"filter-has-id":[rr,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[rr,[ve(Kt)],(o,r)=>{let[A]=r;return A.value.indexOf(o.geometryType())>=0}],"filter-id-in":[rr,[ve(Nt)],(o,r)=>{let[A]=r;return A.value.indexOf(o.id())>=0}],"filter-in-small":[rr,[Kt,ve(Nt)],(o,r)=>{let[A,h]=r;return h.value.indexOf(o.properties()[A.value])>=0}],"filter-in-large":[rr,[Kt,ve(Nt)],(o,r)=>{let[A,h]=r;return function(g,_,B,F){for(;B<=F;){const U=B+F>>1;if(_[U]===g)return!0;_[U]>g?F=U-1:B=U+1}return!1}(o.properties()[A.value],h.value,0,h.value.length-1)}],all:{type:rr,overloads:[[[rr,rr],(o,r)=>{let[A,h]=r;return A.evaluate(o)&&h.evaluate(o)}],[Wn(rr),(o,r)=>{for(const A of r)if(!A.evaluate(o))return!1;return!0}]]},any:{type:rr,overloads:[[[rr,rr],(o,r)=>{let[A,h]=r;return A.evaluate(o)||h.evaluate(o)}],[Wn(rr),(o,r)=>{for(const A of r)if(A.evaluate(o))return!0;return!1}]]},"!":[rr,[rr],(o,r)=>{let[A]=r;return!A.evaluate(o)}],"is-supported-script":[rr,[Kt],(o,r)=>{let[A]=r;const h=o.globals&&o.globals.isSupportedScript;return!h||h(A.evaluate(o))}],upcase:[Kt,[Kt],(o,r)=>{let[A]=r;return A.evaluate(o).toUpperCase()}],downcase:[Kt,[Kt],(o,r)=>{let[A]=r;return A.evaluate(o).toLowerCase()}],concat:[Kt,Wn(Nt),(o,r)=>r.map(A=>Xr(A.evaluate(o))).join("")],"resolved-locale":[Kt,[$r],(o,r)=>{let[A]=r;return A.evaluate(o).resolvedLocale()}]});class ki{constructor(r,A){var h;this.expression=r,this._warningHistory={},this._evaluator=new fA,this._defaultValue=A?(h=A).type==="color"&&ct(h.default)?new ii(0,0,0,0):h.type==="color"?ii.parse(h.default)||null:h.type==="padding"?Dn.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Kn.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=A&&A.type==="enum"?A.values:null}evaluateWithoutErrorHandling(r,A,h,g,_,B){return this._evaluator.globals=r,this._evaluator.feature=A,this._evaluator.featureState=h,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=B,this.expression.evaluate(this._evaluator)}evaluate(r,A,h,g,_,B){this._evaluator.globals=r,this._evaluator.feature=A||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=B||null;try{const F=this.expression.evaluate(this._evaluator);if(F==null||typeof F=="number"&&F!=F)return this._defaultValue;if(this._enumValues&&!(F in this._enumValues))throw new ci(`Expected value to be one of ${Object.keys(this._enumValues).map(U=>JSON.stringify(U)).join(", ")}, but found ${JSON.stringify(F)} instead.`);return F}catch(F){return this._warningHistory[F.message]||(this._warningHistory[F.message]=!0,typeof console<"u"&&console.warn(F.message)),this._defaultValue}}}function Di(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Za}function Yi(o,r){const A=new gA(Za,Ka,[],r?function(g){const _={color:Or,string:Kt,number:xt,enum:Kt,boolean:rr,formatted:ue,padding:Z,resolvedImage:ie,variableAnchorOffsetCollection:le};return g.type==="array"?ve(_[g.value]||Nt,g.length):_[g.type]}(r):void 0),h=A.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?CA(new ki(h,r)):P(A.errors)}class qi{constructor(r,A){this.kind=r,this._styleExpression=A,this.isStateDependent=r!=="constant"&&!To(A.expression)}evaluateWithoutErrorHandling(r,A,h,g,_,B){return this._styleExpression.evaluateWithoutErrorHandling(r,A,h,g,_,B)}evaluate(r,A,h,g,_,B){return this._styleExpression.evaluate(r,A,h,g,_,B)}}class Xn{constructor(r,A,h,g){this.kind=r,this.zoomStops=h,this._styleExpression=A,this.isStateDependent=r!=="camera"&&!To(A.expression),this.interpolationType=g}evaluateWithoutErrorHandling(r,A,h,g,_,B){return this._styleExpression.evaluateWithoutErrorHandling(r,A,h,g,_,B)}evaluate(r,A,h,g,_,B){return this._styleExpression.evaluate(r,A,h,g,_,B)}interpolationFactor(r,A,h){return this.interpolationType?yn.interpolationFactor(this.interpolationType,r,A,h):0}}function Zn(o,r){const A=Yi(o,r);if(A.result==="error")return A;const h=A.value.expression,g=mA(h);if(!g&&!J(r))return P([new Tr("","data expressions not supported")]);const _=yA(h,["zoom"]);if(!_&&!Ce(r))return P([new Tr("","zoom expressions not supported")]);const B=Ja(h);return B||_?B instanceof Tr?P([B]):B instanceof yn&&!qe(r)?P([new Tr("",'"interpolate" expressions cannot be used with this property')]):CA(B?new Xn(g?"camera":"composite",A.value,B.labels,B instanceof yn?B.interpolation:void 0):new qi(g?"constant":"source",A.value)):P([new Tr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class As{constructor(r,A){this._parameters=r,this._specification=A,Cr(this,wt(this._parameters,this._specification))}static deserialize(r){return new As(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Ja(o){let r=null;if(o instanceof Po)r=Ja(o.result);else if(o instanceof Uo){for(const A of o.args)if(r=Ja(A),r)break}else(o instanceof $n||o instanceof yn)&&o.input instanceof mn&&o.input.name==="zoom"&&(r=o);return r instanceof Tr||o.eachChild(A=>{const h=Ja(A);h instanceof Tr?r=h:!r&&h?r=new Tr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&h&&r!==h&&(r=new Tr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Ta(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!Ta(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const al={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function eo(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Ta(o)||(o=Ua(o));const r=Yi(o,al);if(r.result==="error")throw new Error(r.value.map(A=>`${A.key}: ${A.message}`).join(", "));return{filter:(A,h,g)=>r.value.evaluate(A,h,{},g),needGeometry:SA(o)}}function ol(o,r){return o<r?-1:o>r?1:0}function SA(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(SA(o[r]))return!0;return!1}function Ua(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?Ln(o[1],o[2],"=="):r==="!="?fa(Ln(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Ln(o[1],o[2],r):r==="any"?(A=o.slice(1),["any"].concat(A.map(Ua))):r==="all"?["all"].concat(o.slice(1).map(Ua)):r==="none"?["all"].concat(o.slice(1).map(Ua).map(fa)):r==="in"?Do(o[1],o.slice(2)):r==="!in"?fa(Do(o[1],o.slice(2))):r==="has"?No(o[1]):r==="!has"?fa(No(o[1])):r!=="within"||o;var A}function Ln(o,r,A){switch(o){case"$type":return[`filter-type-${A}`,r];case"$id":return[`filter-id-${A}`,r];default:return[`filter-${A}`,o,r]}}function Do(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(A=>typeof A!=typeof r[0])?["filter-in-large",o,["literal",r.sort(ol)]]:["filter-in-small",o,["literal",r]]}}function No(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function fa(o){return["!",o]}function to(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let g="[";for(const _ of o)g+=`${to(_)},`;return`${g}]`}const A=Object.keys(o).sort();let h="{";for(let g=0;g<A.length;g++)h+=`${JSON.stringify(A[g])}:${to(o[A[g]])},`;return`${h}}`}function vn(o){let r="";for(const A of Ut)r+=`/${to(o[A])}`;return r}function Yl(o){const r=o.value;return r?[new vt(o.key,r,"constants have been deprecated as of v8")]:[]}function yi(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function ga(o){if(Array.isArray(o))return o.map(ga);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const A in o)r[A]=ga(o[A]);return r}return yi(o)}function Ti(o){const r=o.key,A=o.value,h=o.valueSpec||{},g=o.objectElementValidators||{},_=o.style,B=o.styleSpec,F=o.validateSpec;let U=[];const D=Ke(A);if(D!=="object")return[new vt(r,A,`object expected, ${D} found`)];for(const V in A){const W=V.split(".")[0],te=h[W]||h["*"];let ae;if(g[W])ae=g[W];else if(h[W])ae=F;else if(g["*"])ae=g["*"];else{if(!h["*"]){U.push(new vt(r,A[V],`unknown property "${V}"`));continue}ae=F}U=U.concat(ae({key:(r&&`${r}.`)+V,value:A[V],valueSpec:te,style:_,styleSpec:B,object:A,objectKey:V,validateSpec:F},A))}for(const V in h)g[V]||h[V].required&&h[V].default===void 0&&A[V]===void 0&&U.push(new vt(r,A,`missing required property "${V}"`));return U}function ma(o){const r=o.value,A=o.valueSpec,h=o.style,g=o.styleSpec,_=o.key,B=o.arrayElementValidator||o.validateSpec;if(Ke(r)!=="array")return[new vt(_,r,`array expected, ${Ke(r)} found`)];if(A.length&&r.length!==A.length)return[new vt(_,r,`array length ${A.length} expected, length ${r.length} found`)];if(A["min-length"]&&r.length<A["min-length"])return[new vt(_,r,`array length at least ${A["min-length"]} expected, length ${r.length} found`)];let F={type:A.value,values:A.values};g.$version<7&&(F.function=A.function),Ke(A.value)==="object"&&(F=A.value);let U=[];for(let D=0;D<r.length;D++)U=U.concat(B({array:r,arrayIndex:D,value:r[D],valueSpec:F,validateSpec:o.validateSpec,style:h,styleSpec:g,key:`${_}[${D}]`}));return U}function Oo(o){const r=o.key,A=o.value,h=o.valueSpec;let g=Ke(A);return g==="number"&&A!=A&&(g="NaN"),g!=="number"?[new vt(r,A,`number expected, ${g} found`)]:"minimum"in h&&A<h.minimum?[new vt(r,A,`${A} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&A>h.maximum?[new vt(r,A,`${A} is greater than the maximum value ${h.maximum}`)]:[]}function FA(o){const r=o.valueSpec,A=yi(o.value.type);let h,g,_,B={};const F=A!=="categorical"&&o.value.property===void 0,U=!F,D=Ke(o.value.stops)==="array"&&Ke(o.value.stops[0])==="array"&&Ke(o.value.stops[0][0])==="object",V=Ti({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(ae){if(A==="identity")return[new vt(ae.key,ae.value,'identity function may not have a "stops" property')];let oe=[];const me=ae.value;return oe=oe.concat(ma({key:ae.key,value:me,valueSpec:ae.valueSpec,validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec,arrayElementValidator:W})),Ke(me)==="array"&&me.length===0&&oe.push(new vt(ae.key,me,"array must have at least one stop")),oe},default:function(ae){return ae.validateSpec({key:ae.key,value:ae.value,valueSpec:r,validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec})}}});return A==="identity"&&F&&V.push(new vt(o.key,o.value,'missing required property "property"')),A==="identity"||o.value.stops||V.push(new vt(o.key,o.value,'missing required property "stops"')),A==="exponential"&&o.valueSpec.expression&&!qe(o.valueSpec)&&V.push(new vt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(U&&!J(o.valueSpec)?V.push(new vt(o.key,o.value,"property functions not supported")):F&&!Ce(o.valueSpec)&&V.push(new vt(o.key,o.value,"zoom functions not supported"))),A!=="categorical"&&!D||o.value.property!==void 0||V.push(new vt(o.key,o.value,'"property" property is required')),V;function W(ae){let oe=[];const me=ae.value,Be=ae.key;if(Ke(me)!=="array")return[new vt(Be,me,`array expected, ${Ke(me)} found`)];if(me.length!==2)return[new vt(Be,me,`array length 2 expected, length ${me.length} found`)];if(D){if(Ke(me[0])!=="object")return[new vt(Be,me,`object expected, ${Ke(me[0])} found`)];if(me[0].zoom===void 0)return[new vt(Be,me,"object stop key must have zoom")];if(me[0].value===void 0)return[new vt(Be,me,"object stop key must have value")];if(_&&_>yi(me[0].zoom))return[new vt(Be,me[0].zoom,"stop zoom values must appear in ascending order")];yi(me[0].zoom)!==_&&(_=yi(me[0].zoom),g=void 0,B={}),oe=oe.concat(Ti({key:`${Be}[0]`,value:me[0],valueSpec:{zoom:{}},validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec,objectElementValidators:{zoom:Oo,value:te}}))}else oe=oe.concat(te({key:`${Be}[0]`,value:me[0],valueSpec:{},validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec},me));return Di(ga(me[1]))?oe.concat([new vt(`${Be}[1]`,me[1],"expressions are not allowed in function stops.")]):oe.concat(ae.validateSpec({key:`${Be}[1]`,value:me[1],valueSpec:r,validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec}))}function te(ae,oe){const me=Ke(ae.value),Be=yi(ae.value),Me=ae.value!==null?ae.value:oe;if(h){if(me!==h)return[new vt(ae.key,Me,`${me} stop domain type must match previous stop domain type ${h}`)]}else h=me;if(me!=="number"&&me!=="string"&&me!=="boolean")return[new vt(ae.key,Me,"stop domain value must be a number, string, or boolean")];if(me!=="number"&&A!=="categorical"){let We=`number expected, ${me} found`;return J(r)&&A===void 0&&(We+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vt(ae.key,Me,We)]}return A!=="categorical"||me!=="number"||isFinite(Be)&&Math.floor(Be)===Be?A!=="categorical"&&me==="number"&&g!==void 0&&Be<g?[new vt(ae.key,Me,"stop domain values must appear in ascending order")]:(g=Be,A==="categorical"&&Be in B?[new vt(ae.key,Me,"stop domain values must be unique")]:(B[Be]=!0,[])):[new vt(ae.key,Me,`integer expected, found ${Be}`)]}}function Yn(o){const r=(o.expressionContext==="property"?Zn:Yi)(ga(o.value),o.valueSpec);if(r.result==="error")return r.value.map(h=>new vt(`${o.key}${h.key}`,o.value,h.message));const A=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!A.outputDefined())return[new vt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!To(A))return[new vt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!To(A))return[new vt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!yA(A,["zoom","feature-state"]))return[new vt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!mA(A))return[new vt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Tn(o){const r=o.key,A=o.value,h=o.valueSpec,g=[];return Array.isArray(h.values)?h.values.indexOf(yi(A))===-1&&g.push(new vt(r,A,`expected one of [${h.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(h.values).indexOf(yi(A))===-1&&g.push(new vt(r,A,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(A)} found`)),g}function Un(o){return Ta(ga(o.value))?Yn(Cr({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Pa(o)}function Pa(o){const r=o.value,A=o.key;if(Ke(r)!=="array")return[new vt(A,r,`array expected, ${Ke(r)} found`)];const h=o.styleSpec;let g,_=[];if(r.length<1)return[new vt(A,r,"filter array must have at least 1 element")];switch(_=_.concat(Tn({key:`${A}[0]`,value:r[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),yi(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&yi(r[1])==="$type"&&_.push(new vt(A,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&_.push(new vt(A,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(g=Ke(r[1]),g!=="string"&&_.push(new vt(`${A}[1]`,r[1],`string expected, ${g} found`)));for(let B=2;B<r.length;B++)g=Ke(r[B]),yi(r[1])==="$type"?_=_.concat(Tn({key:`${A}[${B}]`,value:r[B],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new vt(`${A}[${B}]`,r[B],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let B=1;B<r.length;B++)_=_.concat(Pa({key:`${A}[${B}]`,value:r[B],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":g=Ke(r[1]),r.length!==2?_.push(new vt(A,r,`filter array for "${r[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new vt(`${A}[1]`,r[1],`string expected, ${g} found`));break;case"within":g=Ke(r[1]),r.length!==2?_.push(new vt(A,r,`filter array for "${r[0]}" operator must have 2 elements`)):g!=="object"&&_.push(new vt(`${A}[1]`,r[1],`object expected, ${g} found`))}return _}function Zs(o,r){const A=o.key,h=o.validateSpec,g=o.style,_=o.styleSpec,B=o.value,F=o.objectKey,U=_[`${r}_${o.layerType}`];if(!U)return[];const D=F.match(/^(.*)-transition$/);if(r==="paint"&&D&&U[D[1]]&&U[D[1]].transition)return h({key:A,value:B,valueSpec:_.transition,style:g,styleSpec:_});const V=o.valueSpec||U[F];if(!V)return[new vt(A,B,`unknown property "${F}"`)];let W;if(Ke(B)==="string"&&J(V)&&!V.tokens&&(W=/^{([^}]+)}$/.exec(B)))return[new vt(A,B,`"${F}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(W[1])} }\`.`)];const te=[];return o.layerType==="symbol"&&(F==="text-field"&&g&&!g.glyphs&&te.push(new vt(A,B,'use of "text-field" requires a style "glyphs" property')),F==="text-font"&&ct(ga(B))&&yi(B.type)==="identity"&&te.push(new vt(A,B,'"text-font" does not support identity functions'))),te.concat(h({key:o.key,value:B,valueSpec:V,style:g,styleSpec:_,expressionContext:"property",propertyType:r,propertyKey:F}))}function ya(o){return Zs(o,"paint")}function Ro(o){return Zs(o,"layout")}function Ts(o){let r=[];const A=o.value,h=o.key,g=o.style,_=o.styleSpec;A.type||A.ref||r.push(new vt(h,A,'either "type" or "ref" is required'));let B=yi(A.type);const F=yi(A.ref);if(A.id){const U=yi(A.id);for(let D=0;D<o.arrayIndex;D++){const V=g.layers[D];yi(V.id)===U&&r.push(new vt(h,A.id,`duplicate layer id "${A.id}", previously used at line ${V.id.__line__}`))}}if("ref"in A){let U;["type","source","source-layer","filter","layout"].forEach(D=>{D in A&&r.push(new vt(h,A[D],`"${D}" is prohibited for ref layers`))}),g.layers.forEach(D=>{yi(D.id)===F&&(U=D)}),U?U.ref?r.push(new vt(h,A.ref,"ref cannot reference another ref layer")):B=yi(U.type):r.push(new vt(h,A.ref,`ref layer "${F}" not found`))}else if(B!=="background")if(A.source){const U=g.sources&&g.sources[A.source],D=U&&yi(U.type);U?D==="vector"&&B==="raster"?r.push(new vt(h,A.source,`layer "${A.id}" requires a raster source`)):D!=="raster-dem"&&B==="hillshade"?r.push(new vt(h,A.source,`layer "${A.id}" requires a raster-dem source`)):D==="raster"&&B!=="raster"?r.push(new vt(h,A.source,`layer "${A.id}" requires a vector source`)):D!=="vector"||A["source-layer"]?D==="raster-dem"&&B!=="hillshade"?r.push(new vt(h,A.source,"raster-dem source can only be used with layer type 'hillshade'.")):B!=="line"||!A.paint||!A.paint["line-gradient"]||D==="geojson"&&U.lineMetrics||r.push(new vt(h,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new vt(h,A,`layer "${A.id}" must specify a "source-layer"`)):r.push(new vt(h,A.source,`source "${A.source}" not found`))}else r.push(new vt(h,A,'missing required property "source"'));return r=r.concat(Ti({key:h,value:A,valueSpec:_.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:A.type,valueSpec:_.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:A,objectKey:"type"}),filter:Un,layout:U=>Ti({layer:A,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,validateSpec:U.validateSpec,objectElementValidators:{"*":D=>Ro(Cr({layerType:B},D))}}),paint:U=>Ti({layer:A,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,validateSpec:U.validateSpec,objectElementValidators:{"*":D=>ya(Cr({layerType:B},D))}})}})),r}function Nn(o){const r=o.value,A=o.key,h=Ke(r);return h!=="string"?[new vt(A,r,`string expected, ${h} found`)]:[]}const Qa={promoteId:function(o){let{key:r,value:A}=o;if(Ke(A)==="string")return Nn({key:r,value:A});{const h=[];for(const g in A)h.push(...Nn({key:`${r}.${g}`,value:A[g]}));return h}}};function Ki(o){const r=o.value,A=o.key,h=o.styleSpec,g=o.style,_=o.validateSpec;if(!r.type)return[new vt(A,r,'"type" is required')];const B=yi(r.type);let F;switch(B){case"vector":case"raster":return F=Ti({key:A,value:r,valueSpec:h[`source_${B.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Qa,validateSpec:_}),F;case"raster-dem":return F=function(U){var D;const V=(D=U.sourceName)!==null&&D!==void 0?D:"",W=U.value,te=U.styleSpec,ae=te.source_raster_dem,oe=U.style;let me=[];const Be=Ke(W);if(W===void 0)return me;if(Be!=="object")return me.push(new vt("source_raster_dem",W,`object expected, ${Be} found`)),me;const Me=yi(W.encoding)==="custom",We=["redFactor","greenFactor","blueFactor","baseShift"],je=U.value.encoding?`"${U.value.encoding}"`:"Default";for(const Xe in W)!Me&&We.includes(Xe)?me.push(new vt(Xe,W[Xe],`In "${V}": "${Xe}" is only valid when "encoding" is set to "custom". ${je} encoding found`)):ae[Xe]?me=me.concat(U.validateSpec({key:Xe,value:W[Xe],valueSpec:ae[Xe],validateSpec:U.validateSpec,style:oe,styleSpec:te})):me.push(new vt(Xe,W[Xe],`unknown property "${Xe}"`));return me}({sourceName:A,value:r,style:o.style,styleSpec:h,validateSpec:_}),F;case"geojson":if(F=Ti({key:A,value:r,valueSpec:h.source_geojson,style:g,styleSpec:h,validateSpec:_,objectElementValidators:Qa}),r.cluster)for(const U in r.clusterProperties){const[D,V]=r.clusterProperties[U],W=typeof D=="string"?[D,["accumulated"],["get",U]]:D;F.push(...Yn({key:`${A}.${U}.map`,value:V,validateSpec:_,expressionContext:"cluster-map"})),F.push(...Yn({key:`${A}.${U}.reduce`,value:W,validateSpec:_,expressionContext:"cluster-reduce"}))}return F;case"video":return Ti({key:A,value:r,valueSpec:h.source_video,style:g,validateSpec:_,styleSpec:h});case"image":return Ti({key:A,value:r,valueSpec:h.source_image,style:g,validateSpec:_,styleSpec:h});case"canvas":return[new vt(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Tn({key:`${A}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,validateSpec:_,styleSpec:h})}}function On(o){const r=o.value,A=o.styleSpec,h=A.light,g=o.style;let _=[];const B=Ke(r);if(r===void 0)return _;if(B!=="object")return _=_.concat([new vt("light",r,`object expected, ${B} found`)]),_;for(const F in r){const U=F.match(/^(.*)-transition$/);_=_.concat(U&&h[U[1]]&&h[U[1]].transition?o.validateSpec({key:F,value:r[F],valueSpec:A.transition,validateSpec:o.validateSpec,style:g,styleSpec:A}):h[F]?o.validateSpec({key:F,value:r[F],valueSpec:h[F],validateSpec:o.validateSpec,style:g,styleSpec:A}):[new vt(F,r[F],`unknown property "${F}"`)])}return _}function va(o){const r=o.value,A=o.styleSpec,h=A.terrain,g=o.style;let _=[];const B=Ke(r);if(r===void 0)return _;if(B!=="object")return _=_.concat([new vt("terrain",r,`object expected, ${B} found`)]),_;for(const F in r)_=_.concat(h[F]?o.validateSpec({key:F,value:r[F],valueSpec:h[F],validateSpec:o.validateSpec,style:g,styleSpec:A}):[new vt(F,r[F],`unknown property "${F}"`)]);return _}function ro(o){let r=[];const A=o.value,h=o.key;if(Array.isArray(A)){const g=[],_=[];for(const B in A)A[B].id&&g.includes(A[B].id)&&r.push(new vt(h,A,`all the sprites' ids must be unique, but ${A[B].id} is duplicated`)),g.push(A[B].id),A[B].url&&_.includes(A[B].url)&&r.push(new vt(h,A,`all the sprites' URLs must be unique, but ${A[B].url} is duplicated`)),_.push(A[B].url),r=r.concat(Ti({key:`${h}[${B}]`,value:A[B],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return Nn({key:h,value:A})}const zo={"*":()=>[],array:ma,boolean:function(o){const r=o.value,A=o.key,h=Ke(r);return h!=="boolean"?[new vt(A,r,`boolean expected, ${h} found`)]:[]},number:Oo,color:function(o){const r=o.key,A=o.value,h=Ke(A);return h!=="string"?[new vt(r,A,`color expected, ${h} found`)]:ii.parse(String(A))?[]:[new vt(r,A,`color expected, "${A}" found`)]},constants:Yl,enum:Tn,filter:Un,function:FA,layer:Ts,object:Ti,source:Ki,light:On,terrain:va,string:Nn,formatted:function(o){return Nn(o).length===0?[]:Yn(o)},resolvedImage:function(o){return Nn(o).length===0?[]:Yn(o)},padding:function(o){const r=o.key,A=o.value;if(Ke(A)==="array"){if(A.length<1||A.length>4)return[new vt(r,A,`padding requires 1 to 4 values; ${A.length} values found`)];const h={type:"number"};let g=[];for(let _=0;_<A.length;_++)g=g.concat(o.validateSpec({key:`${r}[${_}]`,value:A[_],validateSpec:o.validateSpec,valueSpec:h}));return g}return Oo({key:r,value:A,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,A=o.value,h=Ke(A),g=o.styleSpec;if(h!=="array"||A.length<1||A.length%2!=0)return[new vt(r,A,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let B=0;B<A.length;B+=2)_=_.concat(Tn({key:`${r}[${B}]`,value:A[B],valueSpec:g.layout_symbol["text-anchor"]})),_=_.concat(ma({key:`${r}[${B+1}]`,value:A[B+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:g}));return _},sprite:ro};function Rn(o){const r=o.value,A=o.valueSpec,h=o.styleSpec;return o.validateSpec=Rn,A.expression&&ct(yi(r))?FA(o):A.expression&&Di(ga(r))?Yn(o):A.type&&zo[A.type]?zo[A.type](o):Ti(Cr({},o,{valueSpec:A.type?h[A.type]:A}))}function Ma(o){const r=o.value,A=o.key,h=Nn(o);return h.length||(r.indexOf("{fontstack}")===-1&&h.push(new vt(A,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&h.push(new vt(A,r,'"glyphs" url must include a "{range}" token'))),h}function Pn(o){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze,A=[];return A=A.concat(Rn({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:Rn,objectElementValidators:{glyphs:Ma,"*":()=>[]}})),o.constants&&(A=A.concat(Yl({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:Rn}))),Us(A)}function $i(o){return function(r){return o({...r,validateSpec:Rn})}}function Us(o){return[].concat(o).sort((r,A)=>r.line-A.line)}function ai(o){return function(){for(var r=arguments.length,A=new Array(r),h=0;h<r;h++)A[h]=arguments[h];return Us(o.apply(this,A))}}Pn.source=ai($i(Ki)),Pn.sprite=ai($i(ro)),Pn.glyphs=ai($i(Ma)),Pn.light=ai($i(On)),Pn.terrain=ai($i(va)),Pn.layer=ai($i(Ts)),Pn.filter=ai($i(Un)),Pn.paintProperty=ai($i(ya)),Pn.layoutProperty=ai($i(Ro));const oi=Pn,Vi=oi.light,ji=oi.paintProperty,_a=oi.layoutProperty;function Ys(o,r){let A=!1;if(r&&r.length)for(const h of r)o.fire(new Zt(new Error(h.message))),A=!0;return A}class Js{constructor(r,A,h){const g=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const B=new Int32Array(this.arrayBuffer);r=B[0],this.d=(A=B[1])+2*(h=B[2]);for(let U=0;U<this.d*this.d;U++){const D=B[3+U],V=B[3+U+1];g.push(D===V?null:B.subarray(D,V))}const F=B[3+g.length+1];this.keys=B.subarray(B[3+g.length],F),this.bboxes=B.subarray(F),this.insert=this._insertReadonly}else{this.d=A+2*h;for(let B=0;B<this.d*this.d;B++)g.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=r,this.padding=h,this.scale=A/r,this.uid=0;const _=h/A*r;this.min=-_,this.max=r+_}insert(r,A,h,g,_){this._forEachCell(A,h,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(A),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,A,h,g,_,B){this.cells[_].push(B)}query(r,A,h,g,_){const B=this.min,F=this.max;if(r<=B&&A<=B&&F<=h&&F<=g&&!_)return Array.prototype.slice.call(this.keys);{const U=[];return this._forEachCell(r,A,h,g,this._queryCell,U,{},_),U}}_queryCell(r,A,h,g,_,B,F,U){const D=this.cells[_];if(D!==null){const V=this.keys,W=this.bboxes;for(let te=0;te<D.length;te++){const ae=D[te];if(F[ae]===void 0){const oe=4*ae;(U?U(W[oe+0],W[oe+1],W[oe+2],W[oe+3]):r<=W[oe+2]&&A<=W[oe+3]&&h>=W[oe+0]&&g>=W[oe+1])?(F[ae]=!0,B.push(V[ae])):F[ae]=!1}}}}_forEachCell(r,A,h,g,_,B,F,U){const D=this._convertToCellCoord(r),V=this._convertToCellCoord(A),W=this._convertToCellCoord(h),te=this._convertToCellCoord(g);for(let ae=D;ae<=W;ae++)for(let oe=V;oe<=te;oe++){const me=this.d*oe+ae;if((!U||U(this._convertFromCellCoord(ae),this._convertFromCellCoord(oe),this._convertFromCellCoord(ae+1),this._convertFromCellCoord(oe+1)))&&_.call(this,r,A,h,g,me,B,F,U))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,A=3+this.cells.length+1+1;let h=0;for(let B=0;B<this.cells.length;B++)h+=this.cells[B].length;const g=new Int32Array(A+h+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=A;for(let B=0;B<r.length;B++){const F=r[B];g[3+B]=_,g.set(F,_),_+=F.length}return g[3+r.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+r.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(r,A){const h=r.toArrayBuffer();return A&&A.push(h),{buffer:h}}static deserialize(r){return new Js(r.buffer)}}const Ps={};function Xt(o,r){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ps[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),Ps[o]={klass:r,omit:A.omit||[],shallow:A.shallow||[]}}Xt("Object",Object),Xt("TransferableGridIndex",Js),Xt("Color",ii),Xt("Error",Error),Xt("AJAXError",st),Xt("ResolvedImage",Wr),Xt("StylePropertyFunction",As),Xt("StyleExpression",ki,{omit:["_evaluator"]}),Xt("ZoomDependentExpression",Xn),Xt("ZoomConstantExpression",qi),Xt("CompoundExpression",mn,{omit:["_evaluate"]});for(const o in Za)Za[o]._classRegistryKey||Xt(`Expression_${o}`,Za[o]);function Al(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function ka(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Al(o)||it(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const A=o;return r&&r.push(A.buffer),A}if(o instanceof ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const A=[];for(const h of o)A.push(ka(h,r));return A}if(typeof o=="object"){const A=o.constructor,h=A._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!Ps[h])throw new Error(`${h} is not registered.`);const g=A.serialize?A.serialize(o,r):{};if(A.serialize){if(r&&g===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in o){if(!o.hasOwnProperty(_)||Ps[h].omit.indexOf(_)>=0)continue;const B=o[_];g[_]=Ps[h].shallow.indexOf(_)>=0?B:ka(B,r)}o instanceof Error&&(g.message=o.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(g.$name=h),g}throw new Error("can't serialize object of type "+typeof o)}function Ho(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Al(o)||it(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Ho);if(typeof o=="object"){const r=o.$name||"Object";if(!Ps[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:A}=Ps[r];if(!A)throw new Error(`can't deserialize unregistered class ${r}`);if(A.deserialize)return A.deserialize(o);const h=Object.create(A.prototype);for(const g of Object.keys(o)){if(g==="$name")continue;const _=o[g];h[g]=Ps[r].shallow.indexOf(g)>=0?_:Ho(_)}return h}throw new Error("can't deserialize object of type "+typeof o)}class Hc{constructor(){this.first=!0}update(r,A){const h=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=A),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=h,!0))}}const Gt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function ll(o){for(const r of o)if(Jn(r.charCodeAt(0)))return!0;return!1}function EA(o){for(const r of o)if(!ls(r.charCodeAt(0)))return!1;return!0}function ls(o){return!(Gt.Arabic(o)||Gt["Arabic Supplement"](o)||Gt["Arabic Extended-A"](o)||Gt["Arabic Presentation Forms-A"](o)||Gt["Arabic Presentation Forms-B"](o))}function Jn(o){return!(o!==746&&o!==747&&(o<4352||!(Gt["Bopomofo Extended"](o)||Gt.Bopomofo(o)||Gt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Gt["CJK Compatibility Ideographs"](o)||Gt["CJK Compatibility"](o)||Gt["CJK Radicals Supplement"](o)||Gt["CJK Strokes"](o)||!(!Gt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Gt["CJK Unified Ideographs Extension A"](o)||Gt["CJK Unified Ideographs"](o)||Gt["Enclosed CJK Letters and Months"](o)||Gt["Hangul Compatibility Jamo"](o)||Gt["Hangul Jamo Extended-A"](o)||Gt["Hangul Jamo Extended-B"](o)||Gt["Hangul Jamo"](o)||Gt["Hangul Syllables"](o)||Gt.Hiragana(o)||Gt["Ideographic Description Characters"](o)||Gt.Kanbun(o)||Gt["Kangxi Radicals"](o)||Gt["Katakana Phonetic Extensions"](o)||Gt.Katakana(o)&&o!==12540||!(!Gt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Gt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Gt["Unified Canadian Aboriginal Syllabics"](o)||Gt["Unified Canadian Aboriginal Syllabics Extended"](o)||Gt["Vertical Forms"](o)||Gt["Yijing Hexagram Symbols"](o)||Gt["Yi Syllables"](o)||Gt["Yi Radicals"](o))))}function cl(o){return!(Jn(o)||function(r){return!!(Gt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Gt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Gt["Letterlike Symbols"](r)||Gt["Number Forms"](r)||Gt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Gt["Control Pictures"](r)&&r!==9251||Gt["Optical Character Recognition"](r)||Gt["Enclosed Alphanumerics"](r)||Gt["Geometric Shapes"](r)||Gt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Gt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Gt["CJK Symbols and Punctuation"](r)||Gt.Katakana(r)||Gt["Private Use Area"](r)||Gt["CJK Compatibility Forms"](r)||Gt["Small Form Variants"](r)||Gt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function ul(o){return o>=1424&&o<=2303||Gt["Arabic Presentation Forms-A"](o)||Gt["Arabic Presentation Forms-B"](o)}function Vc(o,r){return!(!r&&ul(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Gt.Khmer(o))}function Jl(o){for(const r of o)if(ul(r.charCodeAt(0)))return!0;return!1}const IA="deferred",hl="loading",ec="loaded";let pl=null,Qn="unavailable",ea=null;const Vo=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Qn="error"),pl&&pl(o)};function jc(){dl.fire(new fr("pluginStateChange",{pluginStatus:Qn,pluginURL:ea}))}const dl=new bt,tc=function(){return Qn},Ku=function(){if(Qn!==IA||!ea)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Qn=hl,jc(),ea&&Vt({url:ea},o=>{o?Vo(o):(Qn=ec,jc())})},cs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Qn===ec||cs.applyArabicShaping!=null,isLoading:()=>Qn===hl,setState(o){if(!rt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Qn=o.pluginStatus,ea=o.pluginURL},isParsed(){if(!rt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return cs.applyArabicShaping!=null&&cs.processBidirectionalText!=null&&cs.processStyledBidirectionalText!=null},getPluginURL(){if(!rt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ea}};class xi{constructor(r,A){this.zoom=r,A?(this.now=A.now,this.fadeDuration=A.fadeDuration,this.zoomHistory=A.zoomHistory,this.transition=A.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Hc,this.transition={})}isSupportedScript(r){return function(A,h){for(const g of A)if(!Vc(g.charCodeAt(0),h))return!1;return!0}(r,cs.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,A=r-Math.floor(r),h=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*A}}}class rc{constructor(r,A){this.property=r,this.value=A,this.expression=function(h,g){if(ct(h))return new As(h,g);if(Di(h)){const _=Zn(h,g);if(_.result==="error")throw new Error(_.value.map(B=>`${B.key}: ${B.message}`).join(", "));return _.value}{let _=h;return g.type==="color"&&typeof h=="string"?_=ii.parse(h):g.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(_=Kn.parse(h)):_=Dn.parse(h),{kind:"constant",evaluate:()=>_}}}(A===void 0?r.specification.default:A,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,A,h){return this.property.possiblyEvaluate(this,r,A,h)}}class Gc{constructor(r){this.property=r,this.value=new rc(r,void 0)}transitioned(r,A){return new nc(this.property,this.value,A,ge({},r.transition,this.transition),r.now)}untransitioned(){return new nc(this.property,this.value,null,{},0)}}class ic{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Ae(this._values[r].value.value)}setValue(r,A){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Gc(this._values[r].property)),this._values[r].value=new rc(this._values[r].property,A===null?void 0:Ae(A))}getTransition(r){return Ae(this._values[r].transition)}setTransition(r,A){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Gc(this._values[r].property)),this._values[r].transition=Ae(A)||void 0}serialize(){const r={};for(const A of Object.keys(this._values)){const h=this.getValue(A);h!==void 0&&(r[A]=h);const g=this.getTransition(A);g!==void 0&&(r[`${A}-transition`]=g)}return r}transitioned(r,A){const h=new LA(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(r,A._values[g]);return h}untransitioned(){const r=new LA(this._properties);for(const A of Object.keys(this._values))r._values[A]=this._values[A].untransitioned();return r}}class nc{constructor(r,A,h,g,_){this.property=r,this.value=A,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,r.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(r,A,h){const g=r.now||0,_=this.value.possiblyEvaluate(r,A,h),B=this.prior;if(B){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return B.possiblyEvaluate(r,A,h);{const F=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(B.possiblyEvaluate(r,A,h),_,function(U){if(U<=0)return 0;if(U>=1)return 1;const D=U*U,V=D*U;return 4*(U<.5?V:3*(U-D)+V-.75)}(F))}}return _}}class LA{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,A,h){const g=new fl(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(r,A,h);return g}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class up{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return Ae(this._values[r].value)}setValue(r,A){this._values[r]=new rc(this._values[r].property,A===null?void 0:Ae(A))}serialize(){const r={};for(const A of Object.keys(this._values)){const h=this.getValue(A);h!==void 0&&(r[A]=h)}return r}possiblyEvaluate(r,A,h){const g=new fl(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(r,A,h);return g}}class zn{constructor(r,A,h){this.property=r,this.value=A,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,A,h,g){return this.property.evaluate(this.value,this.parameters,r,A,h,g)}}class fl{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Ar{constructor(r){this.specification=r}possiblyEvaluate(r,A){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(A)}interpolate(r,A,h){const g=Zi[this.specification.type];return g?g(r,A,h):r}}class _r{constructor(r,A){this.specification=r,this.overrides=A}possiblyEvaluate(r,A,h,g){return new zn(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(A,null,{},h,g)}:r.expression,A)}interpolate(r,A,h){if(r.value.kind!=="constant"||A.value.kind!=="constant")return r;if(r.value.value===void 0||A.value.value===void 0)return new zn(this,{kind:"constant",value:void 0},r.parameters);const g=Zi[this.specification.type];if(g){const _=g(r.value.value,A.value.value,h);return new zn(this,{kind:"constant",value:_},r.parameters)}return r}evaluate(r,A,h,g,_,B){return r.kind==="constant"?r.value:r.evaluate(A,h,g,_,B)}}class gl extends _r{possiblyEvaluate(r,A,h,g){if(r.value===void 0)return new zn(this,{kind:"constant",value:void 0},A);if(r.expression.kind==="constant"){const _=r.expression.evaluate(A,null,{},h,g),B=r.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,F=this._calculate(B,B,B,A);return new zn(this,{kind:"constant",value:F},A)}if(r.expression.kind==="camera"){const _=this._calculate(r.expression.evaluate({zoom:A.zoom-1}),r.expression.evaluate({zoom:A.zoom}),r.expression.evaluate({zoom:A.zoom+1}),A);return new zn(this,{kind:"constant",value:_},A)}return new zn(this,r.expression,A)}evaluate(r,A,h,g,_,B){if(r.kind==="source"){const F=r.evaluate(A,h,g,_,B);return this._calculate(F,F,F,A)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(A.zoom)-1},h,g),r.evaluate({zoom:Math.floor(A.zoom)},h,g),r.evaluate({zoom:Math.floor(A.zoom)+1},h,g),A):r.value}_calculate(r,A,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:r,to:A}:{from:h,to:A}}interpolate(r){return r}}class qc{constructor(r){this.specification=r}possiblyEvaluate(r,A,h,g){if(r.value!==void 0){if(r.expression.kind==="constant"){const _=r.expression.evaluate(A,null,{},h,g);return this._calculate(_,_,_,A)}return this._calculate(r.expression.evaluate(new xi(Math.floor(A.zoom-1),A)),r.expression.evaluate(new xi(Math.floor(A.zoom),A)),r.expression.evaluate(new xi(Math.floor(A.zoom+1),A)),A)}}_calculate(r,A,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:r,to:A}:{from:h,to:A}}interpolate(r){return r}}class wa{constructor(r){this.specification=r}possiblyEvaluate(r,A,h,g){return!!r.expression.evaluate(A,null,{},h,g)}interpolate(){return!1}}class ui{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in r){const h=r[A];h.specification.overridable&&this.overridableProperties.push(A);const g=this.defaultPropertyValues[A]=new rc(h,void 0),_=this.defaultTransitionablePropertyValues[A]=new Gc(h);this.defaultTransitioningPropertyValues[A]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=g.possiblyEvaluate({})}}}Xt("DataDrivenProperty",_r),Xt("DataConstantProperty",Ar),Xt("CrossFadedDataDrivenProperty",gl),Xt("CrossFadedProperty",qc),Xt("ColorRampProperty",wa);const ta="-transition";class Qs extends bt{constructor(r,A){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),A.layout&&(this._unevaluatedLayout=new up(A.layout)),A.paint)){this._transitionablePaint=new ic(A.paint);for(const h in r.paint)this.setPaintProperty(h,r.paint[h],{validate:!1});for(const h in r.layout)this.setLayoutProperty(h,r.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new fl(A.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,A){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};A!=null&&this._validate(_a,`layers.${this.id}.layout.${r}`,r,A,h)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,A):this.visibility=A)}getPaintProperty(r){return r.endsWith(ta)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,A){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(A!=null&&this._validate(ji,`layers.${this.id}.paint.${r}`,r,A,h))return!1;if(r.endsWith(ta))return this._transitionablePaint.setTransition(r.slice(0,-11),A||void 0),!1;{const g=this._transitionablePaint._values[r],_=g.property.specification["property-type"]==="cross-faded-data-driven",B=g.value.isDataDriven(),F=g.value;this._transitionablePaint.setValue(r,A),this._handleSpecialPaintPropertyUpdate(r);const U=this._transitionablePaint._values[r].value;return U.isDataDriven()||B||_||this._handleOverridablePaintPropertyUpdate(r,F,U)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,A,h){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,A){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,A)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),ce(r,(A,h)=>!(A===void 0||h==="layout"&&!Object.keys(A).length||h==="paint"&&!Object.keys(A).length))}_validate(r,A,h,g){let _=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return(!_||_.validate!==!1)&&Ys(this,r.call(oi,{key:A,layerType:this.type,objectKey:h,value:g,styleSpec:ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const A=this.paint.get(r);if(A instanceof zn&&J(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}const Kc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class es{constructor(r,A){this._structArray=r,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ai{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,A){return r._trim(),A&&(r.isTransferred=!0,A.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const A=Object.create(this.prototype);return A.arrayBuffer=r.arrayBuffer,A.length=r.length,A.capacity=r.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ui(o){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,A=0,h=0;return{members:o.map(g=>{const _=Kc[g.type].BYTES_PER_ELEMENT,B=A=TA(A,Math.max(r,_)),F=g.components||1;return h=Math.max(h,_),A+=_*F,{name:g.name,type:g.type,components:F,offset:B}}),size:TA(A,Math.max(h,r)),alignment:r}}function TA(o,r){return Math.ceil(o/r)*r}class UA extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A){const h=this.length;return this.resize(h+1),this.emplace(h,r,A)}emplace(r,A,h){const g=2*r;return this.int16[g+0]=A,this.int16[g+1]=h,r}}UA.prototype.bytesPerElement=4,Xt("StructArrayLayout2i4",UA);class PA extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,h){const g=this.length;return this.resize(g+1),this.emplace(g,r,A,h)}emplace(r,A,h,g){const _=3*r;return this.int16[_+0]=A,this.int16[_+1]=h,this.int16[_+2]=g,r}}PA.prototype.bytesPerElement=6,Xt("StructArrayLayout3i6",PA);class io extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,r,A,h,g)}emplace(r,A,h,g,_){const B=4*r;return this.int16[B+0]=A,this.int16[B+1]=h,this.int16[B+2]=g,this.int16[B+3]=_,r}}io.prototype.bytesPerElement=8,Xt("StructArrayLayout4i8",io);class sc extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,h,g,_,B){const F=this.length;return this.resize(F+1),this.emplace(F,r,A,h,g,_,B)}emplace(r,A,h,g,_,B,F){const U=6*r;return this.int16[U+0]=A,this.int16[U+1]=h,this.int16[U+2]=g,this.int16[U+3]=_,this.int16[U+4]=B,this.int16[U+5]=F,r}}sc.prototype.bytesPerElement=12,Xt("StructArrayLayout2i4i12",sc);class $c extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,h,g,_,B){const F=this.length;return this.resize(F+1),this.emplace(F,r,A,h,g,_,B)}emplace(r,A,h,g,_,B,F){const U=4*r,D=8*r;return this.int16[U+0]=A,this.int16[U+1]=h,this.uint8[D+4]=g,this.uint8[D+5]=_,this.uint8[D+6]=B,this.uint8[D+7]=F,r}}$c.prototype.bytesPerElement=8,Xt("StructArrayLayout2i4ub8",$c);class Da extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A){const h=this.length;return this.resize(h+1),this.emplace(h,r,A)}emplace(r,A,h){const g=2*r;return this.float32[g+0]=A,this.float32[g+1]=h,r}}Da.prototype.bytesPerElement=8,Xt("StructArrayLayout2f8",Da);class QA extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A,h,g,_,B,F,U,D,V){const W=this.length;return this.resize(W+1),this.emplace(W,r,A,h,g,_,B,F,U,D,V)}emplace(r,A,h,g,_,B,F,U,D,V,W){const te=10*r;return this.uint16[te+0]=A,this.uint16[te+1]=h,this.uint16[te+2]=g,this.uint16[te+3]=_,this.uint16[te+4]=B,this.uint16[te+5]=F,this.uint16[te+6]=U,this.uint16[te+7]=D,this.uint16[te+8]=V,this.uint16[te+9]=W,r}}QA.prototype.bytesPerElement=20,Xt("StructArrayLayout10ui20",QA);class jo extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A,h,g,_,B,F,U,D,V,W,te){const ae=this.length;return this.resize(ae+1),this.emplace(ae,r,A,h,g,_,B,F,U,D,V,W,te)}emplace(r,A,h,g,_,B,F,U,D,V,W,te,ae){const oe=12*r;return this.int16[oe+0]=A,this.int16[oe+1]=h,this.int16[oe+2]=g,this.int16[oe+3]=_,this.uint16[oe+4]=B,this.uint16[oe+5]=F,this.uint16[oe+6]=U,this.uint16[oe+7]=D,this.int16[oe+8]=V,this.int16[oe+9]=W,this.int16[oe+10]=te,this.int16[oe+11]=ae,r}}jo.prototype.bytesPerElement=24,Xt("StructArrayLayout4i4ui4i24",jo);class ni extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,h){const g=this.length;return this.resize(g+1),this.emplace(g,r,A,h)}emplace(r,A,h,g){const _=3*r;return this.float32[_+0]=A,this.float32[_+1]=h,this.float32[_+2]=g,r}}ni.prototype.bytesPerElement=12,Xt("StructArrayLayout3f12",ni);class v extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const A=this.length;return this.resize(A+1),this.emplace(A,r)}emplace(r,A){return this.uint32[1*r+0]=A,r}}v.prototype.bytesPerElement=4,Xt("StructArrayLayout1ul4",v);class i extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A,h,g,_,B,F,U,D){const V=this.length;return this.resize(V+1),this.emplace(V,r,A,h,g,_,B,F,U,D)}emplace(r,A,h,g,_,B,F,U,D,V){const W=10*r,te=5*r;return this.int16[W+0]=A,this.int16[W+1]=h,this.int16[W+2]=g,this.int16[W+3]=_,this.int16[W+4]=B,this.int16[W+5]=F,this.uint32[te+3]=U,this.uint16[W+8]=D,this.uint16[W+9]=V,r}}i.prototype.bytesPerElement=20,Xt("StructArrayLayout6i1ul2ui20",i);class c extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,h,g,_,B){const F=this.length;return this.resize(F+1),this.emplace(F,r,A,h,g,_,B)}emplace(r,A,h,g,_,B,F){const U=6*r;return this.int16[U+0]=A,this.int16[U+1]=h,this.int16[U+2]=g,this.int16[U+3]=_,this.int16[U+4]=B,this.int16[U+5]=F,r}}c.prototype.bytesPerElement=12,Xt("StructArrayLayout2i2i2i12",c);class d extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,h,g,_){const B=this.length;return this.resize(B+1),this.emplace(B,r,A,h,g,_)}emplace(r,A,h,g,_,B){const F=4*r,U=8*r;return this.float32[F+0]=A,this.float32[F+1]=h,this.float32[F+2]=g,this.int16[U+6]=_,this.int16[U+7]=B,r}}d.prototype.bytesPerElement=16,Xt("StructArrayLayout2f1f2i16",d);class y extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,r,A,h,g)}emplace(r,A,h,g,_){const B=12*r,F=3*r;return this.uint8[B+0]=A,this.uint8[B+1]=h,this.float32[F+1]=g,this.float32[F+2]=_,r}}y.prototype.bytesPerElement=12,Xt("StructArrayLayout2ub2f12",y);class b extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A,h){const g=this.length;return this.resize(g+1),this.emplace(g,r,A,h)}emplace(r,A,h,g){const _=3*r;return this.uint16[_+0]=A,this.uint16[_+1]=h,this.uint16[_+2]=g,r}}b.prototype.bytesPerElement=6,Xt("StructArrayLayout3ui6",b);class E extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,h,g,_,B,F,U,D,V,W,te,ae,oe,me,Be,Me){const We=this.length;return this.resize(We+1),this.emplace(We,r,A,h,g,_,B,F,U,D,V,W,te,ae,oe,me,Be,Me)}emplace(r,A,h,g,_,B,F,U,D,V,W,te,ae,oe,me,Be,Me,We){const je=24*r,Xe=12*r,At=48*r;return this.int16[je+0]=A,this.int16[je+1]=h,this.uint16[je+2]=g,this.uint16[je+3]=_,this.uint32[Xe+2]=B,this.uint32[Xe+3]=F,this.uint32[Xe+4]=U,this.uint16[je+10]=D,this.uint16[je+11]=V,this.uint16[je+12]=W,this.float32[Xe+7]=te,this.float32[Xe+8]=ae,this.uint8[At+36]=oe,this.uint8[At+37]=me,this.uint8[At+38]=Be,this.uint32[Xe+10]=Me,this.int16[je+22]=We,r}}E.prototype.bytesPerElement=48,Xt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",E);class L extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,h,g,_,B,F,U,D,V,W,te,ae,oe,me,Be,Me,We,je,Xe,At,mt,$t,ir,qt,Ht,Dt,er){const Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,r,A,h,g,_,B,F,U,D,V,W,te,ae,oe,me,Be,Me,We,je,Xe,At,mt,$t,ir,qt,Ht,Dt,er)}emplace(r,A,h,g,_,B,F,U,D,V,W,te,ae,oe,me,Be,Me,We,je,Xe,At,mt,$t,ir,qt,Ht,Dt,er,Ot){const St=32*r,yr=16*r;return this.int16[St+0]=A,this.int16[St+1]=h,this.int16[St+2]=g,this.int16[St+3]=_,this.int16[St+4]=B,this.int16[St+5]=F,this.int16[St+6]=U,this.int16[St+7]=D,this.uint16[St+8]=V,this.uint16[St+9]=W,this.uint16[St+10]=te,this.uint16[St+11]=ae,this.uint16[St+12]=oe,this.uint16[St+13]=me,this.uint16[St+14]=Be,this.uint16[St+15]=Me,this.uint16[St+16]=We,this.uint16[St+17]=je,this.uint16[St+18]=Xe,this.uint16[St+19]=At,this.uint16[St+20]=mt,this.uint16[St+21]=$t,this.uint16[St+22]=ir,this.uint32[yr+12]=qt,this.float32[yr+13]=Ht,this.float32[yr+14]=Dt,this.uint16[St+30]=er,this.uint16[St+31]=Ot,r}}L.prototype.bytesPerElement=64,Xt("StructArrayLayout8i15ui1ul2f2ui64",L);class k extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const A=this.length;return this.resize(A+1),this.emplace(A,r)}emplace(r,A){return this.float32[1*r+0]=A,r}}k.prototype.bytesPerElement=4,Xt("StructArrayLayout1f4",k);class O extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,h){const g=this.length;return this.resize(g+1),this.emplace(g,r,A,h)}emplace(r,A,h,g){const _=3*r;return this.uint16[6*r+0]=A,this.float32[_+1]=h,this.float32[_+2]=g,r}}O.prototype.bytesPerElement=12,Xt("StructArrayLayout1ui2f12",O);class H extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A,h){const g=this.length;return this.resize(g+1),this.emplace(g,r,A,h)}emplace(r,A,h,g){const _=4*r;return this.uint32[2*r+0]=A,this.uint16[_+2]=h,this.uint16[_+3]=g,r}}H.prototype.bytesPerElement=8,Xt("StructArrayLayout1ul2ui8",H);class $ extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A){const h=this.length;return this.resize(h+1),this.emplace(h,r,A)}emplace(r,A,h){const g=2*r;return this.uint16[g+0]=A,this.uint16[g+1]=h,r}}$.prototype.bytesPerElement=4,Xt("StructArrayLayout2ui4",$);class se extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const A=this.length;return this.resize(A+1),this.emplace(A,r)}emplace(r,A){return this.uint16[1*r+0]=A,r}}se.prototype.bytesPerElement=2,Xt("StructArrayLayout1ui2",se);class fe extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,r,A,h,g)}emplace(r,A,h,g,_){const B=4*r;return this.float32[B+0]=A,this.float32[B+1]=h,this.float32[B+2]=g,this.float32[B+3]=_,r}}fe.prototype.bytesPerElement=16,Xt("StructArrayLayout4f16",fe);class f extends es{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Q(this.anchorPointX,this.anchorPointY)}}f.prototype.size=20;class x extends i{get(r){return new f(this,r)}}Xt("CollisionBoxArray",x);class C extends es{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}C.prototype.size=48;class M extends E{get(r){return new C(this,r)}}Xt("PlacedSymbolArray",M);class R extends es{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}R.prototype.size=64;class N extends L{get(r){return new R(this,r)}}Xt("SymbolInstanceArray",N);class z extends k{getoffsetX(r){return this.float32[1*r+0]}}Xt("GlyphOffsetArray",z);class G extends PA{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}Xt("SymbolLineVertexArray",G);class X extends es{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}X.prototype.size=12;class re extends O{get(r){return new X(this,r)}}Xt("TextAnchorOffsetArray",re);class de extends es{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}de.prototype.size=8;class we extends H{get(r){return new de(this,r)}}Xt("FeatureIndexArray",we);class Ie extends UA{}class Pe extends UA{}class ut extends UA{}class He extends sc{}class Se extends $c{}class Fe extends Da{}class dt extends QA{}class pt extends jo{}class at extends ni{}class _t extends v{}class Et extends c{}class Wt extends y{}class kt extends b{}class Fr extends ${}const Er=Ui([{name:"a_pos",components:2,type:"Int16"}],4),{members:kr}=Er;class pr{constructor(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.segments=r}prepareSegment(r,A,h,g){let _=this.segments[this.segments.length-1];return r>pr.MAX_VERTEX_ARRAY_LENGTH&&_e(`Max vertices per segment is ${pr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!_||_.vertexLength+r>pr.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g)&&(_={vertexOffset:A.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},g!==void 0&&(_.sortKey=g),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const r of this.segments)for(const A in r.vaos)r.vaos[A].destroy()}static simpleSegment(r,A,h,g){return new pr([{vertexOffset:r,primitiveOffset:A,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function ei(o,r){return 256*(o=Ne(Math.floor(o),0,255))+Ne(Math.floor(r),0,255)}pr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Xt("SegmentVector",pr);const Zr=Ui([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ir={exports:{}},Bi={exports:{}};Bi.exports=function(o,r){var A,h,g,_,B,F,U,D;for(h=o.length-(A=3&o.length),g=r,B=3432918353,F=461845907,D=0;D<h;)U=255&o.charCodeAt(D)|(255&o.charCodeAt(++D))<<8|(255&o.charCodeAt(++D))<<16|(255&o.charCodeAt(++D))<<24,++D,g=27492+(65535&(_=5*(65535&(g=(g^=U=(65535&(U=(U=(65535&U)*B+(((U>>>16)*B&65535)<<16)&4294967295)<<15|U>>>17))*F+(((U>>>16)*F&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(U=0,A){case 3:U^=(255&o.charCodeAt(D+2))<<16;case 2:U^=(255&o.charCodeAt(D+1))<<8;case 1:g^=U=(65535&(U=(U=(65535&(U^=255&o.charCodeAt(D)))*B+(((U>>>16)*B&65535)<<16)&4294967295)<<15|U>>>17))*F+(((U>>>16)*F&65535)<<16)&4294967295}return g^=o.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var Ji=Bi.exports,si={exports:{}};si.exports=function(o,r){for(var A,h=o.length,g=r^h,_=0;h>=4;)A=1540483477*(65535&(A=255&o.charCodeAt(_)|(255&o.charCodeAt(++_))<<8|(255&o.charCodeAt(++_))<<16|(255&o.charCodeAt(++_))<<24))+((1540483477*(A>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(A=1540483477*(65535&(A^=A>>>24))+((1540483477*(A>>>16)&65535)<<16)),h-=4,++_;switch(h){case 3:g^=(255&o.charCodeAt(_+2))<<16;case 2:g^=(255&o.charCodeAt(_+1))<<8;case 1:g=1540483477*(65535&(g^=255&o.charCodeAt(_)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var hi=Ji,zr=si.exports;Ir.exports=hi,Ir.exports.murmur3=hi,Ir.exports.murmur2=zr;var en=w(Ir.exports);class li{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,A,h,g){this.ids.push(ti(r)),this.positions.push(A,h,g)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=ti(r);let h=0,g=this.ids.length-1;for(;h<g;){const B=h+g>>1;this.ids[B]>=A?g=B:h=B+1}const _=[];for(;this.ids[h]===A;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(r,A){const h=new Float64Array(r.ids),g=new Uint32Array(r.positions);return pi(h,g,0,h.length-1),A&&A.push(h.buffer,g.buffer),{ids:h,positions:g}}static deserialize(r){const A=new li;return A.ids=r.ids,A.positions=r.positions,A.indexed=!0,A}}function ti(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:en(String(o))}function pi(o,r,A,h){for(;A<h;){const g=o[A+h>>1];let _=A-1,B=h+1;for(;;){do _++;while(o[_]<g);do B--;while(o[B]>g);if(_>=B)break;ri(o,_,B),ri(r,3*_,3*B),ri(r,3*_+1,3*B+1),ri(r,3*_+2,3*B+2)}B-A<h-B?(pi(o,r,A,B),A=B+1):(pi(o,r,B+1,h),h=B)}}function ri(o,r,A){const h=o[r];o[r]=o[A],o[A]=h}Xt("FeaturePositionMap",li);class on{constructor(r,A){this.gl=r.gl,this.location=A}}class us extends on{constructor(r,A){super(r,A),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class tn extends on{constructor(r,A){super(r,A),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class ba extends on{constructor(r,A){super(r,A),this.current=ii.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const Go=new Float32Array(16);function no(o){return[ei(255*o.r,255*o.g),ei(255*o.b,255*o.a)]}class _n{constructor(r,A,h){this.value=r,this.uniformNames=A.map(g=>`u_${g}`),this.type=h}setUniform(r,A,h){r.set(h.constantOr(this.value))}getBinding(r,A,h){return this.type==="color"?new ba(r,A):new us(r,A)}}class gi{constructor(r,A){this.uniformNames=A.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=r.tlbr}setUniform(r,A,h,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&r.set(_)}getBinding(r,A,h){return h.substr(0,9)==="u_pattern"?new tn(r,A):new us(r,A)}}class Ms{constructor(r,A,h,g){this.expression=r,this.type=h,this.maxValue=0,this.paintVertexAttributes=A.map(_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(r,A,h,g,_){const B=this.paintVertexArray.length,F=this.expression.evaluate(new xi(0),A,{},g,[],_);this.paintVertexArray.resize(r),this._setPaintValue(B,r,F)}updatePaintArray(r,A,h,g){const _=this.expression.evaluate({zoom:0},h,g);this._setPaintValue(r,A,_)}_setPaintValue(r,A,h){if(this.type==="color"){const g=no(h);for(let _=r;_<A;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=r;g<A;g++)this.paintVertexArray.emplace(g,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class hs{constructor(r,A,h,g,_,B){this.expression=r,this.uniformNames=A.map(F=>`u_${F}_t`),this.type=h,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=A.map(F=>({name:`a_${F}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new B}populatePaintArray(r,A,h,g,_){const B=this.expression.evaluate(new xi(this.zoom),A,{},g,[],_),F=this.expression.evaluate(new xi(this.zoom+1),A,{},g,[],_),U=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(U,r,B,F)}updatePaintArray(r,A,h,g){const _=this.expression.evaluate({zoom:this.zoom},h,g),B=this.expression.evaluate({zoom:this.zoom+1},h,g);this._setPaintValue(r,A,_,B)}_setPaintValue(r,A,h,g){if(this.type==="color"){const _=no(h),B=no(g);for(let F=r;F<A;F++)this.paintVertexArray.emplace(F,_[0],_[1],B[0],B[1])}else{for(let _=r;_<A;_++)this.paintVertexArray.emplace(_,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,A){const h=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,g=Ne(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);r.set(g)}getBinding(r,A,h){return new us(r,A)}}class ra{constructor(r,A,h,g,_,B){this.expression=r,this.type=A,this.useIntegerZoom=h,this.zoom=g,this.layerId=B,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(r,A,h){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(g,r,A.patterns&&A.patterns[this.layerId],h)}updatePaintArray(r,A,h,g,_){this._setPaintValues(r,A,h.patterns&&h.patterns[this.layerId],_)}_setPaintValues(r,A,h,g){if(!g||!h)return;const{min:_,mid:B,max:F}=h,U=g[_],D=g[B],V=g[F];if(U&&D&&V)for(let W=r;W<A;W++)this.zoomInPaintVertexArray.emplace(W,D.tl[0],D.tl[1],D.br[0],D.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1],D.pixelRatio,U.pixelRatio),this.zoomOutPaintVertexArray.emplace(W,D.tl[0],D.tl[1],D.br[0],D.br[1],V.tl[0],V.tl[1],V.br[0],V.br[1],D.pixelRatio,V.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Zr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Zr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class MA{constructor(r,A,h){this.binders={},this._buffers=[];const g=[];for(const _ in r.paint._values){if(!h(_))continue;const B=r.paint.get(_);if(!(B instanceof zn&&J(B.property.specification)))continue;const F=$u(_,r.type),U=B.value,D=B.property.specification.type,V=B.property.useIntegerZoom,W=B.property.specification["property-type"],te=W==="cross-faded"||W==="cross-faded-data-driven";if(U.kind==="constant")this.binders[_]=te?new gi(U.value,F):new _n(U.value,F,D),g.push(`/u_${_}`);else if(U.kind==="source"||te){const ae=xa(_,D,"source");this.binders[_]=te?new ra(U,D,V,A,ae,r.id):new Ms(U,F,D,ae),g.push(`/a_${_}`)}else{const ae=xa(_,D,"composite");this.binders[_]=new hs(U,F,D,V,A,ae),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(r){const A=this.binders[r];return A instanceof Ms||A instanceof hs?A.maxValue:0}populatePaintArrays(r,A,h,g,_){for(const B in this.binders){const F=this.binders[B];(F instanceof Ms||F instanceof hs||F instanceof ra)&&F.populatePaintArray(r,A,h,g,_)}}setConstantPatternPositions(r,A){for(const h in this.binders){const g=this.binders[h];g instanceof gi&&g.setConstantPatternPositions(r,A)}}updatePaintArrays(r,A,h,g,_){let B=!1;for(const F in r){const U=A.getPositions(F);for(const D of U){const V=h.feature(D.index);for(const W in this.binders){const te=this.binders[W];if((te instanceof Ms||te instanceof hs||te instanceof ra)&&te.expression.isStateDependent===!0){const ae=g.paint.get(W);te.expression=ae.value,te.updatePaintArray(D.start,D.end,V,r[F],_),B=!0}}}}return B}defines(){const r=[];for(const A in this.binders){const h=this.binders[A];(h instanceof _n||h instanceof gi)&&r.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return r}getBinderAttributes(){const r=[];for(const A in this.binders){const h=this.binders[A];if(h instanceof Ms||h instanceof hs)for(let g=0;g<h.paintVertexAttributes.length;g++)r.push(h.paintVertexAttributes[g].name);else if(h instanceof ra)for(let g=0;g<Zr.members.length;g++)r.push(Zr.members[g].name)}return r}getBinderUniforms(){const r=[];for(const A in this.binders){const h=this.binders[A];if(h instanceof _n||h instanceof gi||h instanceof hs)for(const g of h.uniformNames)r.push(g)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,A){const h=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof _n||_ instanceof gi||_ instanceof hs){for(const B of _.uniformNames)if(A[B]){const F=_.getBinding(r,A[B],B);h.push({name:B,property:g,binding:F})}}}return h}setUniforms(r,A,h,g){for(const{name:_,property:B,binding:F}of A)this.binders[B].setUniform(F,g,h.get(B),_)}updatePaintBuffers(r){this._buffers=[];for(const A in this.binders){const h=this.binders[A];if(r&&h instanceof ra){const g=r.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(h instanceof Ms||h instanceof hs)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(r){for(const A in this.binders){const h=this.binders[A];(h instanceof Ms||h instanceof hs||h instanceof ra)&&h.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const A=this.binders[r];(A instanceof Ms||A instanceof hs||A instanceof ra)&&A.destroy()}}}class ps{constructor(r,A){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:()=>!0;this.programConfigurations={};for(const g of r)this.programConfigurations[g.id]=new MA(g,A,h);this.needsUpload=!1,this._featureMap=new li,this._bufferOffset=0}populatePaintArrays(r,A,h,g,_,B){for(const F in this.programConfigurations)this.programConfigurations[F].populatePaintArrays(r,A,g,_,B);A.id!==void 0&&this._featureMap.add(A.id,h,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,A,h,g){for(const _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(r,this._featureMap,A,_,g)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function $u(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function xa(o,r,A){const h={color:{source:Da,composite:fe},number:{source:k,composite:Da}},g=function(_){return{"line-pattern":{source:dt,composite:dt},"fill-pattern":{source:dt,composite:dt},"fill-extrusion-pattern":{source:dt,composite:dt}}[_]}(o);return g&&g[A]||h[r][A]}Xt("ConstantBinder",_n),Xt("CrossFadedConstantBinder",gi),Xt("SourceExpressionBinder",Ms),Xt("CrossFadedCompositeBinder",ra),Xt("CompositeExpressionBinder",hs),Xt("ProgramConfiguration",MA,{omit:["_buffers"]}),Xt("ProgramConfigurationSet",ps);const Si=8192,kA=Math.pow(2,14)-1,hp=-kA-1;function so(o){const r=Si/o.extent,A=o.loadGeometry();for(let h=0;h<A.length;h++){const g=A[h];for(let _=0;_<g.length;_++){const B=g[_],F=Math.round(B.x*r),U=Math.round(B.y*r);B.x=Ne(F,hp,kA),B.y=Ne(U,hp,kA),(F<B.x||F>B.x+1||U<B.y||U>B.y+1)&&_e("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function DA(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?so(o):[]}}function ml(o,r,A,h,g){o.emplaceBack(2*r+(h+1)/2,2*A+(g+1)/2)}class Wc{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(A=>A.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Pe,this.indexArray=new kt,this.segments=new pr,this.programConfigurations=new ps(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(r,A,h){const g=this.layers[0],_=[];let B=null,F=!1;g.type==="circle"&&(B=g.layout.get("circle-sort-key"),F=!B.isConstant());for(const{feature:U,id:D,index:V,sourceLayerIndex:W}of r){const te=this.layers[0]._featureFilter.needGeometry,ae=DA(U,te);if(!this.layers[0]._featureFilter.filter(new xi(this.zoom),ae,h))continue;const oe=F?B.evaluate(ae,{},h):void 0,me={id:D,properties:U.properties,type:U.type,sourceLayerIndex:W,index:V,geometry:te?ae.geometry:so(U),patterns:{},sortKey:oe};_.push(me)}F&&_.sort((U,D)=>U.sortKey-D.sortKey);for(const U of _){const{geometry:D,index:V,sourceLayerIndex:W}=U,te=r[V].feature;this.addFeature(U,D,V,h),A.featureIndex.insert(te,D,V,W,this.index)}}update(r,A,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,kr),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,A,h,g){for(const _ of A)for(const B of _){const F=B.x,U=B.y;if(F<0||F>=Si||U<0||U>=Si)continue;const D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),V=D.vertexLength;ml(this.layoutVertexArray,F,U,-1,-1),ml(this.layoutVertexArray,F,U,1,-1),ml(this.layoutVertexArray,F,U,1,1),ml(this.layoutVertexArray,F,U,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+3,V+2),D.vertexLength+=4,D.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,{},g)}}function Xc(o,r){for(let A=0;A<o.length;A++)if(yl(r,o[A]))return!0;for(let A=0;A<r.length;A++)if(yl(o,r[A]))return!0;return!!Yc(o,r)}function Zc(o,r,A){return!!yl(o,r)||!!pp(r,o,A)}function qf(o,r){if(o.length===1)return $f(r,o[0]);for(let A=0;A<r.length;A++){const h=r[A];for(let g=0;g<h.length;g++)if(yl(o,h[g]))return!0}for(let A=0;A<o.length;A++)if($f(r,o[A]))return!0;for(let A=0;A<r.length;A++)if(Yc(o,r[A]))return!0;return!1}function py(o,r,A){if(o.length>1){if(Yc(o,r))return!0;for(let h=0;h<r.length;h++)if(pp(r[h],o,A))return!0}for(let h=0;h<o.length;h++)if(pp(o[h],r,A))return!0;return!1}function Yc(o,r){if(o.length===0||r.length===0)return!1;for(let A=0;A<o.length-1;A++){const h=o[A],g=o[A+1];for(let _=0;_<r.length-1;_++)if(NA(h,g,r[_],r[_+1]))return!0}return!1}function NA(o,r,A,h){return et(o,A,h)!==et(r,A,h)&&et(o,r,A)!==et(o,r,h)}function pp(o,r,A){const h=A*A;if(r.length===1)return o.distSqr(r[0])<h;for(let g=1;g<r.length;g++)if(Kf(o,r[g-1],r[g])<h)return!0;return!1}function Kf(o,r,A){const h=r.distSqr(A);if(h===0)return o.distSqr(r);const g=((o.x-r.x)*(A.x-r.x)+(o.y-r.y)*(A.y-r.y))/h;return o.distSqr(g<0?r:g>1?A:A.sub(r)._mult(g)._add(r))}function $f(o,r){let A,h,g,_=!1;for(let B=0;B<o.length;B++){A=o[B];for(let F=0,U=A.length-1;F<A.length;U=F++)h=A[F],g=A[U],h.y>r.y!=g.y>r.y&&r.x<(g.x-h.x)*(r.y-h.y)/(g.y-h.y)+h.x&&(_=!_)}return _}function yl(o,r){let A=!1;for(let h=0,g=o.length-1;h<o.length;g=h++){const _=o[h],B=o[g];_.y>r.y!=B.y>r.y&&r.x<(B.x-_.x)*(r.y-_.y)/(B.y-_.y)+_.x&&(A=!A)}return A}function Wu(o,r,A){const h=A[0],g=A[2];if(o.x<h.x&&r.x<h.x||o.x>g.x&&r.x>g.x||o.y<h.y&&r.y<h.y||o.y>g.y&&r.y>g.y)return!1;const _=et(o,r,A[0]);return _!==et(o,r,A[1])||_!==et(o,r,A[2])||_!==et(o,r,A[3])}function ac(o,r,A){const h=r.paint.get(o).value;return h.kind==="constant"?h.value:A.programConfigurations.get(r.id).getMaxValue(o)}function Jc(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function vl(o,r,A,h,g){if(!r[0]&&!r[1])return o;const _=Q.convert(r)._mult(g);A==="viewport"&&_._rotate(-h);const B=[];for(let F=0;F<o.length;F++)B.push(o[F].sub(_));return B}let Xu,oc;Xt("CircleBucket",Wc,{omit:["layers"]});var Wf={get paint(){return oc=oc||new ui({"circle-radius":new _r(ze.paint_circle["circle-radius"]),"circle-color":new _r(ze.paint_circle["circle-color"]),"circle-blur":new _r(ze.paint_circle["circle-blur"]),"circle-opacity":new _r(ze.paint_circle["circle-opacity"]),"circle-translate":new Ar(ze.paint_circle["circle-translate"]),"circle-translate-anchor":new Ar(ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ar(ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ar(ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _r(ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _r(ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _r(ze.paint_circle["circle-stroke-opacity"])})},get layout(){return Xu=Xu||new ui({"circle-sort-key":new _r(ze.layout_circle["circle-sort-key"])})}},ts=1e-6,qo=typeof Float32Array<"u"?Float32Array:Array;function Zu(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Yu(o,r,A){var h=r[0],g=r[1],_=r[2],B=r[3],F=r[4],U=r[5],D=r[6],V=r[7],W=r[8],te=r[9],ae=r[10],oe=r[11],me=r[12],Be=r[13],Me=r[14],We=r[15],je=A[0],Xe=A[1],At=A[2],mt=A[3];return o[0]=je*h+Xe*F+At*W+mt*me,o[1]=je*g+Xe*U+At*te+mt*Be,o[2]=je*_+Xe*D+At*ae+mt*Me,o[3]=je*B+Xe*V+At*oe+mt*We,o[4]=(je=A[4])*h+(Xe=A[5])*F+(At=A[6])*W+(mt=A[7])*me,o[5]=je*g+Xe*U+At*te+mt*Be,o[6]=je*_+Xe*D+At*ae+mt*Me,o[7]=je*B+Xe*V+At*oe+mt*We,o[8]=(je=A[8])*h+(Xe=A[9])*F+(At=A[10])*W+(mt=A[11])*me,o[9]=je*g+Xe*U+At*te+mt*Be,o[10]=je*_+Xe*D+At*ae+mt*Me,o[11]=je*B+Xe*V+At*oe+mt*We,o[12]=(je=A[12])*h+(Xe=A[13])*F+(At=A[14])*W+(mt=A[15])*me,o[13]=je*g+Xe*U+At*te+mt*Be,o[14]=je*_+Xe*D+At*ae+mt*Me,o[15]=je*B+Xe*V+At*oe+mt*We,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var Ba,Xf=Yu;function eu(o,r,A){var h=r[0],g=r[1],_=r[2],B=r[3];return o[0]=A[0]*h+A[4]*g+A[8]*_+A[12]*B,o[1]=A[1]*h+A[5]*g+A[9]*_+A[13]*B,o[2]=A[2]*h+A[6]*g+A[10]*_+A[14]*B,o[3]=A[3]*h+A[7]*g+A[11]*_+A[15]*B,o}Ba=new qo(4),qo!=Float32Array&&(Ba[0]=0,Ba[1]=0,Ba[2]=0,Ba[3]=0);class dy extends Qs{constructor(r){super(r,Wf)}createBucket(r){return new Wc(r)}queryRadius(r){const A=r;return ac("circle-radius",this,A)+ac("circle-stroke-width",this,A)+Jc(this.paint.get("circle-translate"))}queryIntersectsFeature(r,A,h,g,_,B,F,U){const D=vl(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),B.angle,F),V=this.paint.get("circle-radius").evaluate(A,h)+this.paint.get("circle-stroke-width").evaluate(A,h),W=this.paint.get("circle-pitch-alignment")==="map",te=W?D:function(oe,me){return oe.map(Be=>dp(Be,me))}(D,U),ae=W?V*F:V;for(const oe of g)for(const me of oe){const Be=W?me:dp(me,U);let Me=ae;const We=eu([],[me.x,me.y,0,1],U);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Me*=We[3]/B.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Me*=B.cameraToCenterDistance/We[3]),Zc(te,Be,Me))return!0}return!1}}function dp(o,r){const A=eu([],[o.x,o.y,0,1],r);return new Q(A[0]/A[3],A[1]/A[3])}class _l extends Wc{}let Zf;Xt("HeatmapBucket",_l,{omit:["layers"]});var Yf={get paint(){return Zf=Zf||new ui({"heatmap-radius":new _r(ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _r(ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ar(ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new wa(ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ar(ze.paint_heatmap["heatmap-opacity"])})}};function fp(o,r,A,h){let{width:g,height:_}=r;if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==g*_*A)throw new RangeError(`mismatched image size. expected: ${h.length} but got: ${g*_*A}`)}else h=new Uint8Array(g*_*A);return o.width=g,o.height=_,o.data=h,o}function gp(o,r,A){let{width:h,height:g}=r;if(h===o.width&&g===o.height)return;const _=fp({},{width:h,height:g},A);mp(o,_,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,h),height:Math.min(o.height,g)},A),o.width=h,o.height=g,o.data=_.data}function mp(o,r,A,h,g,_){if(g.width===0||g.height===0)return r;if(g.width>o.width||g.height>o.height||A.x>o.width-g.width||A.y>o.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>r.width||g.height>r.height||h.x>r.width-g.width||h.y>r.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const B=o.data,F=r.data;if(B===F)throw new Error("srcData equals dstData, so image is already copied");for(let U=0;U<g.height;U++){const D=((A.y+U)*o.width+A.x)*_,V=((h.y+U)*r.width+h.x)*_;for(let W=0;W<g.width*_;W++)F[V+W]=B[D+W]}return r}class Ko{constructor(r,A){fp(this,r,1,A)}resize(r){gp(this,r,1)}clone(){return new Ko({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,A,h,g,_){mp(r,A,h,g,_,1)}}class ds{constructor(r,A){fp(this,r,4,A)}resize(r){gp(this,r,4)}replace(r,A){A?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new ds({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,A,h,g,_){mp(r,A,h,g,_,4)}}function tu(o){const r={},A=o.resolution||256,h=o.clips?o.clips.length:1,g=o.image||new ds({width:A,height:h});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const _=(B,F,U)=>{r[o.evaluationKey]=U;const D=o.expression.evaluate(r);g.data[B+F+0]=Math.floor(255*D.r/D.a),g.data[B+F+1]=Math.floor(255*D.g/D.a),g.data[B+F+2]=Math.floor(255*D.b/D.a),g.data[B+F+3]=Math.floor(255*D.a)};if(o.clips)for(let B=0,F=0;B<h;++B,F+=4*A)for(let U=0,D=0;U<A;U++,D+=4){const V=U/(A-1),{start:W,end:te}=o.clips[B];_(F,D,W*(1-V)+te*V)}else for(let B=0,F=0;B<A;B++,F+=4)_(0,F,B/(A-1));return g}Xt("AlphaImage",Ko),Xt("RGBAImage",ds);class $o extends Qs{createBucket(r){return new _l(r)}constructor(r){super(r,Yf),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=tu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Wo;var OA={get paint(){return Wo=Wo||new ui({"hillshade-illumination-direction":new Ar(ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ar(ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ar(ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ar(ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ar(ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ar(ze.paint_hillshade["hillshade-accent-color"])})}};class Ju extends Qs{constructor(r){super(r,OA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const yp=Ui([{name:"a_pos",components:2,type:"Int16"}],4),{members:Jf}=yp;var vp={exports:{}};function Ac(o,r,A){A=A||2;var h,g,_,B,F,U,D,V=r&&r.length,W=V?r[0]*A:o.length,te=eh(o,0,W,A,!0),ae=[];if(!te||te.next===te.prev)return ae;if(V&&(te=function(me,Be,Me,We){var je,Xe,At,mt=[];for(je=0,Xe=Be.length;je<Xe;je++)(At=eh(me,Be[je]*We,je<Xe-1?Be[je+1]*We:me.length,We,!1))===At.next&&(At.steiner=!0),mt.push(jR(At));for(mt.sort(zR),je=0;je<mt.length;je++)Me=HR(mt[je],Me);return Me}(o,r,te,A)),o.length>80*A){h=_=o[0],g=B=o[1];for(var oe=A;oe<W;oe+=A)(F=o[oe])<h&&(h=F),(U=o[oe+1])<g&&(g=U),F>_&&(_=F),U>B&&(B=U);D=(D=Math.max(_-h,B-g))!==0?32767/D:0}return _p(te,ae,A,h,g,D,0),ae}function eh(o,r,A,h,g){var _,B;if(g===my(o,r,A,h)>0)for(_=r;_<A;_+=h)B=G5(_,o[_],o[_+1],B);else for(_=A-h;_>=r;_-=h)B=G5(_,o[_],o[_+1],B);return B&&eg(B,B.next)&&(bp(B),B=B.next),B}function ru(o,r){if(!o)return o;r||(r=o);var A,h=o;do if(A=!1,h.steiner||!eg(h,h.next)&&rn(h.prev,h,h.next)!==0)h=h.next;else{if(bp(h),(h=r=h.prev)===h.next)break;A=!0}while(A||h!==r);return r}function _p(o,r,A,h,g,_,B){if(o){!B&&_&&function(V,W,te,ae){var oe=V;do oe.z===0&&(oe.z=fy(oe.x,oe.y,W,te,ae)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==V);oe.prevZ.nextZ=null,oe.prevZ=null,function(me){var Be,Me,We,je,Xe,At,mt,$t,ir=1;do{for(Me=me,me=null,Xe=null,At=0;Me;){for(At++,We=Me,mt=0,Be=0;Be<ir&&(mt++,We=We.nextZ);Be++);for($t=ir;mt>0||$t>0&&We;)mt!==0&&($t===0||!We||Me.z<=We.z)?(je=Me,Me=Me.nextZ,mt--):(je=We,We=We.nextZ,$t--),Xe?Xe.nextZ=je:me=je,je.prevZ=Xe,Xe=je;Me=We}Xe.nextZ=null,ir*=2}while(At>1)}(oe)}(o,h,g,_);for(var F,U,D=o;o.prev!==o.next;)if(F=o.prev,U=o.next,_?NR(o,h,g,_):DR(o))r.push(F.i/A|0),r.push(o.i/A|0),r.push(U.i/A|0),bp(o),o=U.next,D=U.next;else if((o=U)===D){B?B===1?_p(o=OR(ru(o),r,A),r,A,h,g,_,2):B===2&&RR(o,r,A,h,g,_):_p(ru(o),r,A,h,g,_,1);break}}}function DR(o){var r=o.prev,A=o,h=o.next;if(rn(r,A,h)>=0)return!1;for(var g=r.x,_=A.x,B=h.x,F=r.y,U=A.y,D=h.y,V=g<_?g<B?g:B:_<B?_:B,W=F<U?F<D?F:D:U<D?U:D,te=g>_?g>B?g:B:_>B?_:B,ae=F>U?F>D?F:D:U>D?U:D,oe=h.next;oe!==r;){if(oe.x>=V&&oe.x<=te&&oe.y>=W&&oe.y<=ae&&th(g,F,_,U,B,D,oe.x,oe.y)&&rn(oe.prev,oe,oe.next)>=0)return!1;oe=oe.next}return!0}function NR(o,r,A,h){var g=o.prev,_=o,B=o.next;if(rn(g,_,B)>=0)return!1;for(var F=g.x,U=_.x,D=B.x,V=g.y,W=_.y,te=B.y,ae=F<U?F<D?F:D:U<D?U:D,oe=V<W?V<te?V:te:W<te?W:te,me=F>U?F>D?F:D:U>D?U:D,Be=V>W?V>te?V:te:W>te?W:te,Me=fy(ae,oe,r,A,h),We=fy(me,Be,r,A,h),je=o.prevZ,Xe=o.nextZ;je&&je.z>=Me&&Xe&&Xe.z<=We;){if(je.x>=ae&&je.x<=me&&je.y>=oe&&je.y<=Be&&je!==g&&je!==B&&th(F,V,U,W,D,te,je.x,je.y)&&rn(je.prev,je,je.next)>=0||(je=je.prevZ,Xe.x>=ae&&Xe.x<=me&&Xe.y>=oe&&Xe.y<=Be&&Xe!==g&&Xe!==B&&th(F,V,U,W,D,te,Xe.x,Xe.y)&&rn(Xe.prev,Xe,Xe.next)>=0))return!1;Xe=Xe.nextZ}for(;je&&je.z>=Me;){if(je.x>=ae&&je.x<=me&&je.y>=oe&&je.y<=Be&&je!==g&&je!==B&&th(F,V,U,W,D,te,je.x,je.y)&&rn(je.prev,je,je.next)>=0)return!1;je=je.prevZ}for(;Xe&&Xe.z<=We;){if(Xe.x>=ae&&Xe.x<=me&&Xe.y>=oe&&Xe.y<=Be&&Xe!==g&&Xe!==B&&th(F,V,U,W,D,te,Xe.x,Xe.y)&&rn(Xe.prev,Xe,Xe.next)>=0)return!1;Xe=Xe.nextZ}return!0}function OR(o,r,A){var h=o;do{var g=h.prev,_=h.next.next;!eg(g,_)&&V5(g,h,h.next,_)&&wp(g,_)&&wp(_,g)&&(r.push(g.i/A|0),r.push(h.i/A|0),r.push(_.i/A|0),bp(h),bp(h.next),h=o=_),h=h.next}while(h!==o);return ru(h)}function RR(o,r,A,h,g,_){var B=o;do{for(var F=B.next.next;F!==B.prev;){if(B.i!==F.i&&GR(B,F)){var U=j5(B,F);return B=ru(B,B.next),U=ru(U,U.next),_p(B,r,A,h,g,_,0),void _p(U,r,A,h,g,_,0)}F=F.next}B=B.next}while(B!==o)}function zR(o,r){return o.x-r.x}function HR(o,r){var A=function(g,_){var B,F=_,U=g.x,D=g.y,V=-1/0;do{if(D<=F.y&&D>=F.next.y&&F.next.y!==F.y){var W=F.x+(D-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(W<=U&&W>V&&(V=W,B=F.x<F.next.x?F:F.next,W===U))return B}F=F.next}while(F!==_);if(!B)return null;var te,ae=B,oe=B.x,me=B.y,Be=1/0;F=B;do U>=F.x&&F.x>=oe&&U!==F.x&&th(D<me?U:V,D,oe,me,D<me?V:U,D,F.x,F.y)&&(te=Math.abs(D-F.y)/(U-F.x),wp(F,g)&&(te<Be||te===Be&&(F.x>B.x||F.x===B.x&&VR(B,F)))&&(B=F,Be=te)),F=F.next;while(F!==ae);return B}(o,r);if(!A)return r;var h=j5(A,o);return ru(h,h.next),ru(A,A.next)}function VR(o,r){return rn(o.prev,o,r.prev)<0&&rn(r.next,o,o.next)<0}function fy(o,r,A,h,g){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-A)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-h)*g|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function jR(o){var r=o,A=o;do(r.x<A.x||r.x===A.x&&r.y<A.y)&&(A=r),r=r.next;while(r!==o);return A}function th(o,r,A,h,g,_,B,F){return(g-B)*(r-F)>=(o-B)*(_-F)&&(o-B)*(h-F)>=(A-B)*(r-F)&&(A-B)*(_-F)>=(g-B)*(h-F)}function GR(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(A,h){var g=A;do{if(g.i!==A.i&&g.next.i!==A.i&&g.i!==h.i&&g.next.i!==h.i&&V5(g,g.next,A,h))return!0;g=g.next}while(g!==A);return!1}(o,r)&&(wp(o,r)&&wp(r,o)&&function(A,h){var g=A,_=!1,B=(A.x+h.x)/2,F=(A.y+h.y)/2;do g.y>F!=g.next.y>F&&g.next.y!==g.y&&B<(g.next.x-g.x)*(F-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==A);return _}(o,r)&&(rn(o.prev,o,r.prev)||rn(o,r.prev,r))||eg(o,r)&&rn(o.prev,o,o.next)>0&&rn(r.prev,r,r.next)>0)}function rn(o,r,A){return(r.y-o.y)*(A.x-r.x)-(r.x-o.x)*(A.y-r.y)}function eg(o,r){return o.x===r.x&&o.y===r.y}function V5(o,r,A,h){var g=rg(rn(o,r,A)),_=rg(rn(o,r,h)),B=rg(rn(A,h,o)),F=rg(rn(A,h,r));return g!==_&&B!==F||!(g!==0||!tg(o,A,r))||!(_!==0||!tg(o,h,r))||!(B!==0||!tg(A,o,h))||!(F!==0||!tg(A,r,h))}function tg(o,r,A){return r.x<=Math.max(o.x,A.x)&&r.x>=Math.min(o.x,A.x)&&r.y<=Math.max(o.y,A.y)&&r.y>=Math.min(o.y,A.y)}function rg(o){return o>0?1:o<0?-1:0}function wp(o,r){return rn(o.prev,o,o.next)<0?rn(o,r,o.next)>=0&&rn(o,o.prev,r)>=0:rn(o,r,o.prev)<0||rn(o,o.next,r)<0}function j5(o,r){var A=new gy(o.i,o.x,o.y),h=new gy(r.i,r.x,r.y),g=o.next,_=r.prev;return o.next=r,r.prev=o,A.next=g,g.prev=A,h.next=A,A.prev=h,_.next=h,h.prev=_,h}function G5(o,r,A,h){var g=new gy(o,r,A);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function bp(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function gy(o,r,A){this.i=o,this.x=r,this.y=A,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function my(o,r,A,h){for(var g=0,_=r,B=A-h;_<A;_+=h)g+=(o[B]-o[_])*(o[_+1]+o[B+1]),B=_;return g}vp.exports=Ac,vp.exports.default=Ac,Ac.deviation=function(o,r,A,h){var g=r&&r.length,_=Math.abs(my(o,0,g?r[0]*A:o.length,A));if(g)for(var B=0,F=r.length;B<F;B++)_-=Math.abs(my(o,r[B]*A,B<F-1?r[B+1]*A:o.length,A));var U=0;for(B=0;B<h.length;B+=3){var D=h[B]*A,V=h[B+1]*A,W=h[B+2]*A;U+=Math.abs((o[D]-o[W])*(o[V+1]-o[D+1])-(o[D]-o[V])*(o[W+1]-o[D+1]))}return _===0&&U===0?0:Math.abs((U-_)/_)},Ac.flatten=function(o){for(var r=o[0][0].length,A={vertices:[],holes:[],dimensions:r},h=0,g=0;g<o.length;g++){for(var _=0;_<o[g].length;_++)for(var B=0;B<r;B++)A.vertices.push(o[g][_][B]);g>0&&A.holes.push(h+=o[g-1].length)}return A};var q5=w(vp.exports);function qR(o,r,A,h,g){K5(o,r,A||0,h||o.length-1,g||KR)}function K5(o,r,A,h,g){for(;h>A;){if(h-A>600){var _=h-A+1,B=r-A+1,F=Math.log(_),U=.5*Math.exp(2*F/3),D=.5*Math.sqrt(F*U*(_-U)/_)*(B-_/2<0?-1:1);K5(o,r,Math.max(A,Math.floor(r-B*U/_+D)),Math.min(h,Math.floor(r+(_-B)*U/_+D)),g)}var V=o[r],W=A,te=h;for(xp(o,A,r),g(o[h],V)>0&&xp(o,A,h);W<te;){for(xp(o,W,te),W++,te--;g(o[W],V)<0;)W++;for(;g(o[te],V)>0;)te--}g(o[A],V)===0?xp(o,A,te):xp(o,++te,h),te<=r&&(A=te+1),r<=te&&(h=te-1)}}function xp(o,r,A){var h=o[r];o[r]=o[A],o[A]=h}function KR(o,r){return o<r?-1:o>r?1:0}function yy(o,r){const A=o.length;if(A<=1)return[o];const h=[];let g,_;for(let B=0;B<A;B++){const F=Je(o[B]);F!==0&&(o[B].area=Math.abs(F),_===void 0&&(_=F<0),_===F<0?(g&&h.push(g),g=[o[B]]):g.push(o[B]))}if(g&&h.push(g),r>1)for(let B=0;B<h.length;B++)h[B].length<=r||(qR(h[B],r,1,h[B].length-1,$R),h[B]=h[B].slice(0,r));return h}function $R(o,r){return r.area-o.area}function vy(o,r,A){const h=A.patternDependencies;let g=!1;for(const _ of r){const B=_.paint.get(`${o}-pattern`);B.isConstant()||(g=!0);const F=B.constantOr(null);F&&(g=!0,h[F.to]=!0,h[F.from]=!0)}return g}function _y(o,r,A,h,g){const _=g.patternDependencies;for(const B of r){const F=B.paint.get(`${o}-pattern`).value;if(F.kind!=="constant"){let U=F.evaluate({zoom:h-1},A,{},g.availableImages),D=F.evaluate({zoom:h},A,{},g.availableImages),V=F.evaluate({zoom:h+1},A,{},g.availableImages);U=U&&U.name?U.name:U,D=D&&D.name?D.name:D,V=V&&V.name?V.name:V,_[U]=!0,_[D]=!0,_[V]=!0,A.patterns[B.id]={min:U,mid:D,max:V}}}return A}class wy{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(A=>A.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ut,this.indexArray=new kt,this.indexArray2=new Fr,this.programConfigurations=new ps(r.layers,r.zoom),this.segments=new pr,this.segments2=new pr,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(r,A,h){this.hasPattern=vy("fill",this.layers,A);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),B=[];for(const{feature:F,id:U,index:D,sourceLayerIndex:V}of r){const W=this.layers[0]._featureFilter.needGeometry,te=DA(F,W);if(!this.layers[0]._featureFilter.filter(new xi(this.zoom),te,h))continue;const ae=_?g.evaluate(te,{},h,A.availableImages):void 0,oe={id:U,properties:F.properties,type:F.type,sourceLayerIndex:V,index:D,geometry:W?te.geometry:so(F),patterns:{},sortKey:ae};B.push(oe)}_&&B.sort((F,U)=>F.sortKey-U.sortKey);for(const F of B){const{geometry:U,index:D,sourceLayerIndex:V}=F;if(this.hasPattern){const W=_y("fill",this.layers,F,this.zoom,A);this.patternFeatures.push(W)}else this.addFeature(F,U,D,h,{});A.featureIndex.insert(r[D].feature,U,D,V,this.index)}}update(r,A,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,h)}addFeatures(r,A,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,A,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Jf),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,A,h,g,_){for(const B of yy(A,500)){let F=0;for(const ae of B)F+=ae.length;const U=this.segments.prepareSegment(F,this.layoutVertexArray,this.indexArray),D=U.vertexLength,V=[],W=[];for(const ae of B){if(ae.length===0)continue;ae!==B[0]&&W.push(V.length/2);const oe=this.segments2.prepareSegment(ae.length,this.layoutVertexArray,this.indexArray2),me=oe.vertexLength;this.layoutVertexArray.emplaceBack(ae[0].x,ae[0].y),this.indexArray2.emplaceBack(me+ae.length-1,me),V.push(ae[0].x),V.push(ae[0].y);for(let Be=1;Be<ae.length;Be++)this.layoutVertexArray.emplaceBack(ae[Be].x,ae[Be].y),this.indexArray2.emplaceBack(me+Be-1,me+Be),V.push(ae[Be].x),V.push(ae[Be].y);oe.vertexLength+=ae.length,oe.primitiveLength+=ae.length}const te=q5(V,W);for(let ae=0;ae<te.length;ae+=3)this.indexArray.emplaceBack(D+te[ae],D+te[ae+1],D+te[ae+2]);U.vertexLength+=F,U.primitiveLength+=te.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,_,g)}}let $5,W5;Xt("FillBucket",wy,{omit:["layers","patternFeatures"]});var WR={get paint(){return W5=W5||new ui({"fill-antialias":new Ar(ze.paint_fill["fill-antialias"]),"fill-opacity":new _r(ze.paint_fill["fill-opacity"]),"fill-color":new _r(ze.paint_fill["fill-color"]),"fill-outline-color":new _r(ze.paint_fill["fill-outline-color"]),"fill-translate":new Ar(ze.paint_fill["fill-translate"]),"fill-translate-anchor":new Ar(ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new gl(ze.paint_fill["fill-pattern"])})},get layout(){return $5=$5||new ui({"fill-sort-key":new _r(ze.layout_fill["fill-sort-key"])})}};class XR extends Qs{constructor(r){super(r,WR)}recalculate(r,A){super.recalculate(r,A);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new wy(r)}queryRadius(){return Jc(this.paint.get("fill-translate"))}queryIntersectsFeature(r,A,h,g,_,B,F){return qf(vl(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),B.angle,F),g)}isTileClipped(){return!0}}const ZR=Ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),YR=Ui([{name:"a_centroid",components:2,type:"Int16"}],4),{members:JR}=ZR;var lc={},ez=S,X5=rh;function rh(o,r,A,h,g){this.properties={},this.extent=A,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=g,o.readFields(tz,this,r)}function tz(o,r,A){o==1?r.id=A.readVarint():o==2?function(h,g){for(var _=h.readVarint()+h.pos;h.pos<_;){var B=g._keys[h.readVarint()],F=g._values[h.readVarint()];g.properties[B]=F}}(A,r):o==3?r.type=A.readVarint():o==4&&(r._geometry=A.pos)}function rz(o){for(var r,A,h=0,g=0,_=o.length,B=_-1;g<_;B=g++)h+=((A=o[B]).x-(r=o[g]).x)*(r.y+A.y);return h}rh.types=["Unknown","Point","LineString","Polygon"],rh.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,A=o.readVarint()+o.pos,h=1,g=0,_=0,B=0,F=[];o.pos<A;){if(g<=0){var U=o.readVarint();h=7&U,g=U>>3}if(g--,h===1||h===2)_+=o.readSVarint(),B+=o.readSVarint(),h===1&&(r&&F.push(r),r=[]),r.push(new ez(_,B));else{if(h!==7)throw new Error("unknown command "+h);r&&r.push(r[0].clone())}}return r&&F.push(r),F},rh.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,A=1,h=0,g=0,_=0,B=1/0,F=-1/0,U=1/0,D=-1/0;o.pos<r;){if(h<=0){var V=o.readVarint();A=7&V,h=V>>3}if(h--,A===1||A===2)(g+=o.readSVarint())<B&&(B=g),g>F&&(F=g),(_+=o.readSVarint())<U&&(U=_),_>D&&(D=_);else if(A!==7)throw new Error("unknown command "+A)}return[B,U,F,D]},rh.prototype.toGeoJSON=function(o,r,A){var h,g,_=this.extent*Math.pow(2,A),B=this.extent*o,F=this.extent*r,U=this.loadGeometry(),D=rh.types[this.type];function V(ae){for(var oe=0;oe<ae.length;oe++){var me=ae[oe];ae[oe]=[360*(me.x+B)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(me.y+F)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var W=[];for(h=0;h<U.length;h++)W[h]=U[h][0];V(U=W);break;case 2:for(h=0;h<U.length;h++)V(U[h]);break;case 3:for(U=function(ae){var oe=ae.length;if(oe<=1)return[ae];for(var me,Be,Me=[],We=0;We<oe;We++){var je=rz(ae[We]);je!==0&&(Be===void 0&&(Be=je<0),Be===je<0?(me&&Me.push(me),me=[ae[We]]):me.push(ae[We]))}return me&&Me.push(me),Me}(U),h=0;h<U.length;h++)for(g=0;g<U[h].length;g++)V(U[h][g])}U.length===1?U=U[0]:D="Multi"+D;var te={type:"Feature",geometry:{type:D,coordinates:U},properties:this.properties};return"id"in this&&(te.id=this.id),te};var iz=X5,Z5=Y5;function Y5(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(nz,this,r),this.length=this._features.length}function nz(o,r,A){o===15?r.version=A.readVarint():o===1?r.name=A.readString():o===5?r.extent=A.readVarint():o===2?r._features.push(A.pos):o===3?r._keys.push(A.readString()):o===4&&r._values.push(function(h){for(var g=null,_=h.readVarint()+h.pos;h.pos<_;){var B=h.readVarint()>>3;g=B===1?h.readString():B===2?h.readFloat():B===3?h.readDouble():B===4?h.readVarint64():B===5?h.readVarint():B===6?h.readSVarint():B===7?h.readBoolean():null}return g}(A))}Y5.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new iz(this._pbf,r,this.extent,this._keys,this._values)};var sz=Z5;function az(o,r,A){if(o===3){var h=new sz(A,A.readVarint()+A.pos);h.length&&(r[h.name]=h)}}lc.VectorTile=function(o,r){this.layers=o.readFields(az,{},r)},lc.VectorTileFeature=X5,lc.VectorTileLayer=Z5;const oz=lc.VectorTileFeature.types,by=Math.pow(2,13);function Bp(o,r,A,h,g,_,B,F){o.emplaceBack(r,A,2*Math.floor(h*by)+B,g*by*2,_*by*2,Math.round(F))}class xy{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(A=>A.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new He,this.centroidVertexArray=new Ie,this.indexArray=new kt,this.programConfigurations=new ps(r.layers,r.zoom),this.segments=new pr,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(r,A,h){this.features=[],this.hasPattern=vy("fill-extrusion",this.layers,A);for(const{feature:g,id:_,index:B,sourceLayerIndex:F}of r){const U=this.layers[0]._featureFilter.needGeometry,D=DA(g,U);if(!this.layers[0]._featureFilter.filter(new xi(this.zoom),D,h))continue;const V={id:_,sourceLayerIndex:F,index:B,geometry:U?D.geometry:so(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(_y("fill-extrusion",this.layers,V,this.zoom,A)):this.addFeature(V,V.geometry,B,h,{}),A.featureIndex.insert(g,V.geometry,B,F,this.index,!0)}}addFeatures(r,A,h){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,A,h)}}update(r,A,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,JR),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,YR.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,A,h,g,_){const B={x:0,y:0,vertexCount:0};for(const F of yy(A,500)){let U=0;for(const oe of F)U+=oe.length;let D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const oe of F){if(oe.length===0||lz(oe))continue;let me=0;for(let Be=0;Be<oe.length;Be++){const Me=oe[Be];if(Be>=1){const We=oe[Be-1];if(!Az(Me,We)){D.vertexLength+4>pr.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const je=Me.sub(We)._perp()._unit(),Xe=We.dist(Me);me+Xe>32768&&(me=0),Bp(this.layoutVertexArray,Me.x,Me.y,je.x,je.y,0,0,me),Bp(this.layoutVertexArray,Me.x,Me.y,je.x,je.y,0,1,me),B.x+=2*Me.x,B.y+=2*Me.y,B.vertexCount+=2,me+=Xe,Bp(this.layoutVertexArray,We.x,We.y,je.x,je.y,0,0,me),Bp(this.layoutVertexArray,We.x,We.y,je.x,je.y,0,1,me),B.x+=2*We.x,B.y+=2*We.y,B.vertexCount+=2;const At=D.vertexLength;this.indexArray.emplaceBack(At,At+2,At+1),this.indexArray.emplaceBack(At+1,At+2,At+3),D.vertexLength+=4,D.primitiveLength+=2}}}}if(D.vertexLength+U>pr.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(U,this.layoutVertexArray,this.indexArray)),oz[r.type]!=="Polygon")continue;const V=[],W=[],te=D.vertexLength;for(const oe of F)if(oe.length!==0){oe!==F[0]&&W.push(V.length/2);for(let me=0;me<oe.length;me++){const Be=oe[me];Bp(this.layoutVertexArray,Be.x,Be.y,0,0,1,1,0),B.x+=Be.x,B.y+=Be.y,B.vertexCount+=1,V.push(Be.x),V.push(Be.y)}}const ae=q5(V,W);for(let oe=0;oe<ae.length;oe+=3)this.indexArray.emplaceBack(te+ae[oe],te+ae[oe+2],te+ae[oe+1]);D.primitiveLength+=ae.length/3,D.vertexLength+=U}for(let F=0;F<B.vertexCount;F++)this.centroidVertexArray.emplaceBack(Math.floor(B.x/B.vertexCount),Math.floor(B.y/B.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,_,g)}}function Az(o,r){return o.x===r.x&&(o.x<0||o.x>Si)||o.y===r.y&&(o.y<0||o.y>Si)}function lz(o){return o.every(r=>r.x<0)||o.every(r=>r.x>Si)||o.every(r=>r.y<0)||o.every(r=>r.y>Si)}let J5;Xt("FillExtrusionBucket",xy,{omit:["layers","features"]});var cz={get paint(){return J5=J5||new ui({"fill-extrusion-opacity":new Ar(ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _r(ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ar(ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ar(ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new gl(ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _r(ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _r(ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ar(ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class uz extends Qs{constructor(r){super(r,cz)}createBucket(r){return new xy(r)}queryRadius(){return Jc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,A,h,g,_,B,F,U){const D=vl(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),B.angle,F),V=this.paint.get("fill-extrusion-height").evaluate(A,h),W=this.paint.get("fill-extrusion-base").evaluate(A,h),te=function(oe,me,Be,Me){const We=[];for(const je of oe){const Xe=[je.x,je.y,0,1];eu(Xe,Xe,me),We.push(new Q(Xe[0]/Xe[3],Xe[1]/Xe[3]))}return We}(D,U),ae=function(oe,me,Be,Me){const We=[],je=[],Xe=Me[8]*me,At=Me[9]*me,mt=Me[10]*me,$t=Me[11]*me,ir=Me[8]*Be,qt=Me[9]*Be,Ht=Me[10]*Be,Dt=Me[11]*Be;for(const er of oe){const Ot=[],St=[];for(const yr of er){const lr=yr.x,jr=yr.y,Pi=Me[0]*lr+Me[4]*jr+Me[12],Ni=Me[1]*lr+Me[5]*jr+Me[13],bn=Me[2]*lr+Me[6]*jr+Me[14],Ca=Me[3]*lr+Me[7]*jr+Me[15],ks=bn+mt,An=Ca+$t,Hn=Pi+ir,is=Ni+qt,Ds=bn+Ht,Ns=Ca+Dt,xn=new Q((Pi+Xe)/An,(Ni+At)/An);xn.z=ks/An,Ot.push(xn);const Bn=new Q(Hn/Ns,is/Ns);Bn.z=Ds/Ns,St.push(Bn)}We.push(Ot),je.push(St)}return[We,je]}(g,W,V,U);return function(oe,me,Be){let Me=1/0;qf(Be,me)&&(Me=eC(Be,me[0]));for(let We=0;We<me.length;We++){const je=me[We],Xe=oe[We];for(let At=0;At<je.length-1;At++){const mt=je[At],$t=[mt,je[At+1],Xe[At+1],Xe[At],mt];Xc(Be,$t)&&(Me=Math.min(Me,eC(Be,$t)))}}return Me!==1/0&&Me}(ae[0],ae[1],te)}}function Cp(o,r){return o.x*r.x+o.y*r.y}function eC(o,r){if(o.length===1){let A=0;const h=r[A++];let g;for(;!g||h.equals(g);)if(g=r[A++],!g)return 1/0;for(;A<r.length;A++){const _=r[A],B=o[0],F=g.sub(h),U=_.sub(h),D=B.sub(h),V=Cp(F,F),W=Cp(F,U),te=Cp(U,U),ae=Cp(D,F),oe=Cp(D,U),me=V*te-W*W,Be=(te*ae-W*oe)/me,Me=(V*oe-W*ae)/me,We=h.z*(1-Be-Me)+g.z*Be+_.z*Me;if(isFinite(We))return We}return 1/0}{let A=1/0;for(const h of r)A=Math.min(A,h.z);return A}}const hz=Ui([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:pz}=hz,dz=Ui([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:fz}=dz,gz=lc.VectorTileFeature.types,mz=Math.cos(Math.PI/180*37.5),tC=Math.pow(2,14)/.5;class By{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(A=>A.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(A=>{this.gradients[A.id]={}}),this.layoutVertexArray=new Se,this.layoutVertexArray2=new Fe,this.indexArray=new kt,this.programConfigurations=new ps(r.layers,r.zoom),this.segments=new pr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(r,A,h){this.hasPattern=vy("line",this.layers,A);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),B=[];for(const{feature:F,id:U,index:D,sourceLayerIndex:V}of r){const W=this.layers[0]._featureFilter.needGeometry,te=DA(F,W);if(!this.layers[0]._featureFilter.filter(new xi(this.zoom),te,h))continue;const ae=_?g.evaluate(te,{},h):void 0,oe={id:U,properties:F.properties,type:F.type,sourceLayerIndex:V,index:D,geometry:W?te.geometry:so(F),patterns:{},sortKey:ae};B.push(oe)}_&&B.sort((F,U)=>F.sortKey-U.sortKey);for(const F of B){const{geometry:U,index:D,sourceLayerIndex:V}=F;if(this.hasPattern){const W=_y("line",this.layers,F,this.zoom,A);this.patternFeatures.push(W)}else this.addFeature(F,U,D,h,{});A.featureIndex.insert(r[D].feature,U,D,V,this.index)}}update(r,A,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,h)}addFeatures(r,A,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,A,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,fz)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,pz),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,A,h,g,_){const B=this.layers[0].layout,F=B.get("line-join").evaluate(r,{}),U=B.get("line-cap"),D=B.get("line-miter-limit"),V=B.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const W of A)this.addLine(W,r,F,U,D,V);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,_,g)}addLine(r,A,h,g,_,B){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Me=0;Me<r.length-1;Me++)this.totalDistance+=r[Me].dist(r[Me+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const F=gz[A.type]==="Polygon";let U=r.length;for(;U>=2&&r[U-1].equals(r[U-2]);)U--;let D=0;for(;D<U-1&&r[D].equals(r[D+1]);)D++;if(U<(F?3:2))return;h==="bevel"&&(_=1.05);const V=this.overscaling<=16?15*Si/(512*this.overscaling):0,W=this.segments.prepareSegment(10*U,this.layoutVertexArray,this.indexArray);let te,ae,oe,me,Be;this.e1=this.e2=-1,F&&(te=r[U-2],Be=r[D].sub(te)._unit()._perp());for(let Me=D;Me<U;Me++){if(oe=Me===U-1?F?r[D+1]:void 0:r[Me+1],oe&&r[Me].equals(oe))continue;Be&&(me=Be),te&&(ae=te),te=r[Me],Be=oe?oe.sub(te)._unit()._perp():me,me=me||Be;let We=me.add(Be);We.x===0&&We.y===0||We._unit();const je=me.x*Be.x+me.y*Be.y,Xe=We.x*Be.x+We.y*Be.y,At=Xe!==0?1/Xe:1/0,mt=2*Math.sqrt(2-2*Xe),$t=Xe<mz&&ae&&oe,ir=me.x*Be.y-me.y*Be.x>0;if($t&&Me>D){const Dt=te.dist(ae);if(Dt>2*V){const er=te.sub(te.sub(ae)._mult(V/Dt)._round());this.updateDistance(ae,er),this.addCurrentVertex(er,me,0,0,W),ae=er}}const qt=ae&&oe;let Ht=qt?h:F?"butt":g;if(qt&&Ht==="round"&&(At<B?Ht="miter":At<=2&&(Ht="fakeround")),Ht==="miter"&&At>_&&(Ht="bevel"),Ht==="bevel"&&(At>2&&(Ht="flipbevel"),At<_&&(Ht="miter")),ae&&this.updateDistance(ae,te),Ht==="miter")We._mult(At),this.addCurrentVertex(te,We,0,0,W);else if(Ht==="flipbevel"){if(At>100)We=Be.mult(-1);else{const Dt=At*me.add(Be).mag()/me.sub(Be).mag();We._perp()._mult(Dt*(ir?-1:1))}this.addCurrentVertex(te,We,0,0,W),this.addCurrentVertex(te,We.mult(-1),0,0,W)}else if(Ht==="bevel"||Ht==="fakeround"){const Dt=-Math.sqrt(At*At-1),er=ir?Dt:0,Ot=ir?0:Dt;if(ae&&this.addCurrentVertex(te,me,er,Ot,W),Ht==="fakeround"){const St=Math.round(180*mt/Math.PI/20);for(let yr=1;yr<St;yr++){let lr=yr/St;if(lr!==.5){const Pi=lr-.5;lr+=lr*Pi*(lr-1)*((1.0904+je*(je*(3.55645-1.43519*je)-3.2452))*Pi*Pi+(.848013+je*(.215638*je-1.06021)))}const jr=Be.sub(me)._mult(lr)._add(me)._unit()._mult(ir?-1:1);this.addHalfVertex(te,jr.x,jr.y,!1,ir,0,W)}}oe&&this.addCurrentVertex(te,Be,-er,-Ot,W)}else if(Ht==="butt")this.addCurrentVertex(te,We,0,0,W);else if(Ht==="square"){const Dt=ae?1:-1;this.addCurrentVertex(te,We,Dt,Dt,W)}else Ht==="round"&&(ae&&(this.addCurrentVertex(te,me,0,0,W),this.addCurrentVertex(te,me,1,1,W,!0)),oe&&(this.addCurrentVertex(te,Be,-1,-1,W,!0),this.addCurrentVertex(te,Be,0,0,W)));if($t&&Me<U-1){const Dt=te.dist(oe);if(Dt>2*V){const er=te.add(oe.sub(te)._mult(V/Dt)._round());this.updateDistance(te,er),this.addCurrentVertex(er,Be,0,0,W),te=er}}}}addCurrentVertex(r,A,h,g,_){let B=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;const F=A.y*g-A.x,U=-A.y-A.x*g;this.addHalfVertex(r,A.x+A.y*h,A.y-A.x*h,B,!1,h,_),this.addHalfVertex(r,F,U,B,!0,-g,_),this.distance>tC/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,A,h,g,_,B))}addHalfVertex(r,A,h,g,_,B,F){let{x:U,y:D}=r;const V=.5*(this.lineClips?this.scaledDistance*(tC-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((U<<1)+(g?1:0),(D<<1)+(_?1:0),Math.round(63*A)+128,Math.round(63*h)+128,1+(B===0?0:B<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const W=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,W),F.primitiveLength++),_?this.e2=W:this.e1=W}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,A){this.distance+=r.dist(A),this.updateScaledDistance()}}let rC,iC;Xt("LineBucket",By,{omit:["layers","patternFeatures"]});var nC={get paint(){return iC=iC||new ui({"line-opacity":new _r(ze.paint_line["line-opacity"]),"line-color":new _r(ze.paint_line["line-color"]),"line-translate":new Ar(ze.paint_line["line-translate"]),"line-translate-anchor":new Ar(ze.paint_line["line-translate-anchor"]),"line-width":new _r(ze.paint_line["line-width"]),"line-gap-width":new _r(ze.paint_line["line-gap-width"]),"line-offset":new _r(ze.paint_line["line-offset"]),"line-blur":new _r(ze.paint_line["line-blur"]),"line-dasharray":new qc(ze.paint_line["line-dasharray"]),"line-pattern":new gl(ze.paint_line["line-pattern"]),"line-gradient":new wa(ze.paint_line["line-gradient"])})},get layout(){return rC=rC||new ui({"line-cap":new Ar(ze.layout_line["line-cap"]),"line-join":new _r(ze.layout_line["line-join"]),"line-miter-limit":new Ar(ze.layout_line["line-miter-limit"]),"line-round-limit":new Ar(ze.layout_line["line-round-limit"]),"line-sort-key":new _r(ze.layout_line["line-sort-key"])})}};class yz extends _r{possiblyEvaluate(r,A){return A=new xi(Math.floor(A.zoom),{now:A.now,fadeDuration:A.fadeDuration,zoomHistory:A.zoomHistory,transition:A.transition}),super.possiblyEvaluate(r,A)}evaluate(r,A,h,g){return A=ge({},A,{zoom:Math.floor(A.zoom)}),super.evaluate(r,A,h,g)}}let ig;class vz extends Qs{constructor(r){super(r,nC),this.gradientVersion=0,ig||(ig=new yz(nC.paint.properties["line-width"].specification),ig.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const A=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(A)&&A._styleExpression.expression instanceof $n,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,A){super.recalculate(r,A),this.paint._values["line-floorwidth"]=ig.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new By(r)}queryRadius(r){const A=r,h=sC(ac("line-width",this,A),ac("line-gap-width",this,A)),g=ac("line-offset",this,A);return h/2+Math.abs(g)+Jc(this.paint.get("line-translate"))}queryIntersectsFeature(r,A,h,g,_,B,F){const U=vl(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),B.angle,F),D=F/2*sC(this.paint.get("line-width").evaluate(A,h),this.paint.get("line-gap-width").evaluate(A,h)),V=this.paint.get("line-offset").evaluate(A,h);return V&&(g=function(W,te){const ae=[];for(let oe=0;oe<W.length;oe++){const me=W[oe],Be=[];for(let Me=0;Me<me.length;Me++){const We=me[Me-1],je=me[Me],Xe=me[Me+1],At=Me===0?new Q(0,0):je.sub(We)._unit()._perp(),mt=Me===me.length-1?new Q(0,0):Xe.sub(je)._unit()._perp(),$t=At._add(mt)._unit(),ir=$t.x*mt.x+$t.y*mt.y;ir!==0&&$t._mult(1/ir),Be.push($t._mult(te)._add(je))}ae.push(Be)}return ae}(g,V*F)),function(W,te,ae){for(let oe=0;oe<te.length;oe++){const me=te[oe];if(W.length>=3){for(let Be=0;Be<me.length;Be++)if(yl(W,me[Be]))return!0}if(py(W,me,ae))return!0}return!1}(U,g,D)}isTileClipped(){return!0}}function sC(o,r){return r>0?r+2*o:o}const _z=Ui([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),wz=Ui([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ui([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const bz=Ui([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Ui([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const aC=Ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),xz=Ui([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Bz(o,r,A){return o.sections.forEach(h=>{h.text=function(g,_,B){const F=_.layout.get("text-transform").evaluate(B,{});return F==="uppercase"?g=g.toLocaleUpperCase():F==="lowercase"&&(g=g.toLocaleLowerCase()),cs.applyArabicShaping&&(g=cs.applyArabicShaping(g)),g}(h.text,r,A)}),o}Ui([{name:"triangle",components:3,type:"Uint16"}]),Ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ui([{type:"Float32",name:"offsetX"}]),Ui([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ui([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Sp={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var wn=24,oC=vi,AC=function(o,r,A,h,g){var _,B,F=8*g-h-1,U=(1<<F)-1,D=U>>1,V=-7,W=A?g-1:0,te=A?-1:1,ae=o[r+W];for(W+=te,_=ae&(1<<-V)-1,ae>>=-V,V+=F;V>0;_=256*_+o[r+W],W+=te,V-=8);for(B=_&(1<<-V)-1,_>>=-V,V+=h;V>0;B=256*B+o[r+W],W+=te,V-=8);if(_===0)_=1-D;else{if(_===U)return B?NaN:1/0*(ae?-1:1);B+=Math.pow(2,h),_-=D}return(ae?-1:1)*B*Math.pow(2,_-h)},lC=function(o,r,A,h,g,_){var B,F,U,D=8*_-g-1,V=(1<<D)-1,W=V>>1,te=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,ae=h?0:_-1,oe=h?1:-1,me=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(F=isNaN(r)?1:0,B=V):(B=Math.floor(Math.log(r)/Math.LN2),r*(U=Math.pow(2,-B))<1&&(B--,U*=2),(r+=B+W>=1?te/U:te*Math.pow(2,1-W))*U>=2&&(B++,U/=2),B+W>=V?(F=0,B=V):B+W>=1?(F=(r*U-1)*Math.pow(2,g),B+=W):(F=r*Math.pow(2,W-1)*Math.pow(2,g),B=0));g>=8;o[A+ae]=255&F,ae+=oe,F/=256,g-=8);for(B=B<<g|F,D+=g;D>0;o[A+ae]=255&B,ae+=oe,B/=256,D-=8);o[A+ae-oe]|=128*me};function vi(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}vi.Varint=0,vi.Fixed64=1,vi.Bytes=2,vi.Fixed32=5;var Cy=4294967296,cC=1/Cy,uC=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function wl(o){return o.type===vi.Bytes?o.readVarint()+o.pos:o.pos+1}function ih(o,r,A){return A?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function hC(o,r,A){var h=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));A.realloc(h);for(var g=A.pos-1;g>=o;g--)A.buf[g+h]=A.buf[g]}function Cz(o,r){for(var A=0;A<o.length;A++)r.writeVarint(o[A])}function Sz(o,r){for(var A=0;A<o.length;A++)r.writeSVarint(o[A])}function Fz(o,r){for(var A=0;A<o.length;A++)r.writeFloat(o[A])}function Ez(o,r){for(var A=0;A<o.length;A++)r.writeDouble(o[A])}function Iz(o,r){for(var A=0;A<o.length;A++)r.writeBoolean(o[A])}function Lz(o,r){for(var A=0;A<o.length;A++)r.writeFixed32(o[A])}function Tz(o,r){for(var A=0;A<o.length;A++)r.writeSFixed32(o[A])}function Uz(o,r){for(var A=0;A<o.length;A++)r.writeFixed64(o[A])}function Pz(o,r){for(var A=0;A<o.length;A++)r.writeSFixed64(o[A])}function ng(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function nh(o,r,A){o[A]=r,o[A+1]=r>>>8,o[A+2]=r>>>16,o[A+3]=r>>>24}function pC(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}vi.prototype={destroy:function(){this.buf=null},readFields:function(o,r,A){for(A=A||this.length;this.pos<A;){var h=this.readVarint(),g=h>>3,_=this.pos;this.type=7&h,o(g,r,this),this.pos===_&&this.skip(h)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=ng(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=pC(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=ng(this.buf,this.pos)+ng(this.buf,this.pos+4)*Cy;return this.pos+=8,o},readSFixed64:function(){var o=ng(this.buf,this.pos)+pC(this.buf,this.pos+4)*Cy;return this.pos+=8,o},readFloat:function(){var o=AC(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=AC(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,A,h=this.buf;return r=127&(A=h[this.pos++]),A<128?r:(r|=(127&(A=h[this.pos++]))<<7,A<128?r:(r|=(127&(A=h[this.pos++]))<<14,A<128?r:(r|=(127&(A=h[this.pos++]))<<21,A<128?r:function(g,_,B){var F,U,D=B.buf;if(F=(112&(U=D[B.pos++]))>>4,U<128||(F|=(127&(U=D[B.pos++]))<<3,U<128)||(F|=(127&(U=D[B.pos++]))<<10,U<128)||(F|=(127&(U=D[B.pos++]))<<17,U<128)||(F|=(127&(U=D[B.pos++]))<<24,U<128)||(F|=(1&(U=D[B.pos++]))<<31,U<128))return ih(g,F,_);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(A=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&uC?function(A,h,g){return uC.decode(A.subarray(h,g))}(this.buf,r,o):function(A,h,g){for(var _="",B=h;B<g;){var F,U,D,V=A[B],W=null,te=V>239?4:V>223?3:V>191?2:1;if(B+te>g)break;te===1?V<128&&(W=V):te===2?(192&(F=A[B+1]))==128&&(W=(31&V)<<6|63&F)<=127&&(W=null):te===3?(U=A[B+2],(192&(F=A[B+1]))==128&&(192&U)==128&&((W=(15&V)<<12|(63&F)<<6|63&U)<=2047||W>=55296&&W<=57343)&&(W=null)):te===4&&(U=A[B+2],D=A[B+3],(192&(F=A[B+1]))==128&&(192&U)==128&&(192&D)==128&&((W=(15&V)<<18|(63&F)<<12|(63&U)<<6|63&D)<=65535||W>=1114112)&&(W=null)),W===null?(W=65533,te=1):W>65535&&(W-=65536,_+=String.fromCharCode(W>>>10&1023|55296),W=56320|1023&W),_+=String.fromCharCode(W),B+=te}return _}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==vi.Bytes)return o.push(this.readVarint(r));var A=wl(this);for(o=o||[];this.pos<A;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==vi.Bytes)return o.push(this.readSVarint());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==vi.Bytes)return o.push(this.readBoolean());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==vi.Bytes)return o.push(this.readFloat());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==vi.Bytes)return o.push(this.readDouble());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==vi.Bytes)return o.push(this.readFixed32());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==vi.Bytes)return o.push(this.readSFixed32());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==vi.Bytes)return o.push(this.readFixed64());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==vi.Bytes)return o.push(this.readSFixed64());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===vi.Varint)for(;this.buf[this.pos++]>127;);else if(r===vi.Bytes)this.pos=this.readVarint()+this.pos;else if(r===vi.Fixed32)this.pos+=4;else{if(r!==vi.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var A=new Uint8Array(r);A.set(this.buf),this.buf=A,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),nh(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),nh(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),nh(this.buf,-1&o,this.pos),nh(this.buf,Math.floor(o*cC),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),nh(this.buf,-1&o,this.pos),nh(this.buf,Math.floor(o*cC),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,A){var h,g;if(r>=0?(h=r%4294967296|0,g=r/4294967296|0):(g=~(-r/4294967296),4294967295^(h=~(-r%4294967296))?h=h+1|0:(h=0,g=g+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");A.realloc(10),function(_,B,F){F.buf[F.pos++]=127&_|128,_>>>=7,F.buf[F.pos++]=127&_|128,_>>>=7,F.buf[F.pos++]=127&_|128,_>>>=7,F.buf[F.pos++]=127&_|128,F.buf[F.pos]=127&(_>>>=7)}(h,0,A),function(_,B){var F=(7&_)<<4;B.buf[B.pos++]|=F|((_>>>=3)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_)))))}(g,A)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(h,g,_){for(var B,F,U=0;U<g.length;U++){if((B=g.charCodeAt(U))>55295&&B<57344){if(!F){B>56319||U+1===g.length?(h[_++]=239,h[_++]=191,h[_++]=189):F=B;continue}if(B<56320){h[_++]=239,h[_++]=191,h[_++]=189,F=B;continue}B=F-55296<<10|B-56320|65536,F=null}else F&&(h[_++]=239,h[_++]=191,h[_++]=189,F=null);B<128?h[_++]=B:(B<2048?h[_++]=B>>6|192:(B<65536?h[_++]=B>>12|224:(h[_++]=B>>18|240,h[_++]=B>>12&63|128),h[_++]=B>>6&63|128),h[_++]=63&B|128)}return _}(this.buf,o,this.pos);var A=this.pos-r;A>=128&&hC(r,A,this),this.pos=r-1,this.writeVarint(A),this.pos+=A},writeFloat:function(o){this.realloc(4),lC(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),lC(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var A=0;A<r;A++)this.buf[this.pos++]=o[A]},writeRawMessage:function(o,r){this.pos++;var A=this.pos;o(r,this);var h=this.pos-A;h>=128&&hC(A,h,this),this.pos=A-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,r,A){this.writeTag(o,vi.Bytes),this.writeRawMessage(r,A)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,Cz,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,Sz,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,Iz,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,Fz,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,Ez,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,Lz,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,Tz,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,Uz,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,Pz,r)},writeBytesField:function(o,r){this.writeTag(o,vi.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,vi.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,vi.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,vi.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,vi.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,vi.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,vi.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,vi.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,vi.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,vi.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var Sy=w(oC);const Fy=3;function Qz(o,r,A){o===1&&A.readMessage(Mz,r)}function Mz(o,r,A){if(o===3){const{id:h,bitmap:g,width:_,height:B,left:F,top:U,advance:D}=A.readMessage(kz,{});r.push({id:h,bitmap:new Ko({width:_+2*Fy,height:B+2*Fy},g),metrics:{width:_,height:B,left:F,top:U,advance:D}})}}function kz(o,r,A){o===1?r.id=A.readVarint():o===2?r.bitmap=A.readBytes():o===3?r.width=A.readVarint():o===4?r.height=A.readVarint():o===5?r.left=A.readSVarint():o===6?r.top=A.readSVarint():o===7&&(r.advance=A.readVarint())}const dC=Fy;function fC(o){let r=0,A=0;for(const B of o)r+=B.w*B.h,A=Math.max(A,B.w);o.sort((B,F)=>F.h-B.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),A),h:1/0}];let g=0,_=0;for(const B of o)for(let F=h.length-1;F>=0;F--){const U=h[F];if(!(B.w>U.w||B.h>U.h)){if(B.x=U.x,B.y=U.y,_=Math.max(_,B.y+B.h),g=Math.max(g,B.x+B.w),B.w===U.w&&B.h===U.h){const D=h.pop();F<h.length&&(h[F]=D)}else B.h===U.h?(U.x+=B.w,U.w-=B.w):B.w===U.w?(U.y+=B.h,U.h-=B.h):(h.push({x:U.x+B.w,y:U.y,w:U.w-B.w,h:B.h}),U.y+=B.h,U.h-=B.h);break}}return{w:g,h:_,fill:r/(g*_)||0}}const ia=1;class Ey{constructor(r,A){let{pixelRatio:h,version:g,stretchX:_,stretchY:B,content:F}=A;this.paddedRect=r,this.pixelRatio=h,this.stretchX=_,this.stretchY=B,this.content=F,this.version=g}get tl(){return[this.paddedRect.x+ia,this.paddedRect.y+ia]}get br(){return[this.paddedRect.x+this.paddedRect.w-ia,this.paddedRect.y+this.paddedRect.h-ia]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ia)/this.pixelRatio,(this.paddedRect.h-2*ia)/this.pixelRatio]}}class gC{constructor(r,A){const h={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(r,h,_),this.addImages(A,g,_);const{w:B,h:F}=fC(_),U=new ds({width:B||1,height:F||1});for(const D in r){const V=r[D],W=h[D].paddedRect;ds.copy(V.data,U,{x:0,y:0},{x:W.x+ia,y:W.y+ia},V.data)}for(const D in A){const V=A[D],W=g[D].paddedRect,te=W.x+ia,ae=W.y+ia,oe=V.data.width,me=V.data.height;ds.copy(V.data,U,{x:0,y:0},{x:te,y:ae},V.data),ds.copy(V.data,U,{x:0,y:me-1},{x:te,y:ae-1},{width:oe,height:1}),ds.copy(V.data,U,{x:0,y:0},{x:te,y:ae+me},{width:oe,height:1}),ds.copy(V.data,U,{x:oe-1,y:0},{x:te-1,y:ae},{width:1,height:me}),ds.copy(V.data,U,{x:0,y:0},{x:te+oe,y:ae},{width:1,height:me})}this.image=U,this.iconPositions=h,this.patternPositions=g}addImages(r,A,h){for(const g in r){const _=r[g],B={x:0,y:0,w:_.data.width+2*ia,h:_.data.height+2*ia};h.push(B),A[g]=new Ey(B,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(r,A){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in r.updatedImages)this.patchUpdatedImage(this.iconPositions[h],r.getImage(h),A),this.patchUpdatedImage(this.patternPositions[h],r.getImage(h),A)}patchUpdatedImage(r,A,h){if(!r||!A||r.version===A.version)return;r.version=A.version;const[g,_]=r.tl;h.update(A.data,void 0,{x:g,y:_})}}var cc;Xt("ImagePosition",Ey),Xt("ImageAtlas",gC),a.ai=void 0,(cc=a.ai||(a.ai={}))[cc.none=0]="none",cc[cc.horizontal=1]="horizontal",cc[cc.vertical=2]="vertical",cc[cc.horizontalOnly=3]="horizontalOnly";const Fp=-17;class Ep{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,A){const h=new Ep;return h.scale=r||1,h.fontStack=A,h}static forImage(r){const A=new Ep;return A.imageName=r,A}}class sh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,A){const h=new sh;for(let g=0;g<r.sections.length;g++){const _=r.sections[g];_.image?h.addImageSection(_):h.addTextSection(_,A)}return h}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let A="";for(let h=0;h<r.length;h++){const g=r.charCodeAt(h+1)||null,_=r.charCodeAt(h-1)||null;A+=g&&cl(g)&&!Sp[r[h+1]]||_&&cl(_)&&!Sp[r[h-1]]||!Sp[r[h]]?r[h]:Sp[r[h]]}return A}(this.text)}trim(){let r=0;for(let h=0;h<this.text.length&&ag[this.text.charCodeAt(h)];h++)r++;let A=this.text.length;for(let h=this.text.length-1;h>=0&&h>=r&&ag[this.text.charCodeAt(h)];h--)A--;this.text=this.text.substring(r,A),this.sectionIndex=this.sectionIndex.slice(r,A)}substring(r,A){const h=new sh;return h.text=this.text.substring(r,A),h.sectionIndex=this.sectionIndex.slice(r,A),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,A)=>Math.max(r,this.sections[A].scale),0)}addTextSection(r,A){this.text+=r.text,this.sections.push(Ep.forText(r.scale,r.fontStack||A));const h=this.sections.length-1;for(let g=0;g<r.text.length;++g)this.sectionIndex.push(h)}addImageSection(r){const A=r.image?r.image.name:"";if(A.length===0)return void _e("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Ep.forImage(A)),this.sectionIndex.push(this.sections.length-1)):_e("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function sg(o,r,A,h,g,_,B,F,U,D,V,W,te,ae,oe,me){const Be=sh.fromFeature(o,g);let Me;W===a.ai.vertical&&Be.verticalizePunctuation();const{processBidirectionalText:We,processStyledBidirectionalText:je}=cs;if(We&&Be.sections.length===1){Me=[];const mt=We(Be.toString(),Iy(Be,D,_,r,h,ae,oe));for(const $t of mt){const ir=new sh;ir.text=$t,ir.sections=Be.sections;for(let qt=0;qt<$t.length;qt++)ir.sectionIndex.push(0);Me.push(ir)}}else if(je){Me=[];const mt=je(Be.text,Be.sectionIndex,Iy(Be,D,_,r,h,ae,oe));for(const $t of mt){const ir=new sh;ir.text=$t[0],ir.sectionIndex=$t[1],ir.sections=Be.sections,Me.push(ir)}}else Me=function(mt,$t){const ir=[],qt=mt.text;let Ht=0;for(const Dt of $t)ir.push(mt.substring(Ht,Dt)),Ht=Dt;return Ht<qt.length&&ir.push(mt.substring(Ht,qt.length)),ir}(Be,Iy(Be,D,_,r,h,ae,oe));const Xe=[],At={positionedLines:Xe,text:Be.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:W,iconsInText:!1,verticalizable:!1};return function(mt,$t,ir,qt,Ht,Dt,er,Ot,St,yr,lr,jr){let Pi=0,Ni=Fp,bn=0,Ca=0;const ks=Ot==="right"?1:Ot==="left"?0:.5;let An=0;for(const xn of Ht){xn.trim();const Bn=xn.getMaxScale(),fs=(Bn-1)*wn,Os={positionedGlyphs:[],lineOffset:0};mt.positionedLines[An]=Os;const gs=Os.positionedGlyphs;let na=0;if(!xn.length()){Ni+=Dt,++An;continue}for(let Cn=0;Cn<xn.length();Cn++){const Yr=xn.getSection(Cn),ms=xn.getSectionIndex(Cn),ns=xn.getCharCode(Cn);let Sn=0,ao=null,Xo=null,Zo=null,bl=wn;const oo=!(St===a.ai.horizontal||!lr&&!Jn(ns)||lr&&(ag[ns]||(Hn=ns,Gt.Arabic(Hn)||Gt["Arabic Supplement"](Hn)||Gt["Arabic Extended-A"](Hn)||Gt["Arabic Presentation Forms-A"](Hn)||Gt["Arabic Presentation Forms-B"](Hn))));if(Yr.imageName){const Oa=qt[Yr.imageName];if(!Oa)continue;Zo=Yr.imageName,mt.iconsInText=mt.iconsInText||!0,Xo=Oa.paddedRect;const aa=Oa.displaySize;Yr.scale=Yr.scale*wn/jr,ao={width:aa[0],height:aa[1],left:ia,top:-dC,advance:oo?aa[1]:aa[0]},Sn=fs+(wn-aa[1]*Yr.scale),bl=ao.advance;const xl=oo?aa[0]*Yr.scale-wn*Bn:aa[1]*Yr.scale-wn*Bn;xl>0&&xl>na&&(na=xl)}else{const Oa=ir[Yr.fontStack],aa=Oa&&Oa[ns];if(aa&&aa.rect)Xo=aa.rect,ao=aa.metrics;else{const xl=$t[Yr.fontStack],Pp=xl&&xl[ns];if(!Pp)continue;ao=Pp.metrics}Sn=(Bn-Yr.scale)*wn}oo?(mt.verticalizable=!0,gs.push({glyph:ns,imageName:Zo,x:Pi,y:Ni+Sn,vertical:oo,scale:Yr.scale,fontStack:Yr.fontStack,sectionIndex:ms,metrics:ao,rect:Xo}),Pi+=bl*Yr.scale+yr):(gs.push({glyph:ns,imageName:Zo,x:Pi,y:Ni+Sn,vertical:oo,scale:Yr.scale,fontStack:Yr.fontStack,sectionIndex:ms,metrics:ao,rect:Xo}),Pi+=ao.advance*Yr.scale+yr)}gs.length!==0&&(bn=Math.max(Pi-yr,bn),Oz(gs,0,gs.length-1,ks,na)),Pi=0;const sa=Dt*Bn+na;Os.lineOffset=Math.max(na,fs),Ni+=sa,Ca=Math.max(sa,Ca),++An}var Hn;const is=Ni-Fp,{horizontalAlign:Ds,verticalAlign:Ns}=Ly(er);(function(xn,Bn,fs,Os,gs,na,sa,Cn,Yr){const ms=(Bn-fs)*gs;let ns=0;ns=na!==sa?-Cn*Os-Fp:(-Os*Yr+.5)*sa;for(const Sn of xn)for(const ao of Sn.positionedGlyphs)ao.x+=ms,ao.y+=ns})(mt.positionedLines,ks,Ds,Ns,bn,Ca,Dt,is,Ht.length),mt.top+=-Ns*is,mt.bottom=mt.top+is,mt.left+=-Ds*bn,mt.right=mt.left+bn}(At,r,A,h,Me,B,F,U,W,D,te,me),!function(mt){for(const $t of mt)if($t.positionedGlyphs.length!==0)return!1;return!0}(Xe)&&At}const ag={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Dz={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function mC(o,r,A,h,g,_){if(r.imageName){const B=h[r.imageName];return B?B.displaySize[0]*r.scale*wn/_+g:0}{const B=A[r.fontStack],F=B&&B[o];return F?F.metrics.advance*r.scale+g:0}}function yC(o,r,A,h){const g=Math.pow(o-r,2);return h?o<r?g/2:2*g:g+Math.abs(A)*A}function Nz(o,r,A){let h=0;return o===10&&(h-=1e4),A&&(h+=150),o!==40&&o!==65288||(h+=50),r!==41&&r!==65289||(h+=50),h}function vC(o,r,A,h,g,_){let B=null,F=yC(r,A,g,_);for(const U of h){const D=yC(r-U.x,A,g,_)+U.badness;D<=F&&(B=U,F=D)}return{index:o,x:r,priorBreak:B,badness:F}}function _C(o){return o?_C(o.priorBreak).concat(o.index):[]}function Iy(o,r,A,h,g,_,B){if(_!=="point")return[];if(!o)return[];const F=[],U=function(te,ae,oe,me,Be,Me){let We=0;for(let je=0;je<te.length();je++){const Xe=te.getSection(je);We+=mC(te.getCharCode(je),Xe,me,Be,ae,Me)}return We/Math.max(1,Math.ceil(We/oe))}(o,r,A,h,g,B),D=o.text.indexOf("")>=0;let V=0;for(let te=0;te<o.length();te++){const ae=o.getSection(te),oe=o.getCharCode(te);if(ag[oe]||(V+=mC(oe,ae,h,g,r,B)),te<o.length()-1){const me=!((W=oe)<11904||!(Gt["Bopomofo Extended"](W)||Gt.Bopomofo(W)||Gt["CJK Compatibility Forms"](W)||Gt["CJK Compatibility Ideographs"](W)||Gt["CJK Compatibility"](W)||Gt["CJK Radicals Supplement"](W)||Gt["CJK Strokes"](W)||Gt["CJK Symbols and Punctuation"](W)||Gt["CJK Unified Ideographs Extension A"](W)||Gt["CJK Unified Ideographs"](W)||Gt["Enclosed CJK Letters and Months"](W)||Gt["Halfwidth and Fullwidth Forms"](W)||Gt.Hiragana(W)||Gt["Ideographic Description Characters"](W)||Gt["Kangxi Radicals"](W)||Gt["Katakana Phonetic Extensions"](W)||Gt.Katakana(W)||Gt["Vertical Forms"](W)||Gt["Yi Radicals"](W)||Gt["Yi Syllables"](W)));(Dz[oe]||me||ae.imageName)&&F.push(vC(te+1,V,U,F,Nz(oe,o.getCharCode(te+1),me&&D),!1))}}var W;return _C(vC(o.length(),V,U,F,0,!0))}function Ly(o){let r=.5,A=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:r,verticalAlign:A}}function Oz(o,r,A,h,g){if(!h&&!g)return;const _=o[A],B=(o[A].x+_.metrics.advance*_.scale)*h;for(let F=r;F<=A;F++)o[F].x-=B,o[F].y+=g}function Rz(o,r,A){const{horizontalAlign:h,verticalAlign:g}=Ly(A),_=r[0]-o.displaySize[0]*h,B=r[1]-o.displaySize[1]*g;return{image:o,top:B,bottom:B+o.displaySize[1],left:_,right:_+o.displaySize[0]}}function wC(o,r,A,h,g,_){const B=o.image;let F;if(B.content){const Be=B.content,Me=B.pixelRatio||1;F=[Be[0]/Me,Be[1]/Me,B.displaySize[0]-Be[2]/Me,B.displaySize[1]-Be[3]/Me]}const U=r.left*_,D=r.right*_;let V,W,te,ae;A==="width"||A==="both"?(ae=g[0]+U-h[3],W=g[0]+D+h[1]):(ae=g[0]+(U+D-B.displaySize[0])/2,W=ae+B.displaySize[0]);const oe=r.top*_,me=r.bottom*_;return A==="height"||A==="both"?(V=g[1]+oe-h[0],te=g[1]+me+h[2]):(V=g[1]+(oe+me-B.displaySize[1])/2,te=V+B.displaySize[1]),{image:B,top:V,right:W,bottom:te,left:ae,collisionPadding:F}}const Ip=255,RA=128,uc=Ip*RA;function bC(o,r){const{expression:A}=r;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new xi(o+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=A;let _=0;for(;_<h.length&&h[_]<=o;)_++;_=Math.max(0,_-1);let B=_;for(;B<h.length&&h[B]<o+1;)B++;B=Math.min(h.length-1,B);const F=h[_],U=h[B];return A.kind==="composite"?{kind:"composite",minZoom:F,maxZoom:U,interpolationType:g}:{kind:"camera",minZoom:F,maxZoom:U,minSize:A.evaluate(new xi(F)),maxSize:A.evaluate(new xi(U)),interpolationType:g}}}function Ty(o,r,A){let h="never";const g=o.get(r);return g?h=g:o.get(A)&&(h="always"),h}const zz=lc.VectorTileFeature.types,Hz=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function og(o,r,A,h,g,_,B,F,U,D,V,W,te){const ae=F?Math.min(uc,Math.round(F[0])):0,oe=F?Math.min(uc,Math.round(F[1])):0;o.emplaceBack(r,A,Math.round(32*h),Math.round(32*g),_,B,(ae<<1)+(U?1:0),oe,16*D,16*V,256*W,256*te)}function Uy(o,r,A){o.emplaceBack(r.x,r.y,A),o.emplaceBack(r.x,r.y,A),o.emplaceBack(r.x,r.y,A),o.emplaceBack(r.x,r.y,A)}function Vz(o){for(const r of o.sections)if(Jl(r.text))return!0;return!1}class Py{constructor(r){this.layoutVertexArray=new pt,this.indexArray=new kt,this.programConfigurations=r,this.segments=new pr,this.dynamicLayoutVertexArray=new at,this.opacityVertexArray=new _t,this.hasVisibleVertices=!1,this.placedSymbolArray=new M}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,A,h,g){this.isEmpty()||(h&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,_z.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,wz.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,Hz,!0),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Xt("SymbolBuffers",Py);class Qy{constructor(r,A,h){this.layoutVertexArray=new r,this.layoutAttributes=A,this.indexArray=new h,this.segments=new pr,this.collisionVertexArray=new Wt}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,bz.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Xt("CollisionBuffers",Qy);class ah{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(B=>B.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Zu([]),this.placementViewportMatrix=Zu([]);const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=bC(this.zoom,A["text-size"]),this.iconSizeData=bC(this.zoom,A["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=Ty(h,"text-overlap","text-allow-overlap")!=="never"||Ty(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(B=>a.ai[B])),this.stateDependentLayerIds=this.layers.filter(B=>B.isStateDependent()).map(B=>B.id),this.sourceID=r.sourceID}createArrays(){this.text=new Py(new ps(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Py(new ps(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new z,this.lineVertexArray=new G,this.symbolInstances=new N,this.textAnchorOffsets=new re}calculateGlyphDependencies(r,A,h,g,_){for(let B=0;B<r.length;B++)if(A[r.charCodeAt(B)]=!0,(h||g)&&_){const F=Sp[r.charAt(B)];F&&(A[F.charCodeAt(0)]=!0)}}populate(r,A,h){const g=this.layers[0],_=g.layout,B=_.get("text-font"),F=_.get("text-field"),U=_.get("icon-image"),D=(F.value.kind!=="constant"||F.value.value instanceof Xi&&!F.value.value.isEmpty()||F.value.value.toString().length>0)&&(B.value.kind!=="constant"||B.value.value.length>0),V=U.value.kind!=="constant"||!!U.value.value||Object.keys(U.parameters).length>0,W=_.get("symbol-sort-key");if(this.features=[],!D&&!V)return;const te=A.iconDependencies,ae=A.glyphDependencies,oe=A.availableImages,me=new xi(this.zoom);for(const{feature:Be,id:Me,index:We,sourceLayerIndex:je}of r){const Xe=g._featureFilter.needGeometry,At=DA(Be,Xe);if(!g._featureFilter.filter(me,At,h))continue;let mt,$t;if(Xe||(At.geometry=so(Be)),D){const qt=g.getValueAndResolveTokens("text-field",At,h,oe),Ht=Xi.factory(qt);Vz(Ht)&&(this.hasRTLText=!0),(!this.hasRTLText||tc()==="unavailable"||this.hasRTLText&&cs.isParsed())&&(mt=Bz(Ht,g,At))}if(V){const qt=g.getValueAndResolveTokens("icon-image",At,h,oe);$t=qt instanceof Wr?qt:Wr.fromString(qt)}if(!mt&&!$t)continue;const ir=this.sortFeaturesByKey?W.evaluate(At,{},h):void 0;if(this.features.push({id:Me,text:mt,icon:$t,index:We,sourceLayerIndex:je,geometry:At.geometry,properties:Be.properties,type:zz[Be.type],sortKey:ir}),$t&&(te[$t.name]=!0),mt){const qt=B.evaluate(At,{},h).join(","),Ht=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ai.vertical)>=0;for(const Dt of mt.sections)if(Dt.image)te[Dt.image.name]=!0;else{const er=ll(mt.toString()),Ot=Dt.fontStack||qt,St=ae[Ot]=ae[Ot]||{};this.calculateGlyphDependencies(Dt.text,St,Ht,this.allowVerticalPlacement,er)}}}_.get("symbol-placement")==="line"&&(this.features=function(Be){const Me={},We={},je=[];let Xe=0;function At(qt){je.push(Be[qt]),Xe++}function mt(qt,Ht,Dt){const er=We[qt];return delete We[qt],We[Ht]=er,je[er].geometry[0].pop(),je[er].geometry[0]=je[er].geometry[0].concat(Dt[0]),er}function $t(qt,Ht,Dt){const er=Me[Ht];return delete Me[Ht],Me[qt]=er,je[er].geometry[0].shift(),je[er].geometry[0]=Dt[0].concat(je[er].geometry[0]),er}function ir(qt,Ht,Dt){const er=Dt?Ht[0][Ht[0].length-1]:Ht[0][0];return`${qt}:${er.x}:${er.y}`}for(let qt=0;qt<Be.length;qt++){const Ht=Be[qt],Dt=Ht.geometry,er=Ht.text?Ht.text.toString():null;if(!er){At(qt);continue}const Ot=ir(er,Dt),St=ir(er,Dt,!0);if(Ot in We&&St in Me&&We[Ot]!==Me[St]){const yr=$t(Ot,St,Dt),lr=mt(Ot,St,je[yr].geometry);delete Me[Ot],delete We[St],We[ir(er,je[lr].geometry,!0)]=lr,je[yr].geometry=null}else Ot in We?mt(Ot,St,Dt):St in Me?$t(Ot,St,Dt):(At(qt),Me[Ot]=Xe-1,We[St]=Xe-1)}return je.filter(qt=>qt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Be,Me)=>Be.sortKey-Me.sortKey)}update(r,A,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,A,this.layers,h),this.icon.programConfigurations.updatePaintArrays(r,A,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,A){const h=this.lineVertexArray.length;if(r.segment!==void 0){let g=r.dist(A[r.segment+1]),_=r.dist(A[r.segment]);const B={};for(let F=r.segment+1;F<A.length;F++)B[F]={x:A[F].x,y:A[F].y,tileUnitDistanceFromAnchor:g},F<A.length-1&&(g+=A[F+1].dist(A[F]));for(let F=r.segment||0;F>=0;F--)B[F]={x:A[F].x,y:A[F].y,tileUnitDistanceFromAnchor:_},F>0&&(_+=A[F-1].dist(A[F]));for(let F=0;F<A.length;F++){const U=B[F];this.lineVertexArray.emplaceBack(U.x,U.y,U.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(r,A,h,g,_,B,F,U,D,V,W,te){const ae=r.indexArray,oe=r.layoutVertexArray,me=r.segments.prepareSegment(4*A.length,oe,ae,this.canOverlap?B.sortKey:void 0),Be=this.glyphOffsetArray.length,Me=me.vertexLength,We=this.allowVerticalPlacement&&F===a.ai.vertical?Math.PI/2:0,je=B.text&&B.text.sections;for(let Xe=0;Xe<A.length;Xe++){const{tl:At,tr:mt,bl:$t,br:ir,tex:qt,pixelOffsetTL:Ht,pixelOffsetBR:Dt,minFontScaleX:er,minFontScaleY:Ot,glyphOffset:St,isSDF:yr,sectionIndex:lr}=A[Xe],jr=me.vertexLength,Pi=St[1];og(oe,U.x,U.y,At.x,Pi+At.y,qt.x,qt.y,h,yr,Ht.x,Ht.y,er,Ot),og(oe,U.x,U.y,mt.x,Pi+mt.y,qt.x+qt.w,qt.y,h,yr,Dt.x,Ht.y,er,Ot),og(oe,U.x,U.y,$t.x,Pi+$t.y,qt.x,qt.y+qt.h,h,yr,Ht.x,Dt.y,er,Ot),og(oe,U.x,U.y,ir.x,Pi+ir.y,qt.x+qt.w,qt.y+qt.h,h,yr,Dt.x,Dt.y,er,Ot),Uy(r.dynamicLayoutVertexArray,U,We),ae.emplaceBack(jr,jr+1,jr+2),ae.emplaceBack(jr+1,jr+2,jr+3),me.vertexLength+=4,me.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(St[0]),Xe!==A.length-1&&lr===A[Xe+1].sectionIndex||r.programConfigurations.populatePaintArrays(oe.length,B,B.index,{},te,je&&je[lr])}r.placedSymbolArray.emplaceBack(U.x,U.y,Be,this.glyphOffsetArray.length-Be,Me,D,V,U.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],F,0,!1,0,W)}_addCollisionDebugVertex(r,A,h,g,_,B){return A.emplaceBack(0,0),r.emplaceBack(h.x,h.y,g,_,Math.round(B.x),Math.round(B.y))}addCollisionDebugVertices(r,A,h,g,_,B,F){const U=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),D=U.vertexLength,V=_.layoutVertexArray,W=_.collisionVertexArray,te=F.anchorX,ae=F.anchorY;this._addCollisionDebugVertex(V,W,B,te,ae,new Q(r,A)),this._addCollisionDebugVertex(V,W,B,te,ae,new Q(h,A)),this._addCollisionDebugVertex(V,W,B,te,ae,new Q(h,g)),this._addCollisionDebugVertex(V,W,B,te,ae,new Q(r,g)),U.vertexLength+=4;const oe=_.indexArray;oe.emplaceBack(D,D+1),oe.emplaceBack(D+1,D+2),oe.emplaceBack(D+2,D+3),oe.emplaceBack(D+3,D),U.primitiveLength+=4}addDebugCollisionBoxes(r,A,h,g){for(let _=r;_<A;_++){const B=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(B.x1,B.y1,B.x2,B.y2,g?this.textCollisionBox:this.iconCollisionBox,B.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Qy(Et,aC.members,Fr),this.iconCollisionBox=new Qy(Et,aC.members,Fr);for(let r=0;r<this.symbolInstances.length;r++){const A=this.symbolInstances.get(r);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(r,A,h,g,_,B,F,U,D){const V={};for(let W=A;W<h;W++){const te=r.get(W);V.textBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},V.textFeatureIndex=te.featureIndex;break}for(let W=g;W<_;W++){const te=r.get(W);V.verticalTextBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},V.verticalTextFeatureIndex=te.featureIndex;break}for(let W=B;W<F;W++){const te=r.get(W);V.iconBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},V.iconFeatureIndex=te.featureIndex;break}for(let W=U;W<D;W++){const te=r.get(W);V.verticalIconBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},V.verticalIconFeatureIndex=te.featureIndex;break}return V}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const h=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,A){const h=r.placedSymbolArray.get(A),g=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<g;_+=4)r.indexArray.emplaceBack(_,_+1,_+2),r.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(r),h=Math.cos(r),g=[],_=[],B=[];for(let F=0;F<this.symbolInstances.length;++F){B.push(F);const U=this.symbolInstances.get(F);g.push(0|Math.round(A*U.anchorX+h*U.anchorY)),_.push(U.featureIndex)}return B.sort((F,U)=>g[F]-g[U]||_[U]-_[F]),B}addToSortKeyRanges(r,A){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===A?h.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const h=this.symbolInstances.get(A);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((g,_,B)=>{g>=0&&B.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let xC,BC;Xt("SymbolBucket",ah,{omit:["layers","collisionBoxArray","features","compareText"]}),ah.MAX_GLYPHS=65535,ah.addDynamicAttributes=Uy;var My={get paint(){return BC=BC||new ui({"icon-opacity":new _r(ze.paint_symbol["icon-opacity"]),"icon-color":new _r(ze.paint_symbol["icon-color"]),"icon-halo-color":new _r(ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new _r(ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _r(ze.paint_symbol["icon-halo-blur"]),"icon-translate":new Ar(ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ar(ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new _r(ze.paint_symbol["text-opacity"]),"text-color":new _r(ze.paint_symbol["text-color"],{runtimeType:Or,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new _r(ze.paint_symbol["text-halo-color"]),"text-halo-width":new _r(ze.paint_symbol["text-halo-width"]),"text-halo-blur":new _r(ze.paint_symbol["text-halo-blur"]),"text-translate":new Ar(ze.paint_symbol["text-translate"]),"text-translate-anchor":new Ar(ze.paint_symbol["text-translate-anchor"])})},get layout(){return xC=xC||new ui({"symbol-placement":new Ar(ze.layout_symbol["symbol-placement"]),"symbol-spacing":new Ar(ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ar(ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _r(ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ar(ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ar(ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ar(ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ar(ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ar(ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ar(ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new _r(ze.layout_symbol["icon-size"]),"icon-text-fit":new Ar(ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ar(ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new _r(ze.layout_symbol["icon-image"]),"icon-rotate":new _r(ze.layout_symbol["icon-rotate"]),"icon-padding":new _r(ze.layout_symbol["icon-padding"]),"icon-keep-upright":new Ar(ze.layout_symbol["icon-keep-upright"]),"icon-offset":new _r(ze.layout_symbol["icon-offset"]),"icon-anchor":new _r(ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ar(ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ar(ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ar(ze.layout_symbol["text-rotation-alignment"]),"text-field":new _r(ze.layout_symbol["text-field"]),"text-font":new _r(ze.layout_symbol["text-font"]),"text-size":new _r(ze.layout_symbol["text-size"]),"text-max-width":new _r(ze.layout_symbol["text-max-width"]),"text-line-height":new Ar(ze.layout_symbol["text-line-height"]),"text-letter-spacing":new _r(ze.layout_symbol["text-letter-spacing"]),"text-justify":new _r(ze.layout_symbol["text-justify"]),"text-radial-offset":new _r(ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ar(ze.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new _r(ze.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new _r(ze.layout_symbol["text-anchor"]),"text-max-angle":new Ar(ze.layout_symbol["text-max-angle"]),"text-writing-mode":new Ar(ze.layout_symbol["text-writing-mode"]),"text-rotate":new _r(ze.layout_symbol["text-rotate"]),"text-padding":new Ar(ze.layout_symbol["text-padding"]),"text-keep-upright":new Ar(ze.layout_symbol["text-keep-upright"]),"text-transform":new _r(ze.layout_symbol["text-transform"]),"text-offset":new _r(ze.layout_symbol["text-offset"]),"text-allow-overlap":new Ar(ze.layout_symbol["text-allow-overlap"]),"text-overlap":new Ar(ze.layout_symbol["text-overlap"]),"text-ignore-placement":new Ar(ze.layout_symbol["text-ignore-placement"]),"text-optional":new Ar(ze.layout_symbol["text-optional"])})}};class CC{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Vr,this.defaultValue=r}evaluate(r){if(r.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(r.formattedSection))return A.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Xt("FormatSectionOverride",CC,{omit:["defaultValue"]});class Ag extends Qs{constructor(r){super(r,My)}recalculate(r,A){if(super.recalculate(r,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const _ of h)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,A,h,g){const _=this.layout.get(r).evaluate(A,{},h,g),B=this._unevaluatedLayout._values[r];return B.isDataDriven()||Di(B.value)||!_?_:function(F,U){return U.replace(/{([^{}]+)}/g,(D,V)=>F&&V in F?String(F[V]):"")}(A.properties,_)}createBucket(r){return new ah(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of My.paint.overridableProperties){if(!Ag.hasPaintOverride(this.layout,r))continue;const A=this.paint.get(r),h=new CC(A),g=new ki(h,A.property.specification);let _=null;_=A.value.kind==="constant"||A.value.kind==="source"?new qi("source",g):new Xn("composite",g,A.value.zoomStops),this.paint._values[r]=new zn(A.property,_,A.parameters)}}_handleOverridablePaintPropertyUpdate(r,A,h){return!(!this.layout||A.isDataDriven()||h.isDataDriven())&&Ag.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,A){const h=r.get("text-field"),g=My.paint.properties[A];let _=!1;const B=F=>{for(const U of F)if(g.overrides&&g.overrides.hasOverride(U))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Xi)B(h.value.value.sections);else if(h.value.kind==="source"){const F=D=>{_||(D instanceof Ia&&mi(D.value)===ue?B(D.value.sections):D instanceof Xa?B(D.sections):D.eachChild(F))},U=h.value;U._styleExpression&&F(U._styleExpression.expression)}return _}}let SC;var jz={get paint(){return SC=SC||new ui({"background-color":new Ar(ze.paint_background["background-color"]),"background-pattern":new qc(ze.paint_background["background-pattern"]),"background-opacity":new Ar(ze.paint_background["background-opacity"])})}};class Gz extends Qs{constructor(r){super(r,jz)}}let FC;var qz={get paint(){return FC=FC||new ui({"raster-opacity":new Ar(ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ar(ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ar(ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ar(ze.paint_raster["raster-brightness-max"]),"raster-saturation":new Ar(ze.paint_raster["raster-saturation"]),"raster-contrast":new Ar(ze.paint_raster["raster-contrast"]),"raster-resampling":new Ar(ze.paint_raster["raster-resampling"]),"raster-fade-duration":new Ar(ze.paint_raster["raster-fade-duration"])})}};class Kz extends Qs{constructor(r){super(r,qz)}}class $z extends Qs{constructor(r){super(r,{}),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Wz{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const ky=63710088e-1;class hc{constructor(r,A){if(isNaN(r)||isNaN(A))throw new Error(`Invalid LngLat object: (${r}, ${A})`);if(this.lng=+r,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new hc(Qe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const A=Math.PI/180,h=this.lat*A,g=r.lat*A,_=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((r.lng-this.lng)*A);return ky*Math.acos(Math.min(_,1))}static convert(r){if(r instanceof hc)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new hc(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new hc(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const EC=2*Math.PI*ky;function IC(o){return EC*Math.cos(o*Math.PI/180)}function LC(o){return(180+o)/360}function TC(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function UC(o,r){return o/IC(r)}function PC(o){return 360*o-180}function Dy(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class lg{constructor(r,A){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;this.x=+r,this.y=+A,this.z=+h}static fromLngLat(r){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const h=hc.convert(r);return new lg(LC(h.lng),TC(h.lat),UC(A,h.lat))}toLngLat(){return new hc(PC(this.x),Dy(this.y))}toAltitude(){return this.z*IC(Dy(this.y))}meterInMercatorCoordinateUnits(){return 1/EC*(r=Dy(this.y),1/Math.cos(r*Math.PI/180));var r}}function QC(o,r,A){var h=2*Math.PI*6378137/256/Math.pow(2,A);return[o*h-2*Math.PI*6378137/2,r*h-2*Math.PI*6378137/2]}class Ny{constructor(r,A,h){if(r<0||r>25||h<0||h>=Math.pow(2,r)||A<0||A>=Math.pow(2,r))throw new Error(`x=${A}, y=${h}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=A,this.y=h,this.key=Lp(0,r,r,A,h)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,A,h){const g=(B=this.y,F=this.z,U=QC(256*(_=this.x),256*(B=Math.pow(2,F)-B-1),F),D=QC(256*(_+1),256*(B+1),F),U[0]+","+U[1]+","+D[0]+","+D[1]);var _,B,F,U,D;const V=function(W,te,ae){let oe,me="";for(let Be=W;Be>0;Be--)oe=1<<Be-1,me+=(te&oe?1:0)+(ae&oe?2:0);return me}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,V).replace(/{bbox-epsg-3857}/g,g)}isChildOf(r){const A=this.z-r.z;return A>0&&r.x===this.x>>A&&r.y===this.y>>A}getTilePoint(r){const A=Math.pow(2,this.z);return new Q((r.x*A-this.x)*Si,(r.y*A-this.y)*Si)}toString(){return`${this.z}/${this.x}/${this.y}`}}class MC{constructor(r,A){this.wrap=r,this.canonical=A,this.key=Lp(r,A.z,A.z,A.x,A.y)}}class Na{constructor(r,A,h,g,_){if(r<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${h}`);this.overscaledZ=r,this.wrap=A,this.canonical=new Ny(h,+g,+_),this.key=Lp(A,r,h,g,_)}clone(){return new Na(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-r;return r>this.canonical.z?new Na(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Na(r,this.wrap,r,this.canonical.x>>A,this.canonical.y>>A)}calculateScaledKey(r,A){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-r;return r>this.canonical.z?Lp(this.wrap*+A,r,this.canonical.z,this.canonical.x,this.canonical.y):Lp(this.wrap*+A,r,r,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const A=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>A&&r.canonical.y===this.canonical.y>>A}children(r){if(this.overscaledZ>=r)return[new Na(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new Na(A,this.wrap,A,h,g),new Na(A,this.wrap,A,h+1,g),new Na(A,this.wrap,A,h,g+1),new Na(A,this.wrap,A,h+1,g+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Na(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Na(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new MC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new lg(r.x-this.wrap,r.y))}}function Lp(o,r,A,h,g){(o*=2)<0&&(o=-1*o-1);const _=1<<A;return(_*_*o+_*g+h).toString(36)+A.toString(36)+r.toString(36)}Xt("CanonicalTileID",Ny),Xt("OverscaledTileID",Na,{omit:["posMatrix"]});class kC{constructor(r,A,h){let g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,_=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,B=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1,F=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;if(this.uid=r,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void _e(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=A.height;const U=this.dim=A.height-2;switch(this.data=new Uint32Array(A.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=_,this.blueFactor=B,this.baseShift=F;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let D=0;D<U;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(U,D)]=this.data[this._idx(U-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,U)]=this.data[this._idx(D,U-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(U,-1)]=this.data[this._idx(U-1,0)],this.data[this._idx(-1,U)]=this.data[this._idx(0,U-1)],this.data[this._idx(U,U)]=this.data[this._idx(U-1,U-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<U;D++)for(let V=0;V<U;V++){const W=this.get(D,V);W>this.max&&(this.max=W),W<this.min&&(this.min=W)}}get(r,A){const h=new Uint8Array(this.data.buffer),g=4*this._idx(r,A);return this.unpack(h[g],h[g+1],h[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,A){if(r<-1||r>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(r+1)}unpack(r,A,h){return r*this.redFactor+A*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new ds({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,A,h){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let g=A*this.dim,_=A*this.dim+this.dim,B=h*this.dim,F=h*this.dim+this.dim;switch(A){case-1:g=_-1;break;case 1:_=g+1}switch(h){case-1:B=F-1;break;case 1:F=B+1}const U=-A*this.dim,D=-h*this.dim;for(let V=B;V<F;V++)for(let W=g;W<_;W++)this.data[this._idx(W,V)]=r.data[this._idx(W+U,V+D)]}}Xt("DEMData",kC);class DC{constructor(r){this._stringToNumber={},this._numberToString=[];for(let A=0;A<r.length;A++){const h=r[A];this._stringToNumber[h]=A,this._numberToString[A]=h}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class NC{constructor(r,A,h,g,_){this.type="Feature",this._vectorTileFeature=r,r._z=A,r._x=h,r._y=g,this.properties=r.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&(r[A]=this[A]);return r}}class OC{constructor(r,A){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Js(Si,16,0),this.grid3D=new Js(Si,16,0),this.featureIndexArray=new we,this.promoteId=A}insert(r,A,h,g,_,B){const F=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,_);const U=B?this.grid3D:this.grid;for(let D=0;D<A.length;D++){const V=A[D],W=[1/0,1/0,-1/0,-1/0];for(let te=0;te<V.length;te++){const ae=V[te];W[0]=Math.min(W[0],ae.x),W[1]=Math.min(W[1],ae.y),W[2]=Math.max(W[2],ae.x),W[3]=Math.max(W[3],ae.y)}W[0]<Si&&W[1]<Si&&W[2]>=0&&W[3]>=0&&U.insert(F,W[0],W[1],W[2],W[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new lc.VectorTile(new Sy(this.rawTileData)).layers,this.sourceLayerCoder=new DC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,A,h,g){this.loadVTLayers();const _=r.params||{},B=Si/r.tileSize/r.scale,F=eo(_.filter),U=r.queryGeometry,D=r.queryPadding*B,V=zC(U),W=this.grid.query(V.minX-D,V.minY-D,V.maxX+D,V.maxY+D),te=zC(r.cameraQueryGeometry),ae=this.grid3D.query(te.minX-D,te.minY-D,te.maxX+D,te.maxY+D,(Be,Me,We,je)=>function(Xe,At,mt,$t,ir){for(const Ht of Xe)if(At<=Ht.x&&mt<=Ht.y&&$t>=Ht.x&&ir>=Ht.y)return!0;const qt=[new Q(At,mt),new Q(At,ir),new Q($t,ir),new Q($t,mt)];if(Xe.length>2){for(const Ht of qt)if(yl(Xe,Ht))return!0}for(let Ht=0;Ht<Xe.length-1;Ht++)if(Wu(Xe[Ht],Xe[Ht+1],qt))return!0;return!1}(r.cameraQueryGeometry,Be-D,Me-D,We+D,je+D));for(const Be of ae)W.push(Be);W.sort(Xz);const oe={};let me;for(let Be=0;Be<W.length;Be++){const Me=W[Be];if(Me===me)continue;me=Me;const We=this.featureIndexArray.get(Me);let je=null;this.loadMatchingFeature(oe,We.bucketIndex,We.sourceLayerIndex,We.featureIndex,F,_.layers,_.availableImages,A,h,g,(Xe,At,mt)=>(je||(je=so(Xe)),At.queryIntersectsFeature(U,Xe,mt,je,this.z,r.transform,B,r.pixelPosMatrix)))}return oe}loadMatchingFeature(r,A,h,g,_,B,F,U,D,V,W){const te=this.bucketLayerIDs[A];if(B&&!function(Be,Me){for(let We=0;We<Be.length;We++)if(Me.indexOf(Be[We])>=0)return!0;return!1}(B,te))return;const ae=this.sourceLayerCoder.decode(h),oe=this.vtLayers[ae].feature(g);if(_.needGeometry){const Be=DA(oe,!0);if(!_.filter(new xi(this.tileID.overscaledZ),Be,this.tileID.canonical))return}else if(!_.filter(new xi(this.tileID.overscaledZ),oe))return;const me=this.getId(oe,ae);for(let Be=0;Be<te.length;Be++){const Me=te[Be];if(B&&B.indexOf(Me)<0)continue;const We=U[Me];if(!We)continue;let je={};me&&V&&(je=V.getState(We.sourceLayer||"_geojsonTileLayer",me));const Xe=ge({},D[Me]);Xe.paint=RC(Xe.paint,We.paint,oe,je,F),Xe.layout=RC(Xe.layout,We.layout,oe,je,F);const At=!W||W(oe,We,je);if(!At)continue;const mt=new NC(oe,this.z,this.x,this.y,me);mt.layer=Xe;let $t=r[Me];$t===void 0&&($t=r[Me]=[]),$t.push({featureIndex:g,feature:mt,intersectionZ:At})}}lookupSymbolFeatures(r,A,h,g,_,B,F,U){const D={};this.loadVTLayers();const V=eo(_);for(const W of r)this.loadMatchingFeature(D,h,g,W,V,B,F,U,A);return D}hasLayer(r){for(const A of this.bucketLayerIDs)for(const h of A)if(r===h)return!0;return!1}getId(r,A){let h=r.id;return this.promoteId&&(h=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof h=="boolean"&&(h=Number(h))),h}}function RC(o,r,A,h,g){return $e(o,(_,B)=>{const F=r instanceof fl?r.get(B):null;return F&&F.evaluate?F.evaluate(A,h,g):F})}function zC(o){let r=1/0,A=1/0,h=-1/0,g=-1/0;for(const _ of o)r=Math.min(r,_.x),A=Math.min(A,_.y),h=Math.max(h,_.x),g=Math.max(g,_.y);return{minX:r,minY:A,maxX:h,maxY:g}}function Xz(o,r){return r-o}function HC(o,r,A,h,g){const _=[];for(let B=0;B<o.length;B++){const F=o[B];let U;for(let D=0;D<F.length-1;D++){let V=F[D],W=F[D+1];V.x<r&&W.x<r||(V.x<r?V=new Q(r,V.y+(r-V.x)/(W.x-V.x)*(W.y-V.y))._round():W.x<r&&(W=new Q(r,V.y+(r-V.x)/(W.x-V.x)*(W.y-V.y))._round()),V.y<A&&W.y<A||(V.y<A?V=new Q(V.x+(A-V.y)/(W.y-V.y)*(W.x-V.x),A)._round():W.y<A&&(W=new Q(V.x+(A-V.y)/(W.y-V.y)*(W.x-V.x),A)._round()),V.x>=h&&W.x>=h||(V.x>=h?V=new Q(h,V.y+(h-V.x)/(W.x-V.x)*(W.y-V.y))._round():W.x>=h&&(W=new Q(h,V.y+(h-V.x)/(W.x-V.x)*(W.y-V.y))._round()),V.y>=g&&W.y>=g||(V.y>=g?V=new Q(V.x+(g-V.y)/(W.y-V.y)*(W.x-V.x),g)._round():W.y>=g&&(W=new Q(V.x+(g-V.y)/(W.y-V.y)*(W.x-V.x),g)._round()),U&&V.equals(U[U.length-1])||(U=[V],_.push(U)),U.push(W)))))}}return _}Xt("FeatureIndex",OC,{omit:["rawTileData","sourceLayerCoder"]});class pc extends Q{constructor(r,A,h,g){super(r,A),this.angle=h,g!==void 0&&(this.segment=g)}clone(){return new pc(this.x,this.y,this.angle,this.segment)}}function VC(o,r,A,h,g){if(r.segment===void 0||A===0)return!0;let _=r,B=r.segment+1,F=0;for(;F>-A/2;){if(B--,B<0)return!1;F-=o[B].dist(_),_=o[B]}F+=o[B].dist(o[B+1]),B++;const U=[];let D=0;for(;F<A/2;){const V=o[B],W=o[B+1];if(!W)return!1;let te=o[B-1].angleTo(V)-V.angleTo(W);for(te=Math.abs((te+3*Math.PI)%(2*Math.PI)-Math.PI),U.push({distance:F,angleDelta:te}),D+=te;F-U[0].distance>h;)D-=U.shift().angleDelta;if(D>g)return!1;B++,F+=V.dist(W)}return!0}function jC(o){let r=0;for(let A=0;A<o.length-1;A++)r+=o[A].dist(o[A+1]);return r}function GC(o,r,A){return o?.6*r*A:0}function qC(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function Zz(o,r,A,h,g,_){const B=GC(A,g,_),F=qC(A,h)*_;let U=0;const D=jC(o)/2;for(let V=0;V<o.length-1;V++){const W=o[V],te=o[V+1],ae=W.dist(te);if(U+ae>D){const oe=(D-U)/ae,me=Zi.number(W.x,te.x,oe),Be=Zi.number(W.y,te.y,oe),Me=new pc(me,Be,te.angleTo(W),V);return Me._round(),!B||VC(o,Me,F,B,r)?Me:void 0}U+=ae}}function Yz(o,r,A,h,g,_,B,F,U){const D=GC(h,_,B),V=qC(h,g),W=V*B,te=o[0].x===0||o[0].x===U||o[0].y===0||o[0].y===U;return r-W<r/4&&(r=W+r/4),KC(o,te?r/2*F%r:(V/2+2*_)*B*F%r,r,D,A,W,te,!1,U)}function KC(o,r,A,h,g,_,B,F,U){const D=_/2,V=jC(o);let W=0,te=r-A,ae=[];for(let oe=0;oe<o.length-1;oe++){const me=o[oe],Be=o[oe+1],Me=me.dist(Be),We=Be.angleTo(me);for(;te+A<W+Me;){te+=A;const je=(te-W)/Me,Xe=Zi.number(me.x,Be.x,je),At=Zi.number(me.y,Be.y,je);if(Xe>=0&&Xe<U&&At>=0&&At<U&&te-D>=0&&te+D<=V){const mt=new pc(Xe,At,We,oe);mt._round(),h&&!VC(o,mt,_,h,g)||ae.push(mt)}}W+=Me}return F||ae.length||B||(ae=KC(o,W/2,A,h,g,_,B,!0,U)),ae}Xt("Anchor",pc);const oh=ia;function $C(o,r,A,h){const g=[],_=o.image,B=_.pixelRatio,F=_.paddedRect.w-2*oh,U=_.paddedRect.h-2*oh,D=o.right-o.left,V=o.bottom-o.top,W=_.stretchX||[[0,F]],te=_.stretchY||[[0,U]],ae=(Dt,er)=>Dt+er[1]-er[0],oe=W.reduce(ae,0),me=te.reduce(ae,0),Be=F-oe,Me=U-me;let We=0,je=oe,Xe=0,At=me,mt=0,$t=Be,ir=0,qt=Me;if(_.content&&h){const Dt=_.content;We=cg(W,0,Dt[0]),Xe=cg(te,0,Dt[1]),je=cg(W,Dt[0],Dt[2]),At=cg(te,Dt[1],Dt[3]),mt=Dt[0]-We,ir=Dt[1]-Xe,$t=Dt[2]-Dt[0]-je,qt=Dt[3]-Dt[1]-At}const Ht=(Dt,er,Ot,St)=>{const yr=ug(Dt.stretch-We,je,D,o.left),lr=hg(Dt.fixed-mt,$t,Dt.stretch,oe),jr=ug(er.stretch-Xe,At,V,o.top),Pi=hg(er.fixed-ir,qt,er.stretch,me),Ni=ug(Ot.stretch-We,je,D,o.left),bn=hg(Ot.fixed-mt,$t,Ot.stretch,oe),Ca=ug(St.stretch-Xe,At,V,o.top),ks=hg(St.fixed-ir,qt,St.stretch,me),An=new Q(yr,jr),Hn=new Q(Ni,jr),is=new Q(Ni,Ca),Ds=new Q(yr,Ca),Ns=new Q(lr/B,Pi/B),xn=new Q(bn/B,ks/B),Bn=r*Math.PI/180;if(Bn){const gs=Math.sin(Bn),na=Math.cos(Bn),sa=[na,-gs,gs,na];An._matMult(sa),Hn._matMult(sa),Ds._matMult(sa),is._matMult(sa)}const fs=Dt.stretch+Dt.fixed,Os=er.stretch+er.fixed;return{tl:An,tr:Hn,bl:Ds,br:is,tex:{x:_.paddedRect.x+oh+fs,y:_.paddedRect.y+oh+Os,w:Ot.stretch+Ot.fixed-fs,h:St.stretch+St.fixed-Os},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ns,pixelOffsetBR:xn,minFontScaleX:$t/B/D,minFontScaleY:qt/B/V,isSDF:A}};if(h&&(_.stretchX||_.stretchY)){const Dt=WC(W,Be,oe),er=WC(te,Me,me);for(let Ot=0;Ot<Dt.length-1;Ot++){const St=Dt[Ot],yr=Dt[Ot+1];for(let lr=0;lr<er.length-1;lr++)g.push(Ht(St,er[lr],yr,er[lr+1]))}}else g.push(Ht({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:F+1},{fixed:0,stretch:U+1}));return g}function cg(o,r,A){let h=0;for(const g of o)h+=Math.max(r,Math.min(A,g[1]))-Math.max(r,Math.min(A,g[0]));return h}function WC(o,r,A){const h=[{fixed:-oh,stretch:0}];for(const[g,_]of o){const B=h[h.length-1];h.push({fixed:g-B.stretch,stretch:B.stretch}),h.push({fixed:g-B.stretch,stretch:B.stretch+(_-g)})}return h.push({fixed:r+oh,stretch:A}),h}function ug(o,r,A,h){return o/r*A+h}function hg(o,r,A,h){return o-r*A/h}class pg{constructor(r,A,h,g,_,B,F,U,D,V){if(this.boxStartIndex=r.length,D){let W=B.top,te=B.bottom;const ae=B.collisionPadding;ae&&(W-=ae[1],te+=ae[3]);let oe=te-W;oe>0&&(oe=Math.max(10,oe),this.circleDiameter=oe)}else{let W=B.top*F-U[0],te=B.bottom*F+U[2],ae=B.left*F-U[3],oe=B.right*F+U[1];const me=B.collisionPadding;if(me&&(ae-=me[0]*F,W-=me[1]*F,oe+=me[2]*F,te+=me[3]*F),V){const Be=new Q(ae,W),Me=new Q(oe,W),We=new Q(ae,te),je=new Q(oe,te),Xe=V*Math.PI/180;Be._rotate(Xe),Me._rotate(Xe),We._rotate(Xe),je._rotate(Xe),ae=Math.min(Be.x,Me.x,We.x,je.x),oe=Math.max(Be.x,Me.x,We.x,je.x),W=Math.min(Be.y,Me.y,We.y,je.y),te=Math.max(Be.y,Me.y,We.y,je.y)}r.emplaceBack(A.x,A.y,ae,W,oe,te,h,g,_)}this.boxEndIndex=r.length}}class Jz{constructor(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:eH;if(this.data=r,this.length=this.data.length,this.compare=A,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],A=this.data.pop();return this.length--,this.length>0&&(this.data[0]=A,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:A,compare:h}=this,g=A[r];for(;r>0;){const _=r-1>>1,B=A[_];if(h(g,B)>=0)break;A[r]=B,r=_}A[r]=g}_down(r){const{data:A,compare:h}=this,g=this.length>>1,_=A[r];for(;r<g;){let B=1+(r<<1),F=A[B];const U=B+1;if(U<this.length&&h(A[U],F)<0&&(B=U,F=A[U]),h(F,_)>=0)break;A[r]=F,r=B}A[r]=_}}function eH(o,r){return o<r?-1:o>r?1:0}function tH(o){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=1/0,g=1/0,_=-1/0,B=-1/0;const F=o[0];for(let ae=0;ae<F.length;ae++){const oe=F[ae];(!ae||oe.x<h)&&(h=oe.x),(!ae||oe.y<g)&&(g=oe.y),(!ae||oe.x>_)&&(_=oe.x),(!ae||oe.y>B)&&(B=oe.y)}const U=Math.min(_-h,B-g);let D=U/2;const V=new Jz([],rH);if(U===0)return new Q(h,g);for(let ae=h;ae<_;ae+=U)for(let oe=g;oe<B;oe+=U)V.push(new Ah(ae+D,oe+D,D,o));let W=function(ae){let oe=0,me=0,Be=0;const Me=ae[0];for(let We=0,je=Me.length,Xe=je-1;We<je;Xe=We++){const At=Me[We],mt=Me[Xe],$t=At.x*mt.y-mt.x*At.y;me+=(At.x+mt.x)*$t,Be+=(At.y+mt.y)*$t,oe+=3*$t}return new Ah(me/oe,Be/oe,0,ae)}(o),te=V.length;for(;V.length;){const ae=V.pop();(ae.d>W.d||!W.d)&&(W=ae,A&&console.log("found best %d after %d probes",Math.round(1e4*ae.d)/1e4,te)),ae.max-W.d<=r||(D=ae.h/2,V.push(new Ah(ae.p.x-D,ae.p.y-D,D,o)),V.push(new Ah(ae.p.x+D,ae.p.y-D,D,o)),V.push(new Ah(ae.p.x-D,ae.p.y+D,D,o)),V.push(new Ah(ae.p.x+D,ae.p.y+D,D,o)),te+=4)}return A&&(console.log(`num probes: ${te}`),console.log(`best distance: ${W.d}`)),W.p}function rH(o,r){return r.max-o.max}function Ah(o,r,A,h){this.p=new Q(o,r),this.h=A,this.d=function(g,_){let B=!1,F=1/0;for(let U=0;U<_.length;U++){const D=_[U];for(let V=0,W=D.length,te=W-1;V<W;te=V++){const ae=D[V],oe=D[te];ae.y>g.y!=oe.y>g.y&&g.x<(oe.x-ae.x)*(g.y-ae.y)/(oe.y-ae.y)+ae.x&&(B=!B),F=Math.min(F,Kf(g,ae,oe))}}return(B?1:-1)*Math.sqrt(F)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var rs;a.aq=void 0,(rs=a.aq||(a.aq={}))[rs.center=1]="center",rs[rs.left=2]="left",rs[rs.right=3]="right",rs[rs.top=4]="top",rs[rs.bottom=5]="bottom",rs[rs["top-left"]=6]="top-left",rs[rs["top-right"]=7]="top-right",rs[rs["bottom-left"]=8]="bottom-left",rs[rs["bottom-right"]=9]="bottom-right";const dc=7,Oy=Number.POSITIVE_INFINITY;function XC(o,r){return r[1]!==Oy?function(A,h,g){let _=0,B=0;switch(h=Math.abs(h),g=Math.abs(g),A){case"top-right":case"top-left":case"top":B=g-dc;break;case"bottom-right":case"bottom-left":case"bottom":B=-g+dc}switch(A){case"top-right":case"bottom-right":case"right":_=-h;break;case"top-left":case"bottom-left":case"left":_=h}return[_,B]}(o,r[0],r[1]):function(A,h){let g=0,_=0;h<0&&(h=0);const B=h/Math.SQRT2;switch(A){case"top-right":case"top-left":_=B-dc;break;case"bottom-right":case"bottom-left":_=-B+dc;break;case"bottom":_=-h+dc;break;case"top":_=h-dc}switch(A){case"top-right":case"bottom-right":g=-B;break;case"top-left":case"bottom-left":g=B;break;case"left":g=h;break;case"right":g=-h}return[g,_]}(o,r[0])}function ZC(o,r,A){var h;const g=o.layout,_=(h=g.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(r,{},A);if(_){const F=_.values,U=[];for(let D=0;D<F.length;D+=2){const V=U[D]=F[D],W=F[D+1].map(te=>te*wn);V.startsWith("top")?W[1]-=dc:V.startsWith("bottom")&&(W[1]+=dc),U[D+1]=W}return new Kn(U)}const B=g.get("text-variable-anchor");if(B){let F;F=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(r,{},A)*wn,Oy]:g.get("text-offset").evaluate(r,{},A).map(D=>D*wn);const U=[];for(const D of B)U.push(D,XC(D,F));return new Kn(U)}return null}function Ry(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function iH(o,r,A,h,g,_,B,F,U,D,V){let W=_.textMaxSize.evaluate(r,{});W===void 0&&(W=B);const te=o.layers[0].layout,ae=te.get("icon-offset").evaluate(r,{},V),oe=JC(A.horizontal),me=B/24,Be=o.tilePixelRatio*me,Me=o.tilePixelRatio*W/24,We=o.tilePixelRatio*F,je=o.tilePixelRatio*te.get("symbol-spacing"),Xe=te.get("text-padding")*o.tilePixelRatio,At=function(St,yr,lr){let jr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;const Pi=St.get("icon-padding").evaluate(yr,{},lr),Ni=Pi&&Pi.values;return[Ni[0]*jr,Ni[1]*jr,Ni[2]*jr,Ni[3]*jr]}(te,r,V,o.tilePixelRatio),mt=te.get("text-max-angle")/180*Math.PI,$t=te.get("text-rotation-alignment")!=="viewport"&&te.get("symbol-placement")!=="point",ir=te.get("icon-rotation-alignment")==="map"&&te.get("symbol-placement")!=="point",qt=te.get("symbol-placement"),Ht=je/2,Dt=te.get("icon-text-fit");let er;h&&Dt!=="none"&&(o.allowVerticalPlacement&&A.vertical&&(er=wC(h,A.vertical,Dt,te.get("icon-text-fit-padding"),ae,me)),oe&&(h=wC(h,oe,Dt,te.get("icon-text-fit-padding"),ae,me)));const Ot=(St,yr)=>{yr.x<0||yr.x>=Si||yr.y<0||yr.y>=Si||function(lr,jr,Pi,Ni,bn,Ca,ks,An,Hn,is,Ds,Ns,xn,Bn,fs,Os,gs,na,sa,Cn,Yr,ms,ns,Sn,ao){const Xo=lr.addToLineVertexArray(jr,Pi);let Zo,bl,oo,Oa,aa=0,xl=0,Pp=0,i4=0,$y=-1,Wy=-1;const Bl={};let n4=en("");if(lr.allowVerticalPlacement&&Ni.vertical){const ys=An.layout.get("text-rotate").evaluate(Yr,{},Sn)+90;oo=new pg(Hn,jr,is,Ds,Ns,Ni.vertical,xn,Bn,fs,ys),ks&&(Oa=new pg(Hn,jr,is,Ds,Ns,ks,gs,na,fs,ys))}if(bn){const ys=An.layout.get("icon-rotate").evaluate(Yr,{}),Ra=An.layout.get("icon-text-fit")!=="none",iu=$C(bn,ys,ns,Ra),Jo=ks?$C(ks,ys,ns,Ra):void 0;bl=new pg(Hn,jr,is,Ds,Ns,bn,gs,na,!1,ys),aa=4*iu.length;const nu=lr.iconSizeData;let zA=null;nu.kind==="source"?(zA=[RA*An.layout.get("icon-size").evaluate(Yr,{})],zA[0]>uc&&_e(`${lr.layerIds[0]}: Value for "icon-size" is >= ${Ip}. Reduce your "icon-size".`)):nu.kind==="composite"&&(zA=[RA*ms.compositeIconSizes[0].evaluate(Yr,{},Sn),RA*ms.compositeIconSizes[1].evaluate(Yr,{},Sn)],(zA[0]>uc||zA[1]>uc)&&_e(`${lr.layerIds[0]}: Value for "icon-size" is >= ${Ip}. Reduce your "icon-size".`)),lr.addSymbols(lr.icon,iu,zA,Cn,sa,Yr,a.ai.none,jr,Xo.lineStartIndex,Xo.lineLength,-1,Sn),$y=lr.icon.placedSymbolArray.length-1,Jo&&(xl=4*Jo.length,lr.addSymbols(lr.icon,Jo,zA,Cn,sa,Yr,a.ai.vertical,jr,Xo.lineStartIndex,Xo.lineLength,-1,Sn),Wy=lr.icon.placedSymbolArray.length-1)}const s4=Object.keys(Ni.horizontal);for(const ys of s4){const Ra=Ni.horizontal[ys];if(!Zo){n4=en(Ra.text);const Jo=An.layout.get("text-rotate").evaluate(Yr,{},Sn);Zo=new pg(Hn,jr,is,Ds,Ns,Ra,xn,Bn,fs,Jo)}const iu=Ra.positionedLines.length===1;if(Pp+=YC(lr,jr,Ra,Ca,An,fs,Yr,Os,Xo,Ni.vertical?a.ai.horizontal:a.ai.horizontalOnly,iu?s4:[ys],Bl,$y,ms,Sn),iu)break}Ni.vertical&&(i4+=YC(lr,jr,Ni.vertical,Ca,An,fs,Yr,Os,Xo,a.ai.vertical,["vertical"],Bl,Wy,ms,Sn));const aH=Zo?Zo.boxStartIndex:lr.collisionBoxArray.length,oH=Zo?Zo.boxEndIndex:lr.collisionBoxArray.length,AH=oo?oo.boxStartIndex:lr.collisionBoxArray.length,lH=oo?oo.boxEndIndex:lr.collisionBoxArray.length,cH=bl?bl.boxStartIndex:lr.collisionBoxArray.length,uH=bl?bl.boxEndIndex:lr.collisionBoxArray.length,hH=Oa?Oa.boxStartIndex:lr.collisionBoxArray.length,pH=Oa?Oa.boxEndIndex:lr.collisionBoxArray.length;let Yo=-1;const fg=(ys,Ra)=>ys&&ys.circleDiameter?Math.max(ys.circleDiameter,Ra):Ra;Yo=fg(Zo,Yo),Yo=fg(oo,Yo),Yo=fg(bl,Yo),Yo=fg(Oa,Yo);const a4=Yo>-1?1:0;a4&&(Yo*=ao/wn),lr.glyphOffsetArray.length>=ah.MAX_GLYPHS&&_e("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Yr.sortKey!==void 0&&lr.addToSortKeyRanges(lr.symbolInstances.length,Yr.sortKey);const dH=ZC(An,Yr,Sn),[fH,gH]=function(ys,Ra){const iu=ys.length,Jo=Ra==null?void 0:Ra.values;if((Jo==null?void 0:Jo.length)>0)for(let nu=0;nu<Jo.length;nu+=2){const zA=Jo[nu+1];ys.emplaceBack(a.aq[Jo[nu]],zA[0],zA[1])}return[iu,ys.length]}(lr.textAnchorOffsets,dH);lr.symbolInstances.emplaceBack(jr.x,jr.y,Bl.right>=0?Bl.right:-1,Bl.center>=0?Bl.center:-1,Bl.left>=0?Bl.left:-1,Bl.vertical||-1,$y,Wy,n4,aH,oH,AH,lH,cH,uH,hH,pH,is,Pp,i4,aa,xl,a4,0,xn,Yo,fH,gH)}(o,yr,St,A,h,g,er,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,Be,[Xe,Xe,Xe,Xe],$t,U,We,At,ir,ae,r,_,D,V,B)};if(qt==="line")for(const St of HC(r.geometry,0,0,Si,Si)){const yr=Yz(St,je,mt,A.vertical||oe,h,24,Me,o.overscaling,Si);for(const lr of yr)oe&&nH(o,oe.text,Ht,lr)||Ot(St,lr)}else if(qt==="line-center"){for(const St of r.geometry)if(St.length>1){const yr=Zz(St,mt,A.vertical||oe,h,24,Me);yr&&Ot(St,yr)}}else if(r.type==="Polygon")for(const St of yy(r.geometry,0)){const yr=tH(St,16);Ot(St[0],new pc(yr.x,yr.y,0))}else if(r.type==="LineString")for(const St of r.geometry)Ot(St,new pc(St[0].x,St[0].y,0));else if(r.type==="Point")for(const St of r.geometry)for(const yr of St)Ot([yr],new pc(yr.x,yr.y,0))}function YC(o,r,A,h,g,_,B,F,U,D,V,W,te,ae,oe){const me=function(We,je,Xe,At,mt,$t,ir,qt){const Ht=At.layout.get("text-rotate").evaluate($t,{})*Math.PI/180,Dt=[];for(const er of je.positionedLines)for(const Ot of er.positionedGlyphs){if(!Ot.rect)continue;const St=Ot.rect||{};let yr=dC+1,lr=!0,jr=1,Pi=0;const Ni=(mt||qt)&&Ot.vertical,bn=Ot.metrics.advance*Ot.scale/2;if(qt&&je.verticalizable&&(Pi=er.lineOffset/2-(Ot.imageName?-(wn-Ot.metrics.width*Ot.scale)/2:(Ot.scale-1)*wn)),Ot.imageName){const Cn=ir[Ot.imageName];lr=Cn.sdf,jr=Cn.pixelRatio,yr=ia/jr}const Ca=mt?[Ot.x+bn,Ot.y]:[0,0];let ks=mt?[0,0]:[Ot.x+bn+Xe[0],Ot.y+Xe[1]-Pi],An=[0,0];Ni&&(An=ks,ks=[0,0]);const Hn=Ot.metrics.isDoubleResolution?2:1,is=(Ot.metrics.left-yr)*Ot.scale-bn+ks[0],Ds=(-Ot.metrics.top-yr)*Ot.scale+ks[1],Ns=is+St.w/Hn*Ot.scale/jr,xn=Ds+St.h/Hn*Ot.scale/jr,Bn=new Q(is,Ds),fs=new Q(Ns,Ds),Os=new Q(is,xn),gs=new Q(Ns,xn);if(Ni){const Cn=new Q(-bn,bn-Fp),Yr=-Math.PI/2,ms=wn/2-bn,ns=new Q(5-Fp-ms,-(Ot.imageName?ms:0)),Sn=new Q(...An);Bn._rotateAround(Yr,Cn)._add(ns)._add(Sn),fs._rotateAround(Yr,Cn)._add(ns)._add(Sn),Os._rotateAround(Yr,Cn)._add(ns)._add(Sn),gs._rotateAround(Yr,Cn)._add(ns)._add(Sn)}if(Ht){const Cn=Math.sin(Ht),Yr=Math.cos(Ht),ms=[Yr,-Cn,Cn,Yr];Bn._matMult(ms),fs._matMult(ms),Os._matMult(ms),gs._matMult(ms)}const na=new Q(0,0),sa=new Q(0,0);Dt.push({tl:Bn,tr:fs,bl:Os,br:gs,tex:St,writingMode:je.writingMode,glyphOffset:Ca,sectionIndex:Ot.sectionIndex,isSDF:lr,pixelOffsetTL:na,pixelOffsetBR:sa,minFontScaleX:0,minFontScaleY:0})}return Dt}(0,A,F,g,_,B,h,o.allowVerticalPlacement),Be=o.textSizeData;let Me=null;Be.kind==="source"?(Me=[RA*g.layout.get("text-size").evaluate(B,{})],Me[0]>uc&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Ip}. Reduce your "text-size".`)):Be.kind==="composite"&&(Me=[RA*ae.compositeTextSizes[0].evaluate(B,{},oe),RA*ae.compositeTextSizes[1].evaluate(B,{},oe)],(Me[0]>uc||Me[1]>uc)&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Ip}. Reduce your "text-size".`)),o.addSymbols(o.text,me,Me,F,_,B,D,r,U.lineStartIndex,U.lineLength,te,oe);for(const We of V)W[We]=o.text.placedSymbolArray.length-1;return 4*me.length}function JC(o){for(const r in o)return o[r];return null}function nH(o,r,A,h){const g=o.compareText;if(r in g){const _=g[r];for(let B=_.length-1;B>=0;B--)if(h.dist(_[B])<A)return!0}else g[r]=[];return g[r].push(h),!1}const e4=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class zy{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[A,h]=new Uint8Array(r,0,2);if(A!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=e4[15&h];if(!_)throw new Error("Unrecognized array type.");const[B]=new Uint16Array(r,2,1),[F]=new Uint32Array(r,4,1);return new zy(F,B,_,r)}constructor(r){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,g=arguments.length>3?arguments[3]:void 0;if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+A,2),65535),this.ArrayType=h,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const _=e4.indexOf(this.ArrayType),B=2*r*this.ArrayType.BYTES_PER_ELEMENT,F=r*this.IndexArrayType.BYTES_PER_ELEMENT,U=(8-F%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+F+U,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+B+F+U),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+F+U,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=A,new Uint32Array(this.data,4,1)[0]=r)}add(r,A){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=r,this.coords[this._pos++]=A,h}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Hy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,A,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:B,nodeSize:F}=this,U=[0,_.length-1,0],D=[];for(;U.length;){const V=U.pop()||0,W=U.pop()||0,te=U.pop()||0;if(W-te<=F){for(let Be=te;Be<=W;Be++){const Me=B[2*Be],We=B[2*Be+1];Me>=r&&Me<=h&&We>=A&&We<=g&&D.push(_[Be])}continue}const ae=te+W>>1,oe=B[2*ae],me=B[2*ae+1];oe>=r&&oe<=h&&me>=A&&me<=g&&D.push(_[ae]),(V===0?r<=oe:A<=me)&&(U.push(te),U.push(ae-1),U.push(1-V)),(V===0?h>=oe:g>=me)&&(U.push(ae+1),U.push(W),U.push(1-V))}return D}within(r,A,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:B}=this,F=[0,g.length-1,0],U=[],D=h*h;for(;F.length;){const V=F.pop()||0,W=F.pop()||0,te=F.pop()||0;if(W-te<=B){for(let Be=te;Be<=W;Be++)r4(_[2*Be],_[2*Be+1],r,A)<=D&&U.push(g[Be]);continue}const ae=te+W>>1,oe=_[2*ae],me=_[2*ae+1];r4(oe,me,r,A)<=D&&U.push(g[ae]),(V===0?r-h<=oe:A-h<=me)&&(F.push(te),F.push(ae-1),F.push(1-V)),(V===0?r+h>=oe:A+h>=me)&&(F.push(ae+1),F.push(W),F.push(1-V))}return U}}function Hy(o,r,A,h,g,_){if(g-h<=A)return;const B=h+g>>1;t4(o,r,B,h,g,_),Hy(o,r,A,h,B-1,1-_),Hy(o,r,A,B+1,g,1-_)}function t4(o,r,A,h,g,_){for(;g>h;){if(g-h>600){const D=g-h+1,V=A-h+1,W=Math.log(D),te=.5*Math.exp(2*W/3),ae=.5*Math.sqrt(W*te*(D-te)/D)*(V-D/2<0?-1:1);t4(o,r,A,Math.max(h,Math.floor(A-V*te/D+ae)),Math.min(g,Math.floor(A+(D-V)*te/D+ae)),_)}const B=r[2*A+_];let F=h,U=g;for(Tp(o,r,h,A),r[2*g+_]>B&&Tp(o,r,h,g);F<U;){for(Tp(o,r,F,U),F++,U--;r[2*F+_]<B;)F++;for(;r[2*U+_]>B;)U--}r[2*h+_]===B?Tp(o,r,h,U):(U++,Tp(o,r,U,g)),U<=A&&(h=U+1),A<=U&&(g=U-1)}}function Tp(o,r,A,h){Vy(o,A,h),Vy(r,2*A,2*h),Vy(r,2*A+1,2*h+1)}function Vy(o,r,A){const h=o[r];o[r]=o[A],o[A]=h}function r4(o,r,A,h){const g=o-A,_=r-h;return g*g+_*_}var jy;a.bh=void 0,(jy=a.bh||(a.bh={})).create="create",jy.load="load",jy.fullLoad="fullLoad";let dg=null,Up=[];const Gy=1e3/60,qy="loadTime",Ky="fullLoadTime",sH={mark(o){performance.mark(o)},frame(o){const r=o;dg!=null&&Up.push(r-dg),dg=r},clearMetrics(){dg=null,Up=[],performance.clearMeasures(qy),performance.clearMeasures(Ky);for(const o in a.bh)performance.clearMarks(a.bh[o])},getPerformanceMetrics(){performance.measure(qy,a.bh.create,a.bh.load),performance.measure(Ky,a.bh.create,a.bh.fullLoad);const o=performance.getEntriesByName(qy)[0].duration,r=performance.getEntriesByName(Ky)[0].duration,A=Up.length,h=1/(Up.reduce((_,B)=>_+B,0)/A/1e3),g=Up.filter(_=>_>Gy).reduce((_,B)=>_+(B-Gy)/Gy,0);return{loadTime:o,fullLoadTime:r,fps:h,percentDroppedFrames:g/(A+g)*100,totalFrames:A}}};a.$=function(o,r,A){var h,g,_,B,F,U,D,V,W,te,ae,oe,me=A[0],Be=A[1],Me=A[2];return r===o?(o[12]=r[0]*me+r[4]*Be+r[8]*Me+r[12],o[13]=r[1]*me+r[5]*Be+r[9]*Me+r[13],o[14]=r[2]*me+r[6]*Be+r[10]*Me+r[14],o[15]=r[3]*me+r[7]*Be+r[11]*Me+r[15]):(g=r[1],_=r[2],B=r[3],F=r[4],U=r[5],D=r[6],V=r[7],W=r[8],te=r[9],ae=r[10],oe=r[11],o[0]=h=r[0],o[1]=g,o[2]=_,o[3]=B,o[4]=F,o[5]=U,o[6]=D,o[7]=V,o[8]=W,o[9]=te,o[10]=ae,o[11]=oe,o[12]=h*me+F*Be+W*Me+r[12],o[13]=g*me+U*Be+te*Me+r[13],o[14]=_*me+D*Be+ae*Me+r[14],o[15]=B*me+V*Be+oe*Me+r[15]),o},a.A=qo,a.B=Zi,a.C=class{constructor(o,r,A){this.receive=h=>{const g=h.data,_=g.id;if(_&&(!g.targetMapId||this.mapId===g.targetMapId))if(g.type==="<cancel>"){delete this.tasks[_];const B=this.cancelCallbacks[_];delete this.cancelCallbacks[_],B&&B()}else rt()||g.mustQueue?(this.tasks[_]=g,this.taskQueue.push(_),this.invoker.trigger()):this.processTask(_,g)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),g=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),g&&this.processTask(h,g)},this.target=o,this.parent=r,this.mapId=A,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new Wz(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=rt()?o:window}send(o,r,A,h){let g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);A&&(this.callbacks[_]=A);const B=[],F={id:_,type:o,hasCallback:!!A,targetMapId:h,mustQueue:g,sourceMapId:this.mapId,data:ka(r,B)};return this.target.postMessage(F,{transfer:B}),{cancel:()=>{A&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(o,r){if(r.type==="<response>"){const A=this.callbacks[o];delete this.callbacks[o],A&&(r.error?A(Ho(r.error)):A(null,Ho(r.data)))}else{let A=!1;const h=[],g=r.hasCallback?(F,U)=>{A=!0,delete this.cancelCallbacks[o];const D={id:o,type:"<response>",sourceMapId:this.mapId,error:F?ka(F):null,data:ka(U,h)};this.target.postMessage(D,{transfer:h})}:F=>{A=!0};let _=null;const B=Ho(r.data);if(this.parent[r.type])_=this.parent[r.type](r.sourceMapId,B,g);else if("getWorkerSource"in this.parent){const F=r.type.split(".");_=this.parent.getWorkerSource(r.sourceMapId,F[0],B.source)[F[1]](B,g)}else g(new Error(`Could not find function ${r.type}`));!A&&_&&_.cancel&&(this.cancelCallbacks[o]=_.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.D=Ar,a.E=bt,a.F=function(o,r){const A={};for(let h=0;h<r.length;h++){const g=r[h];g in o&&(A[g]=o[g])}return A},a.G=LC,a.H=TC,a.I=Ey,a.J=ne,a.K=he,a.L=hc,a.M=Bt,a.N=Si,a.O=Na,a.P=Q,a.Q=Ui,a.R=ds,a.S=pr,a.T=ic,a.U=lg,a.V=class extends io{},a.W=Ny,a.X=function(o,r){const A=window.document.createElement("video");A.muted=!0,A.onloadstart=function(){r(null,A)};for(let h=0;h<o.length;h++){const g=window.document.createElement("source");Jt(o[h])||(A.crossOrigin="Anonymous"),g.src=o[h],A.appendChild(g)}return{cancel:()=>{}}},a.Y=vt,a.Z=function(){var o=new qo(16);return qo!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},a._=m,a.a=it,a.a$=class extends se{},a.a0=function(o,r,A){var h=A[0],g=A[1],_=A[2];return o[0]=r[0]*h,o[1]=r[1]*h,o[2]=r[2]*h,o[3]=r[3]*h,o[4]=r[4]*g,o[5]=r[5]*g,o[6]=r[6]*g,o[7]=r[7]*g,o[8]=r[8]*_,o[9]=r[9]*_,o[10]=r[10]*_,o[11]=r[11]*_,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},a.a1=Yu,a.a2=function(){return Ze++},a.a3=x,a.a4=ah,a.a5=function(){cs.isLoading()||cs.isLoaded()||tc()!=="deferred"||Ku()},a.a6=eo,a.a7=DA,a.a8=xi,a.a9=NC,a.aA=Vo,a.aB=function(o){o=o.slice();const r=Object.create(null);for(let A=0;A<o.length;A++)r[o[A].id]=o[A];for(let A=0;A<o.length;A++)"ref"in o[A]&&(o[A]=Pt(o[A],r[o[A].ref]));return o},a.aC=function(o){if(o.type==="custom")return new $z(o);switch(o.type){case"background":return new Gz(o);case"circle":return new dy(o);case"fill":return new XR(o);case"fill-extrusion":return new uz(o);case"heatmap":return new $o(o);case"hillshade":return new Ju(o);case"line":return new vz(o);case"raster":return new Kz(o);case"symbol":return new Ag(o)}},a.aD=Ae,a.aE=function(o,r){if(!o)return[{command:Lt.setStyle,args:[r]}];let A=[];try{if(!Qt(o.version,r.version))return[{command:Lt.setStyle,args:[r]}];Qt(o.center,r.center)||A.push({command:Lt.setCenter,args:[r.center]}),Qt(o.zoom,r.zoom)||A.push({command:Lt.setZoom,args:[r.zoom]}),Qt(o.bearing,r.bearing)||A.push({command:Lt.setBearing,args:[r.bearing]}),Qt(o.pitch,r.pitch)||A.push({command:Lt.setPitch,args:[r.pitch]}),Qt(o.sprite,r.sprite)||A.push({command:Lt.setSprite,args:[r.sprite]}),Qt(o.glyphs,r.glyphs)||A.push({command:Lt.setGlyphs,args:[r.glyphs]}),Qt(o.transition,r.transition)||A.push({command:Lt.setTransition,args:[r.transition]}),Qt(o.light,r.light)||A.push({command:Lt.setLight,args:[r.light]});const h={},g=[];(function(B,F,U,D){let V;for(V in F=F||{},B=B||{})Object.prototype.hasOwnProperty.call(B,V)&&(Object.prototype.hasOwnProperty.call(F,V)||wr(V,U,D));for(V in F)Object.prototype.hasOwnProperty.call(F,V)&&(Object.prototype.hasOwnProperty.call(B,V)?Qt(B[V],F[V])||(B[V].type==="geojson"&&F[V].type==="geojson"&&qr(B,F,V)?U.push({command:Lt.setGeoJSONSourceData,args:[V,F[V].data]}):Lr(V,F,U,D)):hr(V,F,U))})(o.sources,r.sources,g,h);const _=[];o.layers&&o.layers.forEach(B=>{h[B.source]?A.push({command:Lt.removeLayer,args:[B.id]}):_.push(B)}),A=A.concat(g),function(B,F,U){F=F||[];const D=(B=B||[]).map(br),V=F.map(br),W=B.reduce(Rt,{}),te=F.reduce(Rt,{}),ae=D.slice(),oe=Object.create(null);let me,Be,Me,We,je,Xe,At;for(me=0,Be=0;me<D.length;me++)Me=D[me],Object.prototype.hasOwnProperty.call(te,Me)?Be++:(U.push({command:Lt.removeLayer,args:[Me]}),ae.splice(ae.indexOf(Me,Be),1));for(me=0,Be=0;me<V.length;me++)Me=V[V.length-1-me],ae[ae.length-1-me]!==Me&&(Object.prototype.hasOwnProperty.call(W,Me)?(U.push({command:Lt.removeLayer,args:[Me]}),ae.splice(ae.lastIndexOf(Me,ae.length-Be),1)):Be++,Xe=ae[ae.length-me],U.push({command:Lt.addLayer,args:[te[Me],Xe]}),ae.splice(ae.length-me,0,Me),oe[Me]=!0);for(me=0;me<V.length;me++)if(Me=V[me],We=W[Me],je=te[Me],!oe[Me]&&!Qt(We,je))if(Qt(We.source,je.source)&&Qt(We["source-layer"],je["source-layer"])&&Qt(We.type,je.type)){for(At in gr(We.layout,je.layout,U,Me,null,Lt.setLayoutProperty),gr(We.paint,je.paint,U,Me,null,Lt.setPaintProperty),Qt(We.filter,je.filter)||U.push({command:Lt.setFilter,args:[Me,je.filter]}),Qt(We.minzoom,je.minzoom)&&Qt(We.maxzoom,je.maxzoom)||U.push({command:Lt.setLayerZoomRange,args:[Me,je.minzoom,je.maxzoom]}),We)Object.prototype.hasOwnProperty.call(We,At)&&At!=="layout"&&At!=="paint"&&At!=="filter"&&At!=="metadata"&&At!=="minzoom"&&At!=="maxzoom"&&(At.indexOf("paint.")===0?gr(We[At],je[At],U,Me,At.slice(6),Lt.setPaintProperty):Qt(We[At],je[At])||U.push({command:Lt.setLayerProperty,args:[Me,At,je[At]]}));for(At in je)Object.prototype.hasOwnProperty.call(je,At)&&!Object.prototype.hasOwnProperty.call(We,At)&&At!=="layout"&&At!=="paint"&&At!=="filter"&&At!=="metadata"&&At!=="minzoom"&&At!=="maxzoom"&&(At.indexOf("paint.")===0?gr(We[At],je[At],U,Me,At.slice(6),Lt.setPaintProperty):Qt(We[At],je[At])||U.push({command:Lt.setLayerProperty,args:[Me,At,je[At]]}))}else U.push({command:Lt.removeLayer,args:[Me]}),Xe=ae[ae.lastIndexOf(Me)+1],U.push({command:Lt.addLayer,args:[je,Xe]})}(_,r.layers,A)}catch(h){console.warn("Unable to compute style diff:",h),A=[{command:Lt.setStyle,args:[r]}]}return A},a.aF=function(o){const r=[],A=o.id;return A===void 0&&r.push({message:`layers.${A}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${A}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),r},a.aG=function o(r,A){if(Array.isArray(r)){if(!Array.isArray(A)||r.length!==A.length)return!1;for(let h=0;h<r.length;h++)if(!o(r[h],A[h]))return!1;return!0}if(typeof r=="object"&&r!==null&&A!==null){if(typeof A!="object"||Object.keys(r).length!==Object.keys(A).length)return!1;for(const h in r)if(!o(r[h],A[h]))return!1;return!0}return r===A},a.aH=$e,a.aI=ce,a.aJ=dl,a.aK=function(o){return o({pluginStatus:Qn,pluginURL:ea}),dl.on("pluginStateChange",o),o},a.aL=class extends on{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},a.aM=us,a.aN=class extends on{constructor(o,r){super(o,r),this.current=Go}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},a.aO=tn,a.aP=class extends on{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},a.aQ=class extends on{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},a.aR=ba,a.aS=function(o,r,A,h,g,_,B){var F=1/(r-A),U=1/(h-g),D=1/(_-B);return o[0]=-2*F,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*U,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*D,o[11]=0,o[12]=(r+A)*F,o[13]=(g+h)*U,o[14]=(B+_)*D,o[15]=1,o},a.aT=ii,a.aU=Xf,a.aV=class extends d{},a.aW=xz,a.aX=class extends b{},a.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},a.aZ=tu,a.a_=Ie,a.aa=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(A,h,g,_)=>{const B=g||_;return r[h]=!B||B.toLowerCase(),""}),r["max-age"]){const A=parseInt(r["max-age"],10);isNaN(A)?delete r["max-age"]:r["max-age"]=A}return r},a.ab=function(o,r){const A=[];for(const h in o)h in r||A.push(h);return A},a.ac=function(o){if(Ye==null){const r=o.navigator?o.navigator.userAgent:null;Ye=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Ye},a.ad=Ne,a.ae=function(o,r,A){var h=Math.sin(A),g=Math.cos(A),_=r[0],B=r[1],F=r[2],U=r[3],D=r[4],V=r[5],W=r[6],te=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=_*g+D*h,o[1]=B*g+V*h,o[2]=F*g+W*h,o[3]=U*g+te*h,o[4]=D*g-_*h,o[5]=V*g-B*h,o[6]=W*g-F*h,o[7]=te*g-U*h,o},a.af=function(o){var r=new qo(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},a.ag=eu,a.ah=function(o,r){let A=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:B}=o,F=g?Ne(yn.interpolationFactor(g,r,_,B),0,1):0;o.kind==="camera"?h=Zi.number(o.minSize,o.maxSize,F):A=F}return{uSizeT:A,uSize:h}},a.aj=function(o,r,A){let{uSize:h,uSizeT:g}=r,{lowerSize:_,upperSize:B}=A;return o.kind==="source"?_/RA:o.kind==="composite"?Zi.number(_/RA,B/RA,g):h},a.ak=Uy,a.al=function(o,r,A,h){const g=r.y-o.y,_=r.x-o.x,B=h.y-A.y,F=h.x-A.x,U=B*_-F*g;if(U===0)return null;const D=(F*(o.y-A.y)-B*(o.x-A.x))/U;return new Q(o.x+D*_,o.y+D*g)},a.am=HC,a.an=Xc,a.ao=Zu,a.ap=wn,a.ar=Ty,a.as=function(o,r){var A=r[0],h=r[1],g=r[2],_=r[3],B=r[4],F=r[5],U=r[6],D=r[7],V=r[8],W=r[9],te=r[10],ae=r[11],oe=r[12],me=r[13],Be=r[14],Me=r[15],We=A*F-h*B,je=A*U-g*B,Xe=A*D-_*B,At=h*U-g*F,mt=h*D-_*F,$t=g*D-_*U,ir=V*me-W*oe,qt=V*Be-te*oe,Ht=V*Me-ae*oe,Dt=W*Be-te*me,er=W*Me-ae*me,Ot=te*Me-ae*Be,St=We*Ot-je*er+Xe*Dt+At*Ht-mt*qt+$t*ir;return St?(o[0]=(F*Ot-U*er+D*Dt)*(St=1/St),o[1]=(g*er-h*Ot-_*Dt)*St,o[2]=(me*$t-Be*mt+Me*At)*St,o[3]=(te*mt-W*$t-ae*At)*St,o[4]=(U*Ht-B*Ot-D*qt)*St,o[5]=(A*Ot-g*Ht+_*qt)*St,o[6]=(Be*Xe-oe*$t-Me*je)*St,o[7]=(V*$t-te*Xe+ae*je)*St,o[8]=(B*er-F*Ht+D*ir)*St,o[9]=(h*Ht-A*er-_*ir)*St,o[10]=(oe*mt-me*Xe+Me*We)*St,o[11]=(W*Xe-V*mt-ae*We)*St,o[12]=(F*qt-B*Dt-U*ir)*St,o[13]=(A*Dt-h*qt+g*ir)*St,o[14]=(me*je-oe*At-Be*We)*St,o[15]=(V*At-W*je+te*We)*St,o):null},a.at=Ry,a.au=Ly,a.av=zy,a.aw=function(){const o={},r=ze.$version;for(const A in ze.$root){const h=ze.$root[A];if(h.required){let g=null;g=A==="version"?r:h.type==="array"?[]:{},g!=null&&(o[A]=g)}}return o},a.ax=Lt,a.ay=Hc,a.az=ot,a.b=function(o,r){const A=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(A).then(h=>{r(null,h)}).catch(h=>{r(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},a.b0=kt,a.b1=function(o,r){var A=o[0],h=o[1],g=o[2],_=o[3],B=o[4],F=o[5],U=o[6],D=o[7],V=o[8],W=o[9],te=o[10],ae=o[11],oe=o[12],me=o[13],Be=o[14],Me=o[15],We=r[0],je=r[1],Xe=r[2],At=r[3],mt=r[4],$t=r[5],ir=r[6],qt=r[7],Ht=r[8],Dt=r[9],er=r[10],Ot=r[11],St=r[12],yr=r[13],lr=r[14],jr=r[15];return Math.abs(A-We)<=ts*Math.max(1,Math.abs(A),Math.abs(We))&&Math.abs(h-je)<=ts*Math.max(1,Math.abs(h),Math.abs(je))&&Math.abs(g-Xe)<=ts*Math.max(1,Math.abs(g),Math.abs(Xe))&&Math.abs(_-At)<=ts*Math.max(1,Math.abs(_),Math.abs(At))&&Math.abs(B-mt)<=ts*Math.max(1,Math.abs(B),Math.abs(mt))&&Math.abs(F-$t)<=ts*Math.max(1,Math.abs(F),Math.abs($t))&&Math.abs(U-ir)<=ts*Math.max(1,Math.abs(U),Math.abs(ir))&&Math.abs(D-qt)<=ts*Math.max(1,Math.abs(D),Math.abs(qt))&&Math.abs(V-Ht)<=ts*Math.max(1,Math.abs(V),Math.abs(Ht))&&Math.abs(W-Dt)<=ts*Math.max(1,Math.abs(W),Math.abs(Dt))&&Math.abs(te-er)<=ts*Math.max(1,Math.abs(te),Math.abs(er))&&Math.abs(ae-Ot)<=ts*Math.max(1,Math.abs(ae),Math.abs(Ot))&&Math.abs(oe-St)<=ts*Math.max(1,Math.abs(oe),Math.abs(St))&&Math.abs(me-yr)<=ts*Math.max(1,Math.abs(me),Math.abs(yr))&&Math.abs(Be-lr)<=ts*Math.max(1,Math.abs(Be),Math.abs(lr))&&Math.abs(Me-jr)<=ts*Math.max(1,Math.abs(Me),Math.abs(jr))},a.b2=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},a.b3=function(o,r,A){return o[0]=r[0]*A[0],o[1]=r[1]*A[1],o[2]=r[2]*A[2],o[3]=r[3]*A[3],o},a.b4=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},a.b5=Qe,a.b6=MC,a.b7=UC,a.b8=function(o,r,A,h,g){var _,B=1/Math.tan(r/2);return o[0]=B/A,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=B,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,g!=null&&g!==1/0?(o[10]=(g+h)*(_=1/(h-g)),o[14]=2*g*h*_):(o[10]=-1,o[14]=-2*h),o},a.b9=function(o,r,A){var h=Math.sin(A),g=Math.cos(A),_=r[4],B=r[5],F=r[6],U=r[7],D=r[8],V=r[9],W=r[10],te=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=_*g+D*h,o[5]=B*g+V*h,o[6]=F*g+W*h,o[7]=U*g+te*h,o[8]=D*g-_*h,o[9]=V*g-B*h,o[10]=W*g-F*h,o[11]=te*g-U*h,o},a.bA=S,a.bB=oC,a.bC=Yi,a.bD=cs,a.ba=Ee,a.bb=De,a.bc=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},a.bd=class extends PA{},a.be=ky,a.bf=PC,a.bg=sH,a.bi=st,a.bj=function(o,r){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(Qn===IA||Qn===hl||Qn===ec)throw new Error("setRTLTextPlugin cannot be called multiple times.");ea=Ge.resolveURL(o),Qn=IA,pl=r,jc(),A||Ku()},a.bk=tc,a.bl=function(o,r){const A={};for(let g=0;g<o.length;g++){const _=r&&r[o[g].id]||vn(o[g]);r&&(r[o[g].id]=_);let B=A[_];B||(B=A[_]=[]),B.push(o[g])}const h=[];for(const g in A)h.push(A[g]);return h},a.bm=Xt,a.bn=DC,a.bo=OC,a.bp=gC,a.bq=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Si/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],A=r.layout,h=r._unevaluatedLayout._values,g={layoutIconSize:h["icon-size"].possiblyEvaluate(new xi(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new xi(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new xi(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:V}=o.bucket.textSizeData;g.compositeTextSizes=[h["text-size"].possiblyEvaluate(new xi(D),o.canonical),h["text-size"].possiblyEvaluate(new xi(V),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:V}=o.bucket.iconSizeData;g.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new xi(D),o.canonical),h["icon-size"].possiblyEvaluate(new xi(V),o.canonical)]}const _=A.get("text-line-height")*wn,B=A.get("text-rotation-alignment")!=="viewport"&&A.get("symbol-placement")!=="point",F=A.get("text-keep-upright"),U=A.get("text-size");for(const D of o.bucket.features){const V=A.get("text-font").evaluate(D,{},o.canonical).join(","),W=U.evaluate(D,{},o.canonical),te=g.layoutTextSize.evaluate(D,{},o.canonical),ae=g.layoutIconSize.evaluate(D,{},o.canonical),oe={horizontal:{},vertical:void 0},me=D.text;let Be,Me=[0,0];if(me){const Xe=me.toString(),At=A.get("text-letter-spacing").evaluate(D,{},o.canonical)*wn,mt=EA(Xe)?At:0,$t=A.get("text-anchor").evaluate(D,{},o.canonical),ir=ZC(r,D,o.canonical);if(!ir){const Ot=A.get("text-radial-offset").evaluate(D,{},o.canonical);Me=Ot?XC($t,[Ot*wn,Oy]):A.get("text-offset").evaluate(D,{},o.canonical).map(St=>St*wn)}let qt=B?"center":A.get("text-justify").evaluate(D,{},o.canonical);const Ht=A.get("symbol-placement"),Dt=Ht==="point"?A.get("text-max-width").evaluate(D,{},o.canonical)*wn:0,er=()=>{o.bucket.allowVerticalPlacement&&ll(Xe)&&(oe.vertical=sg(me,o.glyphMap,o.glyphPositions,o.imagePositions,V,Dt,_,$t,"left",mt,Me,a.ai.vertical,!0,Ht,te,W))};if(!B&&ir){const Ot=new Set;if(qt==="auto")for(let yr=0;yr<ir.values.length;yr+=2)Ot.add(Ry(ir.values[yr]));else Ot.add(qt);let St=!1;for(const yr of Ot)if(!oe.horizontal[yr])if(St)oe.horizontal[yr]=oe.horizontal[0];else{const lr=sg(me,o.glyphMap,o.glyphPositions,o.imagePositions,V,Dt,_,"center",yr,mt,Me,a.ai.horizontal,!1,Ht,te,W);lr&&(oe.horizontal[yr]=lr,St=lr.positionedLines.length===1)}er()}else{qt==="auto"&&(qt=Ry($t));const Ot=sg(me,o.glyphMap,o.glyphPositions,o.imagePositions,V,Dt,_,$t,qt,mt,Me,a.ai.horizontal,!1,Ht,te,W);Ot&&(oe.horizontal[qt]=Ot),er(),ll(Xe)&&B&&F&&(oe.vertical=sg(me,o.glyphMap,o.glyphPositions,o.imagePositions,V,Dt,_,$t,qt,mt,Me,a.ai.vertical,!1,Ht,te,W))}}let We=!1;if(D.icon&&D.icon.name){const Xe=o.imageMap[D.icon.name];Xe&&(Be=Rz(o.imagePositions[D.icon.name],A.get("icon-offset").evaluate(D,{},o.canonical),A.get("icon-anchor").evaluate(D,{},o.canonical)),We=!!Xe.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=We:o.bucket.sdfIcons!==We&&_e("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Xe.pixelRatio!==o.bucket.pixelRatio||A.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const je=JC(oe.horizontal)||oe.vertical;o.bucket.iconsInText=!!je&&je.iconsInText,(je||Be)&&iH(o.bucket,D,oe,Be,o.imageMap,g,te,ae,Me,We,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},a.br=By,a.bs=wy,a.bt=xy,a.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},a.bv=Sy,a.bw=lc,a.bx=function(o,r,A,h,g){return m(this,void 0,void 0,function*(){if(he())try{return yield Bt(o,r,A,h,g)}catch{}return function(_,B,F,U,D){const V=_.width,W=_.height;ee&&pe||(ee=new OffscreenCanvas(V,W),pe=ee.getContext("2d",{willReadFrequently:!0})),ee.width=V,ee.height=W,pe.drawImage(_,0,0,V,W);const te=pe.getImageData(B,F,U,D);return pe.clearRect(0,0,V,W),te.data}(o,r,A,h,g)})},a.by=kC,a.bz=w,a.c=tt,a.d=function(o,r){const A=new Image;A.onload=()=>{r(null,A),URL.revokeObjectURL(A.src),A.onload=null,window.requestAnimationFrame(()=>{A.src=nt})},A.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(o)],{type:"image/png"});A.src=o.byteLength?URL.createObjectURL(h):nt},a.e=ge,a.f=function(o,r){return zt(ge(o,{type:"json"}),r)},a.g=Ct,a.h=Ge,a.i=rt,a.j=Zt,a.k=fr,a.l=Vt,a.m=zt,a.n=function(o){return new Sy(o).readFields(Qz,[])},a.o=function(o,r,A){if(!o.length)return A(null,[]);let h=o.length;const g=new Array(o.length);let _=null;o.forEach((B,F)=>{r(B,(U,D)=>{U&&(_=U),g[F]=D,--h==0&&A(_,g)})})},a.p=fC,a.q=Ko,a.r=ui,a.s=Jt,a.t=Vi,a.u=Gt,a.v=ze,a.w=_e,a.x=Ys,a.y=oi,a.z=function(o){let[r,A,h]=o;return A+=90,A*=Math.PI/180,h*=Math.PI/180,{x:r*Math.cos(A)*Math.sin(h),y:r*Math.sin(A)*Math.sin(h),z:r*Math.cos(h)}}}),u(["./shared"],function(a){class m{constructor(Z){this.keyCache={},Z&&this.replace(Z)}replace(Z){this._layerConfigs={},this._layers={},this.update(Z,[])}update(Z,ie){for(const ve of Z){this._layerConfigs[ve.id]=ve;const be=this._layers[ve.id]=a.aC(ve);be._featureFilter=a.a6(be.filter),this.keyCache[ve.id]&&delete this.keyCache[ve.id]}for(const ve of ie)delete this.keyCache[ve],delete this._layerConfigs[ve],delete this._layers[ve];this.familiesBySource={};const le=a.bl(Object.values(this._layerConfigs),this.keyCache);for(const ve of le){const be=ve.map(ht=>this._layers[ht.id]),ke=be[0];if(ke.visibility==="none")continue;const Oe=ke.source||"";let Te=this.familiesBySource[Oe];Te||(Te=this.familiesBySource[Oe]={});const Ve=ke.sourceLayer||"_geojsonTileLayer";let lt=Te[Ve];lt||(lt=Te[Ve]=[]),lt.push(be)}}}class w{constructor(Z){const ie={},le=[];for(const Oe in Z){const Te=Z[Oe],Ve=ie[Oe]={};for(const lt in Te){const ht=Te[+lt];if(!ht||ht.bitmap.width===0||ht.bitmap.height===0)continue;const gt={x:0,y:0,w:ht.bitmap.width+2,h:ht.bitmap.height+2};le.push(gt),Ve[lt]={rect:gt,metrics:ht.metrics}}}const{w:ve,h:be}=a.p(le),ke=new a.q({width:ve||1,height:be||1});for(const Oe in Z){const Te=Z[Oe];for(const Ve in Te){const lt=Te[+Ve];if(!lt||lt.bitmap.width===0||lt.bitmap.height===0)continue;const ht=ie[Oe][Ve].rect;a.q.copy(lt.bitmap,ke,{x:0,y:0},{x:ht.x+1,y:ht.y+1},lt.bitmap)}}this.image=ke,this.positions=ie}}a.bm("GlyphAtlas",w);class S{constructor(Z){this.tileID=new a.O(Z.tileID.overscaledZ,Z.tileID.wrap,Z.tileID.canonical.z,Z.tileID.canonical.x,Z.tileID.canonical.y),this.uid=Z.uid,this.zoom=Z.zoom,this.pixelRatio=Z.pixelRatio,this.tileSize=Z.tileSize,this.source=Z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Z.showCollisionBoxes,this.collectResourceTiming=!!Z.collectResourceTiming,this.returnDependencies=!!Z.returnDependencies,this.promoteId=Z.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(Z,ie,le,ve,be){this.status="parsing",this.data=Z,this.collisionBoxArray=new a.a3;const ke=new a.bn(Object.keys(Z.layers).sort()),Oe=new a.bo(this.tileID,this.promoteId);Oe.bucketLayerIDs=[];const Te={},Ve={featureIndex:Oe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:le},lt=ie.familiesBySource[this.source];for(const Sr in lt){const Le=Z.layers[Sr];if(!Le)continue;Le.version===1&&a.w(`Vector tile source "${this.source}" layer "${Sr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Mt=ke.encode(Sr),yt=[];for(let vr=0;vr<Le.length;vr++){const Nr=Le.feature(vr),di=Oe.getId(Nr,Sr);yt.push({feature:Nr,id:di,index:vr,sourceLayerIndex:Mt})}for(const vr of lt[Sr]){const Nr=vr[0];Nr.source!==this.source&&a.w(`layer.source = ${Nr.source} does not equal this.source = ${this.source}`),Nr.minzoom&&this.zoom<Math.floor(Nr.minzoom)||Nr.maxzoom&&this.zoom>=Nr.maxzoom||Nr.visibility!=="none"&&(T(vr,this.zoom,le),(Te[Nr.id]=Nr.createBucket({index:Oe.bucketLayerIDs.length,layers:vr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Mt,sourceID:this.source})).populate(yt,Ve,this.tileID.canonical),Oe.bucketLayerIDs.push(vr.map(di=>di.id)))}}let ht,gt,nr,sr;const jt=a.aH(Ve.glyphDependencies,Sr=>Object.keys(Sr).map(Number));this.inFlightDependencies.forEach(Sr=>Sr==null?void 0:Sr.cancel()),this.inFlightDependencies=[];const Yt=++this.dependencySentinel;Object.keys(jt).length?this.inFlightDependencies.push(ve.send("getGlyphs",{uid:this.uid,stacks:jt,source:this.source,tileID:this.tileID,type:"glyphs"},(Sr,Le)=>{Yt===this.dependencySentinel&&(ht||(ht=Sr,gt=Le,Rr.call(this)))})):gt={};const ur=Object.keys(Ve.iconDependencies);ur.length?this.inFlightDependencies.push(ve.send("getImages",{icons:ur,source:this.source,tileID:this.tileID,type:"icons"},(Sr,Le)=>{Yt===this.dependencySentinel&&(ht||(ht=Sr,nr=Le,Rr.call(this)))})):nr={};const Br=Object.keys(Ve.patternDependencies);function Rr(){if(ht)return be(ht);if(gt&&nr&&sr){const Sr=new w(gt),Le=new a.bp(nr,sr);for(const Mt in Te){const yt=Te[Mt];yt instanceof a.a4?(T(yt.layers,this.zoom,le),a.bq({bucket:yt,glyphMap:gt,glyphPositions:Sr.positions,imageMap:nr,imagePositions:Le.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):yt.hasPattern&&(yt instanceof a.br||yt instanceof a.bs||yt instanceof a.bt)&&(T(yt.layers,this.zoom,le),yt.addFeatures(Ve,this.tileID.canonical,Le.patternPositions))}this.status="done",be(null,{buckets:Object.values(Te).filter(Mt=>!Mt.isEmpty()),featureIndex:Oe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Sr.image,imageAtlas:Le,glyphMap:this.returnDependencies?gt:null,iconMap:this.returnDependencies?nr:null,glyphPositions:this.returnDependencies?Sr.positions:null})}}Br.length?this.inFlightDependencies.push(ve.send("getImages",{icons:Br,source:this.source,tileID:this.tileID,type:"patterns"},(Sr,Le)=>{Yt===this.dependencySentinel&&(ht||(ht=Sr,sr=Le,Rr.call(this)))})):sr={},Rr.call(this)}}function T(ue,Z,ie){const le=new a.a8(Z);for(const ve of ue)ve.recalculate(le,ie)}function Q(ue,Z){const ie=a.l(ue.request,(le,ve,be,ke)=>{if(le)Z(le);else if(ve)try{const Oe=new a.bw.VectorTile(new a.bv(ve));Z(null,{vectorTile:Oe,rawData:ve,cacheControl:be,expires:ke})}catch(Oe){const Te=new Uint8Array(ve);let Ve=`Unable to parse the tile at ${ue.request.url}, `;Ve+=Te[0]===31&&Te[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Oe.messge}`,Z(new Error(Ve))}});return()=>{ie.cancel(),Z()}}class I{constructor(Z,ie,le,ve){this.actor=Z,this.layerIndex=ie,this.availableImages=le,this.loadVectorData=ve||Q,this.fetching={},this.loading={},this.loaded={}}loadTile(Z,ie){const le=Z.uid;this.loading||(this.loading={});const ve=!!(Z&&Z.request&&Z.request.collectResourceTiming)&&new a.bu(Z.request),be=this.loading[le]=new S(Z);be.abort=this.loadVectorData(Z,(ke,Oe)=>{if(delete this.loading[le],ke||!Oe)return be.status="done",this.loaded[le]=be,ie(ke);const Te=Oe.rawData,Ve={};Oe.expires&&(Ve.expires=Oe.expires),Oe.cacheControl&&(Ve.cacheControl=Oe.cacheControl);const lt={};if(ve){const ht=ve.finish();ht&&(lt.resourceTiming=JSON.parse(JSON.stringify(ht)))}be.vectorTile=Oe.vectorTile,be.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor,(ht,gt)=>{if(delete this.fetching[le],ht||!gt)return ie(ht);ie(null,a.e({rawTileData:Te.slice(0)},gt,Ve,lt))}),this.loaded=this.loaded||{},this.loaded[le]=be,this.fetching[le]={rawTileData:Te,cacheControl:Ve,resourceTiming:lt}})}reloadTile(Z,ie){const le=this.loaded,ve=Z.uid;if(le&&le[ve]){const be=le[ve];be.showCollisionBoxes=Z.showCollisionBoxes,be.status==="parsing"?be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,(ke,Oe)=>{if(ke||!Oe)return ie(ke,Oe);let Te;if(this.fetching[ve]){const{rawTileData:Ve,cacheControl:lt,resourceTiming:ht}=this.fetching[ve];delete this.fetching[ve],Te=a.e({rawTileData:Ve.slice(0)},Oe,lt,ht)}else Te=Oe;ie(null,Te)}):be.status==="done"&&(be.vectorTile?be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,ie):ie())}}abortTile(Z,ie){const le=this.loading,ve=Z.uid;le&&le[ve]&&le[ve].abort&&(le[ve].abort(),delete le[ve]),ie()}removeTile(Z,ie){const le=this.loaded,ve=Z.uid;le&&le[ve]&&delete le[ve],ie()}}class q{constructor(){this.loaded={}}loadTile(Z,ie){return a._(this,void 0,void 0,function*(){const{uid:le,encoding:ve,rawImageData:be,redFactor:ke,greenFactor:Oe,blueFactor:Te,baseShift:Ve}=Z,lt=be.width+2,ht=be.height+2,gt=a.a(be)?new a.R({width:lt,height:ht},yield a.bx(be,-1,-1,lt,ht)):be,nr=new a.by(le,gt,ve,ke,Oe,Te,Ve);this.loaded=this.loaded||{},this.loaded[le]=nr,ie(null,nr)})}removeTile(Z){const ie=this.loaded,le=Z.uid;ie&&ie[le]&&delete ie[le]}}function j(ue,Z){if(ue.length!==0){Y(ue[0],Z);for(var ie=1;ie<ue.length;ie++)Y(ue[ie],!Z)}}function Y(ue,Z){for(var ie=0,le=0,ve=0,be=ue.length,ke=be-1;ve<be;ke=ve++){var Oe=(ue[ve][0]-ue[ke][0])*(ue[ke][1]+ue[ve][1]),Te=ie+Oe;le+=Math.abs(ie)>=Math.abs(Oe)?ie-Te+Oe:Oe-Te+ie,ie=Te}ie+le>=0!=!!Z&&ue.reverse()}var K=a.bz(function ue(Z,ie){var le,ve=Z&&Z.type;if(ve==="FeatureCollection")for(le=0;le<Z.features.length;le++)ue(Z.features[le],ie);else if(ve==="GeometryCollection")for(le=0;le<Z.geometries.length;le++)ue(Z.geometries[le],ie);else if(ve==="Feature")ue(Z.geometry,ie);else if(ve==="Polygon")j(Z.coordinates,ie);else if(ve==="MultiPolygon")for(le=0;le<Z.coordinates.length;le++)j(Z.coordinates[le],ie);return Z});const ne=a.bw.VectorTileFeature.prototype.toGeoJSON;var he={exports:{}},Ee=a.bA,De=a.bw.VectorTileFeature,Ne=Qe;function Qe(ue,Z){this.options=Z||{},this.features=ue,this.length=ue.length}function ge(ue,Z){this.id=typeof ue.id=="number"?ue.id:void 0,this.type=ue.type,this.rawGeometry=ue.type===1?[ue.geometry]:ue.geometry,this.properties=ue.tags,this.extent=Z||4096}Qe.prototype.feature=function(ue){return new ge(this.features[ue],this.options.extent)},ge.prototype.loadGeometry=function(){var ue=this.rawGeometry;this.geometry=[];for(var Z=0;Z<ue.length;Z++){for(var ie=ue[Z],le=[],ve=0;ve<ie.length;ve++)le.push(new Ee(ie[ve][0],ie[ve][1]));this.geometry.push(le)}return this.geometry},ge.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ue=this.geometry,Z=1/0,ie=-1/0,le=1/0,ve=-1/0,be=0;be<ue.length;be++)for(var ke=ue[be],Oe=0;Oe<ke.length;Oe++){var Te=ke[Oe];Z=Math.min(Z,Te.x),ie=Math.max(ie,Te.x),le=Math.min(le,Te.y),ve=Math.max(ve,Te.y)}return[Z,le,ie,ve]},ge.prototype.toGeoJSON=De.prototype.toGeoJSON;var Ze=a.bB,$e=Ne;function ce(ue){var Z=new Ze;return function(ie,le){for(var ve in ie.layers)le.writeMessage(3,Ae,ie.layers[ve])}(ue,Z),Z.finish()}function Ae(ue,Z){var ie;Z.writeVarintField(15,ue.version||1),Z.writeStringField(1,ue.name||""),Z.writeVarintField(5,ue.extent||4096);var le={keys:[],values:[],keycache:{},valuecache:{}};for(ie=0;ie<ue.length;ie++)le.feature=ue.feature(ie),Z.writeMessage(2,xe,le);var ve=le.keys;for(ie=0;ie<ve.length;ie++)Z.writeStringField(3,ve[ie]);var be=le.values;for(ie=0;ie<be.length;ie++)Z.writeMessage(4,Ye,be[ie])}function xe(ue,Z){var ie=ue.feature;ie.id!==void 0&&Z.writeVarintField(1,ie.id),Z.writeMessage(2,_e,ue),Z.writeVarintField(3,ie.type),Z.writeMessage(4,rt,ie)}function _e(ue,Z){var ie=ue.feature,le=ue.keys,ve=ue.values,be=ue.keycache,ke=ue.valuecache;for(var Oe in ie.properties){var Te=ie.properties[Oe],Ve=be[Oe];if(Te!==null){Ve===void 0&&(le.push(Oe),be[Oe]=Ve=le.length-1),Z.writeVarint(Ve);var lt=typeof Te;lt!=="string"&&lt!=="boolean"&&lt!=="number"&&(Te=JSON.stringify(Te));var ht=lt+":"+Te,gt=ke[ht];gt===void 0&&(ve.push(Te),ke[ht]=gt=ve.length-1),Z.writeVarint(gt)}}}function et(ue,Z){return(Z<<3)+(7&ue)}function Je(ue){return ue<<1^ue>>31}function rt(ue,Z){for(var ie=ue.loadGeometry(),le=ue.type,ve=0,be=0,ke=ie.length,Oe=0;Oe<ke;Oe++){var Te=ie[Oe],Ve=1;le===1&&(Ve=Te.length),Z.writeVarint(et(1,Ve));for(var lt=le===3?Te.length-1:Te.length,ht=0;ht<lt;ht++){ht===1&&le!==1&&Z.writeVarint(et(2,lt-1));var gt=Te[ht].x-ve,nr=Te[ht].y-be;Z.writeVarint(Je(gt)),Z.writeVarint(Je(nr)),ve+=gt,be+=nr}le===3&&Z.writeVarint(et(7,1))}}function Ye(ue,Z){var ie=typeof ue;ie==="string"?Z.writeStringField(1,ue):ie==="boolean"?Z.writeBooleanField(7,ue):ie==="number"&&(ue%1!=0?Z.writeDoubleField(3,ue):ue<0?Z.writeSVarintField(6,ue):Z.writeVarintField(5,ue))}he.exports=ce,he.exports.fromVectorTileJs=ce,he.exports.fromGeojsonVt=function(ue,Z){Z=Z||{};var ie={};for(var le in ue)ie[le]=new $e(ue[le].features,Z),ie[le].name=le,ie[le].version=Z.version,ie[le].extent=Z.extent;return ce({layers:ie})},he.exports.GeoJSONWrapper=$e;var it=a.bz(he.exports);const nt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ue=>ue},Bt=Math.fround||(ee=new Float32Array(1),ue=>(ee[0]=+ue,ee[0]));var ee;const pe=3,ye=5,Re=6;class Ge{constructor(Z){this.options=Object.assign(Object.create(nt),Z),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Z){const{log:ie,minZoom:le,maxZoom:ve}=this.options;ie&&console.time("total time");const be=`prepare ${Z.length} points`;ie&&console.time(be),this.points=Z;const ke=[];for(let Te=0;Te<Z.length;Te++){const Ve=Z[Te];if(!Ve.geometry)continue;const[lt,ht]=Ve.geometry.coordinates,gt=Bt(ot(lt)),nr=Bt(Ct(ht));ke.push(gt,nr,1/0,Te,-1,1),this.options.reduce&&ke.push(0)}let Oe=this.trees[ve+1]=this._createTree(ke);ie&&console.timeEnd(be);for(let Te=ve;Te>=le;Te--){const Ve=+Date.now();Oe=this.trees[Te]=this._createTree(this._cluster(Oe,Te)),ie&&console.log("z%d: %d clusters in %dms",Te,Oe.numItems,+Date.now()-Ve)}return ie&&console.timeEnd("total time"),this}getClusters(Z,ie){let le=((Z[0]+180)%360+360)%360-180;const ve=Math.max(-90,Math.min(90,Z[1]));let be=Z[2]===180?180:((Z[2]+180)%360+360)%360-180;const ke=Math.max(-90,Math.min(90,Z[3]));if(Z[2]-Z[0]>=360)le=-180,be=180;else if(le>be){const ht=this.getClusters([le,ve,180,ke],ie),gt=this.getClusters([-180,ve,be,ke],ie);return ht.concat(gt)}const Oe=this.trees[this._limitZoom(ie)],Te=Oe.range(ot(le),Ct(ke),ot(be),Ct(ve)),Ve=Oe.data,lt=[];for(const ht of Te){const gt=this.stride*ht;lt.push(Ve[gt+ye]>1?tt(Ve,gt,this.clusterProps):this.points[Ve[gt+pe]])}return lt}getChildren(Z){const ie=this._getOriginId(Z),le=this._getOriginZoom(Z),ve="No cluster with the specified id.",be=this.trees[le];if(!be)throw new Error(ve);const ke=be.data;if(ie*this.stride>=ke.length)throw new Error(ve);const Oe=this.options.radius/(this.options.extent*Math.pow(2,le-1)),Te=be.within(ke[ie*this.stride],ke[ie*this.stride+1],Oe),Ve=[];for(const lt of Te){const ht=lt*this.stride;ke[ht+4]===Z&&Ve.push(ke[ht+ye]>1?tt(ke,ht,this.clusterProps):this.points[ke[ht+pe]])}if(Ve.length===0)throw new Error(ve);return Ve}getLeaves(Z,ie,le){const ve=[];return this._appendLeaves(ve,Z,ie=ie||10,le=le||0,0),ve}getTile(Z,ie,le){const ve=this.trees[this._limitZoom(Z)],be=Math.pow(2,Z),{extent:ke,radius:Oe}=this.options,Te=Oe/ke,Ve=(le-Te)/be,lt=(le+1+Te)/be,ht={features:[]};return this._addTileFeatures(ve.range((ie-Te)/be,Ve,(ie+1+Te)/be,lt),ve.data,ie,le,be,ht),ie===0&&this._addTileFeatures(ve.range(1-Te/be,Ve,1,lt),ve.data,be,le,be,ht),ie===be-1&&this._addTileFeatures(ve.range(0,Ve,Te/be,lt),ve.data,-1,le,be,ht),ht.features.length?ht:null}getClusterExpansionZoom(Z){let ie=this._getOriginZoom(Z)-1;for(;ie<=this.options.maxZoom;){const le=this.getChildren(Z);if(ie++,le.length!==1)break;Z=le[0].properties.cluster_id}return ie}_appendLeaves(Z,ie,le,ve,be){const ke=this.getChildren(ie);for(const Oe of ke){const Te=Oe.properties;if(Te&&Te.cluster?be+Te.point_count<=ve?be+=Te.point_count:be=this._appendLeaves(Z,Te.cluster_id,le,ve,be):be<ve?be++:Z.push(Oe),Z.length===le)break}return be}_createTree(Z){const ie=new a.av(Z.length/this.stride|0,this.options.nodeSize,Float32Array);for(let le=0;le<Z.length;le+=this.stride)ie.add(Z[le],Z[le+1]);return ie.finish(),ie.data=Z,ie}_addTileFeatures(Z,ie,le,ve,be,ke){for(const Oe of Z){const Te=Oe*this.stride,Ve=ie[Te+ye]>1;let lt,ht,gt;if(Ve)lt=st(ie,Te,this.clusterProps),ht=ie[Te],gt=ie[Te+1];else{const jt=this.points[ie[Te+pe]];lt=jt.properties;const[Yt,ur]=jt.geometry.coordinates;ht=ot(Yt),gt=Ct(ur)}const nr={type:1,geometry:[[Math.round(this.options.extent*(ht*be-le)),Math.round(this.options.extent*(gt*be-ve))]],tags:lt};let sr;sr=Ve||this.options.generateId?ie[Te+pe]:this.points[ie[Te+pe]].id,sr!==void 0&&(nr.id=sr),ke.features.push(nr)}}_limitZoom(Z){return Math.max(this.options.minZoom,Math.min(Math.floor(+Z),this.options.maxZoom+1))}_cluster(Z,ie){const{radius:le,extent:ve,reduce:be,minPoints:ke}=this.options,Oe=le/(ve*Math.pow(2,ie)),Te=Z.data,Ve=[],lt=this.stride;for(let ht=0;ht<Te.length;ht+=lt){if(Te[ht+2]<=ie)continue;Te[ht+2]=ie;const gt=Te[ht],nr=Te[ht+1],sr=Z.within(Te[ht],Te[ht+1],Oe),jt=Te[ht+ye];let Yt=jt;for(const ur of sr){const Br=ur*lt;Te[Br+2]>ie&&(Yt+=Te[Br+ye])}if(Yt>jt&&Yt>=ke){let ur,Br=gt*jt,Rr=nr*jt,Sr=-1;const Le=((ht/lt|0)<<5)+(ie+1)+this.points.length;for(const Mt of sr){const yt=Mt*lt;if(Te[yt+2]<=ie)continue;Te[yt+2]=ie;const vr=Te[yt+ye];Br+=Te[yt]*vr,Rr+=Te[yt+1]*vr,Te[yt+4]=Le,be&&(ur||(ur=this._map(Te,ht,!0),Sr=this.clusterProps.length,this.clusterProps.push(ur)),be(ur,this._map(Te,yt)))}Te[ht+4]=Le,Ve.push(Br/Yt,Rr/Yt,1/0,Le,-1,Yt),be&&Ve.push(Sr)}else{for(let ur=0;ur<lt;ur++)Ve.push(Te[ht+ur]);if(Yt>1)for(const ur of sr){const Br=ur*lt;if(!(Te[Br+2]<=ie)){Te[Br+2]=ie;for(let Rr=0;Rr<lt;Rr++)Ve.push(Te[Br+Rr])}}}}return Ve}_getOriginId(Z){return Z-this.points.length>>5}_getOriginZoom(Z){return(Z-this.points.length)%32}_map(Z,ie,le){if(Z[ie+ye]>1){const ke=this.clusterProps[Z[ie+Re]];return le?Object.assign({},ke):ke}const ve=this.points[Z[ie+pe]].properties,be=this.options.map(ve);return le&&be===ve?Object.assign({},be):be}}function tt(ue,Z,ie){return{type:"Feature",id:ue[Z+pe],properties:st(ue,Z,ie),geometry:{type:"Point",coordinates:[(le=ue[Z],360*(le-.5)),Ft(ue[Z+1])]}};var le}function st(ue,Z,ie){const le=ue[Z+ye],ve=le>=1e4?`${Math.round(le/1e3)}k`:le>=1e3?Math.round(le/100)/10+"k":le,be=ue[Z+Re],ke=be===-1?{}:Object.assign({},ie[be]);return Object.assign(ke,{cluster:!0,cluster_id:ue[Z+pe],point_count:le,point_count_abbreviated:ve})}function ot(ue){return ue/360+.5}function Ct(ue){const Z=Math.sin(ue*Math.PI/180),ie=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return ie<0?0:ie>1?1:ie}function Ft(ue){const Z=(180-360*ue)*Math.PI/180;return 360*Math.atan(Math.exp(Z))/Math.PI-90}function zt(ue,Z,ie,le){for(var ve,be=le,ke=ie-Z>>1,Oe=ie-Z,Te=ue[Z],Ve=ue[Z+1],lt=ue[ie],ht=ue[ie+1],gt=Z+3;gt<ie;gt+=3){var nr=Vt(ue[gt],ue[gt+1],Te,Ve,lt,ht);if(nr>be)ve=gt,be=nr;else if(nr===be){var sr=Math.abs(gt-ke);sr<Oe&&(ve=gt,Oe=sr)}}be>le&&(ve-Z>3&&zt(ue,Z,ve,le),ue[ve+2]=be,ie-ve>3&&zt(ue,ve,ie,le))}function Vt(ue,Z,ie,le,ve,be){var ke=ve-ie,Oe=be-le;if(ke!==0||Oe!==0){var Te=((ue-ie)*ke+(Z-le)*Oe)/(ke*ke+Oe*Oe);Te>1?(ie=ve,le=be):Te>0&&(ie+=ke*Te,le+=Oe*Te)}return(ke=ue-ie)*ke+(Oe=Z-le)*Oe}function Jt(ue,Z,ie,le){var ve={id:ue===void 0?null:ue,type:Z,geometry:ie,tags:le,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(be){var ke=be.geometry,Oe=be.type;if(Oe==="Point"||Oe==="MultiPoint"||Oe==="LineString")ft(be,ke);else if(Oe==="Polygon"||Oe==="MultiLineString")for(var Te=0;Te<ke.length;Te++)ft(be,ke[Te]);else if(Oe==="MultiPolygon")for(Te=0;Te<ke.length;Te++)for(var Ve=0;Ve<ke[Te].length;Ve++)ft(be,ke[Te][Ve])}(ve),ve}function ft(ue,Z){for(var ie=0;ie<Z.length;ie+=3)ue.minX=Math.min(ue.minX,Z[ie]),ue.minY=Math.min(ue.minY,Z[ie+1]),ue.maxX=Math.max(ue.maxX,Z[ie]),ue.maxY=Math.max(ue.maxY,Z[ie+1])}function Ue(ue,Z,ie,le){if(Z.geometry){var ve=Z.geometry.coordinates,be=Z.geometry.type,ke=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2),Oe=[],Te=Z.id;if(ie.promoteId?Te=Z.properties[ie.promoteId]:ie.generateId&&(Te=le||0),be==="Point")fr(ve,Oe);else if(be==="MultiPoint")for(var Ve=0;Ve<ve.length;Ve++)fr(ve[Ve],Oe);else if(be==="LineString")Zt(ve,Oe,ke,!1);else if(be==="MultiLineString"){if(ie.lineMetrics){for(Ve=0;Ve<ve.length;Ve++)Zt(ve[Ve],Oe=[],ke,!1),ue.push(Jt(Te,"LineString",Oe,Z.properties));return}bt(ve,Oe,ke,!1)}else if(be==="Polygon")bt(ve,Oe,ke,!0);else{if(be!=="MultiPolygon"){if(be==="GeometryCollection"){for(Ve=0;Ve<Z.geometry.geometries.length;Ve++)Ue(ue,{id:Te,geometry:Z.geometry.geometries[Ve],properties:Z.properties},ie,le);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ve=0;Ve<ve.length;Ve++){var lt=[];bt(ve[Ve],lt,ke,!0),Oe.push(lt)}}ue.push(Jt(Te,be,Oe,Z.properties))}}function fr(ue,Z){Z.push(ze(ue[0])),Z.push(Ut(ue[1])),Z.push(0)}function Zt(ue,Z,ie,le){for(var ve,be,ke=0,Oe=0;Oe<ue.length;Oe++){var Te=ze(ue[Oe][0]),Ve=Ut(ue[Oe][1]);Z.push(Te),Z.push(Ve),Z.push(0),Oe>0&&(ke+=le?(ve*Ve-Te*be)/2:Math.sqrt(Math.pow(Te-ve,2)+Math.pow(Ve-be,2))),ve=Te,be=Ve}var lt=Z.length-3;Z[2]=1,zt(Z,0,lt,ie),Z[lt+2]=1,Z.size=Math.abs(ke),Z.start=0,Z.end=Z.size}function bt(ue,Z,ie,le){for(var ve=0;ve<ue.length;ve++){var be=[];Zt(ue[ve],be,ie,le),Z.push(be)}}function ze(ue){return ue/360+.5}function Ut(ue){var Z=Math.sin(ue*Math.PI/180),ie=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return ie<0?0:ie>1?1:ie}function Pt(ue,Z,ie,le,ve,be,ke,Oe){if(le/=Z,be>=(ie/=Z)&&ke<le)return ue;if(ke<ie||be>=le)return null;for(var Te=[],Ve=0;Ve<ue.length;Ve++){var lt=ue[Ve],ht=lt.geometry,gt=lt.type,nr=ve===0?lt.minX:lt.minY,sr=ve===0?lt.maxX:lt.maxY;if(nr>=ie&&sr<le)Te.push(lt);else if(!(sr<ie||nr>=le)){var jt=[];if(gt==="Point"||gt==="MultiPoint")Qt(ht,jt,ie,le,ve);else if(gt==="LineString")Lt(ht,jt,ie,le,ve,!1,Oe.lineMetrics);else if(gt==="MultiLineString")wr(ht,jt,ie,le,ve,!1);else if(gt==="Polygon")wr(ht,jt,ie,le,ve,!0);else if(gt==="MultiPolygon")for(var Yt=0;Yt<ht.length;Yt++){var ur=[];wr(ht[Yt],ur,ie,le,ve,!0),ur.length&&jt.push(ur)}if(jt.length){if(Oe.lineMetrics&&gt==="LineString"){for(Yt=0;Yt<jt.length;Yt++)Te.push(Jt(lt.id,gt,jt[Yt],lt.tags));continue}gt!=="LineString"&&gt!=="MultiLineString"||(jt.length===1?(gt="LineString",jt=jt[0]):gt="MultiLineString"),gt!=="Point"&&gt!=="MultiPoint"||(gt=jt.length===3?"Point":"MultiPoint"),Te.push(Jt(lt.id,gt,jt,lt.tags))}}}return Te.length?Te:null}function Qt(ue,Z,ie,le,ve){for(var be=0;be<ue.length;be+=3){var ke=ue[be+ve];ke>=ie&&ke<=le&&(Z.push(ue[be]),Z.push(ue[be+1]),Z.push(ue[be+2]))}}function Lt(ue,Z,ie,le,ve,be,ke){for(var Oe,Te,Ve=hr(ue),lt=ve===0?qr:gr,ht=ue.start,gt=0;gt<ue.length-3;gt+=3){var nr=ue[gt],sr=ue[gt+1],jt=ue[gt+2],Yt=ue[gt+3],ur=ue[gt+4],Br=ve===0?nr:sr,Rr=ve===0?Yt:ur,Sr=!1;ke&&(Oe=Math.sqrt(Math.pow(nr-Yt,2)+Math.pow(sr-ur,2))),Br<ie?Rr>ie&&(Te=lt(Ve,nr,sr,Yt,ur,ie),ke&&(Ve.start=ht+Oe*Te)):Br>le?Rr<le&&(Te=lt(Ve,nr,sr,Yt,ur,le),ke&&(Ve.start=ht+Oe*Te)):Lr(Ve,nr,sr,jt),Rr<ie&&Br>=ie&&(Te=lt(Ve,nr,sr,Yt,ur,ie),Sr=!0),Rr>le&&Br<=le&&(Te=lt(Ve,nr,sr,Yt,ur,le),Sr=!0),!be&&Sr&&(ke&&(Ve.end=ht+Oe*Te),Z.push(Ve),Ve=hr(ue)),ke&&(ht+=Oe)}var Le=ue.length-3;nr=ue[Le],sr=ue[Le+1],jt=ue[Le+2],(Br=ve===0?nr:sr)>=ie&&Br<=le&&Lr(Ve,nr,sr,jt),Le=Ve.length-3,be&&Le>=3&&(Ve[Le]!==Ve[0]||Ve[Le+1]!==Ve[1])&&Lr(Ve,Ve[0],Ve[1],Ve[2]),Ve.length&&Z.push(Ve)}function hr(ue){var Z=[];return Z.size=ue.size,Z.start=ue.start,Z.end=ue.end,Z}function wr(ue,Z,ie,le,ve,be){for(var ke=0;ke<ue.length;ke++)Lt(ue[ke],Z,ie,le,ve,be,!1)}function Lr(ue,Z,ie,le){ue.push(Z),ue.push(ie),ue.push(le)}function qr(ue,Z,ie,le,ve,be){var ke=(be-Z)/(le-Z);return ue.push(be),ue.push(ie+(ve-ie)*ke),ue.push(1),ke}function gr(ue,Z,ie,le,ve,be){var ke=(be-ie)/(ve-ie);return ue.push(Z+(le-Z)*ke),ue.push(be),ue.push(1),ke}function br(ue,Z){for(var ie=[],le=0;le<ue.length;le++){var ve,be=ue[le],ke=be.type;if(ke==="Point"||ke==="MultiPoint"||ke==="LineString")ve=Rt(be.geometry,Z);else if(ke==="MultiLineString"||ke==="Polygon"){ve=[];for(var Oe=0;Oe<be.geometry.length;Oe++)ve.push(Rt(be.geometry[Oe],Z))}else if(ke==="MultiPolygon")for(ve=[],Oe=0;Oe<be.geometry.length;Oe++){for(var Te=[],Ve=0;Ve<be.geometry[Oe].length;Ve++)Te.push(Rt(be.geometry[Oe][Ve],Z));ve.push(Te)}ie.push(Jt(be.id,ke,ve,be.tags))}return ie}function Rt(ue,Z){var ie=[];ie.size=ue.size,ue.start!==void 0&&(ie.start=ue.start,ie.end=ue.end);for(var le=0;le<ue.length;le+=3)ie.push(ue[le]+Z,ue[le+1],ue[le+2]);return ie}function vt(ue,Z){if(ue.transformed)return ue;var ie,le,ve,be=1<<ue.z,ke=ue.x,Oe=ue.y;for(ie=0;ie<ue.features.length;ie++){var Te=ue.features[ie],Ve=Te.geometry,lt=Te.type;if(Te.geometry=[],lt===1)for(le=0;le<Ve.length;le+=2)Te.geometry.push(Cr(Ve[le],Ve[le+1],Z,be,ke,Oe));else for(le=0;le<Ve.length;le++){var ht=[];for(ve=0;ve<Ve[le].length;ve+=2)ht.push(Cr(Ve[le][ve],Ve[le][ve+1],Z,be,ke,Oe));Te.geometry.push(ht)}}return ue.transformed=!0,ue}function Cr(ue,Z,ie,le,ve,be){return[Math.round(ie*(ue*le-ve)),Math.round(ie*(Z*le-be))]}function Tr(ue,Z,ie,le,ve){for(var be=Z===ve.maxZoom?0:ve.tolerance/((1<<Z)*ve.extent),ke={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ie,y:le,z:Z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Oe=0;Oe<ue.length;Oe++){ke.numFeatures++,Dr(ke,ue[Oe],be,ve);var Te=ue[Oe].minX,Ve=ue[Oe].minY,lt=ue[Oe].maxX,ht=ue[Oe].maxY;Te<ke.minX&&(ke.minX=Te),Ve<ke.minY&&(ke.minY=Ve),lt>ke.maxX&&(ke.maxX=lt),ht>ke.maxY&&(ke.maxY=ht)}return ke}function Dr(ue,Z,ie,le){var ve=Z.geometry,be=Z.type,ke=[];if(be==="Point"||be==="MultiPoint")for(var Oe=0;Oe<ve.length;Oe+=3)ke.push(ve[Oe]),ke.push(ve[Oe+1]),ue.numPoints++,ue.numSimplified++;else if(be==="LineString")Vr(ke,ve,ue,ie,!1,!1);else if(be==="MultiLineString"||be==="Polygon")for(Oe=0;Oe<ve.length;Oe++)Vr(ke,ve[Oe],ue,ie,be==="Polygon",Oe===0);else if(be==="MultiPolygon")for(var Te=0;Te<ve.length;Te++){var Ve=ve[Te];for(Oe=0;Oe<Ve.length;Oe++)Vr(ke,Ve[Oe],ue,ie,!0,Oe===0)}if(ke.length){var lt=Z.tags||null;if(be==="LineString"&&le.lineMetrics){for(var ht in lt={},Z.tags)lt[ht]=Z.tags[ht];lt.mapbox_clip_start=ve.start/ve.size,lt.mapbox_clip_end=ve.end/ve.size}var gt={geometry:ke,type:be==="Polygon"||be==="MultiPolygon"?3:be==="LineString"||be==="MultiLineString"?2:1,tags:lt};Z.id!==null&&(gt.id=Z.id),ue.features.push(gt)}}function Vr(ue,Z,ie,le,ve,be){var ke=le*le;if(le>0&&Z.size<(ve?ke:le))ie.numPoints+=Z.length/3;else{for(var Oe=[],Te=0;Te<Z.length;Te+=3)(le===0||Z[Te+2]>ke)&&(ie.numSimplified++,Oe.push(Z[Te]),Oe.push(Z[Te+1])),ie.numPoints++;ve&&function(Ve,lt){for(var ht=0,gt=0,nr=Ve.length,sr=nr-2;gt<nr;sr=gt,gt+=2)ht+=(Ve[gt]-Ve[sr])*(Ve[gt+1]+Ve[sr+1]);if(ht>0===lt)for(gt=0,nr=Ve.length;gt<nr/2;gt+=2){var jt=Ve[gt],Yt=Ve[gt+1];Ve[gt]=Ve[nr-2-gt],Ve[gt+1]=Ve[nr-1-gt],Ve[nr-2-gt]=jt,Ve[nr-1-gt]=Yt}}(Oe,be),ue.push(Oe)}}function xt(ue,Z){var ie=(Z=this.options=function(ve,be){for(var ke in be)ve[ke]=be[ke];return ve}(Object.create(this.options),Z)).debug;if(ie&&console.time("preprocess data"),Z.maxZoom<0||Z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Z.promoteId&&Z.generateId)throw new Error("promoteId and generateId cannot be used together.");var le=function(ve,be){var ke=[];if(ve.type==="FeatureCollection")for(var Oe=0;Oe<ve.features.length;Oe++)Ue(ke,ve.features[Oe],be,Oe);else Ue(ke,ve.type==="Feature"?ve:{geometry:ve},be);return ke}(ue,Z);this.tiles={},this.tileCoords=[],ie&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Z.indexMaxZoom,Z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),le=function(ve,be){var ke=be.buffer/be.extent,Oe=ve,Te=Pt(ve,1,-1-ke,ke,0,-1,2,be),Ve=Pt(ve,1,1-ke,2+ke,0,-1,2,be);return(Te||Ve)&&(Oe=Pt(ve,1,-ke,1+ke,0,-1,2,be)||[],Te&&(Oe=br(Te,1).concat(Oe)),Ve&&(Oe=Oe.concat(br(Ve,-1)))),Oe}(le,Z),le.length&&this.splitTile(le,0,0,0),ie&&(le.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Kt(ue,Z,ie){return 32*((1<<ue)*ie+Z)+ue}function rr(ue,Z){return Z?ue.properties[Z]:ue.id}function Or(ue,Z){if(ue==null)return!0;if(ue.type==="Feature")return rr(ue,Z)!=null;if(ue.type==="FeatureCollection"){const ie=new Set;for(const le of ue.features){const ve=rr(le,Z);if(ve==null||ie.has(ve))return!1;ie.add(ve)}return!0}return!1}function bi(ue,Z){const ie=new Map;if(ue!=null)if(ue.type==="Feature")ie.set(rr(ue,Z),ue);else for(const le of ue.features)ie.set(rr(le,Z),le);return ie}xt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},xt.prototype.splitTile=function(ue,Z,ie,le,ve,be,ke){for(var Oe=[ue,Z,ie,le],Te=this.options,Ve=Te.debug;Oe.length;){le=Oe.pop(),ie=Oe.pop(),Z=Oe.pop(),ue=Oe.pop();var lt=1<<Z,ht=Kt(Z,ie,le),gt=this.tiles[ht];if(!gt&&(Ve>1&&console.time("creation"),gt=this.tiles[ht]=Tr(ue,Z,ie,le,Te),this.tileCoords.push({z:Z,x:ie,y:le}),Ve)){Ve>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Z,ie,le,gt.numFeatures,gt.numPoints,gt.numSimplified),console.timeEnd("creation"));var nr="z"+Z;this.stats[nr]=(this.stats[nr]||0)+1,this.total++}if(gt.source=ue,ve){if(Z===Te.maxZoom||Z===ve)continue;var sr=1<<ve-Z;if(ie!==Math.floor(be/sr)||le!==Math.floor(ke/sr))continue}else if(Z===Te.indexMaxZoom||gt.numPoints<=Te.indexMaxPoints)continue;if(gt.source=null,ue.length!==0){Ve>1&&console.time("clipping");var jt,Yt,ur,Br,Rr,Sr,Le=.5*Te.buffer/Te.extent,Mt=.5-Le,yt=.5+Le,vr=1+Le;jt=Yt=ur=Br=null,Rr=Pt(ue,lt,ie-Le,ie+yt,0,gt.minX,gt.maxX,Te),Sr=Pt(ue,lt,ie+Mt,ie+vr,0,gt.minX,gt.maxX,Te),ue=null,Rr&&(jt=Pt(Rr,lt,le-Le,le+yt,1,gt.minY,gt.maxY,Te),Yt=Pt(Rr,lt,le+Mt,le+vr,1,gt.minY,gt.maxY,Te),Rr=null),Sr&&(ur=Pt(Sr,lt,le-Le,le+yt,1,gt.minY,gt.maxY,Te),Br=Pt(Sr,lt,le+Mt,le+vr,1,gt.minY,gt.maxY,Te),Sr=null),Ve>1&&console.timeEnd("clipping"),Oe.push(jt||[],Z+1,2*ie,2*le),Oe.push(Yt||[],Z+1,2*ie,2*le+1),Oe.push(ur||[],Z+1,2*ie+1,2*le),Oe.push(Br||[],Z+1,2*ie+1,2*le+1)}}},xt.prototype.getTile=function(ue,Z,ie){var le=this.options,ve=le.extent,be=le.debug;if(ue<0||ue>24)return null;var ke=1<<ue,Oe=Kt(ue,Z=(Z%ke+ke)%ke,ie);if(this.tiles[Oe])return vt(this.tiles[Oe],ve);be>1&&console.log("drilling down to z%d-%d-%d",ue,Z,ie);for(var Te,Ve=ue,lt=Z,ht=ie;!Te&&Ve>0;)Ve--,lt=Math.floor(lt/2),ht=Math.floor(ht/2),Te=this.tiles[Kt(Ve,lt,ht)];return Te&&Te.source?(be>1&&console.log("found parent tile z%d-%d-%d",Ve,lt,ht),be>1&&console.time("drilling down"),this.splitTile(Te.source,Ve,lt,ht,ue,Z,ie),be>1&&console.timeEnd("drilling down"),this.tiles[Oe]?vt(this.tiles[Oe],ve):null):null};class Nt extends I{constructor(Z,ie,le,ve){super(Z,ie,le),this._dataUpdateable=new Map,this.loadGeoJSON=(be,ke)=>{const{promoteId:Oe}=be;if(be.request)return a.f(be.request,(Te,Ve,lt,ht)=>{this._dataUpdateable=Or(Ve,Oe)?bi(Ve,Oe):void 0,ke(Te,Ve,lt,ht)});if(typeof be.data=="string")try{const Te=JSON.parse(be.data);this._dataUpdateable=Or(Te,Oe)?bi(Te,Oe):void 0,ke(null,Te)}catch{ke(new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`))}else be.dataDiff?this._dataUpdateable?(function(Te,Ve,lt){var ht,gt,nr,sr;if(Ve.removeAll&&Te.clear(),Ve.remove)for(const jt of Ve.remove)Te.delete(jt);if(Ve.add)for(const jt of Ve.add){const Yt=rr(jt,lt);Yt!=null&&Te.set(Yt,jt)}if(Ve.update)for(const jt of Ve.update){let Yt=Te.get(jt.id);if(Yt==null)continue;const ur=!jt.removeAllProperties&&(((ht=jt.removeProperties)===null||ht===void 0?void 0:ht.length)>0||((gt=jt.addOrUpdateProperties)===null||gt===void 0?void 0:gt.length)>0);if((jt.newGeometry||jt.removeAllProperties||ur)&&(Yt=Object.assign({},Yt),Te.set(jt.id,Yt),ur&&(Yt.properties=Object.assign({},Yt.properties))),jt.newGeometry&&(Yt.geometry=jt.newGeometry),jt.removeAllProperties)Yt.properties={};else if(((nr=jt.removeProperties)===null||nr===void 0?void 0:nr.length)>0)for(const Br of jt.removeProperties)Object.prototype.hasOwnProperty.call(Yt.properties,Br)&&delete Yt.properties[Br];if(((sr=jt.addOrUpdateProperties)===null||sr===void 0?void 0:sr.length)>0)for(const{key:Br,value:Rr}of jt.addOrUpdateProperties)Yt.properties[Br]=Rr}}(this._dataUpdateable,be.dataDiff,Oe),ke(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):ke(new Error(`Cannot update existing geojson data in ${be.source}`)):ke(new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,ve&&(this.loadGeoJSON=ve)}loadGeoJSONTile(Z,ie){const le=Z.tileID.canonical;if(!this._geoJSONIndex)return ie(null,null);const ve=this._geoJSONIndex.getTile(le.z,le.x,le.y);if(!ve)return ie(null,null);const be=new class{constructor(Oe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.N,this.length=Oe.length,this._features=Oe}feature(Oe){return new class{constructor(Te){this._feature=Te,this.extent=a.N,this.type=Te.type,this.properties=Te.tags,"id"in Te&&!isNaN(Te.id)&&(this.id=parseInt(Te.id,10))}loadGeometry(){if(this._feature.type===1){const Te=[];for(const Ve of this._feature.geometry)Te.push([new a.P(Ve[0],Ve[1])]);return Te}{const Te=[];for(const Ve of this._feature.geometry){const lt=[];for(const ht of Ve)lt.push(new a.P(ht[0],ht[1]));Te.push(lt)}return Te}}toGeoJSON(Te,Ve,lt){return ne.call(this,Te,Ve,lt)}}(this._features[Oe])}}(ve.features);let ke=it(be);ke.byteOffset===0&&ke.byteLength===ke.buffer.byteLength||(ke=new Uint8Array(ke)),ie(null,{vectorTile:be,rawData:ke.buffer})}loadData(Z,ie){var le;(le=this._pendingRequest)===null||le===void 0||le.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ve=!!(Z&&Z.request&&Z.request.collectResourceTiming)&&new a.bu(Z.request);this._pendingCallback=ie,this._pendingRequest=this.loadGeoJSON(Z,(be,ke)=>{if(delete this._pendingCallback,delete this._pendingRequest,be||!ke)return ie(be);if(typeof ke!="object")return ie(new Error(`Input data given to '${Z.source}' is not a valid GeoJSON object.`));{K(ke,!0);try{if(Z.filter){const Te=a.bC(Z.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Te.result==="error")throw new Error(Te.value.map(lt=>`${lt.key}: ${lt.message}`).join(", "));ke={type:"FeatureCollection",features:ke.features.filter(lt=>Te.value.evaluate({zoom:0},lt))}}this._geoJSONIndex=Z.cluster?new Ge(function(Te){let{superclusterOptions:Ve,clusterProperties:lt}=Te;if(!lt||!Ve)return Ve;const ht={},gt={},nr={accumulated:null,zoom:0},sr={properties:null},jt=Object.keys(lt);for(const Yt of jt){const[ur,Br]=lt[Yt],Rr=a.bC(Br),Sr=a.bC(typeof ur=="string"?[ur,["accumulated"],["get",Yt]]:ur);ht[Yt]=Rr.value,gt[Yt]=Sr.value}return Ve.map=Yt=>{sr.properties=Yt;const ur={};for(const Br of jt)ur[Br]=ht[Br].evaluate(nr,sr);return ur},Ve.reduce=(Yt,ur)=>{sr.properties=ur;for(const Br of jt)nr.accumulated=Yt[Br],Yt[Br]=gt[Br].evaluate(nr,sr)},Ve}(Z)).load(ke.features):function(Te,Ve){return new xt(Te,Ve)}(ke,Z.geojsonVtOptions)}catch(Te){return ie(Te)}this.loaded={};const Oe={};if(ve){const Te=ve.finish();Te&&(Oe.resourceTiming={},Oe.resourceTiming[Z.source]=JSON.parse(JSON.stringify(Te)))}ie(null,Oe)}})}reloadTile(Z,ie){const le=this.loaded;return le&&le[Z.uid]?super.reloadTile(Z,ie):this.loadTile(Z,ie)}removeSource(Z,ie){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ie()}getClusterExpansionZoom(Z,ie){try{ie(null,this._geoJSONIndex.getClusterExpansionZoom(Z.clusterId))}catch(le){ie(le)}}getClusterChildren(Z,ie){try{ie(null,this._geoJSONIndex.getChildren(Z.clusterId))}catch(le){ie(le)}}getClusterLeaves(Z,ie){try{ie(null,this._geoJSONIndex.getLeaves(Z.clusterId,Z.limit,Z.offset))}catch(le){ie(le)}}}class $r{constructor(Z){this.self=Z,this.actor=new a.C(Z,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:I,geojson:Nt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ie,le)=>{if(this.workerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.workerSourceTypes[ie]=le},this.self.registerRTLTextPlugin=ie=>{if(a.bD.isParsed())throw new Error("RTL text plugin already registered.");a.bD.applyArabicShaping=ie.applyArabicShaping,a.bD.processBidirectionalText=ie.processBidirectionalText,a.bD.processStyledBidirectionalText=ie.processStyledBidirectionalText}}setReferrer(Z,ie){this.referrer=ie}setImages(Z,ie,le){this.availableImages[Z]=ie;for(const ve in this.workerSources[Z]){const be=this.workerSources[Z][ve];for(const ke in be)be[ke].availableImages=ie}le()}setLayers(Z,ie,le){this.getLayerIndex(Z).replace(ie),le()}updateLayers(Z,ie,le){this.getLayerIndex(Z).update(ie.layers,ie.removedIds),le()}loadTile(Z,ie,le){this.getWorkerSource(Z,ie.type,ie.source).loadTile(ie,le)}loadDEMTile(Z,ie,le){this.getDEMWorkerSource(Z,ie.source).loadTile(ie,le)}reloadTile(Z,ie,le){this.getWorkerSource(Z,ie.type,ie.source).reloadTile(ie,le)}abortTile(Z,ie,le){this.getWorkerSource(Z,ie.type,ie.source).abortTile(ie,le)}removeTile(Z,ie,le){this.getWorkerSource(Z,ie.type,ie.source).removeTile(ie,le)}removeDEMTile(Z,ie){this.getDEMWorkerSource(Z,ie.source).removeTile(ie)}removeSource(Z,ie,le){if(!this.workerSources[Z]||!this.workerSources[Z][ie.type]||!this.workerSources[Z][ie.type][ie.source])return;const ve=this.workerSources[Z][ie.type][ie.source];delete this.workerSources[Z][ie.type][ie.source],ve.removeSource!==void 0?ve.removeSource(ie,le):le()}loadWorkerSource(Z,ie,le){try{this.self.importScripts(ie.url),le()}catch(ve){le(ve.toString())}}syncRTLPluginState(Z,ie,le){try{a.bD.setState(ie);const ve=a.bD.getPluginURL();if(a.bD.isLoaded()&&!a.bD.isParsed()&&ve!=null){this.self.importScripts(ve);const be=a.bD.isParsed();le(be?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ve}`),be)}}catch(ve){le(ve.toString())}}getAvailableImages(Z){let ie=this.availableImages[Z];return ie||(ie=[]),ie}getLayerIndex(Z){let ie=this.layerIndexes[Z];return ie||(ie=this.layerIndexes[Z]=new m),ie}getWorkerSource(Z,ie,le){return this.workerSources[Z]||(this.workerSources[Z]={}),this.workerSources[Z][ie]||(this.workerSources[Z][ie]={}),this.workerSources[Z][ie][le]||(this.workerSources[Z][ie][le]=new this.workerSourceTypes[ie]({send:(ve,be,ke)=>{this.actor.send(ve,be,ke,Z)}},this.getLayerIndex(Z),this.getAvailableImages(Z))),this.workerSources[Z][ie][le]}getDEMWorkerSource(Z,ie){return this.demWorkerSources[Z]||(this.demWorkerSources[Z]={}),this.demWorkerSources[Z][ie]||(this.demWorkerSources[Z][ie]=new q),this.demWorkerSources[Z][ie]}}return a.i()&&(self.worker=new $r(self)),$r}),u(["./shared"],function(a){var m="3.6.2";class w{static testProp(i){if(!w.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in w.docStyle)return i[c];return i[0]}static create(i,c,d){const y=window.document.createElement(i);return c!==void 0&&(y.className=c),d&&d.appendChild(y),y}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(i,c){i.style[w.transformProp]=c}static addEventListener(i,c,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};i.addEventListener(c,d,"passive"in y?y:y.capture)}static removeEventListener(i,c,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};i.removeEventListener(c,d,"passive"in y?y:y.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(i,c){const d=i.getBoundingClientRect();return new a.P(c.clientX-d.left-i.clientLeft,c.clientY-d.top-i.clientTop)}static touchPos(i,c){const d=i.getBoundingClientRect(),y=[];for(let b=0;b<c.length;b++)y.push(new a.P(c[b].clientX-d.left-i.clientLeft,c[b].clientY-d.top-i.clientTop));return y}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const S={supported:!1,testSupport:function(v){!I&&Q&&(q?j(v):T=v)}};let T,Q,I=!1,q=!1;function j(v){const i=v.createTexture();v.bindTexture(v.TEXTURE_2D,i);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,Q),v.isContextLost())return;S.supported=!0}catch{}v.deleteTexture(i),I=!0}var Y,K;typeof document<"u"&&(Q=document.createElement("img"),Q.onload=function(){T&&j(T),T=null,q=!0},Q.onerror=function(){I=!0,T=null},Q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let i,c,d,y;v.resetRequestQueue=()=>{i=[],c=0,d=0,y={}},v.addThrottleControl=O=>{const H=d++;return y[H]=O,H},v.removeThrottleControl=O=>{delete y[O],L()},v.getImage=function(O,H){let $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;S.supported&&(O.headers||(O.headers={}),O.headers.accept="image/webp,*/*");const se={requestParameters:O,supportImageRefresh:$,callback:H,cancelled:!1,completed:!1,cancel:()=>{se.completed||se.cancelled||(se.cancelled=!0,se.innerRequest&&(se.innerRequest.cancel(),c--),L())}};return i.push(se),L(),se};const b=O=>{const{requestParameters:H,supportImageRefresh:$,callback:se}=O;return a.e(H,{type:"image"}),($!==!1||a.i()||a.g(H.url)||H.headers&&!Object.keys(H.headers).reduce((fe,f)=>fe&&f==="accept",!0)?a.m:k)(H,(fe,f,x,C)=>{E(O,se,fe,f,x,C)})},E=(O,H,$,se,fe,f)=>{$?H($):se instanceof HTMLImageElement||a.a(se)?H(null,se):se&&((x,C)=>{typeof createImageBitmap=="function"?a.b(x,C):a.d(x,C)})(se,(x,C)=>{x!=null?H(x):C!=null&&H(null,C,{cacheControl:fe,expires:f})}),O.cancelled||(O.completed=!0,c--,L())},L=()=>{const O=(()=>{const H=Object.keys(y);let $=!1;if(H.length>0){for(const se of H)if($=y[se](),$)break}return $})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let H=c;H<O&&i.length>0;H++){const $=i.shift();if($.cancelled){H--;continue}const se=b($);c++,$.innerRequest=se}},k=(O,H)=>{const $=new Image,se=O.url;let fe=!1;const f=O.credentials;return f&&f==="include"?$.crossOrigin="use-credentials":(f&&f==="same-origin"||!a.s(se))&&($.crossOrigin="anonymous"),$.fetchPriority="high",$.onload=()=>{H(null,$),$.onerror=$.onload=null},$.onerror=()=>{fe||H(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),$.onerror=$.onload=null},$.src=se,{cancel:()=>{fe=!0,$.src=""}}}}(Y||(Y={})),Y.resetRequestQueue(),function(v){v.Glyphs="Glyphs",v.Image="Image",v.Source="Source",v.SpriteImage="SpriteImage",v.SpriteJSON="SpriteJSON",v.Style="Style",v.Tile="Tile",v.Unknown="Unknown"}(K||(K={}));class ne{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}normalizeSpriteURL(i,c,d){const y=function(b){const E=b.match(he);if(!E)throw new Error(`Unable to parse URL "${b}"`);return{protocol:E[1],authority:E[2],path:E[3]||"/",params:E[4]?E[4].split("&"):[]}}(i);return y.path+=`${c}${d}`,function(b){const E=b.params.length?`?${b.params.join("&")}`:"";return`${b.protocol}://${b.authority}${b.path}${E}`}(y)}setTransformRequest(i){this._transformRequestFn=i}}const he=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ee(v){var i=new a.A(3);return i[0]=v[0],i[1]=v[1],i[2]=v[2],i}var De,Ne=function(v,i,c){return v[0]=i[0]-c[0],v[1]=i[1]-c[1],v[2]=i[2]-c[2],v};De=new a.A(3),a.A!=Float32Array&&(De[0]=0,De[1]=0,De[2]=0);var Qe=function(v){var i=v[0],c=v[1];return i*i+c*c};function ge(v){const i=[];if(typeof v=="string")i.push({id:"default",url:v});else if(v&&v.length>0){const c=[];for(const{id:d,url:y}of v){const b=`${d}${y}`;c.indexOf(b)===-1&&(c.push(b),i.push({id:d,url:y}))}}return i}function Ze(v,i,c,d,y){if(d)return void v(d);if(y!==Object.values(i).length||y!==Object.values(c).length)return;const b={};for(const E in i){b[E]={};const L=a.h.getImageCanvasContext(c[E]),k=i[E];for(const O in k){const{width:H,height:$,x:se,y:fe,sdf:f,pixelRatio:x,stretchX:C,stretchY:M,content:R}=k[O];b[E][O]={data:null,pixelRatio:x,sdf:f,stretchX:C,stretchY:M,content:R,spriteData:{width:H,height:$,x:se,y:fe,context:L}}}}v(null,b)}(function(){var v=new a.A(2);a.A!=Float32Array&&(v[0]=0,v[1]=0)})();class $e{constructor(i,c,d,y){this.context=i,this.format=d,this.texture=i.gl.createTexture(),this.update(c,y)}update(i,c,d){const{width:y,height:b}=i,E=!(this.size&&this.size[0]===y&&this.size[1]===b||d),{context:L}=this,{gl:k}=L;if(this.useMipmap=!!(c&&c.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),L.pixelStoreUnpackFlipY.set(!1),L.pixelStoreUnpack.set(1),L.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!c||c.premultiply!==!1)),E)this.size=[y,b],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||a.a(i)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,i):k.texImage2D(k.TEXTURE_2D,0,this.format,y,b,0,this.format,k.UNSIGNED_BYTE,i.data);else{const{x:O,y:H}=d||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||a.a(i)?k.texSubImage2D(k.TEXTURE_2D,0,O,H,k.RGBA,k.UNSIGNED_BYTE,i):k.texSubImage2D(k.TEXTURE_2D,0,O,H,y,b,k.RGBA,k.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)}bind(i,c,d){const{context:y}=this,{gl:b}=y;b.bindTexture(b.TEXTURE_2D,this.texture),d!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=b.LINEAR),i!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,i),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,d||i),this.filter=i),c!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,c),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function ce(v){const{userImage:i}=v;return!!(i&&i.render&&i.render())&&(v.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ae extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:d}of this.requestors)this._notify(c,d);this.requestors=[]}}getImage(i){const c=this.images[i];if(c&&!c.data&&c.spriteData){const d=c.spriteData;c.data=new a.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let d=!0;const y=c.data||c.spriteData;return this._validateStretch(c.stretchX,y&&y.width)||(this.fire(new a.j(new Error(`Image "${i}" has invalid "stretchX" value`))),d=!1),this._validateStretch(c.stretchY,y&&y.height)||(this.fire(new a.j(new Error(`Image "${i}" has invalid "stretchY" value`))),d=!1),this._validateContent(c.content,c)||(this.fire(new a.j(new Error(`Image "${i}" has invalid "content" value`))),d=!1),d}_validateStretch(i,c){if(!i)return!0;let d=0;for(const y of i){if(y[0]<d||y[1]<y[0]||c<y[1])return!1;d=y[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;const d=c.spriteData,y=d&&d.width||c.data.width,b=d&&d.height||c.data.height;return!(i[0]<0||y<i[0]||i[1]<0||b<i[1]||i[2]<0||y<i[2]||i[3]<0||b<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const y=this.getImage(i);if(d&&(y.data.width!==c.data.width||y.data.height!==c.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=y.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let d=!0;if(!this.isLoaded())for(const y of i)this.images[y]||(d=!1);this.isLoaded()||d?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const d={};for(const y of i){let b=this.getImage(y);b||(this.fire(new a.k("styleimagemissing",{id:y})),b=this.getImage(y)),b?d[y]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:a.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,d)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],d=this.getImage(i);if(!d)return null;if(c&&c.position.version===d.version)return c.position;if(c)c.position.version=d.version;else{const y={w:d.data.width+2,h:d.data.height+2,x:0,y:0},b=new a.I(y,d);this.patterns[i]={bin:y,position:b}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new $e(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const b in this.patterns)i.push(this.patterns[b].bin);const{w:c,h:d}=a.p(i),y=this.atlasImage;y.resize({width:c||1,height:d||1});for(const b in this.patterns){const{bin:E}=this.patterns[b],L=E.x+1,k=E.y+1,O=this.getImage(b).data,H=O.width,$=O.height;a.R.copy(O,y,{x:0,y:0},{x:L,y:k},{width:H,height:$}),a.R.copy(O,y,{x:0,y:$-1},{x:L,y:k-1},{width:H,height:1}),a.R.copy(O,y,{x:0,y:0},{x:L,y:k+$},{width:H,height:1}),a.R.copy(O,y,{x:H-1,y:0},{x:L-1,y:k},{width:1,height:$}),a.R.copy(O,y,{x:0,y:0},{x:L+H,y:k},{width:1,height:$})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const d=this.getImage(c);d||a.w(`Image with ID: "${c}" was not found`),ce(d)&&this.updateImage(c,d)}}}const xe=1e20;function _e(v,i,c,d,y,b,E,L,k){for(let O=i;O<i+d;O++)et(v,c*b+O,b,y,E,L,k);for(let O=c;O<c+y;O++)et(v,O*b+i,1,d,E,L,k)}function et(v,i,c,d,y,b,E){b[0]=0,E[0]=-xe,E[1]=xe,y[0]=v[i];for(let L=1,k=0,O=0;L<d;L++){y[L]=v[i+L*c];const H=L*L;do{const $=b[k];O=(y[L]-y[$]+H-$*$)/(L-$)/2}while(O<=E[k]&&--k>-1);k++,b[k]=L,E[k]=O,E[k+1]=xe}for(let L=0,k=0;L<d;L++){for(;E[k+1]<L;)k++;const O=b[k],H=L-O;v[i+L*c]=y[O]+H*H}}class Je{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i,c){const d=[];for(const y in i)for(const b of i[y])d.push({stack:y,id:b});a.o(d,(y,b)=>{let{stack:E,id:L}=y,k=this.entries[E];k||(k=this.entries[E]={glyphs:{},requests:{},ranges:{}});let O=k.glyphs[L];if(O!==void 0)return void b(null,{stack:E,id:L,glyph:O});if(O=this._tinySDF(k,E,L),O)return k.glyphs[L]=O,void b(null,{stack:E,id:L,glyph:O});const H=Math.floor(L/256);if(256*H>65535)return void b(new Error("glyphs > 65535 not supported"));if(k.ranges[H])return void b(null,{stack:E,id:L,glyph:O});if(!this.url)return void b(new Error("glyphsUrl is not set"));let $=k.requests[H];$||($=k.requests[H]=[],Je.loadGlyphRange(E,H,this.url,this.requestManager,(se,fe)=>{if(fe){for(const f in fe)this._doesCharSupportLocalGlyph(+f)||(k.glyphs[+f]=fe[+f]);k.ranges[H]=!0}for(const f of $)f(se,fe);delete k.requests[H]})),$.push((se,fe)=>{se?b(se):fe&&b(null,{stack:E,id:L,glyph:fe[L]||null})})},(y,b)=>{if(y)c(y);else if(b){const E={};for(const{stack:L,id:k,glyph:O}of b)(E[L]||(E[L]={}))[k]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};c(null,E)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(a.u["CJK Unified Ideographs"](i)||a.u["Hangul Syllables"](i)||a.u.Hiragana(i)||a.u.Katakana(i))}_tinySDF(i,c,d){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(d))return;let b=i.tinySDF;if(!b){let L="400";/bold/i.test(c)?L="900":/medium/i.test(c)?L="500":/light/i.test(c)&&(L="200"),b=i.tinySDF=new Je.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:L})}const E=b.draw(String.fromCharCode(d));return{id:d,bitmap:new a.q({width:E.width||60,height:E.height||60},E.data),metrics:{width:E.glyphWidth/2||24,height:E.glyphHeight/2||24,left:E.glyphLeft/2+.5||0,top:E.glyphTop/2-27.5||-8,advance:E.glyphAdvance/2||24,isDoubleResolution:!0}}}}Je.loadGlyphRange=function(v,i,c,d,y){const b=256*i,E=b+255,L=d.transformRequest(c.replace("{fontstack}",v).replace("{range}",`${b}-${E}`),K.Glyphs);a.l(L,(k,O)=>{if(k)y(k);else if(O){const H={};for(const $ of a.n(O))H[$.id]=$;y(null,H)}})},Je.TinySDF=class{constructor(){let{fontSize:v=24,buffer:i=3,radius:c=8,cutoff:d=.25,fontFamily:y="sans-serif",fontWeight:b="normal",fontStyle:E="normal"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.buffer=i,this.cutoff=d,this.radius=c;const L=this.size=v+4*i,k=this._createCanvas(L),O=this.ctx=k.getContext("2d",{willReadFrequently:!0});O.font=`${E} ${b} ${v}px ${y}`,O.textBaseline="alphabetic",O.textAlign="left",O.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Uint16Array(L)}_createCanvas(v){const i=document.createElement("canvas");return i.width=i.height=v,i}draw(v){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:d,actualBoundingBoxLeft:y,actualBoundingBoxRight:b}=this.ctx.measureText(v),E=Math.ceil(c),L=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-y))),k=Math.min(this.size-this.buffer,E+Math.ceil(d)),O=L+2*this.buffer,H=k+2*this.buffer,$=Math.max(O*H,0),se=new Uint8ClampedArray($),fe={data:se,width:O,height:H,glyphWidth:L,glyphHeight:k,glyphTop:E,glyphLeft:0,glyphAdvance:i};if(L===0||k===0)return fe;const{ctx:f,buffer:x,gridInner:C,gridOuter:M}=this;f.clearRect(x,x,L,k),f.fillText(v,x,x+E);const R=f.getImageData(x,x,L,k);M.fill(xe,0,$),C.fill(0,0,$);for(let N=0;N<k;N++)for(let z=0;z<L;z++){const G=R.data[4*(N*L+z)+3]/255;if(G===0)continue;const X=(N+x)*O+z+x;if(G===1)M[X]=0,C[X]=xe;else{const re=.5-G;M[X]=re>0?re*re:0,C[X]=re<0?re*re:0}}_e(M,0,0,O,H,O,this.f,this.v,this.z),_e(C,x,x,L,k,O,this.f,this.v,this.z);for(let N=0;N<$;N++){const z=Math.sqrt(M[N])-Math.sqrt(C[N]);se[N]=Math.round(255-255*(z/this.radius+this.cutoff))}return fe}};class rt{constructor(){this.specification=a.v.light.position}possiblyEvaluate(i,c){return a.z(i.expression.evaluate(c))}interpolate(i,c,d){return{x:a.B.number(i.x,c.x,d),y:a.B.number(i.y,c.y,d),z:a.B.number(i.z,c.z,d)}}}let Ye;class it extends a.E{constructor(i){super(),Ye=Ye||new a.r({anchor:new a.D(a.v.light.anchor),position:new rt,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(Ye),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this._validate(a.t,i,c))for(const d in i){const y=i[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),y):this._transitionable.setValue(d,y)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,d){return(!d||d.validate!==!1)&&a.x(this,i.call(a.y,a.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}}class nt{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const d=i.join(",")+String(c);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(i,c)),this.dashEntry[d]}getDashRanges(i,c,d){const y=[];let b=i.length%2==1?-i[i.length-1]*d:0,E=i[0]*d,L=!0;y.push({left:b,right:E,isDash:L,zeroLength:i[0]===0});let k=i[0];for(let O=1;O<i.length;O++){L=!L;const H=i[O];b=k*d,k+=H,E=k*d,y.push({left:b,right:E,isDash:L,zeroLength:H===0})}return y}addRoundDash(i,c,d){const y=c/2;for(let b=-d;b<=d;b++){const E=this.width*(this.nextRow+d+b);let L=0,k=i[L];for(let O=0;O<this.width;O++){O/k.right>1&&(k=i[++L]);const H=Math.abs(O-k.left),$=Math.abs(O-k.right),se=Math.min(H,$);let fe;const f=b/d*(y+1);if(k.isDash){const x=y-Math.abs(f);fe=Math.sqrt(se*se+x*x)}else fe=y-Math.sqrt(se*se+f*f);this.data[E+O]=Math.max(0,Math.min(255,fe+128))}}}addRegularDash(i){for(let L=i.length-1;L>=0;--L){const k=i[L],O=i[L+1];k.zeroLength?i.splice(L,1):O&&O.isDash===k.isDash&&(O.left=k.left,i.splice(L,1))}const c=i[0],d=i[i.length-1];c.isDash===d.isDash&&(c.left=d.left-this.width,d.right=c.right+this.width);const y=this.width*this.nextRow;let b=0,E=i[b];for(let L=0;L<this.width;L++){L/E.right>1&&(E=i[++b]);const k=Math.abs(L-E.left),O=Math.abs(L-E.right),H=Math.min(k,O);this.data[y+L]=Math.max(0,Math.min(255,(E.isDash?H:-H)+128))}}addDash(i,c){const d=c?7:0,y=2*d+1;if(this.nextRow+y>this.height)return a.w("LineAtlas out of space"),null;let b=0;for(let L=0;L<i.length;L++)b+=i[L];if(b!==0){const L=this.width/b,k=this.getDashRanges(i,this.width,L);c?this.addRoundDash(k,L,d):this.addRegularDash(k)}const E={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:b};return this.nextRow+=y,this.dirty=!0,E}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class Bt{constructor(i,c,d){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=d;const y=this.workerPool.acquire(d);for(let b=0;b<y.length;b++){const E=new a.C(y[b],c,d);E.name=`Worker ${b}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c,d){a.o(this.actors,(y,b)=>{y.send(i,c,b)},d=d||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.actors.forEach(c=>{c.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function ee(v,i,c){const d=function(y,b){if(y)return c(y);if(b){const E=a.F(a.e(b,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(E.vectorLayers=b.vector_layers,E.vectorLayerIds=E.vectorLayers.map(L=>L.id)),c(null,E)}};return v.url?a.f(i.transformRequest(v.url,K.Source),d):a.h.frame(()=>d(null,v))}class pe{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof a.L?new a.L(i.lng,i.lat):a.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof a.L?new a.L(i.lng,i.lat):a.L.convert(i),this}extend(i){const c=this._sw,d=this._ne;let y,b;if(i instanceof a.L)y=i,b=i;else{if(!(i instanceof pe))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(pe.convert(i)):this.extend(a.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(a.L.convert(i)):this;if(y=i._sw,b=i._ne,!y||!b)return this}return c||d?(c.lng=Math.min(y.lng,c.lng),c.lat=Math.min(y.lat,c.lat),d.lng=Math.max(b.lng,d.lng),d.lat=Math.max(b.lat,d.lat)):(this._sw=new a.L(y.lng,y.lat),this._ne=new a.L(b.lng,b.lat)),this}getCenter(){return new a.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.L(this.getWest(),this.getNorth())}getSouthEast(){return new a.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:c,lat:d}=a.L.convert(i);let y=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&y}static convert(i){return i instanceof pe?i:i&&new pe(i)}static fromLngLat(i){const d=360*(arguments.length>1&&arguments[1]!==void 0?arguments[1]:0)/40075017,y=d/Math.cos(Math.PI/180*i.lat);return new pe(new a.L(i.lng-y,i.lat-d),new a.L(i.lng+y,i.lat+d))}}class ye{constructor(i,c,d){this.bounds=pe.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=d||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),d=Math.floor(a.G(this.bounds.getWest())*c),y=Math.floor(a.H(this.bounds.getNorth())*c),b=Math.ceil(a.G(this.bounds.getEast())*c),E=Math.ceil(a.H(this.bounds.getSouth())*c);return i.x>=d&&i.x<b&&i.y>=y&&i.y<E}}class Re extends a.E{constructor(i,c,d,y){if(super(),this.load=()=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ee(this._options,this.map._requestManager,(b,E)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),b?this.fire(new a.j(b)):E&&(a.e(this,E),E.bounds&&(this.tileBounds=new ye(E.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>a.e({},this._options),this.id=i,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.F(c,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,c){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(d,K.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(E,L){return delete i.request,i.aborted?c(null):E&&E.status!==404?c(E):(L&&L.resourceTiming&&(i.resourceTiming=L.resourceTiming),this.map._refreshExpiredTiles&&L&&i.setExpiryData(L),i.loadVectorData(L,this.map.painter),c(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}y.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=c:i.request=i.actor.send("reloadTile",y,b.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",y,b.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ge extends a.E{constructor(i,c,d,y){super(),this.id=i,this.dispatcher=d,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},c),a.e(this,a.F(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ee(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new a.j(i)):c&&(a.e(this,c),c.bounds&&(this.tileBounds=new ye(c.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return a.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=Y.getImage(this.map._requestManager.transformRequest(d,K.Tile),(y,b,E)=>{if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(y)i.state="errored",c(y);else if(b){this.map._refreshExpiredTiles&&E&&i.setExpiryData(E);const L=this.map.painter.context,k=L.gl;i.texture=this.map.painter.getTileTexture(b.width),i.texture?i.texture.update(b,{useMipmap:!0}):(i.texture=new $e(L,b,k.RGBA,{useMipmap:!0}),i.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),L.extTextureFilterAnisotropic&&k.texParameterf(k.TEXTURE_2D,L.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,L.extTextureFilterAnisotropicMax)),i.state="loaded",c(null)}},this.map._refreshExpiredTiles)}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}class tt extends Ge{constructor(i,c,d,y){super(i,c,d,y),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(i,c){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(d,K.Tile);function b(E,L){E&&(i.state="errored",c(E)),L&&(i.dem=L,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",c(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=Y.getImage(y,(E,L,k)=>a._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(E)i.state="errored",c(E);else if(L){this.map._refreshExpiredTiles&&i.setExpiryData(k);const O=a.a(L)&&a.J()?L:yield function($){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.K()){const se=$.width+2,fe=$.height+2;try{return new a.R({width:se,height:fe},yield a.M($,-1,-1,se,fe))}catch{}}return a.h.getImageData($,1)})}(L),H={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:O,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",H,b))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const c=i.canonical,d=Math.pow(2,c.z),y=(c.x-1+d)%d,b=c.x===0?i.wrap-1:i.wrap,E=(c.x+1+d)%d,L=c.x+1===d?i.wrap+1:i.wrap,k={};return k[new a.O(i.overscaledZ,b,c.z,y,c.y).key]={backfilled:!1},k[new a.O(i.overscaledZ,L,c.z,E,c.y).key]={backfilled:!1},c.y>0&&(k[new a.O(i.overscaledZ,b,c.z,y,c.y-1).key]={backfilled:!1},k[new a.O(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},k[new a.O(i.overscaledZ,L,c.z,E,c.y-1).key]={backfilled:!1}),c.y+1<d&&(k[new a.O(i.overscaledZ,b,c.z,y,c.y+1).key]={backfilled:!1},k[new a.O(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},k[new a.O(i.overscaledZ,L,c.z,E,c.y+1).key]={backfilled:!1}),k}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class st extends a.E{constructor(i,c,d,y){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>a.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(y),this._data=c.data,this._options=a.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const b=a.N/this.tileSize;this.workerOptions=a.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*b,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*b,extent:a.N,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:a.N,radius:(c.clusterRadius||50)*b,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},c),this}getClusterChildren(i,c){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},c),this}getClusterLeaves(i,c,d,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:c,offset:d},y),this}_updateWorkerData(i){const c=a.e({},this.workerOptions);i?c.dataDiff=i:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(a.h.resolveURL(this._data),K.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(d,y)=>{if(this._pendingLoads--,this._removed||y&&y.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let b=null;if(y&&y.resourceTiming&&y.resourceTiming[this.id]&&(b=y.resourceTiming[this.id].slice(0)),d)return void this.fire(new a.j(d));const E={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&a.e(E,{resourceTiming:b}),this.fire(new a.k("data",Object.assign(Object.assign({},E),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},E),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,c){const d=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const y={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(d,y,(b,E)=>(delete i.request,i.unloadVectorData(),i.aborted?c(null):b?c(b):(i.loadVectorData(E,this.map.painter,d==="reloadTile"),c(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var ot=a.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ct extends a.E{constructor(i,c,d,y){super(),this.load=(b,E)=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=Y.getImage(this.map._requestManager.transformRequest(this.url,K.Image),(L,k)=>{this._request=null,this._loaded=!0,L?this.fire(new a.j(L)):k&&(this.image=k,b&&(this.coordinates=b),E&&E(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const b=this.map.painter.context,E=b.gl;this.boundsBuffer||(this.boundsBuffer=b.createVertexBuffer(this._boundsArray,ot.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new $e(b,this.image,E.RGBA),this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE));let L=!1;for(const k in this.tiles){const O=this.tiles[k];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture,L=!0)}L&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=d,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=c}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const c=i.map(a.U.fromLngLat);this.tileID=function(y){let b=1/0,E=1/0,L=-1/0,k=-1/0;for(const se of y)b=Math.min(b,se.x),E=Math.min(E,se.y),L=Math.max(L,se.x),k=Math.max(k,se.y);const O=Math.max(L-b,k-E),H=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),$=Math.pow(2,H);return new a.W(H,Math.floor((b+L)/2*$),Math.floor((E+k)/2*$))}(c),this.minzoom=this.maxzoom=this.tileID.z;const d=c.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new a.V,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,a.N,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,a.N),this._boundsArray.emplaceBack(d[2].x,d[2].y,a.N,a.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}hasTransition(){return!1}}class Ft extends Ct{constructor(i,c,d,y){super(i,c,d,y),this.load=()=>{this._loaded=!1;const b=this.options;this.urls=[];for(const E of b.urls)this.urls.push(this.map._requestManager.transformRequest(E,K.Source).url);a.X(this.urls,(E,L)=>{this._loaded=!0,E?this.fire(new a.j(E)):L&&(this.video=L,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const b=this.map.painter.context,E=b.gl;this.boundsBuffer||(this.boundsBuffer=b.createVertexBuffer(this._boundsArray,ot.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE),E.texSubImage2D(E.TEXTURE_2D,0,0,0,E.RGBA,E.UNSIGNED_BYTE,this.video)):(this.texture=new $e(b,this.video,E.RGBA),this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE));let L=!1;for(const k in this.tiles){const O=this.tiles[k];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture,L=!0)}L&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=c}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new a.j(new a.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class zt extends Ct{constructor(i,c,d,y){super(i,c,d,y),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let b=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,b=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,b=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const E=this.map.painter.context,L=E.gl;this.boundsBuffer||(this.boundsBuffer=E.createVertexBuffer(this._boundsArray,ot.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?(b||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new $e(E,this.canvas,L.RGBA,{premultiply:!0});let k=!1;for(const O in this.tiles){const H=this.tiles[O];H.state!=="loaded"&&(H.state="loaded",H.texture=this.texture,k=!0)}k&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(E=>typeof E!="number"))||this.fire(new a.j(new a.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.Y(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new a.j(new a.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Vt={},Jt=v=>{switch(v){case"geojson":return st;case"image":return Ct;case"raster":return Ge;case"raster-dem":return tt;case"vector":return Re;case"video":return Ft;case"canvas":return zt}return Vt[v]};function ft(v,i){const c=a.Z();return a.$(c,c,[1,1,0]),a.a0(c,c,[.5*v.width,.5*v.height,1]),a.a1(c,c,v.calculatePosMatrix(i.toUnwrapped()))}function Ue(v,i,c,d,y,b){const E=function($,se,fe){if($)for(const f of $){const x=se[f];if(x&&x.source===fe&&x.type==="fill-extrusion")return!0}else for(const f in se){const x=se[f];if(x.source===fe&&x.type==="fill-extrusion")return!0}return!1}(y&&y.layers,i,v.id),L=b.maxPitchScaleFactor(),k=v.tilesIn(d,L,E);k.sort(fr);const O=[];for(const $ of k)O.push({wrappedTileID:$.tileID.wrapped().key,queryResults:$.tile.queryRenderedFeatures(i,c,v._state,$.queryGeometry,$.cameraQueryGeometry,$.scale,y,b,L,ft(v.transform,$.tileID))});const H=function($){const se={},fe={};for(const f of $){const x=f.queryResults,C=f.wrappedTileID,M=fe[C]=fe[C]||{};for(const R in x){const N=x[R],z=M[R]=M[R]||{},G=se[R]=se[R]||[];for(const X of N)z[X.featureIndex]||(z[X.featureIndex]=!0,G.push(X))}}return se}(O);for(const $ in H)H[$].forEach(se=>{const fe=se.feature,f=v.getFeatureState(fe.layer["source-layer"],fe.id);fe.source=fe.layer.source,fe.layer["source-layer"]&&(fe.sourceLayer=fe.layer["source-layer"]),fe.state=f});return H}function fr(v,i){const c=v.tileID,d=i.tileID;return c.overscaledZ-d.overscaledZ||c.canonical.y-d.canonical.y||c.wrap-d.wrap||c.canonical.x-d.canonical.x}class Zt{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=a.a2(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(y,b){const E={};if(!b)return E;for(const L of y){const k=L.layerIds.map(O=>b.getLayer(O)).filter(Boolean);if(k.length!==0){L.layers=k,L.stateDependentLayerIds&&(L.stateDependentLayers=L.stateDependentLayerIds.map(O=>k.filter(H=>H.id===O)[0]));for(const O of k)E[O.id]=L}}return E}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const b=this.buckets[y];if(b instanceof a.a4){if(this.hasSymbolBuckets=!0,!d)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const b=this.buckets[y];if(b instanceof a.a4&&b.hasRTLText){this.hasRTLText=!0,a.a5();break}}this.queryPadding=0;for(const y in this.buckets){const b=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(y).queryRadius(b))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new a.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const d in this.buckets){const y=this.buckets[d];y.uploadPending()&&y.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new $e(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new $e(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,d,y,b,E,L,k,O,H){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:b,scale:E,tileSize:this.tileSize,pixelPosMatrix:H,transform:k,params:L,queryPadding:this.queryPadding*O},i,c,d):{}}querySourceFeatures(i,c){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const y=d.loadVTLayers(),b=c&&c.sourceLayer?c.sourceLayer:"",E=y._geojsonTileLayer||y[b];if(!E)return;const L=a.a6(c&&c.filter),{z:k,x:O,y:H}=this.tileID.canonical,$={z:k,x:O,y:H};for(let se=0;se<E.length;se++){const fe=E.feature(se);if(L.needGeometry){const C=a.a7(fe,!0);if(!L.filter(new a.a8(this.tileID.overscaledZ),C,this.tileID.canonical))continue}else if(!L.filter(new a.a8(this.tileID.overscaledZ),fe))continue;const f=d.getId(fe,b),x=new a.a9(fe,k,O,H,f);x.tile=$,i.push(x)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const d=a.aa(i.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const d=Date.now();let y=!1;if(this.expirationTime>d)y=!1;else if(c)if(this.expirationTime<c)y=!0;else{const b=this.expirationTime-c;b?this.expirationTime=d+Math.max(b,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!c.style.hasLayer(y))continue;const b=this.buckets[y],E=b.layers[0].sourceLayer||"_geojsonTileLayer",L=d[E],k=i[E];if(!L||!k||Object.keys(k).length===0)continue;b.update(k,L,this.imageAtlas&&this.imageAtlas.patternPositions||{});const O=c&&c.style&&c.style.getLayer(y);O&&(this.queryPadding=Math.max(this.queryPadding,O.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=a.h.now()+i}setDependencies(i,c){const d={};for(const y of c)d[y]=!0;this.dependencies[i]=d}hasDependency(i,c){for(const d of i){const y=this.dependencies[d];if(y){for(const b of c)if(y[b])return!0}}return!1}}class bt{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,d){const y=i.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const b={value:c,timeout:void 0};if(d!==void 0&&(b.timeout=setTimeout(()=>{this.remove(i,b)},d)),this.data[y].push(b),this.order.push(y),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const d=i.wrapped().key,y=c===void 0?0:this.data[d].indexOf(c),b=this.data[d][y];return this.data[d].splice(y,1),b.timeout&&clearTimeout(b.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(b.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const d in this.data)for(const y of this.data[d])i(y.value)||c.push(y);for(const d of c)this.remove(d.value.tileID,d)}}class ze{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,d){const y=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][y]=this.stateChanges[i][y]||{},a.e(this.stateChanges[i][y],d),this.deletedStates[i]===null){this.deletedStates[i]={};for(const b in this.state[i])b!==y&&(this.deletedStates[i][b]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][y]===null){this.deletedStates[i][y]={};for(const b in this.state[i][y])d[b]||(this.deletedStates[i][y][b]=null)}else for(const b in d)this.deletedStates[i]&&this.deletedStates[i][y]&&this.deletedStates[i][y][b]===null&&delete this.deletedStates[i][y][b]}removeFeatureState(i,c,d){if(this.deletedStates[i]===null)return;const y=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},d&&c!==void 0)this.deletedStates[i][y]!==null&&(this.deletedStates[i][y]=this.deletedStates[i][y]||{},this.deletedStates[i][y][d]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][y])for(d in this.deletedStates[i][y]={},this.stateChanges[i][y])this.deletedStates[i][y][d]=null;else this.deletedStates[i][y]=null;else this.deletedStates[i]=null}getState(i,c){const d=String(c),y=a.e({},(this.state[i]||{})[d],(this.stateChanges[i]||{})[d]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const b=this.deletedStates[i][c];if(b===null)return{};for(const E in b)delete y[E]}return y}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const d={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const b={};for(const E in this.stateChanges[y])this.state[y][E]||(this.state[y][E]={}),a.e(this.state[y][E],this.stateChanges[y][E]),b[E]=this.state[y][E];d[y]=b}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const b={};if(this.deletedStates[y]===null)for(const E in this.state[y])b[E]={},this.state[y][E]={};else for(const E in this.deletedStates[y]){if(this.deletedStates[y][E]===null)this.state[y][E]={};else for(const L of Object.keys(this.deletedStates[y][E]))delete this.state[y][E][L];b[E]=this.state[y][E]}d[y]=d[y]||{},a.e(d[y],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const y in i)i[y].setFeatureState(d,c)}}class Ut extends a.E{constructor(i,c,d){super(),this.id=i,this.dispatcher=d,this.on("data",y=>{y.dataType==="source"&&y.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&y.dataType==="source"&&y.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,b,E,L)=>{const k=new(Jt(b.type))(y,b,E,L);if(k.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${k.id}`);return k})(i,c,d,this),this._tiles={},this._cache=new bt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ze,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c){return this._source.loadTile(i,c)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new a.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const d=this._tiles[c];d.upload(i),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Pt).map(i=>i.key)}getRenderableIds(i){const c=[];for(const d in this._tiles)this._isIdRenderable(d,i)&&c.push(this._tiles[d]);return i?c.sort((d,y)=>{const b=d.tileID,E=y.tileID,L=new a.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),k=new a.P(E.canonical.x,E.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-E.overscaledZ||k.y-L.y||k.x-L.x}).map(d=>d.tileID.key):c.map(d=>d.tileID).sort(Pt).map(d=>d.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){const d=this._tiles[i];d&&(d.state!=="loading"&&(d.state=c),this._loadTile(d,this._tileLoaded.bind(this,d,i,c)))}_tileLoaded(i,c,d,y){if(y)return i.state="errored",void(y.status!==404?this._source.fire(new a.j(y,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=a.h.now(),d==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let y=0;y<c.length;y++){const b=c[y];if(i.neighboringTiles&&i.neighboringTiles[b]){const E=this.getTileByID(b);d(i,E),d(E,i)}}function d(y,b){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let E=b.tileID.canonical.x-y.tileID.canonical.x;const L=b.tileID.canonical.y-y.tileID.canonical.y,k=Math.pow(2,y.tileID.canonical.z),O=b.tileID.key;E===0&&L===0||Math.abs(L)>1||(Math.abs(E)>1&&(Math.abs(E+k)===1?E+=k:Math.abs(E-k)===1&&(E-=k)),b.dem&&y.dem&&(y.dem.backfillBorder(b.dem,E,L),y.neighboringTiles&&y.neighboringTiles[O]&&(y.neighboringTiles[O].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,d,y){for(const b in this._tiles){let E=this._tiles[b];if(y[b]||!E.hasData()||E.tileID.overscaledZ<=c||E.tileID.overscaledZ>d)continue;let L=E.tileID;for(;E&&E.tileID.overscaledZ>c+1;){const O=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[O.key],E&&E.hasData()&&(L=O)}let k=L;for(;k.overscaledZ>c;)if(k=k.scaledTo(k.overscaledZ-1),i[k.key]){y[L.key]=L;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const d=this._loadedParentTiles[i.key];return d&&d.tileID.overscaledZ>=c?d:null}for(let d=i.overscaledZ-1;d>=c;d--){const y=i.scaledTo(d),b=this._getLoadedTile(y);if(b)return b}}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,d=Math.ceil(i.height/this._source.tileSize)+1,y=Math.floor(c*d*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(b)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const d={};for(const y in this._tiles){const b=this._tiles[y];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+c),d[b.tileID.key]=b}this._tiles=d;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}update(i,c){if(this.transform=i,this.terrain=c,!this._sourceLoaded||this._paused)return;let d;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(H=>new a.O(H.canonical.z,H.wrap,H.canonical.z,H.canonical.x,H.canonical.y)):(d=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(d=d.filter(H=>this._source.hasTile(H)))):d=[];const y=i.coveringZoomLevel(this._source),b=Math.max(y-Ut.maxOverzooming,this._source.minzoom),E=Math.max(y+Ut.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const H={};for(const $ of d)if($.canonical.z>this._source.minzoom){const se=$.scaledTo($.canonical.z-1);H[se.key]=se;const fe=$.scaledTo(Math.max(this._source.minzoom,Math.min($.canonical.z,5)));H[fe.key]=fe}d=d.concat(Object.values(H))}const L=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,L&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const k=this._updateRetainedTiles(d,y);if(Qt(this._source.type)){const H={},$={},se=Object.keys(k),fe=a.h.now();for(const f of se){const x=k[f],C=this._tiles[f];if(!C||C.fadeEndTime!==0&&C.fadeEndTime<=fe)continue;const M=this.findLoadedParent(x,b);M&&(this._addTile(M.tileID),H[M.tileID.key]=M.tileID),$[f]=x}this._retainLoadedChildren($,y,E,k);for(const f in H)k[f]||(this._coveredTiles[f]=!0,k[f]=H[f]);if(c){const f={},x={};for(const C of d)this._tiles[C.key].hasData()?f[C.key]=C:x[C.key]=C;for(const C in x){const M=x[C].children(this._source.maxzoom);this._tiles[M[0].key]&&this._tiles[M[1].key]&&this._tiles[M[2].key]&&this._tiles[M[3].key]&&(f[M[0].key]=k[M[0].key]=M[0],f[M[1].key]=k[M[1].key]=M[1],f[M[2].key]=k[M[2].key]=M[2],f[M[3].key]=k[M[3].key]=M[3],delete x[C])}for(const C in x){const M=this.findLoadedParent(x[C],this._source.minzoom);if(M){f[M.tileID.key]=k[M.tileID.key]=M.tileID;for(const R in f)f[R].isChildOf(M.tileID)&&delete f[R]}}for(const C in this._tiles)f[C]||(this._coveredTiles[C]=!0)}}for(const H in k)this._tiles[H].clearFadeHold();const O=a.ab(this._tiles,k);for(const H of O){const $=this._tiles[H];$.hasSymbolBuckets&&!$.holdingForFade()?$.setHoldDuration(this.map._fadeDuration):$.hasSymbolBuckets&&!$.symbolFadeFinished()||this._removeTile(H)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){const d={},y={},b=Math.max(c-Ut.maxOverzooming,this._source.minzoom),E=Math.max(c+Ut.maxUnderzooming,this._source.minzoom),L={};for(const k of i){const O=this._addTile(k);d[k.key]=k,O.hasData()||c<this._source.maxzoom&&(L[k.key]=k)}this._retainLoadedChildren(L,c,E,d);for(const k of i){let O=this._tiles[k.key];if(O.hasData())continue;if(c+1>this._source.maxzoom){const $=k.children(this._source.maxzoom)[0],se=this.getTile($);if(se&&se.hasData()){d[$.key]=$;continue}}else{const $=k.children(this._source.maxzoom);if(d[$[0].key]&&d[$[1].key]&&d[$[2].key]&&d[$[3].key])continue}let H=O.wasRequested();for(let $=k.overscaledZ-1;$>=b;--$){const se=k.scaledTo($);if(y[se.key])break;if(y[se.key]=!0,O=this.getTile(se),!O&&H&&(O=this._addTile(se)),O){const fe=O.hasData();if((H||fe)&&(d[se.key]=se),H=O.wasRequested(),fe)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let d,y=this._tiles[i].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){d=this._loadedParentTiles[y.key];break}c.push(y.key);const b=y.scaledTo(y.overscaledZ-1);if(d=this._getLoadedTile(b),d)break;y=b}for(const b of c)this._loadedParentTiles[b]=d}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const d=c;return c||(c=new Zt(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,i.key,c.state))),c.uses++,this._tiles[i.key]=c,d||this._source.fire(new a.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const d=c.getExpiryTimeout();d&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},d))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,d){const y=[],b=this.transform;if(!b)return y;const E=d?b.getCameraQueryGeometry(i):i,L=i.map(f=>b.pointCoordinate(f,this.terrain)),k=E.map(f=>b.pointCoordinate(f,this.terrain)),O=this.getIds();let H=1/0,$=1/0,se=-1/0,fe=-1/0;for(const f of k)H=Math.min(H,f.x),$=Math.min($,f.y),se=Math.max(se,f.x),fe=Math.max(fe,f.y);for(let f=0;f<O.length;f++){const x=this._tiles[O[f]];if(x.holdingForFade())continue;const C=x.tileID,M=Math.pow(2,b.zoom-x.tileID.overscaledZ),R=c*x.queryPadding*a.N/x.tileSize/M,N=[C.getTilePoint(new a.U(H,$)),C.getTilePoint(new a.U(se,fe))];if(N[0].x-R<a.N&&N[0].y-R<a.N&&N[1].x+R>=0&&N[1].y+R>=0){const z=L.map(X=>C.getTilePoint(X)),G=k.map(X=>C.getTilePoint(X));y.push({tile:x,tileID:C,queryGeometry:z,cameraQueryGeometry:G,scale:M})}}return y}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(d=>this._tiles[d].tileID);for(const d of c)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Qt(this._source.type)){const i=a.h.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=i)return!0}return!1}setFeatureState(i,c,d){this._state.updateState(i=i||"_geojsonTileLayer",c,d)}removeFeatureState(i,c,d){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,d)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,d){const y=this._tiles[i];y&&y.setDependencies(c,d)}reloadTilesForDependencies(i,c){for(const d in this._tiles)this._tiles[d].hasDependency(i,c)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(i,c))}}function Pt(v,i){const c=Math.abs(2*v.wrap)-+(v.wrap<0),d=Math.abs(2*i.wrap)-+(i.wrap<0);return v.overscaledZ-i.overscaledZ||d-c||i.canonical.y-v.canonical.y||i.canonical.x-v.canonical.x}function Qt(v){return v==="raster"||v==="image"||v==="video"}Ut.maxOverzooming=10,Ut.maxUnderzooming=3;const Lt="mapboxgl_preloaded_worker_pool";class hr{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<hr.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Lt]}numActive(){return Object.keys(this.active).length}}const wr=Math.floor(a.h.hardwareConcurrency/2);let Lr;function qr(){return Lr||(Lr=new hr),Lr}hr.workerCount=a.ac(globalThis)?Math.max(Math.min(wr,3),1):1;class gr{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=a.ad(i,0,1);let c=1,d=this._distances[c];const y=i*this.paddedLength+this.padding;for(;d<y&&c<this._distances.length;)d=this._distances[++c];const b=c-1,E=this._distances[b],L=d-E,k=L>0?(y-E)/L:0;return this.points[b].mult(1-k).add(this.points[c].mult(k))}}function br(v,i){let c=!0;return v==="always"||v!=="never"&&i!=="never"||(c=!1),c}class Rt{constructor(i,c,d){const y=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(i/d),this.yCellCount=Math.ceil(c/d);for(let E=0;E<this.xCellCount*this.yCellCount;E++)y.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,d,y,b){this._forEachCell(c,d,y,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(b)}insertCircle(i,c,d,y){this._forEachCell(c-y,d-y,c+y,d+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(d),this.circles.push(y)}_insertBoxCell(i,c,d,y,b,E){this.boxCells[b].push(E)}_insertCircleCell(i,c,d,y,b,E){this.circleCells[b].push(E)}_query(i,c,d,y,b,E,L){if(d<0||i>this.width||y<0||c>this.height)return[];const k=[];if(i<=0&&c<=0&&this.width<=d&&this.height<=y){if(b)return[{key:null,x1:i,y1:c,x2:d,y2:y}];for(let O=0;O<this.boxKeys.length;O++)k.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){const H=this.circles[3*O],$=this.circles[3*O+1],se=this.circles[3*O+2];k.push({key:this.circleKeys[O],x1:H-se,y1:$-se,x2:H+se,y2:$+se})}}else this._forEachCell(i,c,d,y,this._queryCell,k,{hitTest:b,overlapMode:E,seenUids:{box:{},circle:{}}},L);return k}query(i,c,d,y){return this._query(i,c,d,y,!1,null)}hitTest(i,c,d,y,b,E){return this._query(i,c,d,y,!0,b,E).length>0}hitTestCircle(i,c,d,y,b){const E=i-d,L=i+d,k=c-d,O=c+d;if(L<0||E>this.width||O<0||k>this.height)return!1;const H=[];return this._forEachCell(E,k,L,O,this._queryCellCircle,H,{hitTest:!0,overlapMode:y,circle:{x:i,y:c,radius:d},seenUids:{box:{},circle:{}}},b),H.length>0}_queryCell(i,c,d,y,b,E,L,k){const{seenUids:O,hitTest:H,overlapMode:$}=L,se=this.boxCells[b];if(se!==null){const f=this.bboxes;for(const x of se)if(!O.box[x]){O.box[x]=!0;const C=4*x,M=this.boxKeys[x];if(i<=f[C+2]&&c<=f[C+3]&&d>=f[C+0]&&y>=f[C+1]&&(!k||k(M))&&(!H||!br($,M.overlapMode))&&(E.push({key:M,x1:f[C],y1:f[C+1],x2:f[C+2],y2:f[C+3]}),H))return!0}}const fe=this.circleCells[b];if(fe!==null){const f=this.circles;for(const x of fe)if(!O.circle[x]){O.circle[x]=!0;const C=3*x,M=this.circleKeys[x];if(this._circleAndRectCollide(f[C],f[C+1],f[C+2],i,c,d,y)&&(!k||k(M))&&(!H||!br($,M.overlapMode))){const R=f[C],N=f[C+1],z=f[C+2];if(E.push({key:M,x1:R-z,y1:N-z,x2:R+z,y2:N+z}),H)return!0}}}return!1}_queryCellCircle(i,c,d,y,b,E,L,k){const{circle:O,seenUids:H,overlapMode:$}=L,se=this.boxCells[b];if(se!==null){const f=this.bboxes;for(const x of se)if(!H.box[x]){H.box[x]=!0;const C=4*x,M=this.boxKeys[x];if(this._circleAndRectCollide(O.x,O.y,O.radius,f[C+0],f[C+1],f[C+2],f[C+3])&&(!k||k(M))&&!br($,M.overlapMode))return E.push(!0),!0}}const fe=this.circleCells[b];if(fe!==null){const f=this.circles;for(const x of fe)if(!H.circle[x]){H.circle[x]=!0;const C=3*x,M=this.circleKeys[x];if(this._circlesCollide(f[C],f[C+1],f[C+2],O.x,O.y,O.radius)&&(!k||k(M))&&!br($,M.overlapMode))return E.push(!0),!0}}}_forEachCell(i,c,d,y,b,E,L,k){const O=this._convertToXCellCoord(i),H=this._convertToYCellCoord(c),$=this._convertToXCellCoord(d),se=this._convertToYCellCoord(y);for(let fe=O;fe<=$;fe++)for(let f=H;f<=se;f++)if(b.call(this,i,c,d,y,this.xCellCount*f+fe,E,L,k))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,d,y,b,E){const L=y-i,k=b-c,O=d+E;return O*O>L*L+k*k}_circleAndRectCollide(i,c,d,y,b,E,L){const k=(E-y)/2,O=Math.abs(i-(y+k));if(O>k+d)return!1;const H=(L-b)/2,$=Math.abs(c-(b+H));if($>H+d)return!1;if(O<=k||$<=H)return!0;const se=O-k,fe=$-H;return se*se+fe*fe<=d*d}}function vt(v,i,c,d,y){const b=a.Z();return i?(a.a0(b,b,[1/y,1/y,1]),c||a.ae(b,b,d.angle)):a.a1(b,d.labelPlaneMatrix,v),b}function Cr(v,i,c,d,y){if(i){const b=a.af(v);return a.a0(b,b,[y,y,1]),c||a.ae(b,b,-d.angle),b}return d.glCoordMatrix}function Tr(v,i,c){let d;c?(d=[v.x,v.y,c(v.x,v.y),1],a.ag(d,d,i)):(d=[v.x,v.y,0,1],ve(d,d,i));const y=d[3];return{point:new a.P(d[0]/y,d[1]/y),signedDistanceFromCamera:y}}function Dr(v,i){return .5+v/i*.5}function Vr(v,i){const c=v[0]/v[3],d=v[1]/v[3];return c>=-i[0]&&c<=i[0]&&d>=-i[1]&&d<=i[1]}function xt(v,i,c,d,y,b,E,L,k,O){const H=d?v.textSizeData:v.iconSizeData,$=a.ah(H,c.transform.zoom),se=[256/c.width*2+1,256/c.height*2+1],fe=d?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;fe.clear();const f=v.lineVertexArray,x=d?v.text.placedSymbolArray:v.icon.placedSymbolArray,C=c.transform.width/c.transform.height;let M=!1;for(let R=0;R<x.length;R++){const N=x.get(R);if(N.hidden||N.writingMode===a.ai.vertical&&!M){le(N.numGlyphs,fe);continue}let z;if(M=!1,O?(z=[N.anchorX,N.anchorY,O(N.anchorX,N.anchorY),1],a.ag(z,z,i)):(z=[N.anchorX,N.anchorY,0,1],ve(z,z,i)),!Vr(z,se)){le(N.numGlyphs,fe);continue}const G=Dr(c.transform.cameraToCenterDistance,z[3]),X=a.aj(H,$,N),re=E?X/G:X*G,de=new a.P(N.anchorX,N.anchorY),we=Tr(de,y,O).point,Ie={projections:{},offsets:{}},Pe=Or(N,re,!1,L,i,y,b,v.glyphOffsetArray,f,fe,we,de,Ie,C,k,O);M=Pe.useVertical,(Pe.notEnoughRoom||M||Pe.needsFlipping&&Or(N,re,!0,L,i,y,b,v.glyphOffsetArray,f,fe,we,de,Ie,C,k,O).notEnoughRoom)&&le(N.numGlyphs,fe)}d?v.text.dynamicLayoutVertexBuffer.updateData(fe):v.icon.dynamicLayoutVertexBuffer.updateData(fe)}function Kt(v,i,c,d,y,b,E,L,k,O,H,$,se){const fe=L.glyphStartIndex+L.numGlyphs,f=L.lineStartIndex,x=L.lineStartIndex+L.lineLength,C=i.getoffsetX(L.glyphStartIndex),M=i.getoffsetX(fe-1),R=Z(v*C,c,d,y,b,E,L.segment,f,x,k,O,H,$,se);if(!R)return null;const N=Z(v*M,c,d,y,b,E,L.segment,f,x,k,O,H,$,se);return N?{first:R,last:N}:null}function rr(v,i,c,d){return v===a.ai.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*d?{useVertical:!0}:(v===a.ai.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function Or(v,i,c,d,y,b,E,L,k,O,H,$,se,fe,f,x){const C=i/24,M=v.lineOffsetX*C,R=v.lineOffsetY*C;let N;if(v.numGlyphs>1){const z=v.glyphStartIndex+v.numGlyphs,G=v.lineStartIndex,X=v.lineStartIndex+v.lineLength,re=Kt(C,L,M,R,c,H,$,v,k,b,se,f,x);if(!re)return{notEnoughRoom:!0};const de=Tr(re.first.point,E,x).point,we=Tr(re.last.point,E,x).point;if(d&&!c){const Ie=rr(v.writingMode,de,we,fe);if(Ie)return Ie}N=[re.first];for(let Ie=v.glyphStartIndex+1;Ie<z-1;Ie++)N.push(Z(C*L.getoffsetX(Ie),M,R,c,H,$,v.segment,G,X,k,b,se,f,x));N.push(re.last)}else{if(d&&!c){const G=Tr($,y,x).point,X=v.lineStartIndex+v.segment+1,re=new a.P(k.getx(X),k.gety(X)),de=Tr(re,y,x),we=de.signedDistanceFromCamera>0?de.point:bi($,re,G,1,y,x),Ie=rr(v.writingMode,G,we,fe);if(Ie)return Ie}const z=Z(C*L.getoffsetX(v.glyphStartIndex),M,R,c,H,$,v.segment,v.lineStartIndex,v.lineStartIndex+v.lineLength,k,b,se,f,x);if(!z)return{notEnoughRoom:!0};N=[z]}for(const z of N)a.ak(O,z.point,z.angle);return{}}function bi(v,i,c,d,y,b){const E=Tr(v.add(v.sub(i)._unit()),y,b).point,L=c.sub(E);return c.add(L._mult(d/L.mag()))}function Nt(v,i){const{projectionCache:c,lineVertexArray:d,labelPlaneMatrix:y,tileAnchorPoint:b,distanceFromAnchor:E,getElevation:L,previousVertex:k,direction:O,absOffsetX:H}=i;if(c.projections[v])return c.projections[v];const $=new a.P(d.getx(v),d.gety(v)),se=Tr($,y,L);if(se.signedDistanceFromCamera>0)return c.projections[v]=se.point,se.point;const fe=v-O;return bi(E===0?b:new a.P(d.getx(fe),d.gety(fe)),$,k,H-E+1,y,L)}function $r(v,i,c){return v._unit()._perp()._mult(i*c)}function ue(v,i,c,d,y,b,E,L){const{projectionCache:k,direction:O}=L;if(k.offsets[v])return k.offsets[v];const H=c.add(i);if(v+O<d||v+O>=y)return k.offsets[v]=H,H;const $=Nt(v+O,L),se=$r($.sub(c),E,O),fe=c.add(se),f=$.add(se);return k.offsets[v]=a.al(b,H,fe,f)||H,k.offsets[v]}function Z(v,i,c,d,y,b,E,L,k,O,H,$,se,fe){const f=d?v-i:v+i;let x=f>0?1:-1,C=0;d&&(x*=-1,C=Math.PI),x<0&&(C+=Math.PI);let M,R,N=x>0?L+E:L+E+1,z=y,G=y,X=0,re=0;const de=Math.abs(f),we=[];let Ie;for(;X+re<=de;){if(N+=x,N<L||N>=k)return null;X+=re,G=z,R=M;const He={projectionCache:$,lineVertexArray:O,labelPlaneMatrix:H,tileAnchorPoint:b,distanceFromAnchor:X,getElevation:fe,previousVertex:G,direction:x,absOffsetX:de};if(z=Nt(N,He),c===0)we.push(G),Ie=z.sub(G);else{let Se;const Fe=z.sub(G);Se=Fe.mag()===0?$r(Nt(N+x,He).sub(z),c,x):$r(Fe,c,x),R||(R=G.add(Se)),M=ue(N,Se,z,L,k,R,c,He),we.push(R),Ie=M.sub(R)}re=Ie.mag()}const Pe=Ie._mult((de-X)/re)._add(R||G),ut=C+Math.atan2(z.y-G.y,z.x-G.x);return we.push(Pe),{point:Pe,angle:se?ut:0,path:we}}const ie=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function le(v,i){for(let c=0;c<v;c++){const d=i.length;i.resize(d+4),i.float32.set(ie,3*d)}}function ve(v,i,c){const d=i[0],y=i[1];return v[0]=c[0]*d+c[4]*y+c[12],v[1]=c[1]*d+c[5]*y+c[13],v[3]=c[3]*d+c[7]*y+c[15],v}const be=100;class ke{constructor(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Rt(i.width+200,i.height+200,25),d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Rt(i.width+200,i.height+200,25);this.transform=i,this.grid=c,this.ignoredGrid=d,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+be,this.screenBottomBoundary=i.height+be,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,d,y,b,E){const L=this.projectAndGetPerspectiveRatio(y,i.anchorPointX,i.anchorPointY,E),k=d*L.perspectiveRatio,O=i.x1*k+L.point.x,H=i.y1*k+L.point.y,$=i.x2*k+L.point.x,se=i.y2*k+L.point.y;return!this.isInsideGrid(O,H,$,se)||c!=="always"&&this.grid.hitTest(O,H,$,se,c,b)||L.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[O,H,$,se],offscreen:this.isOffscreen(O,H,$,se)}}placeCollisionCircles(i,c,d,y,b,E,L,k,O,H,$,se,fe,f){const x=[],C=new a.P(c.anchorX,c.anchorY),M=Tr(C,E,f),R=Dr(this.transform.cameraToCenterDistance,M.signedDistanceFromCamera),N=(H?b/R:b*R)/a.ap,z=Tr(C,L,f).point,G=Kt(N,y,c.lineOffsetX*N,c.lineOffsetY*N,!1,z,C,c,d,L,{projections:{},offsets:{}},!1,f);let X=!1,re=!1,de=!0;if(G){const we=.5*se*R+fe,Ie=new a.P(-100,-100),Pe=new a.P(this.screenRightBoundary,this.screenBottomBoundary),ut=new gr,He=G.first,Se=G.last;let Fe=[];for(let at=He.path.length-1;at>=1;at--)Fe.push(He.path[at]);for(let at=1;at<Se.path.length;at++)Fe.push(Se.path[at]);const dt=2.5*we;if(k){const at=Fe.map(_t=>Tr(_t,k,f));Fe=at.some(_t=>_t.signedDistanceFromCamera<=0)?[]:at.map(_t=>_t.point)}let pt=[];if(Fe.length>0){const at=Fe[0].clone(),_t=Fe[0].clone();for(let Et=1;Et<Fe.length;Et++)at.x=Math.min(at.x,Fe[Et].x),at.y=Math.min(at.y,Fe[Et].y),_t.x=Math.max(_t.x,Fe[Et].x),_t.y=Math.max(_t.y,Fe[Et].y);pt=at.x>=Ie.x&&_t.x<=Pe.x&&at.y>=Ie.y&&_t.y<=Pe.y?[Fe]:_t.x<Ie.x||at.x>Pe.x||_t.y<Ie.y||at.y>Pe.y?[]:a.am([Fe],Ie.x,Ie.y,Pe.x,Pe.y)}for(const at of pt){ut.reset(at,.25*we);let _t=0;_t=ut.length<=.5*we?1:Math.ceil(ut.paddedLength/dt)+1;for(let Et=0;Et<_t;Et++){const Wt=Et/Math.max(_t-1,1),kt=ut.lerp(Wt),Fr=kt.x+be,Er=kt.y+be;x.push(Fr,Er,we,0);const kr=Fr-we,pr=Er-we,ei=Fr+we,Zr=Er+we;if(de=de&&this.isOffscreen(kr,pr,ei,Zr),re=re||this.isInsideGrid(kr,pr,ei,Zr),i!=="always"&&this.grid.hitTestCircle(Fr,Er,we,i,$)&&(X=!0,!O))return{circles:[],offscreen:!1,collisionDetected:X}}}}return{circles:!O&&X||!re||R<this.perspectiveRatioCutoff?[]:x,offscreen:de,collisionDetected:X}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let d=1/0,y=1/0,b=-1/0,E=-1/0;for(const H of i){const $=new a.P(H.x+be,H.y+be);d=Math.min(d,$.x),y=Math.min(y,$.y),b=Math.max(b,$.x),E=Math.max(E,$.y),c.push($)}const L=this.grid.query(d,y,b,E).concat(this.ignoredGrid.query(d,y,b,E)),k={},O={};for(const H of L){const $=H.key;if(k[$.bucketInstanceId]===void 0&&(k[$.bucketInstanceId]={}),k[$.bucketInstanceId][$.featureIndex])continue;const se=[new a.P(H.x1,H.y1),new a.P(H.x2,H.y1),new a.P(H.x2,H.y2),new a.P(H.x1,H.y2)];a.an(c,se)&&(k[$.bucketInstanceId][$.featureIndex]=!0,O[$.bucketInstanceId]===void 0&&(O[$.bucketInstanceId]=[]),O[$.bucketInstanceId].push($.featureIndex))}return O}insertCollisionBox(i,c,d,y,b,E){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:b,collisionGroupID:E,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,d,y,b,E){const L=d?this.ignoredGrid:this.grid,k={bucketInstanceId:y,featureIndex:b,collisionGroupID:E,overlapMode:c};for(let O=0;O<i.length;O+=4)L.insertCircle(k,i[O],i[O+1],i[O+2])}projectAndGetPerspectiveRatio(i,c,d,y){let b;return y?(b=[c,d,y(c,d),1],a.ag(b,b,i)):(b=[c,d,0,1],ve(b,b,i)),{point:new a.P((b[0]/b[3]+1)/2*this.transform.width+be,(-b[1]/b[3]+1)/2*this.transform.height+be),perspectiveRatio:.5+this.transform.cameraToCenterDistance/b[3]*.5}}isOffscreen(i,c,d,y){return d<be||i>=this.screenRightBoundary||y<be||c>this.screenBottomBoundary}isInsideGrid(i,c,d,y){return d>=0&&i<this.gridRightBoundary&&y>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=a.ao([]);return a.$(i,i,[-100,-100,0]),i}}function Oe(v,i,c){return i*(a.N/(v.tileSize*Math.pow(2,c-v.tileID.overscaledZ)))}class Te{constructor(i,c,d,y){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):y&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Ve{constructor(i,c,d,y,b){this.text=new Te(i?i.text:null,c,d,b),this.icon=new Te(i?i.icon:null,c,y,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class lt{constructor(i,c,d){this.text=i,this.icon=c,this.skipFade=d}}class ht{constructor(){this.invProjMatrix=a.Z(),this.viewportMatrix=a.Z(),this.circles=[]}}class gt{constructor(i,c,d,y,b){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=d,this.bucketIndex=y,this.tileID=b}}class nr{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:d=>d.collisionGroupID===c}}return this.collisionGroups[i]}}function sr(v,i,c,d,y){const{horizontalAlign:b,verticalAlign:E}=a.au(v);return new a.P(-(b-.5)*i+d[0]*y,-(E-.5)*c+d[1]*y)}function jt(v,i,c,d,y,b){const{x1:E,x2:L,y1:k,y2:O,anchorPointX:H,anchorPointY:$}=v,se=new a.P(i,c);return d&&se._rotate(y?b:-b),{x1:E+se.x,y1:k+se.y,x2:L+se.x,y2:O+se.y,anchorPointX:H,anchorPointY:$}}class Yt{constructor(i,c,d,y,b){this.transform=i.clone(),this.terrain=c,this.collisionIndex=new ke(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new nr(y),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,d,y){const b=d.getBucket(c),E=d.latestFeatureIndex;if(!b||!E||c.id!==b.layerIds[0])return;const L=d.collisionBoxArray,k=b.layers[0].layout,O=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),H=d.tileSize/a.N,$=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),se=k.get("text-pitch-alignment")==="map",fe=k.get("text-rotation-alignment")==="map",f=Oe(d,1,this.transform.zoom),x=vt($,se,fe,this.transform,f);let C=null;if(se){const R=Cr($,se,fe,this.transform,f);C=a.a1([],this.transform.labelPlaneMatrix,R)}this.retainedQueryData[b.bucketInstanceId]=new gt(b.bucketInstanceId,E,b.sourceLayerIndex,b.index,d.tileID);const M={bucket:b,layout:k,posMatrix:$,textLabelPlaneMatrix:x,labelToScreenMatrix:C,scale:O,textPixelRatio:H,holdingForFade:d.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:a.ah(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(y)for(const R of b.sortKeyRanges){const{sortKey:N,symbolInstanceStart:z,symbolInstanceEnd:G}=R;i.push({sortKey:N,symbolInstanceStart:z,symbolInstanceEnd:G,parameters:M})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:M})}attemptAnchorPlacement(i,c,d,y,b,E,L,k,O,H,$,se,fe,f,x,C){const M=a.aq[i.textAnchor],R=[i.textOffset0,i.textOffset1],N=sr(M,d,y,R,b),z=this.collisionIndex.placeCollisionBox(jt(c,N.x,N.y,E,L,this.transform.angle),$,k,O,H.predicate,C);if((!x||this.collisionIndex.placeCollisionBox(jt(x,N.x,N.y,E,L,this.transform.angle),$,k,O,H.predicate,C).box.length!==0)&&z.box.length>0){let G;if(this.prevPlacement&&this.prevPlacement.variableOffsets[se.crossTileID]&&this.prevPlacement.placements[se.crossTileID]&&this.prevPlacement.placements[se.crossTileID].text&&(G=this.prevPlacement.variableOffsets[se.crossTileID].anchor),se.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[se.crossTileID]={textOffset:R,width:d,height:y,anchor:M,textBoxScale:b,prevAnchor:G},this.markUsedJustification(fe,M,se,f),fe.allowVerticalPlacement&&(this.markUsedOrientation(fe,f,se),this.placedOrientations[se.crossTileID]=f),{shift:N,placedGlyphBoxes:z}}}placeLayerBucketPart(i,c,d){const{bucket:y,layout:b,posMatrix:E,textLabelPlaneMatrix:L,labelToScreenMatrix:k,textPixelRatio:O,holdingForFade:H,collisionBoxArray:$,partiallyEvaluatedTextSize:se,collisionGroup:fe}=i.parameters,f=b.get("text-optional"),x=b.get("icon-optional"),C=a.ar(b,"text-overlap","text-allow-overlap"),M=C==="always",R=a.ar(b,"icon-overlap","icon-allow-overlap"),N=R==="always",z=b.get("text-rotation-alignment")==="map",G=b.get("text-pitch-alignment")==="map",X=b.get("icon-text-fit")!=="none",re=b.get("symbol-z-order")==="viewport-y",de=M&&(N||!y.hasIconData()||x),we=N&&(M||!y.hasTextData()||f);!y.collisionArrays&&$&&y.deserializeCollisionBoxes($);const Ie=this.retainedQueryData[y.bucketInstanceId].tileID,Pe=this.terrain?(He,Se)=>this.terrain.getElevation(Ie,He,Se):null,ut=(He,Se)=>{var Fe,dt;if(c[He.crossTileID])return;if(H)return void(this.placements[He.crossTileID]=new lt(!1,!1,!1));let pt=!1,at=!1,_t=!0,Et=null,Wt={box:null,offscreen:null},kt={box:null,offscreen:null},Fr=null,Er=null,kr=null,pr=0,ei=0,Zr=0;Se.textFeatureIndex?pr=Se.textFeatureIndex:He.useRuntimeCollisionCircles&&(pr=He.featureIndex),Se.verticalTextFeatureIndex&&(ei=Se.verticalTextFeatureIndex);const Ir=Se.textBox;if(Ir){const si=li=>{let ti=a.ai.horizontal;if(y.allowVerticalPlacement&&!li&&this.prevPlacement){const pi=this.prevPlacement.placedOrientations[He.crossTileID];pi&&(this.placedOrientations[He.crossTileID]=pi,ti=pi,this.markUsedOrientation(y,ti,He))}return ti},hi=(li,ti)=>{if(y.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&Se.verticalTextBox){for(const pi of y.writingModes)if(pi===a.ai.vertical?(Wt=ti(),kt=Wt):Wt=li(),Wt&&Wt.box&&Wt.box.length)break}else Wt=li()},zr=He.textAnchorOffsetStartIndex,en=He.textAnchorOffsetEndIndex;if(en===zr){const li=(ti,pi)=>{const ri=this.collisionIndex.placeCollisionBox(ti,C,O,E,fe.predicate,Pe);return ri&&ri.box&&ri.box.length&&(this.markUsedOrientation(y,pi,He),this.placedOrientations[He.crossTileID]=pi),ri};hi(()=>li(Ir,a.ai.horizontal),()=>{const ti=Se.verticalTextBox;return y.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&ti?li(ti,a.ai.vertical):{box:null,offscreen:null}}),si(Wt&&Wt.box&&Wt.box.length)}else{let li=a.aq[(dt=(Fe=this.prevPlacement)===null||Fe===void 0?void 0:Fe.variableOffsets[He.crossTileID])===null||dt===void 0?void 0:dt.anchor];const ti=(ri,on,us)=>{const tn=ri.x2-ri.x1,ba=ri.y2-ri.y1,Go=He.textBoxScale,no=X&&R==="never"?on:null;let _n={box:[],offscreen:!1},gi=C==="never"?1:2,Ms="never";li&&gi++;for(let hs=0;hs<gi;hs++){for(let ra=zr;ra<en;ra++){const MA=y.textAnchorOffsets.get(ra);if(li&&MA.textAnchor!==li)continue;const ps=this.attemptAnchorPlacement(MA,ri,tn,ba,Go,z,G,O,E,fe,Ms,He,y,us,no,Pe);if(ps&&(_n=ps.placedGlyphBoxes,_n&&_n.box&&_n.box.length))return pt=!0,Et=ps.shift,_n}li?li=null:Ms=C}return _n};hi(()=>ti(Ir,Se.iconBox,a.ai.horizontal),()=>{const ri=Se.verticalTextBox;return y.allowVerticalPlacement&&!(Wt&&Wt.box&&Wt.box.length)&&He.numVerticalGlyphVertices>0&&ri?ti(ri,Se.verticalIconBox,a.ai.vertical):{box:null,offscreen:null}}),Wt&&(pt=Wt.box,_t=Wt.offscreen);const pi=si(Wt&&Wt.box);if(!pt&&this.prevPlacement){const ri=this.prevPlacement.variableOffsets[He.crossTileID];ri&&(this.variableOffsets[He.crossTileID]=ri,this.markUsedJustification(y,ri.anchor,He,pi))}}}if(Fr=Wt,pt=Fr&&Fr.box&&Fr.box.length>0,_t=Fr&&Fr.offscreen,He.useRuntimeCollisionCircles){const si=y.text.placedSymbolArray.get(He.centerJustifiedTextSymbolIndex),hi=a.aj(y.textSizeData,se,si),zr=b.get("text-padding");Er=this.collisionIndex.placeCollisionCircles(C,si,y.lineVertexArray,y.glyphOffsetArray,hi,E,L,k,d,G,fe.predicate,He.collisionCircleDiameter,zr,Pe),Er.circles.length&&Er.collisionDetected&&!d&&a.w("Collisions detected, but collision boxes are not shown"),pt=M||Er.circles.length>0&&!Er.collisionDetected,_t=_t&&Er.offscreen}if(Se.iconFeatureIndex&&(Zr=Se.iconFeatureIndex),Se.iconBox){const si=hi=>{const zr=X&&Et?jt(hi,Et.x,Et.y,z,G,this.transform.angle):hi;return this.collisionIndex.placeCollisionBox(zr,R,O,E,fe.predicate,Pe)};kt&&kt.box&&kt.box.length&&Se.verticalIconBox?(kr=si(Se.verticalIconBox),at=kr.box.length>0):(kr=si(Se.iconBox),at=kr.box.length>0),_t=_t&&kr.offscreen}const Bi=f||He.numHorizontalGlyphVertices===0&&He.numVerticalGlyphVertices===0,Ji=x||He.numIconVertices===0;if(Bi||Ji?Ji?Bi||(at=at&&pt):pt=at&&pt:at=pt=at&&pt,pt&&Fr&&Fr.box&&this.collisionIndex.insertCollisionBox(Fr.box,C,b.get("text-ignore-placement"),y.bucketInstanceId,kt&&kt.box&&ei?ei:pr,fe.ID),at&&kr&&this.collisionIndex.insertCollisionBox(kr.box,R,b.get("icon-ignore-placement"),y.bucketInstanceId,Zr,fe.ID),Er&&(pt&&this.collisionIndex.insertCollisionCircles(Er.circles,C,b.get("text-ignore-placement"),y.bucketInstanceId,pr,fe.ID),d)){const si=y.bucketInstanceId;let hi=this.collisionCircleArrays[si];hi===void 0&&(hi=this.collisionCircleArrays[si]=new ht);for(let zr=0;zr<Er.circles.length;zr+=4)hi.circles.push(Er.circles[zr+0]),hi.circles.push(Er.circles[zr+1]),hi.circles.push(Er.circles[zr+2]),hi.circles.push(Er.collisionDetected?1:0)}if(He.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[He.crossTileID]=new lt(pt||de,at||we,_t||y.justReloaded),c[He.crossTileID]=!0};if(re){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const He=y.getSortedSymbolIndexes(this.transform.angle);for(let Se=He.length-1;Se>=0;--Se){const Fe=He[Se];ut(y.symbolInstances.get(Fe),y.collisionArrays[Fe])}}else for(let He=i.symbolInstanceStart;He<i.symbolInstanceEnd;He++)ut(y.symbolInstances.get(He),y.collisionArrays[He]);if(d&&y.bucketInstanceId in this.collisionCircleArrays){const He=this.collisionCircleArrays[y.bucketInstanceId];a.as(He.invProjMatrix,E),He.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}markUsedJustification(i,c,d,y){let b;b=y===a.ai.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[a.at(c)];const E=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const L of E)L>=0&&(i.text.placedSymbolArray.get(L).crossTileID=b>=0&&L!==b?0:d.crossTileID)}markUsedOrientation(i,c,d){const y=c===a.ai.horizontal||c===a.ai.horizontalOnly?c:0,b=c===a.ai.vertical?c:0,E=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const L of E)i.text.placedSymbolArray.get(L).placedOrientation=y;d.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let d=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const y=c?c.symbolFadeChange(i):1,b=c?c.opacities:{},E=c?c.variableOffsets:{},L=c?c.placedOrientations:{};for(const k in this.placements){const O=this.placements[k],H=b[k];H?(this.opacities[k]=new Ve(H,y,O.text,O.icon),d=d||O.text!==H.text.placed||O.icon!==H.icon.placed):(this.opacities[k]=new Ve(null,y,O.text,O.icon,O.skipFade),d=d||O.text||O.icon)}for(const k in b){const O=b[k];if(!this.opacities[k]){const H=new Ve(O,y,!1,!1);H.isHidden()||(this.opacities[k]=H,d=d||O.text.placed||O.icon.placed)}}for(const k in E)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=E[k]);for(const k in L)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=L[k]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const d={};for(const y of c){const b=y.getBucket(i);b&&y.latestFeatureIndex&&i.id===b.layerIds[0]&&this.updateBucketOpacities(b,d,y.collisionBoxArray)}}updateBucketOpacities(i,c,d){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const y=i.layers[0],b=y.layout,E=new Ve(null,0,!1,!1,!0),L=b.get("text-allow-overlap"),k=b.get("icon-allow-overlap"),O=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),H=b.get("text-rotation-alignment")==="map",$=b.get("text-pitch-alignment")==="map",se=b.get("icon-text-fit")!=="none",fe=new Ve(null,0,L&&(k||!i.hasIconData()||b.get("icon-optional")),k&&(L||!i.hasTextData()||b.get("text-optional")),!0);!i.collisionArrays&&d&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(d);const f=(x,C,M)=>{for(let R=0;R<C/4;R++)x.opacityVertexArray.emplaceBack(M);x.hasVisibleVertices=x.hasVisibleVertices||M!==di};for(let x=0;x<i.symbolInstances.length;x++){const C=i.symbolInstances.get(x),{numHorizontalGlyphVertices:M,numVerticalGlyphVertices:R,crossTileID:N}=C;let z=this.opacities[N];c[N]?z=E:z||(z=fe,this.opacities[N]=z),c[N]=!0;const G=C.numIconVertices>0,X=this.placedOrientations[C.crossTileID],re=X===a.ai.vertical,de=X===a.ai.horizontal||X===a.ai.horizontalOnly;if(M>0||R>0){const we=Nr(z.text);f(i.text,M,re?di:we),f(i.text,R,de?di:we);const Ie=z.text.isHidden();[C.rightJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.leftJustifiedTextSymbolIndex].forEach(He=>{He>=0&&(i.text.placedSymbolArray.get(He).hidden=Ie||re?1:0)}),C.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).hidden=Ie||de?1:0);const Pe=this.variableOffsets[C.crossTileID];Pe&&this.markUsedJustification(i,Pe.anchor,C,X);const ut=this.placedOrientations[C.crossTileID];ut&&(this.markUsedJustification(i,"left",C,ut),this.markUsedOrientation(i,ut,C))}if(G){const we=Nr(z.icon),Ie=!(se&&C.verticalPlacedIconSymbolIndex&&re);C.placedIconSymbolIndex>=0&&(f(i.icon,C.numIconVertices,Ie?we:di),i.icon.placedSymbolArray.get(C.placedIconSymbolIndex).hidden=z.icon.isHidden()),C.verticalPlacedIconSymbolIndex>=0&&(f(i.icon,C.numVerticalIconVertices,Ie?di:we),i.icon.placedSymbolArray.get(C.verticalPlacedIconSymbolIndex).hidden=z.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const we=i.collisionArrays[x];if(we){let Ie=new a.P(0,0);if(we.textBox||we.verticalTextBox){let ut=!0;if(O){const He=this.variableOffsets[N];He?(Ie=sr(He.anchor,He.width,He.height,He.textOffset,He.textBoxScale),H&&Ie._rotate($?this.transform.angle:-this.transform.angle)):ut=!1}we.textBox&&ur(i.textCollisionBox.collisionVertexArray,z.text.placed,!ut||re,Ie.x,Ie.y),we.verticalTextBox&&ur(i.textCollisionBox.collisionVertexArray,z.text.placed,!ut||de,Ie.x,Ie.y)}const Pe=!!(!de&&we.verticalIconBox);we.iconBox&&ur(i.iconCollisionBox.collisionVertexArray,z.icon.placed,Pe,se?Ie.x:0,se?Ie.y:0),we.verticalIconBox&&ur(i.iconCollisionBox.collisionVertexArray,z.icon.placed,!Pe,se?Ie.x:0,se?Ie.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const x=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=x.invProjMatrix,i.placementViewportMatrix=x.viewportMatrix,i.collisionCircleArray=x.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const d=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*d>i}setStale(){this.stale=!0}}function ur(v,i,c,d,y){v.emplaceBack(i?1:0,c?1:0,d||0,y||0),v.emplaceBack(i?1:0,c?1:0,d||0,y||0),v.emplaceBack(i?1:0,c?1:0,d||0,y||0),v.emplaceBack(i?1:0,c?1:0,d||0,y||0)}const Br=Math.pow(2,25),Rr=Math.pow(2,24),Sr=Math.pow(2,17),Le=Math.pow(2,16),Mt=Math.pow(2,9),yt=Math.pow(2,8),vr=Math.pow(2,1);function Nr(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const i=v.placed?1:0,c=Math.floor(127*v.opacity);return c*Br+i*Rr+c*Sr+i*Le+c*Mt+i*yt+c*vr+i}const di=0;class Ii{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,d,y,b){const E=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(E,y,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((L,k)=>L.sortKey-k.sortKey));this._currentPartIndex<E.length;)if(c.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,b())return!0;return!1}}class qn{constructor(i,c,d,y,b,E,L,k){this.placement=new Yt(i,c,E,L,k),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(i,c,d){const y=a.h.now(),b=()=>!this._forceFullPlacement&&a.h.now()-y>2;for(;this._currentPlacementIndex>=0;){const E=c[i[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=L)&&(!E.maxzoom||E.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new Ii(E)),this._inProgressLayer.continuePlacement(d[E.source],this.placement,this._showCollisionBoxes,E,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Hi=512/a.N/2;class Wi{constructor(i,c,d){this.tileID=i,this.bucketInstanceId=d,this._symbolsByKey={};const y=new Map;for(let b=0;b<c.length;b++){const E=c.get(b),L=E.key,k=y.get(L);k?k.push(E):y.set(L,[E])}for(const[b,E]of y){const L={positions:E.map(k=>({x:Math.floor(k.anchorX*Hi),y:Math.floor(k.anchorY*Hi)})),crossTileIDs:E.map(k=>k.crossTileID)};if(L.positions.length>128){const k=new a.av(L.positions.length,16,Uint16Array);for(const{x:O,y:H}of L.positions)k.add(O,H);k.finish(),delete L.positions,L.index=k}this._symbolsByKey[b]=L}}getScaledCoordinates(i,c){const{x:d,y,z:b}=this.tileID.canonical,{x:E,y:L,z:k}=c.canonical,O=Hi/Math.pow(2,k-b),H=(L*a.N+i.anchorY)*O,$=y*a.N*Hi;return{x:Math.floor((E*a.N+i.anchorX)*O-d*a.N*Hi),y:Math.floor(H-$)}}findMatches(i,c,d){const y=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let b=0;b<i.length;b++){const E=i.get(b);if(E.crossTileID)continue;const L=this._symbolsByKey[E.key];if(!L)continue;const k=this.getScaledCoordinates(E,c);if(L.index){const O=L.index.range(k.x-y,k.y-y,k.x+y,k.y+y).sort();for(const H of O){const $=L.crossTileIDs[H];if(!d[$]){d[$]=!0,E.crossTileID=$;break}}}else if(L.positions)for(let O=0;O<L.positions.length;O++){const H=L.positions[O],$=L.crossTileIDs[O];if(Math.abs(H.x-k.x)<=y&&Math.abs(H.y-k.y)<=y&&!d[$]){d[$]=!0,E.crossTileID=$;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(i=>{let{crossTileIDs:c}=i;return c})}}class ii{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class bo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const d in this.indexes){const y=this.indexes[d],b={};for(const E in y){const L=y[E];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+c),b[L.tileID.key]=L}this.indexes[d]=b}this.lng=i}addBucket(i,c,d){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let b=0;b<c.symbolInstances.length;b++)c.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const y=this.usedCrossTileIDs[i.overscaledZ];for(const b in this.indexes){const E=this.indexes[b];if(Number(b)>i.overscaledZ)for(const L in E){const k=E[L];k.tileID.isChildOf(i)&&k.findMatches(c.symbolInstances,i,y)}else{const L=E[i.scaledTo(Number(b)).key];L&&L.findMatches(c.symbolInstances,i,y)}}for(let b=0;b<c.symbolInstances.length;b++){const E=c.symbolInstances.get(b);E.crossTileID||(E.crossTileID=d.generate(),y[E.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Wi(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const d of c.getCrossTileIDsLists())for(const y of d)delete this.usedCrossTileIDs[i][y]}removeStaleBuckets(i){let c=!1;for(const d in this.indexes){const y=this.indexes[d];for(const b in y)i[y[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,y[b]),delete y[b],c=!0)}return c}}class pA{constructor(){this.layerIndexes={},this.crossTileIDs=new ii,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,d){let y=this.layerIndexes[i.id];y===void 0&&(y=this.layerIndexes[i.id]=new bo);let b=!1;const E={};y.handleWrapJump(d);for(const L of c){const k=L.getBucket(i);k&&i.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(L.tileID,k,this.crossTileIDs)&&(b=!0),E[k.bucketInstanceId]=!0)}return y.removeStaleBuckets(E)&&(b=!0),b}pruneUnusedLayers(i){const c={};i.forEach(d=>{c[d]=!0});for(const d in this.layerIndexes)c[d]||delete this.layerIndexes[d]}}const Xi=(v,i)=>a.x(v,i&&i.filter(c=>c.identifier!=="source.canvas")),Dn=a.F(a.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),dA=a.F(a.ax,["setCenter","setZoom","setBearing","setPitch"]),Kn=a.aw();class Wr extends a.E{constructor(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),this.map=i,this.dispatcher=new Bt(qr(),this,i._getMapId()),this.imageManager=new Ae,this.imageManager.setEventedParent(this),this.glyphManager=new Je(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new nt(256,512),this.crossTileSymbolIndex=new pA,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.az());const d=this;this._rtlTextPluginCallback=Wr.registerForPluginStateChange(y=>{d.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(b,E)=>{if(a.aA(b),E&&E.every(L=>L))for(const L in d.sourceCaches){const k=d.sourceCaches[L].getSource().type;k!=="vector"&&k!=="geojson"||d.sourceCaches[L].reload()}})}),this.on("data",y=>{if(y.dataType!=="source"||y.sourceDataType!=="metadata")return;const b=this.sourceCaches[y.sourceId];if(!b)return;const E=b.getSource();if(E&&E.vectorLayerIds)for(const L in this._layers){const k=this._layers[L];k.source===E.id&&this._validateLayer(k)}})}loadURL(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2?arguments[2]:void 0;this.fire(new a.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const y=this.map._requestManager.transformRequest(i,K.Style);this._request=a.f(y,(b,E)=>{this._request=null,b?this.fire(new a.j(b)):E&&this._load(E,c,d)})}loadJSON(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2?arguments[2]:void 0;this.fire(new a.k("dataloading",{dataType:"style"})),this._request=a.h.frame(()=>{this._request=null,c.validate=c.validate!==!1,this._load(i,c,d)})}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(Kn,{validate:!1})}_load(i,c,d){var y;const b=c.transformStyle?c.transformStyle(d,i):i;if(!c.validate||!Xi(this,a.y(b))){this._loaded=!0,this.stylesheet=b;for(const E in b.sources)this.addSource(E,b.sources[E],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new it(this.stylesheet.light),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const i=a.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of i){const d=a.aC(c);d.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=d}}_loadSprite(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.imageManager.setLoaded(!1),this._spriteRequest=function(y,b,E,L){const k=ge(y),O=k.length,H=E>1?"@2x":"",$={},se={},fe={};for(const{id:f,url:x}of k){const C=b.transformRequest(b.normalizeSpriteURL(x,H,".json"),K.SpriteJSON),M=`${f}_${C.url}`;$[M]=a.f(C,(z,G)=>{delete $[M],se[f]=G,Ze(L,se,fe,z,O)});const R=b.transformRequest(b.normalizeSpriteURL(x,H,".png"),K.SpriteImage),N=`${f}_${R.url}`;$[N]=Y.getImage(R,(z,G)=>{delete $[N],fe[f]=G,Ze(L,se,fe,z,O)})}return{cancel(){for(const f of Object.values($))f.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(y,b)=>{if(this._spriteRequest=null,y)this.fire(new a.j(y));else if(b)for(const E in b){this._spritesImagesIds[E]=[];const L=this._spritesImagesIds[E]?this._spritesImagesIds[E].filter(k=>!(k in b)):[];for(const k of L)this.imageManager.removeImage(k),this._changedImages[k]=!0;for(const k in b[E]){const O=E==="default"?k:`${E}:${k}`;this._spritesImagesIds[E].push(O),O in this.imageManager.images?this.imageManager.updateImage(O,b[E][k],!1):this.imageManager.addImage(O,b[E][k]),c&&(this._changedImages[O]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),d&&d(y)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const d=i.sourceLayer;if(!d)return;const y=c.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(d)===-1)&&this.fire(new a.j(new Error(`Source layer "${d}" does not exist on source "${y.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const c=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c);const d=[];for(const y of i)c[y]&&d.push(c[y]);return d}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const c=Object.keys(this._layers);for(const d of c){const y=this._layers[d];y.type!=="custom"&&(i[d]=y.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(y.length||b.length)&&this._updateWorkerLayers(y,b);for(const E in this._updatedSources){const L=this._updatedSources[E];if(L==="reload")this._reloadSource(E);else{if(L!=="clear")throw new Error(`Invalid action ${L}`);this._clearSource(E)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const d={};for(const y in this.sourceCaches){const b=this.sourceCaches[y];d[y]=b.used,b.used=!1}for(const y of this._order){const b=this._layers[y];b.recalculate(i,this._availableImages),!b.isHidden(i.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const y in d){const b=this.sourceCaches[y];d[y]!==b.used&&b.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(i),this.z=i.zoom,c&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._checkLoaded();const d=this.serialize();if(i=c.transformStyle?c.transformStyle(d,i):i,Xi(this,a.y(i)))return!1;(i=a.aD(i)).layers=a.aB(i.layers);const y=a.aE(d,i).filter(E=>!(E.command in dA));if(y.length===0)return!1;const b=y.filter(E=>!(E.command in Dn));if(b.length>0)throw new Error(`Unimplemented: ${b.map(E=>E.command).join(", ")}.`);for(const E of y)E.command!=="setTransition"&&this[E.command].apply(this,E.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,c){if(this.getImage(i))return this.fire(new a.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new a.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(a.y.source,`sources.${i}`,c,null,d))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const y=this.sourceCaches[i]=new Ut(i,c,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:i})),y.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===i)return this.fire(new a.j(new Error(`Source "${i}" cannot be removed while layer "${d}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const d=this.sourceCaches[i].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this._checkLoaded();const y=i.id;if(this.getLayer(y))return void this.fire(new a.j(new Error(`Layer "${y}" already exists on this map.`)));let b;if(i.type==="custom"){if(Xi(this,a.aF(i)))return;b=a.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(y,i.source),i=a.aD(i),i=a.e(i,{source:y})),this._validate(a.y.layer,`layers.${y}`,i,{arrayIndex:-1},d))return;b=a.aC(i),this._validateLayer(b),b.setEventedParent(this,{layer:{id:y}})}const E=c?this._order.indexOf(c):this._order.length;if(c&&E===-1)this.fire(new a.j(new Error(`Cannot add layer "${y}" before non-existing layer "${c}".`)));else{if(this._order.splice(E,0,y),this._layerOrderChanged=!0,this._layers[y]=b,this._removedLayers[y]&&b.source&&b.type!=="custom"){const L=this._removedLayers[y];delete this._removedLayers[y],L.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new a.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const d=this._order.indexOf(i);this._order.splice(d,1);const y=c?this._order.indexOf(c):this._order.length;c&&y===-1?this.fire(new a.j(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(y,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const d=this._order.indexOf(i);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,d){this._checkLoaded();const y=this.getLayer(i);y?y.minzoom===c&&y.maxzoom===d||(c!=null&&(y.minzoom=c),d!=null&&(y.maxzoom=d),this._updateLayer(y)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this._checkLoaded();const y=this.getLayer(i);if(y){if(!a.aG(y.filter,c))return c==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(a.y.filter,`layers.${y.id}.filter`,c,null,d)||(y.filter=a.aD(c),this._updateLayer(y)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return a.aD(this.getLayer(i).filter)}setLayoutProperty(i,c,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this._checkLoaded();const b=this.getLayer(i);b?a.aG(b.getLayoutProperty(c),d)||(b.setLayoutProperty(c,d,y),this._updateLayer(b)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const d=this.getLayer(i);if(d)return d.getLayoutProperty(c);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this._checkLoaded();const b=this.getLayer(i);b?a.aG(b.getPaintProperty(c),d)||(b.setPaintProperty(c,d,y)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new a.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const d=i.source,y=i.sourceLayer,b=this.sourceCaches[d];if(b===void 0)return void this.fire(new a.j(new Error(`The source '${d}' does not exist in the map's style.`)));const E=b.getSource().type;E==="geojson"&&y?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||y?(i.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),b.setFeatureState(y,i.id,c)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const d=i.source,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new a.j(new Error(`The source '${d}' does not exist in the map's style.`)));const b=y.getSource().type,E=b==="vector"?i.sourceLayer:void 0;b!=="vector"||E?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(E,i.id,c):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,d=i.sourceLayer,y=this.sourceCaches[c];if(y!==void 0)return y.getSource().type!=="vector"||d?(i.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),y.getFeatureState(d,i.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=a.aH(this.sourceCaches,b=>b.serialize()),c=this._serializeByIds(this._order),d=this.map.getTerrain()||void 0,y=this.stylesheet;return a.aI({version:y.version,name:y.name,metadata:y.metadata,light:y.light,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,sources:i,layers:c,terrain:d},b=>b!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=E=>this._layers[E].type==="fill-extrusion",d={},y=[];for(let E=this._order.length-1;E>=0;E--){const L=this._order[E];if(c(L)){d[L]=E;for(const k of i){const O=k[L];if(O)for(const H of O)y.push(H)}}}y.sort((E,L)=>L.intersectionZ-E.intersectionZ);const b=[];for(let E=this._order.length-1;E>=0;E--){const L=this._order[E];if(c(L))for(let k=y.length-1;k>=0;k--){const O=y[k].feature;if(d[O.layer.id]<E)break;b.push(O),y.pop()}else for(const k of i){const O=k[L];if(O)for(const H of O)b.push(H.feature)}}return b}queryRenderedFeatures(i,c,d){c&&c.filter&&this._validate(a.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const y={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const L of c.layers){const k=this._layers[L];if(!k)return this.fire(new a.j(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];y[k.source]=!0}}const b=[];c.availableImages=this._availableImages;const E=this._serializedAllLayers();for(const L in this.sourceCaches)c.layers&&!y[L]||b.push(Ue(this.sourceCaches[L],this._layers,E,i,c,d));return this.placement&&b.push(function(L,k,O,H,$,se,fe){const f={},x=se.queryRenderedSymbols(H),C=[];for(const M of Object.keys(x).map(Number))C.push(fe[M]);C.sort(fr);for(const M of C){const R=M.featureIndex.lookupSymbolFeatures(x[M.bucketInstanceId],k,M.bucketIndex,M.sourceLayerIndex,$.filter,$.layers,$.availableImages,L);for(const N in R){const z=f[N]=f[N]||[],G=R[N];G.sort((X,re)=>{const de=M.featureSortOrder;if(de){const we=de.indexOf(X.featureIndex);return de.indexOf(re.featureIndex)-we}return re.featureIndex-X.featureIndex});for(const X of G)z.push(X)}}for(const M in f)f[M].forEach(R=>{const N=R.feature,z=O[L[M].source].getFeatureState(N.layer["source-layer"],N.id);N.source=N.layer.source,N.layer["source-layer"]&&(N.sourceLayer=N.layer["source-layer"]),N.state=z});return f}(this._layers,E,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(i,c){c&&c.filter&&this._validate(a.y.filter,"querySourceFeatures.filter",c.filter,null,c);const d=this.sourceCaches[i];return d?function(y,b){const E=y.getRenderableIds().map(O=>y.getTileByID(O)),L=[],k={};for(let O=0;O<E.length;O++){const H=E[O],$=H.tileID.canonical.key;k[$]||(k[$]=!0,H.querySourceFeatures(L,b))}return L}(d,c):[]}addSourceType(i,c,d){return Jt(i)?d(new Error(`A source type called "${i}" already exists.`)):(((y,b)=>{Vt[y]=b})(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},d):d(null,null))}getLight(){return this.light.getLight()}setLight(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._checkLoaded();const d=this.light.getLight();let y=!1;for(const E in i)if(!a.aG(i[E],d[E])){y=!0;break}if(!y)return;const b={now:a.h.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(b)}_validate(i,c,d,y){let b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return(!b||b.validate!==!1)&&Xi(this,i.call(a.y,a.e({key:c,style:this.serialize(),value:d,styleSpec:a.v},y)))}_remove(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const d=this.sourceCaches[c];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,d,y){let b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,E=!1,L=!1;const k={};for(const O of this._order){const H=this._layers[O];if(H.type!=="symbol")continue;if(!k[H.source]){const se=this.sourceCaches[H.source];k[H.source]=se.getRenderableIds(!0).map(fe=>se.getTileByID(fe)).sort((fe,f)=>f.tileID.overscaledZ-fe.tileID.overscaledZ||(fe.tileID.isLessThan(f.tileID)?-1:1))}const $=this.crossTileSymbolIndex.addLayer(H,k[H.source],i.center.lng);E=E||$}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.h.now(),i.zoom))&&(this.pauseablePlacement=new qn(i,this.map.terrain,this._order,b,c,d,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.h.now()),L=!0),E&&this.pauseablePlacement.placement.setStale()),L||E)for(const O of this._order){const H=this._layers[O];H.type==="symbol"&&this.placement.updateLayerOpacities(H,k[H.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,d){this.imageManager.getImages(c.icons,d),this._updateTilesForChangedImages();const y=this.sourceCaches[c.source];y&&y.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(i,c,d){this.glyphManager.getGlyphs(c.stacks,d);const y=this.sourceCaches[c.source];y&&y.setDependencies(c.tileID.key,c.type,[""])}getResource(i,c,d){return a.m(c,d)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._checkLoaded(),i&&this._validate(a.y.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},y=arguments.length>3?arguments[3]:void 0;this._checkLoaded();const b=[{id:i,url:c}],E=[...ge(this.stylesheet.sprite),...b];this._validate(a.y.sprite,"sprite",E,null,d)||(this.stylesheet.sprite=E,this._loadSprite(b,!0,y))}removeSprite(i){this._checkLoaded();const c=ge(this.stylesheet.sprite);if(c.find(d=>d.id===i)){if(this._spritesImagesIds[i])for(const d of this._spritesImagesIds[i])this.imageManager.removeImage(d),this._changedImages[d]=!0;c.splice(c.findIndex(d=>d.id===i),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return ge(this.stylesheet.sprite)}setSprite(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2?arguments[2]:void 0;this._checkLoaded(),i&&this._validate(a.y.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,d):(this._unloadSprite(),d&&d(null)))}}Wr.registerForPluginStateChange=a.aK;var xo=a.Q([{name:"a_pos",type:"Int16",components:2}]),Ea="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const mi={prelude:Xr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Xr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Xr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Xr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Xr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Xr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Xr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Xr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Xr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Xr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Xr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Xr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Xr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Xr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Xr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Xr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Xr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Xr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Xr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Xr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Xr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Xr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Xr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Xr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Xr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Xr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Xr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ea),terrainDepth:Xr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ea),terrainCoords:Xr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ea)};function Xr(v,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=i.match(/attribute ([\w]+) ([\w]+)/g),y=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=b?b.concat(y):y,L={};return{fragmentSource:v=v.replace(c,(k,O,H,$,se)=>(L[se]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${se}
varying ${H} ${$} ${se};
#else
uniform ${H} ${$} u_${se};
#endif
`:`
#ifdef HAS_UNIFORM_u_${se}
    ${H} ${$} ${se} = u_${se};
#endif
`)),vertexSource:i=i.replace(c,(k,O,H,$,se)=>{const fe=$==="float"?"vec2":"vec4",f=se.match(/color/)?"color":fe;return L[se]?O==="define"?`
#ifndef HAS_UNIFORM_u_${se}
uniform lowp float u_${se}_t;
attribute ${H} ${fe} a_${se};
varying ${H} ${$} ${se};
#else
uniform ${H} ${$} u_${se};
#endif
`:f==="vec4"?`
#ifndef HAS_UNIFORM_u_${se}
    ${se} = a_${se};
#else
    ${H} ${$} ${se} = u_${se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${se}
    ${se} = unpack_mix_${f}(a_${se}, u_${se}_t);
#else
    ${H} ${$} ${se} = u_${se};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${se}
uniform lowp float u_${se}_t;
attribute ${H} ${fe} a_${se};
#else
uniform ${H} ${$} u_${se};
#endif
`:f==="vec4"?`
#ifndef HAS_UNIFORM_u_${se}
    ${H} ${$} ${se} = a_${se};
#else
    ${H} ${$} ${se} = u_${se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${se}
    ${H} ${$} ${se} = unpack_mix_${f}(a_${se}, u_${se}_t);
#else
    ${H} ${$} ${se} = u_${se};
#endif
`}),staticAttributes:d,staticUniforms:E}}class Ia{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,d,y,b,E,L,k,O){this.context=i;let H=this.boundPaintVertexBuffers.length!==y.length;for(let $=0;!H&&$<y.length;$++)this.boundPaintVertexBuffers[$]!==y[$]&&(H=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==d||H||this.boundIndexBuffer!==b||this.boundVertexOffset!==E||this.boundDynamicVertexBuffer!==L||this.boundDynamicVertexBuffer2!==k||this.boundDynamicVertexBuffer3!==O?this.freshBind(c,d,y,b,E,L,k,O):(i.bindVertexArray.set(this.vao),L&&L.bind(),b&&b.dynamicDraw&&b.bind(),k&&k.bind(),O&&O.bind())}freshBind(i,c,d,y,b,E,L,k){const O=i.numAttributes,H=this.context,$=H.gl;this.vao&&this.destroy(),this.vao=H.createVertexArray(),H.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=y,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=L,this.boundDynamicVertexBuffer3=k,c.enableAttributes($,i);for(const se of d)se.enableAttributes($,i);E&&E.enableAttributes($,i),L&&L.enableAttributes($,i),k&&k.enableAttributes($,i),c.bind(),c.setVertexAttribPointers($,i,b);for(const se of d)se.bind(),se.setVertexAttribPointers($,i,b);E&&(E.bind(),E.setVertexAttribPointers($,i,b)),y&&y.bind(),L&&(L.bind(),L.setVertexAttribPointers($,i,b)),k&&(k.bind(),k.setVertexAttribPointers($,i,b)),H.currentNumAttributes=O}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function ci(v){const i=[];for(let c=0;c<v.length;c++){if(v[c]===null)continue;const d=v[c].split(" ");i.push(d.pop())}return i}class La{constructor(i,c,d,y,b,E){const L=i.gl;this.program=L.createProgram();const k=ci(c.staticAttributes),O=d?d.getBinderAttributes():[],H=k.concat(O),$=mi.prelude.staticUniforms?ci(mi.prelude.staticUniforms):[],se=c.staticUniforms?ci(c.staticUniforms):[],fe=d?d.getBinderUniforms():[],f=$.concat(se).concat(fe),x=[];for(const X of f)x.indexOf(X)<0&&x.push(X);const C=d?d.defines():[];b&&C.push("#define OVERDRAW_INSPECTOR;"),E&&C.push("#define TERRAIN3D;");const M=C.concat(mi.prelude.fragmentSource,c.fragmentSource).join(`
`),R=C.concat(mi.prelude.vertexSource,c.vertexSource).join(`
`),N=L.createShader(L.FRAGMENT_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);if(L.shaderSource(N,M),L.compileShader(N),!L.getShaderParameter(N,L.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${L.getShaderInfoLog(N)}`);L.attachShader(this.program,N);const z=L.createShader(L.VERTEX_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);if(L.shaderSource(z,R),L.compileShader(z),!L.getShaderParameter(z,L.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${L.getShaderInfoLog(z)}`);L.attachShader(this.program,z),this.attributes={};const G={};this.numAttributes=H.length;for(let X=0;X<this.numAttributes;X++)H[X]&&(L.bindAttribLocation(this.program,X,H[X]),this.attributes[H[X]]=X);if(L.linkProgram(this.program),!L.getProgramParameter(this.program,L.LINK_STATUS))throw new Error(`Program failed to link: ${L.getProgramInfoLog(this.program)}`);L.deleteShader(z),L.deleteShader(N);for(let X=0;X<x.length;X++){const re=x[X];if(re&&!G[re]){const de=L.getUniformLocation(this.program,re);de&&(G[re]=de)}}this.fixedUniforms=y(i,G),this.terrainUniforms=((X,re)=>({u_depth:new a.aL(X,re.u_depth),u_terrain:new a.aL(X,re.u_terrain),u_terrain_dim:new a.aM(X,re.u_terrain_dim),u_terrain_matrix:new a.aN(X,re.u_terrain_matrix),u_terrain_unpack:new a.aO(X,re.u_terrain_unpack),u_terrain_exaggeration:new a.aM(X,re.u_terrain_exaggeration)}))(i,G),this.binderUniforms=d?d.getUniforms(i,G):[]}draw(i,c,d,y,b,E,L,k,O,H,$,se,fe,f,x,C,M,R){const N=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(d),i.setStencilMode(y),i.setColorMode(b),i.setCullFace(E),k){i.activeTexture.set(N.TEXTURE2),N.bindTexture(N.TEXTURE_2D,k.depthTexture),i.activeTexture.set(N.TEXTURE3),N.bindTexture(N.TEXTURE_2D,k.texture);for(const G in this.terrainUniforms)this.terrainUniforms[G].set(k[G])}for(const G in this.fixedUniforms)this.fixedUniforms[G].set(L[G]);x&&x.setUniforms(i,this.binderUniforms,fe,{zoom:f});let z=0;switch(c){case N.LINES:z=2;break;case N.TRIANGLES:z=3;break;case N.LINE_STRIP:z=1}for(const G of se.get()){const X=G.vaos||(G.vaos={});(X[O]||(X[O]=new Ia)).bind(i,this,H,x?x.getPaintVertexBuffers():[],$,G.vertexOffset,C,M,R),N.drawElements(c,G.primitiveLength*z,N.UNSIGNED_SHORT,G.primitiveOffset*z*2)}}}function Ci(v,i,c){const d=1/Oe(c,1,i.transform.tileZoom),y=Math.pow(2,c.tileID.overscaledZ),b=c.tileSize*Math.pow(2,i.transform.tileZoom)/y,E=b*(c.tileID.canonical.x+c.tileID.wrap*y),L=b*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[d,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[E>>16,L>>16],u_pixel_coord_lower:[65535&E,65535&L]}}const Bo=(v,i,c,d)=>{const y=i.style.light,b=y.properties.get("position"),E=[b.x,b.y,b.z],L=function(){var O=new a.A(9);return a.A!=Float32Array&&(O[1]=0,O[2]=0,O[3]=0,O[5]=0,O[6]=0,O[7]=0),O[0]=1,O[4]=1,O[8]=1,O}();y.properties.get("anchor")==="viewport"&&function(O,H){var $=Math.sin(H),se=Math.cos(H);O[0]=se,O[1]=$,O[2]=0,O[3]=-$,O[4]=se,O[5]=0,O[6]=0,O[7]=0,O[8]=1}(L,-i.transform.angle),function(O,H,$){var se=H[0],fe=H[1],f=H[2];O[0]=se*$[0]+fe*$[3]+f*$[6],O[1]=se*$[1]+fe*$[4]+f*$[7],O[2]=se*$[2]+fe*$[5]+f*$[8]}(E,E,L);const k=y.properties.get("color");return{u_matrix:v,u_lightpos:E,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+c,u_opacity:d}},$s=(v,i,c,d,y,b,E)=>a.e(Bo(v,i,c,d),Ci(b,i,E),{u_height_factor:-Math.pow(2,y.overscaledZ)/E.tileSize/8}),ql=v=>({u_matrix:v}),fA=(v,i,c,d)=>a.e(ql(v),Ci(c,i,d)),gA=(v,i)=>({u_matrix:v,u_world:i}),Co=(v,i,c,d,y)=>a.e(fA(v,i,c,d),{u_world:y}),ua=(v,i,c,d)=>{const y=v.transform;let b,E;if(d.paint.get("circle-pitch-alignment")==="map"){const L=Oe(c,1,y.zoom);b=!0,E=[L,L]}else b=!1,E=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(i.posMatrix,c,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:E}},So=(v,i,c)=>{const d=Oe(c,1,i.zoom),y=Math.pow(2,i.zoom-c.tileID.overscaledZ),b=c.tileID.overscaleFactor();return{u_matrix:v,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[i.pixelsToGLUnits[0]/(d*y),i.pixelsToGLUnits[1]/(d*y)],u_overscale_factor:b}},Fo=function(v,i){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return{u_matrix:v,u_color:i,u_overlay:0,u_overlay_scale:c}},Kl=v=>({u_matrix:v}),Oc=(v,i,c,d)=>({u_matrix:v,u_extrude_scale:Oe(i,1,c),u_intensity:d});function Ws(v,i){const c=Math.pow(2,i.canonical.z),d=i.canonical.y;return[new a.U(0,d/c).toLngLat().lat,new a.U(0,(d+1)/c).toLngLat().lat]}const qa=(v,i,c,d)=>{const y=v.transform;return{u_matrix:Io(v,i,c,d),u_ratio:1/Oe(i,1,y.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Eo=(v,i,c,d,y)=>a.e(qa(v,i,c,y),{u_image:0,u_image_height:d}),$l=(v,i,c,d,y)=>{const b=v.transform,E=Wl(i,b);return{u_matrix:Io(v,i,c,y),u_texsize:i.imageAtlasTexture.size,u_ratio:1/Oe(i,1,b.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[E,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},gn=(v,i,c,d,y,b)=>{const E=v.lineAtlas,L=Wl(i,v.transform),k=c.layout.get("line-cap")==="round",O=E.getDash(d.from,k),H=E.getDash(d.to,k),$=O.width*y.fromScale,se=H.width*y.toScale;return a.e(qa(v,i,c,b),{u_patternscale_a:[L/$,-O.height/2],u_patternscale_b:[L/se,-H.height/2],u_sdfgamma:E.width/(256*Math.min($,se)*v.pixelRatio)/2,u_image:0,u_tex_y_a:O.y,u_tex_y_b:H.y,u_mix:y.t})};function Wl(v,i){return 1/Oe(v,1,i.tileZoom)}function Io(v,i,c,d){return v.translatePosMatrix(d?d.posMatrix:i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Ur=(v,i,c,d,y)=>{return{u_matrix:v,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(E=y.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(b=y.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Xl(y.paint.get("raster-hue-rotate"))};var b,E};function Xl(v){v*=Math.PI/180;const i=Math.sin(v),c=Math.cos(v);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const rl=(v,i,c,d,y,b,E,L,k,O)=>{const H=y.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:H.cameraToCenterDistance,u_pitch:H.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:H.width/H.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:E,u_coord_matrix:L,u_is_text:+k,u_pitch_with_map:+d,u_texsize:O,u_texture:0}},Fs=(v,i,c,d,y,b,E,L,k,O,H)=>{const $=y.transform;return a.e(rl(v,i,c,d,y,b,E,L,k,O),{u_gamma_scale:d?Math.cos($._pitch)*$.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:+H})},ha=(v,i,c,d,y,b,E,L,k,O)=>a.e(Fs(v,i,c,d,y,b,E,L,!0,k,!0),{u_texsize_icon:O,u_texture_icon:1}),Lo=(v,i,c)=>({u_matrix:v,u_opacity:i,u_color:c}),mn=(v,i,c,d,y,b)=>a.e(function(E,L,k,O){const H=k.imageManager.getPattern(E.from.toString()),$=k.imageManager.getPattern(E.to.toString()),{width:se,height:fe}=k.imageManager.getPixelSize(),f=Math.pow(2,O.tileID.overscaledZ),x=O.tileSize*Math.pow(2,k.transform.tileZoom)/f,C=x*(O.tileID.canonical.x+O.tileID.wrap*f),M=x*O.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:H.tl,u_pattern_br_a:H.br,u_pattern_tl_b:$.tl,u_pattern_br_b:$.br,u_texsize:[se,fe],u_mix:L.t,u_pattern_size_a:H.displaySize,u_pattern_size_b:$.displaySize,u_scale_a:L.fromScale,u_scale_b:L.toScale,u_tile_units_to_pixels:1/Oe(O,1,k.transform.tileZoom),u_pixel_coord_upper:[C>>16,M>>16],u_pixel_coord_lower:[65535&C,65535&M]}}(d,b,c,y),{u_matrix:v,u_opacity:i}),Ka={fillExtrusion:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_lightpos:new a.aP(v,i.u_lightpos),u_lightintensity:new a.aM(v,i.u_lightintensity),u_lightcolor:new a.aP(v,i.u_lightcolor),u_vertical_gradient:new a.aM(v,i.u_vertical_gradient),u_opacity:new a.aM(v,i.u_opacity)}),fillExtrusionPattern:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_lightpos:new a.aP(v,i.u_lightpos),u_lightintensity:new a.aM(v,i.u_lightintensity),u_lightcolor:new a.aP(v,i.u_lightcolor),u_vertical_gradient:new a.aM(v,i.u_vertical_gradient),u_height_factor:new a.aM(v,i.u_height_factor),u_image:new a.aL(v,i.u_image),u_texsize:new a.aQ(v,i.u_texsize),u_pixel_coord_upper:new a.aQ(v,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(v,i.u_pixel_coord_lower),u_scale:new a.aP(v,i.u_scale),u_fade:new a.aM(v,i.u_fade),u_opacity:new a.aM(v,i.u_opacity)}),fill:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix)}),fillPattern:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_image:new a.aL(v,i.u_image),u_texsize:new a.aQ(v,i.u_texsize),u_pixel_coord_upper:new a.aQ(v,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(v,i.u_pixel_coord_lower),u_scale:new a.aP(v,i.u_scale),u_fade:new a.aM(v,i.u_fade)}),fillOutline:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_world:new a.aQ(v,i.u_world)}),fillOutlinePattern:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_world:new a.aQ(v,i.u_world),u_image:new a.aL(v,i.u_image),u_texsize:new a.aQ(v,i.u_texsize),u_pixel_coord_upper:new a.aQ(v,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(v,i.u_pixel_coord_lower),u_scale:new a.aP(v,i.u_scale),u_fade:new a.aM(v,i.u_fade)}),circle:(v,i)=>({u_camera_to_center_distance:new a.aM(v,i.u_camera_to_center_distance),u_scale_with_map:new a.aL(v,i.u_scale_with_map),u_pitch_with_map:new a.aL(v,i.u_pitch_with_map),u_extrude_scale:new a.aQ(v,i.u_extrude_scale),u_device_pixel_ratio:new a.aM(v,i.u_device_pixel_ratio),u_matrix:new a.aN(v,i.u_matrix)}),collisionBox:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_camera_to_center_distance:new a.aM(v,i.u_camera_to_center_distance),u_pixels_to_tile_units:new a.aM(v,i.u_pixels_to_tile_units),u_extrude_scale:new a.aQ(v,i.u_extrude_scale),u_overscale_factor:new a.aM(v,i.u_overscale_factor)}),collisionCircle:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_inv_matrix:new a.aN(v,i.u_inv_matrix),u_camera_to_center_distance:new a.aM(v,i.u_camera_to_center_distance),u_viewport_size:new a.aQ(v,i.u_viewport_size)}),debug:(v,i)=>({u_color:new a.aR(v,i.u_color),u_matrix:new a.aN(v,i.u_matrix),u_overlay:new a.aL(v,i.u_overlay),u_overlay_scale:new a.aM(v,i.u_overlay_scale)}),clippingMask:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix)}),heatmap:(v,i)=>({u_extrude_scale:new a.aM(v,i.u_extrude_scale),u_intensity:new a.aM(v,i.u_intensity),u_matrix:new a.aN(v,i.u_matrix)}),heatmapTexture:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_world:new a.aQ(v,i.u_world),u_image:new a.aL(v,i.u_image),u_color_ramp:new a.aL(v,i.u_color_ramp),u_opacity:new a.aM(v,i.u_opacity)}),hillshade:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_image:new a.aL(v,i.u_image),u_latrange:new a.aQ(v,i.u_latrange),u_light:new a.aQ(v,i.u_light),u_shadow:new a.aR(v,i.u_shadow),u_highlight:new a.aR(v,i.u_highlight),u_accent:new a.aR(v,i.u_accent)}),hillshadePrepare:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_image:new a.aL(v,i.u_image),u_dimension:new a.aQ(v,i.u_dimension),u_zoom:new a.aM(v,i.u_zoom),u_unpack:new a.aO(v,i.u_unpack)}),line:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_ratio:new a.aM(v,i.u_ratio),u_device_pixel_ratio:new a.aM(v,i.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(v,i.u_units_to_pixels)}),lineGradient:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_ratio:new a.aM(v,i.u_ratio),u_device_pixel_ratio:new a.aM(v,i.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(v,i.u_units_to_pixels),u_image:new a.aL(v,i.u_image),u_image_height:new a.aM(v,i.u_image_height)}),linePattern:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_texsize:new a.aQ(v,i.u_texsize),u_ratio:new a.aM(v,i.u_ratio),u_device_pixel_ratio:new a.aM(v,i.u_device_pixel_ratio),u_image:new a.aL(v,i.u_image),u_units_to_pixels:new a.aQ(v,i.u_units_to_pixels),u_scale:new a.aP(v,i.u_scale),u_fade:new a.aM(v,i.u_fade)}),lineSDF:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_ratio:new a.aM(v,i.u_ratio),u_device_pixel_ratio:new a.aM(v,i.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(v,i.u_units_to_pixels),u_patternscale_a:new a.aQ(v,i.u_patternscale_a),u_patternscale_b:new a.aQ(v,i.u_patternscale_b),u_sdfgamma:new a.aM(v,i.u_sdfgamma),u_image:new a.aL(v,i.u_image),u_tex_y_a:new a.aM(v,i.u_tex_y_a),u_tex_y_b:new a.aM(v,i.u_tex_y_b),u_mix:new a.aM(v,i.u_mix)}),raster:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_tl_parent:new a.aQ(v,i.u_tl_parent),u_scale_parent:new a.aM(v,i.u_scale_parent),u_buffer_scale:new a.aM(v,i.u_buffer_scale),u_fade_t:new a.aM(v,i.u_fade_t),u_opacity:new a.aM(v,i.u_opacity),u_image0:new a.aL(v,i.u_image0),u_image1:new a.aL(v,i.u_image1),u_brightness_low:new a.aM(v,i.u_brightness_low),u_brightness_high:new a.aM(v,i.u_brightness_high),u_saturation_factor:new a.aM(v,i.u_saturation_factor),u_contrast_factor:new a.aM(v,i.u_contrast_factor),u_spin_weights:new a.aP(v,i.u_spin_weights)}),symbolIcon:(v,i)=>({u_is_size_zoom_constant:new a.aL(v,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(v,i.u_is_size_feature_constant),u_size_t:new a.aM(v,i.u_size_t),u_size:new a.aM(v,i.u_size),u_camera_to_center_distance:new a.aM(v,i.u_camera_to_center_distance),u_pitch:new a.aM(v,i.u_pitch),u_rotate_symbol:new a.aL(v,i.u_rotate_symbol),u_aspect_ratio:new a.aM(v,i.u_aspect_ratio),u_fade_change:new a.aM(v,i.u_fade_change),u_matrix:new a.aN(v,i.u_matrix),u_label_plane_matrix:new a.aN(v,i.u_label_plane_matrix),u_coord_matrix:new a.aN(v,i.u_coord_matrix),u_is_text:new a.aL(v,i.u_is_text),u_pitch_with_map:new a.aL(v,i.u_pitch_with_map),u_texsize:new a.aQ(v,i.u_texsize),u_texture:new a.aL(v,i.u_texture)}),symbolSDF:(v,i)=>({u_is_size_zoom_constant:new a.aL(v,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(v,i.u_is_size_feature_constant),u_size_t:new a.aM(v,i.u_size_t),u_size:new a.aM(v,i.u_size),u_camera_to_center_distance:new a.aM(v,i.u_camera_to_center_distance),u_pitch:new a.aM(v,i.u_pitch),u_rotate_symbol:new a.aL(v,i.u_rotate_symbol),u_aspect_ratio:new a.aM(v,i.u_aspect_ratio),u_fade_change:new a.aM(v,i.u_fade_change),u_matrix:new a.aN(v,i.u_matrix),u_label_plane_matrix:new a.aN(v,i.u_label_plane_matrix),u_coord_matrix:new a.aN(v,i.u_coord_matrix),u_is_text:new a.aL(v,i.u_is_text),u_pitch_with_map:new a.aL(v,i.u_pitch_with_map),u_texsize:new a.aQ(v,i.u_texsize),u_texture:new a.aL(v,i.u_texture),u_gamma_scale:new a.aM(v,i.u_gamma_scale),u_device_pixel_ratio:new a.aM(v,i.u_device_pixel_ratio),u_is_halo:new a.aL(v,i.u_is_halo)}),symbolTextAndIcon:(v,i)=>({u_is_size_zoom_constant:new a.aL(v,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(v,i.u_is_size_feature_constant),u_size_t:new a.aM(v,i.u_size_t),u_size:new a.aM(v,i.u_size),u_camera_to_center_distance:new a.aM(v,i.u_camera_to_center_distance),u_pitch:new a.aM(v,i.u_pitch),u_rotate_symbol:new a.aL(v,i.u_rotate_symbol),u_aspect_ratio:new a.aM(v,i.u_aspect_ratio),u_fade_change:new a.aM(v,i.u_fade_change),u_matrix:new a.aN(v,i.u_matrix),u_label_plane_matrix:new a.aN(v,i.u_label_plane_matrix),u_coord_matrix:new a.aN(v,i.u_coord_matrix),u_is_text:new a.aL(v,i.u_is_text),u_pitch_with_map:new a.aL(v,i.u_pitch_with_map),u_texsize:new a.aQ(v,i.u_texsize),u_texsize_icon:new a.aQ(v,i.u_texsize_icon),u_texture:new a.aL(v,i.u_texture),u_texture_icon:new a.aL(v,i.u_texture_icon),u_gamma_scale:new a.aM(v,i.u_gamma_scale),u_device_pixel_ratio:new a.aM(v,i.u_device_pixel_ratio),u_is_halo:new a.aL(v,i.u_is_halo)}),background:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_opacity:new a.aM(v,i.u_opacity),u_color:new a.aR(v,i.u_color)}),backgroundPattern:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_opacity:new a.aM(v,i.u_opacity),u_image:new a.aL(v,i.u_image),u_pattern_tl_a:new a.aQ(v,i.u_pattern_tl_a),u_pattern_br_a:new a.aQ(v,i.u_pattern_br_a),u_pattern_tl_b:new a.aQ(v,i.u_pattern_tl_b),u_pattern_br_b:new a.aQ(v,i.u_pattern_br_b),u_texsize:new a.aQ(v,i.u_texsize),u_mix:new a.aM(v,i.u_mix),u_pattern_size_a:new a.aQ(v,i.u_pattern_size_a),u_pattern_size_b:new a.aQ(v,i.u_pattern_size_b),u_scale_a:new a.aM(v,i.u_scale_a),u_scale_b:new a.aM(v,i.u_scale_b),u_pixel_coord_upper:new a.aQ(v,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(v,i.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aM(v,i.u_tile_units_to_pixels)}),terrain:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_texture:new a.aL(v,i.u_texture),u_ele_delta:new a.aM(v,i.u_ele_delta)}),terrainDepth:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_ele_delta:new a.aM(v,i.u_ele_delta)}),terrainCoords:(v,i)=>({u_matrix:new a.aN(v,i.u_matrix),u_texture:new a.aL(v,i.u_texture),u_terrain_coords_id:new a.aM(v,i.u_terrain_coords_id),u_ele_delta:new a.aM(v,i.u_ele_delta)})};class mA{constructor(i,c,d){this.context=i;const y=i.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const To={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class yA{constructor(i,c,d,y){this.length=c.length,this.attributes=d,this.itemSize=c.bytesPerElement,this.dynamicDraw=y,this.context=i;const b=i.gl;this.buffer=b.createBuffer(),i.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let d=0;d<this.attributes.length;d++){const y=c.attributes[this.attributes[d].name];y!==void 0&&i.enableVertexAttribArray(y)}}setVertexAttribPointers(i,c,d){for(let y=0;y<this.attributes.length;y++){const b=this.attributes[y],E=c.attributes[b.name];E!==void 0&&i.vertexAttribPointer(E,b.components,i[To[b.type]],!1,this.itemSize,b.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const pa=new WeakMap;function $n(v){var i;if(pa.has(v))return pa.get(v);{const c=(i=v.getParameter(v.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return pa.set(v,c),c}}class Mr{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class vA extends Mr{getDefault(){return a.aT.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Zi extends Mr{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class yn extends Mr{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class $a extends Mr{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Uo extends Mr{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Po extends Mr{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class _A extends Mr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class wA extends Mr{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Es extends Mr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class da extends Mr{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class il extends Mr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Xs extends Mr{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Is extends Mr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class bA extends Mr{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Ls extends Mr{getDefault(){return a.aT.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Rc extends Mr{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class xA extends Mr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class zc extends Mr{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class nl extends Mr{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class sl extends Mr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Zl extends Mr{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Wa extends Mr{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Xa extends Mr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Qo extends Mr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class BA extends Mr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Za extends Mr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Mo extends Mr{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Ya extends Mr{getDefault(){return null}set(i){var c;if(i===this.current&&!this.dirty)return;const d=this.gl;$n(d)?d.bindVertexArray(i):(c=d.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class ko extends Mr{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Wn extends Mr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class CA extends Mr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class P extends Mr{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class J extends P{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Ce extends P{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class qe extends P{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Ke{constructor(i,c,d,y,b){this.context=i,this.width=c,this.height=d;const E=i.gl,L=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new J(i,L),y)this.depthAttachment=b?new qe(i,L):new Ce(i,L);else if(b)throw new Error("Stencil cannot be setted without depth");if(E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const d=this.depthAttachment.get();d&&i.deleteRenderbuffer(d)}i.deleteFramebuffer(this.framebuffer)}}class ct{constructor(i,c,d){this.blendFunction=i,this.blendColor=c,this.mask=d}}ct.Replace=[1,0],ct.disabled=new ct(ct.Replace,a.aT.transparent,[!1,!1,!1,!1]),ct.unblended=new ct(ct.Replace,a.aT.transparent,[!0,!0,!0,!0]),ct.alphaBlended=new ct([1,771],a.aT.transparent,[!0,!0,!0,!0]);class Tt{constructor(i){var c,d;if(this.gl=i,this.clearColor=new vA(this),this.clearDepth=new Zi(this),this.clearStencil=new yn(this),this.colorMask=new $a(this),this.depthMask=new Uo(this),this.stencilMask=new Po(this),this.stencilFunc=new _A(this),this.stencilOp=new wA(this),this.stencilTest=new Es(this),this.depthRange=new da(this),this.depthTest=new il(this),this.depthFunc=new Xs(this),this.blend=new Is(this),this.blendFunc=new bA(this),this.blendColor=new Ls(this),this.blendEquation=new Rc(this),this.cullFace=new xA(this),this.cullFaceSide=new zc(this),this.frontFace=new nl(this),this.program=new sl(this),this.activeTexture=new Zl(this),this.viewport=new Wa(this),this.bindFramebuffer=new Xa(this),this.bindRenderbuffer=new Qo(this),this.bindTexture=new BA(this),this.bindVertexBuffer=new Za(this),this.bindElementBuffer=new Mo(this),this.bindVertexArray=new Ya(this),this.pixelStoreUnpack=new ko(this),this.pixelStoreUnpackPremultiplyAlpha=new Wn(this),this.pixelStoreUnpackFlipY=new CA(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),$n(i)){this.HALF_FLOAT=i.HALF_FLOAT;const y=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=i.RGBA16F)!==null&&c!==void 0?c:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(d=i.RGB16F)!==null&&d!==void 0?d:y==null?void 0:y.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const y=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new mA(this,i,c)}createVertexBuffer(i,c,d){return new yA(this,i,c,d)}createRenderbuffer(i,c,d){const y=this.gl,b=y.createRenderbuffer();return this.bindRenderbuffer.set(b),y.renderbufferStorage(y.RENDERBUFFER,i,c,d),this.bindRenderbuffer.set(null),b}createFramebuffer(i,c,d,y){return new Ke(this,i,c,d,y)}clear(i){let{color:c,depth:d,stencil:y}=i;const b=this.gl;let E=0;c&&(E|=b.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(E|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),y!==void 0&&(E|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),b.clear(E)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){a.aG(i.blendFunction,ct.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return $n(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var c;return $n(this.gl)?this.gl.deleteVertexArray(i):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class wt{constructor(i,c,d){this.func=i,this.mask=c,this.range=d}}wt.ReadOnly=!1,wt.ReadWrite=!0,wt.disabled=new wt(519,wt.ReadOnly,[0,1]);const mr=7680;class ar{constructor(i,c,d,y,b,E){this.test=i,this.ref=c,this.mask=d,this.fail=y,this.depthFail=b,this.pass=E}}ar.disabled=new ar({func:519,mask:0},0,0,mr,mr,mr);class cr{constructor(i,c,d){this.enable=i,this.mode=c,this.frontFace=d}}let Kr;function Li(v,i,c,d,y,b,E){const L=v.context,k=L.gl,O=v.useProgram("collisionBox"),H=[];let $=0,se=0;for(let N=0;N<d.length;N++){const z=d[N],G=i.getTile(z),X=G.getBucket(c);if(!X)continue;let re=z.posMatrix;y[0]===0&&y[1]===0||(re=v.translatePosMatrix(z.posMatrix,G,y,b));const de=E?X.textCollisionBox:X.iconCollisionBox,we=X.collisionCircleArray;if(we.length>0){const Ie=a.Z(),Pe=re;a.aU(Ie,X.placementInvProjMatrix,v.transform.glCoordMatrix),a.aU(Ie,Ie,X.placementViewportMatrix),H.push({circleArray:we,circleOffset:se,transform:Pe,invTransform:Ie,coord:z}),$+=we.length/4,se=$}de&&O.draw(L,k.LINES,wt.disabled,ar.disabled,v.colorModeForRenderPass(),cr.disabled,So(re,v.transform,G),v.style.map.terrain&&v.style.map.terrain.getTerrainData(z),c.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,null,v.transform.zoom,null,null,de.collisionVertexBuffer)}if(!E||!H.length)return;const fe=v.useProgram("collisionCircle"),f=new a.aV;f.resize(4*$),f._trim();let x=0;for(const N of H)for(let z=0;z<N.circleArray.length/4;z++){const G=4*z,X=N.circleArray[G+0],re=N.circleArray[G+1],de=N.circleArray[G+2],we=N.circleArray[G+3];f.emplace(x++,X,re,de,we,0),f.emplace(x++,X,re,de,we,1),f.emplace(x++,X,re,de,we,2),f.emplace(x++,X,re,de,we,3)}(!Kr||Kr.length<2*$)&&(Kr=function(N){const z=2*N,G=new a.aX;G.resize(z),G._trim();for(let X=0;X<z;X++){const re=6*X;G.uint16[re+0]=4*X+0,G.uint16[re+1]=4*X+1,G.uint16[re+2]=4*X+2,G.uint16[re+3]=4*X+2,G.uint16[re+4]=4*X+3,G.uint16[re+5]=4*X+0}return G}($));const C=L.createIndexBuffer(Kr,!0),M=L.createVertexBuffer(f,a.aW.members,!0);for(const N of H){const z={u_matrix:N.transform,u_inv_matrix:N.invTransform,u_camera_to_center_distance:(R=v.transform).cameraToCenterDistance,u_viewport_size:[R.width,R.height]};fe.draw(L,k.TRIANGLES,wt.disabled,ar.disabled,v.colorModeForRenderPass(),cr.disabled,z,v.style.map.terrain&&v.style.map.terrain.getTerrainData(N.coord),c.id,M,C,a.S.simpleSegment(0,2*N.circleOffset,N.circleArray.length,N.circleArray.length/2),null,v.transform.zoom,null,null,null)}var R;M.destroy(),C.destroy()}cr.disabled=new cr(!1,1029,2305),cr.backCCW=new cr(!0,1029,2305);const ki=a.ao(new Float32Array(16));function Di(v,i,c,d,y,b){const{horizontalAlign:E,verticalAlign:L}=a.au(v);return new a.P((-(E-.5)*i/y+d[0])*b,(-(L-.5)*c/y+d[1])*b)}function Yi(v,i,c,d,y,b,E,L,k,O,H){const $=v.text.placedSymbolArray,se=v.text.dynamicLayoutVertexArray,fe=v.icon.dynamicLayoutVertexArray,f={};se.clear();for(let x=0;x<$.length;x++){const C=$.get(x),M=C.hidden||!C.crossTileID||v.allowVerticalPlacement&&!C.placedOrientation?null:d[C.crossTileID];if(M){const R=new a.P(C.anchorX,C.anchorY),N=Tr(R,c?E:b,H),z=Dr(y.cameraToCenterDistance,N.signedDistanceFromCamera);let G=a.aj(v.textSizeData,k,C)*z/a.ap;c&&(G*=v.tilePixelRatio/L);const{width:X,height:re,anchor:de,textOffset:we,textBoxScale:Ie}=M,Pe=Di(de,X,re,we,Ie,G),ut=c?Tr(R.add(Pe),b,H).point:N.point.add(i?Pe.rotate(-y.angle):Pe),He=v.allowVerticalPlacement&&C.placedOrientation===a.ai.vertical?Math.PI/2:0;for(let Se=0;Se<C.numGlyphs;Se++)a.ak(se,ut,He);O&&C.associatedIconIndex>=0&&(f[C.associatedIconIndex]={shiftedAnchor:ut,angle:He})}else le(C.numGlyphs,se)}if(O){fe.clear();const x=v.icon.placedSymbolArray;for(let C=0;C<x.length;C++){const M=x.get(C);if(M.hidden)le(M.numGlyphs,fe);else{const R=f[C];if(R)for(let N=0;N<M.numGlyphs;N++)a.ak(fe,R.shiftedAnchor,R.angle);else le(M.numGlyphs,fe)}}v.icon.dynamicLayoutVertexBuffer.updateData(fe)}v.text.dynamicLayoutVertexBuffer.updateData(se)}function qi(v,i,c){return c.iconsInText&&i?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function Xn(v,i,c,d,y,b,E,L,k,O,H,$){const se=v.context,fe=se.gl,f=v.transform,x=L==="map",C=k==="map",M=L!=="viewport"&&c.layout.get("symbol-placement")!=="point",R=x&&!C&&!M,N=!c.layout.get("symbol-sort-key").isConstant();let z=!1;const G=v.depthModeForSublayer(0,wt.ReadOnly),X=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),re=[];for(const de of d){const we=i.getTile(de),Ie=we.getBucket(c);if(!Ie)continue;const Pe=y?Ie.text:Ie.icon;if(!Pe||!Pe.segments.get().length||!Pe.hasVisibleVertices)continue;const ut=Pe.programConfigurations.get(c.id),He=y||Ie.sdfIcons,Se=y?Ie.textSizeData:Ie.iconSizeData,Fe=C||f.pitch!==0,dt=v.useProgram(qi(He,y,Ie),ut),pt=a.ah(Se,f.zoom),at=v.style.map.terrain&&v.style.map.terrain.getTerrainData(de);let _t,Et,Wt,kt,Fr=[0,0],Er=null;if(y)Et=we.glyphAtlasTexture,Wt=fe.LINEAR,_t=we.glyphAtlasTexture.size,Ie.iconsInText&&(Fr=we.imageAtlasTexture.size,Er=we.imageAtlasTexture,kt=Fe||v.options.rotating||v.options.zooming||Se.kind==="composite"||Se.kind==="camera"?fe.LINEAR:fe.NEAREST);else{const li=c.layout.get("icon-size").constantOr(0)!==1||Ie.iconsNeedLinear;Et=we.imageAtlasTexture,Wt=He||v.options.rotating||v.options.zooming||li||Fe?fe.LINEAR:fe.NEAREST,_t=we.imageAtlasTexture.size}const kr=Oe(we,1,v.transform.zoom),pr=vt(de.posMatrix,C,x,v.transform,kr),ei=Cr(de.posMatrix,C,x,v.transform,kr),Zr=X&&Ie.hasTextData(),Ir=c.layout.get("icon-text-fit")!=="none"&&Zr&&Ie.hasIconData();if(M){const li=v.style.map.terrain?(pi,ri)=>v.style.map.terrain.getElevation(de,pi,ri):null,ti=c.layout.get("text-rotation-alignment")==="map";xt(Ie,de.posMatrix,v,y,pr,ei,C,O,ti,li)}const Bi=v.translatePosMatrix(de.posMatrix,we,b,E),Ji=M||y&&X||Ir?ki:pr,si=v.translatePosMatrix(ei,we,b,E,!0),hi=He&&c.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let zr;zr=He?Ie.iconsInText?ha(Se.kind,pt,R,C,v,Bi,Ji,si,_t,Fr):Fs(Se.kind,pt,R,C,v,Bi,Ji,si,y,_t,!0):rl(Se.kind,pt,R,C,v,Bi,Ji,si,y,_t);const en={program:dt,buffers:Pe,uniformValues:zr,atlasTexture:Et,atlasTextureIcon:Er,atlasInterpolation:Wt,atlasInterpolationIcon:kt,isSDF:He,hasHalo:hi};if(N&&Ie.canOverlap){z=!0;const li=Pe.segments.get();for(const ti of li)re.push({segments:new a.S([ti]),sortKey:ti.sortKey,state:en,terrainData:at})}else re.push({segments:Pe.segments,sortKey:0,state:en,terrainData:at})}z&&re.sort((de,we)=>de.sortKey-we.sortKey);for(const de of re){const we=de.state;if(se.activeTexture.set(fe.TEXTURE0),we.atlasTexture.bind(we.atlasInterpolation,fe.CLAMP_TO_EDGE),we.atlasTextureIcon&&(se.activeTexture.set(fe.TEXTURE1),we.atlasTextureIcon&&we.atlasTextureIcon.bind(we.atlasInterpolationIcon,fe.CLAMP_TO_EDGE)),we.isSDF){const Ie=we.uniformValues;we.hasHalo&&(Ie.u_is_halo=1,Zn(we.buffers,de.segments,c,v,we.program,G,H,$,Ie,de.terrainData)),Ie.u_is_halo=0}Zn(we.buffers,de.segments,c,v,we.program,G,H,$,we.uniformValues,de.terrainData)}}function Zn(v,i,c,d,y,b,E,L,k,O){const H=d.context;y.draw(H,H.gl.TRIANGLES,b,E,L,cr.disabled,k,O,c.id,v.layoutVertexBuffer,v.indexBuffer,i,c.paint,d.transform.zoom,v.programConfigurations.get(c.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function As(v,i,c,d,y){if(!c||!d||!d.imageAtlas)return;const b=d.imageAtlas.patternPositions;let E=b[c.to.toString()],L=b[c.from.toString()];if(!E&&L&&(E=L),!L&&E&&(L=E),!E||!L){const k=y.getPaintProperty(i);E=b[k],L=b[k]}E&&L&&v.setConstantPatternPositions(E,L)}function Ja(v,i,c,d,y,b,E){const L=v.context.gl,k="fill-pattern",O=c.paint.get(k),H=O&&O.constantOr(1),$=c.getCrossfadeParameters();let se,fe,f,x,C;E?(fe=H&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",se=L.LINES):(fe=H?"fillPattern":"fill",se=L.TRIANGLES);const M=O.constantOr(null);for(const R of d){const N=i.getTile(R);if(H&&!N.patternsLoaded())continue;const z=N.getBucket(c);if(!z)continue;const G=z.programConfigurations.get(c.id),X=v.useProgram(fe,G),re=v.style.map.terrain&&v.style.map.terrain.getTerrainData(R);H&&(v.context.activeTexture.set(L.TEXTURE0),N.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),G.updatePaintBuffers($)),As(G,k,M,N,c);const de=re?R:null,we=v.translatePosMatrix(de?de.posMatrix:R.posMatrix,N,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(E){x=z.indexBuffer2,C=z.segments2;const Ie=[L.drawingBufferWidth,L.drawingBufferHeight];f=fe==="fillOutlinePattern"&&H?Co(we,v,$,N,Ie):gA(we,Ie)}else x=z.indexBuffer,C=z.segments,f=H?fA(we,v,$,N):ql(we);X.draw(v.context,se,y,v.stencilModeForClipping(R),b,cr.disabled,f,re,c.id,z.layoutVertexBuffer,x,C,c.paint,v.transform.zoom,G)}}function Ta(v,i,c,d,y,b,E){const L=v.context,k=L.gl,O="fill-extrusion-pattern",H=c.paint.get(O),$=H.constantOr(1),se=c.getCrossfadeParameters(),fe=c.paint.get("fill-extrusion-opacity"),f=H.constantOr(null);for(const x of d){const C=i.getTile(x),M=C.getBucket(c);if(!M)continue;const R=v.style.map.terrain&&v.style.map.terrain.getTerrainData(x),N=M.programConfigurations.get(c.id),z=v.useProgram($?"fillExtrusionPattern":"fillExtrusion",N);$&&(v.context.activeTexture.set(k.TEXTURE0),C.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),N.updatePaintBuffers(se)),As(N,O,f,C,c);const G=v.translatePosMatrix(x.posMatrix,C,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),X=c.paint.get("fill-extrusion-vertical-gradient"),re=$?$s(G,v,X,fe,x,se,C):Bo(G,v,X,fe);z.draw(L,L.gl.TRIANGLES,y,b,E,cr.backCCW,re,R,c.id,M.layoutVertexBuffer,M.indexBuffer,M.segments,c.paint,v.transform.zoom,N,v.style.map.terrain&&M.centroidVertexBuffer)}}function al(v,i,c,d,y,b,E){const L=v.context,k=L.gl,O=c.fbo;if(!O)return;const H=v.useProgram("hillshade"),$=v.style.map.terrain&&v.style.map.terrain.getTerrainData(i);L.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,O.colorAttachment.get()),H.draw(L,k.TRIANGLES,y,b,E,cr.disabled,((se,fe,f,x)=>{const C=f.paint.get("hillshade-shadow-color"),M=f.paint.get("hillshade-highlight-color"),R=f.paint.get("hillshade-accent-color");let N=f.paint.get("hillshade-illumination-direction")*(Math.PI/180);f.paint.get("hillshade-illumination-anchor")==="viewport"&&(N-=se.transform.angle);const z=!se.options.moving;return{u_matrix:x?x.posMatrix:se.transform.calculatePosMatrix(fe.tileID.toUnwrapped(),z),u_image:0,u_latrange:Ws(0,fe.tileID),u_light:[f.paint.get("hillshade-exaggeration"),N],u_shadow:C,u_highlight:M,u_accent:R}})(v,c,d,$?i:null),$,d.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function eo(v,i,c,d,y,b){const E=v.context,L=E.gl,k=i.dem;if(k&&k.data){const O=k.dim,H=k.stride,$=k.getPixels();if(E.activeTexture.set(L.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||v.getTileTexture(H),i.demTexture){const fe=i.demTexture;fe.update($,{premultiply:!1}),fe.bind(L.NEAREST,L.CLAMP_TO_EDGE)}else i.demTexture=new $e(E,$,L.RGBA,{premultiply:!1}),i.demTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE);E.activeTexture.set(L.TEXTURE0);let se=i.fbo;if(!se){const fe=new $e(E,{width:O,height:O,data:null},L.RGBA);fe.bind(L.LINEAR,L.CLAMP_TO_EDGE),se=i.fbo=E.createFramebuffer(O,O,!0,!1),se.colorAttachment.set(fe.texture)}E.bindFramebuffer.set(se.framebuffer),E.viewport.set([0,0,O,O]),v.useProgram("hillshadePrepare").draw(E,L.TRIANGLES,d,y,b,cr.disabled,((fe,f)=>{const x=f.stride,C=a.Z();return a.aS(C,0,a.N,-a.N,0,0,1),a.$(C,C,[0,-a.N,0]),{u_matrix:C,u_image:1,u_dimension:[x,x],u_zoom:fe.overscaledZ,u_unpack:f.getUnpackVector()}})(i.tileID,k),null,c.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function ol(v,i,c,d,y,b){const E=d.paint.get("raster-fade-duration");if(!b&&E>0){const L=a.h.now(),k=(L-v.timeAdded)/E,O=i?(L-i.timeAdded)/E:-1,H=c.getSource(),$=y.coveringZoomLevel({tileSize:H.tileSize,roundZoom:H.roundZoom}),se=!i||Math.abs(i.tileID.overscaledZ-$)>Math.abs(v.tileID.overscaledZ-$),fe=se&&v.refreshedUponExpiration?1:a.ad(se?k:1-O,0,1);return v.refreshedUponExpiration&&k>=1&&(v.refreshedUponExpiration=!1),i?{opacity:1,mix:1-fe}:{opacity:fe,mix:0}}return{opacity:1,mix:0}}const SA=new a.aT(1,0,0,1),Ua=new a.aT(0,1,0,1),Ln=new a.aT(0,0,1,1),Do=new a.aT(1,0,1,1),No=new a.aT(0,1,1,1);function fa(v,i,c,d){vn(v,0,i+c/2,v.transform.width,c,d)}function to(v,i,c,d){vn(v,i-c/2,0,c,v.transform.height,d)}function vn(v,i,c,d,y,b){const E=v.context,L=E.gl;L.enable(L.SCISSOR_TEST),L.scissor(i*v.pixelRatio,c*v.pixelRatio,d*v.pixelRatio,y*v.pixelRatio),E.clear({color:b}),L.disable(L.SCISSOR_TEST)}function Yl(v,i,c){const d=v.context,y=d.gl,b=c.posMatrix,E=v.useProgram("debug"),L=wt.disabled,k=ar.disabled,O=v.colorModeForRenderPass(),H="$debug",$=v.style.map.terrain&&v.style.map.terrain.getTerrainData(c);d.activeTexture.set(y.TEXTURE0);const se=i.getTileByID(c.key).latestRawTileData,fe=Math.floor((se&&se.byteLength||0)/1024),f=i.getTile(c).tileSize,x=512/Math.min(f,512)*(c.overscaledZ/v.transform.zoom)*.5;let C=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(C+=` => ${c.overscaledZ}`),function(M,R){M.initDebugOverlayCanvas();const N=M.debugOverlayCanvas,z=M.context.gl,G=M.debugOverlayCanvas.getContext("2d");G.clearRect(0,0,N.width,N.height),G.shadowColor="white",G.shadowBlur=2,G.lineWidth=1.5,G.strokeStyle="white",G.textBaseline="top",G.font="bold 36px Open Sans, sans-serif",G.fillText(R,5,5),G.strokeText(R,5,5),M.debugOverlayTexture.update(N),M.debugOverlayTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE)}(v,`${C} ${fe}kB`),E.draw(d,y.TRIANGLES,L,k,ct.alphaBlended,cr.disabled,Fo(b,a.aT.transparent,x),null,H,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),E.draw(d,y.LINE_STRIP,L,k,O,cr.disabled,Fo(b,a.aT.red),$,H,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function yi(v,i,c){const d=v.context,y=d.gl,b=v.colorModeForRenderPass(),E=new wt(y.LEQUAL,wt.ReadWrite,v.depthRangeFor3D),L=v.useProgram("terrain"),k=i.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,v.width,v.height]);for(const O of c){const H=v.renderToTexture.getTexture(O),$=i.getTerrainData(O.tileID);d.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,H.texture);const se={u_matrix:v.transform.calculatePosMatrix(O.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(v.transform.zoom)};L.draw(d,y.TRIANGLES,E,ar.disabled,b,cr.backCCW,se,$,"terrain",k.vertexBuffer,k.indexBuffer,k.segments)}}class ga{constructor(i,c){this.context=new Tt(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.Z(),renderTime:0},this.setup(),this.numSublayers=Ut.maxUnderzooming+Ut.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new pA}resize(i,c,d){if(this.width=Math.floor(i*d),this.height=Math.floor(c*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const i=this.context,c=new a.a_;c.emplaceBack(0,0),c.emplaceBack(a.N,0),c.emplaceBack(0,a.N),c.emplaceBack(a.N,a.N),this.tileExtentBuffer=i.createVertexBuffer(c,xo.members),this.tileExtentSegments=a.S.simpleSegment(0,0,4,2);const d=new a.a_;d.emplaceBack(0,0),d.emplaceBack(a.N,0),d.emplaceBack(0,a.N),d.emplaceBack(a.N,a.N),this.debugBuffer=i.createVertexBuffer(d,xo.members),this.debugSegments=a.S.simpleSegment(0,0,4,5);const y=new a.V;y.emplaceBack(0,0,0,0),y.emplaceBack(a.N,0,a.N,0),y.emplaceBack(0,a.N,0,a.N),y.emplaceBack(a.N,a.N,a.N,a.N),this.rasterBoundsBuffer=i.createVertexBuffer(y,ot.members),this.rasterBoundsSegments=a.S.simpleSegment(0,0,4,2);const b=new a.a_;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(b,xo.members),this.viewportSegments=a.S.simpleSegment(0,0,4,2);const E=new a.a$;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(E);const L=new a.b0;L.emplaceBack(0,1,2),L.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(L);const k=this.context.gl;this.stencilClearMode=new ar({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=a.Z();a.aS(d,0,this.width,this.height,0,0,1),a.a0(d,d,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,wt.disabled,this.stencilClearMode,ct.disabled,cr.disabled,Kl(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const d=this.context,y=d.gl;this.nextStencilID+c.length>256&&this.clearStencil(),d.setColorMode(ct.disabled),d.setDepthMode(wt.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const E of c){const L=this._tileClippingMaskIDs[E.key]=this.nextStencilID++,k=this.style.map.terrain&&this.style.map.terrain.getTerrainData(E);b.draw(d,y.TRIANGLES,wt.disabled,new ar({func:y.ALWAYS,mask:0},L,255,y.KEEP,y.KEEP,y.REPLACE),ct.disabled,cr.disabled,Kl(E.posMatrix),k,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new ar({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new ar({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,d=i.sort((E,L)=>L.overscaledZ-E.overscaledZ),y=d[d.length-1].overscaledZ,b=d[0].overscaledZ-y+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const E={};for(let L=0;L<b;L++)E[L+y]=new ar({func:c.GEQUAL,mask:255},L+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=b,[E,d]}return[{[y]:ar.disabled},d]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new ct([i.CONSTANT_COLOR,i.ONE],new a.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ct.unblended:ct.alphaBlended}depthModeForSublayer(i,c,d){if(!this.opaquePassEnabledForLayer())return wt.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new wt(d||this.context.gl.LEQUAL,c,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(a.h.now()),this.imageManager.beginFrame();const d=this.style._order,y=this.style.sourceCaches,b={},E={},L={};for(const k in y){const O=y[k];O.used&&O.prepare(this.context),b[k]=O.getVisibleCoordinates(),E[k]=b[k].slice().reverse(),L[k]=O.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let k=0;k<d.length;k++)if(this.style._layers[d[k]].is3D()){this.opaquePassCutoff=k;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const k=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||k.length)&&(a.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(O,H){const $=O.context,se=$.gl,fe=ct.unblended,f=new wt(se.LEQUAL,wt.ReadWrite,[0,1]),x=H.getTerrainMesh(),C=H.sourceCache.getRenderableTiles(),M=O.useProgram("terrainDepth");$.bindFramebuffer.set(H.getFramebuffer("depth").framebuffer),$.viewport.set([0,0,O.width/devicePixelRatio,O.height/devicePixelRatio]),$.clear({color:a.aT.transparent,depth:1});for(const R of C){const N=H.getTerrainData(R.tileID),z={u_matrix:O.transform.calculatePosMatrix(R.tileID.toUnwrapped()),u_ele_delta:H.getMeshFrameDelta(O.transform.zoom)};M.draw($,se.TRIANGLES,f,ar.disabled,fe,cr.backCCW,z,N,"terrain",x.vertexBuffer,x.indexBuffer,x.segments)}$.bindFramebuffer.set(null),$.viewport.set([0,0,O.width,O.height])}(this,this.style.map.terrain),function(O,H){const $=O.context,se=$.gl,fe=ct.unblended,f=new wt(se.LEQUAL,wt.ReadWrite,[0,1]),x=H.getTerrainMesh(),C=H.getCoordsTexture(),M=H.sourceCache.getRenderableTiles(),R=O.useProgram("terrainCoords");$.bindFramebuffer.set(H.getFramebuffer("coords").framebuffer),$.viewport.set([0,0,O.width/devicePixelRatio,O.height/devicePixelRatio]),$.clear({color:a.aT.transparent,depth:1}),H.coordsIndex=[];for(const N of M){const z=H.getTerrainData(N.tileID);$.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,C.texture);const G={u_matrix:O.transform.calculatePosMatrix(N.tileID.toUnwrapped()),u_terrain_coords_id:(255-H.coordsIndex.length)/255,u_texture:0,u_ele_delta:H.getMeshFrameDelta(O.transform.zoom)};R.draw($,se.TRIANGLES,f,ar.disabled,fe,cr.backCCW,G,z,"terrain",x.vertexBuffer,x.indexBuffer,x.segments),H.coordsIndex.push(N.tileID.key)}$.bindFramebuffer.set(null),$.viewport.set([0,0,O.width,O.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const k of d){const O=this.style._layers[k];if(!O.hasOffscreenPass()||O.isHidden(this.transform.zoom))continue;const H=E[O.source];(O.type==="custom"||H.length)&&this.renderLayer(this,y[O.source],O,H)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?a.aT.black:a.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const k=this.style._layers[d[this.currentLayer]],O=y[k.source],H=b[k.source];this._renderTileClippingMasks(k,H),this.renderLayer(this,O,k,H)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const k=this.style._layers[d[this.currentLayer]],O=y[k.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(k))continue;const H=(k.type==="symbol"?L:E)[k.source];this._renderTileClippingMasks(k,b[k.source]),this.renderLayer(this,O,k,H)}if(this.options.showTileBoundaries){const k=function(O,H){let $=null;const se=Object.values(O._layers).flatMap(C=>C.source&&!C.isHidden(H)?[O.sourceCaches[C.source]]:[]),fe=se.filter(C=>C.getSource().type==="vector"),f=se.filter(C=>C.getSource().type!=="vector"),x=C=>{(!$||$.getSource().maxzoom<C.getSource().maxzoom)&&($=C)};return fe.forEach(C=>x(C)),$||f.forEach(C=>x(C)),$}(this.style,this.transform.zoom);k&&function(O,H,$){for(let se=0;se<$.length;se++)Yl(O,H,$[se])}(this,k,k.getVisibleCoordinates())}this.options.showPadding&&function(k){const O=k.transform.padding;fa(k,k.transform.height-(O.top||0),3,SA),fa(k,O.bottom||0,3,Ua),to(k,O.left||0,3,Ln),to(k,k.transform.width-(O.right||0),3,Do);const H=k.transform.centerPoint;(function($,se,fe,f){vn($,se-1,fe-10,2,20,f),vn($,se-10,fe-1,20,2,f)})(k,H.x,k.transform.height-H.y,No)}(this),this.context.setDefault()}renderLayer(i,c,d,y){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(y||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(b,E,L,k,O){if(b.renderPass!=="translucent")return;const H=ar.disabled,$=b.colorModeForRenderPass();(L._unevaluatedLayout.hasValue("text-variable-anchor")||L._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(se,fe,f,x,C,M,R){const N=fe.transform,z=C==="map",G=M==="map";for(const X of se){const re=x.getTile(X),de=re.getBucket(f);if(!de||!de.text||!de.text.segments.get().length)continue;const we=a.ah(de.textSizeData,N.zoom),Ie=Oe(re,1,fe.transform.zoom),Pe=vt(X.posMatrix,G,z,fe.transform,Ie),ut=f.layout.get("icon-text-fit")!=="none"&&de.hasIconData();if(we){const He=Math.pow(2,N.zoom-re.tileID.overscaledZ);Yi(de,z,G,R,N,Pe,X.posMatrix,He,we,ut,fe.style.map.terrain?(Se,Fe)=>fe.style.map.terrain.getElevation(X,Se,Fe):null)}}}(k,b,L,E,L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),O),L.paint.get("icon-opacity").constantOr(1)!==0&&Xn(b,E,L,k,!1,L.paint.get("icon-translate"),L.paint.get("icon-translate-anchor"),L.layout.get("icon-rotation-alignment"),L.layout.get("icon-pitch-alignment"),L.layout.get("icon-keep-upright"),H,$),L.paint.get("text-opacity").constantOr(1)!==0&&Xn(b,E,L,k,!0,L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),L.layout.get("text-keep-upright"),H,$),E.map.showCollisionBoxes&&(Li(b,E,L,k,L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),!0),Li(b,E,L,k,L.paint.get("icon-translate"),L.paint.get("icon-translate-anchor"),!1))})(i,c,d,y,this.style.placement.variableOffsets);break;case"circle":(function(b,E,L,k){if(b.renderPass!=="translucent")return;const O=L.paint.get("circle-opacity"),H=L.paint.get("circle-stroke-width"),$=L.paint.get("circle-stroke-opacity"),se=!L.layout.get("circle-sort-key").isConstant();if(O.constantOr(1)===0&&(H.constantOr(1)===0||$.constantOr(1)===0))return;const fe=b.context,f=fe.gl,x=b.depthModeForSublayer(0,wt.ReadOnly),C=ar.disabled,M=b.colorModeForRenderPass(),R=[];for(let N=0;N<k.length;N++){const z=k[N],G=E.getTile(z),X=G.getBucket(L);if(!X)continue;const re=X.programConfigurations.get(L.id),de=b.useProgram("circle",re),we=X.layoutVertexBuffer,Ie=X.indexBuffer,Pe=b.style.map.terrain&&b.style.map.terrain.getTerrainData(z),ut={programConfiguration:re,program:de,layoutVertexBuffer:we,indexBuffer:Ie,uniformValues:ua(b,z,G,L),terrainData:Pe};if(se){const He=X.segments.get();for(const Se of He)R.push({segments:new a.S([Se]),sortKey:Se.sortKey,state:ut})}else R.push({segments:X.segments,sortKey:0,state:ut})}se&&R.sort((N,z)=>N.sortKey-z.sortKey);for(const N of R){const{programConfiguration:z,program:G,layoutVertexBuffer:X,indexBuffer:re,uniformValues:de,terrainData:we}=N.state;G.draw(fe,f.TRIANGLES,x,C,M,cr.disabled,de,we,L.id,X,re,N.segments,L.paint,b.transform.zoom,z)}})(i,c,d,y);break;case"heatmap":(function(b,E,L,k){if(L.paint.get("heatmap-opacity")!==0)if(b.renderPass==="offscreen"){const O=b.context,H=O.gl,$=ar.disabled,se=new ct([H.ONE,H.ONE],a.aT.transparent,[!0,!0,!0,!0]);(function(fe,f,x){const C=fe.gl;fe.activeTexture.set(C.TEXTURE1),fe.viewport.set([0,0,f.width/4,f.height/4]);let M=x.heatmapFbo;if(M)C.bindTexture(C.TEXTURE_2D,M.colorAttachment.get()),fe.bindFramebuffer.set(M.framebuffer);else{const R=C.createTexture();C.bindTexture(C.TEXTURE_2D,R),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.LINEAR),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.LINEAR),M=x.heatmapFbo=fe.createFramebuffer(f.width/4,f.height/4,!1,!1),function(N,z,G,X){var re,de;const we=N.gl,Ie=(re=N.HALF_FLOAT)!==null&&re!==void 0?re:we.UNSIGNED_BYTE,Pe=(de=N.RGBA16F)!==null&&de!==void 0?de:we.RGBA;we.texImage2D(we.TEXTURE_2D,0,Pe,z.width/4,z.height/4,0,we.RGBA,Ie,null),X.colorAttachment.set(G)}(fe,f,R,M)}})(O,b,L),O.clear({color:a.aT.transparent});for(let fe=0;fe<k.length;fe++){const f=k[fe];if(E.hasRenderableParent(f))continue;const x=E.getTile(f),C=x.getBucket(L);if(!C)continue;const M=C.programConfigurations.get(L.id),R=b.useProgram("heatmap",M),{zoom:N}=b.transform;R.draw(O,H.TRIANGLES,wt.disabled,$,se,cr.disabled,Oc(f.posMatrix,x,N,L.paint.get("heatmap-intensity")),null,L.id,C.layoutVertexBuffer,C.indexBuffer,C.segments,L.paint,b.transform.zoom,M)}O.viewport.set([0,0,b.width,b.height])}else b.renderPass==="translucent"&&(b.context.setColorMode(b.colorModeForRenderPass()),function(O,H){const $=O.context,se=$.gl,fe=H.heatmapFbo;if(!fe)return;$.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,fe.colorAttachment.get()),$.activeTexture.set(se.TEXTURE1);let f=H.colorRampTexture;f||(f=H.colorRampTexture=new $e($,H.colorRamp,se.RGBA)),f.bind(se.LINEAR,se.CLAMP_TO_EDGE),O.useProgram("heatmapTexture").draw($,se.TRIANGLES,wt.disabled,ar.disabled,O.colorModeForRenderPass(),cr.disabled,((x,C,M,R)=>{const N=a.Z();a.aS(N,0,x.width,x.height,0,0,1);const z=x.context.gl;return{u_matrix:N,u_world:[z.drawingBufferWidth,z.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:C.paint.get("heatmap-opacity")}})(O,H),null,H.id,O.viewportBuffer,O.quadTriangleIndexBuffer,O.viewportSegments,H.paint,O.transform.zoom)}(b,L))})(i,c,d,y);break;case"line":(function(b,E,L,k){if(b.renderPass!=="translucent")return;const O=L.paint.get("line-opacity"),H=L.paint.get("line-width");if(O.constantOr(1)===0||H.constantOr(1)===0)return;const $=b.depthModeForSublayer(0,wt.ReadOnly),se=b.colorModeForRenderPass(),fe=L.paint.get("line-dasharray"),f=L.paint.get("line-pattern"),x=f.constantOr(1),C=L.paint.get("line-gradient"),M=L.getCrossfadeParameters(),R=x?"linePattern":fe?"lineSDF":C?"lineGradient":"line",N=b.context,z=N.gl;let G=!0;for(const X of k){const re=E.getTile(X);if(x&&!re.patternsLoaded())continue;const de=re.getBucket(L);if(!de)continue;const we=de.programConfigurations.get(L.id),Ie=b.context.program.get(),Pe=b.useProgram(R,we),ut=G||Pe.program!==Ie,He=b.style.map.terrain&&b.style.map.terrain.getTerrainData(X),Se=f.constantOr(null);if(Se&&re.imageAtlas){const pt=re.imageAtlas,at=pt.patternPositions[Se.to.toString()],_t=pt.patternPositions[Se.from.toString()];at&&_t&&we.setConstantPatternPositions(at,_t)}const Fe=He?X:null,dt=x?$l(b,re,L,M,Fe):fe?gn(b,re,L,fe,M,Fe):C?Eo(b,re,L,de.lineClipsArray.length,Fe):qa(b,re,L,Fe);if(x)N.activeTexture.set(z.TEXTURE0),re.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),we.updatePaintBuffers(M);else if(fe&&(ut||b.lineAtlas.dirty))N.activeTexture.set(z.TEXTURE0),b.lineAtlas.bind(N);else if(C){const pt=de.gradients[L.id];let at=pt.texture;if(L.gradientVersion!==pt.version){let _t=256;if(L.stepInterpolant){const Et=E.getSource().maxzoom,Wt=X.canonical.z===Et?Math.ceil(1<<b.transform.maxZoom-X.canonical.z):1;_t=a.ad(a.aY(de.maxLineLength/a.N*1024*Wt),256,N.maxTextureSize)}pt.gradient=a.aZ({expression:L.gradientExpression(),evaluationKey:"lineProgress",resolution:_t,image:pt.gradient||void 0,clips:de.lineClipsArray}),pt.texture?pt.texture.update(pt.gradient):pt.texture=new $e(N,pt.gradient,z.RGBA),pt.version=L.gradientVersion,at=pt.texture}N.activeTexture.set(z.TEXTURE0),at.bind(L.stepInterpolant?z.NEAREST:z.LINEAR,z.CLAMP_TO_EDGE)}Pe.draw(N,z.TRIANGLES,$,b.stencilModeForClipping(X),se,cr.disabled,dt,He,L.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,L.paint,b.transform.zoom,we,de.layoutVertexBuffer2),G=!1}})(i,c,d,y);break;case"fill":(function(b,E,L,k){const O=L.paint.get("fill-color"),H=L.paint.get("fill-opacity");if(H.constantOr(1)===0)return;const $=b.colorModeForRenderPass(),se=L.paint.get("fill-pattern"),fe=b.opaquePassEnabledForLayer()&&!se.constantOr(1)&&O.constantOr(a.aT.transparent).a===1&&H.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===fe){const f=b.depthModeForSublayer(1,b.renderPass==="opaque"?wt.ReadWrite:wt.ReadOnly);Ja(b,E,L,k,f,$,!1)}if(b.renderPass==="translucent"&&L.paint.get("fill-antialias")){const f=b.depthModeForSublayer(L.getPaintProperty("fill-outline-color")?2:0,wt.ReadOnly);Ja(b,E,L,k,f,$,!0)}})(i,c,d,y);break;case"fill-extrusion":(function(b,E,L,k){const O=L.paint.get("fill-extrusion-opacity");if(O!==0&&b.renderPass==="translucent"){const H=new wt(b.context.gl.LEQUAL,wt.ReadWrite,b.depthRangeFor3D);if(O!==1||L.paint.get("fill-extrusion-pattern").constantOr(1))Ta(b,E,L,k,H,ar.disabled,ct.disabled),Ta(b,E,L,k,H,b.stencilModeFor3D(),b.colorModeForRenderPass());else{const $=b.colorModeForRenderPass();Ta(b,E,L,k,H,ar.disabled,$)}}})(i,c,d,y);break;case"hillshade":(function(b,E,L,k){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;const O=b.context,H=b.depthModeForSublayer(0,wt.ReadOnly),$=b.colorModeForRenderPass(),[se,fe]=b.renderPass==="translucent"?b.stencilConfigForOverlap(k):[{},k];for(const f of fe){const x=E.getTile(f);x.needsHillshadePrepare!==void 0&&x.needsHillshadePrepare&&b.renderPass==="offscreen"?eo(b,x,L,H,ar.disabled,$):b.renderPass==="translucent"&&al(b,f,x,L,H,se[f.overscaledZ],$)}O.viewport.set([0,0,b.width,b.height])})(i,c,d,y);break;case"raster":(function(b,E,L,k){if(b.renderPass!=="translucent"||L.paint.get("raster-opacity")===0||!k.length)return;const O=b.context,H=O.gl,$=E.getSource(),se=b.useProgram("raster"),fe=b.colorModeForRenderPass(),[f,x]=$ instanceof Ct?[{},k]:b.stencilConfigForOverlap(k),C=x[x.length-1].overscaledZ,M=!b.options.moving;for(const R of x){const N=b.depthModeForSublayer(R.overscaledZ-C,L.paint.get("raster-opacity")===1?wt.ReadWrite:wt.ReadOnly,H.LESS),z=E.getTile(R);z.registerFadeDuration(L.paint.get("raster-fade-duration"));const G=E.findLoadedParent(R,0),X=ol(z,G,E,L,b.transform,b.style.map.terrain);let re,de;const we=L.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;O.activeTexture.set(H.TEXTURE0),z.texture.bind(we,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),O.activeTexture.set(H.TEXTURE1),G?(G.texture.bind(we,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),re=Math.pow(2,G.tileID.overscaledZ-z.tileID.overscaledZ),de=[z.tileID.canonical.x*re%1,z.tileID.canonical.y*re%1]):z.texture.bind(we,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST);const Ie=b.style.map.terrain&&b.style.map.terrain.getTerrainData(R),Pe=Ie?R:null,ut=Pe?Pe.posMatrix:b.transform.calculatePosMatrix(R.toUnwrapped(),M),He=Ur(ut,de||[0,0],re||1,X,L);$ instanceof Ct?se.draw(O,H.TRIANGLES,N,ar.disabled,fe,cr.disabled,He,Ie,L.id,$.boundsBuffer,b.quadTriangleIndexBuffer,$.boundsSegments):se.draw(O,H.TRIANGLES,N,f[R.overscaledZ],fe,cr.disabled,He,Ie,L.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}})(i,c,d,y);break;case"background":(function(b,E,L,k){const O=L.paint.get("background-color"),H=L.paint.get("background-opacity");if(H===0)return;const $=b.context,se=$.gl,fe=b.transform,f=fe.tileSize,x=L.paint.get("background-pattern");if(b.isPatternMissing(x))return;const C=!x&&O.a===1&&H===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==C)return;const M=ar.disabled,R=b.depthModeForSublayer(0,C==="opaque"?wt.ReadWrite:wt.ReadOnly),N=b.colorModeForRenderPass(),z=b.useProgram(x?"backgroundPattern":"background"),G=k||fe.coveringTiles({tileSize:f,terrain:b.style.map.terrain});x&&($.activeTexture.set(se.TEXTURE0),b.imageManager.bind(b.context));const X=L.getCrossfadeParameters();for(const re of G){const de=k?re.posMatrix:b.transform.calculatePosMatrix(re.toUnwrapped()),we=x?mn(de,H,b,x,{tileID:re,tileSize:f},X):Lo(de,H,O),Ie=b.style.map.terrain&&b.style.map.terrain.getTerrainData(re);z.draw($,se.TRIANGLES,R,M,N,cr.disabled,we,Ie,L.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}})(i,0,d,y);break;case"custom":(function(b,E,L){const k=b.context,O=L.implementation;if(b.renderPass==="offscreen"){const H=O.prerender;H&&(b.setCustomLayerDefaults(),k.setColorMode(b.colorModeForRenderPass()),H.call(O,k.gl,b.transform.customLayerMatrix()),k.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),k.setColorMode(b.colorModeForRenderPass()),k.setStencilMode(ar.disabled);const H=O.renderingMode==="3d"?new wt(b.context.gl.LEQUAL,wt.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,wt.ReadOnly);k.setDepthMode(H),O.render(k.gl,b.transform.customLayerMatrix()),k.setDirty(),b.setBaseState(),k.bindFramebuffer.set(null)}})(i,0,d)}}translatePosMatrix(i,c,d,y,b){if(!d[0]&&!d[1])return i;const E=b?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(E){const O=Math.sin(E),H=Math.cos(E);d=[d[0]*H-d[1]*O,d[0]*O+d[1]*H]}const L=[b?d[0]:Oe(c,d[0],this.transform.zoom),b?d[1]:Oe(c,d[1],this.transform.zoom),0],k=new Float32Array(16);return a.$(k,i,L),k}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),d=this.imageManager.getPattern(i.to.toString());return!c||!d}useProgram(i,c){this.cache=this.cache||{};const d=i+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new La(this.context,mi[i],c,Ka[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new $e(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:c}=this.context.gl;return this.width!==i||this.height!==c}}class Ti{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,d){const y=Math.pow(2,d),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(L=>{const k=1/(L=a.ag([],L,i))[3]/c*y;return a.b3(L,L,[k,k,1/L[3],k])}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(L=>{const k=function(se,fe){var f=fe[0],x=fe[1],C=fe[2],M=f*f+x*x+C*C;return M>0&&(M=1/Math.sqrt(M)),se[0]=fe[0]*M,se[1]=fe[1]*M,se[2]=fe[2]*M,se}([],function(se,fe,f){var x=fe[0],C=fe[1],M=fe[2],R=f[0],N=f[1],z=f[2];return se[0]=C*z-M*N,se[1]=M*R-x*z,se[2]=x*N-C*R,se}([],Ne([],b[L[0]],b[L[1]]),Ne([],b[L[2]],b[L[1]]))),O=-((H=k)[0]*($=b[L[1]])[0]+H[1]*$[1]+H[2]*$[2]);var H,$;return k.concat(O)});return new Ti(b,E)}}class ma{constructor(i,c){this.min=i,this.max=c,this.center=function(d,y,b){return d[0]=.5*y[0],d[1]=.5*y[1],d[2]=.5*y[2],d}([],function(d,y,b){return d[0]=y[0]+b[0],d[1]=y[1]+b[1],d[2]=y[2]+b[2],d}([],this.min,this.max))}quadrant(i){const c=[i%2==0,i<2],d=Ee(this.min),y=Ee(this.max);for(let b=0;b<c.length;b++)d[b]=c[b]?this.min[b]:this.center[b],y[b]=c[b]?this.center[b]:this.max[b];return y[2]=this.max[2],new ma(d,y)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let y=0;y<i.planes.length;y++){const b=i.planes[y];let E=0;for(let L=0;L<c.length;L++)a.b4(b,c[L])>=0&&E++;if(E===0)return 0;E!==c.length&&(d=!1)}if(d)return 2;for(let y=0;y<3;y++){let b=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(let L=0;L<i.points.length;L++){const k=i.points[L][y]-this.min[y];b=Math.min(b,k),E=Math.max(E,k)}if(E<0||b>this.max[y]-this.min[y])return 0}return 1}}class Oo{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(d)||d<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=d,this.right=y}interpolate(i,c,d){return c.top!=null&&i.top!=null&&(this.top=a.B.number(i.top,c.top,d)),c.bottom!=null&&i.bottom!=null&&(this.bottom=a.B.number(i.bottom,c.bottom,d)),c.left!=null&&i.left!=null&&(this.left=a.B.number(i.left,c.left,d)),c.right!=null&&i.right!=null&&(this.right=a.B.number(i.right,c.right,d)),this}getCenter(i,c){const d=a.ad((this.left+i-this.right)/2,0,i),y=a.ad((this.top+c-this.bottom)/2,0,c);return new a.P(d,y)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Oo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class FA{constructor(i,c,d,y,b){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=b===void 0||!!b,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=d??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Oo,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new FA(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-a.b5(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var d=new a.A(4);return a.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,y,b){var E=y[0],L=y[1],k=y[2],O=y[3],H=Math.sin(b),$=Math.cos(b);d[0]=E*$+k*H,d[1]=L*$+O*H,d[2]=E*-H+k*$,d[3]=L*-H+O*$}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=a.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,d){this._unmodified=!1,this._edgeInsets.interpolate(i,c,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new a.b6(0,i)];if(this._renderWorldCopies){const d=this.pointCoordinate(new a.P(0,0)),y=this.pointCoordinate(new a.P(this.width,0)),b=this.pointCoordinate(new a.P(this.width,this.height)),E=this.pointCoordinate(new a.P(0,this.height)),L=Math.floor(Math.min(d.x,y.x,b.x,E.x)),k=Math.floor(Math.max(d.x,y.x,b.x,E.x)),O=1;for(let H=L-O;H<=k+O;H++)H!==0&&c.push(new a.b6(H,i))}return c}coveringTiles(i){var c,d;let y=this.coveringZoomLevel(i);const b=y;if(i.minzoom!==void 0&&y<i.minzoom)return[];i.maxzoom!==void 0&&y>i.maxzoom&&(y=i.maxzoom);const E=this.pointCoordinate(this.getCameraPoint()),L=a.U.fromLngLat(this.center),k=Math.pow(2,y),O=[k*E.x,k*E.y,0],H=[k*L.x,k*L.y,0],$=Ti.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y);let se=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(se=y);const fe=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,f=N=>({aabb:new ma([N*k,0,0],[(N+1)*k,k,0]),zoom:0,x:0,y:0,wrap:N,fullyVisible:!1}),x=[],C=[],M=y,R=i.reparseOverscaled?b:y;if(this._renderWorldCopies)for(let N=1;N<=3;N++)x.push(f(-N)),x.push(f(N));for(x.push(f(0));x.length>0;){const N=x.pop(),z=N.x,G=N.y;let X=N.fullyVisible;if(!X){const Pe=N.aabb.intersects($);if(Pe===0)continue;X=Pe===2}const re=i.terrain?O:H,de=N.aabb.distanceX(re),we=N.aabb.distanceY(re),Ie=Math.max(Math.abs(de),Math.abs(we));if(N.zoom===M||Ie>fe+(1<<M-N.zoom)-2&&N.zoom>=se){const Pe=M-N.zoom,ut=O[0]-.5-(z<<Pe),He=O[1]-.5-(G<<Pe);C.push({tileID:new a.O(N.zoom===M?R:N.zoom,N.wrap,N.zoom,z,G),distanceSq:Qe([H[0]-.5-z,H[1]-.5-G]),tileDistanceToCamera:Math.sqrt(ut*ut+He*He)})}else for(let Pe=0;Pe<4;Pe++){const ut=(z<<1)+Pe%2,He=(G<<1)+(Pe>>1),Se=N.zoom+1;let Fe=N.aabb.quadrant(Pe);if(i.terrain){const dt=new a.O(Se,N.wrap,Se,ut,He),pt=i.terrain.getMinMaxElevation(dt),at=(c=pt.minElevation)!==null&&c!==void 0?c:this.elevation,_t=(d=pt.maxElevation)!==null&&d!==void 0?d:this.elevation;Fe=new ma([Fe.min[0],Fe.min[1],at],[Fe.max[0],Fe.max[1],_t])}x.push({aabb:Fe,zoom:Se,x:ut,y:He,wrap:N.wrap,fullyVisible:X})}}return C.sort((N,z)=>N.distanceSq-z.distanceSq).map(N=>N.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=a.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.P(a.G(i.lng)*this.worldSize,a.H(c)*this.worldSize)}unproject(i){return new a.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const c=this.pointLocation(this.centerPoint,i),d=i.getElevationForLngLatZoom(c,this.tileZoom);if(!(this.elevation-d))return;const y=this.getCameraPosition(),b=a.U.fromLngLat(y.lngLat,y.altitude),E=a.U.fromLngLat(c,d),L=b.x-E.x,k=b.y-E.y,O=b.z-E.z,H=Math.sqrt(L*L+k*k+O*O),$=this.scaleZoom(this.cameraToCenterDistance/H/this.tileSize);this._elevation=d,this._center=c,this.zoom=$}setLocationAtPoint(i,c){const d=this.pointCoordinate(c),y=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(i),E=new a.U(b.x-(d.x-y.x),b.y-(d.y-y.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,c){return c?this.coordinatePoint(this.locationCoordinate(i),c.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,c){return this.coordinateLocation(this.pointCoordinate(i,c))}locationCoordinate(i){return a.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,c){if(c){const se=c.pointCoordinate(i);if(se!=null)return se}const d=[i.x,i.y,0,1],y=[i.x,i.y,1,1];a.ag(d,d,this.pixelMatrixInverse),a.ag(y,y,this.pixelMatrixInverse);const b=d[3],E=y[3],L=d[1]/b,k=y[1]/E,O=d[2]/b,H=y[2]/E,$=O===H?0:(0-O)/(H-O);return new a.U(a.B.number(d[0]/b,y[0]/E,$)/this.worldSize,a.B.number(L,k,$)/this.worldSize)}coordinatePoint(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.pixelMatrix;const y=[i.x*this.worldSize,i.y*this.worldSize,c,1];return a.ag(y,y,d),new a.P(y[0]/y[3],y[1]/y[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new pe().extend(this.pointLocation(new a.P(0,i))).extend(this.pointLocation(new a.P(this.width,i))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new pe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const d=i.key,y=c?this._alignedPosMatrixCache:this._posMatrixCache;if(y[d])return y[d];const b=i.canonical,E=this.worldSize/this.zoomScale(b.z),L=b.x+Math.pow(2,b.z)*i.wrap,k=a.ao(new Float64Array(16));return a.$(k,k,[L*E,b.y*E,0]),a.a0(k,k,[E/a.N,E/a.N,1]),a.a1(k,c?this.alignedProjMatrix:this.projMatrix,k),y[d]=new Float32Array(k),y[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,c,d,y,b=-90,E=90,L=-180,k=180;const O=this.size,H=this._unmodified;if(this.latRange){const fe=this.latRange;b=a.H(fe[1])*this.worldSize,E=a.H(fe[0])*this.worldSize,i=E-b<O.y?O.y/(E-b):0}if(this.lngRange){const fe=this.lngRange;L=a.b5(a.G(fe[0])*this.worldSize,0,this.worldSize),k=a.b5(a.G(fe[1])*this.worldSize,0,this.worldSize),k<L&&(k+=this.worldSize),c=k-L<O.x?O.x/(k-L):0}const $=this.point,se=Math.max(c||0,i||0);if(se)return this.center=this.unproject(new a.P(c?(k+L)/2:$.x,i?(E+b)/2:$.y)),this.zoom+=this.scaleZoom(se),this._unmodified=H,void(this._constraining=!1);if(this.latRange){const fe=$.y,f=O.y/2;fe-f<b&&(y=b+f),fe+f>E&&(y=E-f)}if(this.lngRange){const fe=(L+k)/2,f=a.b5($.x,fe-this.worldSize/2,fe+this.worldSize/2),x=O.x/2;f-x<L&&(d=L+x),f+x>k&&(d=k-x)}d===void 0&&y===void 0||(this.center=this.unproject(new a.P(d!==void 0?d:$.x,y!==void 0?y:$.y)).wrap()),this._unmodified=H,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,c=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b7(1,this.center.lat)*this.worldSize;let y=a.ao(new Float64Array(16));a.a0(y,y,[this.width/2,-this.height/2,1]),a.$(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=a.ao(new Float64Array(16)),a.a0(y,y,[1,-1,1]),a.$(y,y,[-1,-1,0]),a.a0(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y;const b=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),E=Math.min(this.elevation,this._minEleveationForCurrentTile),L=b-E*this._pixelPerMeter/Math.cos(this._pitch),k=E<0?L:b,O=Math.PI/2+this._pitch,H=this._fov*(.5+i.y/this.height),$=Math.sin(H)*k/Math.sin(a.ad(Math.PI-O-H,.01,Math.PI-.01)),se=this.getHorizon(),fe=2*Math.atan(se/this.cameraToCenterDistance)*(.5+i.y/(2*se)),f=Math.sin(fe)*k/Math.sin(a.ad(Math.PI-O-fe,.01,Math.PI-.01)),x=Math.min($,f),C=1.01*(Math.cos(Math.PI/2-this._pitch)*x+k),M=this.height/50;y=new Float64Array(16),a.b8(y,this._fov,this.width/this.height,M,C),y[8]=2*-i.x/this.width,y[9]=2*i.y/this.height,a.a0(y,y,[1,-1,1]),a.$(y,y,[0,0,-this.cameraToCenterDistance]),a.b9(y,y,this._pitch),a.ae(y,y,this.angle),a.$(y,y,[-c,-d,0]),this.mercatorMatrix=a.a0([],y,[this.worldSize,this.worldSize,this.worldSize]),a.a0(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.a1(new Float64Array(16),this.labelPlaneMatrix,y),a.$(y,y,[0,0,-this.elevation]),this.projMatrix=y,this.invProjMatrix=a.as([],y),this.pixelMatrix3D=a.a1(new Float64Array(16),this.labelPlaneMatrix,y);const R=this.width%2/2,N=this.height%2/2,z=Math.cos(this.angle),G=Math.sin(this.angle),X=c-Math.round(c)+z*R+G*N,re=d-Math.round(d)+z*N+G*R,de=new Float64Array(y);if(a.$(de,de,[X>.5?X-1:X,re>.5?re-1:re,0]),this.alignedProjMatrix=de,y=a.as(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new a.P(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return a.ag(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let d=c.x,y=c.y,b=c.x,E=c.y;for(const L of i)d=Math.min(d,L.x),y=Math.min(y,L.y),b=Math.max(b,L.x),E=Math.max(E,L.y);return[new a.P(d,y),new a.P(b,y),new a.P(b,E),new a.P(d,E),new a.P(d,y)]}}}function Yn(v,i){var c=this;let d,y=!1,b=null,E=null;const L=()=>{b=null,y&&(v.apply(E,d),b=setTimeout(L,i),y=!1)};return function(){for(var k=arguments.length,O=new Array(k),H=0;H<k;H++)O[H]=arguments[H];return y=!0,E=c,d=O,b||L(),b}}class Tn{constructor(i){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let d;return c.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(d=y)}),(d&&d[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:d,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=Yn(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,y=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,y),E=Math.round(c.lng*b)/b,L=Math.round(c.lat*b)/b,k=this._map.getBearing(),O=this._map.getPitch();let H="";if(H+=i?`/${E}/${L}/${d}`:`${d}/${L}/${E}`,(k||O)&&(H+="/"+Math.round(10*k)/10),O&&(H+=`/${Math.round(O)}`),this._hashName){const $=this._hashName;let se=!1;const fe=window.location.hash.slice(1).split("&").map(f=>{const x=f.split("=")[0];return x===$?(se=!0,`${x}=${H}`):f}).filter(f=>f);return se||fe.push(`${$}=${H}`),`#${fe.join("&")}`}return`#${H}`}}const Un={linearity:.3,easing:a.ba(0,0,.3,1)},Pa=a.e({deceleration:2500,maxSpeed:1400},Un),Zs=a.e({deceleration:20,maxSpeed:1400},Un),ya=a.e({deceleration:1e3,maxSpeed:360},Un),Ro=a.e({deceleration:1e3,maxSpeed:90},Un);class Ts{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=a.h.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)c.zoom+=b.zoomDelta||0,c.bearing+=b.bearingDelta||0,c.pitch+=b.pitchDelta||0,b.panDelta&&c.pan._add(b.panDelta),b.around&&(c.around=b.around),b.pinchAround&&(c.pinchAround=b.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(c.pan.mag()){const b=Qa(c.pan.mag(),d,a.e({},Pa,i||{}));y.offset=c.pan.mult(b.amount/c.pan.mag()),y.center=this._map.transform.center,Nn(y,b)}if(c.zoom){const b=Qa(c.zoom,d,Zs);y.zoom=this._map.transform.zoom+b.amount,Nn(y,b)}if(c.bearing){const b=Qa(c.bearing,d,ya);y.bearing=this._map.transform.bearing+a.ad(b.amount,-179,179),Nn(y,b)}if(c.pitch){const b=Qa(c.pitch,d,Ro);y.pitch=this._map.transform.pitch+b.amount,Nn(y,b)}if(y.zoom||y.bearing){const b=c.pinchAround===void 0?c.around:c.pinchAround;y.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),a.e(y,{noMoveStart:!0})}}function Nn(v,i){(!v.duration||v.duration<i.duration)&&(v.duration=i.duration,v.easing=i.easing)}function Qa(v,i,c){const{maxSpeed:d,linearity:y,deceleration:b}=c,E=a.ad(v*y/(i/1e3),-d,d),L=Math.abs(E)/(b*y);return{easing:c.easing,duration:1e3*L,amount:E*(L/2)}}class Ki extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const b=w.mousePos(c.getCanvasContainer(),d),E=c.unproject(b);super(i,a.e({point:b,lngLat:E,originalEvent:d},y)),this._defaultPrevented=!1,this.target=c}}class On extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,d){const y=i==="touchend"?d.changedTouches:d.touches,b=w.touchPos(c.getCanvasContainer(),y),E=b.map(k=>c.unproject(k)),L=b.reduce((k,O,H,$)=>k.add(O.div($.length)),new a.P(0,0));super(i,{points:b,point:L,lngLats:E,lngLat:c.unproject(L),originalEvent:d}),this._defaultPrevented=!1}}class va extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,d){super(i,{originalEvent:d}),this._defaultPrevented=!1}}class ro{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new va(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new Ki(i.type,this._map,i))}mouseup(i){this._map.fire(new Ki(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new Ki(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Ki(i.type,this._map,i))}mouseover(i){this._map.fire(new Ki(i.type,this._map,i))}mouseout(i){this._map.fire(new Ki(i.type,this._map,i))}touchstart(i){return this._firePreventable(new On(i.type,this._map,i))}touchmove(i){this._map.fire(new On(i.type,this._map,i))}touchend(i){this._map.fire(new On(i.type,this._map,i))}touchcancel(i){this._map.fire(new On(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class zo{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Ki(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ki("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new Ki(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Rn{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(a.P.convert(i),this._map.terrain)}}class Ma{constructor(i,c){this._map=i,this._tr=new Rn(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(w.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const d=c;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=d,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const b=Math.min(y.x,d.x),E=Math.max(y.x,d.x),L=Math.min(y.y,d.y),k=Math.max(y.y,d.y);w.setTransform(this._box,`translate(${b}px,${L}px)`),this._box.style.width=E-b+"px",this._box.style.height=k-L+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const d=this._startPos,y=c;if(this.reset(),w.suppressClick(),d.x!==y.x||d.y!==y.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:i})),{cameraAnimation:b=>b.fitScreenCoordinates(d,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new a.k(i,{originalEvent:c}))}}function Pn(v,i){if(v.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${i.length}`);const c={};for(let d=0;d<v.length;d++)c[v[d].identifier]=i[d];return c}class $i{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),d.length===this.numTouches&&(this.centroid=function(y){const b=new a.P(0,0);for(const E of y)b._add(E);return b.div(y.length)}(c),this.touches=Pn(d,c)))}touchmove(i,c,d){if(this.aborted||!this.centroid)return;const y=Pn(d,c);for(const b in this.touches){const E=y[b];(!E||E.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(i,c,d){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Us{constructor(i){this.singleTap=new $i(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,d){this.singleTap.touchstart(i,c,d)}touchmove(i,c,d){this.singleTap.touchmove(i,c,d)}touchend(i,c,d){const y=this.singleTap.touchend(i,c,d);if(y){const b=i.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(y)<30;if(b&&E||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class ai{constructor(i){this._tr=new Rn(i),this._zoomIn=new Us({numTouches:1,numTaps:2}),this._zoomOut=new Us({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,d){this._zoomIn.touchstart(i,c,d),this._zoomOut.touchstart(i,c,d)}touchmove(i,c,d){this._zoomIn.touchmove(i,c,d),this._zoomOut.touchmove(i,c,d)}touchend(i,c,d){const y=this._zoomIn.touchend(i,c,d),b=this._zoomOut.touchend(i,c,d),E=this._tr;return y?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:E.zoom+1,around:E.unproject(y)},{originalEvent:i})}):b?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:E.zoom-1,around:E.unproject(b)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oi{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(){const i=this._moveFunction(...arguments);if(i.bearingDelta||i.pitchDelta||i.around||i.panDelta)return this._active=!0,i}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const y=c.length?c[0]:c;return!this._moved&&y.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(d,y))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&w.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Vi={0:1,2:2};class ji{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const c=w.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(c,d){const y=Vi[d];return c.buttons===void 0||(c.buttons&y)!==y}(i,this._eventButton)}isValidEndEvent(i){return w.mouseButton(i)===this._eventButton}}class _a{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Ys=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=function(i){i.preventDefault()}},Js=v=>{let{enable:i,clickTolerance:c,bearingDegreesPerPixelMoved:d=.8}=v;const y=new ji({checkCorrectEvent:b=>w.mouseButton(b)===0&&b.ctrlKey||w.mouseButton(b)===2});return new oi({clickTolerance:c,move:(b,E)=>({bearingDelta:(E.x-b.x)*d}),moveStateManager:y,enable:i,assignEvents:Ys})},Ps=v=>{let{enable:i,clickTolerance:c,pitchDegreesPerPixelMoved:d=-.5}=v;const y=new ji({checkCorrectEvent:b=>w.mouseButton(b)===0&&b.ctrlKey||w.mouseButton(b)===2});return new oi({clickTolerance:c,move:(b,E)=>({pitchDelta:(E.y-b.y)*d}),moveStateManager:y,enable:i,assignEvents:Ys})};class Xt{constructor(i,c){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,c,d){return this._calculateTransform(i,c,d)}touchmove(i,c,d){if(this._map._cooperativeGestures&&(this._minTouches===2&&d.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,d.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(d.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,c,d)}touchend(i,c,d){this._calculateTransform(i,c,d),this._active&&d.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,d){d.length>0&&(this._active=!0);const y=Pn(d,c),b=new a.P(0,0),E=new a.P(0,0);let L=0;for(const O in y){const H=y[O],$=this._touches[O];$&&(b._add(H),E._add(H.sub($)),L++,y[O]=H)}if(this._touches=y,L<this._minTouches||!E.mag())return;const k=E.div(L);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(L),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Al{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,c,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,d){if(!this._firstTwoTouches)return;i.preventDefault();const[y,b]=this._firstTwoTouches,E=ka(d,c,y),L=ka(d,c,b);if(!E||!L)return;const k=this._aroundCenter?null:E.add(L).div(2);return this._move([E,L],k,i)}touchend(i,c,d){if(!this._firstTwoTouches)return;const[y,b]=this._firstTwoTouches,E=ka(d,c,y),L=ka(d,c,b);E&&L||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ka(v,i,c){for(let d=0;d<v.length;d++)if(v[d].identifier===c)return i[d]}function Ho(v,i){return Math.log(v/i)/Math.LN2}class Hc extends Al{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const d=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Ho(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ho(this._distance,d),pinchAround:c}}}function Gt(v,i){return 180*v.angleWith(i)/Math.PI}class ll extends Al{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const d=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Gt(this._vector,d),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,d=Gt(i,this._startVector);return Math.abs(d)<c}}function EA(v){return Math.abs(v.y)>Math.abs(v.x)}class ls extends Al{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,d){super.touchstart(i,c,d),this._currentTouchCount=d.length}_start(i){this._lastPoints=i,EA(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,d){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const y=i[0].sub(this._lastPoints[0]),b=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,b,d.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(y.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,d){if(this._valid!==void 0)return this._valid;const y=i.mag()>=2,b=c.mag()>=2;if(!y&&!b)return;if(!y||!b)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const E=i.y>0==c.y>0;return EA(i)&&EA(c)&&E}}const Jn={panStep:100,bearingStep:15,pitchStep:10};class cl{constructor(i){this._tr=new Rn(i);const c=Jn;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,d=0,y=0,b=0,E=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?d=-1:(i.preventDefault(),b=-1);break;case 39:i.shiftKey?d=1:(i.preventDefault(),b=1);break;case 38:i.shiftKey?y=1:(i.preventDefault(),E=-1);break;case 40:i.shiftKey?y=-1:(i.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(d=0,y=0),{cameraAnimation:L=>{const k=this._tr;L.easeTo({duration:300,easeId:"keyboardHandler",easing:ul,zoom:c?Math.round(k.zoom)+c*(i.shiftKey?2:1):k.zoom,bearing:k.bearing+d*this._bearingStep,pitch:k.pitch+y*this._pitchStep,offset:[-b*this._panStep,-E*this._panStep],center:k.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ul(v){return v*(2-v)}const Vc=4.000244140625;class Jl{constructor(i,c){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=i,this._tr=new Rn(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const d=a.h.now(),y=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,c!==0&&c%Vc==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(y*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=w.mousePos(this._el,i),d=this._tr;this._around=a.L.convert(this._aroundCenter?d.center:d.unproject(c)),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>Vc?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&k!==0&&(k=1/k);const O=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(O*k))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,d=this._startZoom,y=this._easing;let b,E=!1;if(this._type==="wheel"&&d&&y){const L=Math.min((a.h.now()-this._lastWheelEventTime)/200,1),k=y(L);b=a.B.number(d,c,k),L<1?this._frameId||(this._frameId=!0):E=!0}else b=c,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!E,zoomDelta:b-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=a.bb;if(this._prevEase){const d=this._prevEase,y=(a.h.now()-d.start)/d.duration,b=d.easing(y+.01)-d.easing(y),E=.27/Math.sqrt(b*b+1e-4)*.01,L=Math.sqrt(.0729-E*E);c=a.ba(E,L,.25,1)}return this._prevEase={start:a.h.now(),duration:i,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class IA{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class hl{constructor(i){this._tr=new Rn(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ec{constructor(){this._tap=new Us({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,c,d){if(!this._swipePoint)if(this._tapTime){const y=c[0],b=i.timeStamp-this._tapTime<500,E=this._tapPoint.dist(y)<30;b&&E?d.length>0&&(this._swipePoint=y,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(i,c,d)}touchmove(i,c,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const y=c[0],b=y.y-this._swipePoint.y;return this._swipePoint=y,i.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(i,c,d)}touchend(i,c,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const y=this._tap.touchend(i,c,d);y&&(this._tapTime=i.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pl{constructor(i,c,d){this._el=i,this._mousePan=c,this._touchPan=d}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Qn{constructor(i,c,d){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ea{constructor(i,c,d,y){this._el=i,this._touchZoom=c,this._touchRotate=d,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Vo=v=>v.zoom||v.drag||v.pitch||v.rotate;class jc extends a.k{}function dl(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class tc{constructor(i,c){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,b)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const E=y.type==="renderFrame"?void 0:y,L={needsRenderFrame:!1},k={},O={},H=y.touches,$=H?this._getMapTouches(H):void 0,se=$?w.touchPos(this._el,$):w.mousePos(this._el,y);for(const{handlerName:x,handler:C,allowed:M}of this._handlers){if(!C.isEnabled())continue;let R;this._blockedByActive(O,M,x)?C.reset():C[b||y.type]&&(R=C[b||y.type](y,se,$),this.mergeHandlerResult(L,k,R,x,E),R&&R.needsRenderFrame&&this._triggerRenderFrame()),(R||C.isActive())&&(O[x]=C)}const fe={};for(const x in this._previousActiveHandlers)O[x]||(fe[x]=E);this._previousActiveHandlers=O,(Object.keys(fe).length||dl(L))&&(this._changes.push([L,k,fe]),this._triggerRenderFrame()),(Object.keys(O).length||dl(L))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:f}=L;f&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],f(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ts(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,b,E]of this._listeners)w.addEventListener(y,b,y===document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[i,c,d]of this._listeners)w.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(i){const c=this._map,d=c.getCanvasContainer();this._add("mapEvent",new ro(c,i));const y=c.boxZoom=new Ma(c,i);this._add("boxZoom",y),i.interactive&&i.boxZoom&&y.enable();const b=new ai(c),E=new hl(c);c.doubleClickZoom=new IA(E,b),this._add("tapZoom",b),this._add("clickZoom",E),i.interactive&&i.doubleClickZoom&&c.doubleClickZoom.enable();const L=new ec;this._add("tapDragZoom",L);const k=c.touchPitch=new ls(c);this._add("touchPitch",k),i.interactive&&i.touchPitch&&c.touchPitch.enable(i.touchPitch);const O=Js(i),H=Ps(i);c.dragRotate=new Qn(i,O,H),this._add("mouseRotate",O,["mousePitch"]),this._add("mousePitch",H,["mouseRotate"]),i.interactive&&i.dragRotate&&c.dragRotate.enable();const $=(M=>{let{enable:R,clickTolerance:N}=M;const z=new ji({checkCorrectEvent:G=>w.mouseButton(G)===0&&!G.ctrlKey});return new oi({clickTolerance:N,move:(G,X)=>({around:X,panDelta:X.sub(G)}),activateOnStart:!0,moveStateManager:z,enable:R,assignEvents:Ys})})(i),se=new Xt(i,c);c.dragPan=new pl(d,$,se),this._add("mousePan",$),this._add("touchPan",se,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&c.dragPan.enable(i.dragPan);const fe=new ll,f=new Hc;c.touchZoomRotate=new ea(d,f,fe,L),this._add("touchRotate",fe,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&c.touchZoomRotate.enable(i.touchZoomRotate);const x=c.scrollZoom=new Jl(c,()=>this._triggerRenderFrame());this._add("scrollZoom",x,["mousePan"]),i.interactive&&i.scrollZoom&&c.scrollZoom.enable(i.scrollZoom);const C=c.keyboard=new cl(c);this._add("keyboard",C),i.interactive&&i.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new zo(c))}_add(i,c,d){this._handlers.push({handlerName:i,handler:c,allowed:d}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Vo(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,d){for(const y in i)if(y!==d&&(!c||c.indexOf(y)<0))return!0;return!1}_getMapTouches(i){const c=[];for(const d of i)this._el.contains(d.target)&&c.push(d);return c}mergeHandlerResult(i,c,d,y,b){if(!d)return;a.e(i,d);const E={handlerName:y,originalEvent:d.originalEvent||b};d.zoomDelta!==void 0&&(c.zoom=E),d.panDelta!==void 0&&(c.drag=E),d.pitchDelta!==void 0&&(c.pitch=E),d.bearingDelta!==void 0&&(c.rotate=E)}_applyChanges(){const i={},c={},d={};for(const[y,b,E]of this._changes)y.panDelta&&(i.panDelta=(i.panDelta||new a.P(0,0))._add(y.panDelta)),y.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(i.around=y.around),y.pinchAround!==void 0&&(i.pinchAround=y.pinchAround),y.noInertia&&(i.noInertia=y.noInertia),a.e(c,b),a.e(d,E);this._updateMapTransform(i,c,d),this._changes=[]}_updateMapTransform(i,c,d){const y=this._map,b=y._getTransformForUpdate(),E=y.terrain;if(!(dl(i)||E&&this._terrainMovement))return this._fireEvents(c,d,!0);let{panDelta:L,zoomDelta:k,bearingDelta:O,pitchDelta:H,around:$,pinchAround:se}=i;se!==void 0&&($=se),y._stop(!0),$=$||y.transform.centerPoint;const fe=b.pointLocation(L?$.sub(L):$);O&&(b.bearing+=O),H&&(b.pitch+=H),k&&(b.zoom+=k),E?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?b.center=b.pointLocation(b.centerPoint.sub(L)):b.setLocationAtPoint(fe,$):(this._terrainMovement=!0,this._map._elevationFreeze=!0,b.setLocationAtPoint(fe,$),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,b.recalculateZoom(y.terrain)})):b.setLocationAtPoint(fe,$),y._applyUpdatedTransform(b),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,d,!0)}_fireEvents(i,c,d){const y=Vo(this._eventsInProgress),b=Vo(i),E={};for(const H in i){const{originalEvent:$}=i[H];this._eventsInProgress[H]||(E[`${H}start`]=$),this._eventsInProgress[H]=i[H]}!y&&b&&this._fireEvent("movestart",b.originalEvent);for(const H in E)this._fireEvent(H,E[H]);b&&this._fireEvent("move",b.originalEvent);for(const H in i){const{originalEvent:$}=i[H];this._fireEvent(H,$)}const L={};let k;for(const H in this._eventsInProgress){const{handlerName:$,originalEvent:se}=this._eventsInProgress[H];this._handlersById[$].isActive()||(delete this._eventsInProgress[H],k=c[$]||se,L[`${H}end`]=k)}for(const H in L)this._fireEvent(H,L[H]);const O=Vo(this._eventsInProgress);if(d&&(y||b)&&!O){this._updatingCamera=!0;const H=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),$=se=>se!==0&&-this._bearingSnap<se&&se<this._bearingSnap;!H||!H.essential&&a.h.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:k})),$(this._map.getBearing())&&this._map.resetNorth()):($(H.bearing||this._map.getBearing())&&(H.bearing=0),H.freezeElevation=!0,this._map.easeTo(H,{originalEvent:k})),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new a.k(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new jc("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ku extends a.E{constructor(i,c){super(),this._renderFrameCallback=()=>{const d=Math.min((a.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,d){return i=a.P.convert(i).mult(-1),this.panTo(this.transform.center,a.e({offset:i},c),d)}panTo(i,c,d){return this.easeTo(a.e({center:i},c),d)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,d){return this.easeTo(a.e({zoom:i},c),d)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,d){return this.easeTo(a.e({bearing:i},c),d)}resetNorth(i,c){return this.rotateTo(0,a.e({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=pe.convert(i);const d=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),d,c)}_cameraForBoxAndBearing(i,c,d,y){const b={top:0,bottom:0,right:0,left:0};if(typeof(y=a.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const G=y.padding;y.padding={top:G,bottom:G,right:G,left:G}}y.padding=a.e(b,y.padding);const E=this.transform,L=E.padding,k=E.project(a.L.convert(i)),O=E.project(a.L.convert(c)),H=k.rotate(-d*Math.PI/180),$=O.rotate(-d*Math.PI/180),se=new a.P(Math.max(H.x,$.x),Math.max(H.y,$.y)),fe=new a.P(Math.min(H.x,$.x),Math.min(H.y,$.y)),f=se.sub(fe),x=(E.width-(L.left+L.right+y.padding.left+y.padding.right))/f.x,C=(E.height-(L.top+L.bottom+y.padding.top+y.padding.bottom))/f.y;if(C<0||x<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const M=Math.min(E.scaleZoom(E.scale*Math.min(x,C)),y.maxZoom),R=a.P.convert(y.offset),N=new a.P((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(d*Math.PI/180),z=R.add(N).mult(E.scale/E.zoomScale(M));return{center:E.unproject(k.add(O).div(2).sub(z)),zoom:M,bearing:d}}fitBounds(i,c,d){return this._fitInternal(this.cameraForBounds(i,c),c,d)}fitScreenCoordinates(i,c,d,y,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(i)),this.transform.pointLocation(a.P.convert(c)),d,y),y,b)}_fitInternal(i,c,d){return i?(delete(c=a.e(i,c)).padding,c.linear?this.easeTo(c,d):this.flyTo(c,d)):this}jumpTo(i,c){this.stop();const d=this._getTransformForUpdate();let y=!1,b=!1,E=!1;return"zoom"in i&&d.zoom!==+i.zoom&&(y=!0,d.zoom=+i.zoom),i.center!==void 0&&(d.center=a.L.convert(i.center)),"bearing"in i&&d.bearing!==+i.bearing&&(b=!0,d.bearing=+i.bearing),"pitch"in i&&d.pitch!==+i.pitch&&(E=!0,d.pitch=+i.pitch),i.padding==null||d.isPaddingEqual(i.padding)||(d.padding=i.padding),this._applyUpdatedTransform(d),this.fire(new a.k("movestart",c)).fire(new a.k("move",c)),y&&this.fire(new a.k("zoomstart",c)).fire(new a.k("zoom",c)).fire(new a.k("zoomend",c)),b&&this.fire(new a.k("rotatestart",c)).fire(new a.k("rotate",c)).fire(new a.k("rotateend",c)),E&&this.fire(new a.k("pitchstart",c)).fire(new a.k("pitch",c)).fire(new a.k("pitchend",c)),this.fire(new a.k("moveend",c))}calculateCameraOptionsFromTo(i,c,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const b=a.U.fromLngLat(i,c),E=a.U.fromLngLat(d,y),L=E.x-b.x,k=E.y-b.y,O=E.z-b.z,H=Math.hypot(L,k,O);if(H===0)throw new Error("Can't calculate camera options with same From and To");const $=Math.hypot(L,k),se=this.transform.scaleZoom(this.transform.cameraToCenterDistance/H/this.transform.tileSize),fe=180*Math.atan2(L,-k)/Math.PI;let f=180*Math.acos($/H)/Math.PI;return f=O<0?90-f:90+f,{center:E.toLngLat(),zoom:se,pitch:f,bearing:fe}}easeTo(i,c){this._stop(!1,i.easeId),((i=a.e({offset:[0,0],duration:500,easing:a.bb},i)).animate===!1||!i.essential&&a.h.prefersReducedMotion)&&(i.duration=0);const d=this._getTransformForUpdate(),y=this.getZoom(),b=this.getBearing(),E=this.getPitch(),L=this.getPadding(),k="zoom"in i?+i.zoom:y,O="bearing"in i?this._normalizeBearing(i.bearing,b):b,H="pitch"in i?+i.pitch:E,$="padding"in i?i.padding:d.padding,se=a.P.convert(i.offset);let fe=d.centerPoint.add(se);const f=d.pointLocation(fe),x=a.L.convert(i.center||f);this._normalizeCenter(x);const C=d.project(f),M=d.project(x).sub(C),R=d.zoomScale(k-y);let N,z;i.around&&(N=a.L.convert(i.around),z=d.locationPoint(N));const G={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||k!==y,this._rotating=this._rotating||b!==O,this._pitching=this._pitching||H!==E,this._padding=!d.isPaddingEqual($),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,G),this.terrain&&this._prepareElevation(x),this._ease(X=>{if(this._zooming&&(d.zoom=a.B.number(y,k,X)),this._rotating&&(d.bearing=a.B.number(b,O,X)),this._pitching&&(d.pitch=a.B.number(E,H,X)),this._padding&&(d.interpolatePadding(L,$,X),fe=d.centerPoint.add(se)),this.terrain&&!i.freezeElevation&&this._updateElevation(X),N)d.setLocationAtPoint(N,z);else{const re=d.zoomScale(d.zoom-y),de=k>y?Math.min(2,R):Math.max(.5,R),we=Math.pow(de,1-X),Ie=d.unproject(C.add(M.mult(X*we)).mult(re));d.setLocationAtPoint(d.renderWorldCopies?Ie.wrap():Ie,fe)}this._applyUpdatedTransform(d),this._fireMoveEvents(c)},X=>{this.terrain&&this._finalizeElevation(),this._afterEase(c,X)},i),this}_prepareEase(i,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this._moving=!0,c||d.moving||this.fire(new a.k("movestart",i)),this._zooming&&!d.zooming&&this.fire(new a.k("zoomstart",i)),this._rotating&&!d.rotating&&this.fire(new a.k("rotatestart",i)),this._pitching&&!d.pitching&&this.fire(new a.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&c!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(d-(c-(d*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.elevation=a.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const c=i.clone(),{center:d,zoom:y,pitch:b,bearing:E,elevation:L}=this.transformCameraUpdate(c);d&&(c.center=d),y!==void 0&&(c.zoom=y),b!==void 0&&(c.pitch=b),E!==void 0&&(c.bearing=E),L!==void 0&&(c.elevation=L),this.transform.apply(c)}_fireMoveEvents(i){this.fire(new a.k("move",i)),this._zooming&&this.fire(new a.k("zoom",i)),this._rotating&&this.fire(new a.k("rotate",i)),this._pitching&&this.fire(new a.k("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const d=this._zooming,y=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new a.k("zoomend",i)),y&&this.fire(new a.k("rotateend",i)),b&&this.fire(new a.k("pitchend",i)),this.fire(new a.k("moveend",i))}flyTo(i,c){if(!i.essential&&a.h.prefersReducedMotion){const Fe=a.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Fe,c)}this.stop(),i=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.bb},i);const d=this._getTransformForUpdate(),y=this.getZoom(),b=this.getBearing(),E=this.getPitch(),L=this.getPadding(),k="zoom"in i?a.ad(+i.zoom,d.minZoom,d.maxZoom):y,O="bearing"in i?this._normalizeBearing(i.bearing,b):b,H="pitch"in i?+i.pitch:E,$="padding"in i?i.padding:d.padding,se=d.zoomScale(k-y),fe=a.P.convert(i.offset);let f=d.centerPoint.add(fe);const x=d.pointLocation(f),C=a.L.convert(i.center||x);this._normalizeCenter(C);const M=d.project(x),R=d.project(C).sub(M);let N=i.curve;const z=Math.max(d.width,d.height),G=z/se,X=R.mag();if("minZoom"in i){const Fe=a.ad(Math.min(i.minZoom,y,k),d.minZoom,d.maxZoom),dt=z/d.zoomScale(Fe-y);N=Math.sqrt(dt/X*2)}const re=N*N;function de(Fe){const dt=(G*G-z*z+(Fe?-1:1)*re*re*X*X)/(2*(Fe?G:z)*re*X);return Math.log(Math.sqrt(dt*dt+1)-dt)}function we(Fe){return(Math.exp(Fe)-Math.exp(-Fe))/2}function Ie(Fe){return(Math.exp(Fe)+Math.exp(-Fe))/2}const Pe=de(!1);let ut=function(Fe){return Ie(Pe)/Ie(Pe+N*Fe)},He=function(Fe){return z*((Ie(Pe)*(we(dt=Pe+N*Fe)/Ie(dt))-we(Pe))/re)/X;var dt},Se=(de(!0)-Pe)/N;if(Math.abs(X)<1e-6||!isFinite(Se)){if(Math.abs(z-G)<1e-6)return this.easeTo(i,c);const Fe=G<z?-1:1;Se=Math.abs(Math.log(G/z))/N,He=function(){return 0},ut=function(dt){return Math.exp(Fe*N*dt)}}return i.duration="duration"in i?+i.duration:1e3*Se/("screenSpeed"in i?+i.screenSpeed/N:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=b!==O,this._pitching=H!==E,this._padding=!d.isPaddingEqual($),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(C),this._ease(Fe=>{const dt=Fe*Se,pt=1/ut(dt);d.zoom=Fe===1?k:y+d.scaleZoom(pt),this._rotating&&(d.bearing=a.B.number(b,O,Fe)),this._pitching&&(d.pitch=a.B.number(E,H,Fe)),this._padding&&(d.interpolatePadding(L,$,Fe),f=d.centerPoint.add(fe)),this.terrain&&!i.freezeElevation&&this._updateElevation(Fe);const at=Fe===1?C:d.unproject(M.add(R.mult(He(dt))).mult(pt));d.setLocationAtPoint(d.renderWorldCopies?at.wrap():at,f),this._applyUpdatedTransform(d),this._fireMoveEvents(c)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(c)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,c)}if(!i){const d=this.handlers;d&&d.stop(!1)}return this}_ease(i,c,d){d.animate===!1||d.duration===0?(i(1),c()):(this._easeStart=a.h.now(),this._easeOptions=d,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,c){i=a.b5(i,-180,180);const d=Math.abs(i-c);return Math.abs(i-360-c)<d&&(i-=360),Math.abs(i+360-c)<d&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const d=i.lng-c.center.lng;i.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(a.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class cs{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const d=this._map._getUIString(`AttributionControl.${c}`);i.title=d,i.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const c=this._map.style.sourceCaches;for(const y in c){const b=c[y];if(b.used||b.usedForTerrain){const E=b.getSource();E.attribution&&i.indexOf(E.attribution)<0&&i.push(E.attribution)}}i=i.filter(y=>String(y).trim()),i.sort((y,b)=>y.length-b.length),i=i.filter((y,b)=>{for(let E=b+1;E<i.length;E++)if(i[E].indexOf(y)>=0)return!1;return!0});const d=i.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,i.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class xi{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._updateCompact=()=>{const c=this._container.children;if(c.length){const d=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const c=w.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class rc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,d=c?this._queue.concat(c):this._queue;for(const y of d)if(y.id===i)return void(y.cancelled=!0)}run(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const d of c)if(!d.cancelled&&(d.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Gc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var ic=a.Q([{name:"a_pos3d",type:"Int16",components:3}]);class nc extends a.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,c){this.sourceCache.update(i,c),this._renderableTilesKeys=[];const d={};for(const y of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))d[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),a.aS(y.posMatrix,0,a.N,0,a.N,0,1),this._tiles[y.key]=new Zt(y,this.tileSize));for(const y in this._tiles)d[y]||delete this._tiles[y]}freeRtt(i){for(const c in this._tiles){const d=this._tiles[c];(!i||d.tileID.equals(i)||d.tileID.isChildOf(i)||i.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const c={};for(const d of this._renderableTilesKeys){const y=this._tiles[d].tileID;if(y.canonical.equals(i.canonical)){const b=i.clone();b.posMatrix=new Float64Array(16),a.aS(b.posMatrix,0,a.N,0,a.N,0,1),c[d]=b}else if(y.canonical.isChildOf(i.canonical)){const b=i.clone();b.posMatrix=new Float64Array(16);const E=y.canonical.z-i.canonical.z,L=y.canonical.x-(y.canonical.x>>E<<E),k=y.canonical.y-(y.canonical.y>>E<<E),O=a.N>>E;a.aS(b.posMatrix,0,O,0,O,0,1),a.$(b.posMatrix,b.posMatrix,[-L*O,-k*O,0]),c[d]=b}else if(i.canonical.isChildOf(y.canonical)){const b=i.clone();b.posMatrix=new Float64Array(16);const E=i.canonical.z-y.canonical.z,L=i.canonical.x-(i.canonical.x>>E<<E),k=i.canonical.y-(i.canonical.y>>E<<E),O=a.N>>E;a.aS(b.posMatrix,0,a.N,0,a.N,0,1),a.$(b.posMatrix,b.posMatrix,[L*O,k*O,0]),a.a0(b.posMatrix,b.posMatrix,[1/2**E,1/2**E,0]),c[d]=b}}return c}getSourceTile(i,c){const d=this.sourceCache._source;let y=i.overscaledZ-this.deltaZoom;if(y>d.maxzoom&&(y=d.maxzoom),y<d.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(y).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!b||!b.dem)&&c)for(;y>=d.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(i.scaledTo(y--).key);return b}tilesAfterTime(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Date.now();return Object.values(this._tiles).filter(c=>c.timeAdded>=i)}}class LA{constructor(i,c,d){this.painter=i,this.sourceCache=new nc(c),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:a.N;var b;if(!(c>=0&&c<y&&d>=0&&d<y))return 0;const E=this.getTerrainData(i),L=(b=E.tile)===null||b===void 0?void 0:b.dem;if(!L)return 0;const k=function(f,x,C){var M=x[0],R=x[1];return f[0]=C[0]*M+C[4]*R+C[12],f[1]=C[1]*M+C[5]*R+C[13],f}([],[c/y*a.N,d/y*a.N],E.u_terrain_matrix),O=[k[0]*L.dim,k[1]*L.dim],H=Math.floor(O[0]),$=Math.floor(O[1]),se=O[0]-H,fe=O[1]-$;return L.get(H,$)*(1-se)*(1-fe)+L.get(H+1,$)*se*(1-fe)+L.get(H,$+1)*(1-se)*fe+L.get(H+1,$+1)*se*fe}getElevationForLngLatZoom(i,c){const{tileID:d,mercatorX:y,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(i,c);return this.getElevation(d,y%a.N,b%a.N,a.N)}getElevation(i,c,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:a.N;return this.getDEMElevation(i,c,d,y)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const y=this.painter.context,b=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new $e(y,b,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new $e(y,new a.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ao([])}const c=this.sourceCache.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const y=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new $e(y,c.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),c.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const d=c&&c+c.tileID.key+i.key;if(d&&!this._demMatrixCache[d]){const y=this.sourceCache.sourceCache._source.maxzoom;let b=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=y?b=i.canonical.z-y:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const E=i.canonical.x-(i.canonical.x>>b<<b),L=i.canonical.y-(i.canonical.y>>b<<b),k=a.bc(new Float64Array(16),[1/(a.N<<b),1/(a.N<<b),0]);a.$(k,k,[E*a.N,L*a.N,0]),this._demMatrixCache[i.key]={matrix:k,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){const c=this.painter,d=c.width/devicePixelRatio,y=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new $e(c.context,{width:d,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new $e(c.context,{width:d,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(d,y,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,d,y))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,E=0;b<this._coordsTextureSize;b++)for(let L=0;L<this._coordsTextureSize;L++,E+=4)c[E+0]=255&L,c[E+1]=255&b,c[E+2]=L>>8<<4|b>>8,c[E+3]=0;const d=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),y=new $e(i,d,i.gl.RGBA,{premultiply:!1});return y.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(i){const c=new Uint8Array(4),d=this.painter.context,y=d.gl;d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),d.bindFramebuffer.set(null);const b=c[0]+(c[2]>>4<<8),E=c[1]+((15&c[2])<<8),L=this.coordsIndex[255-c[3]],k=L&&this.sourceCache.getTileByID(L);if(!k)return null;const O=this._coordsTextureSize,H=(1<<k.tileID.canonical.z)*O;return new a.U(this._allowMercatorOverflow(i,(k.tileID.canonical.x*O+b)/H),(k.tileID.canonical.y*O+E)/H,this.getElevation(k.tileID,b,E,O))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,c=new a.bd,d=new a.b0,y=this.meshSize,b=a.N/y,E=y*y;for(let $=0;$<=y;$++)for(let se=0;se<=y;se++)c.emplaceBack(se*b,$*b,0);for(let $=0;$<E;$+=y+1)for(let se=0;se<y;se++)d.emplaceBack(se+$,y+se+$+1,y+se+$+2),d.emplaceBack(se+$,y+se+$+2,se+$+1);const L=c.length,k=L+2*(y+1);for(const $ of[0,1])for(let se=0;se<=y;se++)for(const fe of[0,1])c.emplaceBack(se*b,$*a.N,fe);for(let $=0;$<2*y;$+=2)d.emplaceBack(k+$,k+$+1,k+$+3),d.emplaceBack(k+$,k+$+3,k+$+2),d.emplaceBack(L+$,L+$+3,L+$+1),d.emplaceBack(L+$,L+$+2,L+$+3);const O=c.length,H=O+2*(y+1);for(const $ of[0,1])for(let se=0;se<=y;se++)for(const fe of[0,1])c.emplaceBack($*a.N,se*b,fe);for(let $=0;$<2*y;$+=2)d.emplaceBack(O+$,O+$+1,O+$+3),d.emplaceBack(O+$,O+$+3,O+$+2),d.emplaceBack(H+$,H+$+3,H+$+1),d.emplaceBack(H+$,H+$+2,H+$+3);return this._mesh={indexBuffer:i.createIndexBuffer(d),vertexBuffer:i.createVertexBuffer(c,ic.members),segments:a.S.simpleSegment(0,0,c.length,d.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*a.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,c){var d;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(i,c);return(d=this.getMinMaxElevation(y).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(i){const c=this.getTerrainData(i).tile,d={minElevation:null,maxElevation:null};return c&&c.dem&&(d.minElevation=c.dem.min*this.exaggeration,d.maxElevation=c.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(i,c){const d=a.U.fromLngLat(i.wrap()),y=(1<<c)*a.N,b=d.x*y,E=d.y*y,L=Math.floor(b/a.N),k=Math.floor(E/a.N);return{tileID:new a.O(c,0,c,L,k),mercatorX:b,mercatorY:E}}_allowMercatorOverflow(i,c){const d=i.x<this.painter.width/2;let y=a.bf(c);const b=this.painter.transform.center.lng;return d&&Math.sign(y)>0&&Math.sign(b)<0||!d&&Math.sign(y)<0&&Math.sign(b)>0?(y=360*Math.sign(b)+y,a.G(y)):c}}class up{constructor(i,c,d){this._context=i,this._size=c,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new $e(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(d.texture),{id:i,fbo:c,texture:d,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>i.id!==c),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const zn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class fl{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new up(i.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(d=>!i._layers[d].isHidden(c)),this._coordsDescendingInv={};for(const d in i.sourceCaches){this._coordsDescendingInv[d]={};const y=i.sourceCaches[d].getVisibleCoordinates();for(const b of y){const E=this.terrain.sourceCache.getTerrainCoords(b);for(const L in E)this._coordsDescendingInv[d][L]||(this._coordsDescendingInv[d][L]=[]),this._coordsDescendingInv[d][L].push(E[L])}}this._coordsDescendingInvStr={};for(const d of i._order){const y=i._layers[d],b=y.source;if(zn[y.type]&&!this._coordsDescendingInvStr[b]){this._coordsDescendingInvStr[b]={};for(const E in this._coordsDescendingInv[b])this._coordsDescendingInvStr[b][E]=this._coordsDescendingInv[b][E].map(L=>L.key).sort().join()}}for(const d of this._renderableTiles)for(const y in this._coordsDescendingInvStr){const b=this._coordsDescendingInvStr[y][d.tileID.key];b&&b!==d.rttCoords[y]&&(d.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const c=i.type,d=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(zn[c]&&(this._prevType&&zn[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(i.id),!y))return!0;if(zn[this._prevType]||zn[c]&&y){this._prevType=c;const b=this._stacks.length-1,E=this._stacks[b]||[];for(const L of this._renderableTiles){if(this.pool.isFull()&&(yi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(L),L.rtt[b]){const O=this.pool.getObjectForId(L.rtt[b].id);if(O.stamp===L.rtt[b].stamp){this.pool.useObject(O);continue}}const k=this.pool.getOrCreateFreeObject();this.pool.useObject(k),this.pool.stampObject(k),L.rtt[b]={id:k.id,stamp:k.stamp},d.context.bindFramebuffer.set(k.fbo.framebuffer),d.context.clear({color:a.aT.transparent,stencil:0}),d.currentStencilSource=void 0;for(let O=0;O<E.length;O++){const H=d.style._layers[E[O]],$=H.source?this._coordsDescendingInv[H.source][L.tileID.key]:[L.tileID];d.context.viewport.set([0,0,k.fbo.width,k.fbo.height]),d._renderTileClippingMasks(H,$),d.renderLayer(d,d.style.sourceCaches[H.source],H,$),H.source&&(L.rttCoords[H.source]=this._coordsDescendingInvStr[H.source][L.tileID.key])}}return yi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),zn[c]}return!1}}const Ar=m,_r={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},gl=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},qc={showCompass:!0,showZoom:!0,visualizePitch:!1};class wa{constructor(i,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.mousedown=E=>{this.startMouse(a.e({},E,{ctrlKey:!0,preventDefault:()=>E.preventDefault()}),w.mousePos(this.element,E)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=E=>{this.moveMouse(E,w.mousePos(this.element,E))},this.mouseup=E=>{this.mouseRotate.dragEnd(E),this.mousePitch&&this.mousePitch.dragEnd(E),this.offTemp()},this.touchstart=E=>{E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,E.targetTouches)[0],this.startTouch(E,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=E=>{E.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,E.targetTouches)[0],this.moveTouch(E,this._lastPos))},this.touchend=E=>{E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const y=i.dragRotate._mouseRotate.getClickTolerance(),b=i.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=Js({clickTolerance:y,enable:!0}),this.touchRotate=(E=>{let{enable:L,clickTolerance:k,bearingDegreesPerPixelMoved:O=.8}=E;const H=new _a;return new oi({clickTolerance:k,move:($,se)=>({bearingDelta:(se.x-$.x)*O}),moveStateManager:H,enable:L,assignEvents:gl})})({clickTolerance:y,enable:!0}),this.map=i,d&&(this.mousePitch=Ps({clickTolerance:b,enable:!0}),this.touchPitch=(E=>{let{enable:L,clickTolerance:k,pitchDegreesPerPixelMoved:O=-.5}=E;const H=new _a;return new oi({clickTolerance:k,move:($,se)=>({pitchDelta:(se.y-$.y)*O}),moveStateManager:H,enable:L,assignEvents:gl})})({clickTolerance:b,enable:!0})),w.addEventListener(c,"mousedown",this.mousedown),w.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(c,"touchcancel",this.reset)}startMouse(i,c){this.mouseRotate.dragStart(i,c),this.mousePitch&&this.mousePitch.dragStart(i,c),w.disableDrag()}startTouch(i,c){this.touchRotate.dragStart(i,c),this.touchPitch&&this.touchPitch.dragStart(i,c),w.disableDrag()}moveMouse(i,c){const d=this.map,{bearingDelta:y}=this.mouseRotate.dragMove(i,c)||{};if(y&&d.setBearing(d.getBearing()+y),this.mousePitch){const{pitchDelta:b}=this.mousePitch.dragMove(i,c)||{};b&&d.setPitch(d.getPitch()+b)}}moveTouch(i,c){const d=this.map,{bearingDelta:y}=this.touchRotate.dragMove(i,c)||{};if(y&&d.setBearing(d.getBearing()+y),this.touchPitch){const{pitchDelta:b}=this.touchPitch.dragMove(i,c)||{};b&&d.setPitch(d.getPitch()+b)}}off(){const i=this.element;w.removeEventListener(i,"mousedown",this.mousedown),w.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let ui;function ta(v,i,c){if(v=new a.L(v.lng,v.lat),i){const d=new a.L(v.lng-360,v.lat),y=new a.L(v.lng+360,v.lat),b=c.locationPoint(v).distSqr(i);c.locationPoint(d).distSqr(i)<b?v=d:c.locationPoint(y).distSqr(i)<b&&(v=y)}for(;Math.abs(v.lng-c.center.lng)>180;){const d=c.locationPoint(v);if(d.x>=0&&d.y>=0&&d.x<=c.width&&d.y<=c.height)break;v.lng>c.center.lng?v.lng-=360:v.lng+=360}return v}const Qs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Kc(v,i,c){const d=v.classList;for(const y in Qs)d.remove(`maplibregl-${c}-anchor-${y}`);d.add(`maplibregl-${c}-anchor-${i}`)}class es extends a.E{constructor(i){if(super(),this._onKeyPress=c=>{const d=c.code,y=c.charCode||c.keyCode;d!=="Space"&&d!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=c=>{const d=c.originalEvent.target,y=this._element;this._popup&&(d===y||y.contains(d))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!d)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=ta(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${Qs[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${y}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const E=this._map.unproject(this._pos),L=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=E.distanceTo(this._lngLat)>20*L?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=c=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=a.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const c=w.createNS("http://www.w3.org/2000/svg","svg"),d=41,y=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${d}px`),c.setAttributeNS(null,"width",`${y}px`),c.setAttributeNS(null,"viewBox",`0 0 ${y} ${d}`);const b=w.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const E=w.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");const L=w.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"transform","translate(3.0, 29.0)"),L.setAttributeNS(null,"fill","#000000");const k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const M of k){const R=w.createNS("http://www.w3.org/2000/svg","ellipse");R.setAttributeNS(null,"opacity","0.04"),R.setAttributeNS(null,"cx","10.5"),R.setAttributeNS(null,"cy","5.80029008"),R.setAttributeNS(null,"rx",M.rx),R.setAttributeNS(null,"ry",M.ry),L.appendChild(R)}const O=w.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill",this._color);const H=w.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),O.appendChild(H);const $=w.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"opacity","0.25"),$.setAttributeNS(null,"fill","#000000");const se=w.createNS("http://www.w3.org/2000/svg","path");se.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),$.appendChild(se);const fe=w.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),fe.setAttributeNS(null,"fill","#FFFFFF");const f=w.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(8.0, 8.0)");const x=w.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#000000"),x.setAttributeNS(null,"opacity","0.25"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962");const C=w.createNS("http://www.w3.org/2000/svg","circle");C.setAttributeNS(null,"fill","#FFFFFF"),C.setAttributeNS(null,"cx","5.5"),C.setAttributeNS(null,"cy","5.5"),C.setAttributeNS(null,"r","5.4999962"),f.appendChild(x),f.appendChild(C),E.appendChild(L),E.appendChild(O),E.appendChild($),E.appendChild(fe),E.appendChild(f),c.appendChild(E),c.setAttributeNS(null,"height",d*this._scale+"px"),c.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(c),this._offset=a.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Kc(this._element,this._anchor,"marker"),i&&i.className)for(const c of i.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=a.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const y=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=a.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Ai={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ui=0,TA=!1;const UA={maxWidth:100,unit:"metric"};function PA(v,i,c){const d=c&&c.maxWidth||100,y=v._container.clientHeight/2,b=v.unproject([0,y]),E=v.unproject([d,y]),L=b.distanceTo(E);if(c&&c.unit==="imperial"){const k=3.2808*L;k>5280?io(i,d,k/5280,v._getUIString("ScaleControl.Miles")):io(i,d,k,v._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?io(i,d,L/1852,v._getUIString("ScaleControl.NauticalMiles")):L>=1e3?io(i,d,L/1e3,v._getUIString("ScaleControl.Kilometers")):io(i,d,L,v._getUIString("ScaleControl.Meters"))}function io(v,i,c,d){const y=function(b){const E=Math.pow(10,`${Math.floor(b)}`.length-1);let L=b/E;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(k){const O=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*O)/O}(L),E*L}(c);v.style.width=i*(y/c)+"px",v.innerHTML=`${y}&nbsp;${d}`}const sc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},$c=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Da(v){if(v){if(typeof v=="number"){const i=Math.round(Math.abs(v)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,v),"top-left":new a.P(i,i),"top-right":new a.P(-i,i),bottom:new a.P(0,-v),"bottom-left":new a.P(i,-i),"bottom-right":new a.P(-i,-i),left:new a.P(v,0),right:new a.P(-v,0)}}if(v instanceof a.P||Array.isArray(v)){const i=a.P.convert(v);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:a.P.convert(v.center||[0,0]),top:a.P.convert(v.top||[0,0]),"top-left":a.P.convert(v["top-left"]||[0,0]),"top-right":a.P.convert(v["top-right"]||[0,0]),bottom:a.P.convert(v.bottom||[0,0]),"bottom-left":a.P.convert(v["bottom-left"]||[0,0]),"bottom-right":a.P.convert(v["bottom-right"]||[0,0]),left:a.P.convert(v.left||[0,0]),right:a.P.convert(v.right||[0,0])}}return Da(new a.P(0,0))}const QA={extend:function(v){for(var i=arguments.length,c=new Array(i>1?i-1:0),d=1;d<i;d++)c[d-1]=arguments[d];return a.e(v,...c)},run(v){v()},logToElement(v){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"log";const d=window.document.getElementById(c);d&&(i&&(d.innerHTML=""),d.innerHTML+=`<br>${v}`)}},jo=m;class ni{static get version(){return jo}static get workerCount(){return hr.workerCount}static set workerCount(i){hr.workerCount=i}static get maxParallelImageRequests(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){a.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return a.c.WORKER_URL}static set workerUrl(i){a.c.WORKER_URL=i}static addProtocol(i,c){a.c.REGISTERED_PROTOCOLS[i]=c}static removeProtocol(i){delete a.c.REGISTERED_PROTOCOLS[i]}}return ni.Map=class extends Ku{constructor(v){if(a.bg.mark(a.bh.create),(v=a.e({},_r,v)).minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new FA(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),{bearingSnap:v.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=v.interactive,this._cooperativeGestures=v.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=v.maxTileCacheSize,this._maxTileCacheZoomLevels=v.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=v.collectResourceTiming,this._renderTaskQueue=new rc,this._controls=[],this._mapId=a.a2(),this._locale=a.e({},Gc,v.locale),this._clickTolerance=v.clickTolerance,this._overridePixelRatio=v.pixelRatio,this._maxCanvasSize=v.maxCanvasSize,this.transformCameraUpdate=v.transformCameraUpdate,this._imageQueueHandle=Y.addThrottleControl(()=>this.isMoving()),this._requestManager=new ne(v.transformRequest),typeof v.container=="string"){if(this._container=document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const c=Yn(d=>{this._trackResize&&!this._removed&&this.resize(d)._update()},50);this._resizeObserver=new ResizeObserver(d=>{i?c(d):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new tc(this,v),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=v.hash&&new Tn(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,a.e({},v.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=v.localIdeographFontFamily,this._validateStyle=v.validateStyle,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new cs({customAttribution:v.customAttribution})),v.maplibreLogo&&this.addControl(new xi,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new a.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new a.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new a.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(v,i){if(i===void 0&&(i=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=v.onAdd(this);this._controls.push(v);const d=this._controlPositions[i];return i.indexOf("bottom")!==-1?d.insertBefore(c,d.firstChild):d.appendChild(c),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(v);return i>-1&&this._controls.splice(i,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,i,c,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,i,c,d)}resize(v){var i;const c=this._containerDimensions(),d=c[0],y=c[1],b=this._getClampedPixelRatio(d,y);if(this._resizeCanvas(d,y,b),this.painter.resize(d,y,b),this.painter.overLimit()){const L=this.painter.context.gl;this._maxCanvasSize=[L.drawingBufferWidth,L.drawingBufferHeight];const k=this._getClampedPixelRatio(d,y);this._resizeCanvas(d,y,k),this.painter.resize(d,y,k)}this.transform.resize(d,y),(i=this._requestedCameraState)===null||i===void 0||i.resize(d,y);const E=!this._moving;return E&&(this.stop(),this.fire(new a.k("movestart",v)).fire(new a.k("move",v))),this.fire(new a.k("resize",v)),E&&this.fire(new a.k("moveend",v)),this}_getClampedPixelRatio(v,i){const{0:c,1:d}=this._maxCanvasSize,y=this.getPixelRatio(),b=v*y,E=i*y;return Math.min(b>c?c/b:1,E>d?d/E:1)*y}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(pe.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(v){return this._cooperativeGestures=v,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(v){return this.transform.locationPoint(a.L.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(a.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,i,c){if(v==="mouseenter"||v==="mouseover"){let d=!1;return{layer:i,listener:c,delegates:{mousemove:b=>{const E=this.getLayer(i)?this.queryRenderedFeatures(b.point,{layers:[i]}):[];E.length?d||(d=!0,c.call(this,new Ki(v,this,b.originalEvent,{features:E}))):d=!1},mouseout:()=>{d=!1}}}}if(v==="mouseleave"||v==="mouseout"){let d=!1;return{layer:i,listener:c,delegates:{mousemove:E=>{(this.getLayer(i)?this.queryRenderedFeatures(E.point,{layers:[i]}):[]).length?d=!0:d&&(d=!1,c.call(this,new Ki(v,this,E.originalEvent)))},mouseout:E=>{d&&(d=!1,c.call(this,new Ki(v,this,E.originalEvent)))}}}}{const d=y=>{const b=this.getLayer(i)?this.queryRenderedFeatures(y.point,{layers:[i]}):[];b.length&&(y.features=b,c.call(this,y),delete y.features)};return{layer:i,listener:c,delegates:{[v]:d}}}}on(v,i,c){if(c===void 0)return super.on(v,i);const d=this._createDelegatedListener(v,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(d);for(const y in d.delegates)this.on(y,d.delegates[y]);return this}once(v,i,c){if(c===void 0)return super.once(v,i);const d=this._createDelegatedListener(v,i,c);for(const y in d.delegates)this.once(y,d.delegates[y]);return this}off(v,i,c){return c===void 0?super.off(v,i):(this._delegatedListeners&&this._delegatedListeners[v]&&(d=>{const y=this._delegatedListeners[v];for(let b=0;b<y.length;b++){const E=y[b];if(E.layer===i&&E.listener===c){for(const L in E.delegates)this.off(L,E.delegates[L]);return y.splice(b,1),this}}})(),this)}queryRenderedFeatures(v,i){if(!this.style)return[];let c;const d=v instanceof a.P||Array.isArray(v),y=d?v:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(d?{}:v)||{},y instanceof a.P||typeof y[0]=="number")c=[a.P.convert(y)];else{const b=a.P.convert(y[0]),E=a.P.convert(y[1]);c=[b,new a.P(E.x,b.y),E,new a.P(b.x,E.y),b]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(v,i){return this.style.querySourceFeatures(v,i)}setStyle(v,i){return(i=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(v,i))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const i=this._locale[v];if(i==null)throw new Error(`Missing UI string '${v}'`);return i}_updateStyle(v,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,i));const c=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new Wr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,i,c):this.style.loadJSON(v,i,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Wr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,i){if(typeof v=="string"){const c=this._requestManager.transformRequest(v,K.Style);a.f(c,(d,y)=>{d?this.fire(new a.j(d)):y&&this._updateDiff(y,i)})}else typeof v=="object"&&this._updateDiff(v,i)}_updateDiff(v,i){try{this.style.setState(v,i)&&this._update(!0)}catch(c){a.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(v,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(v,i){return this._lazyInitEmptyStyle(),this.style.addSource(v,i),this._update(!0)}isSourceLoaded(v){const i=this.style&&this.style.sourceCaches[v];if(i!==void 0)return i.loaded();this.fire(new a.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const i=this.style.sourceCaches[v.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);for(const c in this.style._layers){const d=this.style._layers[c];d.type==="hillshade"&&d.source===v.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new LA(this.painter,i,v),this.painter.renderToTexture=new fl(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==v.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:v})),this}getTerrain(){var v,i;return(i=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const i in v){const c=v[i]._tiles;for(const d in c){const y=c[d];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}addSourceType(v,i,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(v,i,c)}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,i){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{pixelRatio:d=1,sdf:y=!1,stretchX:b,stretchY:E,content:L}=c;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||a.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:k,height:O,data:H}=i,$=i;return this.style.addImage(v,{data:new a.R({width:k,height:O},new Uint8Array(H)),pixelRatio:d,stretchX:b,stretchY:E,content:L,sdf:y,version:0,userImage:$}),$.onAdd&&$.onAdd(this,v),this}}{const{width:k,height:O,data:H}=a.h.getImageData(i);this.style.addImage(v,{data:new a.R({width:k,height:O},H),pixelRatio:d,stretchX:b,stretchY:E,content:L,sdf:y,version:0})}}updateImage(v,i){const c=this.style.getImage(v);if(!c)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=i instanceof HTMLImageElement||a.a(i)?a.h.getImageData(i):i,{width:y,height:b,data:E}=d;if(y===void 0||b===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==c.data.width||b!==c.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const L=!(i instanceof HTMLImageElement||a.a(i));return c.data.replace(E,L),this.style.updateImage(v,c),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,i){Y.getImage(this._requestManager.transformRequest(v,K.Image),i)}listImages(){return this.style.listImages()}addLayer(v,i){return this._lazyInitEmptyStyle(),this.style.addLayer(v,i),this._update(!0)}moveLayer(v,i){return this.style.moveLayer(v,i),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,i,c){return this.style.setLayerZoomRange(v,i,c),this._update(!0)}setFilter(v,i){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.style.setFilter(v,i,c),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,i,c){let d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.style.setPaintProperty(v,i,c,d),this._update(!0)}getPaintProperty(v,i){return this.style.getPaintProperty(v,i)}setLayoutProperty(v,i,c){let d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.style.setLayoutProperty(v,i,c,d),this._update(!0)}getLayoutProperty(v,i){return this.style.getLayoutProperty(v,i)}setGlyphs(v){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,i){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._lazyInitEmptyStyle(),this.style.addSprite(v,i,c,d=>{d||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setSprite(v,i,c=>{c||this._update(!0)}),this}setLight(v){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(v,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(v,i){return this.style.setFeatureState(v,i),this._update()}removeFeatureState(v,i){return this.style.removeFeatureState(v,i),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,i=0;return this._container&&(v=this._container.clientWidth||400,i=this._container.clientHeight||300),[v,i]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const i=this._canvasContainer=w.create("div","maplibregl-canvas-container",v);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),d=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],d);const y=this._controlContainer=w.create("div","maplibregl-control-container",v),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{b[E]=w.create("div",`maplibregl-ctrl-${E} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let v=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(v=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${v}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(v,i,c){this._canvas.width=Math.floor(c*v),this._canvas.height=Math.floor(c*i),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{i={requestedAttributes:v},d&&(i.statusMessage=d.statusMessage,i.type=d.type)},{once:!0});const c=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!c){const d="Failed to initialize WebGL";throw i?(i.message=d,new Error(JSON.stringify(i))):new Error(d)}this.painter=new ga(c,this.transform),S.testSupport(c)}_onCooperativeGesture(v,i,c){return!i&&c<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const y=this.transform.zoom,b=a.h.now();this.style.zoomHistory.update(y,b);const E=new a.a8(y,{now:b,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),L=E.crossFadingFactor();L===1&&L===this._crossFadingFactor||(c=!0,this._crossFadingFactor=L),this.style.update(E)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bg.mark(a.bh.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,a.bg.mark(a.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Y.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),a.bg.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.h.frame(v=>{a.bg.frame(v),this._frame=null,this._render(v)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return Ar}getCameraTargetElevation(){return this.transform.elevation}},ni.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const i=this._map.getZoom(),c=i===this._map.getMaxZoom(),d=i===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,c)=>{const d=this._map._getUIString(`NavigationControl.${c}`);i.title=d,i.setAttribute("aria-label",d)},this.options=a.e({},qc,v),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new wa(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,i){const c=w.create("button",v,this._container);return c.type="button",c.addEventListener("click",i),c}},ni.GeolocateControl=class extends a.E{constructor(v){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const c=new a.L(i.coords.longitude,i.coords.latitude),d=i.coords.accuracy,y=this._map.getBearing(),b=a.e({bearing:y},this.options.fitBoundsOptions),E=pe.fromLngLat(c,d);this._map.fitBounds(E,b,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const c=new a.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&TA)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new es({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new es({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")))})}},this.options=a.e({},Ai,v)}onAdd(v){return this._map=v,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;ui===void 0||c?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(d=>{ui=d.state!=="denied",i(ui)}).catch(()=>{ui=!!window.navigator.geolocation,i(ui)}):(ui=!!window.navigator.geolocation,i(ui)):i(ui)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ui=0,TA=!1}_isOutOfMapMaxBounds(v){const i=this._map.getMaxBounds(),c=v.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),i=v.getSouthEast(),c=v.getNorthEast(),d=i.distanceTo(c),y=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ui--,TA=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ui++,Ui>1?(v={maximumAge:6e5,timeout:0},TA=!0):(v=this.options.positionOptions,TA=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},ni.AttributionControl=cs,ni.LogoControl=xi,ni.ScaleControl=class{constructor(v){this._onMove=()=>{PA(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,PA(this._map,this._container,this.options)},this.options=a.e({},UA,v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},ni.FullscreenControl=class extends a.E{constructor(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},ni.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=v}onAdd(v){return this._map=v,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},ni.Popup=class extends a.E{constructor(v){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const E of this.options.className.split(" "))this._container.classList.add(E);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ta(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const c=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let d=this.options.anchor;const y=Da(this.options.offset);if(!d){const E=this._container.offsetWidth,L=this._container.offsetHeight;let k;k=c.y+y.bottom.y<L?["top"]:c.y>this._map.transform.height-L?["bottom"]:[],c.x<E/2?k.push("left"):c.x>this._map.transform.width-E/2&&k.push("right"),d=k.length===0?"bottom":k.join("-")}const b=c.add(y[d]).round();w.setTransform(this._container,`${Qs[d]} translate(${b.x}px,${b.y}px)`),Kc(this._container,d,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(sc),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=a.L.convert(v),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const i=document.createDocumentFragment(),c=document.createElement("body");let d;for(c.innerHTML=v;d=c.firstChild,d;)i.appendChild(d);return this.setDOMContent(i)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){this._container&&this._container.classList.add(v)}removeClassName(v){this._container&&this._container.classList.remove(v)}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector($c);v&&v.focus()}},ni.Marker=es,ni.Style=Wr,ni.LngLat=a.L,ni.LngLatBounds=pe,ni.Point=a.P,ni.MercatorCoordinate=a.U,ni.Evented=a.E,ni.AJAXError=a.bi,ni.config=a.c,ni.CanvasSource=zt,ni.GeoJSONSource=st,ni.ImageSource=Ct,ni.RasterDEMTileSource=tt,ni.RasterTileSource=Ge,ni.VectorTileSource=Re,ni.VideoSource=Ft,ni.setRTLTextPlugin=a.bj,ni.getRTLTextPluginStatus=a.bk,ni.prewarm=function(){qr().acquire(Lt)},ni.clearPrewarmedResources=function(){const v=Lr;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(Lt),Lr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},QA.extend(ni,{isSafari:a.ac,getPerformanceMetrics:a.bg.getPerformanceMetrics}),ni});var p=l;return p})})(Zy);var Yy=Zy.exports;const oa=Xy(Yy);class A4{constructor(){this._bearing=0,this._pitch=60,this._minpitchzoom=null}onAdd(e){this._map=e;let t=this;return this._btn=document.createElement("button"),this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-pitchtoggle-3d",this._btn.id="bt3D",this._btn.type="button",this._btn["aria-label"]="Vista 3D",this._btn.onclick=function(){if(t._btn.className.indexOf("3d")!=-1){let w={pitch:t._pitch,bearing:t._bearing};t._minpitchzoom&&e.getZoom()>t._minpitchzoom&&(w.zoom=t._minpitchzoom);var s=0,l=38.5,u=6,p=62.33,{longitude:a,latitude:m}=e.getCenter();e.getZoom()<10?e.setTerrain({source:"terrainMapZen",exaggeration:1.5}):a>=s&&a<=u&&m>=l&&m<=p?e.setTerrain({source:"terrainICGC",exaggeration:1.2}):e.setTerrain({source:"terrainMapZen",exaggeration:1.5}),e.easeTo(w),t._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-pitchtoggle-2d"}else e.setTerrain(null),e.easeTo({pitch:0,bearing:0}),t._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-pitchtoggle-3d"},this._container=document.createElement("div"),this._container.className="maplibregl-ctrl maplibregl-ctrl-group",this._container.title="Vista 3D",this._container.appendChild(this._btn),this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}}var l4=Object.defineProperty,c4=(n,e,t)=>e in n?l4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Qi=(n,e,t)=>(c4(n,typeof e!="symbol"?e+"":e,t),t);let u4=class{constructor(e){Qi(this,"map"),Qi(this,"width"),Qi(this,"height"),Qi(this,"svgCanvas"),Qi(this,"xLine"),Qi(this,"yLine"),Qi(this,"color","#535353"),this.map=e,this.mapResize=this.mapResize.bind(this)}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var e,t;this.width=(e=this.map)==null?void 0:e.getCanvas().clientWidth,this.height=(t=this.map)==null?void 0:t.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const e=this.width/2,t=this.height/2;this.yLine.setAttribute("x1",`${e}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${e}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${t}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${t}px`)}else console.error("element value is null")}createCanvas(e){if(this.width!==void 0&&this.height!==void 0){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.style.position="relative",t.setAttribute("width",`${this.width}px`),t.setAttribute("height",`${this.height}px`);const s=this.width/2,l=this.height/2;this.yLine=t.appendChild(this.createLine(s,0,s,this.height,this.color,"2px")),this.xLine=t.appendChild(this.createLine(0,l,this.width,l,this.color,"2px")),e==null||e.appendChild(t),this.svgCanvas=t}}createLine(e,t,s,l,u,p){const a=document.createElementNS("http://www.w3.org/2000/svg","line");return a.setAttribute("x1",e),a.setAttribute("y1",t),a.setAttribute("x2",s),a.setAttribute("y2",l),a.setAttribute("stroke-dasharray","5,5"),a.setAttribute("stroke",u),a.setAttribute("stroke-width",p),a}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}};function fi(n){"@babel/helpers - typeof";return fi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fi(n)}var Rs=Uint8Array,zs=Uint16Array,ch=Uint32Array,Qp=new Rs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Mp=new Rs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gg=new Rs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Jy=function(n,e){for(var t=new zs(31),s=0;s<31;++s)t[s]=e+=1<<n[s-1];for(var l=new ch(t[30]),s=1;s<30;++s)for(var u=t[s];u<t[s+1];++u)l[u]=u-t[s]<<5|s;return[t,l]},ev=Jy(Qp,2),tv=ev[0],mg=ev[1];tv[28]=258,mg[258]=28;for(var rv=Jy(Mp,0),h4=rv[0],iv=rv[1],yg=new zs(32768),zi=0;zi<32768;++zi){var Cl=(zi&43690)>>>1|(zi&21845)<<1;Cl=(Cl&52428)>>>2|(Cl&13107)<<2,Cl=(Cl&61680)>>>4|(Cl&3855)<<4,yg[zi]=((Cl&65280)>>>8|(Cl&255)<<8)>>>1}for(var tA=function(n,e,t){for(var s=n.length,l=0,u=new zs(e);l<s;++l)++u[n[l]-1];var p=new zs(e);for(l=0;l<e;++l)p[l]=p[l-1]+u[l-1]<<1;var a;if(t){a=new zs(1<<e);var m=15-e;for(l=0;l<s;++l)if(n[l])for(var w=l<<4|n[l],S=e-n[l],T=p[n[l]-1]++<<S,Q=T|(1<<S)-1;T<=Q;++T)a[yg[T]>>>m]=w}else for(a=new zs(s),l=0;l<s;++l)a[l]=yg[p[n[l]-1]++]>>>15-n[l];return a},Sl=new Rs(288),zi=0;zi<144;++zi)Sl[zi]=8;for(var zi=144;zi<256;++zi)Sl[zi]=9;for(var zi=256;zi<280;++zi)Sl[zi]=7;for(var zi=280;zi<288;++zi)Sl[zi]=8;for(var uh=new Rs(32),zi=0;zi<32;++zi)uh[zi]=5;var p4=tA(Sl,9,0),d4=tA(Sl,9,1),f4=tA(uh,5,0),g4=tA(uh,5,1),vg=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Ao=function(n,e,t){var s=e/8>>0;return(n[s]|n[s+1]<<8)>>>(e&7)&t},_g=function(n,e){var t=e/8>>0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>>(e&7)},wg=function(n){return(n/8>>0)+(n&7&&1)},nv=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var s=new(n instanceof zs?zs:n instanceof ch?ch:Rs)(t-e);return s.set(n.subarray(e,t)),s},m4=function(n,e,t){var s=n.length,l=!e||t,u=!t||t.i;t||(t={}),e||(e=new Rs(s*3));var p=function(Ge){var tt=e.length;if(Ge>tt){var st=new Rs(Math.max(tt*2,Ge));st.set(e),e=st}},a=t.f||0,m=t.p||0,w=t.b||0,S=t.l,T=t.d,Q=t.m,I=t.n,q=s*8;do{if(!S){t.f=a=Ao(n,m,1);var j=Ao(n,m+1,3);if(m+=3,j)if(j==1)S=d4,T=g4,Q=9,I=5;else if(j==2){var Y=Ao(n,m,31)+257,K=Ao(n,m+10,15)+4,ne=Y+Ao(n,m+5,31)+1;m+=14;for(var he=new Rs(ne),Ee=new Rs(19),De=0;De<K;++De)Ee[gg[De]]=Ao(n,m+De*3,7);m+=K*3;var Ne=vg(Ee),Qe=(1<<Ne)-1;if(!u&&m+ne*(Ne+7)>q)break;for(var ge=tA(Ee,Ne,1),De=0;De<ne;){var Ze=ge[Ao(n,m,Qe)];m+=Ze&15;var $e=Ze>>>4;if($e<16)he[De++]=$e;else{var ce=0,Ae=0;for($e==16?(Ae=3+Ao(n,m,3),m+=2,ce=he[De-1]):$e==17?(Ae=3+Ao(n,m,7),m+=3):$e==18&&(Ae=11+Ao(n,m,127),m+=7);Ae--;)he[De++]=ce}}var xe=he.subarray(0,Y),_e=he.subarray(Y);Q=vg(xe),I=vg(_e),S=tA(xe,Q,1),T=tA(_e,I,1)}else throw"invalid block type";else{var $e=wg(m)+4,et=n[$e-4]|n[$e-3]<<8,Je=$e+et;if(Je>s){if(u)throw"unexpected EOF";break}l&&p(w+et),e.set(n.subarray($e,Je),w),t.b=w+=et,t.p=m=Je*8;continue}if(m>q)throw"unexpected EOF"}l&&p(w+131072);for(var rt=(1<<Q)-1,Ye=(1<<I)-1,it=Q+I+18;u||m+it<q;){var ce=S[_g(n,m)&rt],nt=ce>>>4;if(m+=ce&15,m>q)throw"unexpected EOF";if(!ce)throw"invalid length/literal";if(nt<256)e[w++]=nt;else if(nt==256){S=null;break}else{var Bt=nt-254;if(nt>264){var De=nt-257,ee=Qp[De];Bt=Ao(n,m,(1<<ee)-1)+tv[De],m+=ee}var pe=T[_g(n,m)&Ye],ye=pe>>>4;if(!pe)throw"invalid distance";m+=pe&15;var _e=h4[ye];if(ye>3){var ee=Mp[ye];_e+=_g(n,m)&(1<<ee)-1,m+=ee}if(m>q)throw"unexpected EOF";l&&p(w+131072);for(var Re=w+Bt;w<Re;w+=4)e[w]=e[w-_e],e[w+1]=e[w+1-_e],e[w+2]=e[w+2-_e],e[w+3]=e[w+3-_e];w=Re}}t.l=S,t.p=m,t.b=w,S&&(a=1,t.m=Q,t.d=T,t.n=I)}while(!a);return w==e.length?e:nv(e,0,w)},HA=function(n,e,t){t<<=e&7;var s=e/8>>0;n[s]|=t,n[s+1]|=t>>>8},hh=function(n,e,t){t<<=e&7;var s=e/8>>0;n[s]|=t,n[s+1]|=t>>>8,n[s+2]|=t>>>16},bg=function(n,e){for(var t=[],s=0;s<n.length;++s)n[s]&&t.push({s,f:n[s]});var l=t.length,u=t.slice();if(!l)return[new Rs(0),0];if(l==1){var p=new Rs(t[0].s+1);return p[t[0].s]=1,[p,1]}t.sort(function(De,Ne){return De.f-Ne.f}),t.push({s:-1,f:25001});var a=t[0],m=t[1],w=0,S=1,T=2;for(t[0]={s:-1,f:a.f+m.f,l:a,r:m};S!=l-1;)a=t[t[w].f<t[T].f?w++:T++],m=t[w!=S&&t[w].f<t[T].f?w++:T++],t[S++]={s:-1,f:a.f+m.f,l:a,r:m};for(var Q=u[0].s,s=1;s<l;++s)u[s].s>Q&&(Q=u[s].s);var I=new zs(Q+1),q=xg(t[S-1],I,0);if(q>e){var s=0,j=0,Y=q-e,K=1<<Y;for(u.sort(function(Ne,Qe){return I[Qe.s]-I[Ne.s]||Ne.f-Qe.f});s<l;++s){var ne=u[s].s;if(I[ne]>e)j+=K-(1<<q-I[ne]),I[ne]=e;else break}for(j>>>=Y;j>0;){var he=u[s].s;I[he]<e?j-=1<<e-I[he]++-1:++s}for(;s>=0&&j;--s){var Ee=u[s].s;I[Ee]==e&&(--I[Ee],++j)}q=e}return[new Rs(I),q]},xg=function(n,e,t){return n.s==-1?Math.max(xg(n.l,e,t+1),xg(n.r,e,t+1)):e[n.s]=t},sv=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new zs(++e),s=0,l=n[0],u=1,p=function(m){t[s++]=m},a=1;a<=e;++a)if(n[a]==l&&a!=e)++u;else{if(!l&&u>2){for(;u>138;u-=138)p(32754);u>2&&(p(u>10?u-11<<5|28690:u-3<<5|12305),u=0)}else if(u>3){for(p(l),--u;u>6;u-=6)p(8304);u>2&&(p(u-3<<5|8208),u=0)}for(;u--;)p(l);u=1,l=n[a]}return[t.subarray(0,s),e]},ph=function(n,e){for(var t=0,s=0;s<e.length;++s)t+=n[s]*e[s];return t},kp=function(n,e,t){var s=t.length,l=wg(e+2);n[l]=s&255,n[l+1]=s>>>8,n[l+2]=n[l]^255,n[l+3]=n[l+1]^255;for(var u=0;u<s;++u)n[l+u+4]=t[u];return(l+4+s)*8},av=function(n,e,t,s,l,u,p,a,m,w,S){HA(e,S++,t),++l[256];for(var T=bg(l,15),Q=T[0],I=T[1],q=bg(u,15),j=q[0],Y=q[1],K=sv(Q),ne=K[0],he=K[1],Ee=sv(j),De=Ee[0],Ne=Ee[1],Qe=new zs(19),ge=0;ge<ne.length;++ge)Qe[ne[ge]&31]++;for(var ge=0;ge<De.length;++ge)Qe[De[ge]&31]++;for(var Ze=bg(Qe,7),$e=Ze[0],ce=Ze[1],Ae=19;Ae>4&&!$e[gg[Ae-1]];--Ae);var xe=w+5<<3,_e=ph(l,Sl)+ph(u,uh)+p,et=ph(l,Q)+ph(u,j)+p+14+3*Ae+ph(Qe,$e)+(2*Qe[16]+3*Qe[17]+7*Qe[18]);if(xe<=_e&&xe<=et)return kp(e,S,n.subarray(m,m+w));var Je,rt,Ye,it;if(HA(e,S,1+(et<_e)),S+=2,et<_e){Je=tA(Q,I,0),rt=Q,Ye=tA(j,Y,0),it=j;var nt=tA($e,ce,0);HA(e,S,he-257),HA(e,S+5,Ne-1),HA(e,S+10,Ae-4),S+=14;for(var ge=0;ge<Ae;++ge)HA(e,S+3*ge,$e[gg[ge]]);S+=3*Ae;for(var Bt=[ne,De],ee=0;ee<2;++ee)for(var pe=Bt[ee],ge=0;ge<pe.length;++ge){var ye=pe[ge]&31;HA(e,S,nt[ye]),S+=$e[ye],ye>15&&(HA(e,S,pe[ge]>>>5&127),S+=pe[ge]>>>12)}}else Je=p4,rt=Sl,Ye=f4,it=uh;for(var ge=0;ge<a;++ge)if(s[ge]>255){var ye=s[ge]>>>18&31;hh(e,S,Je[ye+257]),S+=rt[ye+257],ye>7&&(HA(e,S,s[ge]>>>23&31),S+=Qp[ye]);var Re=s[ge]&31;hh(e,S,Ye[Re]),S+=it[Re],Re>3&&(hh(e,S,s[ge]>>>5&8191),S+=Mp[Re])}else hh(e,S,Je[s[ge]]),S+=rt[s[ge]];return hh(e,S,Je[256]),S+rt[256]},y4=new ch([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),v4=new Rs(0),_4=function(n,e,t,s,l,u){var p=n.length,a=new Rs(s+p+5*(1+Math.floor(p/7e3))+l),m=a.subarray(s,a.length-l),w=0;if(!e||p<8)for(var S=0;S<=p;S+=65535){var T=S+65535;T<p?w=kp(m,w,n.subarray(S,T)):(m[S]=u,w=kp(m,w,n.subarray(S,p)))}else{for(var Q=y4[e-1],I=Q>>>13,q=Q&8191,j=(1<<t)-1,Y=new zs(32768),K=new zs(j+1),ne=Math.ceil(t/3),he=2*ne,Ee=function(Jt){return(n[Jt]^n[Jt+1]<<ne^n[Jt+2]<<he)&j},De=new ch(25e3),Ne=new zs(288),Qe=new zs(32),ge=0,Ze=0,S=0,$e=0,ce=0,Ae=0;S<p;++S){var xe=Ee(S),_e=S&32767,et=K[xe];if(Y[_e]=et,K[xe]=_e,ce<=S){var Je=p-S;if((ge>7e3||$e>24576)&&Je>423){w=av(n,m,0,De,Ne,Qe,Ze,$e,Ae,S-Ae,w),$e=ge=Ze=0,Ae=S;for(var rt=0;rt<286;++rt)Ne[rt]=0;for(var rt=0;rt<30;++rt)Qe[rt]=0}var Ye=2,it=0,nt=q,Bt=_e-et&32767;if(Je>2&&xe==Ee(S-Bt))for(var ee=Math.min(I,Je)-1,pe=Math.min(32767,S),ye=Math.min(258,Je);Bt<=pe&&--nt&&_e!=et;){if(n[S+Ye]==n[S+Ye-Bt]){for(var Re=0;Re<ye&&n[S+Re]==n[S+Re-Bt];++Re);if(Re>Ye){if(Ye=Re,it=Bt,Re>ee)break;for(var Ge=Math.min(Bt,Re-2),tt=0,rt=0;rt<Ge;++rt){var st=S-Bt+rt+32768&32767,ot=Y[st],Ct=st-ot+32768&32767;Ct>tt&&(tt=Ct,et=st)}}}_e=et,et=Y[_e],Bt+=_e-et+32768&32767}if(it){De[$e++]=268435456|mg[Ye]<<18|iv[it];var Ft=mg[Ye]&31,zt=iv[it]&31;Ze+=Qp[Ft]+Mp[zt],++Ne[257+Ft],++Qe[zt],ce=S+Ye,++ge}else De[$e++]=n[S],++Ne[n[S]]}}w=av(n,m,u,De,Ne,Qe,Ze,$e,Ae,S-Ae,w),u||(w=kp(m,w,v4))}return nv(a,0,s+wg(w)+l)},w4=function(){var n=1,e=0;return{p:function(t){for(var s=n,l=e,u=t.length,p=0;p!=u;){for(var a=Math.min(p+5552,u);p<a;++p)s+=t[p],l+=s;s%=65521,l%=65521}n=s,e=l},d:function(){return(n>>>8<<16|(e&255)<<8|e>>>8)+((n&255)<<23)*2}}},b4=function(n,e,t,s,l){return _4(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,s,!l)},x4=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},B4=function(n,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=s<<6|(s?32-2*s:1)},C4=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Bg(n,e){e===void 0&&(e={});var t=w4();t.p(n);var s=b4(n,e,2,4);return B4(s,e),x4(s,s.length-4,t.d()),s}function S4(n,e){return m4((C4(n),n.subarray(2,-4)),e)}/** @license
*
* jsPDF - PDF Document creation from JavaScript
* Version 2.5.1 Built on 2022-01-28T15:37:57.791Z
*                      CommitID 00000000
*
* Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
*               2015-2021 yWorks GmbH, http://www.yworks.com
*               2015-2021 Lukas Hollnder <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
*               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
*               2010 Aaron Spike, https://github.com/acspike
*               2012 Willow Systems Corporation, https://github.com/willowsystems
*               2012 Pablo Hess, https://github.com/pablohess
*               2012 Florian Jenett, https://github.com/fjenett
*               2013 Warren Weckesser, https://github.com/warrenweckesser
*               2013 Youssef Beddad, https://github.com/lifof
*               2013 Lee Driscoll, https://github.com/lsdriscoll
*               2013 Stefan Slonevskiy, https://github.com/stefslon
*               2013 Jeremy Morel, https://github.com/jmorel
*               2013 Christoph Hartmann, https://github.com/chris-rock
*               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
*               2014 James Makes, https://github.com/dollaruw
*               2014 Diego Casorran, https://github.com/diegocr
*               2014 Steven Spungin, https://github.com/Flamenco
*               2014 Kenneth Glassey, https://github.com/Gavvers
*
* Permission is hereby granted, free of charge, to any person obtaining
* a copy of this software and associated documentation files (the
* "Software"), to deal in the Software without restriction, including
* without limitation the rights to use, copy, modify, merge, publish,
* distribute, sublicense, and/or sell copies of the Software, and to
* permit persons to whom the Software is furnished to do so, subject to
* the following conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
* MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
* LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
* OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
* WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*
* Contributor(s):
*    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
*    kim3er, mfo, alnorth, Flamenco
*/var Pr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Cg(){Pr.console&&typeof Pr.console.log=="function"&&Pr.console.log.apply(Pr.console,arguments)}var Mi={log:Cg,warn:function(n){Pr.console&&(typeof Pr.console.warn=="function"?Pr.console.warn.apply(Pr.console,arguments):Cg.call(null,arguments))},error:function(n){Pr.console&&(typeof Pr.console.error=="function"?Pr.console.error.apply(Pr.console,arguments):Cg(n))}};function Sg(n,e,t){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){fc(s.response,e,t)},s.onerror=function(){Mi.error("could not download file")},s.send()}function ov(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Dp(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var dh,Fg,fc=Pr.saveAs||((typeof window>"u"?"undefined":fi(window))!=="object"||window!==Pr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var s=Pr.URL||Pr.webkitURL,l=document.createElement("a");e=e||n.name||"download",l.download=e,l.rel="noopener",typeof n=="string"?(l.href=n,l.origin!==location.origin?ov(l.href)?Sg(n,e,t):Dp(l,l.target="_blank"):Dp(l)):(l.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){Dp(l)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(ov(n))Sg(n,e,t);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){Dp(s)})}else navigator.msSaveOrOpenBlob(function(l,u){return u===void 0?u={autoBom:!1}:fi(u)!=="object"&&(Mi.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}(n,t),e)}:function(n,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return Sg(n,e,t);var l=n.type==="application/octet-stream",u=/constructor/i.test(Pr.HTMLElement)||Pr.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||l&&u)&&(typeof FileReader>"u"?"undefined":fi(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var S=a.result;S=p?S:S.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=S:location=S,s=null},a.readAsDataURL(n)}else{var m=Pr.URL||Pr.webkitURL,w=m.createObjectURL(n);s?s.location=w:location.href=w,s=null,setTimeout(function(){m.revokeObjectURL(w)},4e4)}});/**
* A class to parse color values
* @author Stoyan Stefanov <sstoo@gmail.com>
* {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
* @license Use it if you like it
*/function Av(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],s=0;s<t.length;s++){var l=t[s].re,u=t[s].process,p=l.exec(n);p&&(e=u(p),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),m=this.g.toString(16),w=this.b.toString(16);return a.length==1&&(a="0"+a),m.length==1&&(m="0"+m),w.length==1&&(w="0"+w),"#"+a+m+w}}/**
* @license
* Joseph Myers does not specify a particular license for his work.
*
* Author: Joseph Myers
* Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
*
* Modified by: Owen Leong
*/function Eg(n,e){var t=n[0],s=n[1],l=n[2],u=n[3];t=vs(t,s,l,u,e[0],7,-680876936),u=vs(u,t,s,l,e[1],12,-389564586),l=vs(l,u,t,s,e[2],17,606105819),s=vs(s,l,u,t,e[3],22,-1044525330),t=vs(t,s,l,u,e[4],7,-176418897),u=vs(u,t,s,l,e[5],12,1200080426),l=vs(l,u,t,s,e[6],17,-1473231341),s=vs(s,l,u,t,e[7],22,-45705983),t=vs(t,s,l,u,e[8],7,1770035416),u=vs(u,t,s,l,e[9],12,-1958414417),l=vs(l,u,t,s,e[10],17,-42063),s=vs(s,l,u,t,e[11],22,-1990404162),t=vs(t,s,l,u,e[12],7,1804603682),u=vs(u,t,s,l,e[13],12,-40341101),l=vs(l,u,t,s,e[14],17,-1502002290),t=_s(t,s=vs(s,l,u,t,e[15],22,1236535329),l,u,e[1],5,-165796510),u=_s(u,t,s,l,e[6],9,-1069501632),l=_s(l,u,t,s,e[11],14,643717713),s=_s(s,l,u,t,e[0],20,-373897302),t=_s(t,s,l,u,e[5],5,-701558691),u=_s(u,t,s,l,e[10],9,38016083),l=_s(l,u,t,s,e[15],14,-660478335),s=_s(s,l,u,t,e[4],20,-405537848),t=_s(t,s,l,u,e[9],5,568446438),u=_s(u,t,s,l,e[14],9,-1019803690),l=_s(l,u,t,s,e[3],14,-187363961),s=_s(s,l,u,t,e[8],20,1163531501),t=_s(t,s,l,u,e[13],5,-1444681467),u=_s(u,t,s,l,e[2],9,-51403784),l=_s(l,u,t,s,e[7],14,1735328473),t=ws(t,s=_s(s,l,u,t,e[12],20,-1926607734),l,u,e[5],4,-378558),u=ws(u,t,s,l,e[8],11,-2022574463),l=ws(l,u,t,s,e[11],16,1839030562),s=ws(s,l,u,t,e[14],23,-35309556),t=ws(t,s,l,u,e[1],4,-1530992060),u=ws(u,t,s,l,e[4],11,1272893353),l=ws(l,u,t,s,e[7],16,-155497632),s=ws(s,l,u,t,e[10],23,-1094730640),t=ws(t,s,l,u,e[13],4,681279174),u=ws(u,t,s,l,e[0],11,-358537222),l=ws(l,u,t,s,e[3],16,-722521979),s=ws(s,l,u,t,e[6],23,76029189),t=ws(t,s,l,u,e[9],4,-640364487),u=ws(u,t,s,l,e[12],11,-421815835),l=ws(l,u,t,s,e[15],16,530742520),t=bs(t,s=ws(s,l,u,t,e[2],23,-995338651),l,u,e[0],6,-198630844),u=bs(u,t,s,l,e[7],10,1126891415),l=bs(l,u,t,s,e[14],15,-1416354905),s=bs(s,l,u,t,e[5],21,-57434055),t=bs(t,s,l,u,e[12],6,1700485571),u=bs(u,t,s,l,e[3],10,-1894986606),l=bs(l,u,t,s,e[10],15,-1051523),s=bs(s,l,u,t,e[1],21,-2054922799),t=bs(t,s,l,u,e[8],6,1873313359),u=bs(u,t,s,l,e[15],10,-30611744),l=bs(l,u,t,s,e[6],15,-1560198380),s=bs(s,l,u,t,e[13],21,1309151649),t=bs(t,s,l,u,e[4],6,-145523070),u=bs(u,t,s,l,e[11],10,-1120210379),l=bs(l,u,t,s,e[2],15,718787259),s=bs(s,l,u,t,e[9],21,-343485551),n[0]=Fl(t,n[0]),n[1]=Fl(s,n[1]),n[2]=Fl(l,n[2]),n[3]=Fl(u,n[3])}function Np(n,e,t,s,l,u){return e=Fl(Fl(e,n),Fl(s,u)),Fl(e<<l|e>>>32-l,t)}function vs(n,e,t,s,l,u,p){return Np(e&t|~e&s,n,e,l,u,p)}function _s(n,e,t,s,l,u,p){return Np(e&s|t&~s,n,e,l,u,p)}function ws(n,e,t,s,l,u,p){return Np(e^t^s,n,e,l,u,p)}function bs(n,e,t,s,l,u,p){return Np(t^(e|~s),n,e,l,u,p)}function lv(n){var e,t=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Eg(s,F4(n.substring(e-64,e)));n=n.substring(e-64);var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)l[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(l[e>>2]|=128<<(e%4<<3),e>55)for(Eg(s,l),e=0;e<16;e++)l[e]=0;return l[14]=8*t,Eg(s,l),s}function F4(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}dh=Pr.atob.bind(Pr),Fg=Pr.btoa.bind(Pr);var cv="0123456789abcdef".split("");function E4(n){for(var e="",t=0;t<4;t++)e+=cv[n>>8*t+4&15]+cv[n>>8*t&15];return e}function I4(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Ig(n){return lv(n).map(I4).join("")}var L4=function(n){for(var e=0;e<n.length;e++)n[e]=E4(n[e]);return n.join("")}(lv("hello"))!="5d41402abc4b2a76b9719d911017c592";function Fl(n,e){if(L4){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
* @license
* FPDF is released under a permissive license: there is no usage restriction.
* You may embed it freely in your application (commercial or not), with or
* without modifications.
*
* Reference: http://www.fpdf.org/en/script/script37.php
*/function Lg(n,e){var t,s,l,u;if(n!==t){for(var p=(l=n,u=1+(256/n.length>>0),new Array(u+1).join(l)),a=[],m=0;m<256;m++)a[m]=m;var w=0;for(m=0;m<256;m++){var S=a[m];w=(w+S+p.charCodeAt(m))%256,a[m]=a[w],a[w]=S}t=n,s=a}else a=s;var T=e.length,Q=0,I=0,q="";for(m=0;m<T;m++)I=(I+(S=a[Q=(Q+1)%256]))%256,a[Q]=a[I],a[I]=S,p=a[(a[Q]+a[I])%256],q+=String.fromCharCode(e.charCodeAt(m)^p);return q}/**
* @license
* Licensed under the MIT License.
* http://opensource.org/licenses/mit-license
* Author: Owen Leong (@owenl131)
* Date: 15 Oct 2020
* References:
* https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
* https://github.com/foliojs/pdfkit/blob/master/lib/security.js
* http://www.fpdf.org/en/script/script37.php
*/var uv={print:4,modify:8,copy:16,"annot-forms":32};function su(n,e,t,s){this.v=1,this.r=2;var l=192;n.forEach(function(a){if(uv.perm!==void 0)throw new Error("Invalid permission: "+a);l+=uv[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var u=(e+this.padding).substr(0,32),p=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(u,p),this.P=-(1+(255^l)),this.encryptionKey=Ig(u+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Lg(this.encryptionKey,this.padding)}function au(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,s=0;s<t;s++){var l=n.charCodeAt(s);l<33||l===35||l===37||l===40||l===41||l===47||l===60||l===62||l===91||l===93||l===123||l===125||l>126?e+="#"+("0"+l.toString(16)).slice(-2):e+=n[s]}return e}function hv(n){if(fi(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,l){if(l=l||!1,typeof t!="string"||typeof s!="function"||typeof l!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var u=Math.random().toString(35);return e[t][u]=[s,!!l],u},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),l=[];for(var u in e[t]){var p=e[t][u];try{p[0].apply(n,s)}catch(a){Pr.console&&Mi.error("jsPDF PubSub Error",a.message,a)}p[1]&&l.push(u)}l.length&&l.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Op(n){if(!(this instanceof Op))return new Op(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function pv(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function gc(n,e,t,s,l){if(!(this instanceof gc))return new gc(n,e,t,s,l);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,pv.call(this,s,l)}function ou(n,e,t,s,l){if(!(this instanceof ou))return new ou(n,e,t,s,l);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,pv.call(this,s,l)}function Qr(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],l=arguments[2],u=arguments[3],p=[],a=1,m=16,w="S",S=null;fi(n=n||{})==="object"&&(t=n.orientation,s=n.unit||s,l=n.format||l,u=n.compress||n.compressPdf||u,(S=n.encryption||null)!==null&&(S.userPassword=S.userPassword||"",S.ownerPassword=S.ownerPassword||"",S.userPermissions=S.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(m=n.floatPrecision),w=n.defaultPathOperation||"S"),p=n.filters||(u===!0?["FlateEncode"]:p),s=s||"mm",t=(""+(t||"P")).toLowerCase();var T=n.putOnlyUsedFonts||!1,Q={},I={internal:{},__private__:{}};I.__private__.PubSub=hv;var q="1.3",j=I.__private__.getPdfVersion=function(){return q};I.__private__.setPdfVersion=function(P){q=P};var Y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};I.__private__.getPageFormats=function(){return Y};var K=I.__private__.getPageFormat=function(P){return Y[P]};l=l||"a4";var ne={COMPAT:"compat",ADVANCED:"advanced"},he=ne.COMPAT;function Ee(){this.saveGraphicsState(),Ue(new ke(Rt,0,0,-Rt,0,Wn()*Rt).toString()+" cm"),this.setFontSize(this.getFontSize()/Rt),w="n",he=ne.ADVANCED}function De(){this.restoreGraphicsState(),w="S",he=ne.COMPAT}var Ne=I.__private__.combineFontStyleAndFontWeight=function(P,J){if(P=="bold"&&J=="normal"||P=="bold"&&J==400||P=="normal"&&J=="italic"||P=="bold"&&J=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return J&&(P=J==400||J==="normal"?P==="italic"?"italic":"normal":J!=700&&J!=="bold"||P!=="normal"?(J==700?"bold":J)+""+P:"bold"),P};I.advancedAPI=function(P){var J=he===ne.COMPAT;return J&&Ee.call(this),typeof P!="function"||(P(this),J&&De.call(this)),this},I.compatAPI=function(P){var J=he===ne.ADVANCED;return J&&De.call(this),typeof P!="function"||(P(this),J&&Ee.call(this)),this},I.isAdvancedAPI=function(){return he===ne.ADVANCED};var Qe,ge=function(P){if(he!==ne.ADVANCED)throw new Error(P+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Ze=I.roundToPrecision=I.__private__.roundToPrecision=function(P,J){var Ce=e||J;if(isNaN(P)||isNaN(Ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return P.toFixed(Ce).replace(/0+$/,"")};Qe=I.hpf=I.__private__.hpf=typeof m=="number"?function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return Ze(P,m)}:m==="smart"?function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return Ze(P,P>-1&&P<1?16:5)}:function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return Ze(P,16)};var $e=I.f2=I.__private__.f2=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.f2");return Ze(P,2)},ce=I.__private__.f3=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.f3");return Ze(P,3)},Ae=I.scale=I.__private__.scale=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.scale");return he===ne.COMPAT?P*Rt:he===ne.ADVANCED?P:void 0},xe=function(P){return he===ne.COMPAT?Wn()-P:he===ne.ADVANCED?P:void 0},_e=function(P){return Ae(xe(P))};I.__private__.setPrecision=I.setPrecision=function(P){typeof parseInt(P,10)=="number"&&(e=parseInt(P,10))};var et,Je="00000000000000000000000000000000",rt=I.__private__.getFileId=function(){return Je},Ye=I.__private__.setFileId=function(P){return Je=P!==void 0&&/^[a-fA-F0-9]{32}$/.test(P)?P.toUpperCase():Je.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),S!==null&&(gn=new su(S.userPermissions,S.userPassword,S.ownerPassword,Je)),Je};I.setFileId=function(P){return Ye(P),this},I.getFileId=function(){return rt()};var it=I.__private__.convertDateToPDFDate=function(P){var J=P.getTimezoneOffset(),Ce=J<0?"+":"-",qe=Math.floor(Math.abs(J/60)),Ke=Math.abs(J%60),ct=[Ce,ye(qe),"'",ye(Ke),"'"].join("");return["D:",P.getFullYear(),ye(P.getMonth()+1),ye(P.getDate()),ye(P.getHours()),ye(P.getMinutes()),ye(P.getSeconds()),ct].join("")},nt=I.__private__.convertPDFDateToDate=function(P){var J=parseInt(P.substr(2,4),10),Ce=parseInt(P.substr(6,2),10)-1,qe=parseInt(P.substr(8,2),10),Ke=parseInt(P.substr(10,2),10),ct=parseInt(P.substr(12,2),10),Tt=parseInt(P.substr(14,2),10);return new Date(J,Ce,qe,Ke,ct,Tt,0)},Bt=I.__private__.setCreationDate=function(P){var J;if(P===void 0&&(P=new Date),P instanceof Date)J=it(P);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(P))throw new Error("Invalid argument passed to jsPDF.setCreationDate");J=P}return et=J},ee=I.__private__.getCreationDate=function(P){var J=et;return P==="jsDate"&&(J=nt(et)),J};I.setCreationDate=function(P){return Bt(P),this},I.getCreationDate=function(P){return ee(P)};var pe,ye=I.__private__.padd2=function(P){return("0"+parseInt(P)).slice(-2)},Re=I.__private__.padd2Hex=function(P){return("00"+(P=P.toString())).substr(P.length)},Ge=0,tt=[],st=[],ot=0,Ct=[],Ft=[],zt=!1,Vt=st,Jt=function(){Ge=0,ot=0,st=[],tt=[],Ct=[],sr=ht(),jt=ht()};I.__private__.setCustomOutputDestination=function(P){zt=!0,Vt=P};var ft=function(P){zt||(Vt=P)};I.__private__.resetCustomOutputDestination=function(){zt=!1,Vt=st};var Ue=I.__private__.out=function(P){return P=P.toString(),ot+=P.length+1,Vt.push(P),Vt},fr=I.__private__.write=function(P){return Ue(arguments.length===1?P.toString():Array.prototype.join.call(arguments," "))},Zt=I.__private__.getArrayBuffer=function(P){for(var J=P.length,Ce=new ArrayBuffer(J),qe=new Uint8Array(Ce);J--;)qe[J]=P.charCodeAt(J);return Ce},bt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];I.__private__.getStandardFonts=function(){return bt};var ze=n.fontSize||16;I.__private__.setFontSize=I.setFontSize=function(P){return ze=he===ne.ADVANCED?P/Rt:P,this};var Ut,Pt=I.__private__.getFontSize=I.getFontSize=function(){return he===ne.COMPAT?ze:ze*Rt},Qt=n.R2L||!1;I.__private__.setR2L=I.setR2L=function(P){return Qt=P,this},I.__private__.getR2L=I.getR2L=function(){return Qt};var Lt,hr=I.__private__.setZoomMode=function(P){var J=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(P))Ut=P;else if(isNaN(P)){if(J.indexOf(P)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+P+'" is not recognized.');Ut=P}else Ut=parseInt(P,10)};I.__private__.getZoomMode=function(){return Ut};var wr,Lr=I.__private__.setPageMode=function(P){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(P)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+P+'" is not recognized.');Lt=P};I.__private__.getPageMode=function(){return Lt};var qr=I.__private__.setLayoutMode=function(P){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(P)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+P+'" is not recognized.');wr=P};I.__private__.getLayoutMode=function(){return wr},I.__private__.setDisplayMode=I.setDisplayMode=function(P,J,Ce){return hr(P),qr(J),Lr(Ce),this};var gr={title:"",subject:"",author:"",keywords:"",creator:""};I.__private__.getDocumentProperty=function(P){if(Object.keys(gr).indexOf(P)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return gr[P]},I.__private__.getDocumentProperties=function(){return gr},I.__private__.setDocumentProperties=I.setProperties=I.setDocumentProperties=function(P){for(var J in gr)gr.hasOwnProperty(J)&&P[J]&&(gr[J]=P[J]);return this},I.__private__.setDocumentProperty=function(P,J){if(Object.keys(gr).indexOf(P)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return gr[P]=J};var br,Rt,vt,Cr,Tr,Dr={},Vr={},xt=[],Kt={},rr={},Or={},bi={},Nt=null,$r=0,ue=[],Z=new hv(I),ie=n.hotfixes||[],le={},ve={},be=[],ke=function P(J,Ce,qe,Ke,ct,Tt){if(!(this instanceof P))return new P(J,Ce,qe,Ke,ct,Tt);isNaN(J)&&(J=1),isNaN(Ce)&&(Ce=0),isNaN(qe)&&(qe=0),isNaN(Ke)&&(Ke=1),isNaN(ct)&&(ct=0),isNaN(Tt)&&(Tt=0),this._matrix=[J,Ce,qe,Ke,ct,Tt]};Object.defineProperty(ke.prototype,"sx",{get:function(){return this._matrix[0]},set:function(P){this._matrix[0]=P}}),Object.defineProperty(ke.prototype,"shy",{get:function(){return this._matrix[1]},set:function(P){this._matrix[1]=P}}),Object.defineProperty(ke.prototype,"shx",{get:function(){return this._matrix[2]},set:function(P){this._matrix[2]=P}}),Object.defineProperty(ke.prototype,"sy",{get:function(){return this._matrix[3]},set:function(P){this._matrix[3]=P}}),Object.defineProperty(ke.prototype,"tx",{get:function(){return this._matrix[4]},set:function(P){this._matrix[4]=P}}),Object.defineProperty(ke.prototype,"ty",{get:function(){return this._matrix[5]},set:function(P){this._matrix[5]=P}}),Object.defineProperty(ke.prototype,"a",{get:function(){return this._matrix[0]},set:function(P){this._matrix[0]=P}}),Object.defineProperty(ke.prototype,"b",{get:function(){return this._matrix[1]},set:function(P){this._matrix[1]=P}}),Object.defineProperty(ke.prototype,"c",{get:function(){return this._matrix[2]},set:function(P){this._matrix[2]=P}}),Object.defineProperty(ke.prototype,"d",{get:function(){return this._matrix[3]},set:function(P){this._matrix[3]=P}}),Object.defineProperty(ke.prototype,"e",{get:function(){return this._matrix[4]},set:function(P){this._matrix[4]=P}}),Object.defineProperty(ke.prototype,"f",{get:function(){return this._matrix[5]},set:function(P){this._matrix[5]=P}}),Object.defineProperty(ke.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ke.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ke.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ke.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ke.prototype.join=function(P){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Qe).join(P)},ke.prototype.multiply=function(P){var J=P.sx*this.sx+P.shy*this.shx,Ce=P.sx*this.shy+P.shy*this.sy,qe=P.shx*this.sx+P.sy*this.shx,Ke=P.shx*this.shy+P.sy*this.sy,ct=P.tx*this.sx+P.ty*this.shx+this.tx,Tt=P.tx*this.shy+P.ty*this.sy+this.ty;return new ke(J,Ce,qe,Ke,ct,Tt)},ke.prototype.decompose=function(){var P=this.sx,J=this.shy,Ce=this.shx,qe=this.sy,Ke=this.tx,ct=this.ty,Tt=Math.sqrt(P*P+J*J),wt=(P/=Tt)*Ce+(J/=Tt)*qe;Ce-=P*wt,qe-=J*wt;var mr=Math.sqrt(Ce*Ce+qe*qe);return wt/=mr,P*(qe/=mr)<J*(Ce/=mr)&&(P=-P,J=-J,wt=-wt,Tt=-Tt),{scale:new ke(Tt,0,0,mr,0,0),translate:new ke(1,0,0,1,Ke,ct),rotate:new ke(P,J,-J,P,0,0),skew:new ke(1,0,wt,1,0,0)}},ke.prototype.toString=function(P){return this.join(" ")},ke.prototype.inversed=function(){var P=this.sx,J=this.shy,Ce=this.shx,qe=this.sy,Ke=this.tx,ct=this.ty,Tt=1/(P*qe-J*Ce),wt=qe*Tt,mr=-J*Tt,ar=-Ce*Tt,cr=P*Tt;return new ke(wt,mr,ar,cr,-wt*Ke-ar*ct,-mr*Ke-cr*ct)},ke.prototype.applyToPoint=function(P){var J=P.x*this.sx+P.y*this.shx+this.tx,Ce=P.x*this.shy+P.y*this.sy+this.ty;return new Wa(J,Ce)},ke.prototype.applyToRectangle=function(P){var J=this.applyToPoint(P),Ce=this.applyToPoint(new Wa(P.x+P.w,P.y+P.h));return new Xa(J.x,J.y,Ce.x-J.x,Ce.y-J.y)},ke.prototype.clone=function(){var P=this.sx,J=this.shy,Ce=this.shx,qe=this.sy,Ke=this.tx,ct=this.ty;return new ke(P,J,Ce,qe,Ke,ct)},I.Matrix=ke;var Oe=I.matrixMult=function(P,J){return J.multiply(P)},Te=new ke(1,0,0,1,0,0);I.unitMatrix=I.identityMatrix=Te;var Ve=function(P,J){if(!rr[P]){var Ce=(J instanceof gc?"Sh":"P")+(Object.keys(Kt).length+1).toString(10);J.id=Ce,rr[P]=Ce,Kt[Ce]=J,Z.publish("addPattern",J)}};I.ShadingPattern=gc,I.TilingPattern=ou,I.addShadingPattern=function(P,J){return ge("addShadingPattern()"),Ve(P,J),this},I.beginTilingPattern=function(P){ge("beginTilingPattern()"),BA(P.boundingBox[0],P.boundingBox[1],P.boundingBox[2]-P.boundingBox[0],P.boundingBox[3]-P.boundingBox[1],P.matrix)},I.endTilingPattern=function(P,J){ge("endTilingPattern()"),J.stream=Ft[pe].join(`
`),Ve(P,J),Z.publish("endTilingPattern",J),be.pop().restore()};var lt=I.__private__.newObject=function(){var P=ht();return gt(P,!0),P},ht=I.__private__.newObjectDeferred=function(){return Ge++,tt[Ge]=function(){return ot},Ge},gt=function(P,J){return J=typeof J=="boolean"&&J,tt[P]=ot,J&&Ue(P+" 0 obj"),P},nr=I.__private__.newAdditionalObject=function(){var P={objId:ht(),content:""};return Ct.push(P),P},sr=ht(),jt=ht(),Yt=I.__private__.decodeColorString=function(P){var J=P.split(" ");if(J.length!==2||J[1]!=="g"&&J[1]!=="G")J.length===5&&(J[4]==="k"||J[4]==="K")&&(J=[(1-J[0])*(1-J[3]),(1-J[1])*(1-J[3]),(1-J[2])*(1-J[3]),"r"]);else{var Ce=parseFloat(J[0]);J=[Ce,Ce,Ce,"r"]}for(var qe="#",Ke=0;Ke<3;Ke++)qe+=("0"+Math.floor(255*parseFloat(J[Ke])).toString(16)).slice(-2);return qe},ur=I.__private__.encodeColorString=function(P){var J;typeof P=="string"&&(P={ch1:P});var Ce=P.ch1,qe=P.ch2,Ke=P.ch3,ct=P.ch4,Tt=P.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ce=="string"&&Ce.charAt(0)!=="#"){var wt=new Av(Ce);if(wt.ok)Ce=wt.toHex();else if(!/^\d*\.?\d*$/.test(Ce))throw new Error('Invalid color "'+Ce+'" passed to jsPDF.encodeColorString.')}if(typeof Ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ce)&&(Ce="#"+Ce[1]+Ce[1]+Ce[2]+Ce[2]+Ce[3]+Ce[3]),typeof Ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ce)){var mr=parseInt(Ce.substr(1),16);Ce=mr>>16&255,qe=mr>>8&255,Ke=255&mr}if(qe===void 0||ct===void 0&&Ce===qe&&qe===Ke)if(typeof Ce=="string")J=Ce+" "+Tt[0];else switch(P.precision){case 2:J=$e(Ce/255)+" "+Tt[0];break;case 3:default:J=ce(Ce/255)+" "+Tt[0]}else if(ct===void 0||fi(ct)==="object"){if(ct&&!isNaN(ct.a)&&ct.a===0)return J=["1.","1.","1.",Tt[1]].join(" ");if(typeof Ce=="string")J=[Ce,qe,Ke,Tt[1]].join(" ");else switch(P.precision){case 2:J=[$e(Ce/255),$e(qe/255),$e(Ke/255),Tt[1]].join(" ");break;default:case 3:J=[ce(Ce/255),ce(qe/255),ce(Ke/255),Tt[1]].join(" ")}}else if(typeof Ce=="string")J=[Ce,qe,Ke,ct,Tt[2]].join(" ");else switch(P.precision){case 2:J=[$e(Ce),$e(qe),$e(Ke),$e(ct),Tt[2]].join(" ");break;case 3:default:J=[ce(Ce),ce(qe),ce(Ke),ce(ct),Tt[2]].join(" ")}return J},Br=I.__private__.getFilters=function(){return p},Rr=I.__private__.putStream=function(P){var J=(P=P||{}).data||"",Ce=P.filters||Br(),qe=P.alreadyAppliedFilters||[],Ke=P.addLength1||!1,ct=J.length,Tt=P.objectId,wt=function(Yi){return Yi};if(S!==null&&Tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");S!==null&&(wt=gn.encryptor(Tt,0));var mr={};Ce===!0&&(Ce=["FlateEncode"]);var ar=P.additionalKeyValues||[],cr=(mr=Qr.API.processDataByFilters!==void 0?Qr.API.processDataByFilters(J,Ce):{data:J,reverseChain:[]}).reverseChain+(Array.isArray(qe)?qe.join(" "):qe.toString());if(mr.data.length!==0&&(ar.push({key:"Length",value:mr.data.length}),Ke===!0&&ar.push({key:"Length1",value:ct})),cr.length!=0)if(cr.split("/").length-1==1)ar.push({key:"Filter",value:cr});else{ar.push({key:"Filter",value:"["+cr+"]"});for(var Kr=0;Kr<ar.length;Kr+=1)if(ar[Kr].key==="DecodeParms"){for(var Li=[],ki=0;ki<mr.reverseChain.split("/").length-1;ki+=1)Li.push("null");Li.push(ar[Kr].value),ar[Kr].value="["+Li.join(" ")+"]"}}Ue("<<");for(var Di=0;Di<ar.length;Di++)Ue("/"+ar[Di].key+" "+ar[Di].value);Ue(">>"),mr.data.length!==0&&(Ue("stream"),Ue(wt(mr.data)),Ue("endstream"))},Sr=I.__private__.putPage=function(P){var J=P.number,Ce=P.data,qe=P.objId,Ke=P.contentsObjId;gt(qe,!0),Ue("<</Type /Page"),Ue("/Parent "+P.rootDictionaryObjId+" 0 R"),Ue("/Resources "+P.resourceDictionaryObjId+" 0 R"),Ue("/MediaBox ["+parseFloat(Qe(P.mediaBox.bottomLeftX))+" "+parseFloat(Qe(P.mediaBox.bottomLeftY))+" "+Qe(P.mediaBox.topRightX)+" "+Qe(P.mediaBox.topRightY)+"]"),P.cropBox!==null&&Ue("/CropBox ["+Qe(P.cropBox.bottomLeftX)+" "+Qe(P.cropBox.bottomLeftY)+" "+Qe(P.cropBox.topRightX)+" "+Qe(P.cropBox.topRightY)+"]"),P.bleedBox!==null&&Ue("/BleedBox ["+Qe(P.bleedBox.bottomLeftX)+" "+Qe(P.bleedBox.bottomLeftY)+" "+Qe(P.bleedBox.topRightX)+" "+Qe(P.bleedBox.topRightY)+"]"),P.trimBox!==null&&Ue("/TrimBox ["+Qe(P.trimBox.bottomLeftX)+" "+Qe(P.trimBox.bottomLeftY)+" "+Qe(P.trimBox.topRightX)+" "+Qe(P.trimBox.topRightY)+"]"),P.artBox!==null&&Ue("/ArtBox ["+Qe(P.artBox.bottomLeftX)+" "+Qe(P.artBox.bottomLeftY)+" "+Qe(P.artBox.topRightX)+" "+Qe(P.artBox.topRightY)+"]"),typeof P.userUnit=="number"&&P.userUnit!==1&&Ue("/UserUnit "+P.userUnit),Z.publish("putPage",{objId:qe,pageContext:ue[J],pageNumber:J,page:Ce}),Ue("/Contents "+Ke+" 0 R"),Ue(">>"),Ue("endobj");var ct=Ce.join(`
`);return he===ne.ADVANCED&&(ct+=`
Q`),gt(Ke,!0),Rr({data:ct,filters:Br(),objectId:Ke}),Ue("endobj"),qe},Le=I.__private__.putPages=function(){var P,J,Ce=[];for(P=1;P<=$r;P++)ue[P].objId=ht(),ue[P].contentsObjId=ht();for(P=1;P<=$r;P++)Ce.push(Sr({number:P,data:Ft[P],objId:ue[P].objId,contentsObjId:ue[P].contentsObjId,mediaBox:ue[P].mediaBox,cropBox:ue[P].cropBox,bleedBox:ue[P].bleedBox,trimBox:ue[P].trimBox,artBox:ue[P].artBox,userUnit:ue[P].userUnit,rootDictionaryObjId:sr,resourceDictionaryObjId:jt}));gt(sr,!0),Ue("<</Type /Pages");var qe="/Kids [";for(J=0;J<$r;J++)qe+=Ce[J]+" 0 R ";Ue(qe+"]"),Ue("/Count "+$r),Ue(">>"),Ue("endobj"),Z.publish("postPutPages")},Mt=function(P){Z.publish("putFont",{font:P,out:Ue,newObject:lt,putStream:Rr}),P.isAlreadyPutted!==!0&&(P.objectNumber=lt(),Ue("<<"),Ue("/Type /Font"),Ue("/BaseFont /"+au(P.postScriptName)),Ue("/Subtype /Type1"),typeof P.encoding=="string"&&Ue("/Encoding /"+P.encoding),Ue("/FirstChar 32"),Ue("/LastChar 255"),Ue(">>"),Ue("endobj"))},yt=function(){for(var P in Dr)Dr.hasOwnProperty(P)&&(T===!1||T===!0&&Q.hasOwnProperty(P))&&Mt(Dr[P])},vr=function(P){P.objectNumber=lt();var J=[];J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Form"}),J.push({key:"BBox",value:"["+[Qe(P.x),Qe(P.y),Qe(P.x+P.width),Qe(P.y+P.height)].join(" ")+"]"}),J.push({key:"Matrix",value:"["+P.matrix.toString()+"]"});var Ce=P.pages[1].join(`
`);Rr({data:Ce,additionalKeyValues:J,objectId:P.objectNumber}),Ue("endobj")},Nr=function(){for(var P in le)le.hasOwnProperty(P)&&vr(le[P])},di=function(P,J){var Ce,qe=[],Ke=1/(J-1);for(Ce=0;Ce<1;Ce+=Ke)qe.push(Ce);if(qe.push(1),P[0].offset!=0){var ct={offset:0,color:P[0].color};P.unshift(ct)}if(P[P.length-1].offset!=1){var Tt={offset:1,color:P[P.length-1].color};P.push(Tt)}for(var wt="",mr=0,ar=0;ar<qe.length;ar++){for(Ce=qe[ar];Ce>P[mr+1].offset;)mr++;var cr=P[mr].offset,Kr=(Ce-cr)/(P[mr+1].offset-cr),Li=P[mr].color,ki=P[mr+1].color;wt+=Re(Math.round((1-Kr)*Li[0]+Kr*ki[0]).toString(16))+Re(Math.round((1-Kr)*Li[1]+Kr*ki[1]).toString(16))+Re(Math.round((1-Kr)*Li[2]+Kr*ki[2]).toString(16))}return wt.trim()},Ii=function(P,J){J||(J=21);var Ce=lt(),qe=di(P.colors,J),Ke=[];Ke.push({key:"FunctionType",value:"0"}),Ke.push({key:"Domain",value:"[0.0 1.0]"}),Ke.push({key:"Size",value:"["+J+"]"}),Ke.push({key:"BitsPerSample",value:"8"}),Ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Rr({data:qe,additionalKeyValues:Ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ce}),Ue("endobj"),P.objectNumber=lt(),Ue("<< /ShadingType "+P.type),Ue("/ColorSpace /DeviceRGB");var ct="/Coords ["+Qe(parseFloat(P.coords[0]))+" "+Qe(parseFloat(P.coords[1]))+" ";P.type===2?ct+=Qe(parseFloat(P.coords[2]))+" "+Qe(parseFloat(P.coords[3])):ct+=Qe(parseFloat(P.coords[2]))+" "+Qe(parseFloat(P.coords[3]))+" "+Qe(parseFloat(P.coords[4]))+" "+Qe(parseFloat(P.coords[5])),Ue(ct+="]"),P.matrix&&Ue("/Matrix ["+P.matrix.toString()+"]"),Ue("/Function "+Ce+" 0 R"),Ue("/Extend [true true]"),Ue(">>"),Ue("endobj")},qn=function(P,J){var Ce=ht(),qe=lt();J.push({resourcesOid:Ce,objectOid:qe}),P.objectNumber=qe;var Ke=[];Ke.push({key:"Type",value:"/Pattern"}),Ke.push({key:"PatternType",value:"1"}),Ke.push({key:"PaintType",value:"1"}),Ke.push({key:"TilingType",value:"1"}),Ke.push({key:"BBox",value:"["+P.boundingBox.map(Qe).join(" ")+"]"}),Ke.push({key:"XStep",value:Qe(P.xStep)}),Ke.push({key:"YStep",value:Qe(P.yStep)}),Ke.push({key:"Resources",value:Ce+" 0 R"}),P.matrix&&Ke.push({key:"Matrix",value:"["+P.matrix.toString()+"]"}),Rr({data:P.stream,additionalKeyValues:Ke,objectId:P.objectNumber}),Ue("endobj")},Hi=function(P){var J;for(J in Kt)Kt.hasOwnProperty(J)&&(Kt[J]instanceof gc?Ii(Kt[J]):Kt[J]instanceof ou&&qn(Kt[J],P))},Wi=function(P){for(var J in P.objectNumber=lt(),Ue("<<"),P)switch(J){case"opacity":Ue("/ca "+$e(P[J]));break;case"stroke-opacity":Ue("/CA "+$e(P[J]))}Ue(">>"),Ue("endobj")},ii=function(){var P;for(P in Or)Or.hasOwnProperty(P)&&Wi(Or[P])},bo=function(){for(var P in Ue("/XObject <<"),le)le.hasOwnProperty(P)&&le[P].objectNumber>=0&&Ue("/"+P+" "+le[P].objectNumber+" 0 R");Z.publish("putXobjectDict"),Ue(">>")},pA=function(){gn.oid=lt(),Ue("<<"),Ue("/Filter /Standard"),Ue("/V "+gn.v),Ue("/R "+gn.r),Ue("/U <"+gn.toHexString(gn.U)+">"),Ue("/O <"+gn.toHexString(gn.O)+">"),Ue("/P "+gn.P),Ue(">>"),Ue("endobj")},Xi=function(){for(var P in Ue("/Font <<"),Dr)Dr.hasOwnProperty(P)&&(T===!1||T===!0&&Q.hasOwnProperty(P))&&Ue("/"+P+" "+Dr[P].objectNumber+" 0 R");Ue(">>")},Dn=function(){if(Object.keys(Kt).length>0){for(var P in Ue("/Shading <<"),Kt)Kt.hasOwnProperty(P)&&Kt[P]instanceof gc&&Kt[P].objectNumber>=0&&Ue("/"+P+" "+Kt[P].objectNumber+" 0 R");Z.publish("putShadingPatternDict"),Ue(">>")}},dA=function(P){if(Object.keys(Kt).length>0){for(var J in Ue("/Pattern <<"),Kt)Kt.hasOwnProperty(J)&&Kt[J]instanceof I.TilingPattern&&Kt[J].objectNumber>=0&&Kt[J].objectNumber<P&&Ue("/"+J+" "+Kt[J].objectNumber+" 0 R");Z.publish("putTilingPatternDict"),Ue(">>")}},Kn=function(){if(Object.keys(Or).length>0){var P;for(P in Ue("/ExtGState <<"),Or)Or.hasOwnProperty(P)&&Or[P].objectNumber>=0&&Ue("/"+P+" "+Or[P].objectNumber+" 0 R");Z.publish("putGStateDict"),Ue(">>")}},Wr=function(P){gt(P.resourcesOid,!0),Ue("<<"),Ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Xi(),Dn(),dA(P.objectOid),Kn(),bo(),Ue(">>"),Ue("endobj")},xo=function(){var P=[];yt(),ii(),Nr(),Hi(P),Z.publish("putResources"),P.forEach(Wr),Wr({resourcesOid:jt,objectOid:Number.MAX_SAFE_INTEGER}),Z.publish("postPutResources")},Ea=function(){Z.publish("putAdditionalObjects");for(var P=0;P<Ct.length;P++){var J=Ct[P];gt(J.objId,!0),Ue(J.content),Ue("endobj")}Z.publish("postPutAdditionalObjects")},mi=function(P){Vr[P.fontName]=Vr[P.fontName]||{},Vr[P.fontName][P.fontStyle]=P.id},Xr=function(P,J,Ce,qe,Ke){var ct={id:"F"+(Object.keys(Dr).length+1).toString(10),postScriptName:P,fontName:J,fontStyle:Ce,encoding:qe,isStandardFont:Ke||!1,metadata:{}};return Z.publish("addFont",{font:ct,instance:this}),Dr[ct.id]=ct,mi(ct),ct.id},Ia=function(P){for(var J=0,Ce=bt.length;J<Ce;J++){var qe=Xr.call(this,P[J][0],P[J][1],P[J][2],bt[J][3],!0);T===!1&&(Q[qe]=!0);var Ke=P[J][0].split("-");mi({id:qe,fontName:Ke[0],fontStyle:Ke[1]||""})}Z.publish("addFonts",{fonts:Dr,dictionary:Vr})},ci=function(P){return P.foo=function(){try{return P.apply(this,arguments)}catch(qe){var J=qe.stack||"";~J.indexOf(" at ")&&(J=J.split(" at ")[1]);var Ce="Error in function "+J.split(`
`)[0].split("<")[0]+": "+qe.message;if(!Pr.console)throw new Error(Ce);Pr.console.error(Ce,qe),Pr.alert&&alert(Ce)}},P.foo.bar=P,P.foo},La=function(P,J){var Ce,qe,Ke,ct,Tt,wt,mr,ar,cr;if(Ke=(J=J||{}).sourceEncoding||"Unicode",Tt=J.outputEncoding,(J.autoencode||Tt)&&Dr[br].metadata&&Dr[br].metadata[Ke]&&Dr[br].metadata[Ke].encoding&&(ct=Dr[br].metadata[Ke].encoding,!Tt&&Dr[br].encoding&&(Tt=Dr[br].encoding),!Tt&&ct.codePages&&(Tt=ct.codePages[0]),typeof Tt=="string"&&(Tt=ct[Tt]),Tt)){for(mr=!1,wt=[],Ce=0,qe=P.length;Ce<qe;Ce++)(ar=Tt[P.charCodeAt(Ce)])?wt.push(String.fromCharCode(ar)):wt.push(P[Ce]),wt[Ce].charCodeAt(0)>>8&&(mr=!0);P=wt.join("")}for(Ce=P.length;mr===void 0&&Ce!==0;)P.charCodeAt(Ce-1)>>8&&(mr=!0),Ce--;if(!mr)return P;for(wt=J.noBOM?[]:[254,255],Ce=0,qe=P.length;Ce<qe;Ce++){if((cr=(ar=P.charCodeAt(Ce))>>8)>>8)throw new Error("Character at position "+Ce+" of string '"+P+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");wt.push(cr),wt.push(ar-(cr<<8))}return String.fromCharCode.apply(void 0,wt)},Ci=I.__private__.pdfEscape=I.pdfEscape=function(P,J){return La(P,J).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bo=I.__private__.beginPage=function(P){Ft[++$r]=[],ue[$r]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(P[0]),topRightY:Number(P[1])}},fA($r),ft(Ft[pe])},$s=function(P,J){var Ce,qe,Ke;switch(t=J||t,typeof P=="string"&&(Ce=K(P.toLowerCase()),Array.isArray(Ce)&&(qe=Ce[0],Ke=Ce[1])),Array.isArray(P)&&(qe=P[0]*Rt,Ke=P[1]*Rt),isNaN(qe)&&(qe=l[0],Ke=l[1]),(qe>14400||Ke>14400)&&(Mi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),qe=Math.min(14400,qe),Ke=Math.min(14400,Ke)),l=[qe,Ke],t.substr(0,1)){case"l":Ke>qe&&(l=[Ke,qe]);break;case"p":qe>Ke&&(l=[Ke,qe])}Bo(l),Uo(yn),Ue(Is),nl!==0&&Ue(nl+" J"),sl!==0&&Ue(sl+" j"),Z.publish("addPage",{pageNumber:$r})},ql=function(P){P>0&&P<=$r&&(Ft.splice(P,1),ue.splice(P,1),$r--,pe>$r&&(pe=$r),this.setPage(pe))},fA=function(P){P>0&&P<=$r&&(pe=P)},gA=I.__private__.getNumberOfPages=I.getNumberOfPages=function(){return Ft.length-1},Co=function(P,J,Ce){var qe,Ke=void 0;return Ce=Ce||{},P=P!==void 0?P:Dr[br].fontName,J=J!==void 0?J:Dr[br].fontStyle,qe=P.toLowerCase(),Vr[qe]!==void 0&&Vr[qe][J]!==void 0?Ke=Vr[qe][J]:Vr[P]!==void 0&&Vr[P][J]!==void 0?Ke=Vr[P][J]:Ce.disableWarning===!1&&Mi.warn("Unable to look up font label for font '"+P+"', '"+J+"'. Refer to getFontList() for available fonts."),Ke||Ce.noFallback||(Ke=Vr.times[J])==null&&(Ke=Vr.times.normal),Ke},ua=I.__private__.putInfo=function(){var P=lt(),J=function(qe){return qe};for(var Ce in S!==null&&(J=gn.encryptor(P,0)),Ue("<<"),Ue("/Producer ("+Ci(J("jsPDF "+Qr.version))+")"),gr)gr.hasOwnProperty(Ce)&&gr[Ce]&&Ue("/"+Ce.substr(0,1).toUpperCase()+Ce.substr(1)+" ("+Ci(J(gr[Ce]))+")");Ue("/CreationDate ("+Ci(J(et))+")"),Ue(">>"),Ue("endobj")},So=I.__private__.putCatalog=function(P){var J=(P=P||{}).rootDictionaryObjId||sr;switch(lt(),Ue("<<"),Ue("/Type /Catalog"),Ue("/Pages "+J+" 0 R"),Ut||(Ut="fullwidth"),Ut){case"fullwidth":Ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ue("/OpenAction [3 0 R /Fit]");break;case"original":Ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ce=""+Ut;Ce.substr(Ce.length-1)==="%"&&(Ut=parseInt(Ut)/100),typeof Ut=="number"&&Ue("/OpenAction [3 0 R /XYZ null null "+$e(Ut)+"]")}switch(wr||(wr="continuous"),wr){case"continuous":Ue("/PageLayout /OneColumn");break;case"single":Ue("/PageLayout /SinglePage");break;case"two":case"twoleft":Ue("/PageLayout /TwoColumnLeft");break;case"tworight":Ue("/PageLayout /TwoColumnRight")}Lt&&Ue("/PageMode /"+Lt),Z.publish("putCatalog"),Ue(">>"),Ue("endobj")},Fo=I.__private__.putTrailer=function(){Ue("trailer"),Ue("<<"),Ue("/Size "+(Ge+1)),Ue("/Root "+Ge+" 0 R"),Ue("/Info "+(Ge-1)+" 0 R"),S!==null&&Ue("/Encrypt "+gn.oid+" 0 R"),Ue("/ID [ <"+Je+"> <"+Je+"> ]"),Ue(">>")},Kl=I.__private__.putHeader=function(){Ue("%PDF-"+q),Ue("%")},Oc=I.__private__.putXRef=function(){var P="0000000000";Ue("xref"),Ue("0 "+(Ge+1)),Ue("0000000000 65535 f ");for(var J=1;J<=Ge;J++)typeof tt[J]=="function"?Ue((P+tt[J]()).slice(-10)+" 00000 n "):tt[J]!==void 0?Ue((P+tt[J]).slice(-10)+" 00000 n "):Ue("0000000000 00000 n ")},Ws=I.__private__.buildDocument=function(){Jt(),ft(st),Z.publish("buildDocument"),Kl(),Le(),Ea(),xo(),S!==null&&pA(),ua(),So();var P=ot;return Oc(),Fo(),Ue("startxref"),Ue(""+P),Ue("%%EOF"),ft(Ft[pe]),st.join(`
`)},qa=I.__private__.getBlob=function(P){return new Blob([Zt(P)],{type:"application/pdf"})},Eo=I.output=I.__private__.output=ci(function(P,J){switch(typeof(J=J||{})=="string"?J={filename:J}:J.filename=J.filename||"generated.pdf",P){case void 0:return Ws();case"save":I.save(J.filename);break;case"arraybuffer":return Zt(Ws());case"blob":return qa(Ws());case"bloburi":case"bloburl":if(Pr.URL!==void 0&&typeof Pr.URL.createObjectURL=="function")return Pr.URL&&Pr.URL.createObjectURL(qa(Ws()))||void 0;Mi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ce="",qe=Ws();try{Ce=Fg(qe)}catch{Ce=Fg(unescape(encodeURIComponent(qe)))}return"data:application/pdf;filename="+J.filename+";base64,"+Ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Pr)==="[object Window]"){var Ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ct=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';J.pdfObjectUrl&&(Ke=J.pdfObjectUrl,ct="");var Tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ke+'"'+ct+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(J)+");<\/script></body></html>",wt=Pr.open();return wt!==null&&wt.document.write(Tt),wt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Pr)==="[object Window]"){var mr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(J.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+J.filename+'" width="500px" height="400px" /></body></html>',ar=Pr.open();if(ar!==null){ar.document.write(mr);var cr=this;ar.document.documentElement.querySelector("#pdfViewer").onload=function(){ar.document.title=J.filename,ar.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(cr.output("bloburl"))}}return ar}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Pr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Kr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",J)+'"></iframe></body></html>',Li=Pr.open();if(Li!==null&&(Li.document.write(Kr),Li.document.title=J.filename),Li||typeof safari>"u")return Li;break;case"datauri":case"dataurl":return Pr.document.location.href=this.output("datauristring",J);default:return null}}),$l=function(P){return Array.isArray(ie)===!0&&ie.indexOf(P)>-1};switch(s){case"pt":Rt=1;break;case"mm":Rt=72/25.4;break;case"cm":Rt=72/2.54;break;case"in":Rt=72;break;case"px":Rt=$l("px_scaling")==1?.75:96/72;break;case"pc":case"em":Rt=12;break;case"ex":Rt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Rt=s}var gn=null;Bt(),Ye();var Wl=function(P){return S!==null?gn.encryptor(P,0):function(J){return J}},Io=I.__private__.getPageInfo=I.getPageInfo=function(P){if(isNaN(P)||P%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ue[P].objId,pageNumber:P,pageContext:ue[P]}},Ur=I.__private__.getPageInfoByObjId=function(P){if(isNaN(P)||P%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var J in ue)if(ue[J].objId===P)break;return Io(J)},Xl=I.__private__.getCurrentPageInfo=I.getCurrentPageInfo=function(){return{objId:ue[pe].objId,pageNumber:pe,pageContext:ue[pe]}};I.addPage=function(){return $s.apply(this,arguments),this},I.setPage=function(){return fA.apply(this,arguments),ft.call(this,Ft[pe]),this},I.insertPage=function(P){return this.addPage(),this.movePage(pe,P),this},I.movePage=function(P,J){var Ce,qe;if(P>J){Ce=Ft[P],qe=ue[P];for(var Ke=P;Ke>J;Ke--)Ft[Ke]=Ft[Ke-1],ue[Ke]=ue[Ke-1];Ft[J]=Ce,ue[J]=qe,this.setPage(J)}else if(P<J){Ce=Ft[P],qe=ue[P];for(var ct=P;ct<J;ct++)Ft[ct]=Ft[ct+1],ue[ct]=ue[ct+1];Ft[J]=Ce,ue[J]=qe,this.setPage(J)}return this},I.deletePage=function(){return ql.apply(this,arguments),this},I.__private__.text=I.text=function(P,J,Ce,qe,Ke){var ct,Tt,wt,mr,ar,cr,Kr,Li,ki,Di=(qe=qe||{}).scope||this;if(typeof P=="number"&&typeof J=="number"&&(typeof Ce=="string"||Array.isArray(Ce))){var Yi=Ce;Ce=J,J=P,P=Yi}if(arguments[3]instanceof ke?(ge("The transform parameter of text() with a Matrix value"),ki=Ke):(wt=arguments[4],mr=arguments[5],fi(Kr=arguments[3])==="object"&&Kr!==null||(typeof wt=="string"&&(mr=wt,wt=null),typeof Kr=="string"&&(mr=Kr,Kr=null),typeof Kr=="number"&&(wt=Kr,Kr=null),qe={flags:Kr,angle:wt,align:mr})),isNaN(J)||isNaN(Ce)||P==null)throw new Error("Invalid arguments passed to jsPDF.text");if(P.length===0)return Di;var qi="",Xn=!1,Zn=typeof qe.lineHeightFactor=="number"?qe.lineHeightFactor:Zi,As=Di.internal.scaleFactor;function Ja(ai){return ai=ai.split("	").join(Array(qe.TabLen||9).join(" ")),Ci(ai,Kr)}function Ta(ai){for(var oi,Vi=ai.concat(),ji=[],_a=Vi.length;_a--;)typeof(oi=Vi.shift())=="string"?ji.push(oi):Array.isArray(ai)&&(oi.length===1||oi[1]===void 0&&oi[2]===void 0)?ji.push(oi[0]):ji.push([oi[0],oi[1],oi[2]]);return ji}function al(ai,oi){var Vi;if(typeof ai=="string")Vi=oi(ai)[0];else if(Array.isArray(ai)){for(var ji,_a,Ys=ai.concat(),Js=[],Ps=Ys.length;Ps--;)typeof(ji=Ys.shift())=="string"?Js.push(oi(ji)[0]):Array.isArray(ji)&&typeof ji[0]=="string"&&(_a=oi(ji[0],ji[1],ji[2]),Js.push([_a[0],_a[1],_a[2]]));Vi=Js}return Vi}var eo=!1,ol=!0;if(typeof P=="string")eo=!0;else if(Array.isArray(P)){var SA=P.concat();Tt=[];for(var Ua,Ln=SA.length;Ln--;)(typeof(Ua=SA.shift())!="string"||Array.isArray(Ua)&&typeof Ua[0]!="string")&&(ol=!1);eo=ol}if(eo===!1)throw new Error('Type of text must be string or Array. "'+P+'" is not recognized.');typeof P=="string"&&(P=P.match(/[\r?\n]/)?P.split(/\r\n|\r|\n/g):[P]);var Do=ze/Di.internal.scaleFactor,No=Do*(Zn-1);switch(qe.baseline){case"bottom":Ce-=No;break;case"top":Ce+=Do-No;break;case"hanging":Ce+=Do-2*No;break;case"middle":Ce+=Do/2-No}if((cr=qe.maxWidth||0)>0&&(typeof P=="string"?P=Di.splitTextToSize(P,cr):Object.prototype.toString.call(P)==="[object Array]"&&(P=P.reduce(function(ai,oi){return ai.concat(Di.splitTextToSize(oi,cr))},[]))),ct={text:P,x:J,y:Ce,options:qe,mutex:{pdfEscape:Ci,activeFontKey:br,fonts:Dr,activeFontSize:ze}},Z.publish("preProcessText",ct),P=ct.text,wt=(qe=ct.options).angle,!(ki instanceof ke)&&wt&&typeof wt=="number"){wt*=Math.PI/180,qe.rotationDirection===0&&(wt=-wt),he===ne.ADVANCED&&(wt=-wt);var fa=Math.cos(wt),to=Math.sin(wt);ki=new ke(fa,to,-to,fa,0,0)}else wt&&wt instanceof ke&&(ki=wt);he!==ne.ADVANCED||ki||(ki=Te),(ar=qe.charSpace||xA)!==void 0&&(qi+=Qe(Ae(ar))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Li=qe.horizontalScale)!==void 0&&(qi+=Qe(100*Li)+` Tz
`),qe.lang;var vn=-1,Yl=qe.renderingMode!==void 0?qe.renderingMode:qe.stroke,yi=Di.internal.getCurrentPageInfo().pageContext;switch(Yl){case 0:case!1:case"fill":vn=0;break;case 1:case!0:case"stroke":vn=1;break;case 2:case"fillThenStroke":vn=2;break;case 3:case"invisible":vn=3;break;case 4:case"fillAndAddForClipping":vn=4;break;case 5:case"strokeAndAddPathForClipping":vn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":vn=6;break;case 7:case"addToPathForClipping":vn=7}var ga=yi.usedRenderingMode!==void 0?yi.usedRenderingMode:-1;vn!==-1?qi+=vn+` Tr
`:ga!==-1&&(qi+=`0 Tr
`),vn!==-1&&(yi.usedRenderingMode=vn),mr=qe.align||"left";var Ti,ma=ze*Zn,Oo=Di.internal.pageSize.getWidth(),FA=Dr[br];ar=qe.charSpace||xA,cr=qe.maxWidth||0,Kr=Object.assign({autoencode:!0,noBOM:!0},qe.flags);var Yn=[];if(Object.prototype.toString.call(P)==="[object Array]"){var Tn;Tt=Ta(P),mr!=="left"&&(Ti=Tt.map(function(ai){return Di.getStringUnitWidth(ai,{font:FA,charSpace:ar,fontSize:ze,doKerning:!1})*ze/As}));var Un,Pa=0;if(mr==="right"){J-=Ti[0],P=[],Ln=Tt.length;for(var Zs=0;Zs<Ln;Zs++)Zs===0?(Un=Es(J),Tn=da(Ce)):(Un=Ae(Pa-Ti[Zs]),Tn=-ma),P.push([Tt[Zs],Un,Tn]),Pa=Ti[Zs]}else if(mr==="center"){J-=Ti[0]/2,P=[],Ln=Tt.length;for(var ya=0;ya<Ln;ya++)ya===0?(Un=Es(J),Tn=da(Ce)):(Un=Ae((Pa-Ti[ya])/2),Tn=-ma),P.push([Tt[ya],Un,Tn]),Pa=Ti[ya]}else if(mr==="left"){P=[],Ln=Tt.length;for(var Ro=0;Ro<Ln;Ro++)P.push(Tt[Ro])}else{if(mr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');P=[],Ln=Tt.length,cr=cr!==0?cr:Oo;for(var Ts=0;Ts<Ln;Ts++)Tn=Ts===0?da(Ce):-ma,Un=Ts===0?Es(J):0,Ts<Ln-1?Yn.push(Qe(Ae((cr-Ti[Ts])/(Tt[Ts].split(" ").length-1)))):Yn.push(0),P.push([Tt[Ts],Un,Tn])}}var Nn=typeof qe.R2L=="boolean"?qe.R2L:Qt;Nn===!0&&(P=al(P,function(ai,oi,Vi){return[ai.split("").reverse().join(""),oi,Vi]})),ct={text:P,x:J,y:Ce,options:qe,mutex:{pdfEscape:Ci,activeFontKey:br,fonts:Dr,activeFontSize:ze}},Z.publish("postProcessText",ct),P=ct.text,Xn=ct.mutex.isHex||!1;var Qa=Dr[br].encoding;Qa!=="WinAnsiEncoding"&&Qa!=="StandardEncoding"||(P=al(P,function(ai,oi,Vi){return[Ja(ai),oi,Vi]})),Tt=Ta(P),P=[];for(var Ki,On,va,ro=0,zo=1,Rn=Array.isArray(Tt[0])?zo:ro,Ma="",Pn=function(ai,oi,Vi){var ji="";return Vi instanceof ke?(Vi=typeof qe.angle=="number"?Oe(Vi,new ke(1,0,0,1,ai,oi)):Oe(new ke(1,0,0,1,ai,oi),Vi),he===ne.ADVANCED&&(Vi=Oe(new ke(1,0,0,-1,0,0),Vi)),ji=Vi.join(" ")+` Tm
`):ji=Qe(ai)+" "+Qe(oi)+` Td
`,ji},$i=0;$i<Tt.length;$i++){switch(Ma="",Rn){case zo:va=(Xn?"<":"(")+Tt[$i][0]+(Xn?">":")"),Ki=parseFloat(Tt[$i][1]),On=parseFloat(Tt[$i][2]);break;case ro:va=(Xn?"<":"(")+Tt[$i]+(Xn?">":")"),Ki=Es(J),On=da(Ce)}Yn!==void 0&&Yn[$i]!==void 0&&(Ma=Yn[$i]+` Tw
`),$i===0?P.push(Ma+Pn(Ki,On,ki)+va):Rn===ro?P.push(Ma+va):Rn===zo&&P.push(Ma+Pn(Ki,On,ki)+va)}P=Rn===ro?P.join(` Tj
T* `):P.join(` Tj
`),P+=` Tj
`;var Us=`BT
/`;return Us+=br+" "+ze+` Tf
`,Us+=Qe(ze*Zn)+` TL
`,Us+=Ls+`
`,Us+=qi,Us+=P,Ue(Us+="ET"),Q[br]=!0,Di};var rl=I.__private__.clip=I.clip=function(P){return Ue(P==="evenodd"?"W*":"W"),this};I.clipEvenOdd=function(){return rl("evenodd")},I.__private__.discardPath=I.discardPath=function(){return Ue("n"),this};var Fs=I.__private__.isValidStyle=function(P){var J=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(P)!==-1&&(J=!0),J};I.__private__.setDefaultPathOperation=I.setDefaultPathOperation=function(P){return Fs(P)&&(w=P),this};var ha=I.__private__.getStyle=I.getStyle=function(P){var J=w;switch(P){case"D":case"S":J="S";break;case"F":J="f";break;case"FD":case"DF":J="B";break;case"f":case"f*":case"B":case"B*":J=P}return J},Lo=I.close=function(){return Ue("h"),this};I.stroke=function(){return Ue("S"),this},I.fill=function(P){return mn("f",P),this},I.fillEvenOdd=function(P){return mn("f*",P),this},I.fillStroke=function(P){return mn("B",P),this},I.fillStrokeEvenOdd=function(P){return mn("B*",P),this};var mn=function(P,J){fi(J)==="object"?To(J,P):Ue(P)},Ka=function(P){P===null||he===ne.ADVANCED&&P===void 0||(P=ha(P),Ue(P))};function mA(P,J,Ce,qe,Ke){var ct=new ou(J||this.boundingBox,Ce||this.xStep,qe||this.yStep,this.gState,Ke||this.matrix);ct.stream=this.stream;var Tt=P+"$$"+this.cloneIndex+++"$$";return Ve(Tt,ct),ct}var To=function(P,J){var Ce=rr[P.key],qe=Kt[Ce];if(qe instanceof gc)Ue("q"),Ue(yA(J)),qe.gState&&I.setGState(qe.gState),Ue(P.matrix.toString()+" cm"),Ue("/"+Ce+" sh"),Ue("Q");else if(qe instanceof ou){var Ke=new ke(1,0,0,-1,0,Wn());P.matrix&&(Ke=Ke.multiply(P.matrix||Te),Ce=mA.call(qe,P.key,P.boundingBox,P.xStep,P.yStep,Ke).id),Ue("q"),Ue("/Pattern cs"),Ue("/"+Ce+" scn"),qe.gState&&I.setGState(qe.gState),Ue(J),Ue("Q")}},yA=function(P){switch(P){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},pa=I.moveTo=function(P,J){return Ue(Qe(Ae(P))+" "+Qe(_e(J))+" m"),this},$n=I.lineTo=function(P,J){return Ue(Qe(Ae(P))+" "+Qe(_e(J))+" l"),this},Mr=I.curveTo=function(P,J,Ce,qe,Ke,ct){return Ue([Qe(Ae(P)),Qe(_e(J)),Qe(Ae(Ce)),Qe(_e(qe)),Qe(Ae(Ke)),Qe(_e(ct)),"c"].join(" ")),this};I.__private__.line=I.line=function(P,J,Ce,qe,Ke){if(isNaN(P)||isNaN(J)||isNaN(Ce)||isNaN(qe)||!Fs(Ke))throw new Error("Invalid arguments passed to jsPDF.line");return he===ne.COMPAT?this.lines([[Ce-P,qe-J]],P,J,[1,1],Ke||"S"):this.lines([[Ce-P,qe-J]],P,J,[1,1]).stroke()},I.__private__.lines=I.lines=function(P,J,Ce,qe,Ke,ct){var Tt,wt,mr,ar,cr,Kr,Li,ki,Di,Yi,qi,Xn;if(typeof P=="number"&&(Xn=Ce,Ce=J,J=P,P=Xn),qe=qe||[1,1],ct=ct||!1,isNaN(J)||isNaN(Ce)||!Array.isArray(P)||!Array.isArray(qe)||!Fs(Ke)||typeof ct!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(pa(J,Ce),Tt=qe[0],wt=qe[1],ar=P.length,Yi=J,qi=Ce,mr=0;mr<ar;mr++)(cr=P[mr]).length===2?(Yi=cr[0]*Tt+Yi,qi=cr[1]*wt+qi,$n(Yi,qi)):(Kr=cr[0]*Tt+Yi,Li=cr[1]*wt+qi,ki=cr[2]*Tt+Yi,Di=cr[3]*wt+qi,Yi=cr[4]*Tt+Yi,qi=cr[5]*wt+qi,Mr(Kr,Li,ki,Di,Yi,qi));return ct&&Lo(),Ka(Ke),this},I.path=function(P){for(var J=0;J<P.length;J++){var Ce=P[J],qe=Ce.c;switch(Ce.op){case"m":pa(qe[0],qe[1]);break;case"l":$n(qe[0],qe[1]);break;case"c":Mr.apply(this,qe);break;case"h":Lo()}}return this},I.__private__.rect=I.rect=function(P,J,Ce,qe,Ke){if(isNaN(P)||isNaN(J)||isNaN(Ce)||isNaN(qe)||!Fs(Ke))throw new Error("Invalid arguments passed to jsPDF.rect");return he===ne.COMPAT&&(qe=-qe),Ue([Qe(Ae(P)),Qe(_e(J)),Qe(Ae(Ce)),Qe(Ae(qe)),"re"].join(" ")),Ka(Ke),this},I.__private__.triangle=I.triangle=function(P,J,Ce,qe,Ke,ct,Tt){if(isNaN(P)||isNaN(J)||isNaN(Ce)||isNaN(qe)||isNaN(Ke)||isNaN(ct)||!Fs(Tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ce-P,qe-J],[Ke-Ce,ct-qe],[P-Ke,J-ct]],P,J,[1,1],Tt,!0),this},I.__private__.roundedRect=I.roundedRect=function(P,J,Ce,qe,Ke,ct,Tt){if(isNaN(P)||isNaN(J)||isNaN(Ce)||isNaN(qe)||isNaN(Ke)||isNaN(ct)||!Fs(Tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var wt=4/3*(Math.SQRT2-1);return Ke=Math.min(Ke,.5*Ce),ct=Math.min(ct,.5*qe),this.lines([[Ce-2*Ke,0],[Ke*wt,0,Ke,ct-ct*wt,Ke,ct],[0,qe-2*ct],[0,ct*wt,-Ke*wt,ct,-Ke,ct],[2*Ke-Ce,0],[-Ke*wt,0,-Ke,-ct*wt,-Ke,-ct],[0,2*ct-qe],[0,-ct*wt,Ke*wt,-ct,Ke,-ct]],P+Ke,J,[1,1],Tt,!0),this},I.__private__.ellipse=I.ellipse=function(P,J,Ce,qe,Ke){if(isNaN(P)||isNaN(J)||isNaN(Ce)||isNaN(qe)||!Fs(Ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ct=4/3*(Math.SQRT2-1)*Ce,Tt=4/3*(Math.SQRT2-1)*qe;return pa(P+Ce,J),Mr(P+Ce,J-Tt,P+ct,J-qe,P,J-qe),Mr(P-ct,J-qe,P-Ce,J-Tt,P-Ce,J),Mr(P-Ce,J+Tt,P-ct,J+qe,P,J+qe),Mr(P+ct,J+qe,P+Ce,J+Tt,P+Ce,J),Ka(Ke),this},I.__private__.circle=I.circle=function(P,J,Ce,qe){if(isNaN(P)||isNaN(J)||isNaN(Ce)||!Fs(qe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(P,J,Ce,Ce,qe)},I.setFont=function(P,J,Ce){return Ce&&(J=Ne(J,Ce)),br=Co(P,J,{disableWarning:!1}),this};var vA=I.__private__.getFont=I.getFont=function(){return Dr[Co.apply(I,arguments)]};I.__private__.getFontList=I.getFontList=function(){var P,J,Ce={};for(P in Vr)if(Vr.hasOwnProperty(P))for(J in Ce[P]=[],Vr[P])Vr[P].hasOwnProperty(J)&&Ce[P].push(J);return Ce},I.addFont=function(P,J,Ce,qe,Ke){var ct=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ct.indexOf(arguments[3])!==-1?Ke=arguments[3]:arguments[3]&&ct.indexOf(arguments[3])==-1&&(Ce=Ne(Ce,qe)),Ke=Ke||"Identity-H",Xr.call(this,P,J,Ce,Ke)};var Zi,yn=n.lineWidth||.200025,$a=I.__private__.getLineWidth=I.getLineWidth=function(){return yn},Uo=I.__private__.setLineWidth=I.setLineWidth=function(P){return yn=P,Ue(Qe(Ae(P))+" w"),this};I.__private__.setLineDash=Qr.API.setLineDash=Qr.API.setLineDashPattern=function(P,J){if(P=P||[],J=J||0,isNaN(J)||!Array.isArray(P))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return P=P.map(function(Ce){return Qe(Ae(Ce))}).join(" "),J=Qe(Ae(J)),Ue("["+P+"] "+J+" d"),this};var Po=I.__private__.getLineHeight=I.getLineHeight=function(){return ze*Zi};I.__private__.getLineHeight=I.getLineHeight=function(){return ze*Zi};var _A=I.__private__.setLineHeightFactor=I.setLineHeightFactor=function(P){return typeof(P=P||1.15)=="number"&&(Zi=P),this},wA=I.__private__.getLineHeightFactor=I.getLineHeightFactor=function(){return Zi};_A(n.lineHeight);var Es=I.__private__.getHorizontalCoordinate=function(P){return Ae(P)},da=I.__private__.getVerticalCoordinate=function(P){return he===ne.ADVANCED?P:ue[pe].mediaBox.topRightY-ue[pe].mediaBox.bottomLeftY-Ae(P)},il=I.__private__.getHorizontalCoordinateString=I.getHorizontalCoordinateString=function(P){return Qe(Es(P))},Xs=I.__private__.getVerticalCoordinateString=I.getVerticalCoordinateString=function(P){return Qe(da(P))},Is=n.strokeColor||"0 G";I.__private__.getStrokeColor=I.getDrawColor=function(){return Yt(Is)},I.__private__.setStrokeColor=I.setDrawColor=function(P,J,Ce,qe){return Is=ur({ch1:P,ch2:J,ch3:Ce,ch4:qe,pdfColorType:"draw",precision:2}),Ue(Is),this};var bA=n.fillColor||"0 g";I.__private__.getFillColor=I.getFillColor=function(){return Yt(bA)},I.__private__.setFillColor=I.setFillColor=function(P,J,Ce,qe){return bA=ur({ch1:P,ch2:J,ch3:Ce,ch4:qe,pdfColorType:"fill",precision:2}),Ue(bA),this};var Ls=n.textColor||"0 g",Rc=I.__private__.getTextColor=I.getTextColor=function(){return Yt(Ls)};I.__private__.setTextColor=I.setTextColor=function(P,J,Ce,qe){return Ls=ur({ch1:P,ch2:J,ch3:Ce,ch4:qe,pdfColorType:"text",precision:3}),this};var xA=n.charSpace,zc=I.__private__.getCharSpace=I.getCharSpace=function(){return parseFloat(xA||0)};I.__private__.setCharSpace=I.setCharSpace=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return xA=P,this};var nl=0;I.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},I.__private__.setLineCap=I.setLineCap=function(P){var J=I.CapJoinStyles[P];if(J===void 0)throw new Error("Line cap style of '"+P+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return nl=J,Ue(J+" J"),this};var sl=0;I.__private__.setLineJoin=I.setLineJoin=function(P){var J=I.CapJoinStyles[P];if(J===void 0)throw new Error("Line join style of '"+P+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return sl=J,Ue(J+" j"),this},I.__private__.setLineMiterLimit=I.__private__.setMiterLimit=I.setLineMiterLimit=I.setMiterLimit=function(P){if(P=P||0,isNaN(P))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ue(Qe(Ae(P))+" M"),this},I.GState=Op,I.setGState=function(P){(P=typeof P=="string"?Or[bi[P]]:Zl(null,P)).equals(Nt)||(Ue("/"+P.id+" gs"),Nt=P)};var Zl=function(P,J){if(!P||!bi[P]){var Ce=!1;for(var qe in Or)if(Or.hasOwnProperty(qe)&&Or[qe].equals(J)){Ce=!0;break}if(Ce)J=Or[qe];else{var Ke="GS"+(Object.keys(Or).length+1).toString(10);Or[Ke]=J,J.id=Ke}return P&&(bi[P]=J.id),Z.publish("addGState",J),J}};I.addGState=function(P,J){return Zl(P,J),this},I.saveGraphicsState=function(){return Ue("q"),xt.push({key:br,size:ze,color:Ls}),this},I.restoreGraphicsState=function(){Ue("Q");var P=xt.pop();return br=P.key,ze=P.size,Ls=P.color,Nt=null,this},I.setCurrentTransformationMatrix=function(P){return Ue(P.toString()+" cm"),this},I.comment=function(P){return Ue("#"+P),this};var Wa=function(P,J){var Ce=P||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ce},set:function(ct){isNaN(ct)||(Ce=parseFloat(ct))}});var qe=J||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return qe},set:function(ct){isNaN(ct)||(qe=parseFloat(ct))}});var Ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ke},set:function(ct){Ke=ct.toString()}}),this},Xa=function(P,J,Ce,qe){Wa.call(this,P,J),this.type="rect";var Ke=Ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ke},set:function(Tt){isNaN(Tt)||(Ke=parseFloat(Tt))}});var ct=qe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ct},set:function(Tt){isNaN(Tt)||(ct=parseFloat(Tt))}}),this},Qo=function(){this.page=$r,this.currentPage=pe,this.pages=Ft.slice(0),this.pagesContext=ue.slice(0),this.x=vt,this.y=Cr,this.matrix=Tr,this.width=Ya(pe),this.height=Wn(pe),this.outputDestination=Vt,this.id="",this.objectNumber=-1};Qo.prototype.restore=function(){$r=this.page,pe=this.currentPage,ue=this.pagesContext,Ft=this.pages,vt=this.x,Cr=this.y,Tr=this.matrix,ko(pe,this.width),CA(pe,this.height),Vt=this.outputDestination};var BA=function(P,J,Ce,qe,Ke){be.push(new Qo),$r=pe=0,Ft=[],vt=P,Cr=J,Tr=Ke,Bo([Ce,qe])},Za=function(P){if(ve[P])be.pop().restore();else{var J=new Qo,Ce="Xo"+(Object.keys(le).length+1).toString(10);J.id=Ce,ve[P]=Ce,le[Ce]=J,Z.publish("addFormObject",J),be.pop().restore()}};for(var Mo in I.beginFormObject=function(P,J,Ce,qe,Ke){return BA(P,J,Ce,qe,Ke),this},I.endFormObject=function(P){return Za(P),this},I.doFormObject=function(P,J){var Ce=le[ve[P]];return Ue("q"),Ue(J.toString()+" cm"),Ue("/"+Ce.id+" Do"),Ue("Q"),this},I.getFormObject=function(P){var J=le[ve[P]];return{x:J.x,y:J.y,width:J.width,height:J.height,matrix:J.matrix}},I.save=function(P,J){return P=P||"generated.pdf",(J=J||{}).returnPromise=J.returnPromise||!1,J.returnPromise===!1?(fc(qa(Ws()),P),typeof fc.unload=="function"&&Pr.setTimeout&&setTimeout(fc.unload,911),this):new Promise(function(Ce,qe){try{var Ke=fc(qa(Ws()),P);typeof fc.unload=="function"&&Pr.setTimeout&&setTimeout(fc.unload,911),Ce(Ke)}catch(ct){qe(ct.message)}})},Qr.API)Qr.API.hasOwnProperty(Mo)&&(Mo==="events"&&Qr.API.events.length?function(P,J){var Ce,qe,Ke;for(Ke=J.length-1;Ke!==-1;Ke--)Ce=J[Ke][0],qe=J[Ke][1],P.subscribe.apply(P,[Ce].concat(typeof qe=="function"?[qe]:qe))}(Z,Qr.API.events):I[Mo]=Qr.API[Mo]);var Ya=I.getPageWidth=function(P){return(ue[P=P||pe].mediaBox.topRightX-ue[P].mediaBox.bottomLeftX)/Rt},ko=I.setPageWidth=function(P,J){ue[P].mediaBox.topRightX=J*Rt+ue[P].mediaBox.bottomLeftX},Wn=I.getPageHeight=function(P){return(ue[P=P||pe].mediaBox.topRightY-ue[P].mediaBox.bottomLeftY)/Rt},CA=I.setPageHeight=function(P,J){ue[P].mediaBox.topRightY=J*Rt+ue[P].mediaBox.bottomLeftY};return I.internal={pdfEscape:Ci,getStyle:ha,getFont:vA,getFontSize:Pt,getCharSpace:zc,getTextColor:Rc,getLineHeight:Po,getLineHeightFactor:wA,getLineWidth:$a,write:fr,getHorizontalCoordinate:Es,getVerticalCoordinate:da,getCoordinateString:il,getVerticalCoordinateString:Xs,collections:{},newObject:lt,newAdditionalObject:nr,newObjectDeferred:ht,newObjectDeferredBegin:gt,getFilters:Br,putStream:Rr,events:Z,scaleFactor:Rt,pageSize:{getWidth:function(){return Ya(pe)},setWidth:function(P){ko(pe,P)},getHeight:function(){return Wn(pe)},setHeight:function(P){CA(pe,P)}},encryptionOptions:S,encryption:gn,getEncryptor:Wl,output:Eo,getNumberOfPages:gA,pages:Ft,out:Ue,f2:$e,f3:ce,getPageInfo:Io,getPageInfoByObjId:Ur,getCurrentPageInfo:Xl,getPDFVersion:j,Point:Wa,Rectangle:Xa,Matrix:ke,hasHotfix:$l},Object.defineProperty(I.internal.pageSize,"width",{get:function(){return Ya(pe)},set:function(P){ko(pe,P)},enumerable:!0,configurable:!0}),Object.defineProperty(I.internal.pageSize,"height",{get:function(){return Wn(pe)},set:function(P){CA(pe,P)},enumerable:!0,configurable:!0}),Ia.call(I,bt),br="F1",$s(l,t),Z.publish("initialized"),I}su.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},su.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},su.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},su.prototype.processOwnerPassword=function(n,e){return Lg(Ig(e).substr(0,5),n)},su.prototype.encryptor=function(n,e){var t=Ig(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return Lg(t,s)}},Op.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||fi(n)!==fi(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;s++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},Qr.API={events:[]},Qr.version="2.5.1";var nn=Qr.API,Tg=1,mc=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Au=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Hr=function(n){return n.toFixed(2)},El=function(n){return n.toFixed(5)};nn.__acroform__={};var Aa=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},dv=function(n){return n*Tg},rA=function(n){var e=new gv,t=dr.internal.getHeight(n)||0,s=dr.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Hr(s)),Number(Hr(t))],e},T4=nn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},U4=nn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},P4=nn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},ln=nn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return P4(n,e-1)},cn=nn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return T4(n,e-1)},un=nn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return U4(n,e-1)},Q4=nn.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,l=n[0],u=n[1],p=n[2],a=n[3],m={};return m.lowerLeft_X=t(l)||0,m.lowerLeft_Y=s(u+a)||0,m.upperRight_X=t(l+p)||0,m.upperRight_Y=s(u)||0,[Number(Hr(m.lowerLeft_X)),Number(Hr(m.lowerLeft_Y)),Number(Hr(m.upperRight_X)),Number(Hr(m.upperRight_Y))]},M4=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,s=Ug(n,t),l=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+l+" "+Hr(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var u=rA(n);return u.scope=n.scope,u.stream=e.join(`
`),u}},Ug=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},l=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");l=n.multiline?l.map(function(ce){return ce.split(`
`)}):l.map(function(ce){return[ce]});var u=t,p=dr.internal.getHeight(n)||0;p=p<0?-p:p;var a=dr.internal.getWidth(n)||0;a=a<0?-a:a;var m=function(ce,Ae,xe){if(ce+1<l.length){var _e=Ae+" "+l[ce+1][0];return Rp(_e,n,xe).width<=a-4}return!1};u++;e:for(;u>0;){e="",u--;var w,S,T=Rp("3",n,u).height,Q=n.multiline?p-u:(p-T)/2,I=Q+=2,q=0,j=0,Y=0;if(u<=0){e=`(...) Tj
`,e+="% Width of Text: "+Rp(e,n,u=12).width+", FieldWidth:"+a+`
`;break}for(var K="",ne=0,he=0;he<l.length;he++)if(l.hasOwnProperty(he)){var Ee=!1;if(l[he].length!==1&&Y!==l[he].length-1){if((T+2)*(ne+2)+2>p)continue e;K+=l[he][Y],Ee=!0,j=he,he--}else{K=(K+=l[he][Y]+" ").substr(K.length-1)==" "?K.substr(0,K.length-1):K;var De=parseInt(he),Ne=m(De,K,u),Qe=he>=l.length-1;if(Ne&&!Qe){K+=" ",Y=0;continue}if(Ne||Qe){if(Qe)j=De;else if(n.multiline&&(T+2)*(ne+2)+2>p)continue e}else{if(!n.multiline||(T+2)*(ne+2)+2>p)continue e;j=De}}for(var ge="",Ze=q;Ze<=j;Ze++){var $e=l[Ze];if(n.multiline){if(Ze===j){ge+=$e[Y]+" ",Y=(Y+1)%$e.length;continue}if(Ze===q){ge+=$e[$e.length-1]+" ";continue}}ge+=$e[0]+" "}switch(ge=ge.substr(ge.length-1)==" "?ge.substr(0,ge.length-1):ge,S=Rp(ge,n,u).width,n.textAlign){case"right":w=a-S-2;break;case"center":w=(a-S)/2;break;case"left":default:w=2}e+=Hr(w)+" "+Hr(I)+` Td
`,e+="("+mc(ge)+`) Tj
`,e+=-Hr(w)+` 0 Td
`,I=-(u+2),S=0,q=Ee?j:j+1,ne++,K=""}break}return s.text=e,s.fontSize=u,s},Rp=function(n,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),l=e.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:l}},k4={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},D4=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},N4=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var s=t,l=n[t];e.internal.newObjectDeferredBegin(l.objId,!0),fi(l)==="object"&&typeof l.putStream=="function"&&l.putStream(),delete n[s]}},O4=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(lo.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(k4)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Tg=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new mv,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var l in s)if(s.hasOwnProperty(l)){var u=s[l];u.objId=void 0,u.hasAnnotation&&D4(u,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(s,l){var u=!s;for(var p in s||(l.internal.newObjectDeferredBegin(l.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),l.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||l.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(p)){var a=s[p],m=[],w=a.Rect;if(a.Rect&&(a.Rect=Q4(a.Rect,l)),l.internal.newObjectDeferredBegin(a.objId,!0),a.DA=dr.createDefaultAppearanceStream(a),fi(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(m=a.getKeyValueListForStream()),a.Rect=w,a.hasAppearanceStream&&!a.appearanceStreamContent){var S=M4(a);m.push({key:"AP",value:"<</N "+S+">>"}),l.internal.acroformPlugin.xForms.push(S)}if(a.appearanceStreamContent){var T="";for(var Q in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(Q)){var I=a.appearanceStreamContent[Q];if(T+="/"+Q+" ",T+="<<",Object.keys(I).length>=1||Array.isArray(I)){for(var p in I)if(I.hasOwnProperty(p)){var q=I[p];typeof q=="function"&&(q=q.call(l,a)),T+="/"+p+" "+q+" ",l.internal.acroformPlugin.xForms.indexOf(q)>=0||l.internal.acroformPlugin.xForms.push(q)}}else typeof(q=I)=="function"&&(q=q.call(l,a)),T+="/"+p+" "+q,l.internal.acroformPlugin.xForms.indexOf(q)>=0||l.internal.acroformPlugin.xForms.push(q);T+=">>"}m.push({key:"AP",value:`<<
`+T+">>"})}l.internal.putStream({additionalKeyValues:m,objectId:a.objId}),l.internal.out("endobj")}u&&N4(l.internal.acroformPlugin.xForms,l)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},fv=nn.__acroform__.arrayToPdfArray=function(n,e,t){var s=function(p){return p};if(Array.isArray(n)){for(var l="[",u=0;u<n.length;u++)switch(u!==0&&(l+=" "),fi(n[u])){case"boolean":case"number":case"object":l+=n[u].toString();break;case"string":n[u].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),l+="("+mc(s(n[u].toString()))+")"):l+=n[u].toString()}return l+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Pg=function(n,e,t){var s=function(l){return l};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+mc(s(n))+")"},iA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};iA.prototype.toString=function(){return this.objId+" 0 R"},iA.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},iA.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(u){return u!="content"&&u!="appearanceStreamContent"&&u!="scope"&&u!="objId"&&u.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],l=this[s];l&&(Array.isArray(l)?n.push({key:s,value:fv(l,this.objId,this.scope)}):l instanceof iA?(l.scope=this.scope,n.push({key:s,value:l.objId+" 0 R"})):typeof l!="function"&&n.push({key:s,value:l}))}return n};var gv=function(){iA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Aa(gv,iA);var mv=function(){iA.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+mc(t(n))+")"}},set:function(t){n=t}})};Aa(mv,iA);var lo=function n(){iA.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(K){if(isNaN(K))throw new Error('Invalid value "'+K+'" for attribute F supplied.');e=K}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ln(e,3)},set:function(K){K?this.F=cn(e,3):this.F=un(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(K){if(isNaN(K))throw new Error('Invalid value "'+K+'" for attribute Ff supplied.');t=K}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(K){s=K!==void 0?K:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(K){s[0]=K}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(K){s[1]=K}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(K){s[2]=K}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(K){s[3]=K}});var l="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return l},set:function(K){switch(K){case"/Btn":case"/Tx":case"/Ch":case"/Sig":l=K;break;default:throw new Error('Invalid value "'+K+'" for attribute FT supplied.')}}});var u=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!u||u.length<1){if(this instanceof Vp)return;u="FieldObject"+n.FieldNum++}var K=function(ne){return ne};return this.scope&&(K=this.scope.internal.getEncryptor(this.objId)),"("+mc(K(u))+")"},set:function(K){u=K.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return u},set:function(K){u=K}});var p="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return p},set:function(K){p=K}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(K){a=K}});var m=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return m},set:function(K){m=K}});var w=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return w===void 0?50/Tg:w},set:function(K){w=K}});var S="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return S},set:function(K){S=K}});var T="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!T||this instanceof Vp||this instanceof yc))return Pg(T,this.objId,this.scope)},set:function(K){K=K.toString(),T=K}});var Q=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Q)return this instanceof Vn?Q:Pg(Q,this.objId,this.scope)},set:function(K){K=K.toString(),Q=this instanceof Vn?K:K.substr(0,1)==="("?Au(K.substr(1,K.length-2)):Au(K)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vn?Au(Q.substr(1,Q.length-1)):Q},set:function(K){K=K.toString(),Q=this instanceof Vn?"/"+K:K}});var I=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(I)return I},set:function(K){this.V=K}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(I)return this instanceof Vn?I:Pg(I,this.objId,this.scope)},set:function(K){K=K.toString(),I=this instanceof Vn?K:K.substr(0,1)==="("?Au(K.substr(1,K.length-2)):Au(K)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vn?Au(I.substr(1,I.length-1)):I},set:function(K){K=K.toString(),I=this instanceof Vn?"/"+K:K}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var q,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(K){K=!!K,j=K}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(q)return q},set:function(K){q=K}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,1)},set:function(K){K?this.Ff=cn(this.Ff,1):this.Ff=un(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,2)},set:function(K){K?this.Ff=cn(this.Ff,2):this.Ff=un(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,3)},set:function(K){K?this.Ff=cn(this.Ff,3):this.Ff=un(this.Ff,3)}});var Y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Y!==null)return Y},set:function(K){if([0,1,2].indexOf(K)===-1)throw new Error('Invalid value "'+K+'" for attribute Q supplied.');Y=K}}),Object.defineProperty(this,"textAlign",{get:function(){var K;switch(Y){case 0:default:K="left";break;case 1:K="center";break;case 2:K="right"}return K},configurable:!0,enumerable:!0,set:function(K){switch(K){case"right":case 2:Y=2;break;case"center":case 1:Y=1;break;case"left":case 0:default:Y=0}}})};Aa(lo,iA);var lu=function(){lo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return fv(e,this.objId,this.scope)},set:function(t){var s,l;l=[],typeof(s=t)=="string"&&(l=function(u,p,a){a||(a=1);for(var m,w=[];m=p.exec(u);)w.push(m[a]);return w}(s,/\((.*?)\)/g)),e=l}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,18)},set:function(t){t?this.Ff=cn(this.Ff,18):this.Ff=un(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=cn(this.Ff,19):this.Ff=un(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,20)},set:function(t){t?(this.Ff=cn(this.Ff,20),e.sort()):this.Ff=un(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,22)},set:function(t){t?this.Ff=cn(this.Ff,22):this.Ff=un(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,23)},set:function(t){t?this.Ff=cn(this.Ff,23):this.Ff=un(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,27)},set:function(t){t?this.Ff=cn(this.Ff,27):this.Ff=un(this.Ff,27)}}),this.hasAppearanceStream=!1};Aa(lu,lo);var cu=function(){lu.call(this),this.fontName="helvetica",this.combo=!1};Aa(cu,lu);var uu=function(){cu.call(this),this.combo=!0};Aa(uu,cu);var zp=function(){uu.call(this),this.edit=!0};Aa(zp,uu);var Vn=function(){lo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,15)},set:function(t){t?this.Ff=cn(this.Ff,15):this.Ff=un(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,16)},set:function(t){t?this.Ff=cn(this.Ff,16):this.Ff=un(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,17)},set:function(t){t?this.Ff=cn(this.Ff,17):this.Ff=un(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,26)},set:function(t){t?this.Ff=cn(this.Ff,26):this.Ff=un(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(u){return u};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,l=[];for(s in l.push("<<"),e)l.push("/"+s+" ("+mc(t(e[s]))+")");return l.push(">>"),l.join(`
`)}},set:function(t){fi(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Aa(Vn,lo);var Hp=function(){Vn.call(this),this.pushButton=!0};Aa(Hp,Vn);var hu=function(){Vn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Aa(hu,Vn);var Vp=function(){var n,e;lo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(l){n=l}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(l){e=l}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var l=function(a){return a};this.scope&&(l=this.scope.internal.getEncryptor(this.objId));var u,p=[];for(u in p.push("<<"),s)p.push("/"+u+" ("+mc(l(s[u]))+")");return p.push(">>"),p.join(`
`)},set:function(l){fi(l)==="object"&&(s=l)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(l){typeof l=="string"&&(s.CA=l)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(l){t=l}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(l){t="/"+l}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=dr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Aa(Vp,lo),hu.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},hu.prototype.createOption=function(n){var e=new Vp;return e.Parent=this,e.optionName=n,this.Kids.push(e),R4.call(this.scope,e),e};var jp=function(){Vn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=dr.CheckBox.createAppearanceStream()};Aa(jp,Vn);var yc=function(){lo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,13)},set:function(e){e?this.Ff=cn(this.Ff,13):this.Ff=un(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,21)},set:function(e){e?this.Ff=cn(this.Ff,21):this.Ff=un(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,23)},set:function(e){e?this.Ff=cn(this.Ff,23):this.Ff=un(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,24)},set:function(e){e?this.Ff=cn(this.Ff,24):this.Ff=un(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,25)},set:function(e){e?this.Ff=cn(this.Ff,25):this.Ff=un(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,26)},set:function(e){e?this.Ff=cn(this.Ff,26):this.Ff=un(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Aa(yc,lo);var Gp=function(){yc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,14)},set:function(n){n?this.Ff=cn(this.Ff,14):this.Ff=un(this.Ff,14)}}),this.password=!0};Aa(Gp,yc);var dr={CheckBox:{createAppearanceStream:function(){return{N:{On:dr.CheckBox.YesNormal},D:{On:dr.CheckBox.YesPushDown,Off:dr.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=rA(n);e.scope=n.scope;var t=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,l=n.scope.__private__.encodeColorString(n.color),u=Ug(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Hr(dr.internal.getWidth(n))+" "+Hr(dr.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+Hr(u.fontSize)+" Tf "+l),t.push("BT"),t.push(u.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=rA(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),l=[],u=dr.internal.getHeight(n),p=dr.internal.getWidth(n),a=Ug(n,n.caption);return l.push("1 g"),l.push("0 0 "+Hr(p)+" "+Hr(u)+" re"),l.push("f"),l.push("q"),l.push("0 0 1 rg"),l.push("0 0 "+Hr(p-1)+" "+Hr(u-1)+" re"),l.push("W"),l.push("n"),l.push("0 g"),l.push("BT"),l.push("/"+t+" "+Hr(a.fontSize)+" Tf "+s),l.push(a.text),l.push("ET"),l.push("Q"),e.stream=l.join(`
`),e},OffPushDown:function(n){var e=rA(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Hr(dr.internal.getWidth(n))+" "+Hr(dr.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:dr.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=dr.RadioButton.Circle.YesNormal,e.D[n]=dr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=rA(n);e.scope=n.scope;var t=[],s=dr.internal.getWidth(n)<=dr.internal.getHeight(n)?dr.internal.getWidth(n)/4:dr.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var l=dr.internal.Bezier_C,u=Number((s*l).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+El(dr.internal.getWidth(n)/2)+" "+El(dr.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+u+" "+u+" "+s+" 0 "+s+" c"),t.push("-"+u+" "+s+" -"+s+" "+u+" -"+s+" 0 c"),t.push("-"+s+" -"+u+" -"+u+" -"+s+" 0 -"+s+" c"),t.push(u+" -"+s+" "+s+" -"+u+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=rA(n);e.scope=n.scope;var t=[],s=dr.internal.getWidth(n)<=dr.internal.getHeight(n)?dr.internal.getWidth(n)/4:dr.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var l=Number((2*s).toFixed(5)),u=Number((l*dr.internal.Bezier_C).toFixed(5)),p=Number((s*dr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+El(dr.internal.getWidth(n)/2)+" "+El(dr.internal.getHeight(n)/2)+" cm"),t.push(l+" 0 m"),t.push(l+" "+u+" "+u+" "+l+" 0 "+l+" c"),t.push("-"+u+" "+l+" -"+l+" "+u+" -"+l+" 0 c"),t.push("-"+l+" -"+u+" -"+u+" -"+l+" 0 -"+l+" c"),t.push(u+" -"+l+" "+l+" -"+u+" "+l+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+El(dr.internal.getWidth(n)/2)+" "+El(dr.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+p+" "+p+" "+s+" 0 "+s+" c"),t.push("-"+p+" "+s+" -"+s+" "+p+" -"+s+" 0 c"),t.push("-"+s+" -"+p+" -"+p+" -"+s+" 0 -"+s+" c"),t.push(p+" -"+s+" "+s+" -"+p+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=rA(n);e.scope=n.scope;var t=[],s=dr.internal.getWidth(n)<=dr.internal.getHeight(n)?dr.internal.getWidth(n)/4:dr.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var l=Number((2*s).toFixed(5)),u=Number((l*dr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+El(dr.internal.getWidth(n)/2)+" "+El(dr.internal.getHeight(n)/2)+" cm"),t.push(l+" 0 m"),t.push(l+" "+u+" "+u+" "+l+" 0 "+l+" c"),t.push("-"+u+" "+l+" -"+l+" "+u+" -"+l+" 0 c"),t.push("-"+l+" -"+u+" -"+u+" -"+l+" 0 -"+l+" c"),t.push(u+" -"+l+" "+l+" -"+u+" "+l+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:dr.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=dr.RadioButton.Cross.YesNormal,e.D[n]=dr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=rA(n);e.scope=n.scope;var t=[],s=dr.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Hr(dr.internal.getWidth(n)-2)+" "+Hr(dr.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Hr(s.x1.x)+" "+Hr(s.x1.y)+" m"),t.push(Hr(s.x2.x)+" "+Hr(s.x2.y)+" l"),t.push(Hr(s.x4.x)+" "+Hr(s.x4.y)+" m"),t.push(Hr(s.x3.x)+" "+Hr(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=rA(n);e.scope=n.scope;var t=dr.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+Hr(dr.internal.getWidth(n))+" "+Hr(dr.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Hr(dr.internal.getWidth(n)-2)+" "+Hr(dr.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(Hr(t.x1.x)+" "+Hr(t.x1.y)+" m"),s.push(Hr(t.x2.x)+" "+Hr(t.x2.y)+" l"),s.push(Hr(t.x4.x)+" "+Hr(t.x4.y)+" m"),s.push(Hr(t.x3.x)+" "+Hr(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=rA(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Hr(dr.internal.getWidth(n))+" "+Hr(dr.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};dr.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=dr.internal.getWidth(n),t=dr.internal.getHeight(n),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},dr.internal.getWidth=function(n){var e=0;return fi(n)==="object"&&(e=dv(n.Rect[2])),e},dr.internal.getHeight=function(n){var e=0;return fi(n)==="object"&&(e=dv(n.Rect[3])),e};var R4=nn.addField=function(n){if(O4(this,n),!(n instanceof lo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};nn.AcroFormChoiceField=lu,nn.AcroFormListBox=cu,nn.AcroFormComboBox=uu,nn.AcroFormEditBox=zp,nn.AcroFormButton=Vn,nn.AcroFormPushButton=Hp,nn.AcroFormRadioButton=hu,nn.AcroFormCheckBox=jp,nn.AcroFormTextField=yc,nn.AcroFormPasswordField=Gp,nn.AcroFormAppearance=dr,nn.AcroForm={ChoiceField:lu,ListBox:cu,ComboBox:uu,EditBox:zp,Button:Vn,PushButton:Hp,RadioButton:hu,CheckBox:jp,TextField:yc,PasswordField:Gp,Appearance:dr},Qr.AcroForm={ChoiceField:lu,ListBox:cu,ComboBox:uu,EditBox:zp,Button:Vn,PushButton:Hp,RadioButton:hu,CheckBox:jp,TextField:yc,PasswordField:Gp,Appearance:dr};function yv(n){return n.reduce(function(e,t,s){return e[t]=s,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=n.__addimage__.getImageFileTypeByImageData=function(ce,Ae){var xe,_e,et,Je,rt,Ye=e;if((Ae=Ae||e)==="RGBA"||ce.data!==void 0&&ce.data instanceof Uint8ClampedArray&&"height"in ce&&"width"in ce)return"RGBA";if(Ne(ce))for(rt in t)for(et=t[rt],xe=0;xe<et.length;xe+=1){for(Je=!0,_e=0;_e<et[xe].length;_e+=1)if(et[xe][_e]!==void 0&&et[xe][_e]!==ce[_e]){Je=!1;break}if(Je===!0){Ye=rt;break}}else for(rt in t)for(et=t[rt],xe=0;xe<et.length;xe+=1){for(Je=!0,_e=0;_e<et[xe].length;_e+=1)if(et[xe][_e]!==void 0&&et[xe][_e]!==ce.charCodeAt(_e)){Je=!1;break}if(Je===!0){Ye=rt;break}}return Ye===e&&Ae!==e&&(Ye=Ae),Ye},l=function ce(Ae){for(var xe=this.internal.write,_e=this.internal.putStream,et=(0,this.internal.getFilters)();et.indexOf("FlateEncode")!==-1;)et.splice(et.indexOf("FlateEncode"),1);Ae.objectId=this.internal.newObject();var Je=[];if(Je.push({key:"Type",value:"/XObject"}),Je.push({key:"Subtype",value:"/Image"}),Je.push({key:"Width",value:Ae.width}),Je.push({key:"Height",value:Ae.height}),Ae.colorSpace===Y.INDEXED?Je.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Ae.palette.length/3-1)+" "+("sMask"in Ae&&Ae.sMask!==void 0?Ae.objectId+2:Ae.objectId+1)+" 0 R]"}):(Je.push({key:"ColorSpace",value:"/"+Ae.colorSpace}),Ae.colorSpace===Y.DEVICE_CMYK&&Je.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Je.push({key:"BitsPerComponent",value:Ae.bitsPerComponent}),"decodeParameters"in Ae&&Ae.decodeParameters!==void 0&&Je.push({key:"DecodeParms",value:"<<"+Ae.decodeParameters+">>"}),"transparency"in Ae&&Array.isArray(Ae.transparency)){for(var rt="",Ye=0,it=Ae.transparency.length;Ye<it;Ye++)rt+=Ae.transparency[Ye]+" "+Ae.transparency[Ye]+" ";Je.push({key:"Mask",value:"["+rt+"]"})}Ae.sMask!==void 0&&Je.push({key:"SMask",value:Ae.objectId+1+" 0 R"});var nt=Ae.filter!==void 0?["/"+Ae.filter]:void 0;if(_e({data:Ae.data,additionalKeyValues:Je,alreadyAppliedFilters:nt,objectId:Ae.objectId}),xe("endobj"),"sMask"in Ae&&Ae.sMask!==void 0){var Bt="/Predictor "+Ae.predictor+" /Colors 1 /BitsPerComponent "+Ae.bitsPerComponent+" /Columns "+Ae.width,ee={width:Ae.width,height:Ae.height,colorSpace:"DeviceGray",bitsPerComponent:Ae.bitsPerComponent,decodeParameters:Bt,data:Ae.sMask};"filter"in Ae&&(ee.filter=Ae.filter),ce.call(this,ee)}if(Ae.colorSpace===Y.INDEXED){var pe=this.internal.newObject();_e({data:ge(new Uint8Array(Ae.palette)),objectId:pe}),xe("endobj")}},u=function(){var ce=this.internal.collections.addImage_images;for(var Ae in ce)l.call(this,ce[Ae])},p=function(){var ce,Ae=this.internal.collections.addImage_images,xe=this.internal.write;for(var _e in Ae)xe("/I"+(ce=Ae[_e]).index,ce.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",p))},m=function(){var ce=this.internal.collections.addImage_images;return a.call(this),ce},w=function(){return Object.keys(this.internal.collections.addImage_images).length},S=function(ce){return typeof n["process"+ce.toUpperCase()]=="function"},T=function(ce){return fi(ce)==="object"&&ce.nodeType===1},Q=function(ce,Ae){if(ce.nodeName==="IMG"&&ce.hasAttribute("src")){var xe=""+ce.getAttribute("src");if(xe.indexOf("data:image/")===0)return dh(unescape(xe).split("base64,").pop());var _e=n.loadFile(xe,!0);if(_e!==void 0)return _e}if(ce.nodeName==="CANVAS"){if(ce.width===0||ce.height===0)throw new Error("Given canvas must have data. Canvas width: "+ce.width+", height: "+ce.height);var et;switch(Ae){case"PNG":et="image/png";break;case"WEBP":et="image/webp";break;case"JPEG":case"JPG":default:et="image/jpeg"}return dh(ce.toDataURL(et,1).split("base64,").pop())}},I=function(ce){var Ae=this.internal.collections.addImage_images;if(Ae){for(var xe in Ae)if(ce===Ae[xe].alias)return Ae[xe]}},q=function(ce,Ae,xe){return ce||Ae||(ce=-96,Ae=-96),ce<0&&(ce=-1*xe.width*72/ce/this.internal.scaleFactor),Ae<0&&(Ae=-1*xe.height*72/Ae/this.internal.scaleFactor),ce===0&&(ce=Ae*xe.width/xe.height),Ae===0&&(Ae=ce*xe.height/xe.width),[ce,Ae]},j=function(ce,Ae,xe,_e,et,Je){var rt=q.call(this,xe,_e,et),Ye=this.internal.getCoordinateString,it=this.internal.getVerticalCoordinateString,nt=m.call(this);if(xe=rt[0],_e=rt[1],nt[et.index]=et,Je){Je*=Math.PI/180;var Bt=Math.cos(Je),ee=Math.sin(Je),pe=function(Re){return Re.toFixed(4)},ye=[pe(Bt),pe(ee),pe(-1*ee),pe(Bt),0,0,"cm"]}this.internal.write("q"),Je?(this.internal.write([1,"0","0",1,Ye(ce),it(Ae+_e),"cm"].join(" ")),this.internal.write(ye.join(" ")),this.internal.write([Ye(xe),"0","0",Ye(_e),"0","0","cm"].join(" "))):this.internal.write([Ye(xe),"0","0",Ye(_e),Ye(ce),it(Ae+_e),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+et.index+" Do"),this.internal.write("Q")},Y=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var K=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ne=n.__addimage__.sHashCode=function(ce){var Ae,xe,_e=0;if(typeof ce=="string")for(xe=ce.length,Ae=0;Ae<xe;Ae++)_e=(_e<<5)-_e+ce.charCodeAt(Ae),_e|=0;else if(Ne(ce))for(xe=ce.byteLength/2,Ae=0;Ae<xe;Ae++)_e=(_e<<5)-_e+ce[Ae],_e|=0;return _e},he=n.__addimage__.validateStringAsBase64=function(ce){(ce=ce||"").toString().trim();var Ae=!0;return ce.length===0&&(Ae=!1),ce.length%4!=0&&(Ae=!1),/^[A-Za-z0-9+/]+$/.test(ce.substr(0,ce.length-2))===!1&&(Ae=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ce.substr(-2))===!1&&(Ae=!1),Ae},Ee=n.__addimage__.extractImageFromDataUrl=function(ce){var Ae=(ce=ce||"").split("base64,"),xe=null;if(Ae.length===2){var _e=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Ae[0]);Array.isArray(_e)&&(xe={mimeType:_e[1],charset:_e[2],data:Ae[1]})}return xe},De=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(ce){return De()&&ce instanceof ArrayBuffer};var Ne=n.__addimage__.isArrayBufferView=function(ce){return De()&&typeof Uint32Array<"u"&&(ce instanceof Int8Array||ce instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ce instanceof Uint8ClampedArray||ce instanceof Int16Array||ce instanceof Uint16Array||ce instanceof Int32Array||ce instanceof Uint32Array||ce instanceof Float32Array||ce instanceof Float64Array)},Qe=n.__addimage__.binaryStringToUint8Array=function(ce){for(var Ae=ce.length,xe=new Uint8Array(Ae),_e=0;_e<Ae;_e++)xe[_e]=ce.charCodeAt(_e);return xe},ge=n.__addimage__.arrayBufferToBinaryString=function(ce){for(var Ae="",xe=Ne(ce)?ce:new Uint8Array(ce),_e=0;_e<xe.length;_e+=8192)Ae+=String.fromCharCode.apply(null,xe.subarray(_e,_e+8192));return Ae};n.addImage=function(){var ce,Ae,xe,_e,et,Je,rt,Ye,it;if(typeof arguments[1]=="number"?(Ae=e,xe=arguments[1],_e=arguments[2],et=arguments[3],Je=arguments[4],rt=arguments[5],Ye=arguments[6],it=arguments[7]):(Ae=arguments[1],xe=arguments[2],_e=arguments[3],et=arguments[4],Je=arguments[5],rt=arguments[6],Ye=arguments[7],it=arguments[8]),fi(ce=arguments[0])==="object"&&!T(ce)&&"imageData"in ce){var nt=ce;ce=nt.imageData,Ae=nt.format||Ae||e,xe=nt.x||xe||0,_e=nt.y||_e||0,et=nt.w||nt.width||et,Je=nt.h||nt.height||Je,rt=nt.alias||rt,Ye=nt.compression||Ye,it=nt.rotation||nt.angle||it}var Bt=this.internal.getFilters();if(Ye===void 0&&Bt.indexOf("FlateEncode")!==-1&&(Ye="SLOW"),isNaN(xe)||isNaN(_e))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var ee=Ze.call(this,ce,Ae,rt,Ye);return j.call(this,xe,_e,et,Je,ee,it),this};var Ze=function(ce,Ae,xe,_e){var et,Je,rt;if(typeof ce=="string"&&s(ce)===e){ce=unescape(ce);var Ye=$e(ce,!1);(Ye!==""||(Ye=n.loadFile(ce,!0))!==void 0)&&(ce=Ye)}if(T(ce)&&(ce=Q(ce,Ae)),Ae=s(ce,Ae),!S(Ae))throw new Error("addImage does not support files of type '"+Ae+"', please ensure that a plugin for '"+Ae+"' support is added.");if(((rt=xe)==null||rt.length===0)&&(xe=function(it){return typeof it=="string"||Ne(it)?ne(it):Ne(it.data)?ne(it.data):null}(ce)),(et=I.call(this,xe))||(De()&&(ce instanceof Uint8Array||Ae==="RGBA"||(Je=ce,ce=Qe(ce))),et=this["process"+Ae.toUpperCase()](ce,w.call(this),xe,function(it){return it&&typeof it=="string"&&(it=it.toUpperCase()),it in n.image_compression?it:K.NONE}(_e),Je)),!et)throw new Error("An unknown error occurred whilst processing the image.");return et},$e=n.__addimage__.convertBase64ToBinaryString=function(ce,Ae){var xe;Ae=typeof Ae!="boolean"||Ae;var _e,et="";if(typeof ce=="string"){_e=(xe=Ee(ce))!==null?xe.data:ce;try{et=dh(_e)}catch(Je){if(Ae)throw he(_e)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Je.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return et};n.getImageProperties=function(ce){var Ae,xe,_e="";if(T(ce)&&(ce=Q(ce)),typeof ce=="string"&&s(ce)===e&&((_e=$e(ce,!1))===""&&(_e=n.loadFile(ce)||""),ce=_e),xe=s(ce),!S(xe))throw new Error("addImage does not support files of type '"+xe+"', please ensure that a plugin for '"+xe+"' support is added.");if(!De()||ce instanceof Uint8Array||(ce=Qe(ce)),!(Ae=this["process"+xe.toUpperCase()](ce)))throw new Error("An unknown error occurred whilst processing the image");return Ae.fileType=xe,Ae}})(Qr.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Qr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var s,l,u,p=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,m=this.internal.getPageInfoByObjId(t.objId),w=t.pageContext.annotations,S=!1,T=0;T<w.length&&!S;T++)switch((s=w[T]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(S=!0);break;case"reference":case"text":case"freetext":S=!0}if(S!=0){this.internal.write("/Annots [");for(var Q=0;Q<w.length;Q++){s=w[Q];var I=this.internal.pdfEscape,q=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),Y=this.internal.newAdditionalObject(),K=this.internal.getEncryptor(j.objId),ne=s.title||"Note";u="<</Type /Annot /Subtype /Text "+(l="/Rect ["+p(s.bounds.x)+" "+a(s.bounds.y+s.bounds.h)+" "+p(s.bounds.x+s.bounds.w)+" "+a(s.bounds.y)+"] ")+"/Contents ("+I(K(s.contents))+")",u+=" /Popup "+Y.objId+" 0 R",u+=" /P "+m.objId+" 0 R",u+=" /T ("+I(K(ne))+") >>",j.content=u;var he=j.objId+" 0 R";u="<</Type /Annot /Subtype /Popup "+(l="/Rect ["+p(s.bounds.x+30)+" "+a(s.bounds.y+s.bounds.h)+" "+p(s.bounds.x+s.bounds.w+30)+" "+a(s.bounds.y)+"] ")+" /Parent "+he,s.open&&(u+=" /Open true"),u+=" >>",Y.content=u,this.internal.write(j.objId,"0 R",Y.objId,"0 R");break;case"freetext":l="/Rect ["+p(s.bounds.x)+" "+a(s.bounds.y)+" "+p(s.bounds.x+s.bounds.w)+" "+a(s.bounds.y+s.bounds.h)+"] ";var Ee=s.color||"#000000";u="<</Type /Annot /Subtype /FreeText "+l+"/Contents ("+I(q(s.contents))+")",u+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Ee+")",u+=" /Border [0 0 0]",u+=" >>",this.internal.write(u);break;case"link":if(s.options.name){var De=this.annotations._nameMap[s.options.name];s.options.pageNumber=De.page,s.options.top=De.y}else s.options.top||(s.options.top=0);if(l="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",u="",s.options.url)u="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /A <</S /URI /URI ("+I(q(s.options.url))+") >>";else if(s.options.pageNumber)switch(u="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":u+=" /Fit]";break;case"FitH":u+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,u+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var Ne=a(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),u+=" /XYZ "+s.options.left+" "+Ne+" "+s.options.zoom+"]"}u!=""&&(u+=" >>",this.internal.write(u))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},n.link=function(t,s,l,u,p){var a=this.internal.getCurrentPageInfo(),m=this.internal.getCoordinateString,w=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:m(t),y:w(s),w:m(t+l),h:w(s+u)},options:p,type:"link"})},n.textWithLink=function(t,s,l,u){var p,a,m=this.getTextWidth(t),w=this.internal.getLineHeight()/this.internal.scaleFactor;if(u.maxWidth!==void 0){a=u.maxWidth;var S=this.splitTextToSize(t,a).length;p=Math.ceil(w*S)}else a=m,p=w;return this.text(t,s,l,u),l+=.2*w,u.align==="center"&&(s-=m/2),u.align==="right"&&(s-=m),this.link(s,l-w,a,p,u),m},n.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}}(Qr.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},l=[1570,1571,1573,1575];n.__arabicParser__={};var u=n.__arabicParser__.isInArabicSubstitutionA=function(j){return e[j.charCodeAt(0)]!==void 0},p=n.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},a=n.__arabicParser__.isArabicEndLetter=function(j){return p(j)&&u(j)&&e[j.charCodeAt(0)].length<=2},m=n.__arabicParser__.isArabicAlfLetter=function(j){return p(j)&&l.indexOf(j.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return p(j)&&u(j)&&e[j.charCodeAt(0)].length>=1};var w=n.__arabicParser__.arabicLetterHasFinalForm=function(j){return p(j)&&u(j)&&e[j.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(j){return p(j)&&u(j)&&e[j.charCodeAt(0)].length>=3};var S=n.__arabicParser__.arabicLetterHasMedialForm=function(j){return p(j)&&u(j)&&e[j.charCodeAt(0)].length==4},T=n.__arabicParser__.resolveLigatures=function(j){var Y=0,K=t,ne="",he=0;for(Y=0;Y<j.length;Y+=1)K[j.charCodeAt(Y)]!==void 0?(he++,typeof(K=K[j.charCodeAt(Y)])=="number"&&(ne+=String.fromCharCode(K),K=t,he=0),Y===j.length-1&&(K=t,ne+=j.charAt(Y-(he-1)),Y-=he-1,he=0)):(K=t,ne+=j.charAt(Y-he),Y-=he,he=0);return ne};n.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&s[j.charCodeAt(0)]!==void 0};var Q=n.__arabicParser__.getCorrectForm=function(j,Y,K){return p(j)?u(j)===!1?-1:!w(j)||!p(Y)&&!p(K)||!p(K)&&a(Y)||a(j)&&!p(Y)||a(j)&&m(Y)||a(j)&&a(Y)?0:S(j)&&p(Y)&&!a(Y)&&p(K)&&w(K)?3:a(j)||!p(K)?1:2:-1},I=function(j){var Y=0,K=0,ne=0,he="",Ee="",De="",Ne=(j=j||"").split("\\s+"),Qe=[];for(Y=0;Y<Ne.length;Y+=1){for(Qe.push(""),K=0;K<Ne[Y].length;K+=1)he=Ne[Y][K],Ee=Ne[Y][K-1],De=Ne[Y][K+1],p(he)?(ne=Q(he,Ee,De),Qe[Y]+=ne!==-1?String.fromCharCode(e[he.charCodeAt(0)][ne]):he):Qe[Y]+=he;Qe[Y]=T(Qe[Y])}return Qe.join(" ")},q=n.__arabicParser__.processArabic=n.processArabic=function(){var j,Y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,K=[];if(Array.isArray(Y)){var ne=0;for(K=[],ne=0;ne<Y.length;ne+=1)Array.isArray(Y[ne])?K.push([I(Y[ne][0]),Y[ne][1],Y[ne][2]]):K.push([I(Y[ne])]);j=K}else j=I(Y);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};n.events.push(["preProcessText",q])}(Qr.API),Qr.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(a){s=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var l=300;Object.defineProperty(this,"height",{get:function(){return l},set:function(a){l=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=l+1)}});var u=[];Object.defineProperty(this,"childNodes",{get:function(){return u},set:function(a){u=a}});var p={};Object.defineProperty(this,"style",{get:function(){return p},set:function(a){p=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var l;if((t=t||"2d")!=="2d")return null;for(l in s)this.pdf.context2d.hasOwnProperty(l)&&(this.pdf.context2d[l]=s[l]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Qr.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),l.call(this))},l=function(){this.internal.__cell__.lastCell=new u,this.internal.__cell__.pages=1},u=function(){var m=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return m},set:function(j){m=j}});var w=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return w},set:function(j){w=j}});var S=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return S},set:function(j){S=j}});var T=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return T},set:function(j){T=j}});var Q=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Q},set:function(j){Q=j}});var I=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return I},set:function(j){I=j}});var q=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return q},set:function(j){q=j}}),this};u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},u.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(m){return s.call(this),this.internal.__cell__.headerFunction=typeof m=="function"?m:void 0,this},n.getTextDimensions=function(m,w){s.call(this);var S=(w=w||{}).fontSize||this.getFontSize(),T=w.font||this.getFont(),Q=w.scaleFactor||this.internal.scaleFactor,I=0,q=0,j=0,Y=this;if(!Array.isArray(m)&&typeof m!="string"){if(typeof m!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");m=String(m)}var K=w.maxWidth;K>0?typeof m=="string"?m=this.splitTextToSize(m,K):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(he,Ee){return he.concat(Y.splitTextToSize(Ee,K))},[])):m=Array.isArray(m)?m:[m];for(var ne=0;ne<m.length;ne++)I<(j=this.getStringUnitWidth(m[ne],{font:T})*S)&&(I=j);return I!==0&&(q=m.length),{w:I/=Q,h:Math.max((q*S*this.getLineHeightFactor()-S*(this.getLineHeightFactor()-1))/Q,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var m=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new u(m.left,m.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var p=n.cell=function(){var m;m=arguments[0]instanceof u?arguments[0]:new u(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var w=this.internal.__cell__.lastCell,S=this.internal.__cell__.padding,T=this.internal.__cell__.margins||e,Q=this.internal.__cell__.tableHeaderRow,I=this.internal.__cell__.printHeaders;return w.lineNumber!==void 0&&(w.lineNumber===m.lineNumber?(m.x=(w.x||0)+(w.width||0),m.y=w.y||0):w.y+w.height+m.height+T.bottom>this.getPageHeight()?(this.cellAddPage(),m.y=T.top,I&&Q&&(this.printHeaderRow(m.lineNumber,!0),m.y+=Q[0].height)):m.y=w.y+w.height||m.y),m.text[0]!==void 0&&(this.rect(m.x,m.y,m.width,m.height,t===!0?"FD":void 0),m.align==="right"?this.text(m.text,m.x+m.width-S,m.y+S,{align:"right",baseline:"top"}):m.align==="center"?this.text(m.text,m.x+m.width/2,m.y+S,{align:"center",baseline:"top",maxWidth:m.width-S-S}):this.text(m.text,m.x+S,m.y+S,{align:"left",baseline:"top",maxWidth:m.width-S-S})),this.internal.__cell__.lastCell=m,this};n.table=function(m,w,S,T,Q){if(s.call(this),!S)throw new Error("No data for PDF table.");var I,q,j,Y,K=[],ne=[],he=[],Ee={},De={},Ne=[],Qe=[],ge=(Q=Q||{}).autoSize||!1,Ze=Q.printHeaders!==!1,$e=Q.css&&Q.css["font-size"]!==void 0?16*Q.css["font-size"]:Q.fontSize||12,ce=Q.margins||Object.assign({width:this.getPageWidth()},e),Ae=typeof Q.padding=="number"?Q.padding:3,xe=Q.headerBackgroundColor||"#c8c8c8",_e=Q.headerTextColor||"#000";if(l.call(this),this.internal.__cell__.printHeaders=Ze,this.internal.__cell__.margins=ce,this.internal.__cell__.table_font_size=$e,this.internal.__cell__.padding=Ae,this.internal.__cell__.headerBackgroundColor=xe,this.internal.__cell__.headerTextColor=_e,this.setFontSize($e),T==null)ne=K=Object.keys(S[0]),he=K.map(function(){return"left"});else if(Array.isArray(T)&&fi(T[0])==="object")for(K=T.map(function(nt){return nt.name}),ne=T.map(function(nt){return nt.prompt||nt.name||""}),he=T.map(function(nt){return nt.align||"left"}),I=0;I<T.length;I+=1)De[T[I].name]=T[I].width*(19.049976/25.4);else Array.isArray(T)&&typeof T[0]=="string"&&(ne=K=T,he=K.map(function(){return"left"}));if(ge||Array.isArray(T)&&typeof T[0]=="string")for(I=0;I<K.length;I+=1){for(Ee[Y=K[I]]=S.map(function(nt){return nt[Y]}),this.setFont(void 0,"bold"),Ne.push(this.getTextDimensions(ne[I],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),q=Ee[Y],this.setFont(void 0,"normal"),j=0;j<q.length;j+=1)Ne.push(this.getTextDimensions(q[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);De[Y]=Math.max.apply(null,Ne)+Ae+Ae,Ne=[]}if(Ze){var et={};for(I=0;I<K.length;I+=1)et[K[I]]={},et[K[I]].text=ne[I],et[K[I]].align=he[I];var Je=a.call(this,et,De);Qe=K.map(function(nt){return new u(m,w,De[nt],Je,et[nt].text,void 0,et[nt].align)}),this.setTableHeaderRow(Qe),this.printHeaderRow(1,!1)}var rt=T.reduce(function(nt,Bt){return nt[Bt.name]=Bt.align,nt},{});for(I=0;I<S.length;I+=1){"rowStart"in Q&&Q.rowStart instanceof Function&&Q.rowStart({row:I,data:S[I]},this);var Ye=a.call(this,S[I],De);for(j=0;j<K.length;j+=1){var it=S[I][K[j]];"cellStart"in Q&&Q.cellStart instanceof Function&&Q.cellStart({row:I,col:j,data:it},this),p.call(this,new u(m,w,De[K[j]],Ye,it,I+2,rt[K[j]]))}}return this.internal.__cell__.table_x=m,this.internal.__cell__.table_y=w,this};var a=function(m,w){var S=this.internal.__cell__.padding,T=this.internal.__cell__.table_font_size,Q=this.internal.scaleFactor;return Object.keys(m).map(function(I){var q=m[I];return this.splitTextToSize(q.hasOwnProperty("text")?q.text:q,w[I]-S-S)},this).map(function(I){return this.getLineHeightFactor()*I.length*T/Q+S+S},this).reduce(function(I,q){return Math.max(I,q)},0)};n.setTableHeaderRow=function(m){s.call(this),this.internal.__cell__.tableHeaderRow=m},n.printHeaderRow=function(m,w){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var S;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var T=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new u(T[0],T[1],T[2],T[3],void 0,-1)}this.setFont(void 0,"bold");for(var Q=[],I=0;I<this.internal.__cell__.tableHeaderRow.length;I+=1){S=this.internal.__cell__.tableHeaderRow[I].clone(),w&&(S.y=this.internal.__cell__.margins.top||0,Q.push(S)),S.lineNumber=m;var q=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),p.call(this,S),this.setTextColor(q)}Q.length>0&&this.setTableHeaderRow(Q),this.setFont(void 0,"normal"),t=!1}}(Qr.API);var vv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},_v=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Qg=yv(_v),wv=[100,200,300,400,500,600,700,800,900],z4=yv(wv);function Mg(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(u){return vv[u=u||"normal"]?u:"normal"}(n.style),s=function(u){if(!u)return 400;if(typeof u=="number")return u>=100&&u<=900&&u%100==0?u:400;if(/^\d00$/.test(u))return parseInt(u);switch(u){case"bold":return 700;case"normal":default:return 400}}(n.weight),l=function(u){return typeof Qg[u=u||"normal"]=="number"?u:"normal"}(n.stretch);return{family:e,style:t,weight:s,stretch:l,src:n.src||[],ref:n.ref||{name:e,style:[l,t,s].join(" ")}}}function bv(n,e,t,s){var l;for(l=t;l>=0&&l<e.length;l+=s)if(n[e[l]])return n[e[l]];for(l=t;l>=0&&l<e.length;l-=s)if(n[e[l]])return n[e[l]]}var H4={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},xv={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Bv(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function V4(n,e,t){for(var s=(t=t||{}).defaultFontFamily||"times",l=Object.assign({},H4,t.genericFontFamilies||{}),u=null,p=null,a=0;a<e.length;++a)if(l[(u=Mg(e[a])).family]&&(u.family=l[u.family]),n.hasOwnProperty(u.family)){p=n[u.family];break}if(!(p=p||n[s]))throw new Error("Could not find a font-family for the rule '"+Bv(u)+"' and default family '"+s+"'.");if(p=function(m,w){if(w[m])return w[m];var S=Qg[m],T=S<=Qg.normal?-1:1,Q=bv(w,_v,S,T);if(!Q)throw new Error("Could not find a matching font-stretch value for "+m);return Q}(u.stretch,p),p=function(m,w){if(w[m])return w[m];for(var S=vv[m],T=0;T<S.length;++T)if(w[S[T]])return w[S[T]];throw new Error("Could not find a matching font-style for "+m)}(u.style,p),!(p=function(m,w){if(w[m])return w[m];if(m===400&&w[500])return w[500];if(m===500&&w[400])return w[400];var S=z4[m],T=bv(w,wv,S,m<400?-1:1);if(!T)throw new Error("Could not find a matching font-weight for value "+m);return T}(u.weight,p)))throw new Error("Failed to resolve a font for the rule '"+Bv(u)+"'.");return p}function Cv(n){return n.trimLeft()}function j4(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function G4(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var qp,Sv,Fv,Ev=["times"];(function(n){var e,t,s,l,u,p,a,m,w,S=function(ee){return ee=ee||{},this.isStrokeTransparent=ee.isStrokeTransparent||!1,this.strokeOpacity=ee.strokeOpacity||1,this.strokeStyle=ee.strokeStyle||"#000000",this.fillStyle=ee.fillStyle||"#000000",this.isFillTransparent=ee.isFillTransparent||!1,this.fillOpacity=ee.fillOpacity||1,this.font=ee.font||"10px sans-serif",this.textBaseline=ee.textBaseline||"alphabetic",this.textAlign=ee.textAlign||"left",this.lineWidth=ee.lineWidth||1,this.lineJoin=ee.lineJoin||"miter",this.lineCap=ee.lineCap||"butt",this.path=ee.path||[],this.transform=ee.transform!==void 0?ee.transform.clone():new m,this.globalCompositeOperation=ee.globalCompositeOperation||"normal",this.globalAlpha=ee.globalAlpha||1,this.clip_path=ee.clip_path||[],this.currentPoint=ee.currentPoint||new p,this.miterLimit=ee.miterLimit||10,this.lastPoint=ee.lastPoint||new p,this.lineDashOffset=ee.lineDashOffset||0,this.lineDash=ee.lineDash||[],this.margin=ee.margin||[0,0,0,0],this.prevPageLastElemOffset=ee.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ee.ignoreClearRect!="boolean"||ee.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new T(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getHorizontalCoordinate,u=this.internal.getVerticalCoordinate,p=this.internal.Point,a=this.internal.Rectangle,m=this.internal.Matrix,w=new S}]);var T=function(ee){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var pe=ee;Object.defineProperty(this,"pdf",{get:function(){return pe}});var ye=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ye},set:function(ft){ye=!!ft}});var Re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Re},set:function(ft){Re=!!ft}});var Ge=0;Object.defineProperty(this,"posX",{get:function(){return Ge},set:function(ft){isNaN(ft)||(Ge=ft)}});var tt=0;Object.defineProperty(this,"posY",{get:function(){return tt},set:function(ft){isNaN(ft)||(tt=ft)}}),Object.defineProperty(this,"margin",{get:function(){return w.margin},set:function(ft){var Ue;typeof ft=="number"?Ue=[ft,ft,ft,ft]:((Ue=new Array(4))[0]=ft[0],Ue[1]=ft.length>=2?ft[1]:Ue[0],Ue[2]=ft.length>=3?ft[2]:Ue[0],Ue[3]=ft.length>=4?ft[3]:Ue[1]),w.margin=Ue}});var st=!1;Object.defineProperty(this,"autoPaging",{get:function(){return st},set:function(ft){st=ft}});var ot=0;Object.defineProperty(this,"lastBreak",{get:function(){return ot},set:function(ft){ot=ft}});var Ct=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ct},set:function(ft){Ct=ft}}),Object.defineProperty(this,"ctx",{get:function(){return w},set:function(ft){ft instanceof S&&(w=ft)}}),Object.defineProperty(this,"path",{get:function(){return w.path},set:function(ft){w.path=ft}});var Ft=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ft},set:function(ft){Ft=ft}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ft){var Ue;Ue=Q(ft),this.ctx.fillStyle=Ue.style,this.ctx.isFillTransparent=Ue.a===0,this.ctx.fillOpacity=Ue.a,this.pdf.setFillColor(Ue.r,Ue.g,Ue.b,{a:Ue.a}),this.pdf.setTextColor(Ue.r,Ue.g,Ue.b,{a:Ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ft){var Ue=Q(ft);this.ctx.strokeStyle=Ue.style,this.ctx.isStrokeTransparent=Ue.a===0,this.ctx.strokeOpacity=Ue.a,Ue.a===0?this.pdf.setDrawColor(255,255,255):(Ue.a,this.pdf.setDrawColor(Ue.r,Ue.g,Ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ft){["butt","round","square"].indexOf(ft)!==-1&&(this.ctx.lineCap=ft,this.pdf.setLineCap(ft))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ft){isNaN(ft)||(this.ctx.lineWidth=ft,this.pdf.setLineWidth(ft))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ft){["bevel","round","miter"].indexOf(ft)!==-1&&(this.ctx.lineJoin=ft,this.pdf.setLineJoin(ft))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ft){isNaN(ft)||(this.ctx.miterLimit=ft,this.pdf.setMiterLimit(ft))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ft){this.ctx.textBaseline=ft}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ft){["right","end","center","left","start"].indexOf(ft)!==-1&&(this.ctx.textAlign=ft)}});var zt=null;function Vt(ft,Ue){if(zt===null){var fr=function(Zt){var bt=[];return Object.keys(Zt).forEach(function(ze){Zt[ze].forEach(function(Ut){var Pt=null;switch(Ut){case"bold":Pt={family:ze,weight:"bold"};break;case"italic":Pt={family:ze,style:"italic"};break;case"bolditalic":Pt={family:ze,weight:"bold",style:"italic"};break;case"":case"normal":Pt={family:ze}}Pt!==null&&(Pt.ref={name:ze,style:Ut},bt.push(Pt))})}),bt}(ft.getFontList());zt=function(Zt){for(var bt={},ze=0;ze<Zt.length;++ze){var Ut=Mg(Zt[ze]),Pt=Ut.family,Qt=Ut.stretch,Lt=Ut.style,hr=Ut.weight;bt[Pt]=bt[Pt]||{},bt[Pt][Qt]=bt[Pt][Qt]||{},bt[Pt][Qt][Lt]=bt[Pt][Qt][Lt]||{},bt[Pt][Qt][Lt][hr]=Ut}return bt}(fr.concat(Ue))}return zt}var Jt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Jt},set:function(ft){zt=null,Jt=ft}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ft){var Ue;if(this.ctx.font=ft,(Ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ft))!==null){var fr=Ue[1],Zt=(Ue[2],Ue[3]),bt=Ue[4],ze=(Ue[5],Ue[6]),Ut=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(bt)[2];bt=Math.floor(Ut==="px"?parseFloat(bt)*this.pdf.internal.scaleFactor:Ut==="em"?parseFloat(bt)*this.pdf.getFontSize():parseFloat(bt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(bt);var Pt=function(gr){var br,Rt,vt=[],Cr=gr.trim();if(Cr==="")return Ev;if(Cr in xv)return[xv[Cr]];for(;Cr!=="";){switch(Rt=null,br=(Cr=Cv(Cr)).charAt(0)){case'"':case"'":Rt=j4(Cr.substring(1),br);break;default:Rt=G4(Cr)}if(Rt===null||(vt.push(Rt[0]),(Cr=Cv(Rt[1]))!==""&&Cr.charAt(0)!==","))return Ev;Cr=Cr.replace(/^,/,"")}return vt}(ze);if(this.fontFaces){var Qt=V4(Vt(this.pdf,this.fontFaces),Pt.map(function(gr){return{family:gr,stretch:"normal",weight:Zt,style:fr}}));this.pdf.setFont(Qt.ref.name,Qt.ref.style)}else{var Lt="";(Zt==="bold"||parseInt(Zt,10)>=700||fr==="bold")&&(Lt="bold"),fr==="italic"&&(Lt+="italic"),Lt.length===0&&(Lt="normal");for(var hr="",wr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Lr=0;Lr<Pt.length;Lr++){if(this.pdf.internal.getFont(Pt[Lr],Lt,{noFallback:!0,disableWarning:!0})!==void 0){hr=Pt[Lr];break}if(Lt==="bolditalic"&&this.pdf.internal.getFont(Pt[Lr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)hr=Pt[Lr],Lt="bold";else if(this.pdf.internal.getFont(Pt[Lr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){hr=Pt[Lr],Lt="normal";break}}if(hr===""){for(var qr=0;qr<Pt.length;qr++)if(wr[Pt[qr]]){hr=wr[Pt[qr]];break}}hr=hr===""?"Times":hr,this.pdf.setFont(hr,Lt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ft){this.ctx.globalCompositeOperation=ft}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ft){this.ctx.globalAlpha=ft}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ft){this.ctx.lineDashOffset=ft,Bt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ft){this.ctx.lineDash=ft,Bt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ft){this.ctx.ignoreClearRect=!!ft}})};T.prototype.setLineDash=function(ee){this.lineDash=ee},T.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},T.prototype.fill=function(){Ee.call(this,"fill",!1)},T.prototype.stroke=function(){Ee.call(this,"stroke",!1)},T.prototype.beginPath=function(){this.path=[{type:"begin"}]},T.prototype.moveTo=function(ee,pe){if(isNaN(ee)||isNaN(pe))throw Mi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ye=this.ctx.transform.applyToPoint(new p(ee,pe));this.path.push({type:"mt",x:ye.x,y:ye.y}),this.ctx.lastPoint=new p(ee,pe)},T.prototype.closePath=function(){var ee=new p(0,0),pe=0;for(pe=this.path.length-1;pe!==-1;pe--)if(this.path[pe].type==="begin"&&fi(this.path[pe+1])==="object"&&typeof this.path[pe+1].x=="number"){ee=new p(this.path[pe+1].x,this.path[pe+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new p(ee.x,ee.y)},T.prototype.lineTo=function(ee,pe){if(isNaN(ee)||isNaN(pe))throw Mi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ye=this.ctx.transform.applyToPoint(new p(ee,pe));this.path.push({type:"lt",x:ye.x,y:ye.y}),this.ctx.lastPoint=new p(ye.x,ye.y)},T.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Ee.call(this,null,!0)},T.prototype.quadraticCurveTo=function(ee,pe,ye,Re){if(isNaN(ye)||isNaN(Re)||isNaN(ee)||isNaN(pe))throw Mi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ge=this.ctx.transform.applyToPoint(new p(ye,Re)),tt=this.ctx.transform.applyToPoint(new p(ee,pe));this.path.push({type:"qct",x1:tt.x,y1:tt.y,x:Ge.x,y:Ge.y}),this.ctx.lastPoint=new p(Ge.x,Ge.y)},T.prototype.bezierCurveTo=function(ee,pe,ye,Re,Ge,tt){if(isNaN(Ge)||isNaN(tt)||isNaN(ee)||isNaN(pe)||isNaN(ye)||isNaN(Re))throw Mi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var st=this.ctx.transform.applyToPoint(new p(Ge,tt)),ot=this.ctx.transform.applyToPoint(new p(ee,pe)),Ct=this.ctx.transform.applyToPoint(new p(ye,Re));this.path.push({type:"bct",x1:ot.x,y1:ot.y,x2:Ct.x,y2:Ct.y,x:st.x,y:st.y}),this.ctx.lastPoint=new p(st.x,st.y)},T.prototype.arc=function(ee,pe,ye,Re,Ge,tt){if(isNaN(ee)||isNaN(pe)||isNaN(ye)||isNaN(Re)||isNaN(Ge))throw Mi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(tt=!!tt,!this.ctx.transform.isIdentity){var st=this.ctx.transform.applyToPoint(new p(ee,pe));ee=st.x,pe=st.y;var ot=this.ctx.transform.applyToPoint(new p(0,ye)),Ct=this.ctx.transform.applyToPoint(new p(0,0));ye=Math.sqrt(Math.pow(ot.x-Ct.x,2)+Math.pow(ot.y-Ct.y,2))}Math.abs(Ge-Re)>=2*Math.PI&&(Re=0,Ge=2*Math.PI),this.path.push({type:"arc",x:ee,y:pe,radius:ye,startAngle:Re,endAngle:Ge,counterclockwise:tt})},T.prototype.arcTo=function(ee,pe,ye,Re,Ge){throw new Error("arcTo not implemented.")},T.prototype.rect=function(ee,pe,ye,Re){if(isNaN(ee)||isNaN(pe)||isNaN(ye)||isNaN(Re))throw Mi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ee,pe),this.lineTo(ee+ye,pe),this.lineTo(ee+ye,pe+Re),this.lineTo(ee,pe+Re),this.lineTo(ee,pe),this.lineTo(ee+ye,pe),this.lineTo(ee,pe)},T.prototype.fillRect=function(ee,pe,ye,Re){if(isNaN(ee)||isNaN(pe)||isNaN(ye)||isNaN(Re))throw Mi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!I.call(this)){var Ge={};this.lineCap!=="butt"&&(Ge.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ge.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ee,pe,ye,Re),this.fill(),Ge.hasOwnProperty("lineCap")&&(this.lineCap=Ge.lineCap),Ge.hasOwnProperty("lineJoin")&&(this.lineJoin=Ge.lineJoin)}},T.prototype.strokeRect=function(ee,pe,ye,Re){if(isNaN(ee)||isNaN(pe)||isNaN(ye)||isNaN(Re))throw Mi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");q.call(this)||(this.beginPath(),this.rect(ee,pe,ye,Re),this.stroke())},T.prototype.clearRect=function(ee,pe,ye,Re){if(isNaN(ee)||isNaN(pe)||isNaN(ye)||isNaN(Re))throw Mi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ee,pe,ye,Re))},T.prototype.save=function(ee){ee=typeof ee!="boolean"||ee;for(var pe=this.pdf.internal.getCurrentPageInfo().pageNumber,ye=0;ye<this.pdf.internal.getNumberOfPages();ye++)this.pdf.setPage(ye+1),this.pdf.internal.out("q");if(this.pdf.setPage(pe),ee){this.ctx.fontSize=this.pdf.internal.getFontSize();var Re=new S(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Re}},T.prototype.restore=function(ee){ee=typeof ee!="boolean"||ee;for(var pe=this.pdf.internal.getCurrentPageInfo().pageNumber,ye=0;ye<this.pdf.internal.getNumberOfPages();ye++)this.pdf.setPage(ye+1),this.pdf.internal.out("Q");this.pdf.setPage(pe),ee&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},T.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Q=function(ee){var pe,ye,Re,Ge;if(ee.isCanvasGradient===!0&&(ee=ee.getColor()),!ee)return{r:0,g:0,b:0,a:0,style:ee};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ee))pe=0,ye=0,Re=0,Ge=0;else{var tt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ee);if(tt!==null)pe=parseInt(tt[1]),ye=parseInt(tt[2]),Re=parseInt(tt[3]),Ge=1;else if((tt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ee))!==null)pe=parseInt(tt[1]),ye=parseInt(tt[2]),Re=parseInt(tt[3]),Ge=parseFloat(tt[4]);else{if(Ge=1,typeof ee=="string"&&ee.charAt(0)!=="#"){var st=new Av(ee);ee=st.ok?st.toHex():"#000000"}ee.length===4?(pe=ee.substring(1,2),pe+=pe,ye=ee.substring(2,3),ye+=ye,Re=ee.substring(3,4),Re+=Re):(pe=ee.substring(1,3),ye=ee.substring(3,5),Re=ee.substring(5,7)),pe=parseInt(pe,16),ye=parseInt(ye,16),Re=parseInt(Re,16)}}return{r:pe,g:ye,b:Re,a:Ge,style:ee}},I=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},q=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};T.prototype.fillText=function(ee,pe,ye,Re){if(isNaN(pe)||isNaN(ye)||typeof ee!="string")throw Mi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Re=isNaN(Re)?void 0:Re,!I.call(this)){var Ge=Ye(this.ctx.transform.rotation),tt=this.ctx.transform.scaleX;Ae.call(this,{text:ee,x:pe,y:ye,scale:tt,angle:Ge,align:this.textAlign,maxWidth:Re})}},T.prototype.strokeText=function(ee,pe,ye,Re){if(isNaN(pe)||isNaN(ye)||typeof ee!="string")throw Mi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!q.call(this)){Re=isNaN(Re)?void 0:Re;var Ge=Ye(this.ctx.transform.rotation),tt=this.ctx.transform.scaleX;Ae.call(this,{text:ee,x:pe,y:ye,scale:tt,renderingMode:"stroke",angle:Ge,align:this.textAlign,maxWidth:Re})}},T.prototype.measureText=function(ee){if(typeof ee!="string")throw Mi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var pe=this.pdf,ye=this.pdf.internal.scaleFactor,Re=pe.internal.getFontSize(),Ge=pe.getStringUnitWidth(ee)*Re/pe.internal.scaleFactor,tt=function(st){var ot=(st=st||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ot}}),this};return new tt({width:Ge*=Math.round(96*ye/72*1e4)/1e4})},T.prototype.scale=function(ee,pe){if(isNaN(ee)||isNaN(pe))throw Mi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ye=new m(ee,0,0,pe,0,0);this.ctx.transform=this.ctx.transform.multiply(ye)},T.prototype.rotate=function(ee){if(isNaN(ee))throw Mi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var pe=new m(Math.cos(ee),Math.sin(ee),-Math.sin(ee),Math.cos(ee),0,0);this.ctx.transform=this.ctx.transform.multiply(pe)},T.prototype.translate=function(ee,pe){if(isNaN(ee)||isNaN(pe))throw Mi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ye=new m(1,0,0,1,ee,pe);this.ctx.transform=this.ctx.transform.multiply(ye)},T.prototype.transform=function(ee,pe,ye,Re,Ge,tt){if(isNaN(ee)||isNaN(pe)||isNaN(ye)||isNaN(Re)||isNaN(Ge)||isNaN(tt))throw Mi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var st=new m(ee,pe,ye,Re,Ge,tt);this.ctx.transform=this.ctx.transform.multiply(st)},T.prototype.setTransform=function(ee,pe,ye,Re,Ge,tt){ee=isNaN(ee)?1:ee,pe=isNaN(pe)?0:pe,ye=isNaN(ye)?0:ye,Re=isNaN(Re)?1:Re,Ge=isNaN(Ge)?0:Ge,tt=isNaN(tt)?0:tt,this.ctx.transform=new m(ee,pe,ye,Re,Ge,tt)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};T.prototype.drawImage=function(ee,pe,ye,Re,Ge,tt,st,ot,Ct){var Ft=this.pdf.getImageProperties(ee),zt=1,Vt=1,Jt=1,ft=1;Re!==void 0&&ot!==void 0&&(Jt=ot/Re,ft=Ct/Ge,zt=Ft.width/Re*ot/Re,Vt=Ft.height/Ge*Ct/Ge),tt===void 0&&(tt=pe,st=ye,pe=0,ye=0),Re!==void 0&&ot===void 0&&(ot=Re,Ct=Ge),Re===void 0&&ot===void 0&&(ot=Ft.width,Ct=Ft.height);for(var Ue,fr=this.ctx.transform.decompose(),Zt=Ye(fr.rotate.shx),bt=new m,ze=(bt=(bt=(bt=bt.multiply(fr.translate)).multiply(fr.skew)).multiply(fr.scale)).applyToRectangle(new a(tt-pe*Jt,st-ye*ft,Re*zt,Ge*Vt)),Ut=Y.call(this,ze),Pt=[],Qt=0;Qt<Ut.length;Qt+=1)Pt.indexOf(Ut[Qt])===-1&&Pt.push(Ut[Qt]);if(he(Pt),this.autoPaging)for(var Lt=Pt[0],hr=Pt[Pt.length-1],wr=Lt;wr<hr+1;wr++){this.pdf.setPage(wr);var Lr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qr=wr===1?this.posY+this.margin[0]:this.margin[0],gr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],br=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Rt=wr===1?0:gr+(wr-2)*br;if(this.ctx.clip_path.length!==0){var vt=this.path;Ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(Ue,this.posX+this.margin[3],-Rt+qr+this.ctx.prevPageLastElemOffset),De.call(this,"fill",!0),this.path=vt}var Cr=JSON.parse(JSON.stringify(ze));Cr=ne([Cr],this.posX+this.margin[3],-Rt+qr+this.ctx.prevPageLastElemOffset)[0];var Tr=(wr>Lt||wr<hr)&&j.call(this);Tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lr,br,null).clip().discardPath()),this.pdf.addImage(ee,"JPEG",Cr.x,Cr.y,Cr.w,Cr.h,null,null,Zt),Tr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ee,"JPEG",ze.x,ze.y,ze.w,ze.h,null,null,Zt)};var Y=function(ee,pe,ye){var Re=[];pe=pe||this.pdf.internal.pageSize.width,ye=ye||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ge=this.posY+this.ctx.prevPageLastElemOffset;switch(ee.type){default:case"mt":case"lt":Re.push(Math.floor((ee.y+Ge)/ye)+1);break;case"arc":Re.push(Math.floor((ee.y+Ge-ee.radius)/ye)+1),Re.push(Math.floor((ee.y+Ge+ee.radius)/ye)+1);break;case"qct":var tt=it(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ee.x1,ee.y1,ee.x,ee.y);Re.push(Math.floor((tt.y+Ge)/ye)+1),Re.push(Math.floor((tt.y+tt.h+Ge)/ye)+1);break;case"bct":var st=nt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ee.x1,ee.y1,ee.x2,ee.y2,ee.x,ee.y);Re.push(Math.floor((st.y+Ge)/ye)+1),Re.push(Math.floor((st.y+st.h+Ge)/ye)+1);break;case"rect":Re.push(Math.floor((ee.y+Ge)/ye)+1),Re.push(Math.floor((ee.y+ee.h+Ge)/ye)+1)}for(var ot=0;ot<Re.length;ot+=1)for(;this.pdf.internal.getNumberOfPages()<Re[ot];)K.call(this);return Re},K=function(){var ee=this.fillStyle,pe=this.strokeStyle,ye=this.font,Re=this.lineCap,Ge=this.lineWidth,tt=this.lineJoin;this.pdf.addPage(),this.fillStyle=ee,this.strokeStyle=pe,this.font=ye,this.lineCap=Re,this.lineWidth=Ge,this.lineJoin=tt},ne=function(ee,pe,ye){for(var Re=0;Re<ee.length;Re++)switch(ee[Re].type){case"bct":ee[Re].x2+=pe,ee[Re].y2+=ye;case"qct":ee[Re].x1+=pe,ee[Re].y1+=ye;case"mt":case"lt":case"arc":default:ee[Re].x+=pe,ee[Re].y+=ye}return ee},he=function(ee){return ee.sort(function(pe,ye){return pe-ye})},Ee=function(ee,pe){for(var ye,Re,Ge=this.fillStyle,tt=this.strokeStyle,st=this.lineCap,ot=this.lineWidth,Ct=Math.abs(ot*this.ctx.transform.scaleX),Ft=this.lineJoin,zt=JSON.parse(JSON.stringify(this.path)),Vt=JSON.parse(JSON.stringify(this.path)),Jt=[],ft=0;ft<Vt.length;ft++)if(Vt[ft].x!==void 0)for(var Ue=Y.call(this,Vt[ft]),fr=0;fr<Ue.length;fr+=1)Jt.indexOf(Ue[fr])===-1&&Jt.push(Ue[fr]);for(var Zt=0;Zt<Jt.length;Zt++)for(;this.pdf.internal.getNumberOfPages()<Jt[Zt];)K.call(this);if(he(Jt),this.autoPaging)for(var bt=Jt[0],ze=Jt[Jt.length-1],Ut=bt;Ut<ze+1;Ut++){this.pdf.setPage(Ut),this.fillStyle=Ge,this.strokeStyle=tt,this.lineCap=st,this.lineWidth=Ct,this.lineJoin=Ft;var Pt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qt=Ut===1?this.posY+this.margin[0]:this.margin[0],Lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],hr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wr=Ut===1?0:Lt+(Ut-2)*hr;if(this.ctx.clip_path.length!==0){var Lr=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(ye,this.posX+this.margin[3],-wr+Qt+this.ctx.prevPageLastElemOffset),De.call(this,ee,!0),this.path=Lr}if(Re=JSON.parse(JSON.stringify(zt)),this.path=ne(Re,this.posX+this.margin[3],-wr+Qt+this.ctx.prevPageLastElemOffset),pe===!1||Ut===0){var qr=(Ut>bt||Ut<ze)&&j.call(this);qr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pt,hr,null).clip().discardPath()),De.call(this,ee,pe),qr&&this.pdf.restoreGraphicsState()}this.lineWidth=ot}else this.lineWidth=Ct,De.call(this,ee,pe),this.lineWidth=ot;this.path=zt},De=function(ee,pe){if((ee!=="stroke"||pe||!q.call(this))&&(ee==="stroke"||pe||!I.call(this))){for(var ye,Re,Ge=[],tt=this.path,st=0;st<tt.length;st++){var ot=tt[st];switch(ot.type){case"begin":Ge.push({begin:!0});break;case"close":Ge.push({close:!0});break;case"mt":Ge.push({start:ot,deltas:[],abs:[]});break;case"lt":var Ct=Ge.length;if(tt[st-1]&&!isNaN(tt[st-1].x)&&(ye=[ot.x-tt[st-1].x,ot.y-tt[st-1].y],Ct>0)){for(;Ct>=0;Ct--)if(Ge[Ct-1].close!==!0&&Ge[Ct-1].begin!==!0){Ge[Ct-1].deltas.push(ye),Ge[Ct-1].abs.push(ot);break}}break;case"bct":ye=[ot.x1-tt[st-1].x,ot.y1-tt[st-1].y,ot.x2-tt[st-1].x,ot.y2-tt[st-1].y,ot.x-tt[st-1].x,ot.y-tt[st-1].y],Ge[Ge.length-1].deltas.push(ye);break;case"qct":var Ft=tt[st-1].x+2/3*(ot.x1-tt[st-1].x),zt=tt[st-1].y+2/3*(ot.y1-tt[st-1].y),Vt=ot.x+2/3*(ot.x1-ot.x),Jt=ot.y+2/3*(ot.y1-ot.y),ft=ot.x,Ue=ot.y;ye=[Ft-tt[st-1].x,zt-tt[st-1].y,Vt-tt[st-1].x,Jt-tt[st-1].y,ft-tt[st-1].x,Ue-tt[st-1].y],Ge[Ge.length-1].deltas.push(ye);break;case"arc":Ge.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ge[Ge.length-1].abs)&&Ge[Ge.length-1].abs.push(ot)}}Re=pe?null:ee==="stroke"?"stroke":"fill";for(var fr=!1,Zt=0;Zt<Ge.length;Zt++)if(Ge[Zt].arc)for(var bt=Ge[Zt].abs,ze=0;ze<bt.length;ze++){var Ut=bt[ze];Ut.type==="arc"?ge.call(this,Ut.x,Ut.y,Ut.radius,Ut.startAngle,Ut.endAngle,Ut.counterclockwise,void 0,pe,!fr):xe.call(this,Ut.x,Ut.y),fr=!0}else if(Ge[Zt].close===!0)this.pdf.internal.out("h"),fr=!1;else if(Ge[Zt].begin!==!0){var Pt=Ge[Zt].start.x,Qt=Ge[Zt].start.y;_e.call(this,Ge[Zt].deltas,Pt,Qt),fr=!0}Re&&Ze.call(this,Re),pe&&$e.call(this)}},Ne=function(ee){var pe=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ye=pe*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ee-ye;case"top":return ee+pe-ye;case"hanging":return ee+pe-2*ye;case"middle":return ee+pe/2-ye;case"ideographic":return ee;case"alphabetic":default:return ee}},Qe=function(ee){return ee+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};T.prototype.createLinearGradient=function(){var ee=function(){};return ee.colorStops=[],ee.addColorStop=function(pe,ye){this.colorStops.push([pe,ye])},ee.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ee.isCanvasGradient=!0,ee},T.prototype.createPattern=function(){return this.createLinearGradient()},T.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ge=function(ee,pe,ye,Re,Ge,tt,st,ot,Ct){for(var Ft=Je.call(this,ye,Re,Ge,tt),zt=0;zt<Ft.length;zt++){var Vt=Ft[zt];zt===0&&(Ct?ce.call(this,Vt.x1+ee,Vt.y1+pe):xe.call(this,Vt.x1+ee,Vt.y1+pe)),et.call(this,ee,pe,Vt.x2,Vt.y2,Vt.x3,Vt.y3,Vt.x4,Vt.y4)}ot?$e.call(this):Ze.call(this,st)},Ze=function(ee){switch(ee){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},$e=function(){this.pdf.clip(),this.pdf.discardPath()},ce=function(ee,pe){this.pdf.internal.out(t(ee)+" "+s(pe)+" m")},Ae=function(ee){var pe;switch(ee.align){case"right":case"end":pe="right";break;case"center":pe="center";break;case"left":case"start":default:pe="left"}var ye=this.pdf.getTextDimensions(ee.text),Re=Ne.call(this,ee.y),Ge=Qe.call(this,Re)-ye.h,tt=this.ctx.transform.applyToPoint(new p(ee.x,Re)),st=this.ctx.transform.decompose(),ot=new m;ot=(ot=(ot=ot.multiply(st.translate)).multiply(st.skew)).multiply(st.scale);for(var Ct,Ft,zt,Vt=this.ctx.transform.applyToRectangle(new a(ee.x,Re,ye.w,ye.h)),Jt=ot.applyToRectangle(new a(ee.x,Ge,ye.w,ye.h)),ft=Y.call(this,Jt),Ue=[],fr=0;fr<ft.length;fr+=1)Ue.indexOf(ft[fr])===-1&&Ue.push(ft[fr]);if(he(Ue),this.autoPaging)for(var Zt=Ue[0],bt=Ue[Ue.length-1],ze=Zt;ze<bt+1;ze++){this.pdf.setPage(ze);var Ut=ze===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[2],Lt=Qt-this.margin[0],hr=this.pdf.internal.pageSize.width-this.margin[1],wr=hr-this.margin[3],Lr=ze===1?0:Pt+(ze-2)*Lt;if(this.ctx.clip_path.length!==0){var qr=this.path;Ct=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(Ct,this.posX+this.margin[3],-1*Lr+Ut),De.call(this,"fill",!0),this.path=qr}var gr=ne([JSON.parse(JSON.stringify(Jt))],this.posX+this.margin[3],-Lr+Ut+this.ctx.prevPageLastElemOffset)[0];ee.scale>=.01&&(Ft=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ft*ee.scale),zt=this.lineWidth,this.lineWidth=zt*ee.scale);var br=this.autoPaging!=="text";if(br||gr.y+gr.h<=Qt){if(br||gr.y>=Ut&&gr.x<=hr){var Rt=br?ee.text:this.pdf.splitTextToSize(ee.text,ee.maxWidth||hr-gr.x)[0],vt=ne([JSON.parse(JSON.stringify(Vt))],this.posX+this.margin[3],-Lr+Ut+this.ctx.prevPageLastElemOffset)[0],Cr=br&&(ze>Zt||ze<bt)&&j.call(this);Cr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wr,Lt,null).clip().discardPath()),this.pdf.text(Rt,vt.x,vt.y,{angle:ee.angle,align:pe,renderingMode:ee.renderingMode}),Cr&&this.pdf.restoreGraphicsState()}}else gr.y<Qt&&(this.ctx.prevPageLastElemOffset+=Qt-gr.y);ee.scale>=.01&&(this.pdf.setFontSize(Ft),this.lineWidth=zt)}else ee.scale>=.01&&(Ft=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ft*ee.scale),zt=this.lineWidth,this.lineWidth=zt*ee.scale),this.pdf.text(ee.text,tt.x+this.posX,tt.y+this.posY,{angle:ee.angle,align:pe,renderingMode:ee.renderingMode,maxWidth:ee.maxWidth}),ee.scale>=.01&&(this.pdf.setFontSize(Ft),this.lineWidth=zt)},xe=function(ee,pe,ye,Re){ye=ye||0,Re=Re||0,this.pdf.internal.out(t(ee+ye)+" "+s(pe+Re)+" l")},_e=function(ee,pe,ye){return this.pdf.lines(ee,pe,ye,null,null)},et=function(ee,pe,ye,Re,Ge,tt,st,ot){this.pdf.internal.out([e(l(ye+ee)),e(u(Re+pe)),e(l(Ge+ee)),e(u(tt+pe)),e(l(st+ee)),e(u(ot+pe)),"c"].join(" "))},Je=function(ee,pe,ye,Re){for(var Ge=2*Math.PI,tt=Math.PI/2;pe>ye;)pe-=Ge;var st=Math.abs(ye-pe);st<Ge&&Re&&(st=Ge-st);for(var ot=[],Ct=Re?-1:1,Ft=pe;st>1e-5;){var zt=Ft+Ct*Math.min(st,tt);ot.push(rt.call(this,ee,Ft,zt)),st-=Math.abs(zt-Ft),Ft=zt}return ot},rt=function(ee,pe,ye){var Re=(ye-pe)/2,Ge=ee*Math.cos(Re),tt=ee*Math.sin(Re),st=Ge,ot=-tt,Ct=st*st+ot*ot,Ft=Ct+st*Ge+ot*tt,zt=4/3*(Math.sqrt(2*Ct*Ft)-Ft)/(st*tt-ot*Ge),Vt=st-zt*ot,Jt=ot+zt*st,ft=Vt,Ue=-Jt,fr=Re+pe,Zt=Math.cos(fr),bt=Math.sin(fr);return{x1:ee*Math.cos(pe),y1:ee*Math.sin(pe),x2:Vt*Zt-Jt*bt,y2:Vt*bt+Jt*Zt,x3:ft*Zt-Ue*bt,y3:ft*bt+Ue*Zt,x4:ee*Math.cos(ye),y4:ee*Math.sin(ye)}},Ye=function(ee){return 180*ee/Math.PI},it=function(ee,pe,ye,Re,Ge,tt){var st=ee+.5*(ye-ee),ot=pe+.5*(Re-pe),Ct=Ge+.5*(ye-Ge),Ft=tt+.5*(Re-tt),zt=Math.min(ee,Ge,st,Ct),Vt=Math.max(ee,Ge,st,Ct),Jt=Math.min(pe,tt,ot,Ft),ft=Math.max(pe,tt,ot,Ft);return new a(zt,Jt,Vt-zt,ft-Jt)},nt=function(ee,pe,ye,Re,Ge,tt,st,ot){var Ct,Ft,zt,Vt,Jt,ft,Ue,fr,Zt,bt,ze,Ut,Pt,Qt,Lt=ye-ee,hr=Re-pe,wr=Ge-ye,Lr=tt-Re,qr=st-Ge,gr=ot-tt;for(Ft=0;Ft<41;Ft++)Zt=(Ue=(zt=ee+(Ct=Ft/40)*Lt)+Ct*((Jt=ye+Ct*wr)-zt))+Ct*(Jt+Ct*(Ge+Ct*qr-Jt)-Ue),bt=(fr=(Vt=pe+Ct*hr)+Ct*((ft=Re+Ct*Lr)-Vt))+Ct*(ft+Ct*(tt+Ct*gr-ft)-fr),Ft==0?(ze=Zt,Ut=bt,Pt=Zt,Qt=bt):(ze=Math.min(ze,Zt),Ut=Math.min(Ut,bt),Pt=Math.max(Pt,Zt),Qt=Math.max(Qt,bt));return new a(Math.round(ze),Math.round(Ut),Math.round(Pt-ze),Math.round(Qt-Ut))},Bt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ee,pe,ye=(ee=this.ctx.lineDash,pe=this.ctx.lineDashOffset,JSON.stringify({lineDash:ee,lineDashOffset:pe}));this.prevLineDash!==ye&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ye)}}})(Qr.API),function(n){var e=function(u){var p,a,m,w,S,T,Q,I,q,j;for(a=[],m=0,w=(u+=p="\0\0\0\0".slice(u.length%4||4)).length;w>m;m+=4)(S=(u.charCodeAt(m)<<24)+(u.charCodeAt(m+1)<<16)+(u.charCodeAt(m+2)<<8)+u.charCodeAt(m+3))!==0?(T=(S=((S=((S=((S=(S-(j=S%85))/85)-(q=S%85))/85)-(I=S%85))/85)-(Q=S%85))/85)%85,a.push(T+33,Q+33,I+33,q+33,j+33)):a.push(122);return function(Y,K){for(var ne=K;ne>0;ne--)Y.pop()}(a,p.length),String.fromCharCode.apply(String,a)+"~>"},t=function(u){var p,a,m,w,S,T=String,Q="length",I=255,q="charCodeAt",j="slice",Y="replace";for(u[j](-2),u=u[j](0,-2)[Y](/\s/g,"")[Y]("z","!!!!!"),m=[],w=0,S=(u+=p="uuuuu"[j](u[Q]%5||5))[Q];S>w;w+=5)a=52200625*(u[q](w)-33)+614125*(u[q](w+1)-33)+7225*(u[q](w+2)-33)+85*(u[q](w+3)-33)+(u[q](w+4)-33),m.push(I&a>>24,I&a>>16,I&a>>8,I&a);return function(K,ne){for(var he=ne;he>0;he--)K.pop()}(m,p[Q]),T.fromCharCode.apply(T,m)},s=function(u){var p=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),p.test(u)===!1)return"";for(var a="",m=0;m<u.length;m+=2)a+=String.fromCharCode("0x"+(u[m]+u[m+1]));return a},l=function(u){for(var p=new Uint8Array(u.length),a=u.length;a--;)p[a]=u.charCodeAt(a);return u=(p=Bg(p)).reduce(function(m,w){return m+String.fromCharCode(w)},"")};n.processDataByFilters=function(u,p){var a=0,m=u||"",w=[];for(typeof(p=p||[])=="string"&&(p=[p]),a=0;a<p.length;a+=1)switch(p[a]){case"ASCII85Decode":case"/ASCII85Decode":m=t(m),w.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=e(m),w.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=s(m),w.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=m.split("").map(function(S){return("0"+S.charCodeAt().toString(16)).slice(-2)}).join("")+">",w.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=l(m),w.push("/FlateDecode");break;default:throw new Error('The filter: "'+p[a]+'" is not implemented')}return{data:m,reverseChain:w.reverse().join(" ")}}}(Qr.API),function(n){n.loadFile=function(e,t,s){return function(l,u,p){u=u!==!1,p=typeof p=="function"?p:function(){};var a=void 0;try{a=function(m,w,S){var T=new XMLHttpRequest,Q=0,I=function(q){var j=q.length,Y=[],K=String.fromCharCode;for(Q=0;Q<j;Q+=1)Y.push(K(255&q.charCodeAt(Q)));return Y.join("")};if(T.open("GET",m,!w),T.overrideMimeType("text/plain; charset=x-user-defined"),w===!1&&(T.onload=function(){T.status===200?S(I(this.responseText)):S(void 0)}),T.send(null),w&&T.status===200)return I(T.responseText)}(l,u,p)}catch{}return a}(e,t,s)},n.loadImageFile=n.loadFile}(Qr.API),function(n){function e(){return(Pr.html2canvas?Promise.resolve(Pr.html2canvas):Promise.resolve().then(()=>oT)).catch(function(p){return Promise.reject(new Error("Could not load html2canvas: "+p))}).then(function(p){return p.default?p.default:p})}function t(){return(Pr.DOMPurify?Promise.resolve(Pr.DOMPurify):Promise.resolve().then(()=>DT)).catch(function(p){return Promise.reject(new Error("Could not load dompurify: "+p))}).then(function(p){return p.default?p.default:p})}var s=function(p){var a=fi(p);return a==="undefined"?"undefined":a==="string"||p instanceof String?"string":a==="number"||p instanceof Number?"number":a==="function"||p instanceof Function?"function":p&&p.constructor===Array?"array":p&&p.nodeType===1?"element":a==="object"?"object":"unknown"},l=function(p,a){var m=document.createElement(p);for(var w in a.className&&(m.className=a.className),a.innerHTML&&a.dompurify&&(m.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)m.style[w]=a.style[w];return m},u=function p(a){var m=Object.assign(p.convert(Promise.resolve()),JSON.parse(JSON.stringify(p.template))),w=p.convert(Promise.resolve(),m);return w=(w=w.setProgress(1,p,1,[p])).set(a)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(p,a){return p.__proto__=a||u.prototype,p},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(p,a){return this.then(function(){switch(a=a||function(m){switch(s(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(p)){case"string":return this.then(t).then(function(m){return this.set({src:l("div",{innerHTML:p,dompurify:m})})});case"element":return this.set({src:p});case"canvas":return this.set({canvas:p});case"img":return this.set({img:p});default:return this.error("Unknown source type.")}})},u.prototype.to=function(p){switch(p){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var p={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function m(w,S){for(var T=w.nodeType===3?document.createTextNode(w.nodeValue):w.cloneNode(!1),Q=w.firstChild;Q;Q=Q.nextSibling)S!==!0&&Q.nodeType===1&&Q.nodeName==="SCRIPT"||T.appendChild(m(Q,S));return w.nodeType===1&&(w.nodeName==="CANVAS"?(T.width=w.width,T.height=w.height,T.getContext("2d").drawImage(w,0,0)):w.nodeName!=="TEXTAREA"&&w.nodeName!=="SELECT"||(T.value=w.value),T.addEventListener("load",function(){T.scrollTop=w.scrollTop,T.scrollLeft=w.scrollLeft},!0)),T}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(p.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=l("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=l("div",{className:"html2pdf__container",style:p}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(l("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(e).then(function(a){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,a(this.prop.container,m)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(e).then(function(a){var m=this.opt.jsPDF,w=this.opt.fontFaces,S=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,T=Object.assign({async:!0,allowTaint:!0,scale:S,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete T.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=w,w)for(var Q=0;Q<w.length;++Q){var I=w[Q],q=I.src.find(function(j){return j.format==="truetype"});q&&m.addFont(q.url,I.ref.name,I.ref.style)}return T.windowHeight=T.windowHeight||0,T.windowHeight=T.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):T.windowHeight,m.context2d.save(!0),a(this.prop.container,T)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var p=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=p})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(p,a,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(p,a):this.outputPdf(p,a)},u.prototype.outputPdf=function(p,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(p,a)})},u.prototype.outputImg=function(p){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(p){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+p+'" is not supported.'}})},u.prototype.save=function(p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(p?{filename:p}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(p){if(s(p)!=="object")return this;var a=Object.keys(p||{}).map(function(m){if(m in u.template.prop)return function(){this.prop[m]=p[m]};switch(m){case"margin":return this.setMargin.bind(this,p.margin);case"jsPDF":return function(){return this.opt.jsPDF=p.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,p.pageSize);default:return function(){this.opt[m]=p[m]}}},this);return this.then(function(){return this.thenList(a)})},u.prototype.get=function(p,a){return this.then(function(){var m=p in u.template.prop?this.prop[p]:this.opt[p];return a?a(m):m})},u.prototype.setMargin=function(p){return this.then(function(){switch(s(p)){case"number":p=[p,p,p,p];case"array":if(p.length===2&&(p=[p[0],p[1],p[0],p[1]]),p.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=p}).then(this.setPageSize)},u.prototype.setPageSize=function(p){function a(m,w){return Math.floor(m*w/72*96)}return this.then(function(){(p=p||Qr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(p.inner={width:p.width-this.opt.margin[1]-this.opt.margin[3],height:p.height-this.opt.margin[0]-this.opt.margin[2]},p.inner.px={width:a(p.inner.width,p.k),height:a(p.inner.height,p.k)},p.inner.ratio=p.inner.height/p.inner.width),this.prop.pageSize=p})},u.prototype.setProgress=function(p,a,m,w){return p!=null&&(this.progress.val=p),a!=null&&(this.progress.state=a),m!=null&&(this.progress.n=m),w!=null&&(this.progress.stack=w),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(p,a,m,w){return this.setProgress(p?this.progress.val+p:null,a||null,m?this.progress.n+m:null,w?this.progress.stack.concat(w):null)},u.prototype.then=function(p,a){var m=this;return this.thenCore(p,a,function(w,S){return m.updateProgress(null,null,1,[w]),Promise.prototype.then.call(this,function(T){return m.updateProgress(null,w),T}).then(w,S).then(function(T){return m.updateProgress(1),T})})},u.prototype.thenCore=function(p,a,m){m=m||Promise.prototype.then,p&&(p=p.bind(this)),a&&(a=a.bind(this));var w=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:u.convert(Object.assign({},this),Promise.prototype),S=m.call(w,p,a);return u.convert(S,this.__proto__)},u.prototype.thenExternal=function(p,a){return Promise.prototype.then.call(this,p,a)},u.prototype.thenList=function(p){var a=this;return p.forEach(function(m){a=a.thenCore(m)}),a},u.prototype.catch=function(p){p&&(p=p.bind(this));var a=Promise.prototype.catch.call(this,p);return u.convert(a,this)},u.prototype.catchExternal=function(p){return Promise.prototype.catch.call(this,p)},u.prototype.error=function(p){return this.then(function(){throw new Error(p)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Qr.getPageSize=function(p,a,m){if(fi(p)==="object"){var w=p;p=w.orientation,a=w.unit||a,m=w.format||m}a=a||"mm",m=m||"a4",p=(""+(p||"P")).toLowerCase();var S,T=(""+m).toLowerCase(),Q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":S=1;break;case"mm":S=72/25.4;break;case"cm":S=72/2.54;break;case"in":S=72;break;case"px":S=.75;break;case"pc":case"em":S=12;break;case"ex":S=6;break;default:throw"Invalid unit: "+a}var I,q=0,j=0;if(Q.hasOwnProperty(T))q=Q[T][1]/S,j=Q[T][0]/S;else try{q=m[1],j=m[0]}catch{throw new Error("Invalid format: "+m)}if(p==="p"||p==="portrait")p="p",j>q&&(I=j,j=q,q=I);else{if(p!=="l"&&p!=="landscape")throw"Invalid orientation: "+p;p="l",q>j&&(I=j,j=q,q=I)}return{width:j,height:q,unit:a,k:S,orientation:p}},n.html=function(p,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Mg):null;var m=new u(a);return a.worker?m:m.from(p).doCallback()}}(Qr.API),Qr.API.addJS=function(n){return Fv=n,this.internal.events.subscribe("postPutResources",function(){qp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(qp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Sv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Fv+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){qp!==void 0&&Sv!==void 0&&this.internal.out("/Names <</JavaScript "+qp+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var l=t.outline.render().split(/\r\n/),u=0;u<l.length;u++){var p=l[u],a=s.exec(p);if(a!=null){var m=a[1];t.internal.newObjectDeferredBegin(m,!1)}t.internal.write(p)}if(this.outline.createNamedDestinations){var w=this.internal.pages.length,S=[];for(u=0;u<w;u++){var T=t.internal.newObject();S.push(T);var Q=t.internal.getPageInfo(u+1);t.internal.write("<< /D["+Q.objId+" 0 R /XYZ null null null]>> endobj")}var I=t.internal.newObject();for(t.internal.write("<< /Names [ "),u=0;u<S.length;u++)t.internal.write("(page_"+(u+1)+")"+S[u]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+I+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,l,u){var p={title:l,options:u,children:[]};return s==null&&(s=this.root),s.children.push(p),p},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var l=0;l<s.children.length;l++)this.genIds_r(s.children[l])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var l=this.ctx.pdf.internal.getVerticalCoordinateString,u=0;u<s.children.length;u++){var p=s.children[u];this.objStart(p),this.line("/Title "+this.makeString(p.title)),this.line("/Parent "+this.makeRef(s)),u>0&&this.line("/Prev "+this.makeRef(s.children[u-1])),u<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[u+1])),p.children.length>0&&(this.line("/First "+this.makeRef(p.children[0])),this.line("/Last "+this.makeRef(p.children[p.children.length-1])));var a=this.count=this.count_r({count:0},p);if(a>0&&this.line("/Count "+a),p.options&&p.options.pageNumber){var m=t.internal.getPageInfo(p.options.pageNumber);this.line("/Dest ["+m.objId+" 0 R /XYZ 0 "+l(0)+" 0]")}this.objEnd()}for(var w=0;w<s.children.length;w++)this.renderItems(s.children[w])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,l){for(var u=0;u<l.children.length;u++)s.count++,this.count_r(s,l.children[u]);return s.count}}])}(Qr.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,s,l,u,p,a){var m,w=this.decode.DCT_DECODE,S=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=p||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(m=function(T){for(var Q,I=256*T.charCodeAt(4)+T.charCodeAt(5),q=T.length,j={width:0,height:0,numcomponents:1},Y=4;Y<q;Y+=2){if(Y+=I,e.indexOf(T.charCodeAt(Y+1))!==-1){Q=256*T.charCodeAt(Y+5)+T.charCodeAt(Y+6),j={width:256*T.charCodeAt(Y+7)+T.charCodeAt(Y+8),height:Q,numcomponents:T.charCodeAt(Y+9)};break}I=256*T.charCodeAt(Y+2)+T.charCodeAt(Y+3)}return j}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}S={data:t,width:m.width,height:m.height,colorSpace:a,bitsPerComponent:8,filter:w,index:s,alias:l}}return S}}(Qr.API);var pu,Kp,Iv,Lv,Tv,q4=function(){var n,e,t;function s(u){var p,a,m,w,S,T,Q,I,q,j,Y,K,ne,he;for(this.data=u,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},T=null;;){switch(p=this.readUInt32(),q=(function(){var Ee,De;for(De=[],Ee=0;Ee<4;++Ee)De.push(String.fromCharCode(this.data[this.pos++]));return De}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(p);break;case"fcTL":T&&this.animation.frames.push(T),this.pos+=4,T={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},S=this.readUInt16(),w=this.readUInt16()||100,T.delay=1e3*S/w,T.disposeOp=this.data[this.pos++],T.blendOp=this.data[this.pos++],T.data=[];break;case"IDAT":case"fdAT":for(q==="fdAT"&&(this.pos+=4,p-=4),u=(T!=null?T.data:void 0)||this.imgData,K=0;0<=p?K<p:K>p;0<=p?++K:--K)u.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(m=this.palette.length/3,this.transparency.indexed=this.read(p),this.transparency.indexed.length>m)throw new Error("More transparent colors than palette size");if((j=m-this.transparency.indexed.length)>0)for(ne=0;0<=j?ne<j:ne>j;0<=j?++ne:--ne)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(p)[0];break;case 2:this.transparency.rgb=this.read(p)}break;case"tEXt":Q=(Y=this.read(p)).indexOf(0),I=String.fromCharCode.apply(String,Y.slice(0,Q)),this.text[I]=String.fromCharCode.apply(String,Y.slice(Q+1));break;case"IEND":return T&&this.animation.frames.push(T),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(he=this.colorType)===4||he===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=p}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(u){var p,a;for(a=[],p=0;0<=u?p<u:p>u;0<=u?++p:--p)a.push(this.data[this.pos++]);return a},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(u){var p=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*p),m=0,w=this;if(u==null&&(u=this.imgData),u.length===0)return new Uint8Array(0);function S(T,Q,I,q){var j,Y,K,ne,he,Ee,De,Ne,Qe,ge,Ze,$e,ce,Ae,xe,_e,et,Je,rt,Ye,it,nt=Math.ceil((w.width-T)/I),Bt=Math.ceil((w.height-Q)/q),ee=w.width==nt&&w.height==Bt;for(Ae=p*nt,$e=ee?a:new Uint8Array(Ae*Bt),Ee=u.length,ce=0,Y=0;ce<Bt&&m<Ee;){switch(u[m++]){case 0:for(ne=et=0;et<Ae;ne=et+=1)$e[Y++]=u[m++];break;case 1:for(ne=Je=0;Je<Ae;ne=Je+=1)j=u[m++],he=ne<p?0:$e[Y-p],$e[Y++]=(j+he)%256;break;case 2:for(ne=rt=0;rt<Ae;ne=rt+=1)j=u[m++],K=(ne-ne%p)/p,xe=ce&&$e[(ce-1)*Ae+K*p+ne%p],$e[Y++]=(xe+j)%256;break;case 3:for(ne=Ye=0;Ye<Ae;ne=Ye+=1)j=u[m++],K=(ne-ne%p)/p,he=ne<p?0:$e[Y-p],xe=ce&&$e[(ce-1)*Ae+K*p+ne%p],$e[Y++]=(j+Math.floor((he+xe)/2))%256;break;case 4:for(ne=it=0;it<Ae;ne=it+=1)j=u[m++],K=(ne-ne%p)/p,he=ne<p?0:$e[Y-p],ce===0?xe=_e=0:(xe=$e[(ce-1)*Ae+K*p+ne%p],_e=K&&$e[(ce-1)*Ae+(K-1)*p+ne%p]),De=he+xe-_e,Ne=Math.abs(De-he),ge=Math.abs(De-xe),Ze=Math.abs(De-_e),Qe=Ne<=ge&&Ne<=Ze?he:ge<=Ze?xe:_e,$e[Y++]=(j+Qe)%256;break;default:throw new Error("Invalid filter algorithm: "+u[m-1])}if(!ee){var pe=((Q+ce*q)*w.width+T)*p,ye=ce*Ae;for(ne=0;ne<nt;ne+=1){for(var Re=0;Re<p;Re+=1)a[pe++]=$e[ye++];pe+=(I-1)*p}}ce++}}return u=S4(u),w.interlaceMethod==1?(S(0,0,8,8),S(4,0,8,8),S(0,4,4,8),S(2,0,4,4),S(0,2,2,4),S(1,0,2,2),S(0,1,1,2)):S(0,0,1,1),a},s.prototype.decodePalette=function(){var u,p,a,m,w,S,T,Q,I;for(a=this.palette,S=this.transparency.indexed||[],w=new Uint8Array((S.length||0)+a.length),m=0,u=0,p=T=0,Q=a.length;T<Q;p=T+=3)w[m++]=a[p],w[m++]=a[p+1],w[m++]=a[p+2],w[m++]=(I=S[u++])!=null?I:255;return w},s.prototype.copyToImageData=function(u,p){var a,m,w,S,T,Q,I,q,j,Y,K;if(m=this.colors,j=null,a=this.hasAlphaChannel,this.palette.length&&(j=(K=this._decodedPalette)!=null?K:this._decodedPalette=this.decodePalette(),m=4,a=!0),q=(w=u.data||u).length,T=j||p,S=Q=0,m===1)for(;S<q;)I=j?4*p[S/4]:Q,Y=T[I++],w[S++]=Y,w[S++]=Y,w[S++]=Y,w[S++]=a?T[I++]:255,Q=I;else for(;S<q;)I=j?4*p[S/4]:Q,w[S++]=T[I++],w[S++]=T[I++],w[S++]=T[I++],w[S++]=a?T[I++]:255,Q=I},s.prototype.decode=function(){var u;return u=new Uint8Array(this.width*this.height*4),this.copyToImageData(u,this.decodePixels()),u};var l=function(){if(Object.prototype.toString.call(Pr)==="[object Window]"){try{e=Pr.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return l(),n=function(u){var p;if(l()===!0)return t.width=u.width,t.height=u.height,t.clearRect(0,0,u.width,u.height),t.putImageData(u,0,0),(p=new Image).src=e.toDataURL(),p;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(u){var p,a,m,w,S,T,Q,I;if(this.animation){for(I=[],a=S=0,T=(Q=this.animation.frames).length;S<T;a=++S)p=Q[a],m=u.createImageData(p.width,p.height),w=this.decodePixels(new Uint8Array(p.data)),this.copyToImageData(m,w),p.imageData=m,I.push(p.image=n(m));return I}},s.prototype.renderFrame=function(u,p){var a,m,w;return a=(m=this.animation.frames)[p],w=m[p-1],p===0&&u.clearRect(0,0,this.width,this.height),(w!=null?w.disposeOp:void 0)===1?u.clearRect(w.xOffset,w.yOffset,w.width,w.height):(w!=null?w.disposeOp:void 0)===2&&u.putImageData(w.imageData,w.xOffset,w.yOffset),a.blendOp===0&&u.clearRect(a.xOffset,a.yOffset,a.width,a.height),u.drawImage(a.image,a.xOffset,a.yOffset)},s.prototype.animate=function(u){var p,a,m,w,S,T,Q=this;return a=0,T=this.animation,w=T.numFrames,m=T.frames,S=T.numPlays,(p=function(){var I,q;if(I=a++%w,q=m[I],Q.renderFrame(u,I),w>1&&a/w<S)return Q.animation._timeout=setTimeout(p,q.delay)})()},s.prototype.stopAnimation=function(){var u;return clearTimeout((u=this.animation)!=null?u._timeout:void 0)},s.prototype.render=function(u){var p,a;return u._png&&u._png.stopAnimation(),u._png=this,u.width=this.width,u.height=this.height,p=u.getContext("2d"),this.animation?(this.decodeFrames(p),this.animate(p)):(a=p.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),p.putImageData(a,0,0))},s}();/**
* @license
*
* Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
*
* Permission is hereby granted, free of charge, to any person obtaining
* a copy of this software and associated documentation files (the
* "Software"), to deal in the Software without restriction, including
* without limitation the rights to use, copy, modify, merge, publish,
* distribute, sublicense, and/or sell copies of the Software, and to
* permit persons to whom the Software is furnished to do so, subject to
* the following conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
* MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
* LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
* OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
* WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
* ====================================================================
*//**
* @license
* (c) Dean McNamee <dean@gmail.com>, 2013.
*
* https://github.com/deanm/omggif
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to
* deal in the Software without restriction, including without limitation the
* rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
* sell copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
* IN THE SOFTWARE.
*
* omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
* including animation and compression.  It does not rely on any specific
* underlying system, so should run in the browser, Node, or Plask.
*/function K4(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,s=n[e++]|n[e++]<<8,l=n[e++],u=l>>7,p=1<<(7&l)+1;n[e++],n[e++];var a=null,m=null;u&&(a=e,m=p,e+=3*p);var w=!0,S=[],T=0,Q=null,I=0,q=null;for(this.width=t,this.height=s;w&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,q=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((ce=n[e++])>=0))throw Error("Invalid block size");if(ce===0)break;e+=ce}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var j=n[e++];T=n[e++]|n[e++]<<8,Q=n[e++],!(1&j)&&(Q=null),I=j>>2&7,e++;break;case 254:for(;;){if(!((ce=n[e++])>=0))throw Error("Invalid block size");if(ce===0)break;e+=ce}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var Y=n[e++]|n[e++]<<8,K=n[e++]|n[e++]<<8,ne=n[e++]|n[e++]<<8,he=n[e++]|n[e++]<<8,Ee=n[e++],De=Ee>>6&1,Ne=1<<(7&Ee)+1,Qe=a,ge=m,Ze=!1;Ee>>7&&(Ze=!0,Qe=e,ge=Ne,e+=3*Ne);var $e=e;for(e++;;){var ce;if(!((ce=n[e++])>=0))throw Error("Invalid block size");if(ce===0)break;e+=ce}S.push({x:Y,y:K,width:ne,height:he,has_local_palette:Ze,palette_offset:Qe,palette_size:ge,data_offset:$e,data_length:e-$e,transparent_index:Q,interlaced:!!De,delay:T,disposal:I});break;case 59:w=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return S.length},this.loopCount=function(){return q},this.frameInfo=function(Ae){if(Ae<0||Ae>=S.length)throw new Error("Frame index out of range.");return S[Ae]},this.decodeAndBlitFrameBGRA=function(Ae,xe){var _e=this.frameInfo(Ae),et=_e.width*_e.height,Je=new Uint8Array(et);Uv(n,_e.data_offset,Je,et);var rt=_e.palette_offset,Ye=_e.transparent_index;Ye===null&&(Ye=256);var it=_e.width,nt=t-it,Bt=it,ee=4*(_e.y*t+_e.x),pe=4*((_e.y+_e.height)*t+_e.x),ye=ee,Re=4*nt;_e.interlaced===!0&&(Re+=4*t*7);for(var Ge=8,tt=0,st=Je.length;tt<st;++tt){var ot=Je[tt];if(Bt===0&&(Bt=it,(ye+=Re)>=pe&&(Re=4*nt+4*t*(Ge-1),ye=ee+(it+nt)*(Ge<<1),Ge>>=1)),ot===Ye)ye+=4;else{var Ct=n[rt+3*ot],Ft=n[rt+3*ot+1],zt=n[rt+3*ot+2];xe[ye++]=zt,xe[ye++]=Ft,xe[ye++]=Ct,xe[ye++]=255}--Bt}},this.decodeAndBlitFrameRGBA=function(Ae,xe){var _e=this.frameInfo(Ae),et=_e.width*_e.height,Je=new Uint8Array(et);Uv(n,_e.data_offset,Je,et);var rt=_e.palette_offset,Ye=_e.transparent_index;Ye===null&&(Ye=256);var it=_e.width,nt=t-it,Bt=it,ee=4*(_e.y*t+_e.x),pe=4*((_e.y+_e.height)*t+_e.x),ye=ee,Re=4*nt;_e.interlaced===!0&&(Re+=4*t*7);for(var Ge=8,tt=0,st=Je.length;tt<st;++tt){var ot=Je[tt];if(Bt===0&&(Bt=it,(ye+=Re)>=pe&&(Re=4*nt+4*t*(Ge-1),ye=ee+(it+nt)*(Ge<<1),Ge>>=1)),ot===Ye)ye+=4;else{var Ct=n[rt+3*ot],Ft=n[rt+3*ot+1],zt=n[rt+3*ot+2];xe[ye++]=Ct,xe[ye++]=Ft,xe[ye++]=zt,xe[ye++]=255}--Bt}}}function Uv(n,e,t,s){for(var l=n[e++],u=1<<l,p=u+1,a=p+1,m=l+1,w=(1<<m)-1,S=0,T=0,Q=0,I=n[e++],q=new Int32Array(4096),j=null;;){for(;S<16&&I!==0;)T|=n[e++]<<S,S+=8,I===1?I=n[e++]:--I;if(S<m)break;var Y=T&w;if(T>>=m,S-=m,Y!==u){if(Y===p)break;for(var K=Y<a?Y:j,ne=0,he=K;he>u;)he=q[he]>>8,++ne;var Ee=he;if(Q+ne+(K!==Y?1:0)>s)return void Mi.log("Warning, gif stream longer than expected.");t[Q++]=Ee;var De=Q+=ne;for(K!==Y&&(t[Q++]=Ee),he=K;ne--;)he=q[he],t[--De]=255&he,he>>=8;j!==null&&a<4096&&(q[a++]=j<<8|Ee,a>=w+1&&m<12&&(++m,w=w<<1|1)),j=Y}else a=p+1,w=(1<<(m=l+1))-1,j=null}return Q!==s&&Mi.log("Warning, gif stream shorter than expected."),t}/**
	 * @license
	  Copyright (c) 2008, Adobe Systems Incorporated
	  All rights reserved.

	  Redistribution and use in source and binary forms, with or without 
	  modification, are permitted provided that the following conditions are
	  met:

	  * Redistributions of source code must retain the above copyright notice, 
	    this list of conditions and the following disclaimer.
	  
	  * Redistributions in binary form must reproduce the above copyright
	    notice, this list of conditions and the following disclaimer in the 
	    documentation and/or other materials provided with the distribution.
	  
	  * Neither the name of Adobe Systems Incorporated nor the names of its 
	    contributors may be used to endorse or promote products derived from 
	    this software without specific prior written permission.

	  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
	  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
	  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
	  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
	  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
	  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
	  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
	  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
	  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
	  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
	  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/function kg(n){var e,t,s,l,u,p=Math.floor,a=new Array(64),m=new Array(64),w=new Array(64),S=new Array(64),T=new Array(65535),Q=new Array(65535),I=new Array(64),q=new Array(64),j=[],Y=0,K=7,ne=new Array(64),he=new Array(64),Ee=new Array(64),De=new Array(256),Ne=new Array(2048),Qe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ge=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ze=[0,1,2,3,4,5,6,7,8,9,10,11],$e=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ce=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Ae=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],xe=[0,1,2,3,4,5,6,7,8,9,10,11],_e=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],et=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Je(ee,pe){for(var ye=0,Re=0,Ge=new Array,tt=1;tt<=16;tt++){for(var st=1;st<=ee[tt];st++)Ge[pe[Re]]=[],Ge[pe[Re]][0]=ye,Ge[pe[Re]][1]=tt,Re++,ye++;ye*=2}return Ge}function rt(ee){for(var pe=ee[0],ye=ee[1]-1;ye>=0;)pe&1<<ye&&(Y|=1<<K),ye--,--K<0&&(Y==255?(Ye(255),Ye(0)):Ye(Y),K=7,Y=0)}function Ye(ee){j.push(ee)}function it(ee){Ye(ee>>8&255),Ye(255&ee)}function nt(ee,pe,ye,Re,Ge){for(var tt,st=Ge[0],ot=Ge[240],Ct=function(bt,ze){var Ut,Pt,Qt,Lt,hr,wr,Lr,qr,gr,br,Rt=0;for(gr=0;gr<8;++gr){Ut=bt[Rt],Pt=bt[Rt+1],Qt=bt[Rt+2],Lt=bt[Rt+3],hr=bt[Rt+4],wr=bt[Rt+5],Lr=bt[Rt+6];var vt=Ut+(qr=bt[Rt+7]),Cr=Ut-qr,Tr=Pt+Lr,Dr=Pt-Lr,Vr=Qt+wr,xt=Qt-wr,Kt=Lt+hr,rr=Lt-hr,Or=vt+Kt,bi=vt-Kt,Nt=Tr+Vr,$r=Tr-Vr;bt[Rt]=Or+Nt,bt[Rt+4]=Or-Nt;var ue=.707106781*($r+bi);bt[Rt+2]=bi+ue,bt[Rt+6]=bi-ue;var Z=.382683433*((Or=rr+xt)-($r=Dr+Cr)),ie=.5411961*Or+Z,le=1.306562965*$r+Z,ve=.707106781*(Nt=xt+Dr),be=Cr+ve,ke=Cr-ve;bt[Rt+5]=ke+ie,bt[Rt+3]=ke-ie,bt[Rt+1]=be+le,bt[Rt+7]=be-le,Rt+=8}for(Rt=0,gr=0;gr<8;++gr){Ut=bt[Rt],Pt=bt[Rt+8],Qt=bt[Rt+16],Lt=bt[Rt+24],hr=bt[Rt+32],wr=bt[Rt+40],Lr=bt[Rt+48];var Oe=Ut+(qr=bt[Rt+56]),Te=Ut-qr,Ve=Pt+Lr,lt=Pt-Lr,ht=Qt+wr,gt=Qt-wr,nr=Lt+hr,sr=Lt-hr,jt=Oe+nr,Yt=Oe-nr,ur=Ve+ht,Br=Ve-ht;bt[Rt]=jt+ur,bt[Rt+32]=jt-ur;var Rr=.707106781*(Br+Yt);bt[Rt+16]=Yt+Rr,bt[Rt+48]=Yt-Rr;var Sr=.382683433*((jt=sr+gt)-(Br=lt+Te)),Le=.5411961*jt+Sr,Mt=1.306562965*Br+Sr,yt=.707106781*(ur=gt+lt),vr=Te+yt,Nr=Te-yt;bt[Rt+40]=Nr+Le,bt[Rt+24]=Nr-Le,bt[Rt+8]=vr+Mt,bt[Rt+56]=vr-Mt,Rt++}for(gr=0;gr<64;++gr)br=bt[gr]*ze[gr],I[gr]=br>0?br+.5|0:br-.5|0;return I}(ee,pe),Ft=0;Ft<64;++Ft)q[Qe[Ft]]=Ct[Ft];var zt=q[0]-ye;ye=q[0],zt==0?rt(Re[0]):(rt(Re[Q[tt=32767+zt]]),rt(T[tt]));for(var Vt=63;Vt>0&&q[Vt]==0;)Vt--;if(Vt==0)return rt(st),ye;for(var Jt,ft=1;ft<=Vt;){for(var Ue=ft;q[ft]==0&&ft<=Vt;)++ft;var fr=ft-Ue;if(fr>=16){Jt=fr>>4;for(var Zt=1;Zt<=Jt;++Zt)rt(ot);fr&=15}tt=32767+q[ft],rt(Ge[(fr<<4)+Q[tt]]),rt(T[tt]),ft++}return Vt!=63&&rt(st),ye}function Bt(ee){ee=Math.min(Math.max(ee,1),100),u!=ee&&(function(pe){for(var ye=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Re=0;Re<64;Re++){var Ge=p((ye[Re]*pe+50)/100);Ge=Math.min(Math.max(Ge,1),255),a[Qe[Re]]=Ge}for(var tt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],st=0;st<64;st++){var ot=p((tt[st]*pe+50)/100);ot=Math.min(Math.max(ot,1),255),m[Qe[st]]=ot}for(var Ct=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ft=0,zt=0;zt<8;zt++)for(var Vt=0;Vt<8;Vt++)w[Ft]=1/(a[Qe[Ft]]*Ct[zt]*Ct[Vt]*8),S[Ft]=1/(m[Qe[Ft]]*Ct[zt]*Ct[Vt]*8),Ft++}(ee<50?Math.floor(5e3/ee):Math.floor(200-2*ee)),u=ee)}this.encode=function(ee,pe){pe&&Bt(pe),j=new Array,Y=0,K=7,it(65496),it(65504),it(16),Ye(74),Ye(70),Ye(73),Ye(70),Ye(0),Ye(1),Ye(1),Ye(0),it(1),it(1),Ye(0),Ye(0),function(){it(65499),it(132),Ye(0);for(var Pt=0;Pt<64;Pt++)Ye(a[Pt]);Ye(1);for(var Qt=0;Qt<64;Qt++)Ye(m[Qt])}(),function(Pt,Qt){it(65472),it(17),Ye(8),it(Qt),it(Pt),Ye(3),Ye(1),Ye(17),Ye(0),Ye(2),Ye(17),Ye(1),Ye(3),Ye(17),Ye(1)}(ee.width,ee.height),function(){it(65476),it(418),Ye(0);for(var Pt=0;Pt<16;Pt++)Ye(ge[Pt+1]);for(var Qt=0;Qt<=11;Qt++)Ye(Ze[Qt]);Ye(16);for(var Lt=0;Lt<16;Lt++)Ye($e[Lt+1]);for(var hr=0;hr<=161;hr++)Ye(ce[hr]);Ye(1);for(var wr=0;wr<16;wr++)Ye(Ae[wr+1]);for(var Lr=0;Lr<=11;Lr++)Ye(xe[Lr]);Ye(17);for(var qr=0;qr<16;qr++)Ye(_e[qr+1]);for(var gr=0;gr<=161;gr++)Ye(et[gr])}(),it(65498),it(12),Ye(3),Ye(1),Ye(0),Ye(2),Ye(17),Ye(3),Ye(17),Ye(0),Ye(63),Ye(0);var ye=0,Re=0,Ge=0;Y=0,K=7,this.encode.displayName="_encode_";for(var tt,st,ot,Ct,Ft,zt,Vt,Jt,ft,Ue=ee.data,fr=ee.width,Zt=ee.height,bt=4*fr,ze=0;ze<Zt;){for(tt=0;tt<bt;){for(Ft=bt*ze+tt,Vt=-1,Jt=0,ft=0;ft<64;ft++)zt=Ft+(Jt=ft>>3)*bt+(Vt=4*(7&ft)),ze+Jt>=Zt&&(zt-=bt*(ze+1+Jt-Zt)),tt+Vt>=bt&&(zt-=tt+Vt-bt+4),st=Ue[zt++],ot=Ue[zt++],Ct=Ue[zt++],ne[ft]=(Ne[st]+Ne[ot+256>>0]+Ne[Ct+512>>0]>>16)-128,he[ft]=(Ne[st+768>>0]+Ne[ot+1024>>0]+Ne[Ct+1280>>0]>>16)-128,Ee[ft]=(Ne[st+1280>>0]+Ne[ot+1536>>0]+Ne[Ct+1792>>0]>>16)-128;ye=nt(ne,w,ye,e,s),Re=nt(he,S,Re,t,l),Ge=nt(Ee,S,Ge,t,l),tt+=32}ze+=8}if(K>=0){var Ut=[];Ut[1]=K+1,Ut[0]=(1<<K+1)-1,rt(Ut)}return it(65497),new Uint8Array(j)},n=n||50,function(){for(var ee=String.fromCharCode,pe=0;pe<256;pe++)De[pe]=ee(pe)}(),e=Je(ge,Ze),t=Je(Ae,xe),s=Je($e,ce),l=Je(_e,et),function(){for(var ee=1,pe=2,ye=1;ye<=15;ye++){for(var Re=ee;Re<pe;Re++)Q[32767+Re]=ye,T[32767+Re]=[],T[32767+Re][1]=ye,T[32767+Re][0]=Re;for(var Ge=-(pe-1);Ge<=-ee;Ge++)Q[32767+Ge]=ye,T[32767+Ge]=[],T[32767+Ge][1]=ye,T[32767+Ge][0]=pe-1+Ge;ee<<=1,pe<<=1}}(),function(){for(var ee=0;ee<256;ee++)Ne[ee]=19595*ee,Ne[ee+256>>0]=38470*ee,Ne[ee+512>>0]=7471*ee+32768,Ne[ee+768>>0]=-11059*ee,Ne[ee+1024>>0]=-21709*ee,Ne[ee+1280>>0]=32768*ee+8421375,Ne[ee+1536>>0]=-27439*ee,Ne[ee+1792>>0]=-5329*ee}(),Bt(n)}/**
* @license
* Copyright (c) 2017 Aras Abbasi
*
* Licensed under the MIT License.
* http://opensource.org/licenses/mit-license
*/function co(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Pv(n){function e(ge){if(!ge)throw Error("assert :P")}function t(ge,Ze,$e){for(var ce=0;4>ce;ce++)if(ge[Ze+ce]!=$e.charCodeAt(ce))return!0;return!1}function s(ge,Ze,$e,ce,Ae){for(var xe=0;xe<Ae;xe++)ge[Ze+xe]=$e[ce+xe]}function l(ge,Ze,$e,ce){for(var Ae=0;Ae<ce;Ae++)ge[Ze+Ae]=$e}function u(ge){return new Int32Array(ge)}function p(ge,Ze){for(var $e=[],ce=0;ce<ge;ce++)$e.push(new Ze);return $e}function a(ge,Ze){var $e=[];return function ce(Ae,xe,_e){for(var et=_e[xe],Je=0;Je<et&&(Ae.push(_e.length>xe+1?[]:new Ze),!(_e.length<xe+1));Je++)ce(Ae[Je],xe+1,_e)}($e,0,ge),$e}var m=function(){var ge=this;function Ze(f,x){for(var C=1<<x-1>>>0;f&C;)C>>>=1;return C?(f&C-1)+C:f}function $e(f,x,C,M,R){e(!(M%C));do f[x+(M-=C)]=R;while(0<M)}function ce(f,x,C,M,R){if(e(2328>=R),512>=R)var N=u(512);else if((N=u(R))==null)return 0;return function(z,G,X,re,de,we){var Ie,Pe,ut=G,He=1<<X,Se=u(16),Fe=u(16);for(e(de!=0),e(re!=null),e(z!=null),e(0<X),Pe=0;Pe<de;++Pe){if(15<re[Pe])return 0;++Se[re[Pe]]}if(Se[0]==de)return 0;for(Fe[1]=0,Ie=1;15>Ie;++Ie){if(Se[Ie]>1<<Ie)return 0;Fe[Ie+1]=Fe[Ie]+Se[Ie]}for(Pe=0;Pe<de;++Pe)Ie=re[Pe],0<re[Pe]&&(we[Fe[Ie]++]=Pe);if(Fe[15]==1)return(re=new Ae).g=0,re.value=we[0],$e(z,ut,1,He,re),He;var dt,pt=-1,at=He-1,_t=0,Et=1,Wt=1,kt=1<<X;for(Pe=0,Ie=1,de=2;Ie<=X;++Ie,de<<=1){if(Et+=Wt<<=1,0>(Wt-=Se[Ie]))return 0;for(;0<Se[Ie];--Se[Ie])(re=new Ae).g=Ie,re.value=we[Pe++],$e(z,ut+_t,de,kt,re),_t=Ze(_t,Ie)}for(Ie=X+1,de=2;15>=Ie;++Ie,de<<=1){if(Et+=Wt<<=1,0>(Wt-=Se[Ie]))return 0;for(;0<Se[Ie];--Se[Ie]){if(re=new Ae,(_t&at)!=pt){for(ut+=kt,dt=1<<(pt=Ie)-X;15>pt&&!(0>=(dt-=Se[pt]));)++pt,dt<<=1;He+=kt=1<<(dt=pt-X),z[G+(pt=_t&at)].g=dt+X,z[G+pt].value=ut-G-pt}re.g=Ie-X,re.value=we[Pe++],$e(z,ut+(_t>>X),de,kt,re),_t=Ze(_t,Ie)}}return Et!=2*Fe[15]-1?0:He}(f,x,C,M,R,N)}function Ae(){this.value=this.g=0}function xe(){this.value=this.g=0}function _e(){this.G=p(5,Ae),this.H=u(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=p(Ln,xe)}function et(f,x,C,M){e(f!=null),e(x!=null),e(2147483648>M),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=x,f.pa=C,f.Jd=x,f.Yc=C+M,f.Zc=4<=M?C+M-4+1:C,tt(f)}function Je(f,x){for(var C=0;0<x--;)C|=ot(f,128)<<x;return C}function rt(f,x){var C=Je(f,x);return st(f)?-C:C}function Ye(f,x,C,M){var R,N=0;for(e(f!=null),e(x!=null),e(4294967288>M),f.Sb=M,f.Ra=0,f.u=0,f.h=0,4<M&&(M=4),R=0;R<M;++R)N+=x[C+R]<<8*R;f.Ra=N,f.bb=M,f.oa=x,f.pa=C}function it(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<fa-8>>>0,++f.bb,f.u-=8;ye(f)&&(f.h=1,f.u=0)}function nt(f,x){if(e(0<=x),!f.h&&x<=No){var C=pe(f)&Do[x];return f.u+=x,it(f),C}return f.h=1,f.u=0}function Bt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function pe(f){return f.Ra>>>(f.u&fa-1)>>>0}function ye(f){return e(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>fa}function Re(f,x){f.u=x,f.h=ye(f)}function Ge(f){f.u>=to&&(e(f.u>=to),it(f))}function tt(f){e(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(e(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function st(f){return Je(f,1)}function ot(f,x){var C=f.Ca;0>f.b&&tt(f);var M=f.b,R=C*x>>>8,N=(f.I>>>M>R)+0;for(N?(C-=R,f.I-=R+1<<M>>>0):C=R+1,M=C,R=0;256<=M;)R+=8,M>>=8;return M=7^R+vn[M],f.b-=M,f.Ca=(C<<M)-1,N}function Ct(f,x,C){f[x+0]=C>>24&255,f[x+1]=C>>16&255,f[x+2]=C>>8&255,f[x+3]=C>>0&255}function Ft(f,x){return f[x+0]<<0|f[x+1]<<8}function zt(f,x){return Ft(f,x)|f[x+2]<<16}function Vt(f,x){return Ft(f,x)|Ft(f,x+2)<<16}function Jt(f,x){var C=1<<x;return e(f!=null),e(0<x),f.X=u(C),f.X==null?0:(f.Mb=32-x,f.Xa=x,1)}function ft(f,x){e(f!=null),e(x!=null),e(f.Xa==x.Xa),s(x.X,0,f.X,0,1<<x.Xa)}function Ue(){this.X=[],this.Xa=this.Mb=0}function fr(f,x,C,M){e(C!=null),e(M!=null);var R=C[0],N=M[0];return R==0&&(R=(f*N+x/2)/x),N==0&&(N=(x*R+f/2)/f),0>=R||0>=N?0:(C[0]=R,M[0]=N,1)}function Zt(f,x){return f+(1<<x)-1>>>x}function bt(f,x){return((4278255360&f)+(4278255360&x)>>>0&4278255360)+((16711935&f)+(16711935&x)>>>0&16711935)>>>0}function ze(f,x){ge[x]=function(C,M,R,N,z,G,X){var re;for(re=0;re<z;++re){var de=ge[f](G[X+re-1],R,N+re);G[X+re]=bt(C[M+re],de)}}}function Ut(){this.ud=this.hd=this.jd=0}function Pt(f,x){return((4278124286&(f^x))>>>1)+(f&x)>>>0}function Qt(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function Lt(f,x){return Qt(f+(f-x+.5>>1))}function hr(f,x,C){return Math.abs(x-C)-Math.abs(f-C)}function wr(f,x,C,M,R,N,z){for(M=N[z-1],C=0;C<R;++C)N[z+C]=M=bt(f[x+C],M)}function Lr(f,x,C,M,R){var N;for(N=0;N<C;++N){var z=f[x+N],G=z>>8&255,X=16711935&(X=(X=16711935&z)+((G<<16)+G));M[R+N]=(4278255360&z)+X>>>0}}function qr(f,x){x.jd=f>>0&255,x.hd=f>>8&255,x.ud=f>>16&255}function gr(f,x,C,M,R,N){var z;for(z=0;z<M;++z){var G=x[C+z],X=G>>>8,re=G,de=255&(de=(de=G>>>16)+((f.jd<<24>>24)*(X<<24>>24)>>>5));re=255&(re=(re=re+((f.hd<<24>>24)*(X<<24>>24)>>>5))+((f.ud<<24>>24)*(de<<24>>24)>>>5)),R[N+z]=(4278255360&G)+(de<<16)+re}}function br(f,x,C,M,R){ge[x]=function(N,z,G,X,re,de,we,Ie,Pe){for(X=we;X<Ie;++X)for(we=0;we<Pe;++we)re[de++]=R(G[M(N[z++])])},ge[f]=function(N,z,G,X,re,de,we){var Ie=8>>N.b,Pe=N.Ea,ut=N.K[0],He=N.w;if(8>Ie)for(N=(1<<N.b)-1,He=(1<<Ie)-1;z<G;++z){var Se,Fe=0;for(Se=0;Se<Pe;++Se)Se&N||(Fe=M(X[re++])),de[we++]=R(ut[Fe&He]),Fe>>=Ie}else ge["VP8LMapColor"+C](X,re,ut,He,de,we,z,G,Pe)}}function Rt(f,x,C,M,R){for(C=x+C;x<C;){var N=f[x++];M[R++]=N>>16&255,M[R++]=N>>8&255,M[R++]=N>>0&255}}function vt(f,x,C,M,R){for(C=x+C;x<C;){var N=f[x++];M[R++]=N>>16&255,M[R++]=N>>8&255,M[R++]=N>>0&255,M[R++]=N>>24&255}}function Cr(f,x,C,M,R){for(C=x+C;x<C;){var N=(z=f[x++])>>16&240|z>>12&15,z=z>>0&240|z>>28&15;M[R++]=N,M[R++]=z}}function Tr(f,x,C,M,R){for(C=x+C;x<C;){var N=(z=f[x++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;M[R++]=N,M[R++]=z}}function Dr(f,x,C,M,R){for(C=x+C;x<C;){var N=f[x++];M[R++]=N>>0&255,M[R++]=N>>8&255,M[R++]=N>>16&255}}function Vr(f,x,C,M,R,N){if(N==0)for(C=x+C;x<C;)Ct(M,((N=f[x++])[0]>>24|N[1]>>8&65280|N[2]<<8&16711680|N[3]<<24)>>>0),R+=32;else s(M,R,f,x,C)}function xt(f,x){ge[x][0]=ge[f+"0"],ge[x][1]=ge[f+"1"],ge[x][2]=ge[f+"2"],ge[x][3]=ge[f+"3"],ge[x][4]=ge[f+"4"],ge[x][5]=ge[f+"5"],ge[x][6]=ge[f+"6"],ge[x][7]=ge[f+"7"],ge[x][8]=ge[f+"8"],ge[x][9]=ge[f+"9"],ge[x][10]=ge[f+"10"],ge[x][11]=ge[f+"11"],ge[x][12]=ge[f+"12"],ge[x][13]=ge[f+"13"],ge[x][14]=ge[f+"0"],ge[x][15]=ge[f+"0"]}function Kt(f){return f==pl||f==Qn||f==ea||f==Vo}function rr(){this.eb=[],this.size=this.A=this.fb=0}function Or(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function bi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rr,this.f.kb=new Or,this.sd=null}function Nt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function $r(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ue(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function Z(f,x){var C=f.T,M=x.ba.f.RGBA,R=M.eb,N=M.fb+f.ka*M.A,z=Ai[x.ba.S],G=f.y,X=f.O,re=f.f,de=f.N,we=f.ea,Ie=f.W,Pe=x.cc,ut=x.dc,He=x.Mc,Se=x.Nc,Fe=f.ka,dt=f.ka+f.T,pt=f.U,at=pt+1>>1;for(Fe==0?z(G,X,null,null,re,de,we,Ie,re,de,we,Ie,R,N,null,null,pt):(z(x.ec,x.fc,G,X,Pe,ut,He,Se,re,de,we,Ie,R,N-M.A,R,N,pt),++C);Fe+2<dt;Fe+=2)Pe=re,ut=de,He=we,Se=Ie,de+=f.Rc,Ie+=f.Rc,N+=2*M.A,z(G,(X+=2*f.fa)-f.fa,G,X,Pe,ut,He,Se,re,de,we,Ie,R,N-M.A,R,N,pt);return X+=f.fa,f.j+dt<f.o?(s(x.ec,x.fc,G,X,pt),s(x.cc,x.dc,re,de,at),s(x.Mc,x.Nc,we,Ie,at),C--):1&dt||z(G,X,null,null,re,de,we,Ie,re,de,we,Ie,R,N+M.A,null,null,pt),C}function ie(f,x,C){var M=f.F,R=[f.J];if(M!=null){var N=f.U,z=x.ba.S,G=z==IA||z==ea;x=x.ba.f.RGBA;var X=[0],re=f.ka;X[0]=f.T,f.Kb&&(re==0?--X[0]:(--re,R[0]-=f.width),f.j+f.ka+f.T==f.o&&(X[0]=f.o-f.j-re));var de=x.eb;re=x.fb+re*x.A,f=Ps(M,R[0],f.width,N,X,de,re+(G?0:3),x.A),e(C==X),f&&Kt(z)&&Ys(de,re,G,N,X,x.A)}return 0}function le(f){var x=f.ma,C=x.ba.S,M=11>C,R=C==ul||C==Jl||C==IA||C==hl||C==12||Kt(C);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!ol(x.Oa,f,R?11:12))return 0;if(R&&Kt(C)&&Tt(),f.da)alert("todo:use_scaling");else{if(M){if(x.Ib=ue,f.Kb){if(C=f.U+1>>1,x.memory=u(f.U+2*C),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+f.U,x.Mc=x.cc,x.Nc=x.dc+C,x.Ib=Z,Tt()}}else alert("todo:EmitYUV");R&&(x.Jb=ie,M&&Ke())}if(M&&!c){for(f=0;256>f;++f)d[f]=89858*(f-128)+QA>>Da,E[f]=-22014*(f-128)+QA,b[f]=-45773*(f-128),y[f]=113618*(f-128)+QA>>Da;for(f=jo;f<ni;++f)x=76283*(f-16)+QA>>Da,L[f-jo]=Zn(x,255),k[f-jo]=Zn(x+8>>4,15);c=1}return 1}function ve(f){var x=f.ma,C=f.U,M=f.T;return e(!(1&f.ka)),0>=C||0>=M?0:(C=x.Ib(f,x),x.Jb!=null&&x.Jb(f,x,C),x.Dc+=C,1)}function be(f){f.ma.memory=null}function ke(f,x,C,M){return nt(f,8)!=47?0:(x[0]=nt(f,14)+1,C[0]=nt(f,14)+1,M[0]=nt(f,1),nt(f,3)!=0?0:!f.h)}function Oe(f,x){if(4>f)return f+1;var C=f-2>>1;return(2+(1&f)<<C)+nt(x,C)+1}function Te(f,x){return 120<x?x-120:1<=(C=((C=xi[x-1])>>4)*f+(8-(15&C)))?C:1;var C}function Ve(f,x,C){var M=pe(C),R=f[x+=255&M].g-8;return 0<R&&(Re(C,C.u+8),M=pe(C),x+=f[x].value,x+=M&(1<<R)-1),Re(C,C.u+f[x].g),f[x].value}function lt(f,x,C){return C.g+=f.g,C.value+=f.value<<x>>>0,e(8>=C.g),f.g}function ht(f,x,C){var M=f.xc;return e((x=M==0?0:f.vc[f.md*(C>>M)+(x>>M)])<f.Wb),f.Ya[x]}function gt(f,x,C,M){var R=f.ab,N=f.c*x,z=f.C;x=z+x;var G=C,X=M;for(M=f.Ta,C=f.Ua;0<R--;){var re=f.gc[R],de=z,we=x,Ie=G,Pe=X,ut=(X=M,G=C,re.Ea);switch(e(de<we),e(we<=re.nc),re.hc){case 2:ga(Ie,Pe,(we-de)*ut,X,G);break;case 0:var He=de,Se=we,Fe=X,dt=G,pt=(kt=re).Ea;He==0&&(Yl(Ie,Pe,null,null,1,Fe,dt),wr(Ie,Pe+1,0,0,pt-1,Fe,dt+1),Pe+=pt,dt+=pt,++He);for(var at=1<<kt.b,_t=at-1,Et=Zt(pt,kt.b),Wt=kt.K,kt=kt.w+(He>>kt.b)*Et;He<Se;){var Fr=Wt,Er=kt,kr=1;for(yi(Ie,Pe,Fe,dt-pt,1,Fe,dt);kr<pt;){var pr=(kr&~_t)+at;pr>pt&&(pr=pt),(0,Yn[Fr[Er++]>>8&15])(Ie,Pe+ +kr,Fe,dt+kr-pt,pr-kr,Fe,dt+kr),kr=pr}Pe+=pt,dt+=pt,++He&_t||(kt+=Et)}we!=re.nc&&s(X,G-ut,X,G+(we-de-1)*ut,ut);break;case 1:for(ut=Ie,Se=Pe,pt=(Ie=re.Ea)-(dt=Ie&~(Fe=(Pe=1<<re.b)-1)),He=Zt(Ie,re.b),at=re.K,re=re.w+(de>>re.b)*He;de<we;){for(_t=at,Et=re,Wt=new Ut,kt=Se+dt,Fr=Se+Ie;Se<kt;)qr(_t[Et++],Wt),Tn(Wt,ut,Se,Pe,X,G),Se+=Pe,G+=Pe;Se<Fr&&(qr(_t[Et++],Wt),Tn(Wt,ut,Se,pt,X,G),Se+=pt,G+=pt),++de&Fe||(re+=He)}break;case 3:if(Ie==X&&Pe==G&&0<re.b){for(Se=X,Ie=ut=G+(we-de)*ut-(dt=(we-de)*Zt(re.Ea,re.b)),Pe=X,Fe=G,He=[],dt=(pt=dt)-1;0<=dt;--dt)He[dt]=Pe[Fe+dt];for(dt=pt-1;0<=dt;--dt)Se[Ie+dt]=He[dt];Ti(re,de,we,X,ut,X,G)}else Ti(re,de,we,Ie,Pe,X,G)}G=M,X=C}X!=C&&s(M,C,G,X,N)}function nr(f,x){var C=f.V,M=f.Ba+f.c*f.C,R=x-f.C;if(e(x<=f.l.o),e(16>=R),0<R){var N=f.l,z=f.Ta,G=f.Ua,X=N.width;if(gt(f,R,C,M),R=G=[G],e((C=f.C)<(M=x)),e(N.v<N.va),M>N.o&&(M=N.o),C<N.j){var re=N.j-C;C=N.j,R[0]+=re*X}if(C>=M?C=0:(R[0]+=4*N.v,N.ka=C-N.j,N.U=N.va-N.v,N.T=M-C,C=1),C){if(G=G[0],11>(C=f.ca).S){var de=C.f.RGBA,we=(M=C.S,R=N.U,N=N.T,re=de.eb,de.A),Ie=N;for(de=de.fb+f.Ma*de.A;0<Ie--;){var Pe=z,ut=G,He=R,Se=re,Fe=de;switch(M){case cl:Un(Pe,ut,He,Se,Fe);break;case ul:Pa(Pe,ut,He,Se,Fe);break;case pl:Pa(Pe,ut,He,Se,Fe),Ys(Se,Fe,0,He,1,0);break;case Vc:Ro(Pe,ut,He,Se,Fe);break;case Jl:Vr(Pe,ut,He,Se,Fe,1);break;case Qn:Vr(Pe,ut,He,Se,Fe,1),Ys(Se,Fe,0,He,1,0);break;case IA:Vr(Pe,ut,He,Se,Fe,0);break;case ea:Vr(Pe,ut,He,Se,Fe,0),Ys(Se,Fe,1,He,1,0);break;case hl:Zs(Pe,ut,He,Se,Fe);break;case Vo:Zs(Pe,ut,He,Se,Fe),Js(Se,Fe,He,1,0);break;case ec:ya(Pe,ut,He,Se,Fe);break;default:e(0)}G+=X,de+=we}f.Ma+=N}else alert("todo:EmitRescaledRowsYUVA");e(f.Ma<=C.height)}}f.C=x,e(f.C<=f.i)}function sr(f){var x;if(0<f.ua)return 0;for(x=0;x<f.Wb;++x){var C=f.Ya[x].G,M=f.Ya[x].H;if(0<C[1][M[1]+0].g||0<C[2][M[2]+0].g||0<C[3][M[3]+0].g)return 0}return 1}function jt(f,x,C,M,R,N){if(f.Z!=0){var z=f.qd,G=f.rd;for(e(es[f.Z]!=null);x<C;++x)es[f.Z](z,G,M,R,M,R,N),z=M,G=R,R+=N;f.qd=z,f.rd=G}}function Yt(f,x){var C=f.l.ma,M=C.Z==0||C.Z==1?f.l.j:f.C;if(M=f.C<M?M:f.C,e(x<=f.l.o),x>M){var R=f.l.width,N=C.ca,z=C.tb+R*M,G=f.V,X=f.Ba+f.c*M,re=f.gc;e(f.ab==1),e(re[0].hc==3),Oo(re[0],M,x,G,X,N,z),jt(C,M,x,N,z,R)}f.C=f.Ma=x}function ur(f,x,C,M,R,N,z){var G=f.$/M,X=f.$%M,re=f.m,de=f.s,we=C+f.$,Ie=we;R=C+M*R;var Pe=C+M*N,ut=280+de.ua,He=f.Pb?G:16777216,Se=0<de.ua?de.Wa:null,Fe=de.wc,dt=we<Pe?ht(de,X,G):null;e(f.C<N),e(Pe<=R);var pt=!1;e:for(;;){for(;pt||we<Pe;){var at=0;if(G>=He){var _t=we-C;e((He=f).Pb),He.wd=He.m,He.xd=_t,0<He.s.ua&&ft(He.s.Wa,He.s.vb),He=G+Gc}if(X&Fe||(dt=ht(de,X,G)),e(dt!=null),dt.Qb&&(x[we]=dt.qb,pt=!0),!pt)if(Ge(re),dt.jc){at=re,_t=x;var Et=we,Wt=dt.pd[pe(at)&Ln-1];e(dt.jc),256>Wt.g?(Re(at,at.u+Wt.g),_t[Et]=Wt.value,at=0):(Re(at,at.u+Wt.g-256),e(256<=Wt.value),at=Wt.value),at==0&&(pt=!0)}else at=Ve(dt.G[0],dt.H[0],re);if(re.h)break;if(pt||256>at){if(!pt)if(dt.nd)x[we]=(dt.qb|at<<8)>>>0;else{if(Ge(re),pt=Ve(dt.G[1],dt.H[1],re),Ge(re),_t=Ve(dt.G[2],dt.H[2],re),Et=Ve(dt.G[3],dt.H[3],re),re.h)break;x[we]=(Et<<24|pt<<16|at<<8|_t)>>>0}if(pt=!1,++we,++X>=M&&(X=0,++G,z!=null&&G<=N&&!(G%16)&&z(f,G),Se!=null))for(;Ie<we;)at=x[Ie++],Se.X[(506832829*at&4294967295)>>>Se.Mb]=at}else if(280>at){if(at=Oe(at-256,re),_t=Ve(dt.G[4],dt.H[4],re),Ge(re),_t=Te(M,_t=Oe(_t,re)),re.h)break;if(we-C<_t||R-we<at)break e;for(Et=0;Et<at;++Et)x[we+Et]=x[we+Et-_t];for(we+=at,X+=at;X>=M;)X-=M,++G,z!=null&&G<=N&&!(G%16)&&z(f,G);if(e(we<=R),X&Fe&&(dt=ht(de,X,G)),Se!=null)for(;Ie<we;)at=x[Ie++],Se.X[(506832829*at&4294967295)>>>Se.Mb]=at}else{if(!(at<ut))break e;for(pt=at-280,e(Se!=null);Ie<we;)at=x[Ie++],Se.X[(506832829*at&4294967295)>>>Se.Mb]=at;at=we,e(!(pt>>>(_t=Se).Xa)),x[at]=_t.X[pt],pt=!0}pt||e(re.h==ye(re))}if(f.Pb&&re.h&&we<R)e(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&ft(f.s.vb,f.s.Wa);else{if(re.h)break e;z!=null&&z(f,G>N?N:G),f.a=0,f.$=we-C}return 1}return f.a=3,0}function Br(f){e(f!=null),f.vc=null,f.yc=null,f.Ya=null;var x=f.Wa;x!=null&&(x.X=null),f.vb=null,e(f!=null)}function Rr(){var f=new Za;return f==null?null:(f.a=0,f.xb=Kc,xt("Predictor","VP8LPredictors"),xt("Predictor","VP8LPredictors_C"),xt("PredictorAdd","VP8LPredictorsAdd"),xt("PredictorAdd","VP8LPredictorsAdd_C"),ga=Lr,Tn=gr,Un=Rt,Pa=vt,Zs=Cr,ya=Tr,Ro=Dr,ge.VP8LMapColor32b=ma,ge.VP8LMapColor8b=FA,f)}function Sr(f,x,C,M,R){var N=1,z=[f],G=[x],X=M.m,re=M.s,de=null,we=0;e:for(;;){if(C)for(;N&&nt(X,1);){var Ie=z,Pe=G,ut=M,He=1,Se=ut.m,Fe=ut.gc[ut.ab],dt=nt(Se,2);if(ut.Oc&1<<dt)N=0;else{switch(ut.Oc|=1<<dt,Fe.hc=dt,Fe.Ea=Ie[0],Fe.nc=Pe[0],Fe.K=[null],++ut.ab,e(4>=ut.ab),dt){case 0:case 1:Fe.b=nt(Se,3)+2,He=Sr(Zt(Fe.Ea,Fe.b),Zt(Fe.nc,Fe.b),0,ut,Fe.K),Fe.K=Fe.K[0];break;case 3:var pt,at=nt(Se,8)+1,_t=16<at?0:4<at?1:2<at?2:3;if(Ie[0]=Zt(Fe.Ea,_t),Fe.b=_t,pt=He=Sr(at,1,0,ut,Fe.K)){var Et,Wt=at,kt=Fe,Fr=1<<(8>>kt.b),Er=u(Fr);if(Er==null)pt=0;else{var kr=kt.K[0],pr=kt.w;for(Er[0]=kt.K[0][0],Et=1;Et<1*Wt;++Et)Er[Et]=bt(kr[pr+Et],Er[Et-1]);for(;Et<4*Fr;++Et)Er[Et]=0;kt.K[0]=null,kt.K[0]=Er,pt=1}}He=pt;break;case 2:break;default:e(0)}N=He}}if(z=z[0],G=G[0],N&&nt(X,1)&&!(N=1<=(we=nt(X,4))&&11>=we)){M.a=3;break e}var ei;if(ei=N)t:{var Zr,Ir,Bi,Ji=M,si=z,hi=G,zr=we,en=C,li=Ji.m,ti=Ji.s,pi=[null],ri=1,on=0,us=rc[zr];r:for(;;){if(en&&nt(li,1)){var tn=nt(li,3)+2,ba=Zt(si,tn),Go=Zt(hi,tn),no=ba*Go;if(!Sr(ba,Go,0,Ji,pi))break r;for(pi=pi[0],ti.xc=tn,Zr=0;Zr<no;++Zr){var _n=pi[Zr]>>8&65535;pi[Zr]=_n,_n>=ri&&(ri=_n+1)}}if(li.h)break r;for(Ir=0;5>Ir;++Ir){var gi=tc[Ir];!Ir&&0<zr&&(gi+=1<<zr),on<gi&&(on=gi)}var Ms=p(ri*us,Ae),hs=ri,ra=p(hs,_e);if(ra==null)var MA=null;else e(65536>=hs),MA=ra;var ps=u(on);if(MA==null||ps==null||Ms==null){Ji.a=1;break r}var $u=Ms;for(Zr=Bi=0;Zr<ri;++Zr){var xa=MA[Zr],Si=xa.G,kA=xa.H,hp=0,so=1,DA=0;for(Ir=0;5>Ir;++Ir){gi=tc[Ir],Si[Ir]=$u,kA[Ir]=Bi,!Ir&&0<zr&&(gi+=1<<zr);n:{var ml,Wc=gi,Xc=Ji,Zc=ps,qf=$u,py=Bi,Yc=0,NA=Xc.m,pp=nt(NA,1);if(l(Zc,0,0,Wc),pp){var Kf=nt(NA,1)+1,$f=nt(NA,1),yl=nt(NA,$f==0?1:8);Zc[yl]=1,Kf==2&&(Zc[yl=nt(NA,8)]=1);var Wu=1}else{var ac=u(19),Jc=nt(NA,4)+4;if(19<Jc){Xc.a=3;var vl=0;break n}for(ml=0;ml<Jc;++ml)ac[cs[ml]]=nt(NA,3);var Xu=void 0,oc=void 0,Wf=Xc,ts=ac,qo=Wc,Zu=Zc,Yu=0,Ba=Wf.m,Xf=8,eu=p(128,Ae);i:for(;ce(eu,0,7,ts,19);){if(nt(Ba,1)){var dy=2+2*nt(Ba,3);if((Xu=2+nt(Ba,dy))>qo)break i}else Xu=qo;for(oc=0;oc<qo&&Xu--;){Ge(Ba);var dp=eu[0+(127&pe(Ba))];Re(Ba,Ba.u+dp.g);var _l=dp.value;if(16>_l)Zu[oc++]=_l,_l!=0&&(Xf=_l);else{var Zf=_l==16,Yf=_l-16,fp=dl[Yf],gp=nt(Ba,jc[Yf])+fp;if(oc+gp>qo)break i;for(var mp=Zf?Xf:0;0<gp--;)Zu[oc++]=mp}}Yu=1;break i}Yu||(Wf.a=3),Wu=Yu}(Wu=Wu&&!NA.h)&&(Yc=ce(qf,py,8,Zc,Wc)),Wu&&Yc!=0?vl=Yc:(Xc.a=3,vl=0)}if(vl==0)break r;if(so&&Ku[Ir]==1&&(so=$u[Bi].g==0),hp+=$u[Bi].g,Bi+=vl,3>=Ir){var Ko,ds=ps[0];for(Ko=1;Ko<gi;++Ko)ps[Ko]>ds&&(ds=ps[Ko]);DA+=ds}}if(xa.nd=so,xa.Qb=0,so&&(xa.qb=(Si[3][kA[3]+0].value<<24|Si[1][kA[1]+0].value<<16|Si[2][kA[2]+0].value)>>>0,hp==0&&256>Si[0][kA[0]+0].value&&(xa.Qb=1,xa.qb+=Si[0][kA[0]+0].value<<8)),xa.jc=!xa.Qb&&6>DA,xa.jc){var tu,$o=xa;for(tu=0;tu<Ln;++tu){var Wo=tu,OA=$o.pd[Wo],Ju=$o.G[0][$o.H[0]+Wo];256<=Ju.value?(OA.g=Ju.g+256,OA.value=Ju.value):(OA.g=0,OA.value=0,Wo>>=lt(Ju,8,OA),Wo>>=lt($o.G[1][$o.H[1]+Wo],16,OA),Wo>>=lt($o.G[2][$o.H[2]+Wo],0,OA),lt($o.G[3][$o.H[3]+Wo],24,OA))}}}ti.vc=pi,ti.Wb=ri,ti.Ya=MA,ti.yc=Ms,ei=1;break t}ei=0}if(!(N=ei)){M.a=3;break e}if(0<we){if(re.ua=1<<we,!Jt(re.Wa,we)){M.a=1,N=0;break e}}else re.ua=0;var yp=M,Jf=z,vp=G,Ac=yp.s,eh=Ac.xc;if(yp.c=Jf,yp.i=vp,Ac.md=Zt(Jf,eh),Ac.wc=eh==0?-1:(1<<eh)-1,C){M.xb=Qs;break e}if((de=u(z*G))==null){M.a=1,N=0;break e}N=(N=ur(M,de,0,z,G,G,null))&&!X.h;break e}return N?(R!=null?R[0]=de:(e(de==null),e(C)),M.$=0,C||Br(re)):Br(re),N}function Le(f,x){var C=f.c*f.i,M=C+x+16*x;return e(f.c<=x),f.V=u(M),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+C+x,1)}function Mt(f,x){var C=f.C,M=x-C,R=f.V,N=f.Ba+f.c*C;for(e(x<=f.l.o);0<M;){var z=16<M?16:M,G=f.l.ma,X=f.l.width,re=X*z,de=G.ca,we=G.tb+X*C,Ie=f.Ta,Pe=f.Ua;gt(f,z,R,N),Xt(Ie,Pe,de,we,re),jt(G,C,C+z,de,we,X),M-=z,R+=z*f.c,C+=z}e(C==x),f.C=f.Ma=x}function yt(){this.ub=this.yd=this.td=this.Rb=0}function vr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Nr(){this.Fb=this.Bb=this.Cb=0,this.Zb=u(4),this.Lb=u(4)}function di(){this.Yb=function(){var f=[];return function x(C,M,R){for(var N=R[M],z=0;z<N&&(C.push(R.length>M+1?[]:0),!(R.length<M+1));z++)x(C[z],M+1,R)}(f,0,[3,11]),f}()}function Ii(){this.jb=u(3),this.Wc=a([4,8],di),this.Xc=a([4,17],di)}function qn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new u(4),this.od=new u(4)}function Hi(){this.ld=this.La=this.dd=this.tc=0}function Wi(){this.Na=this.la=0}function ii(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function bo(){this.ad=u(384),this.Za=0,this.Ob=u(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function pA(){this.uc=this.M=this.Nb=0,this.wa=Array(new Hi),this.Y=0,this.ya=Array(new bo),this.aa=0,this.l=new dA}function Xi(){this.y=u(16),this.f=u(8),this.ea=u(8)}function Dn(){this.cb=this.a=0,this.sc="",this.m=new Bt,this.Od=new yt,this.Kc=new vr,this.ed=new qn,this.Qa=new Nr,this.Ic=this.$c=this.Aa=0,this.D=new pA,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=p(8,Bt),this.ia=0,this.pb=p(4,ii),this.Pa=new Ii,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Xi),this.Hd=0,this.rb=Array(new Wi),this.sb=0,this.wa=Array(new Hi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new bo),this.L=this.aa=0,this.gd=a([4,2],Hi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function dA(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Kn(){var f=new Dn;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,LA||(LA=mi)),f}function Wr(f,x,C){return f.a==0&&(f.a=x,f.sc=C,f.cb=0),0}function xo(f,x,C){return 3<=C&&f[x+0]==157&&f[x+1]==1&&f[x+2]==42}function Ea(f,x){if(f==null)return 0;if(f.a=0,f.sc="OK",x==null)return Wr(f,2,"null VP8Io passed to VP8GetHeaders()");var C=x.data,M=x.w,R=x.ha;if(4>R)return Wr(f,7,"Truncated header.");var N=C[M+0]|C[M+1]<<8|C[M+2]<<16,z=f.Od;if(z.Rb=!(1&N),z.td=N>>1&7,z.yd=N>>4&1,z.ub=N>>5,3<z.td)return Wr(f,3,"Incorrect keyframe parameters.");if(!z.yd)return Wr(f,4,"Frame not displayable.");M+=3,R-=3;var G=f.Kc;if(z.Rb){if(7>R)return Wr(f,7,"cannot parse picture header");if(!xo(C,M,R))return Wr(f,3,"Bad code word");G.c=16383&(C[M+4]<<8|C[M+3]),G.Td=C[M+4]>>6,G.i=16383&(C[M+6]<<8|C[M+5]),G.Ud=C[M+6]>>6,M+=7,R-=7,f.za=G.c+15>>4,f.Ub=G.i+15>>4,x.width=G.c,x.height=G.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,l((N=f.Pa).jb,0,255,N.jb.length),e((N=f.Qa)!=null),N.Cb=0,N.Bb=0,N.Fb=1,l(N.Zb,0,0,N.Zb.length),l(N.Lb,0,0,N.Lb)}if(z.ub>R)return Wr(f,7,"bad partition length");et(N=f.m,C,M,z.ub),M+=z.ub,R-=z.ub,z.Rb&&(G.Ld=st(N),G.Kd=st(N)),G=f.Qa;var X,re=f.Pa;if(e(N!=null),e(G!=null),G.Cb=st(N),G.Cb){if(G.Bb=st(N),st(N)){for(G.Fb=st(N),X=0;4>X;++X)G.Zb[X]=st(N)?rt(N,7):0;for(X=0;4>X;++X)G.Lb[X]=st(N)?rt(N,6):0}if(G.Bb)for(X=0;3>X;++X)re.jb[X]=st(N)?Je(N,8):255}else G.Bb=0;if(N.Ka)return Wr(f,3,"cannot parse segment header");if((G=f.ed).zd=st(N),G.Tb=Je(N,6),G.wb=Je(N,3),G.Pc=st(N),G.Pc&&st(N)){for(re=0;4>re;++re)st(N)&&(G.vd[re]=rt(N,6));for(re=0;4>re;++re)st(N)&&(G.od[re]=rt(N,6))}if(f.L=G.Tb==0?0:G.zd?1:2,N.Ka)return Wr(f,3,"cannot parse filter header");var de=R;if(R=X=M,M=X+de,G=de,f.Xb=(1<<Je(f.m,2))-1,de<3*(re=f.Xb))C=7;else{for(X+=3*re,G-=3*re,de=0;de<re;++de){var we=C[R+0]|C[R+1]<<8|C[R+2]<<16;we>G&&(we=G),et(f.Jc[+de],C,X,we),X+=we,G-=we,R+=3}et(f.Jc[+re],C,X,G),C=X<M?0:5}if(C!=0)return Wr(f,C,"cannot parse partitions");for(C=Je(X=f.m,7),R=st(X)?rt(X,4):0,M=st(X)?rt(X,4):0,G=st(X)?rt(X,4):0,re=st(X)?rt(X,4):0,X=st(X)?rt(X,4):0,de=f.Qa,we=0;4>we;++we){if(de.Cb){var Ie=de.Zb[we];de.Fb||(Ie+=C)}else{if(0<we){f.pb[we]=f.pb[0];continue}Ie=C}var Pe=f.pb[we];Pe.Sc[0]=ic[Zn(Ie+R,127)],Pe.Sc[1]=nc[Zn(Ie+0,127)],Pe.Eb[0]=2*ic[Zn(Ie+M,127)],Pe.Eb[1]=101581*nc[Zn(Ie+G,127)]>>16,8>Pe.Eb[1]&&(Pe.Eb[1]=8),Pe.Qc[0]=ic[Zn(Ie+re,117)],Pe.Qc[1]=nc[Zn(Ie+X,127)],Pe.lc=Ie+X}if(!z.Rb)return Wr(f,4,"Not a key frame.");for(st(N),z=f.Pa,C=0;4>C;++C){for(R=0;8>R;++R)for(M=0;3>M;++M)for(G=0;11>G;++G)re=ot(N,gl[C][R][M][G])?Je(N,8):Ar[C][R][M][G],z.Wc[C][R].Yb[M][G]=re;for(R=0;17>R;++R)z.Xc[C][R]=z.Wc[C][qc[R]]}return f.kc=st(N),f.kc&&(f.Bd=Je(N,8)),f.cb=1}function mi(f,x,C,M,R,N,z){var G=x[R].Yb[C];for(C=0;16>R;++R){if(!ot(f,G[C+0]))return R;for(;!ot(f,G[C+1]);)if(G=x[++R].Yb[0],C=0,R==16)return 16;var X=x[R+1].Yb;if(ot(f,G[C+2])){var re=f,de=0;if(ot(re,(Ie=G)[(we=C)+3]))if(ot(re,Ie[we+6])){for(G=0,we=2*(de=ot(re,Ie[we+8]))+(Ie=ot(re,Ie[we+9+de])),de=0,Ie=up[we];Ie[G];++G)de+=de+ot(re,Ie[G]);de+=3+(8<<we)}else ot(re,Ie[we+7])?(de=7+2*ot(re,165),de+=ot(re,145)):de=5+ot(re,159);else de=ot(re,Ie[we+4])?3+ot(re,Ie[we+5]):2;G=X[2]}else de=1,G=X[1];X=z+zn[R],0>(re=f).b&&tt(re);var we,Ie=re.b,Pe=(we=re.Ca>>1)-(re.I>>Ie)>>31;--re.b,re.Ca+=Pe,re.Ca|=1,re.I-=(we+1&Pe)<<Ie,N[X]=((de^Pe)-Pe)*M[(0<R)+0]}return 16}function Xr(f){var x=f.rb[f.sb-1];x.la=0,x.Na=0,l(f.zc,0,0,f.zc.length),f.ja=0}function Ia(f,x){if(f==null)return 0;if(x==null)return Wr(f,2,"NULL VP8Io parameter in VP8Decode().");if(!f.cb&&!Ea(f,x))return 0;if(e(f.cb),x.ac==null||x.ac(x)){x.ob&&(f.L=0);var C=H[f.L];if(f.L==2?(f.yb=0,f.zb=0):(f.yb=x.v-C>>4,f.zb=x.j-C>>4,0>f.yb&&(f.yb=0),0>f.zb&&(f.zb=0)),f.Va=x.o+15+C>>4,f.Hb=x.va+15+C>>4,f.Hb>f.za&&(f.Hb=f.za),f.Va>f.Ub&&(f.Va=f.Ub),0<f.L){var M=f.ed;for(C=0;4>C;++C){var R;if(f.Qa.Cb){var N=f.Qa.Lb[C];f.Qa.Fb||(N+=M.Tb)}else N=M.Tb;for(R=0;1>=R;++R){var z=f.gd[C][R],G=N;if(M.Pc&&(G+=M.vd[0],R&&(G+=M.od[0])),0<(G=0>G?0:63<G?63:G)){var X=G;0<M.wb&&(X=4<M.wb?X>>2:X>>1)>9-M.wb&&(X=9-M.wb),1>X&&(X=1),z.dd=X,z.tc=2*G+X,z.ld=40<=G?2:15<=G?1:0}else z.tc=0;z.La=R}}}C=0}else Wr(f,6,"Frame setup failed"),C=f.a;if(C=C==0){if(C){f.$c=0,0<f.Aa||(f.Ic=se);e:{C=f.Ic,M=4*(X=f.za);var re=32*X,de=X+1,we=0<f.L?X*(0<f.Aa?2:1):0,Ie=(f.Aa==2?2:1)*X;if((z=M+832+(R=3*(16*C+H[f.L])/2*re)+(N=f.Fa!=null&&0<f.Fa.length?f.Kc.c*f.Kc.i:0))!=z)C=0;else{if(z>f.Vb){if(f.Vb=0,f.Ec=u(z),f.Fc=0,f.Ec==null){C=Wr(f,1,"no memory during frame initialization.");break e}f.Vb=z}z=f.Ec,G=f.Fc,f.Ac=z,f.Bc=G,G+=M,f.Gd=p(re,Xi),f.Hd=0,f.rb=p(de+1,Wi),f.sb=1,f.wa=we?p(we,Hi):null,f.Y=0,f.D.Nb=0,f.D.wa=f.wa,f.D.Y=f.Y,0<f.Aa&&(f.D.Y+=X),e(!0),f.oc=z,f.pc=G,G+=832,f.ya=p(Ie,bo),f.aa=0,f.D.ya=f.ya,f.D.aa=f.aa,f.Aa==2&&(f.D.aa+=X),f.R=16*X,f.B=8*X,X=(re=H[f.L])*f.R,re=re/2*f.B,f.sa=z,f.ta=G+X,f.qa=f.sa,f.ra=f.ta+16*C*f.R+re,f.Ha=f.qa,f.Ia=f.ra+8*C*f.B+re,f.$c=0,G+=R,f.mb=N?z:null,f.nb=N?G:null,e(G+N<=f.Fc+f.Vb),Xr(f),l(f.Ac,f.Bc,0,M),C=1}}if(C){if(x.ka=0,x.y=f.sa,x.O=f.ta,x.f=f.qa,x.N=f.ra,x.ea=f.Ha,x.Vd=f.Ia,x.fa=f.R,x.Rc=f.B,x.F=null,x.J=0,!Gt){for(C=-255;255>=C;++C)Al[255+C]=0>C?-C:C;for(C=-1020;1020>=C;++C)ka[1020+C]=-128>C?-128:127<C?127:C;for(C=-112;112>=C;++C)Ho[112+C]=-16>C?-16:15<C?15:C;for(C=-255;510>=C;++C)Hc[255+C]=0>C?0:255<C?255:C;Gt=1}Ts=ua,Nn=ql,Ki=fA,On=gA,va=Co,Qa=$s,ro=bA,zo=Ls,Rn=zc,Ma=nl,Pn=Rc,$i=xA,Us=sl,ai=Zl,oi=wA,Vi=Es,ji=da,_a=il,ui[0]=Fs,ui[1]=Fo,ui[2]=Xl,ui[3]=rl,ui[4]=ha,ui[5]=mn,ui[6]=Lo,ui[7]=Ka,ui[8]=To,ui[9]=mA,wa[0]=$l,wa[1]=Oc,wa[2]=Ws,wa[3]=qa,wa[4]=gn,wa[5]=Wl,wa[6]=Io,ta[0]=Mr,ta[1]=Kl,ta[2]=yA,ta[3]=pa,ta[4]=Zi,ta[5]=vA,ta[6]=yn,C=1}else C=0}C&&(C=function(Pe,ut){for(Pe.M=0;Pe.M<Pe.Va;++Pe.M){var He,Se=Pe.Jc[Pe.M&Pe.Xb],Fe=Pe.m,dt=Pe;for(He=0;He<dt.za;++He){var pt=Fe,at=dt,_t=at.Ac,Et=at.Bc+4*He,Wt=at.zc,kt=at.ya[at.aa+He];if(at.Qa.Bb?kt.$b=ot(pt,at.Pa.jb[0])?2+ot(pt,at.Pa.jb[2]):ot(pt,at.Pa.jb[1]):kt.$b=0,at.kc&&(kt.Ad=ot(pt,at.Bd)),kt.Za=!ot(pt,145)+0,kt.Za){var Fr=kt.Ob,Er=0;for(at=0;4>at;++at){var kr,pr=Wt[0+at];for(kr=0;4>kr;++kr){pr=_r[_t[Et+kr]][pr];for(var ei=fl[ot(pt,pr[0])];0<ei;)ei=fl[2*ei+ot(pt,pr[ei])];pr=-ei,_t[Et+kr]=pr}s(Fr,Er,_t,Et,4),Er+=4,Wt[0+at]=pr}}else pr=ot(pt,156)?ot(pt,128)?1:3:ot(pt,163)?2:0,kt.Ob[0]=pr,l(_t,Et,pr,4),l(Wt,0,pr,4);kt.Dd=ot(pt,142)?ot(pt,114)?ot(pt,183)?1:3:2:0}if(dt.m.Ka)return Wr(Pe,7,"Premature end-of-partition0 encountered.");for(;Pe.ja<Pe.za;++Pe.ja){if(dt=Se,pt=(Fe=Pe).rb[Fe.sb-1],_t=Fe.rb[Fe.sb+Fe.ja],He=Fe.ya[Fe.aa+Fe.ja],Et=Fe.kc?He.Ad:0)pt.la=_t.la=0,He.Za||(pt.Na=_t.Na=0),He.Hc=0,He.Gc=0,He.ia=0;else{var Zr,Ir;if(pt=_t,_t=dt,Et=Fe.Pa.Xc,Wt=Fe.ya[Fe.aa+Fe.ja],kt=Fe.pb[Wt.$b],at=Wt.ad,Fr=0,Er=Fe.rb[Fe.sb-1],pr=kr=0,l(at,Fr,0,384),Wt.Za)var Bi=0,Ji=Et[3];else{ei=u(16);var si=pt.Na+Er.Na;if(si=LA(_t,Et[1],si,kt.Eb,0,ei,0),pt.Na=Er.Na=(0<si)+0,1<si)Ts(ei,0,at,Fr);else{var hi=ei[0]+3>>3;for(ei=0;256>ei;ei+=16)at[Fr+ei]=hi}Bi=1,Ji=Et[0]}var zr=15&pt.la,en=15&Er.la;for(ei=0;4>ei;++ei){var li=1&en;for(hi=Ir=0;4>hi;++hi)zr=zr>>1|(li=(si=LA(_t,Ji,si=li+(1&zr),kt.Sc,Bi,at,Fr))>Bi)<<7,Ir=Ir<<2|(3<si?3:1<si?2:at[Fr+0]!=0),Fr+=16;zr>>=4,en=en>>1|li<<7,kr=(kr<<8|Ir)>>>0}for(Ji=zr,Bi=en>>4,Zr=0;4>Zr;Zr+=2){for(Ir=0,zr=pt.la>>4+Zr,en=Er.la>>4+Zr,ei=0;2>ei;++ei){for(li=1&en,hi=0;2>hi;++hi)si=li+(1&zr),zr=zr>>1|(li=0<(si=LA(_t,Et[2],si,kt.Qc,0,at,Fr)))<<3,Ir=Ir<<2|(3<si?3:1<si?2:at[Fr+0]!=0),Fr+=16;zr>>=2,en=en>>1|li<<5}pr|=Ir<<4*Zr,Ji|=zr<<4<<Zr,Bi|=(240&en)<<Zr}pt.la=Ji,Er.la=Bi,Wt.Hc=kr,Wt.Gc=pr,Wt.ia=43690&pr?0:kt.ia,Et=!(kr|pr)}if(0<Fe.L&&(Fe.wa[Fe.Y+Fe.ja]=Fe.gd[He.$b][He.Za],Fe.wa[Fe.Y+Fe.ja].La|=!Et),dt.Ka)return Wr(Pe,7,"Premature end-of-file encountered.")}if(Xr(Pe),Fe=ut,dt=1,He=(Se=Pe).D,pt=0<Se.L&&Se.M>=Se.zb&&Se.M<=Se.Va,Se.Aa==0)e:{if(He.M=Se.M,He.uc=pt,al(Se,He),dt=1,He=(Ir=Se.D).Nb,pt=(pr=H[Se.L])*Se.R,_t=pr/2*Se.B,ei=16*He*Se.R,hi=8*He*Se.B,Et=Se.sa,Wt=Se.ta-pt+ei,kt=Se.qa,at=Se.ra-_t+hi,Fr=Se.Ha,Er=Se.Ia-_t+hi,en=(zr=Ir.M)==0,kr=zr>=Se.Va-1,Se.Aa==2&&al(Se,Ir),Ir.uc)for(li=(si=Se).D.M,e(si.D.uc),Ir=si.yb;Ir<si.Hb;++Ir){Bi=Ir,Ji=li;var ti=(pi=(gi=si).D).Nb;Zr=gi.R;var pi=pi.wa[pi.Y+Bi],ri=gi.sa,on=gi.ta+16*ti*Zr+16*Bi,us=pi.dd,tn=pi.tc;if(tn!=0)if(e(3<=tn),gi.L==1)0<Bi&&Vi(ri,on,Zr,tn+4),pi.La&&_a(ri,on,Zr,tn),0<Ji&&oi(ri,on,Zr,tn+4),pi.La&&ji(ri,on,Zr,tn);else{var ba=gi.B,Go=gi.qa,no=gi.ra+8*ti*ba+8*Bi,_n=gi.Ha,gi=gi.Ia+8*ti*ba+8*Bi;ti=pi.ld,0<Bi&&(zo(ri,on,Zr,tn+4,us,ti),Ma(Go,no,_n,gi,ba,tn+4,us,ti)),pi.La&&($i(ri,on,Zr,tn,us,ti),ai(Go,no,_n,gi,ba,tn,us,ti)),0<Ji&&(ro(ri,on,Zr,tn+4,us,ti),Rn(Go,no,_n,gi,ba,tn+4,us,ti)),pi.La&&(Pn(ri,on,Zr,tn,us,ti),Us(Go,no,_n,gi,ba,tn,us,ti))}}if(Se.ia&&alert("todo:DitherRow"),Fe.put!=null){if(Ir=16*zr,zr=16*(zr+1),en?(Fe.y=Se.sa,Fe.O=Se.ta+ei,Fe.f=Se.qa,Fe.N=Se.ra+hi,Fe.ea=Se.Ha,Fe.W=Se.Ia+hi):(Ir-=pr,Fe.y=Et,Fe.O=Wt,Fe.f=kt,Fe.N=at,Fe.ea=Fr,Fe.W=Er),kr||(zr-=pr),zr>Fe.o&&(zr=Fe.o),Fe.F=null,Fe.J=null,Se.Fa!=null&&0<Se.Fa.length&&Ir<zr&&(Fe.J=CA(Se,Fe,Ir,zr-Ir),Fe.F=Se.mb,Fe.F==null&&Fe.F.length==0)){dt=Wr(Se,3,"Could not decode alpha data.");break e}Ir<Fe.j&&(pr=Fe.j-Ir,Ir=Fe.j,e(!(1&pr)),Fe.O+=Se.R*pr,Fe.N+=Se.B*(pr>>1),Fe.W+=Se.B*(pr>>1),Fe.F!=null&&(Fe.J+=Fe.width*pr)),Ir<zr&&(Fe.O+=Fe.v,Fe.N+=Fe.v>>1,Fe.W+=Fe.v>>1,Fe.F!=null&&(Fe.J+=Fe.v),Fe.ka=Ir-Fe.j,Fe.U=Fe.va-Fe.v,Fe.T=zr-Ir,dt=Fe.put(Fe))}He+1!=Se.Ic||kr||(s(Se.sa,Se.ta-pt,Et,Wt+16*Se.R,pt),s(Se.qa,Se.ra-_t,kt,at+8*Se.B,_t),s(Se.Ha,Se.Ia-_t,Fr,Er+8*Se.B,_t))}if(!dt)return Wr(Pe,6,"Output aborted.")}return 1}(f,x)),x.bc!=null&&x.bc(x),C&=1}return C?(f.cb=0,C):0}function ci(f,x,C,M,R){R=f[x+C+32*M]+(R>>3),f[x+C+32*M]=-256&R?0>R?0:255:R}function La(f,x,C,M,R,N){ci(f,x,0,C,M+R),ci(f,x,1,C,M+N),ci(f,x,2,C,M-N),ci(f,x,3,C,M-R)}function Ci(f){return(20091*f>>16)+f}function Bo(f,x,C,M){var R,N=0,z=u(16);for(R=0;4>R;++R){var G=f[x+0]+f[x+8],X=f[x+0]-f[x+8],re=(35468*f[x+4]>>16)-Ci(f[x+12]),de=Ci(f[x+4])+(35468*f[x+12]>>16);z[N+0]=G+de,z[N+1]=X+re,z[N+2]=X-re,z[N+3]=G-de,N+=4,x++}for(R=N=0;4>R;++R)G=(f=z[N+0]+4)+z[N+8],X=f-z[N+8],re=(35468*z[N+4]>>16)-Ci(z[N+12]),ci(C,M,0,0,G+(de=Ci(z[N+4])+(35468*z[N+12]>>16))),ci(C,M,1,0,X+re),ci(C,M,2,0,X-re),ci(C,M,3,0,G-de),N++,M+=32}function $s(f,x,C,M){var R=f[x+0]+4,N=35468*f[x+4]>>16,z=Ci(f[x+4]),G=35468*f[x+1]>>16;La(C,M,0,R+z,f=Ci(f[x+1]),G),La(C,M,1,R+N,f,G),La(C,M,2,R-N,f,G),La(C,M,3,R-z,f,G)}function ql(f,x,C,M,R){Bo(f,x,C,M),R&&Bo(f,x+16,C,M+4)}function fA(f,x,C,M){Nn(f,x+0,C,M,1),Nn(f,x+32,C,M+128,1)}function gA(f,x,C,M){var R;for(f=f[x+0]+4,R=0;4>R;++R)for(x=0;4>x;++x)ci(C,M,x,R,f)}function Co(f,x,C,M){f[x+0]&&On(f,x+0,C,M),f[x+16]&&On(f,x+16,C,M+4),f[x+32]&&On(f,x+32,C,M+128),f[x+48]&&On(f,x+48,C,M+128+4)}function ua(f,x,C,M){var R,N=u(16);for(R=0;4>R;++R){var z=f[x+0+R]+f[x+12+R],G=f[x+4+R]+f[x+8+R],X=f[x+4+R]-f[x+8+R],re=f[x+0+R]-f[x+12+R];N[0+R]=z+G,N[8+R]=z-G,N[4+R]=re+X,N[12+R]=re-X}for(R=0;4>R;++R)z=(f=N[0+4*R]+3)+N[3+4*R],G=N[1+4*R]+N[2+4*R],X=N[1+4*R]-N[2+4*R],re=f-N[3+4*R],C[M+0]=z+G>>3,C[M+16]=re+X>>3,C[M+32]=z-G>>3,C[M+48]=re-X>>3,M+=64}function So(f,x,C){var M,R=x-32,N=ls,z=255-f[R-1];for(M=0;M<C;++M){var G,X=N,re=z+f[x-1];for(G=0;G<C;++G)f[x+G]=X[re+f[R+G]];x+=32}}function Fo(f,x){So(f,x,4)}function Kl(f,x){So(f,x,8)}function Oc(f,x){So(f,x,16)}function Ws(f,x){var C;for(C=0;16>C;++C)s(f,x+32*C,f,x-32,16)}function qa(f,x){var C;for(C=16;0<C;--C)l(f,x,f[x-1],16),x+=32}function Eo(f,x,C){var M;for(M=0;16>M;++M)l(x,C+32*M,f,16)}function $l(f,x){var C,M=16;for(C=0;16>C;++C)M+=f[x-1+32*C]+f[x+C-32];Eo(M>>5,f,x)}function gn(f,x){var C,M=8;for(C=0;16>C;++C)M+=f[x-1+32*C];Eo(M>>4,f,x)}function Wl(f,x){var C,M=8;for(C=0;16>C;++C)M+=f[x+C-32];Eo(M>>4,f,x)}function Io(f,x){Eo(128,f,x)}function Ur(f,x,C){return f+2*x+C+2>>2}function Xl(f,x){var C,M=x-32;for(M=new Uint8Array([Ur(f[M-1],f[M+0],f[M+1]),Ur(f[M+0],f[M+1],f[M+2]),Ur(f[M+1],f[M+2],f[M+3]),Ur(f[M+2],f[M+3],f[M+4])]),C=0;4>C;++C)s(f,x+32*C,M,0,M.length)}function rl(f,x){var C=f[x-1],M=f[x-1+32],R=f[x-1+64],N=f[x-1+96];Ct(f,x+0,16843009*Ur(f[x-1-32],C,M)),Ct(f,x+32,16843009*Ur(C,M,R)),Ct(f,x+64,16843009*Ur(M,R,N)),Ct(f,x+96,16843009*Ur(R,N,N))}function Fs(f,x){var C,M=4;for(C=0;4>C;++C)M+=f[x+C-32]+f[x-1+32*C];for(M>>=3,C=0;4>C;++C)l(f,x+32*C,M,4)}function ha(f,x){var C=f[x-1+0],M=f[x-1+32],R=f[x-1+64],N=f[x-1-32],z=f[x+0-32],G=f[x+1-32],X=f[x+2-32],re=f[x+3-32];f[x+0+96]=Ur(M,R,f[x-1+96]),f[x+1+96]=f[x+0+64]=Ur(C,M,R),f[x+2+96]=f[x+1+64]=f[x+0+32]=Ur(N,C,M),f[x+3+96]=f[x+2+64]=f[x+1+32]=f[x+0+0]=Ur(z,N,C),f[x+3+64]=f[x+2+32]=f[x+1+0]=Ur(G,z,N),f[x+3+32]=f[x+2+0]=Ur(X,G,z),f[x+3+0]=Ur(re,X,G)}function Lo(f,x){var C=f[x+1-32],M=f[x+2-32],R=f[x+3-32],N=f[x+4-32],z=f[x+5-32],G=f[x+6-32],X=f[x+7-32];f[x+0+0]=Ur(f[x+0-32],C,M),f[x+1+0]=f[x+0+32]=Ur(C,M,R),f[x+2+0]=f[x+1+32]=f[x+0+64]=Ur(M,R,N),f[x+3+0]=f[x+2+32]=f[x+1+64]=f[x+0+96]=Ur(R,N,z),f[x+3+32]=f[x+2+64]=f[x+1+96]=Ur(N,z,G),f[x+3+64]=f[x+2+96]=Ur(z,G,X),f[x+3+96]=Ur(G,X,X)}function mn(f,x){var C=f[x-1+0],M=f[x-1+32],R=f[x-1+64],N=f[x-1-32],z=f[x+0-32],G=f[x+1-32],X=f[x+2-32],re=f[x+3-32];f[x+0+0]=f[x+1+64]=N+z+1>>1,f[x+1+0]=f[x+2+64]=z+G+1>>1,f[x+2+0]=f[x+3+64]=G+X+1>>1,f[x+3+0]=X+re+1>>1,f[x+0+96]=Ur(R,M,C),f[x+0+64]=Ur(M,C,N),f[x+0+32]=f[x+1+96]=Ur(C,N,z),f[x+1+32]=f[x+2+96]=Ur(N,z,G),f[x+2+32]=f[x+3+96]=Ur(z,G,X),f[x+3+32]=Ur(G,X,re)}function Ka(f,x){var C=f[x+0-32],M=f[x+1-32],R=f[x+2-32],N=f[x+3-32],z=f[x+4-32],G=f[x+5-32],X=f[x+6-32],re=f[x+7-32];f[x+0+0]=C+M+1>>1,f[x+1+0]=f[x+0+64]=M+R+1>>1,f[x+2+0]=f[x+1+64]=R+N+1>>1,f[x+3+0]=f[x+2+64]=N+z+1>>1,f[x+0+32]=Ur(C,M,R),f[x+1+32]=f[x+0+96]=Ur(M,R,N),f[x+2+32]=f[x+1+96]=Ur(R,N,z),f[x+3+32]=f[x+2+96]=Ur(N,z,G),f[x+3+64]=Ur(z,G,X),f[x+3+96]=Ur(G,X,re)}function mA(f,x){var C=f[x-1+0],M=f[x-1+32],R=f[x-1+64],N=f[x-1+96];f[x+0+0]=C+M+1>>1,f[x+2+0]=f[x+0+32]=M+R+1>>1,f[x+2+32]=f[x+0+64]=R+N+1>>1,f[x+1+0]=Ur(C,M,R),f[x+3+0]=f[x+1+32]=Ur(M,R,N),f[x+3+32]=f[x+1+64]=Ur(R,N,N),f[x+3+64]=f[x+2+64]=f[x+0+96]=f[x+1+96]=f[x+2+96]=f[x+3+96]=N}function To(f,x){var C=f[x-1+0],M=f[x-1+32],R=f[x-1+64],N=f[x-1+96],z=f[x-1-32],G=f[x+0-32],X=f[x+1-32],re=f[x+2-32];f[x+0+0]=f[x+2+32]=C+z+1>>1,f[x+0+32]=f[x+2+64]=M+C+1>>1,f[x+0+64]=f[x+2+96]=R+M+1>>1,f[x+0+96]=N+R+1>>1,f[x+3+0]=Ur(G,X,re),f[x+2+0]=Ur(z,G,X),f[x+1+0]=f[x+3+32]=Ur(C,z,G),f[x+1+32]=f[x+3+64]=Ur(M,C,z),f[x+1+64]=f[x+3+96]=Ur(R,M,C),f[x+1+96]=Ur(N,R,M)}function yA(f,x){var C;for(C=0;8>C;++C)s(f,x+32*C,f,x-32,8)}function pa(f,x){var C;for(C=0;8>C;++C)l(f,x,f[x-1],8),x+=32}function $n(f,x,C){var M;for(M=0;8>M;++M)l(x,C+32*M,f,8)}function Mr(f,x){var C,M=8;for(C=0;8>C;++C)M+=f[x+C-32]+f[x-1+32*C];$n(M>>4,f,x)}function vA(f,x){var C,M=4;for(C=0;8>C;++C)M+=f[x+C-32];$n(M>>3,f,x)}function Zi(f,x){var C,M=4;for(C=0;8>C;++C)M+=f[x-1+32*C];$n(M>>3,f,x)}function yn(f,x){$n(128,f,x)}function $a(f,x,C){var M=f[x-C],R=f[x+0],N=3*(R-M)+ll[1020+f[x-2*C]-f[x+C]],z=EA[112+(N+4>>3)];f[x-C]=ls[255+M+EA[112+(N+3>>3)]],f[x+0]=ls[255+R-z]}function Uo(f,x,C,M){var R=f[x+0],N=f[x+C];return Jn[255+f[x-2*C]-f[x-C]]>M||Jn[255+N-R]>M}function Po(f,x,C,M){return 4*Jn[255+f[x-C]-f[x+0]]+Jn[255+f[x-2*C]-f[x+C]]<=M}function _A(f,x,C,M,R){var N=f[x-3*C],z=f[x-2*C],G=f[x-C],X=f[x+0],re=f[x+C],de=f[x+2*C],we=f[x+3*C];return 4*Jn[255+G-X]+Jn[255+z-re]>M?0:Jn[255+f[x-4*C]-N]<=R&&Jn[255+N-z]<=R&&Jn[255+z-G]<=R&&Jn[255+we-de]<=R&&Jn[255+de-re]<=R&&Jn[255+re-X]<=R}function wA(f,x,C,M){var R=2*M+1;for(M=0;16>M;++M)Po(f,x+M,C,R)&&$a(f,x+M,C)}function Es(f,x,C,M){var R=2*M+1;for(M=0;16>M;++M)Po(f,x+M*C,1,R)&&$a(f,x+M*C,1)}function da(f,x,C,M){var R;for(R=3;0<R;--R)wA(f,x+=4*C,C,M)}function il(f,x,C,M){var R;for(R=3;0<R;--R)Es(f,x+=4,C,M)}function Xs(f,x,C,M,R,N,z,G){for(N=2*N+1;0<R--;){if(_A(f,x,C,N,z))if(Uo(f,x,C,G))$a(f,x,C);else{var X=f,re=x,de=C,we=X[re-2*de],Ie=X[re-de],Pe=X[re+0],ut=X[re+de],He=X[re+2*de],Se=27*(dt=ll[1020+3*(Pe-Ie)+ll[1020+we-ut]])+63>>7,Fe=18*dt+63>>7,dt=9*dt+63>>7;X[re-3*de]=ls[255+X[re-3*de]+dt],X[re-2*de]=ls[255+we+Fe],X[re-de]=ls[255+Ie+Se],X[re+0]=ls[255+Pe-Se],X[re+de]=ls[255+ut-Fe],X[re+2*de]=ls[255+He-dt]}x+=M}}function Is(f,x,C,M,R,N,z,G){for(N=2*N+1;0<R--;){if(_A(f,x,C,N,z))if(Uo(f,x,C,G))$a(f,x,C);else{var X=f,re=x,de=C,we=X[re-de],Ie=X[re+0],Pe=X[re+de],ut=EA[112+((He=3*(Ie-we))+4>>3)],He=EA[112+(He+3>>3)],Se=ut+1>>1;X[re-2*de]=ls[255+X[re-2*de]+Se],X[re-de]=ls[255+we+He],X[re+0]=ls[255+Ie-ut],X[re+de]=ls[255+Pe-Se]}x+=M}}function bA(f,x,C,M,R,N){Xs(f,x,C,1,16,M,R,N)}function Ls(f,x,C,M,R,N){Xs(f,x,1,C,16,M,R,N)}function Rc(f,x,C,M,R,N){var z;for(z=3;0<z;--z)Is(f,x+=4*C,C,1,16,M,R,N)}function xA(f,x,C,M,R,N){var z;for(z=3;0<z;--z)Is(f,x+=4,1,C,16,M,R,N)}function zc(f,x,C,M,R,N,z,G){Xs(f,x,R,1,8,N,z,G),Xs(C,M,R,1,8,N,z,G)}function nl(f,x,C,M,R,N,z,G){Xs(f,x,1,R,8,N,z,G),Xs(C,M,1,R,8,N,z,G)}function sl(f,x,C,M,R,N,z,G){Is(f,x+4*R,R,1,8,N,z,G),Is(C,M+4*R,R,1,8,N,z,G)}function Zl(f,x,C,M,R,N,z,G){Is(f,x+4,1,R,8,N,z,G),Is(C,M+4,1,R,8,N,z,G)}function Wa(){this.ba=new bi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new $r,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Xa(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Qo(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function BA(){this.ua=0,this.Wa=new Ue,this.vb=new Ue,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new _e,this.yc=new Ae}function Za(){this.xb=this.a=0,this.l=new dA,this.ca=new bi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ee,this.Pb=0,this.wd=new ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new BA,this.ab=0,this.gc=p(4,Qo),this.Oc=0}function Mo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new dA,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ya(f,x,C,M,R,N,z){for(f=f==null?0:f[x+0],x=0;x<z;++x)R[N+x]=f+C[M+x]&255,f=R[N+x]}function ko(f,x,C,M,R,N,z){var G;if(f==null)Ya(null,null,C,M,R,N,z);else for(G=0;G<z;++G)R[N+G]=f[x+G]+C[M+G]&255}function Wn(f,x,C,M,R,N,z){if(f==null)Ya(null,null,C,M,R,N,z);else{var G,X=f[x+0],re=X,de=X;for(G=0;G<z;++G)re=de+(X=f[x+G])-re,de=C[M+G]+(-256&re?0>re?0:255:re)&255,re=X,R[N+G]=de}}function CA(f,x,C,M){var R=x.width,N=x.o;if(e(f!=null&&x!=null),0>C||0>=M||C+M>N)return null;if(!f.Cc){if(f.ga==null){var z;if(f.ga=new Mo,(z=f.ga==null)||(z=x.width*x.o,e(f.Gb.length==0),f.Gb=u(z),f.Uc=0,f.Gb==null?z=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,z=1),z=!z),!z){z=f.ga;var G=f.Fa,X=f.P,re=f.qc,de=f.mb,we=f.nb,Ie=X+1,Pe=re-1,ut=z.l;if(e(G!=null&&de!=null&&x!=null),es[0]=null,es[1]=Ya,es[2]=ko,es[3]=Wn,z.ca=de,z.tb=we,z.c=x.width,z.i=x.height,e(0<z.c&&0<z.i),1>=re)x=0;else if(z.$a=G[X+0]>>0&3,z.Z=G[X+0]>>2&3,z.Lc=G[X+0]>>4&3,X=G[X+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||X)x=0;else if(ut.put=ve,ut.ac=le,ut.bc=be,ut.ma=z,ut.width=x.width,ut.height=x.height,ut.Da=x.Da,ut.v=x.v,ut.va=x.va,ut.j=x.j,ut.o=x.o,z.$a)e:{e(z.$a==1),x=Rr();t:for(;;){if(x==null){x=0;break e}if(e(z!=null),z.mc=x,x.c=z.c,x.i=z.i,x.l=z.l,x.l.ma=z,x.l.width=z.c,x.l.height=z.i,x.a=0,Ye(x.m,G,Ie,Pe),!Sr(z.c,z.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&sr(x.s)?(z.ic=1,G=x.c*x.i,x.Ta=null,x.Ua=0,x.V=u(G),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(z.ic=0,x=Le(x,z.c)),!x))break t;x=1;break e}z.mc=null,x=0}else x=Pe>=z.c*z.i;z=!x}if(z)return null;f.ga.Lc!=1?f.Ga=0:M=N-C}e(f.ga!=null),e(C+M<=N);e:{if(x=(G=f.ga).c,N=G.l.o,G.$a==0){if(Ie=f.rc,Pe=f.Vc,ut=f.Fa,X=f.P+1+C*x,re=f.mb,de=f.nb+C*x,e(X<=f.P+f.qc),G.Z!=0)for(e(es[G.Z]!=null),z=0;z<M;++z)es[G.Z](Ie,Pe,ut,X,re,de,x),Ie=re,Pe=de,de+=x,X+=x;else for(z=0;z<M;++z)s(re,de,ut,X,x),Ie=re,Pe=de,de+=x,X+=x;f.rc=Ie,f.Vc=Pe}else{if(e(G.mc!=null),x=C+M,e((z=G.mc)!=null),e(x<=z.i),z.C>=x)x=1;else if(G.ic||Ke(),G.ic){G=z.V,Ie=z.Ba,Pe=z.c;var He=z.i,Se=(ut=1,X=z.$/Pe,re=z.$%Pe,de=z.m,we=z.s,z.$),Fe=Pe*He,dt=Pe*x,pt=we.wc,at=Se<dt?ht(we,re,X):null;e(Se<=Fe),e(x<=He),e(sr(we));t:for(;;){for(;!de.h&&Se<dt;){if(re&pt||(at=ht(we,re,X)),e(at!=null),Ge(de),256>(He=Ve(at.G[0],at.H[0],de)))G[Ie+Se]=He,++Se,++re>=Pe&&(re=0,++X<=x&&!(X%16)&&Yt(z,X));else{if(!(280>He)){ut=0;break t}He=Oe(He-256,de);var _t,Et=Ve(at.G[4],at.H[4],de);if(Ge(de),!(Se>=(Et=Te(Pe,Et=Oe(Et,de)))&&Fe-Se>=He)){ut=0;break t}for(_t=0;_t<He;++_t)G[Ie+Se+_t]=G[Ie+Se+_t-Et];for(Se+=He,re+=He;re>=Pe;)re-=Pe,++X<=x&&!(X%16)&&Yt(z,X);Se<dt&&re&pt&&(at=ht(we,re,X))}e(de.h==ye(de))}Yt(z,X>x?x:X);break t}!ut||de.h&&Se<Fe?(ut=0,z.a=de.h?5:3):z.$=Se,x=ut}else x=ur(z,z.V,z.Ba,z.c,z.i,x,Mt);if(!x){M=0;break e}}C+M>=N&&(f.Cc=1),M=1}if(!M)return null;if(f.Cc&&((M=f.ga)!=null&&(M.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+C*R}function P(f,x,C,M,R,N){for(;0<R--;){var z,G=f,X=x+(C?1:0),re=f,de=x+(C?0:3);for(z=0;z<M;++z){var we=re[de+4*z];we!=255&&(we*=32897,G[X+4*z+0]=G[X+4*z+0]*we>>23,G[X+4*z+1]=G[X+4*z+1]*we>>23,G[X+4*z+2]=G[X+4*z+2]*we>>23)}x+=N}}function J(f,x,C,M,R){for(;0<M--;){var N;for(N=0;N<C;++N){var z=f[x+2*N+0],G=15&(re=f[x+2*N+1]),X=4369*G,re=(240&re|re>>4)*X>>16;f[x+2*N+0]=(240&z|z>>4)*X>>16&240|(15&z|z<<4)*X>>16>>4&15,f[x+2*N+1]=240&re|G}x+=R}}function Ce(f,x,C,M,R,N,z,G){var X,re,de=255;for(re=0;re<R;++re){for(X=0;X<M;++X){var we=f[x+X];N[z+4*X]=we,de&=we}x+=C,z+=G}return de!=255}function qe(f,x,C,M,R){var N;for(N=0;N<R;++N)C[M+N]=f[x+N]>>8}function Ke(){Ys=P,Js=J,Ps=Ce,Xt=qe}function ct(f,x,C){ge[f]=function(M,R,N,z,G,X,re,de,we,Ie,Pe,ut,He,Se,Fe,dt,pt){var at,_t=pt-1>>1,Et=G[X+0]|re[de+0]<<16,Wt=we[Ie+0]|Pe[ut+0]<<16;e(M!=null);var kt=3*Et+Wt+131074>>2;for(x(M[R+0],255&kt,kt>>16,He,Se),N!=null&&(kt=3*Wt+Et+131074>>2,x(N[z+0],255&kt,kt>>16,Fe,dt)),at=1;at<=_t;++at){var Fr=G[X+at]|re[de+at]<<16,Er=we[Ie+at]|Pe[ut+at]<<16,kr=Et+Fr+Wt+Er+524296,pr=kr+2*(Fr+Wt)>>3;kt=pr+Et>>1,Et=(kr=kr+2*(Et+Er)>>3)+Fr>>1,x(M[R+2*at-1],255&kt,kt>>16,He,Se+(2*at-1)*C),x(M[R+2*at-0],255&Et,Et>>16,He,Se+(2*at-0)*C),N!=null&&(kt=kr+Wt>>1,Et=pr+Er>>1,x(N[z+2*at-1],255&kt,kt>>16,Fe,dt+(2*at-1)*C),x(N[z+2*at+0],255&Et,Et>>16,Fe,dt+(2*at+0)*C)),Et=Fr,Wt=Er}1&pt||(kt=3*Et+Wt+131074>>2,x(M[R+pt-1],255&kt,kt>>16,He,Se+(pt-1)*C),N!=null&&(kt=3*Wt+Et+131074>>2,x(N[z+pt-1],255&kt,kt>>16,Fe,dt+(pt-1)*C)))}}function Tt(){Ai[cl]=Ui,Ai[ul]=UA,Ai[Vc]=TA,Ai[Jl]=PA,Ai[IA]=io,Ai[hl]=sc,Ai[ec]=$c,Ai[pl]=UA,Ai[Qn]=PA,Ai[ea]=io,Ai[Vo]=sc}function wt(f){return f&~i?0>f?0:255:f>>v}function mr(f,x){return wt((19077*f>>8)+(26149*x>>8)-14234)}function ar(f,x,C){return wt((19077*f>>8)-(6419*x>>8)-(13320*C>>8)+8708)}function cr(f,x){return wt((19077*f>>8)+(33050*x>>8)-17685)}function Kr(f,x,C,M,R){M[R+0]=mr(f,C),M[R+1]=ar(f,x,C),M[R+2]=cr(f,x)}function Li(f,x,C,M,R){M[R+0]=cr(f,x),M[R+1]=ar(f,x,C),M[R+2]=mr(f,C)}function ki(f,x,C,M,R){var N=ar(f,x,C);x=N<<3&224|cr(f,x)>>3,M[R+0]=248&mr(f,C)|N>>5,M[R+1]=x}function Di(f,x,C,M,R){var N=240&cr(f,x)|15;M[R+0]=240&mr(f,C)|ar(f,x,C)>>4,M[R+1]=N}function Yi(f,x,C,M,R){M[R+0]=255,Kr(f,x,C,M,R+1)}function qi(f,x,C,M,R){Li(f,x,C,M,R),M[R+3]=255}function Xn(f,x,C,M,R){Kr(f,x,C,M,R),M[R+3]=255}function Zn(f,x){return 0>f?0:f>x?x:f}function As(f,x,C){ge[f]=function(M,R,N,z,G,X,re,de,we){for(var Ie=de+(-2&we)*C;de!=Ie;)x(M[R+0],N[z+0],G[X+0],re,de),x(M[R+1],N[z+0],G[X+0],re,de+C),R+=2,++z,++X,de+=2*C;1&we&&x(M[R+0],N[z+0],G[X+0],re,de)}}function Ja(f,x,C){return C==0?f==0?x==0?6:5:x==0?4:0:C}function Ta(f,x,C,M,R){switch(f>>>30){case 3:Nn(x,C,M,R,0);break;case 2:Qa(x,C,M,R);break;case 1:On(x,C,M,R)}}function al(f,x){var C,M,R=x.M,N=x.Nb,z=f.oc,G=f.pc+40,X=f.oc,re=f.pc+584,de=f.oc,we=f.pc+600;for(C=0;16>C;++C)z[G+32*C-1]=129;for(C=0;8>C;++C)X[re+32*C-1]=129,de[we+32*C-1]=129;for(0<R?z[G-1-32]=X[re-1-32]=de[we-1-32]=129:(l(z,G-32-1,127,21),l(X,re-32-1,127,9),l(de,we-32-1,127,9)),M=0;M<f.za;++M){var Ie=x.ya[x.aa+M];if(0<M){for(C=-1;16>C;++C)s(z,G+32*C-4,z,G+32*C+12,4);for(C=-1;8>C;++C)s(X,re+32*C-4,X,re+32*C+4,4),s(de,we+32*C-4,de,we+32*C+4,4)}var Pe=f.Gd,ut=f.Hd+M,He=Ie.ad,Se=Ie.Hc;if(0<R&&(s(z,G-32,Pe[ut].y,0,16),s(X,re-32,Pe[ut].f,0,8),s(de,we-32,Pe[ut].ea,0,8)),Ie.Za){var Fe=z,dt=G-32+16;for(0<R&&(M>=f.za-1?l(Fe,dt,Pe[ut].y[15],4):s(Fe,dt,Pe[ut+1].y,0,4)),C=0;4>C;C++)Fe[dt+128+C]=Fe[dt+256+C]=Fe[dt+384+C]=Fe[dt+0+C];for(C=0;16>C;++C,Se<<=2)Fe=z,dt=G+O[C],ui[Ie.Ob[C]](Fe,dt),Ta(Se,He,16*+C,Fe,dt)}else if(Fe=Ja(M,R,Ie.Ob[0]),wa[Fe](z,G),Se!=0)for(C=0;16>C;++C,Se<<=2)Ta(Se,He,16*+C,z,G+O[C]);for(C=Ie.Gc,Fe=Ja(M,R,Ie.Dd),ta[Fe](X,re),ta[Fe](de,we),Se=He,Fe=X,dt=re,255&(Ie=C>>0)&&(170&Ie?Ki(Se,256,Fe,dt):va(Se,256,Fe,dt)),Ie=de,Se=we,255&(C>>=8)&&(170&C?Ki(He,320,Ie,Se):va(He,320,Ie,Se)),R<f.Ub-1&&(s(Pe[ut].y,0,z,G+480,16),s(Pe[ut].f,0,X,re+224,8),s(Pe[ut].ea,0,de,we+224,8)),C=8*N*f.B,Pe=f.sa,ut=f.ta+16*M+16*N*f.R,He=f.qa,Ie=f.ra+8*M+C,Se=f.Ha,Fe=f.Ia+8*M+C,C=0;16>C;++C)s(Pe,ut+C*f.R,z,G+32*C,16);for(C=0;8>C;++C)s(He,Ie+C*f.B,X,re+32*C,8),s(Se,Fe+C*f.B,de,we+32*C,8)}}function eo(f,x,C,M,R,N,z,G,X){var re=[0],de=[0],we=0,Ie=X!=null?X.kd:0,Pe=X??new Xa;if(f==null||12>C)return 7;Pe.data=f,Pe.w=x,Pe.ha=C,x=[x],C=[C],Pe.gb=[Pe.gb];e:{var ut=x,He=C,Se=Pe.gb;if(e(f!=null),e(He!=null),e(Se!=null),Se[0]=0,12<=He[0]&&!t(f,ut[0],"RIFF")){if(t(f,ut[0]+8,"WEBP")){Se=3;break e}var Fe=Vt(f,ut[0]+4);if(12>Fe||4294967286<Fe){Se=3;break e}if(Ie&&Fe>He[0]-8){Se=7;break e}Se[0]=Fe,ut[0]+=12,He[0]-=12}Se=0}if(Se!=0)return Se;for(Fe=0<Pe.gb[0],C=C[0];;){e:{var dt=f;He=x,Se=C;var pt=re,at=de,_t=ut=[0];if((kt=we=[we])[0]=0,8>Se[0])Se=7;else{if(!t(dt,He[0],"VP8X")){if(Vt(dt,He[0]+4)!=10){Se=3;break e}if(18>Se[0]){Se=7;break e}var Et=Vt(dt,He[0]+8),Wt=1+zt(dt,He[0]+12);if(2147483648<=Wt*(dt=1+zt(dt,He[0]+15))){Se=3;break e}_t!=null&&(_t[0]=Et),pt!=null&&(pt[0]=Wt),at!=null&&(at[0]=dt),He[0]+=18,Se[0]-=18,kt[0]=1}Se=0}}if(we=we[0],ut=ut[0],Se!=0)return Se;if(He=!!(2&ut),!Fe&&we)return 3;if(N!=null&&(N[0]=!!(16&ut)),z!=null&&(z[0]=He),G!=null&&(G[0]=0),z=re[0],ut=de[0],we&&He&&X==null){Se=0;break}if(4>C){Se=7;break}if(Fe&&we||!Fe&&!we&&!t(f,x[0],"ALPH")){C=[C],Pe.na=[Pe.na],Pe.P=[Pe.P],Pe.Sa=[Pe.Sa];e:{Et=f,Se=x,Fe=C;var kt=Pe.gb;pt=Pe.na,at=Pe.P,_t=Pe.Sa,Wt=22,e(Et!=null),e(Fe!=null),dt=Se[0];var Fr=Fe[0];for(e(pt!=null),e(_t!=null),pt[0]=null,at[0]=null,_t[0]=0;;){if(Se[0]=dt,Fe[0]=Fr,8>Fr){Se=7;break e}var Er=Vt(Et,dt+4);if(4294967286<Er){Se=3;break e}var kr=8+Er+1&-2;if(Wt+=kr,0<kt&&Wt>kt){Se=3;break e}if(!t(Et,dt,"VP8 ")||!t(Et,dt,"VP8L")){Se=0;break e}if(Fr[0]<kr){Se=7;break e}t(Et,dt,"ALPH")||(pt[0]=Et,at[0]=dt+8,_t[0]=Er),dt+=kr,Fr-=kr}}if(C=C[0],Pe.na=Pe.na[0],Pe.P=Pe.P[0],Pe.Sa=Pe.Sa[0],Se!=0)break}C=[C],Pe.Ja=[Pe.Ja],Pe.xa=[Pe.xa];e:if(kt=f,Se=x,Fe=C,pt=Pe.gb[0],at=Pe.Ja,_t=Pe.xa,Et=Se[0],dt=!t(kt,Et,"VP8 "),Wt=!t(kt,Et,"VP8L"),e(kt!=null),e(Fe!=null),e(at!=null),e(_t!=null),8>Fe[0])Se=7;else{if(dt||Wt){if(kt=Vt(kt,Et+4),12<=pt&&kt>pt-12){Se=3;break e}if(Ie&&kt>Fe[0]-8){Se=7;break e}at[0]=kt,Se[0]+=8,Fe[0]-=8,_t[0]=Wt}else _t[0]=5<=Fe[0]&&kt[Et+0]==47&&!(kt[Et+4]>>5),at[0]=Fe[0];Se=0}if(C=C[0],Pe.Ja=Pe.Ja[0],Pe.xa=Pe.xa[0],x=x[0],Se!=0)break;if(4294967286<Pe.Ja)return 3;if(G==null||He||(G[0]=Pe.xa?2:1),z=[z],ut=[ut],Pe.xa){if(5>C){Se=7;break}G=z,Ie=ut,He=N,f==null||5>C?f=0:5<=C&&f[x+0]==47&&!(f[x+4]>>5)?(Fe=[0],kt=[0],pt=[0],Ye(at=new ee,f,x,C),ke(at,Fe,kt,pt)?(G!=null&&(G[0]=Fe[0]),Ie!=null&&(Ie[0]=kt[0]),He!=null&&(He[0]=pt[0]),f=1):f=0):f=0}else{if(10>C){Se=7;break}G=ut,f==null||10>C||!xo(f,x+3,C-3)?f=0:(Ie=f[x+0]|f[x+1]<<8|f[x+2]<<16,He=16383&(f[x+7]<<8|f[x+6]),f=16383&(f[x+9]<<8|f[x+8]),1&Ie||3<(Ie>>1&7)||!(Ie>>4&1)||Ie>>5>=Pe.Ja||!He||!f?f=0:(z&&(z[0]=He),G&&(G[0]=f),f=1))}if(!f||(z=z[0],ut=ut[0],we&&(re[0]!=z||de[0]!=ut)))return 3;X!=null&&(X[0]=Pe,X.offset=x-X.w,e(4294967286>x-X.w),e(X.offset==X.ha-C));break}return Se==0||Se==7&&we&&X==null?(N!=null&&(N[0]|=Pe.na!=null&&0<Pe.na.length),M!=null&&(M[0]=z),R!=null&&(R[0]=ut),0):Se}function ol(f,x,C){var M=x.width,R=x.height,N=0,z=0,G=M,X=R;if(x.Da=f!=null&&0<f.Da,x.Da&&(G=f.cd,X=f.bd,N=f.v,z=f.j,11>C||(N&=-2,z&=-2),0>N||0>z||0>=G||0>=X||N+G>M||z+X>R))return 0;if(x.v=N,x.j=z,x.va=N+G,x.o=z+X,x.U=G,x.T=X,x.da=f!=null&&0<f.da,x.da){if(!fr(G,X,C=[f.ib],N=[f.hb]))return 0;x.ib=C[0],x.hb=N[0]}return x.ob=f!=null&&f.ob,x.Kb=f==null||!f.Sd,x.da&&(x.ob=x.ib<3*M/4&&x.hb<3*R/4,x.Kb=0),1}function SA(f){if(f==null)return 2;if(11>f.S){var x=f.f.RGBA;x.fb+=(f.height-1)*x.A,x.A=-x.A}else x=f.f.kb,f=f.height,x.O+=(f-1)*x.fa,x.fa=-x.fa,x.N+=(f-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(f-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(f-1)*x.lb,x.lb=-x.lb);return 0}function Ua(f,x,C,M){if(M==null||0>=f||0>=x)return 2;if(C!=null){if(C.Da){var R=C.cd,N=C.bd,z=-2&C.v,G=-2&C.j;if(0>z||0>G||0>=R||0>=N||z+R>f||G+N>x)return 2;f=R,x=N}if(C.da){if(!fr(f,x,R=[C.ib],N=[C.hb]))return 2;f=R[0],x=N[0]}}M.width=f,M.height=x;e:{var X=M.width,re=M.height;if(f=M.S,0>=X||0>=re||!(f>=cl&&13>f))f=2;else{if(0>=M.Rd&&M.sd==null){z=N=R=x=0;var de=(G=X*fe[f])*re;if(11>f||(N=(re+1)/2*(x=(X+1)/2),f==12&&(z=(R=X)*re)),(re=u(de+2*N+z))==null){f=1;break e}M.sd=re,11>f?((X=M.f.RGBA).eb=re,X.fb=0,X.A=G,X.size=de):((X=M.f.kb).y=re,X.O=0,X.fa=G,X.Fd=de,X.f=re,X.N=0+de,X.Ab=x,X.Cd=N,X.ea=re,X.W=0+de+N,X.Db=x,X.Ed=N,f==12&&(X.F=re,X.J=0+de+2*N),X.Tc=z,X.lb=R)}if(x=1,R=M.S,N=M.width,z=M.height,R>=cl&&13>R)if(11>R)f=M.f.RGBA,x&=(G=Math.abs(f.A))*(z-1)+N<=f.size,x&=G>=N*fe[R],x&=f.eb!=null;else{f=M.f.kb,G=(N+1)/2,de=(z+1)/2,X=Math.abs(f.fa),re=Math.abs(f.Ab);var we=Math.abs(f.Db),Ie=Math.abs(f.lb),Pe=Ie*(z-1)+N;x&=X*(z-1)+N<=f.Fd,x&=re*(de-1)+G<=f.Cd,x=(x&=we*(de-1)+G<=f.Ed)&X>=N&re>=G&we>=G,x&=f.y!=null,x&=f.f!=null,x&=f.ea!=null,R==12&&(x&=Ie>=N,x&=Pe<=f.Tc,x&=f.F!=null)}else x=0;f=x?0:2}}return f!=0||C!=null&&C.fd&&(f=SA(M)),f}var Ln=64,Do=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],No=24,fa=32,to=8,vn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ze("Predictor0","PredictorAdd0"),ge.Predictor0=function(){return 4278190080},ge.Predictor1=function(f){return f},ge.Predictor2=function(f,x,C){return x[C+0]},ge.Predictor3=function(f,x,C){return x[C+1]},ge.Predictor4=function(f,x,C){return x[C-1]},ge.Predictor5=function(f,x,C){return Pt(Pt(f,x[C+1]),x[C+0])},ge.Predictor6=function(f,x,C){return Pt(f,x[C-1])},ge.Predictor7=function(f,x,C){return Pt(f,x[C+0])},ge.Predictor8=function(f,x,C){return Pt(x[C-1],x[C+0])},ge.Predictor9=function(f,x,C){return Pt(x[C+0],x[C+1])},ge.Predictor10=function(f,x,C){return Pt(Pt(f,x[C-1]),Pt(x[C+0],x[C+1]))},ge.Predictor11=function(f,x,C){var M=x[C+0];return 0>=hr(M>>24&255,f>>24&255,(x=x[C-1])>>24&255)+hr(M>>16&255,f>>16&255,x>>16&255)+hr(M>>8&255,f>>8&255,x>>8&255)+hr(255&M,255&f,255&x)?M:f},ge.Predictor12=function(f,x,C){var M=x[C+0];return(Qt((f>>24&255)+(M>>24&255)-((x=x[C-1])>>24&255))<<24|Qt((f>>16&255)+(M>>16&255)-(x>>16&255))<<16|Qt((f>>8&255)+(M>>8&255)-(x>>8&255))<<8|Qt((255&f)+(255&M)-(255&x)))>>>0},ge.Predictor13=function(f,x,C){var M=x[C-1];return(Lt((f=Pt(f,x[C+0]))>>24&255,M>>24&255)<<24|Lt(f>>16&255,M>>16&255)<<16|Lt(f>>8&255,M>>8&255)<<8|Lt(f>>0&255,M>>0&255))>>>0};var Yl=ge.PredictorAdd0;ge.PredictorAdd1=wr,ze("Predictor2","PredictorAdd2"),ze("Predictor3","PredictorAdd3"),ze("Predictor4","PredictorAdd4"),ze("Predictor5","PredictorAdd5"),ze("Predictor6","PredictorAdd6"),ze("Predictor7","PredictorAdd7"),ze("Predictor8","PredictorAdd8"),ze("Predictor9","PredictorAdd9"),ze("Predictor10","PredictorAdd10"),ze("Predictor11","PredictorAdd11"),ze("Predictor12","PredictorAdd12"),ze("Predictor13","PredictorAdd13");var yi=ge.PredictorAdd2;br("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),br("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var ga,Ti=ge.ColorIndexInverseTransform,ma=ge.MapARGB,Oo=ge.VP8LColorIndexInverseTransformAlpha,FA=ge.MapAlpha,Yn=ge.VP8LPredictorsAdd=[];Yn.length=16,(ge.VP8LPredictors=[]).length=16,(ge.VP8LPredictorsAdd_C=[]).length=16,(ge.VP8LPredictors_C=[]).length=16;var Tn,Un,Pa,Zs,ya,Ro,Ts,Nn,Qa,Ki,On,va,ro,zo,Rn,Ma,Pn,$i,Us,ai,oi,Vi,ji,_a,Ys,Js,Ps,Xt,Al=u(511),ka=u(2041),Ho=u(225),Hc=u(767),Gt=0,ll=ka,EA=Ho,ls=Hc,Jn=Al,cl=0,ul=1,Vc=2,Jl=3,IA=4,hl=5,ec=6,pl=7,Qn=8,ea=9,Vo=10,jc=[2,3,7],dl=[3,3,11],tc=[280,256,256,256,40],Ku=[0,1,1,1,0],cs=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],xi=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],rc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Gc=8,ic=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],nc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],LA=null,up=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],zn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],fl=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ar=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],_r=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],gl=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],qc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],wa=[],ui=[],ta=[],Qs=1,Kc=2,es=[],Ai=[];ct("UpsampleRgbLinePair",Kr,3),ct("UpsampleBgrLinePair",Li,3),ct("UpsampleRgbaLinePair",Xn,4),ct("UpsampleBgraLinePair",qi,4),ct("UpsampleArgbLinePair",Yi,4),ct("UpsampleRgba4444LinePair",Di,2),ct("UpsampleRgb565LinePair",ki,2);var Ui=ge.UpsampleRgbLinePair,TA=ge.UpsampleBgrLinePair,UA=ge.UpsampleRgbaLinePair,PA=ge.UpsampleBgraLinePair,io=ge.UpsampleArgbLinePair,sc=ge.UpsampleRgba4444LinePair,$c=ge.UpsampleRgb565LinePair,Da=16,QA=1<<Da-1,jo=-227,ni=482,v=6,i=(256<<v)-1,c=0,d=u(256),y=u(256),b=u(256),E=u(256),L=u(ni-jo),k=u(ni-jo);As("YuvToRgbRow",Kr,3),As("YuvToBgrRow",Li,3),As("YuvToRgbaRow",Xn,4),As("YuvToBgraRow",qi,4),As("YuvToArgbRow",Yi,4),As("YuvToRgba4444Row",Di,2),As("YuvToRgb565Row",ki,2);var O=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],H=[0,2,8],$=[8,7,6,4,4,2,2,2,1,1,1,1],se=1;this.WebPDecodeRGBA=function(f,x,C,M,R){var N=ul,z=new Wa,G=new bi;z.ba=G,G.S=N,G.width=[G.width],G.height=[G.height];var X=G.width,re=G.height,de=new Nt;if(de==null||f==null)var we=2;else e(de!=null),we=eo(f,x,C,de.width,de.height,de.Pd,de.Qd,de.format,null);if(we!=0?X=0:(X!=null&&(X[0]=de.width[0]),re!=null&&(re[0]=de.height[0]),X=1),X){G.width=G.width[0],G.height=G.height[0],M!=null&&(M[0]=G.width),R!=null&&(R[0]=G.height);e:{if(M=new dA,(R=new Xa).data=f,R.w=x,R.ha=C,R.kd=1,x=[0],e(R!=null),((f=eo(R.data,R.w,R.ha,null,null,null,x,null,R))==0||f==7)&&x[0]&&(f=4),(x=f)==0){if(e(z!=null),M.data=R.data,M.w=R.w+R.offset,M.ha=R.ha-R.offset,M.put=ve,M.ac=le,M.bc=be,M.ma=z,R.xa){if((f=Rr())==null){z=1;break e}if(function(Ie,Pe){var ut=[0],He=[0],Se=[0];t:for(;;){if(Ie==null)return 0;if(Pe==null)return Ie.a=2,0;if(Ie.l=Pe,Ie.a=0,Ye(Ie.m,Pe.data,Pe.w,Pe.ha),!ke(Ie.m,ut,He,Se)){Ie.a=3;break t}if(Ie.xb=Kc,Pe.width=ut[0],Pe.height=He[0],!Sr(ut[0],He[0],1,Ie,null))break t;return 1}return e(Ie.a!=0),0}(f,M)){if(M=(x=Ua(M.width,M.height,z.Oa,z.ba))==0){t:{M=f;r:for(;;){if(M==null){M=0;break t}if(e(M.s.yc!=null),e(M.s.Ya!=null),e(0<M.s.Wb),e((C=M.l)!=null),e((R=C.ma)!=null),M.xb!=0){if(M.ca=R.ba,M.tb=R.tb,e(M.ca!=null),!ol(R.Oa,C,Jl)){M.a=2;break r}if(!Le(M,C.width)||C.da)break r;if((C.da||Kt(M.ca.S))&&Ke(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&Ke()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!Jt(M.s.vb,M.s.Wa.Xa)){M.a=1;break r}M.xb=0}if(!ur(M,M.V,M.Ba,M.c,M.i,C.o,nr))break r;R.Dc=M.Ma,M=1;break t}e(M.a!=0),M=0}M=!M}M&&(x=f.a)}else x=f.a}else{if((f=new Kn)==null){z=1;break e}if(f.Fa=R.na,f.P=R.P,f.qc=R.Sa,Ea(f,M)){if((x=Ua(M.width,M.height,z.Oa,z.ba))==0){if(f.Aa=0,C=z.Oa,e((R=f)!=null),C!=null){if(0<(X=0>(X=C.Md)?0:100<X?255:255*X/100)){for(re=de=0;4>re;++re)12>(we=R.pb[re]).lc&&(we.ia=X*$[0>we.lc?0:we.lc]>>3),de|=we.ia;de&&(alert("todo:VP8InitRandom"),R.ia=1)}R.Ga=C.Id,100<R.Ga?R.Ga=100:0>R.Ga&&(R.Ga=0)}Ia(f,M)||(x=f.a)}}else x=f.a}x==0&&z.Oa!=null&&z.Oa.fd&&(x=SA(z.ba))}z=x}N=z!=0?null:11>N?G.f.RGBA.eb:G.f.kb.y}else N=null;return N};var fe=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function w(ge,Ze){for(var $e="",ce=0;ce<4;ce++)$e+=String.fromCharCode(ge[Ze++]);return $e}function S(ge,Ze){return(ge[Ze+0]<<0|ge[Ze+1]<<8|ge[Ze+2]<<16)>>>0}function T(ge,Ze){return(ge[Ze+0]<<0|ge[Ze+1]<<8|ge[Ze+2]<<16|ge[Ze+3]<<24)>>>0}new m;var Q=[0],I=[0],q=[],j=new m,Y=n,K=function(ge,Ze){var $e={},ce=0,Ae=!1,xe=0,_e=0;if($e.frames=[],!function(pe,ye,Re,Ge){for(var tt=0;tt<Ge;tt++)if(pe[ye+tt]!=Re.charCodeAt(tt))return!0;return!1}(ge,Ze,"RIFF",4)){var et,Je;for(T(ge,Ze+=4),Ze+=8;Ze<ge.length;){var rt=w(ge,Ze),Ye=T(ge,Ze+=4);Ze+=4;var it=Ye+(1&Ye);switch(rt){case"VP8 ":case"VP8L":$e.frames[ce]===void 0&&($e.frames[ce]={}),(ee=$e.frames[ce]).src_off=Ae?_e:Ze-8,ee.src_size=xe+Ye+8,ce++,Ae&&(Ae=!1,xe=0,_e=0);break;case"VP8X":(ee=$e.header={}).feature_flags=ge[Ze];var nt=Ze+4;ee.canvas_width=1+S(ge,nt),nt+=3,ee.canvas_height=1+S(ge,nt),nt+=3;break;case"ALPH":Ae=!0,xe=it+8,_e=Ze-8;break;case"ANIM":(ee=$e.header).bgcolor=T(ge,Ze),nt=Ze+4,ee.loop_count=(et=ge)[(Je=nt)+0]<<0|et[Je+1]<<8,nt+=2;break;case"ANMF":var Bt,ee;(ee=$e.frames[ce]={}).offset_x=2*S(ge,Ze),Ze+=3,ee.offset_y=2*S(ge,Ze),Ze+=3,ee.width=1+S(ge,Ze),Ze+=3,ee.height=1+S(ge,Ze),Ze+=3,ee.duration=S(ge,Ze),Ze+=3,Bt=ge[Ze++],ee.dispose=1&Bt,ee.blend=Bt>>1&1}rt!="ANMF"&&(Ze+=it)}return $e}}(Y,0);K.response=Y,K.rgbaoutput=!0,K.dataurl=!1;var ne=K.header?K.header:null,he=K.frames?K.frames:null;if(ne){ne.loop_counter=ne.loop_count,Q=[ne.canvas_height],I=[ne.canvas_width];for(var Ee=0;Ee<he.length&&he[Ee].blend!=0;Ee++);}var De=he[0],Ne=j.WebPDecodeRGBA(Y,De.src_off,De.src_size,I,Q);De.rgba=Ne,De.imgwidth=I[0],De.imgheight=Q[0];for(var Qe=0;Qe<I[0]*Q[0]*4;Qe++)q[Qe]=Ne[Qe];return this.width=I,this.height=Q,this.data=q,this}(function(n){var e=function(){return typeof Bg=="function"},t=function(Q,I,q,j){var Y=4,K=p;switch(j){case n.image_compression.FAST:Y=1,K=u;break;case n.image_compression.MEDIUM:Y=6,K=a;break;case n.image_compression.SLOW:Y=9,K=m}Q=s(Q,I,q,K);var ne=Bg(Q,{level:Y});return n.__addimage__.arrayBufferToBinaryString(ne)},s=function(Q,I,q,j){for(var Y,K,ne,he=Q.length/I,Ee=new Uint8Array(Q.length+he),De=S(),Ne=0;Ne<he;Ne+=1){if(ne=Ne*I,Y=Q.subarray(ne,ne+I),j)Ee.set(j(Y,q,K),ne+Ne);else{for(var Qe,ge=De.length,Ze=[];Qe<ge;Qe+=1)Ze[Qe]=De[Qe](Y,q,K);var $e=T(Ze.concat());Ee.set(Ze[$e],ne+Ne)}K=Y}return Ee},l=function(Q){var I=Array.apply([],Q);return I.unshift(0),I},u=function(Q,I){var q,j=[],Y=Q.length;j[0]=1;for(var K=0;K<Y;K+=1)q=Q[K-I]||0,j[K+1]=Q[K]-q+256&255;return j},p=function(Q,I,q){var j,Y=[],K=Q.length;Y[0]=2;for(var ne=0;ne<K;ne+=1)j=q&&q[ne]||0,Y[ne+1]=Q[ne]-j+256&255;return Y},a=function(Q,I,q){var j,Y,K=[],ne=Q.length;K[0]=3;for(var he=0;he<ne;he+=1)j=Q[he-I]||0,Y=q&&q[he]||0,K[he+1]=Q[he]+256-(j+Y>>>1)&255;return K},m=function(Q,I,q){var j,Y,K,ne,he=[],Ee=Q.length;he[0]=4;for(var De=0;De<Ee;De+=1)j=Q[De-I]||0,Y=q&&q[De]||0,K=q&&q[De-I]||0,ne=w(j,Y,K),he[De+1]=Q[De]-ne+256&255;return he},w=function(Q,I,q){if(Q===I&&I===q)return Q;var j=Math.abs(I-q),Y=Math.abs(Q-q),K=Math.abs(Q+I-q-q);return j<=Y&&j<=K?Q:Y<=K?I:q},S=function(){return[l,u,p,a,m]},T=function(Q){var I=Q.map(function(q){return q.reduce(function(j,Y){return j+Math.abs(Y)},0)});return I.indexOf(Math.min.apply(null,I))};n.processPNG=function(Q,I,q,j){var Y,K,ne,he,Ee,De,Ne,Qe,ge,Ze,$e,ce,Ae,xe,_e,et=this.decode.FLATE_DECODE,Je="";if(this.__addimage__.isArrayBuffer(Q)&&(Q=new Uint8Array(Q)),this.__addimage__.isArrayBufferView(Q)){if(Q=(ne=new q4(Q)).imgData,K=ne.bits,Y=ne.colorSpace,Ee=ne.colors,[4,6].indexOf(ne.colorType)!==-1){if(ne.bits===8){ge=(Qe=ne.pixelBitlength==32?new Uint32Array(ne.decodePixels().buffer):ne.pixelBitlength==16?new Uint16Array(ne.decodePixels().buffer):new Uint8Array(ne.decodePixels().buffer)).length,$e=new Uint8Array(ge*ne.colors),Ze=new Uint8Array(ge);var rt,Ye=ne.pixelBitlength-ne.bits;for(xe=0,_e=0;xe<ge;xe++){for(Ae=Qe[xe],rt=0;rt<Ye;)$e[_e++]=Ae>>>rt&255,rt+=ne.bits;Ze[xe]=Ae>>>rt&255}}if(ne.bits===16){ge=(Qe=new Uint32Array(ne.decodePixels().buffer)).length,$e=new Uint8Array(ge*(32/ne.pixelBitlength)*ne.colors),Ze=new Uint8Array(ge*(32/ne.pixelBitlength)),ce=ne.colors>1,xe=0,_e=0;for(var it=0;xe<ge;)Ae=Qe[xe++],$e[_e++]=Ae>>>0&255,ce&&($e[_e++]=Ae>>>16&255,Ae=Qe[xe++],$e[_e++]=Ae>>>0&255),Ze[it++]=Ae>>>16&255;K=8}j!==n.image_compression.NONE&&e()?(Q=t($e,ne.width*ne.colors,ne.colors,j),Ne=t(Ze,ne.width,1,j)):(Q=$e,Ne=Ze,et=void 0)}if(ne.colorType===3&&(Y=this.color_spaces.INDEXED,De=ne.palette,ne.transparency.indexed)){var nt=ne.transparency.indexed,Bt=0;for(xe=0,ge=nt.length;xe<ge;++xe)Bt+=nt[xe];if((Bt/=255)===ge-1&&nt.indexOf(0)!==-1)he=[nt.indexOf(0)];else if(Bt!==ge){for(Qe=ne.decodePixels(),Ze=new Uint8Array(Qe.length),xe=0,ge=Qe.length;xe<ge;xe++)Ze[xe]=nt[Qe[xe]];Ne=t(Ze,ne.width,1)}}var ee=function(pe){var ye;switch(pe){case n.image_compression.FAST:ye=11;break;case n.image_compression.MEDIUM:ye=13;break;case n.image_compression.SLOW:ye=14;break;default:ye=12}return ye}(j);return et===this.decode.FLATE_DECODE&&(Je="/Predictor "+ee+" "),Je+="/Colors "+Ee+" /BitsPerComponent "+K+" /Columns "+ne.width,(this.__addimage__.isArrayBuffer(Q)||this.__addimage__.isArrayBufferView(Q))&&(Q=this.__addimage__.arrayBufferToBinaryString(Q)),(Ne&&this.__addimage__.isArrayBuffer(Ne)||this.__addimage__.isArrayBufferView(Ne))&&(Ne=this.__addimage__.arrayBufferToBinaryString(Ne)),{alias:q,data:Q,index:I,filter:et,decodeParameters:Je,transparency:he,palette:De,sMask:Ne,predictor:ee,width:ne.width,height:ne.height,bitsPerComponent:K,colorSpace:Y}}}})(Qr.API),function(n){n.processGIF89A=function(e,t,s,l){var u=new K4(e),p=u.width,a=u.height,m=[];u.decodeAndBlitFrameRGBA(0,m);var w={data:m,width:p,height:a},S=new kg(100).encode(w,100);return n.processJPEG.call(this,S,t,s,l)},n.processGIF87A=n.processGIF89A}(Qr.API),co.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:l,green:s,blue:t,quad:u}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},co.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Mi.log("bit decode error:"+t)}},co.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,l=0;l<e;l++)for(var u=this.datav.getUint8(this.pos++,!0),p=s*this.width*4+8*l*4,a=0;a<8&&8*l+a<this.width;a++){var m=this.palette[u>>7-a&1];this.data[p+4*a]=m.blue,this.data[p+4*a+1]=m.green,this.data[p+4*a+2]=m.red,this.data[p+4*a+3]=255}t!==0&&(this.pos+=4-t)}},co.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,l=0;l<n;l++){var u=this.datav.getUint8(this.pos++,!0),p=s*this.width*4+2*l*4,a=u>>4,m=15&u,w=this.palette[a];if(this.data[p]=w.blue,this.data[p+1]=w.green,this.data[p+2]=w.red,this.data[p+3]=255,2*l+1>=this.width)break;w=this.palette[m],this.data[p+4]=w.blue,this.data[p+4+1]=w.green,this.data[p+4+2]=w.red,this.data[p+4+3]=255}e!==0&&(this.pos+=4-e)}},co.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var l=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*s;if(l<this.palette.length){var p=this.palette[l];this.data[u]=p.red,this.data[u+1]=p.green,this.data[u+2]=p.blue,this.data[u+3]=255}else this.data[u]=255,this.data[u+1]=255,this.data[u+2]=255,this.data[u+3]=255}n!==0&&(this.pos+=4-n)}},co.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,l=0;l<this.width;l++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(u&e)/e*255|0,a=(u>>5&e)/e*255|0,m=(u>>10&e)/e*255|0,w=u>>15?255:0,S=s*this.width*4+4*l;this.data[S]=m,this.data[S+1]=a,this.data[S+2]=p,this.data[S+3]=w}this.pos+=n}},co.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var l=this.bottom_up?s:this.height-1-s,u=0;u<this.width;u++){var p=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(p&e)/e*255|0,m=(p>>5&t)/t*255|0,w=(p>>11)/e*255|0,S=l*this.width*4+4*u;this.data[S]=w,this.data[S+1]=m,this.data[S+2]=a,this.data[S+3]=255}this.pos+=n}},co.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),p=e*this.width*4+4*t;this.data[p]=u,this.data[p+1]=l,this.data[p+2]=s,this.data[p+3]=255}this.pos+=this.width%4}},co.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=u,this.data[a+1]=l,this.data[a+2]=s,this.data[a+3]=p}},co.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,s,l){var u=new co(e,!1),p=u.width,a=u.height,m={data:u.getData(),width:p,height:a},w=new kg(100).encode(m,100);return n.processJPEG.call(this,w,t,s,l)}}(Qr.API),Pv.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,s,l){var u=new Pv(e),p=u.width,a=u.height,m={data:u.getData(),width:p,height:a},w=new kg(100).encode(m,100);return n.processJPEG.call(this,w,t,s,l)}}(Qr.API),Qr.API.processRGBA=function(n,e,t){for(var s=n.data,l=s.length,u=new Uint8Array(l/4*3),p=new Uint8Array(l/4),a=0,m=0,w=0;w<l;w+=4){var S=s[w],T=s[w+1],Q=s[w+2],I=s[w+3];u[a++]=S,u[a++]=T,u[a++]=Q,p[m++]=I}var q=this.__addimage__.arrayBufferToBinaryString(u);return{alpha:this.__addimage__.arrayBufferToBinaryString(p),data:q,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Qr.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},pu=Qr.API,Kp=pu.getCharWidthsArray=function(n,e){var t,s,l=(e=e||{}).font||this.internal.getFont(),u=e.fontSize||this.internal.getFontSize(),p=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:l.metadata.Unicode.widths,m=a.fof?a.fof:1,w=e.kerning?e.kerning:l.metadata.Unicode.kerning,S=w.fof?w.fof:1,T=e.doKerning!==!1,Q=0,I=n.length,q=0,j=a[0]||m,Y=[];for(t=0;t<I;t++)s=n.charCodeAt(t),typeof l.metadata.widthOfString=="function"?Y.push((l.metadata.widthOfGlyph(l.metadata.characterToGlyph(s))+p*(1e3/u)||0)/1e3):(Q=T&&fi(w[s])==="object"&&!isNaN(parseInt(w[s][q],10))?w[s][q]/S:0,Y.push((a[s]||j)/m+Q)),q=s;return Y},Iv=pu.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),l=e.charSpace||this.internal.getCharSpace();return pu.processArabic&&(n=pu.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,t,l)/t:Kp.apply(this,arguments).reduce(function(u,p){return u+p},0)},Lv=function(n,e,t,s){for(var l=[],u=0,p=n.length,a=0;u!==p&&a+e[u]<t;)a+=e[u],u++;l.push(n.slice(0,u));var m=u;for(a=0;u!==p;)a+e[u]>s&&(l.push(n.slice(m,u)),a=0,m=u),a+=e[u],u++;return m!==u&&l.push(n.slice(m,u)),l},Tv=function(n,e,t){t||(t={});var s,l,u,p,a,m,w,S=[],T=[S],Q=t.textIndent||0,I=0,q=0,j=n.split(" "),Y=Kp.apply(this,[" ",t])[0];if(m=t.lineIndent===-1?j[0].length+2:t.lineIndent||0){var K=Array(m).join(" "),ne=[];j.map(function(Ee){(Ee=Ee.split(/\s*\n/)).length>1?ne=ne.concat(Ee.map(function(De,Ne){return(Ne&&De.length?`
`:"")+De})):ne.push(Ee[0])}),j=ne,m=Iv.apply(this,[K,t])}for(u=0,p=j.length;u<p;u++){var he=0;if(s=j[u],m&&s[0]==`
`&&(s=s.substr(1),he=1),Q+I+(q=(l=Kp.apply(this,[s,t])).reduce(function(Ee,De){return Ee+De},0))>e||he){if(q>e){for(a=Lv.apply(this,[s,l,e-(Q+I),e]),S.push(a.shift()),S=[a.pop()];a.length;)T.push([a.shift()]);q=l.slice(s.length-(S[0]?S[0].length:0)).reduce(function(Ee,De){return Ee+De},0)}else S=[s];T.push(S),Q=q+m,I=Y}else S.push(s),Q+=I+q,I=Y}return w=m?function(Ee,De){return(De?K:"")+Ee.join(" ")}:function(Ee){return Ee.join(" ")},T.map(w)},pu.splitTextToSize=function(n,e,t){var s,l=(t=t||{}).fontSize||this.internal.getFontSize(),u=(function(S){if(S.widths&&S.kerning)return{widths:S.widths,kerning:S.kerning};var T=this.internal.getFont(S.fontName,S.fontStyle);return T.metadata.Unicode?{widths:T.metadata.Unicode.widths||{0:1},kerning:T.metadata.Unicode.kerning||{}}:{font:T.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var p=1*this.internal.scaleFactor*e/l;u.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/l:0,u.lineIndent=t.lineIndent;var a,m,w=[];for(a=0,m=s.length;a<m;a++)w=w.concat(Tv.apply(this,[s[a],p,u]));return w},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},s={},l=0;l<e.length;l++)t[e[l]]="0123456789abcdef"[l],s["0123456789abcdef"[l]]=e[l];var u=function(T){return"0x"+parseInt(T,10).toString(16)},p=n.__fontmetrics__.compress=function(T){var Q,I,q,j,Y=["{"];for(var K in T){if(Q=T[K],isNaN(parseInt(K,10))?I="'"+K+"'":(K=parseInt(K,10),I=(I=u(K).slice(2)).slice(0,-1)+s[I.slice(-1)]),typeof Q=="number")Q<0?(q=u(Q).slice(3),j="-"):(q=u(Q).slice(2),j=""),q=j+q.slice(0,-1)+s[q.slice(-1)];else{if(fi(Q)!=="object")throw new Error("Don't know what to do with value type "+fi(Q)+".");q=p(Q)}Y.push(I+q)}return Y.push("}"),Y.join("")},a=n.__fontmetrics__.uncompress=function(T){if(typeof T!="string")throw new Error("Invalid argument passed to uncompress.");for(var Q,I,q,j,Y={},K=1,ne=Y,he=[],Ee="",De="",Ne=T.length-1,Qe=1;Qe<Ne;Qe+=1)(j=T[Qe])=="'"?Q?(q=Q.join(""),Q=void 0):Q=[]:Q?Q.push(j):j=="{"?(he.push([ne,q]),ne={},q=void 0):j=="}"?((I=he.pop())[0][I[1]]=ne,q=void 0,ne=I[0]):j=="-"?K=-1:q===void 0?t.hasOwnProperty(j)?(Ee+=t[j],q=parseInt(Ee,16)*K,K=1,Ee=""):Ee+=j:t.hasOwnProperty(j)?(De+=t[j],ne[q]=parseInt(De,16)*K,K=1,q=void 0,De=""):De+=j;return Y},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},w={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},S={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(T){var Q=T.font,I=S.Unicode[Q.postScriptName];I&&(Q.metadata.Unicode={},Q.metadata.Unicode.widths=I.widths,Q.metadata.Unicode.kerning=I.kerning);var q=w.Unicode[Q.postScriptName];q&&(Q.metadata.Unicode.encoding=q,Q.encoding=q.codePages[0])}])}(Qr.API),function(n){var e=function(t){for(var s=t.length,l=new Uint8Array(s),u=0;u<s;u++)l[u]=t.charCodeAt(u);return l};n.API.events.push(["addFont",function(t){var s=void 0,l=t.font,u=t.instance;if(!l.isStandardFont){if(u===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");if(typeof(s=u.existsFileInVFS(l.postScriptName)===!1?u.loadFile(l.postScriptName):u.getFileFromVFS(l.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");(function(p,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(dh(a)),p.metadata=n.API.TTFFont.open(a),p.metadata.Unicode=p.metadata.Unicode||{encoding:{},kerning:{},widths:[]},p.metadata.glyIdsUsed=[0]})(l,s)}}])}(Qr),function(n){function e(){return(Pr.canvg?Promise.resolve(Pr.canvg):Promise.resolve().then(()=>kR)).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Qr.API.addSvgAsImage=function(t,s,l,u,p,a,m,w){if(isNaN(s)||isNaN(l))throw Mi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(u)||isNaN(p))throw Mi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var S=document.createElement("canvas");S.width=u,S.height=p;var T=S.getContext("2d");T.fillStyle="#fff",T.fillRect(0,0,S.width,S.height);var Q={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},I=this;return e().then(function(q){return q.fromString(T,t,Q)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(q){return q.render(Q)}).then(function(){I.addImage(S.toDataURL("image/jpeg",1),s,l,u,p,m,w)})}}(),Qr.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var l=0;l<this.internal.pages[s].length;l++)this.internal.pages[s][l]=this.internal.pages[s][l].replace(e,t);return this},Qr.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var s,l,u,p={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(p),m=[],w=0,S=0,T=0;function Q(q,j){var Y,K=!1;for(Y=0;Y<q.length;Y+=1)q[Y]===j&&(K=!0);return K}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(p)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var I=a.length;for(T=0;T<I;T+=1)t[a[T]].value=t[a[T]].defaultValue,t[a[T]].explicitSet=!1}if(fi(n)==="object"){for(l in n)if(u=n[l],Q(a,l)&&u!==void 0){if(t[l].type==="boolean"&&typeof u=="boolean")t[l].value=u;else if(t[l].type==="name"&&Q(t[l].valueSet,u))t[l].value=u;else if(t[l].type==="integer"&&Number.isInteger(u))t[l].value=u;else if(t[l].type==="array"){for(w=0;w<u.length;w+=1)if(s=!0,u[w].length===1&&typeof u[w][0]=="number")m.push(String(u[w]-1));else if(u[w].length>1){for(S=0;S<u[w].length;S+=1)typeof u[w][S]!="number"&&(s=!1);s===!0&&m.push([u[w][0]-1,u[w][1]-1].join(" "))}t[l].value="["+m.join(" ")+"]"}else t[l].value=t[l].defaultValue;t[l].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var q,j=[];for(q in t)t[q].explicitSet===!0&&(t[q].type==="name"?j.push("/"+q+" /"+t[q].value):j.push("/"+q+" "+t[q].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',l=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),u=unescape(encodeURIComponent(s)),p=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),m=unescape(encodeURIComponent("</x:xmpmeta>")),w=u.length+p.length+a.length+l.length+m.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+w+" >>"),this.internal.write("stream"),this.internal.write(l+u+p+a+m),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,l){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:l||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Qr.API),function(n){var e=n.API,t=e.pdfEscape16=function(u,p){for(var a,m=p.metadata.Unicode.widths,w=["","0","00","000","0000"],S=[""],T=0,Q=u.length;T<Q;++T){if(a=p.metadata.characterToGlyph(u.charCodeAt(T)),p.metadata.glyIdsUsed.push(a),p.metadata.toUnicode[a]=u.charCodeAt(T),m.indexOf(a)==-1&&(m.push(a),m.push([parseInt(p.metadata.widthOfGlyph(a),10)])),a=="0")return S.join("");a=a.toString(16),S.push(w[4-a.length],a)}return S.join("")},s=function(u){var p,a,m,w,S,T,Q;for(S=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,m=[],T=0,Q=(a=Object.keys(u).sort(function(I,q){return I-q})).length;T<Q;T++)p=a[T],m.length>=100&&(S+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar`,m=[]),u[p]!==void 0&&u[p]!==null&&typeof u[p].toString=="function"&&(w=("0000"+u[p].toString(16)).slice(-4),p=("0000"+(+p).toString(16)).slice(-4),m.push("<"+p+"><"+w+">"));return m.length&&(S+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar
`),S+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(u){(function(p){var a=p.font,m=p.out,w=p.newObject,S=p.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var T=a.metadata.Unicode.widths,Q=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),I="",q=0;q<Q.length;q++)I+=String.fromCharCode(Q[q]);var j=w();S({data:I,addLength1:!0,objectId:j}),m("endobj");var Y=w();S({data:s(a.metadata.toUnicode),addLength1:!0,objectId:Y}),m("endobj");var K=w();m("<<"),m("/Type /FontDescriptor"),m("/FontName /"+au(a.fontName)),m("/FontFile2 "+j+" 0 R"),m("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),m("/Flags "+a.metadata.flags),m("/StemV "+a.metadata.stemV),m("/ItalicAngle "+a.metadata.italicAngle),m("/Ascent "+a.metadata.ascender),m("/Descent "+a.metadata.decender),m("/CapHeight "+a.metadata.capHeight),m(">>"),m("endobj");var ne=w();m("<<"),m("/Type /Font"),m("/BaseFont /"+au(a.fontName)),m("/FontDescriptor "+K+" 0 R"),m("/W "+n.API.PDFObject.convert(T)),m("/CIDToGIDMap /Identity"),m("/DW 1000"),m("/Subtype /CIDFontType2"),m("/CIDSystemInfo"),m("<<"),m("/Supplement 0"),m("/Registry (Adobe)"),m("/Ordering ("+a.encoding+")"),m(">>"),m(">>"),m("endobj"),a.objectNumber=w(),m("<<"),m("/Type /Font"),m("/Subtype /Type0"),m("/ToUnicode "+Y+" 0 R"),m("/BaseFont /"+au(a.fontName)),m("/Encoding /"+a.encoding),m("/DescendantFonts ["+ne+" 0 R]"),m(">>"),m("endobj"),a.isAlreadyPutted=!0}})(u)}]),e.events.push(["putFont",function(u){(function(p){var a=p.font,m=p.out,w=p.newObject,S=p.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var T=a.metadata.rawData,Q="",I=0;I<T.length;I++)Q+=String.fromCharCode(T[I]);var q=w();S({data:Q,addLength1:!0,objectId:q}),m("endobj");var j=w();S({data:s(a.metadata.toUnicode),addLength1:!0,objectId:j}),m("endobj");var Y=w();m("<<"),m("/Descent "+a.metadata.decender),m("/CapHeight "+a.metadata.capHeight),m("/StemV "+a.metadata.stemV),m("/Type /FontDescriptor"),m("/FontFile2 "+q+" 0 R"),m("/Flags 96"),m("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),m("/FontName /"+au(a.fontName)),m("/ItalicAngle "+a.metadata.italicAngle),m("/Ascent "+a.metadata.ascender),m(">>"),m("endobj"),a.objectNumber=w();for(var K=0;K<a.metadata.hmtx.widths.length;K++)a.metadata.hmtx.widths[K]=parseInt(a.metadata.hmtx.widths[K]*(1e3/a.metadata.head.unitsPerEm));m("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+au(a.fontName)+"/FontDescriptor "+Y+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),m("endobj"),a.isAlreadyPutted=!0}})(u)}]);var l=function(u){var p,a=u.text||"",m=u.x,w=u.y,S=u.options||{},T=u.mutex||{},Q=T.pdfEscape,I=T.activeFontKey,q=T.fonts,j=I,Y="",K=0,ne="",he=q[j].encoding;if(q[j].encoding!=="Identity-H")return{text:a,x:m,y:w,options:S,mutex:T};for(ne=a,j=I,Array.isArray(a)&&(ne=a[0]),K=0;K<ne.length;K+=1)q[j].metadata.hasOwnProperty("cmap")&&(p=q[j].metadata.cmap.unicode.codeMap[ne[K].charCodeAt(0)]),p||ne[K].charCodeAt(0)<256&&q[j].metadata.hasOwnProperty("Unicode")?Y+=ne[K]:Y+="";var Ee="";return parseInt(j.slice(1))<14||he==="WinAnsiEncoding"?Ee=Q(Y,j).split("").map(function(De){return De.charCodeAt(0).toString(16)}).join(""):he==="Identity-H"&&(Ee=t(Y,q[j])),T.isHex=!0,{text:Ee,x:m,y:w,options:S,mutex:T}};e.events.push(["postProcessText",function(u){var p=u.text||"",a=[],m={text:p,x:u.x,y:u.y,options:u.options,mutex:u.mutex};if(Array.isArray(p)){var w=0;for(w=0;w<p.length;w+=1)Array.isArray(p[w])&&p[w].length===3?a.push([l(Object.assign({},m,{text:p[w][0]})).text,p[w][1],p[w][2]]):a.push(l(Object.assign({},m,{text:p[w]})).text);u.text=a}else u.text=l(Object.assign({},m,{text:p})).text}])}(Qr),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Qr.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var l,u,p,a,m,w,S,T=e,Q=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],I=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],q={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],K=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ne=!1,he=0;this.__bidiEngine__={};var Ee=function(ce){var Ae=ce.charCodeAt(),xe=Ae>>8,_e=j[xe];return _e!==void 0?T[256*_e+(255&Ae)]:xe===252||xe===253?"AL":K.test(xe)?"L":xe===8?"R":"N"},De=function(ce){for(var Ae,xe=0;xe<ce.length;xe++){if((Ae=Ee(ce.charAt(xe)))==="L")return!1;if(Ae==="R")return!0}return!1},Ne=function(ce,Ae,xe,_e){var et,Je,rt,Ye,it=Ae[_e];switch(it){case"L":case"R":ne=!1;break;case"N":case"AN":break;case"EN":ne&&(it="AN");break;case"AL":ne=!0,it="R";break;case"WS":it="N";break;case"CS":_e<1||_e+1>=Ae.length||(et=xe[_e-1])!=="EN"&&et!=="AN"||(Je=Ae[_e+1])!=="EN"&&Je!=="AN"?it="N":ne&&(Je="AN"),it=Je===et?Je:"N";break;case"ES":it=(et=_e>0?xe[_e-1]:"B")==="EN"&&_e+1<Ae.length&&Ae[_e+1]==="EN"?"EN":"N";break;case"ET":if(_e>0&&xe[_e-1]==="EN"){it="EN";break}if(ne){it="N";break}for(rt=_e+1,Ye=Ae.length;rt<Ye&&Ae[rt]==="ET";)rt++;it=rt<Ye&&Ae[rt]==="EN"?"EN":"N";break;case"NSM":if(p&&!a){for(Ye=Ae.length,rt=_e+1;rt<Ye&&Ae[rt]==="NSM";)rt++;if(rt<Ye){var nt=ce[_e],Bt=nt>=1425&&nt<=2303||nt===64286;if(et=Ae[rt],Bt&&(et==="R"||et==="AL")){it="R";break}}}it=_e<1||(et=Ae[_e-1])==="B"?"N":xe[_e-1];break;case"B":ne=!1,l=!0,it=he;break;case"S":u=!0,it="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ne=!1;break;case"BN":it="N"}return it},Qe=function(ce,Ae,xe){var _e=ce.split("");return xe&&ge(_e,xe,{hiLevel:he}),_e.reverse(),Ae&&Ae.reverse(),_e.join("")},ge=function(ce,Ae,xe){var _e,et,Je,rt,Ye,it=-1,nt=ce.length,Bt=0,ee=[],pe=he?I:Q,ye=[];for(ne=!1,l=!1,u=!1,et=0;et<nt;et++)ye[et]=Ee(ce[et]);for(Je=0;Je<nt;Je++){if(Ye=Bt,ee[Je]=Ne(ce,ye,ee,Je),_e=240&(Bt=pe[Ye][q[ee[Je]]]),Bt&=15,Ae[Je]=rt=pe[Bt][5],_e>0)if(_e===16){for(et=it;et<Je;et++)Ae[et]=1;it=-1}else it=-1;if(pe[Bt][6])it===-1&&(it=Je);else if(it>-1){for(et=it;et<Je;et++)Ae[et]=rt;it=-1}ye[Je]==="B"&&(Ae[Je]=0),xe.hiLevel|=rt}u&&function(Re,Ge,tt){for(var st=0;st<tt;st++)if(Re[st]==="S"){Ge[st]=he;for(var ot=st-1;ot>=0&&Re[ot]==="WS";ot--)Ge[ot]=he}}(ye,Ae,nt)},Ze=function(ce,Ae,xe,_e,et){if(!(et.hiLevel<ce)){if(ce===1&&he===1&&!l)return Ae.reverse(),void(xe&&xe.reverse());for(var Je,rt,Ye,it,nt=Ae.length,Bt=0;Bt<nt;){if(_e[Bt]>=ce){for(Ye=Bt+1;Ye<nt&&_e[Ye]>=ce;)Ye++;for(it=Bt,rt=Ye-1;it<rt;it++,rt--)Je=Ae[it],Ae[it]=Ae[rt],Ae[rt]=Je,xe&&(Je=xe[it],xe[it]=xe[rt],xe[rt]=Je);Bt=Ye}Bt++}}},$e=function(ce,Ae,xe){var _e=ce.split(""),et={hiLevel:he};return xe||(xe=[]),ge(_e,xe,et),function(Je,rt,Ye){if(Ye.hiLevel!==0&&S)for(var it,nt=0;nt<Je.length;nt++)rt[nt]===1&&(it=Y.indexOf(Je[nt]))>=0&&(Je[nt]=Y[it+1])}(_e,xe,et),Ze(2,_e,Ae,xe,et),Ze(1,_e,Ae,xe,et),_e.join("")};return this.__bidiEngine__.doBidiReorder=function(ce,Ae,xe){if(function(et,Je){if(Je)for(var rt=0;rt<et.length;rt++)Je[rt]=rt;a===void 0&&(a=De(et)),w===void 0&&(w=De(et))}(ce,Ae),p||!m||w)if(p&&m&&a^w)he=a?1:0,ce=Qe(ce,Ae,xe);else if(!p&&m&&w)he=a?1:0,ce=$e(ce,Ae,xe),ce=Qe(ce,Ae);else if(!p||a||m||w){if(p&&!m&&a^w)ce=Qe(ce,Ae),a?(he=0,ce=$e(ce,Ae,xe)):(he=1,ce=$e(ce,Ae,xe),ce=Qe(ce,Ae));else if(p&&a&&!m&&w)he=1,ce=$e(ce,Ae,xe),ce=Qe(ce,Ae);else if(!p&&!m&&a^w){var _e=S;a?(he=1,ce=$e(ce,Ae,xe),he=0,S=!1,ce=$e(ce,Ae,xe),S=_e):(he=0,ce=$e(ce,Ae,xe),ce=Qe(ce,Ae),he=1,S=!1,ce=$e(ce,Ae,xe),S=_e,ce=Qe(ce,Ae))}}else he=0,ce=$e(ce,Ae,xe);else he=a?1:0,ce=$e(ce,Ae,xe);return ce},this.__bidiEngine__.setOptions=function(ce){ce&&(p=ce.isInputVisual,m=ce.isOutputVisual,a=ce.isInputRtl,w=ce.isOutputRtl,S=ce.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var l=s.text,u=(s.x,s.y,s.options||{}),p=(s.mutex,u.lang,[]);if(u.isInputVisual=typeof u.isInputVisual!="boolean"||u.isInputVisual,t.setOptions(u),Object.prototype.toString.call(l)==="[object Array]"){var a=0;for(p=[],a=0;a<l.length;a+=1)Object.prototype.toString.call(l[a])==="[object Array]"?p.push([t.doBidiReorder(l[a][0]),l[a][1],l[a][2]]):p.push([t.doBidiReorder(l[a])]);s.text=p}else s.text=t.doBidiReorder(l);t.setOptions({isInputVisual:!0})}])}(Qr),Qr.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Il(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new A3(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new $4(this.contents),this.head=new X4(this),this.name=new t3(this),this.cmap=new Mv(this),this.toUnicode={},this.hhea=new Z4(this),this.maxp=new r3(this),this.hmtx=new i3(this),this.post=new J4(this),this.os2=new Y4(this),this.loca=new o3(this),this.glyf=new n3(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,s,l,u;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var p,a,m,w;for(w=[],p=0,a=(m=this.bbox).length;p<a;p++)e=m[p],w.push(Math.round(e*this.scaleFactor));return w}).call(this),this.stemV=0,this.post.exists?(s=255&(l=this.post.italic_angle),32768&(t=l>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(u=this.familyClass)===1||u===2||u===3||u===4||u===5||u===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,s){var l,u,p,a;for(p=0,u=0,a=(e=""+e).length;0<=a?u<a:u>a;u=0<=a?++u:--u)l=e.charCodeAt(u),p+=this.widthOfGlyph(this.characterToGlyph(l))+s*(1e3/t)||0;return p*(t/1e3)},n.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},n}();var uo,Il=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(e){var t,s,l;for(l=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)l.push(this.writeByte(e.charCodeAt(t)));return l},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,s,l,u,p,a,m;return e=this.readByte(),t=this.readByte(),s=this.readByte(),l=this.readByte(),u=this.readByte(),p=this.readByte(),a=this.readByte(),m=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^l)+16777216*(255^u)+65536*(255^p)+256*(255^a)+(255^m)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*l+16777216*u+65536*p+256*a+m},n.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},n.prototype.write=function(e){var t,s,l,u;for(u=[],s=0,l=e.length;s<l;s++)t=e[s],u.push(this.writeByte(t));return u},n}(),$4=function(){var n;function e(t){var s,l,u;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},l=0,u=this.tableCount;0<=u?l<u:l>u;l=0<=u?++l:--l)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,l,u,p,a,m,w,S,T,Q,I,q,j;for(j in I=Object.keys(t).length,m=Math.log(2),T=16*Math.floor(Math.log(I)/m),p=Math.floor(T/m),S=16*I-T,(l=new Il).writeInt(this.scalarType),l.writeShort(I),l.writeShort(T),l.writeShort(p),l.writeShort(S),u=16*I,w=l.pos+u,a=null,q=[],t)for(Q=t[j],l.writeString(j),l.writeInt(n(Q)),l.writeInt(w),l.writeInt(Q.length),q=q.concat(Q),j==="head"&&(a=w),w+=Q.length;w%4;)q.push(0),w++;return l.write(q),s=2981146554-n(l.data),l.pos=a+8,l.writeUInt32(s),l.data},n=function(t){var s,l,u,p;for(t=kv.call(t);t.length%4;)t.push(0);for(u=new Il(t),l=0,s=0,p=t.length;s<p;s=s+=4)l+=u.readUInt32();return 4294967295&l},e}(),W4={}.hasOwnProperty,nA=function(n,e){for(var t in e)W4.call(e,t)&&(n[t]=e[t]);function s(){this.constructor=n}return s.prototype=e.prototype,n.prototype=new s,n.__super__=e.prototype,n};uo=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var X4=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nA(e,uo),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var s;return(s=new Il).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(t),s.writeShort(this.glyphDataFormat),s.data},e}(),Qv=function(){function n(e,t){var s,l,u,p,a,m,w,S,T,Q,I,q,j,Y,K,ne,he;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),T=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(m=0;m<256;++m)this.codeMap[m]=e.readByte();break;case 4:for(I=e.readUInt16(),Q=I/2,e.pos+=6,u=function(){var Ee,De;for(De=[],m=Ee=0;0<=Q?Ee<Q:Ee>Q;m=0<=Q?++Ee:--Ee)De.push(e.readUInt16());return De}(),e.pos+=2,j=function(){var Ee,De;for(De=[],m=Ee=0;0<=Q?Ee<Q:Ee>Q;m=0<=Q?++Ee:--Ee)De.push(e.readUInt16());return De}(),w=function(){var Ee,De;for(De=[],m=Ee=0;0<=Q?Ee<Q:Ee>Q;m=0<=Q?++Ee:--Ee)De.push(e.readUInt16());return De}(),S=function(){var Ee,De;for(De=[],m=Ee=0;0<=Q?Ee<Q:Ee>Q;m=0<=Q?++Ee:--Ee)De.push(e.readUInt16());return De}(),l=(this.length-e.pos+this.offset)/2,a=function(){var Ee,De;for(De=[],m=Ee=0;0<=l?Ee<l:Ee>l;m=0<=l?++Ee:--Ee)De.push(e.readUInt16());return De}(),m=K=0,he=u.length;K<he;m=++K)for(Y=u[m],s=ne=q=j[m];q<=Y?ne<=Y:ne>=Y;s=q<=Y?++ne:--ne)S[m]===0?p=s+w[m]:(p=a[S[m]/2+(s-q)-(Q-m)]||0)!==0&&(p+=w[m]),this.codeMap[s]=65535&p}e.pos=T}return n.encode=function(e,t){var s,l,u,p,a,m,w,S,T,Q,I,q,j,Y,K,ne,he,Ee,De,Ne,Qe,ge,Ze,$e,ce,Ae,xe,_e,et,Je,rt,Ye,it,nt,Bt,ee,pe,ye,Re,Ge,tt,st,ot,Ct,Ft,zt;switch(_e=new Il,p=Object.keys(e).sort(function(Vt,Jt){return Vt-Jt}),t){case"macroman":for(j=0,Y=function(){var Vt=[];for(q=0;q<256;++q)Vt.push(0);return Vt}(),ne={0:0},u={},et=0,it=p.length;et<it;et++)ne[ot=e[l=p[et]]]==null&&(ne[ot]=++j),u[l]={old:e[l],new:ne[e[l]]},Y[l]=ne[e[l]];return _e.writeUInt16(1),_e.writeUInt16(0),_e.writeUInt32(12),_e.writeUInt16(0),_e.writeUInt16(262),_e.writeUInt16(0),_e.write(Y),{charMap:u,subtable:_e.data,maxGlyphID:j+1};case"unicode":for(Ae=[],T=[],he=0,ne={},s={},K=w=null,Je=0,nt=p.length;Je<nt;Je++)ne[De=e[l=p[Je]]]==null&&(ne[De]=++he),s[l]={old:De,new:ne[De]},a=ne[De]-l,K!=null&&a===w||(K&&T.push(K),Ae.push(l),w=a),K=l;for(K&&T.push(K),T.push(65535),Ae.push(65535),$e=2*(Ze=Ae.length),ge=2*Math.pow(Math.log(Ze)/Math.LN2,2),Q=Math.log(ge/2)/Math.LN2,Qe=2*Ze-ge,m=[],Ne=[],I=[],q=rt=0,Bt=Ae.length;rt<Bt;q=++rt){if(ce=Ae[q],S=T[q],ce===65535){m.push(0),Ne.push(0);break}if(ce-(xe=s[ce].new)>=32768)for(m.push(0),Ne.push(2*(I.length+Ze-q)),l=Ye=ce;ce<=S?Ye<=S:Ye>=S;l=ce<=S?++Ye:--Ye)I.push(s[l].new);else m.push(xe-ce),Ne.push(0)}for(_e.writeUInt16(3),_e.writeUInt16(1),_e.writeUInt32(12),_e.writeUInt16(4),_e.writeUInt16(16+8*Ze+2*I.length),_e.writeUInt16(0),_e.writeUInt16($e),_e.writeUInt16(ge),_e.writeUInt16(Q),_e.writeUInt16(Qe),tt=0,ee=T.length;tt<ee;tt++)l=T[tt],_e.writeUInt16(l);for(_e.writeUInt16(0),st=0,pe=Ae.length;st<pe;st++)l=Ae[st],_e.writeUInt16(l);for(Ct=0,ye=m.length;Ct<ye;Ct++)a=m[Ct],_e.writeUInt16(a);for(Ft=0,Re=Ne.length;Ft<Re;Ft++)Ee=Ne[Ft],_e.writeUInt16(Ee);for(zt=0,Ge=I.length;zt<Ge;zt++)j=I[zt],_e.writeUInt16(j);return{charMap:s,subtable:_e.data,maxGlyphID:he+1}}},n}(),Mv=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nA(e,uo),e.prototype.tag="cmap",e.prototype.parse=function(t){var s,l,u;for(t.pos=this.offset,this.version=t.readUInt16(),u=t.readUInt16(),this.tables=[],this.unicode=null,l=0;0<=u?l<u:l>u;l=0<=u?++l:--l)s=new Qv(t,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},e.encode=function(t,s){var l,u;return s==null&&(s="macroman"),l=Qv.encode(t,s),(u=new Il).writeUInt16(0),u.writeUInt16(1),l.table=u.data.concat(l.subtable),l},e}(),Z4=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nA(e,uo),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),Y4=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nA(e,uo),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var s,l;for(l=[],s=0;s<10;++s)l.push(t.readByte());return l}(),this.charRange=function(){var s,l;for(l=[],s=0;s<4;++s)l.push(t.readInt());return l}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var s,l;for(l=[],s=0;s<2;s=++s)l.push(t.readInt());return l}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),J4=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nA(e,uo),e.prototype.tag="post",e.prototype.parse=function(t){var s,l,u;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var p;for(l=t.readUInt16(),this.glyphNameIndex=[],p=0;0<=l?p<l:p>l;p=0<=l?++p:--p)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],u=[];t.pos<this.offset+this.length;)s=t.readByte(),u.push(this.names.push(t.readString(s)));return u;case 151552:return l=t.readUInt16(),this.offsets=t.read(l);case 196608:break;case 262144:return this.map=(function(){var a,m,w;for(w=[],p=a=0,m=this.file.maxp.numGlyphs;0<=m?a<m:a>m;p=0<=m?++a:--a)w.push(t.readUInt32());return w}).call(this)}},e}(),e3=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},t3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nA(e,uo),e.prototype.tag="name",e.prototype.parse=function(t){var s,l,u,p,a,m,w,S,T,Q,I;for(t.pos=this.offset,t.readShort(),s=t.readShort(),m=t.readShort(),l=[],p=0;0<=s?p<s:p>s;p=0<=s?++p:--p)l.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+m+t.readShort()});for(w={},p=T=0,Q=l.length;T<Q;p=++T)u=l[p],t.pos=u.offset,S=t.readString(u.length),a=new e3(S,u),w[I=u.nameID]==null&&(w[I]=[]),w[u.nameID].push(a);this.strings=w,this.copyright=w[0],this.fontFamily=w[1],this.fontSubfamily=w[2],this.uniqueSubfamily=w[3],this.fontName=w[4],this.version=w[5];try{this.postscriptName=w[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=w[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=w[7],this.manufacturer=w[8],this.designer=w[9],this.description=w[10],this.vendorUrl=w[11],this.designerUrl=w[12],this.license=w[13],this.licenseUrl=w[14],this.preferredFamily=w[15],this.preferredSubfamily=w[17],this.compatibleFull=w[18],this.sampleText=w[19]},e}(),r3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nA(e,uo),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),i3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nA(e,uo),e.prototype.tag="hmtx",e.prototype.parse=function(t){var s,l,u,p,a,m,w;for(t.pos=this.offset,this.metrics=[],s=0,m=this.file.hhea.numberOfMetrics;0<=m?s<m:s>m;s=0<=m?++s:--s)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var S,T;for(T=[],s=S=0;0<=u?S<u:S>u;s=0<=u?++S:--S)T.push(t.readInt16());return T}(),this.widths=(function(){var S,T,Q,I;for(I=[],S=0,T=(Q=this.metrics).length;S<T;S++)p=Q[S],I.push(p.advance);return I}).call(this),l=this.widths[this.widths.length-1],w=[],s=a=0;0<=u?a<u:a>u;s=0<=u?++a:--a)w.push(this.widths.push(l));return w},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),kv=[].slice,n3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nA(e,uo),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var s,l,u,p,a,m,w,S,T,Q;return t in this.cache?this.cache[t]:(p=this.file.loca,s=this.file.contents,l=p.indexOf(t),(u=p.lengthOf(t))===0?this.cache[t]=null:(s.pos=this.offset+l,a=(m=new Il(s.read(u))).readShort(),S=m.readShort(),Q=m.readShort(),w=m.readShort(),T=m.readShort(),this.cache[t]=a===-1?new a3(m,S,Q,w,T):new s3(m,a,S,Q,w,T),this.cache[t]))},e.prototype.encode=function(t,s,l){var u,p,a,m,w;for(a=[],p=[],m=0,w=s.length;m<w;m++)u=t[s[m]],p.push(a.length),u&&(a=a.concat(u.encode(l)));return p.push(a.length),{table:a,offsets:p}},e}(),s3=function(){function n(e,t,s,l,u,p){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=l,this.xMax=u,this.yMax=p,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),a3=function(){function n(e,t,s,l,u){var p,a;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=l,this.yMax=u,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],p=this.raw;a=p.readShort(),this.glyphOffsets.push(p.pos),this.glyphIDs.push(p.readUInt16()),32&a;)p.pos+=1&a?4:2,128&a?p.pos+=8:64&a?p.pos+=4:8&a&&(p.pos+=2)}return n.prototype.encode=function(){var e,t,s;for(t=new Il(kv.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),o3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return nA(e,uo),e.prototype.tag="loca",e.prototype.parse=function(t){var s,l;return t.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var u,p;for(p=[],l=0,u=this.length;l<u;l+=2)p.push(2*t.readUInt16());return p}).call(this):(function(){var u,p;for(p=[],l=0,u=this.length;l<u;l+=4)p.push(t.readUInt32());return p}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,s){for(var l=new Uint32Array(this.offsets.length),u=0,p=0,a=0;a<l.length;++a)if(l[a]=u,p<s.length&&s[p]==a){++p,l[a]=u;var m=this.offsets[a],w=this.offsets[a+1]-m;w>0&&(u+=w)}for(var S=new Array(4*l.length),T=0;T<l.length;++T)S[4*T+3]=255&l[T],S[4*T+2]=(65280&l[T])>>8,S[4*T+1]=(16711680&l[T])>>16,S[4*T]=(4278190080&l[T])>>24;return S},e}(),A3=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,s,l,u;for(t in l=this.font.cmap.tables[0].codeMap,e={},u=this.subset)s=u[t],e[t]=l[s];return e},n.prototype.glyphsFor=function(e){var t,s,l,u,p,a,m;for(l={},p=0,a=e.length;p<a;p++)l[u=e[p]]=this.font.glyf.glyphFor(u);for(u in t=[],l)(s=l[u])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(u in m=this.glyphsFor(t))s=m[u],l[u]=s;return l},n.prototype.encode=function(e,t){var s,l,u,p,a,m,w,S,T,Q,I,q,j,Y,K;for(l in s=Mv.encode(this.generateCmap(),"unicode"),p=this.glyphsFor(e),I={0:0},K=s.charMap)I[(m=K[l]).old]=m.new;for(q in Q=s.maxGlyphID,p)q in I||(I[q]=Q++);return S=function(ne){var he,Ee;for(he in Ee={},ne)Ee[ne[he]]=he;return Ee}(I),T=Object.keys(S).sort(function(ne,he){return ne-he}),j=function(){var ne,he,Ee;for(Ee=[],ne=0,he=T.length;ne<he;ne++)a=T[ne],Ee.push(S[a]);return Ee}(),u=this.font.glyf.encode(p,j,I),w=this.font.loca.encode(u.offsets,j),Y={cmap:this.font.cmap.raw(),glyf:u.table,loca:w,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(Y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Y)},n}();Qr.API.PDFObject=function(){var n;function e(){}return n=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,l,u,p;if(Array.isArray(t))return"["+function(){var a,m,w;for(w=[],a=0,m=t.length;a<m;a++)s=t[a],w.push(e.convert(s));return w}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(l in u=["<<"],t)p=t[l],u.push("/"+l+" "+e.convert(p));return u.push(">>"),u.join(`
`)}return""+t},e}(),function(n){var e={};function t(s){if(e[s])return e[s].exports;var l=e[s]={i:s,l:!1,exports:{}};return n[s].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=n,t.c=e,t.d=function(s,l,u){t.o(s,l)||Object.defineProperty(s,l,{enumerable:!0,get:u})},t.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},t.t=function(s,l){if(1&l&&(s=t(s)),8&l||4&l&&typeof s=="object"&&s&&s.__esModule)return s;var u=Object.create(null);if(t.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:s}),2&l&&typeof s!="string")for(var p in s)t.d(u,p,(function(a){return s[a]}).bind(null,p));return u},t.n=function(s){var l=s&&s.__esModule?function(){return s.default}:function(){return s};return t.d(l,"a",l),l},t.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)},t.p="",t(t.s=0)}([function(n,e,t){n.exports=t(1)},function(n,e){function t(l,u){for(var p=0;p<u.length;p++){var a=u[p];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(l,a.key,a)}}var s=function(){function l(){(function(a,m){if(!(a instanceof m))throw new TypeError("Cannot call a class as a function")})(this,l),this.options={overlayBackgroundColor:"#666666",overlayOpacity:.6,spinnerIcon:"ball-circus",spinnerColor:"#000",spinnerSize:"3x",overlayIDName:"overlay",spinnerIDName:"spinner",offsetY:0,offsetX:0,lockScroll:!1,containerID:null,spinnerZIndex:99999,overlayZIndex:99998},this.stylesheetBaseURL="https://cdn.jsdelivr.net/npm/load-awesome@1.1.0/css/",this.spinner=null,this.spinnerStylesheetURL=null,this.numberOfEmptyDivForSpinner={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":1,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1}}var u,p;return u=l,(p=[{key:"show",value:function(a){this.setOptions(a),this.addSpinnerStylesheet(),this.generateSpinnerElement(),this.options.lockScroll&&(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"),this.generateAndAddOverlayElement()}},{key:"hide",value:function(){this.options.lockScroll&&(document.body.style.overflow="",document.documentElement.style.overflow="");var a=document.getElementById("loading-overlay-stylesheet");a&&(a.disabled=!0,a.parentNode.removeChild(a),document.getElementById(this.options.overlayIDName).remove(),document.getElementById(this.options.spinnerIDName).remove())}},{key:"setOptions",value:function(a){if(a!==void 0)for(var m in a)this.options[m]=a[m]}},{key:"generateAndAddOverlayElement",value:function(){var a="50%";this.options.offsetX!==0&&(a="calc(50% + "+this.options.offsetX+")");var m="50%";if(this.options.offsetY!==0&&(m="calc(50% + "+this.options.offsetY+")"),this.options.containerID&&document.body.contains(document.getElementById(this.options.containerID))){var w='<div id="'.concat(this.options.overlayIDName,'" style="display: block !important; position: absolute; top: 0; left: 0; overflow: auto; opacity: ').concat(this.options.overlayOpacity,"; background: ").concat(this.options.overlayBackgroundColor,'; z-index: 50; width: 100%; height: 100%;"></div><div id="').concat(this.options.spinnerIDName,'" style="display: block !important; position: absolute; top: ').concat(m,"; left: ").concat(a,'; -webkit-transform: translate(-50%); -ms-transform: translate(-50%); transform: translate(-50%); z-index: 9999;">').concat(this.spinner,"</div>"),S=document.getElementById(this.options.containerID);return S.style.position="relative",void S.insertAdjacentHTML("beforeend",w)}var T='<div id="'.concat(this.options.overlayIDName,'" style="display: block !important; position: fixed; top: 0; left: 0; overflow: auto; opacity: ').concat(this.options.overlayOpacity,"; background: ").concat(this.options.overlayBackgroundColor,"; z-index: ").concat(this.options.overlayZIndex,'; width: 100%; height: 100%;"></div><div id="').concat(this.options.spinnerIDName,'" style="display: block !important; position: fixed; top: ').concat(m,"; left: ").concat(a,"; -webkit-transform: translate(-50%); -ms-transform: translate(-50%); transform: translate(-50%); z-index: ").concat(this.options.spinnerZIndex,';">').concat(this.spinner,"</div>");document.body.insertAdjacentHTML("beforeend",T)}},{key:"generateSpinnerElement",value:function(){var a=this,m=Object.keys(this.numberOfEmptyDivForSpinner).find(function(S){return S===a.options.spinnerIcon}),w=this.generateEmptyDivElement(this.numberOfEmptyDivForSpinner[m]);this.spinner='<div style="color: '.concat(this.options.spinnerColor,'" class="la-').concat(this.options.spinnerIcon," la-").concat(this.options.spinnerSize,'">').concat(w,"</div>")}},{key:"addSpinnerStylesheet",value:function(){this.setSpinnerStylesheetURL();var a=document.createElement("link");a.setAttribute("id","loading-overlay-stylesheet"),a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",this.spinnerStylesheetURL),document.getElementsByTagName("head")[0].appendChild(a)}},{key:"setSpinnerStylesheetURL",value:function(){this.spinnerStylesheetURL=this.stylesheetBaseURL+this.options.spinnerIcon+".min.css"}},{key:"generateEmptyDivElement",value:function(a){for(var m="",w=1;w<=a;w++)m+="<div></div>";return m}}])&&t(u.prototype,p),l}();window.JsLoadingOverlay=new s,n.exports=JsLoadingOverlay}]);const Ll={JPEG:"jpg",PNG:"png",PDF:"pdf",SVG:"svg"},fh={in:"in",mm:"mm"},du={A2:[594,420],A3:[420,297],A4:[297,210],A5:[210,148],A6:[148,105],B2:[707,500],B3:[500,353],B4:[353,250],B5:[250,176],B6:[176,125]},gh={Landscape:"landscape",Portrait:"portrait"},Dg={72:72,96:96,200:200,300:300,400:400};let l3=class{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:du.A4,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:300,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ll.PNG.toString(),u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:fh.mm,p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"map";Qi(this,"map"),Qi(this,"width"),Qi(this,"height"),Qi(this,"dpi"),Qi(this,"format"),Qi(this,"unit"),Qi(this,"fileName"),this.map=e,this.width=t[0],this.height=t[1],this.dpi=s,this.format=l,this.unit=u,this.fileName=p}generate(){const e=this;JsLoadingOverlay.show({overlayBackgroundColor:"#5D5959",overlayOpacity:"0.6",spinnerIcon:"ball-spin",spinnerColor:"#2400FD",spinnerSize:"2x",overlayIDName:"overlay",spinnerIDName:"spinner",offsetX:0,offsetY:0,containerID:null,lockScroll:!1,overlayZIndex:9998,spinnerZIndex:9999});const t=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return e.dpi/96}});const s=document.createElement("div");s.className="hidden-map",document.body.appendChild(s);const l=document.createElement("div");l.style.width=this.toPixels(this.width),l.style.height=this.toPixels(this.height),s.appendChild(l);const u=this.map.getStyle();if(u&&u.sources){const a=u.sources;Object.keys(a).forEach(m=>{const w=a[m];Object.keys(w).forEach(S=>{w[S]||delete w[S]})})}const p=new Yy.Map({container:l,style:u,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:this.map._requestManager._transformRequestFn});p.once("idle",()=>{var a;const m=p.getCanvas(),w=`${this.fileName}.${e.format}`;switch(e.format){case Ll.PNG:e.toPNG(m,w);break;case Ll.JPEG:e.toJPEG(m,w);break;case Ll.PDF:e.toPDF(p,w);break;case Ll.SVG:e.toSVG(m,w);break;default:console.error(`Invalid file format: ${e.format}`);break}p.remove(),(a=s.parentNode)==null||a.removeChild(s),Object.defineProperty(window,"devicePixelRatio",{get(){return t}}),s.remove(),JsLoadingOverlay.hide()})}toPNG(e,t){const s=document.createElement("a");s.href=e.toDataURL(),s.download=t,s.click(),s.remove()}toJPEG(e,t){const s=e.toDataURL("image/jpeg",.85);if(e.msToBlob){const l=this.toBlob(s);window.navigator.msSaveBlob(l,t)}else{const l=document.createElement("a");l.href=s,l.download=t,l.click(),l.remove()}}toPDF(e,t){const s=e.getCanvas(),l=new Qr({orientation:this.width>this.height?"l":"p",unit:this.unit,compress:!0,format:[this.width,this.height]});l.addImage(s.toDataURL("image/png"),"png",0,0,this.width,this.height,void 0,"FAST");const{lng:u,lat:p}=e.getCenter();l.setProperties({title:e.getStyle().name,subject:`center: [${u}, ${p}], zoom: ${e.getZoom()}`,creator:"Mapbox GL Export Plugin",author:"(c)Mapbox, (c)OpenStreetMap"}),l.save(t)}toSVG(e,t){const s=e.toDataURL("image/png"),l=Number(this.toPixels(this.width,this.dpi).replace("px","")),u=Number(this.toPixels(this.height,this.dpi).replace("px","")),p=`
    <svg xmlns="http://www.w3.org/2000/svg" 
      xmlns:xlink="http://www.w3.org/1999/xlink" 
      version="1.1" 
      width="${l}" 
      height="${u}" 
      viewBox="0 0 ${l} ${u}" 
      xml:space="preserve">
        <image style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;"  
      xlink:href="${s}" width="${l}" height="${u}"></image>
    </svg>`,a=document.createElement("a");a.href=`data:application/xml,${encodeURIComponent(p)}`,a.download=t,a.click(),a.remove()}toPixels(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:96;return this.unit===fh.mm&&(t/=25.4),`${t*e}px`}toBlob(e){const t=atob(e.replace(/^.*,/,"")),s=new Uint8Array(t.length);for(let l=0;l<t.length;l+=1)s[l]=t.charCodeAt(l);return new Blob([s.buffer],{type:"image/png"})}},c3=class{constructor(e){Qi(this,"map"),Qi(this,"width"),Qi(this,"height"),Qi(this,"unit"),Qi(this,"svgCanvas"),Qi(this,"svgPath");var t,s,l;if(this.map=e,this.map===void 0)return;this.mapResize=this.mapResize.bind(this),this.map.on("resize",this.mapResize);const u=(t=this.map)==null?void 0:t.getCanvas().clientWidth,p=(s=this.map)==null?void 0:s.getCanvas().clientHeight,a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.setAttribute("width",`${u}px`),a.setAttribute("height",`${p}px`);const m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("style","fill:#888888;stroke-width:0"),m.setAttribute("fill-opacity","0.5"),a.append(m),(l=this.map)==null||l.getCanvasContainer().appendChild(a),this.svgCanvas=a,this.svgPath=m}mapResize(){this.generateCutOut()}updateArea(e,t){this.width=e,this.height=t,this.unit=fh.mm,this.generateCutOut()}generateCutOut(){var e,t;if(this.map===void 0||this.svgCanvas===void 0||this.svgPath===void 0)return;const s=this.toPixels(this.width),l=this.toPixels(this.height),u=(e=this.map)==null?void 0:e.getCanvas().clientWidth,p=(t=this.map)==null?void 0:t.getCanvas().clientHeight,a=u/2-s/2,m=a+s,w=p/2-l/2,S=w+l;this.svgCanvas.setAttribute("width",`${u}px`),this.svgCanvas.setAttribute("height",`${p}px`),this.svgPath.setAttribute("d",`M 0 0 L ${u} 0 L ${u} ${p} L 0 ${p} M ${a} ${w} L ${a} ${S} L ${m} ${S} L ${m} ${w}`)}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map=void 0)}toPixels(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:96;return this.unit===fh.mm&&(t/=25.4),t*e}};const Dv={PageSize:"Page Size",PageOrientation:"Page Orientation",Format:"Format",DPI:"DPI",Generate:"Generate"},u3={PageSize:"Taille de page",PageOrientation:"Orientation de la page",Format:"Format",DPI:"DPI",Generate:"Gnrer"},h3={PageSize:"Sivukoko",PageOrientation:"Sivun suunta",Format:"Muoto",DPI:"DPI",Generate:"Generoi"},p3={PageSize:"Papierformat",PageOrientation:"Papierausrichtung",Format:"Dateiformat",DPI:"Druckauflsung",Generate:"Erstellen"},d3={PageSize:"Sidstorlek",PageOrientation:"Sidorientering",Format:"Format",DPI:"DPI",Generate:"Generera"},f3={PageSize:"Tamao de pgina",PageOrientation:"Orientacin de pgina",Format:"Formato",DPI:"DPI",Generate:"Generar"},g3={PageSize:"Kch thc trang",PageOrientation:"Loi trang",Format:"nh dng",DPI:"Mt  im nh (DPI)",Generate:"To"},m3={PageSize:" ",PageOrientation:" ",Format:"",DPI:"DPI",Generate:""},y3={PageSize:"",PageOrientation:"",Format:"",DPI:"",Generate:""},v3={PageSize:"",PageOrientation:"",Format:"",DPI:"",Generate:""},_3={PageSize:"",PageOrientation:"",Format:"",DPI:"DPI",Generate:""};let w3=class{constructor(e){Qi(this,"controlContainer"),Qi(this,"exportContainer"),Qi(this,"crosshair"),Qi(this,"printableArea"),Qi(this,"map"),Qi(this,"exportButton"),Qi(this,"options",{PageSize:du.A4,PageOrientation:gh.Landscape,Format:Ll.PDF,DPI:Dg[300],Crosshair:!1,PrintableArea:!1,Local:"en",AllowedSizes:Object.keys(du),Filename:"map"}),e&&(this.options=Object.assign(this.options,e)),this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}getTranslation(){switch(this.options.Local){case"de":return p3;case"en":return Dv;case"fr":return u3;case"fi":return h3;case"sv":return d3;case"es":return f3;case"vi":return g3;case"uk":return m3;case"zhHans":return y3;case"zhHant":return v3;case"ja":return _3;default:return Dv}}onAdd(e){var t;this.map=e,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("maplibregl-ctrl"),this.controlContainer.classList.add("maplibregl-ctrl-group"),this.exportContainer=document.createElement("div"),this.exportContainer.classList.add("maplibregl-export-list"),this.exportButton=document.createElement("button"),this.exportButton.classList.add("maplibregl-ctrl-icon"),this.exportButton.classList.add("maplibregl-export-control"),this.exportButton.type="button",this.exportButton.addEventListener("click",()=>{this.exportButton.style.display="none",this.exportContainer.style.display="block",this.toggleCrosshair(!0),this.togglePrintableArea(!0)}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.exportButton),this.controlContainer.appendChild(this.exportContainer);const s=document.createElement("TABLE");s.className="print-table";const l={};(t=this.options.AllowedSizes)==null||t.forEach(S=>{du[S]&&(l[S]=du[S])});const u=this.createSelection(l,this.getTranslation().PageSize,"page-size",this.options.PageSize,(S,T)=>JSON.stringify(S[T]));s.appendChild(u);const p=this.createSelection(gh,this.getTranslation().PageOrientation,"page-orientation",this.options.PageOrientation,(S,T)=>S[T]);s.appendChild(p);const a=this.createSelection(Ll,this.getTranslation().Format,"format-type",this.options.Format,(S,T)=>S[T]);s.appendChild(a);const m=this.createSelection(Dg,this.getTranslation().DPI,"dpi-type",this.options.DPI,(S,T)=>S[T]);s.appendChild(m),this.exportContainer.appendChild(s);const w=document.createElement("button");return w.type="button",w.textContent=this.getTranslation().Generate,w.classList.add("generate-button"),w.addEventListener("click",()=>{const S=document.getElementById("mapbox-gl-export-page-size"),T=document.getElementById("mapbox-gl-export-page-orientation"),Q=document.getElementById("mapbox-gl-export-format-type"),I=document.getElementById("mapbox-gl-export-dpi-type"),q=T.value;let j=JSON.parse(S.value);q===gh.Portrait&&(j=j.reverse()),new l3(e,j,Number(I.value),Q.value,fh.mm,this.options.Filename).generate()}),this.exportContainer.appendChild(w),this.controlContainer}createSelection(e,t,s,l,u){const p=document.createElement("label");p.textContent=t;const a=document.createElement("select");a.setAttribute("id",`mapbox-gl-export-${s}`),a.style.width="100%",Object.keys(e).forEach(T=>{const Q=document.createElement("option");Q.setAttribute("value",u(e,T)),Q.appendChild(document.createTextNode(T)),Q.setAttribute("name",s),l===e[T]&&(Q.selected=!0),a.appendChild(Q)}),a.addEventListener("change",()=>{this.updatePrintableArea()});const m=document.createElement("TR"),w=document.createElement("TD"),S=document.createElement("TD");return w.appendChild(p),S.appendChild(a),m.appendChild(w),m.appendChild(S),m}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.exportButton||(this.exportButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0),this.map=void 0)}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.exportContainer&&this.exportButton&&(this.exportContainer.style.display="none",this.exportButton.style.display="block",this.toggleCrosshair(!1),this.togglePrintableArea(!1))}toggleCrosshair(e){this.options.Crosshair===!0&&(e===!1?this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0):(this.crosshair=new u4(this.map),this.crosshair.create()))}togglePrintableArea(e){this.options.PrintableArea===!0&&(e===!1?this.printableArea!==void 0&&(this.printableArea.destroy(),this.printableArea=void 0):(this.printableArea=new c3(this.map),this.updatePrintableArea()))}updatePrintableArea(){if(this.printableArea===void 0)return;const e=document.getElementById("mapbox-gl-export-page-size"),t=document.getElementById("mapbox-gl-export-page-orientation").value;let s=JSON.parse(e.value);t===gh.Portrait&&(s=s.reverse()),this.printableArea.updateArea(s[0],s[1])}};const $p={ICGC5M:"https://tilemaps.icgc.cat/tileserver/tileserver.php/terreny-5m-30m-rgb-extent/{z}/{x}/{y}.png",WORLD3M:"https://tilemaps.icgc.cat/tileserver/tileserver.php/terreny_icgc_2m_rgb/{z}/{x}/{y}.png"},VA={TOPO:"https://geoserveis.icgc.cat/contextmaps/icgc_mapa_estandard_general.json",ORTO:"https://geoserveis.icgc.cat/contextmaps/icgc_orto_hibrida.json",ADMIN:"https://geoserveis.icgc.cat/contextmaps/icgc_delimitacio_limits_administratius.json",DARK:"https://geoserveis.icgc.cat/contextmaps/icgc_mapa_base_fosc.json",LIGHT:"https://geoserveis.icgc.cat/contextmaps/icgc_mapa_base_gris.json",GEOLOGY:"https://geoserveis.icgc.cat/contextmaps/icgc_geologic_informacio.json"},xs={Orto:{ortofotoColorProvisional:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_provisional",ortofotoColor2022:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2022",ortofotoColor2021:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2021",ortofotoColor2020:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2020",ortofotoColor2019:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2019",ortofotoColor2018:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2018",ortofotoColor2017:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2017",ortofotoColor2016:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2016",ortofotoColor2015:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2015",ortofotoColor2014:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2014",ortofotoColor2013:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2013",ortofotoColor2012:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2012",ortofotoColor2011:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2011",ortofotoColor2010:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2010",ortofotoColor2009:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2009",ortofotoColor2008:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2008",ortofotoColor20062007:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2006-2007",ortofotoColor20042005:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2004-2005",ortofotoColor20002003:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2000-2003",ortofotoBlancINegre1998:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1998",ortofotoBlancINegre19941997:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1994-1997",ortofotoColor1993:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_1993",ortofotoBlancINegre19831992:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1983-1992",ortofotoBlancINegre19701977:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1970-1977",ortofotoBlancINegre1956:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1956",ortofotoBlancINegre1945:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1945",ortofotoColorSerieAnual:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_serie_anual",ortofotoInfraroigProvisional:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_provisional",ortofotoInfraroig2022:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2022",ortofotoInfraroig2021:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2021",ortofotoInfraroig2020:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2020",ortofotoInfraroig2019:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2019",ortofotoInfraroig2018:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2018",ortofotoInfraroig2017:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2017",ortofotoInfraroig2016:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2016",ortofotoInfraroig2015:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2015",ortofotoInfraroig2014:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2014",ortofotoInfraroig2013:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2013",ortofotoInfraroig2012:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2012",ortofotoInfraroig2011:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2011",ortofotoInfraroig2010:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2010",ortofotoInfraroig2009:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2009",ortofotoInfraroig2008:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2008",ortofotoInfraroig20062007:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2006-2007",ortofotoInfraroig19961997:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_1996-1997",ortofotoInfraroigSerieAnual:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_serie_anual"},VectorAdmin:{agrupacionsCensals2015:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2015.fgb",agrupacionsCensals2016:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2016.fgb",agrupacionsCensals2017:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2017.fgb",agrupacionsCensals2018:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2018.fgb",agrupacionsCensals2019:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2019.fgb",agrupacionsCensals2020:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2020.fgb",agrupacionsCensals2021:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2021.fgb",agrupacionsCensalsVigent:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_vigent.fgb",agrupacionsCensalsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_vigent_centroid.fgb",areesBasiquesPolicials2019:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_2019.fgb",areesBasiquesPolicials2020:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_2020.fgb",areesBasiquesPolicials2022:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_2022.fgb",areesBasiquesPolicialsVigent:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_vigent.fgb",areesBasiquesPolicialsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_vigent_centroid.fgb",areesBasiquesSalutVigent:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_salut_vigent.fgb",areesBasiquesServeisSocialsVigent:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_serveis_socials_vigent.fgb",areesBasiquesServeisSocialsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_serveis_socials_vigent_centroid.fgb",areesGestioAssistencialVigent:"https://tilemaps.icgc.cat/vector/fgb/arees_gestio_assistencial_vigent.fgb",areesHidrogeologiquesAquifersVigent:"https://tilemaps.icgc.cat/vector/fgb/arees_hidrogeologiques_aquifers_vigent.fgb",catalunyaVigent:"https://tilemaps.icgc.cat/vector/fgb/catalunya_vigent.fgb",catalunyaVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/catalunya_vigent_centroid.fgb",comarques2022:"https://tilemaps.icgc.cat/vector/fgb/comarques_2022.fgb",comarquesVigent:"https://tilemaps.icgc.cat/vector/fgb/comarques_vigent.fgb",comarquesVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/comarques_vigent_centroid.fgb",districtesCensals2002:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2002.fgb",districtesCensals2003:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2003.fgb",districtesCensals2004:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2004.fgb",districtesCensals2005:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2005.fgb",districtesCensals2006:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2006.fgb",districtesCensals2007:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2007.fgb",districtesCensals2008:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2008.fgb",districtesCensals2009:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2009.fgb",districtesCensals2010:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2010.fgb",districtesCensals2011:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2011.fgb",districtesCensals2012:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2012.fgb",districtesCensals2013:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2013.fgb",districtesCensals2014:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2014.fgb",districtesCensals2015:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2015.fgb",districtesCensals2016:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2016.fgb",districtesCensals2017:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2017.fgb",districtesCensals2018:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2018.fgb",districtesCensals2019:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2019.fgb",districtesCensals2020:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2020.fgb",districtesCensals2021:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2021.fgb",districtesCensals2022:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2022.fgb",districtesCensalsVigent:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_vigent.fgb",districtesCensalsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_vigent_centroid.fgb",incendisForestalsVigent:"https://tilemaps.icgc.cat/vector/fgb/incendis_forestals_vigent.fgb",incendisForestalsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/incendis_forestals_vigent_centroid.fgb",municipis2022:"https://tilemaps.icgc.cat/vector/fgb/municipis_2022.fgb",municipis2022Centroid:"https://tilemaps.icgc.cat/vector/fgb/municipis_2022_centroid.fgb",municipisVigent:"https://tilemaps.icgc.cat/vector/fgb/municipis_vigent.fgb",municipisVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/municipis_vigent_centroid.fgb",partitsJudicialsVigent:"https://tilemaps.icgc.cat/vector/fgb/partits_judicials_vigent.fgb",partitsJudicialsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/partits_judicials_vigent_centroid.fgb",plaTerritorial2015:"https://tilemaps.icgc.cat/vector/fgb/pla_territorial_2015.fgb",plaTerritorialVigent:"https://tilemaps.icgc.cat/vector/fgb/pla_territorial_vigent.fgb",plaTerritorialVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/pla_territorial_vigent_centroid.fgb",provinciesVigent:"https://tilemaps.icgc.cat/vector/fgb/provincies_vigent.fgb",provinciesVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/provincies_vigent_centroid.fgb",regionsPolicialsVigent:"https://tilemaps.icgc.cat/vector/fgb/regions_policials_vigent.fgb",regionsPolicialsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/regions_policials_vigent_centroid.fgb",regionsSanitariesVigent:"https://tilemaps.icgc.cat/vector/fgb/regions_sanitaries_vigent.fgb",regionsSanitariesVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/regions_sanitaries_vigent_centroid.fgb",seccionsCensals2002:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2002.fgb",seccionsCensals2003:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2003.fgb",seccionsCensals2004:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2004.fgb",seccionsCensals2005:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2005.fgb",seccionsCensals2006:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2006.fgb",seccionsCensals2007:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2007.fgb",seccionsCensals2008:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2008.fgb",seccionsCensals2009:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2009.fgb",seccionsCensals2010:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2010.fgb",seccionsCensals2011:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2011.fgb",seccionsCensals2012:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2012.fgb",seccionsCensals2013:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2013.fgb",seccionsCensals2014:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2014.fgb",seccionsCensals2015:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2015.fgb",seccionsCensals2016:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2016.fgb",seccionsCensals2017:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2017.fgb",seccionsCensals2018:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2018.fgb",seccionsCensals2019:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2019.fgb",seccionsCensals2020:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2020.fgb",seccionsCensals2021:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2021.fgb",seccionsCensals2022:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2022.fgb",seccionsCensalsVigent:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_vigent.fgb",seccionsCensalsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_vigent_centroid.fgb",sectorsSanitarisVigent:"https://tilemaps.icgc.cat/vector/fgb/sectors_sanitaris_vigent.fgb",vegueriesVigent:"https://tilemaps.icgc.cat/vector/fgb/vegueries_vigent.fgb",vegueriesVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/vegueries_vigent_centroid.fgb"},WMS:{relleu:"https://tilemaps.icgc.cat/mapfactory/wmts/relleu/CAT3857/{z}/{x}/{y}.png",geologia:"https://tilemaps.icgc.cat/mapfactory/wmts/geologia/MON3857NW/{z}/{x}/{y}.png",osm:"https://tilemaps.icgc.cat/mapfactory/wmts/osm_suau/CAT3857_15/{z}/{x}/{y}.png",cims:'"https://geoserveis.icgc.cat/icc_100cims/wms/service?REQUEST=GetMap&SERVICE=WMS&VERSION=1.1.1&LAYERS=0&STYLES=&FORMAT=image/png&BGCOLOR=0xFFFFFF&TRANSPARENT=TRUE&SRS=EPSG:25831&BBOX=137118.923076923,4488408.75,650959.076923077,4749634.75&WIDTH=895&HEIGHT=455',cobertesSol:"http://geoserveis.icgc.cat/servei/catalunya/cobertes-sol/wms?REQUEST=GetMap&SERVICE=WMS&VERSION=1.3.0&LAYERS=cobertes_2009&STYLES=&FORMAT=image/png&BGCOLOR=0xFFFFFF&TRANSPARENT=TRUE&CRS=EPSG:25831&BBOX=374110.828167253,4639230.79853085,452621.120632226,4703578.45000215&WIDTH=1020&HEIGHT=836"},Vector:{altimetria:"https://betaserver.icgc.cat/tileserver3/tileserver.php/alti_bt5m/{z}/{x}/{y}.pbf",toponimia:"https://betaserver.icgc.cat/tileserver3/tileserver.php/redtopo/{z}/{x}/{y}.pbf"}},Tl={mapOptions:{container:"map",center:{0:1.537786,1:41.837539},zoom:7.5,bearing:0,pitch:0,hash:!1,style:"https://geoserveis.icgc.cat/contextmaps/icgc_mapa_base_gris.json.json",maxZoom:18,maxPitch:85},baseStyles:{0:{key:"TOPO",url:"https://geoserveis.icgc.cat/contextmaps/icgc_mapa_estandard_general.json",image:"https://visors.icgc.cat/contextmaps/imatges_estil/icgc_mapa_estandard.png"},1:{key:"ORTO",url:"https://geoserveis.icgc.cat/contextmaps/icgc_orto_hibrida.json",image:"https://visors.icgc.cat/contextmaps/imatges_estil/icgc_orto_hibrida.png"},2:{key:"ADMIN",url:"https://geoserveis.icgc.cat/contextmaps/icgc_delimitacio_limits_administratius.json",image:"https://visors.icgc.cat/contextmaps/imatges_estil/icgc_delimitacio_limits_administratius.png"},3:{key:"DARK",url:"https://geoserveis.icgc.cat/contextmaps/icgc_mapa_base_fosc.json",image:"https://visors.icgc.cat/contextmaps/imatges_estil/icgc_mapa_base_fosc.png"},4:{key:"LIGHT",url:"https://geoserveis.icgc.cat/contextmaps/icgc_mapa_base_gris.json",image:"https://visors.icgc.cat/contextmaps/imatges_estil/icgc_mapa_base_gris.png"},5:{key:"GEOLOGY",url:"https://geoserveis.icgc.cat/contextmaps/icgc_geologic_informacio.json",image:"https://visors.icgc.cat/contextmaps/imatges_estil/icgc_geologic_informacio.png"}},urlTerrainICGC:{0:{name:"ICGC5M",url:"https://tilemaps.icgc.cat/tileserver/tileserver.php/terreny-5m-30m-rgb-extent/{z}/{x}/{y}.png"},1:{name:"WORLD3M",url:"https://tilemaps.icgc.cat/tileserver/tileserver.php/terreny_icgc_2m_rgb/{z}/{x}/{y}.png"}},ortoLayersICGC:{0:{name:"ortofotoColorProvisional",key:"ortofoto_color_provisional",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_provisional"},1:{name:"ortofotoColor2022",key:"ortofoto_color_2022",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2022"},2:{name:"ortofotoColor2021",key:"ortofoto_color_2021",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2021"},3:{name:"ortofotoColor2020",key:"ortofoto_color_2020",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2020"},4:{name:"ortofotoColor2019",key:"ortofoto_color_2019",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2019"},5:{name:"ortofotoColor2018",key:"ortofoto_color_2018",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2018"},6:{name:"ortofotoColor2017",key:"ortofoto_color_2017",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2017"},7:{name:"ortofotoColor2016",key:"ortofoto_color_2016",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2016"},8:{name:"ortofotoColor2015",key:"ortofoto_color_2015",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2015"},9:{name:"ortofotoColor2014",key:"ortofoto_color_2014",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2014"},10:{name:"ortofotoColor2013",key:"ortofoto_color_2013",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2013"},11:{name:"ortofotoColor2012",key:"ortofoto_color_2012",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2012"},12:{name:"ortofotoColor2011",key:"ortofoto_color_2011",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2011"},13:{name:"ortofotoColor2010",key:"ortofoto_color_2010",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2010"},14:{name:"ortofotoColor2009",key:"ortofoto_color_2009",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2009"},15:{name:"ortofotoColor2008",key:"ortofoto_color_2008",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2008"},16:{name:"ortofotoColor20062007",key:"ortofoto_color_2006-2007",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2006-2007"},17:{name:"ortofotoColor20042005",key:"ortofoto_color_2004-2005",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2004-2005"},18:{name:"ortofotoColor20002003",key:"ortofoto_color_2000-2003",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2000-2003"},19:{name:"ortofotoBlancINegre1998",key:"ortofoto_blanc_i_negre_1998",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1998"},20:{name:"ortofotoBlancINegre19941997",key:"ortofoto_blanc_i_negre_1994-1997",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1994-1997"},21:{name:"ortofotoColor1993",key:"ortofoto_color_1993",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_1993"},22:{name:"ortofotoBlancINegre19831992",key:"ortofoto_blanc_i_negre_1983-1992",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1983-1992"},23:{name:"ortofotoBlancINegre19701977",key:"ortofoto_blanc_i_negre_1970-1977",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1970-1977"},24:{name:"ortofotoBlancINegre1956",key:"ortofoto_blanc_i_negre_1956",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1956"},25:{name:"ortofotoBlancINegre1945",key:"ortofoto_blanc_i_negre_1945",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1945"},26:{name:"ortofotoColorSerieAnual",key:"ortofoto_color_serie_anual",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_serie_anual"},27:{name:"ortofotoInfraroigProvisional",key:"ortofoto_infraroig_provisional",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_provisional"},28:{name:"ortofotoInfraroig2022",key:"ortofoto_infraroig_2022",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2022"},29:{name:"ortofotoInfraroig2021",key:"ortofoto_infraroig_2021",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2021"},30:{name:"ortofotoInfraroig2020",key:"ortofoto_infraroig_2020",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2020"},31:{name:"ortofotoInfraroig2019",key:"ortofoto_infraroig_2019",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2019"},32:{name:"ortofotoInfraroig2018",key:"ortofoto_infraroig_2018",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2018"},33:{name:"ortofotoInfraroig2017",key:"ortofoto_infraroig_2017",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2017"},34:{name:"ortofotoInfraroig2016",key:"ortofoto_infraroig_2016",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2016"},35:{name:"ortofotoInfraroig2015",key:"ortofoto_infraroig_2015",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2015"},36:{name:"ortofotoInfraroig2014",key:"ortofoto_infraroig_2014",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2014"},37:{name:"ortofotoInfraroig2013",key:"ortofoto_infraroig_2013",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2013"},38:{name:"ortofotoInfraroig2012",key:"ortofoto_infraroig_2012",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2012"},39:{name:"ortofotoInfraroig2011",key:"ortofoto_infraroig_2011",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2011"},40:{name:"ortofotoInfraroig2010",key:"ortofoto_infraroig_2010",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2010"},41:{name:"ortofotoInfraroig2009",key:"ortofoto_infraroig_2009",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2009"},42:{name:"ortofotoInfraroig2008",key:"ortofoto_infraroig_2008",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2008"},43:{name:"ortofotoInfraroig20062007",key:"ortofoto_infraroig_2006-2007",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2006-2007"},44:{name:"ortofotoInfraroig19961997",key:"ortofoto_infraroig_1996-1997",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_1996-1997"},45:{name:"ortofotoInfraroigSerieAnual",key:"ortofoto_infraroig_serie_anual",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_serie_anual"}},vectorLayersICGC:{0:{name:"agrupacionsCensals2015",key:"agrupacions_censals_2015",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2015.fgb"},1:{name:"agrupacionsCensals2016",key:"agrupacions_censals_2016",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2016.fgb"},2:{name:"agrupacionsCensals2017",key:"agrupacions_censals_2017",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2017.fgb"},3:{name:"agrupacionsCensals2018",key:"agrupacions_censals_2018",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2018.fgb"},4:{name:"agrupacionsCensals2019",key:"agrupacions_censals_2019",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2019.fgb"},5:{name:"agrupacionsCensals2020",key:"agrupacions_censals_2020",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2020.fgb"},6:{name:"agrupacionsCensals2021",key:"agrupacions_censals_2021",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2021.fgb"},7:{name:"agrupacionsCensalsVigent",key:"agrupacions_censals_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_vigent.fgb"},8:{name:"agrupacionsCensalsVigentCentroid",key:"agrupacions_censals_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_vigent_centroid.fgb"},9:{name:"areesBasiquesPolicials2019",key:"arees_basiques_policials_2019",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_2019.fgb"},10:{name:"areesBasiquesPolicials2020",key:"arees_basiques_policials_2020",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_2020.fgb"},11:{name:"areesBasiquesPolicials2022",key:"arees_basiques_policials_2022",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_2022.fgb"},12:{name:"areesBasiquesPolicialsVigent",key:"arees_basiques_policials_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_vigent.fgb"},13:{name:"areesBasiquesPolicialsVigentCentroid",key:"arees_basiques_policials_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_vigent_centroid.fgb"},14:{name:"areesBasiquesSalutVigent",key:"arees_basiques_salut_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_salut_vigent.fgb"},15:{name:"areesBasiquesServeisSocialsVigent",key:"arees_basiques_serveis_socials_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_serveis_socials_vigent.fgb"},16:{name:"areesBasiquesServeisSocialsVigentCentroid",key:"arees_basiques_serveis_socials_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_serveis_socials_vigent_centroid.fgb"},17:{name:"areesGestioAssistencialVigent",key:"arees_gestio_assistencial_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/arees_gestio_assistencial_vigent.fgb"},18:{name:"areesHidrogeologiquesAquifersVigent",key:"arees_hidrogeologiques_aquifers_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/arees_hidrogeologiques_aquifers_vigent.fgb"},19:{name:"catalunyaVigent",key:"catalunya_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/catalunya_vigent.fgb"},20:{name:"catalunyaVigentCentroid",key:"catalunya_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/catalunya_vigent_centroid.fgb"},21:{name:"comarques2022",key:"comarques_2022",url:"https://tilemaps.icgc.cat/vector/fgb/comarques_2022.fgb"},22:{name:"comarquesVigent",key:"comarques_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/comarques_vigent.fgb"},23:{name:"comarquesVigentCentroid",key:"comarques_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/comarques_vigent_centroid.fgb"},24:{name:"districtesCensals2002",key:"districtes_censals_2002",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2002.fgb"},25:{name:"districtesCensals2003",key:"districtes_censals_2003",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2003.fgb"},26:{name:"districtesCensals2004",key:"districtes_censals_2004",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2004.fgb"},27:{name:"districtesCensals2005",key:"districtes_censals_2005",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2005.fgb"},28:{name:"districtesCensals2006",key:"districtes_censals_2006",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2006.fgb"},29:{name:"districtesCensals2007",key:"districtes_censals_2007",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2007.fgb"},30:{name:"districtesCensals2008",key:"districtes_censals_2008",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2008.fgb"},31:{name:"districtesCensals2009",key:"districtes_censals_2009",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2009.fgb"},32:{name:"districtesCensals2010",key:"districtes_censals_2010",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2010.fgb"},33:{name:"districtesCensals2011",key:"districtes_censals_2011",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2011.fgb"},34:{name:"districtesCensals2012",key:"districtes_censals_2012",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2012.fgb"},35:{name:"districtesCensals2013",key:"districtes_censals_2013",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2013.fgb"},36:{name:"districtesCensals2014",key:"districtes_censals_2014",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2014.fgb"},37:{name:"districtesCensals2015",key:"districtes_censals_2015",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2015.fgb"},38:{name:"districtesCensals2016",key:"districtes_censals_2016",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2016.fgb"},39:{name:"districtesCensals2017",key:"districtes_censals_2017",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2017.fgb"},40:{name:"districtesCensals2018",key:"districtes_censals_2018",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2018.fgb"},41:{name:"districtesCensals2019",key:"districtes_censals_2019",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2019.fgb"},42:{name:"districtesCensals2020",key:"districtes_censals_2020",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2020.fgb"},43:{name:"districtesCensals2021",key:"districtes_censals_2021",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2021.fgb"},44:{name:"districtesCensals2022",key:"districtes_censals_2022",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2022.fgb"},45:{name:"districtesCensalsVigent",key:"districtes_censals_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_vigent.fgb"},46:{name:"districtesCensalsVigentCentroid",key:"districtes_censals_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_vigent_centroid.fgb"},47:{name:"incendisForestalsVigent",key:"incendis_forestals_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/incendis_forestals_vigent.fgb"},48:{name:"incendisForestalsVigentCentroid",key:"incendis_forestals_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/incendis_forestals_vigent_centroid.fgb"},49:{name:"municipis2022",key:"municipis_2022",url:"https://tilemaps.icgc.cat/vector/fgb/municipis_2022.fgb"},50:{name:"municipis2022Centroid",key:"municipis_2022_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/municipis_2022_centroid.fgb"},51:{name:"municipisVigent",key:"municipis_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/municipis_vigent.fgb"},52:{name:"municipisVigentCentroid",key:"municipis_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/municipis_vigent_centroid.fgb"},53:{name:"partitsJudicialsVigent",key:"partits_judicials_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/partits_judicials_vigent.fgb"},54:{name:"partitsJudicialsVigentCentroid",key:"partits_judicials_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/partits_judicials_vigent_centroid.fgb"},55:{name:"plaTerritorial2015",key:"pla_territorial_2015",url:"https://tilemaps.icgc.cat/vector/fgb/pla_territorial_2015.fgb"},56:{name:"plaTerritorialVigent",key:"pla_territorial_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/pla_territorial_vigent.fgb"},57:{name:"plaTerritorialVigentCentroid",key:"pla_territorial_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/pla_territorial_vigent_centroid.fgb"},58:{name:"provinciesVigent",key:"provincies_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/provincies_vigent.fgb"},59:{name:"provinciesVigentCentroid",key:"provincies_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/provincies_vigent_centroid.fgb"},60:{name:"regionsPolicialsVigent",key:"regions_policials_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/regions_policials_vigent.fgb"},61:{name:"regionsPolicialsVigentCentroid",key:"regions_policials_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/regions_policials_vigent_centroid.fgb"},62:{name:"regionsSanitariesVigent",key:"regions_sanitaries_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/regions_sanitaries_vigent.fgb"},63:{name:"regionsSanitariesVigentCentroid",key:"regions_sanitaries_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/regions_sanitaries_vigent_centroid.fgb"},64:{name:"seccionsCensals2002",key:"seccions_censals_2002",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2002.fgb"},65:{name:"seccionsCensals2003",key:"seccions_censals_2003",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2003.fgb"},66:{name:"seccionsCensals2004",key:"seccions_censals_2004",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2004.fgb"},67:{name:"seccionsCensals2005",key:"seccions_censals_2005",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2005.fgb"},68:{name:"seccionsCensals2006",key:"seccions_censals_2006",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2006.fgb"},69:{name:"seccionsCensals2007",key:"seccions_censals_2007",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2007.fgb"},70:{name:"seccionsCensals2008",key:"seccions_censals_2008",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2008.fgb"},71:{name:"seccionsCensals2009",key:"seccions_censals_2009",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2009.fgb"},72:{name:"seccionsCensals2010",key:"seccions_censals_2010",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2010.fgb"},73:{name:"seccionsCensals2011",key:"seccions_censals_2011",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2011.fgb"},74:{name:"seccionsCensals2012",key:"seccions_censals_2012",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2012.fgb"},75:{name:"seccionsCensals2013",key:"seccions_censals_2013",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2013.fgb"},76:{name:"seccionsCensals2014",key:"seccions_censals_2014",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2014.fgb"},77:{name:"seccionsCensals2015",key:"seccions_censals_2015",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2015.fgb"},78:{name:"seccionsCensals2016",key:"seccions_censals_2016",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2016.fgb"},79:{name:"seccionsCensals2017",key:"seccions_censals_2017",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2017.fgb"},80:{name:"seccionsCensals2018",key:"seccions_censals_2018",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2018.fgb"},81:{name:"seccionsCensals2019",key:"seccions_censals_2019",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2019.fgb"},82:{name:"seccionsCensals2020",key:"seccions_censals_2020",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2020.fgb"},83:{name:"seccionsCensals2021",key:"seccions_censals_2021",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2021.fgb"},84:{name:"seccionsCensals2022",key:"seccions_censals_2022",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2022.fgb"},85:{name:"seccionsCensalsVigent",key:"seccions_censals_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_vigent.fgb"},86:{name:"seccionsCensalsVigentCentroid",key:"seccions_censals_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_vigent_centroid.fgb"},87:{name:"sectorsSanitarisVigent",key:"sectors_sanitaris_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/sectors_sanitaris_vigent.fgb"},88:{name:"vegueriesVigent",key:"vegueries_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/vegueries_vigent.fgb"},89:{name:"vegueriesVigentCentroid",key:"vegueries_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/vegueries_vigent_centroid.fgb"}},vectorLayers:{0:{key:"relleu",layer:"",url:"https://tilemaps.icgc.cat/mapfactory/wmts/relleu/CAT3857/{z}/{x}/{y}.png"},1:{key:"geologia",layer:"",url:"https://tilemaps.icgc.cat/mapfactory/wmts/geologia/MON3857NW/{z}/{x}/{y}.png"},2:{key:"osm",layer:"",url:"https://tilemaps.icgc.cat/mapfactory/wmts/osm_suau/CAT3857_15/{z}/{x}/{y}.png"},3:{key:"cims",layer:"",url:'"https://geoserveis.icgc.cat/icc_100cims/wms/service?REQUEST=GetMap&SERVICE=WMS&VERSION=1.1.1&LAYERS=0&STYLES=&FORMAT=image/png&BGCOLOR=0xFFFFFF&TRANSPARENT=TRUE&SRS=EPSG:25831&BBOX=137118.923076923,4488408.75,650959.076923077,4749634.75&WIDTH=895&HEIGHT=455'},4:{key:"cobertesSol",layer:"",url:"http://geoserveis.icgc.cat/servei/catalunya/cobertes-sol/wms?REQUEST=GetMap&SERVICE=WMS&VERSION=1.3.0&LAYERS=cobertes_2009&STYLES=&FORMAT=image/png&BGCOLOR=0xFFFFFF&TRANSPARENT=TRUE&CRS=EPSG:25831&BBOX=374110.828167253,4639230.79853085,452621.120632226,4703578.45000215&WIDTH=1020&HEIGHT=836"}},wmsLayers:{0:{key:"altimetria",layer:"",url:"https://betaserver.icgc.cat/tileserver3/tileserver.php/alti_bt5m/{z}/{x}/{y}.pbf"},1:{key:"toponimia",layer:"",url:"https://betaserver.icgc.cat/tileserver3/tileserver.php/redtopo/{z}/{x}/{y}.pbf"}}};let b3=class{constructor(e){if(!e)e=Tl.mapOptions;else for(const t in Tl.mapOptions){let s=[Tl.mapOptions.center[0],Tl.mapOptions.center[1]];Tl.mapOptions.center=s,e.hasOwnProperty(t)||(e[t]=Tl.mapOptions[t])}e.maxZoom=18,e.maxPitch=85,e.maplibreLogo=!1,e.attributionControl=!1,this.map=new oa.Map(e),this.map.options=e,this.map.addControl(new oa.AttributionControl({compact:!0}))}getStyle(){try{this.map.getStyle()}catch(e){console.error(`Error getting style: ${e.message}`)}}getConfigStyles(){try{let e=[];for(const t of VA)e.push(t.name);return e}catch(e){console.error(`Error retrieving base styles: ${e.message}`)}}getConfigWMSLayers(){try{let e=[];for(const t in xs.WMS)xs.WMS.hasOwnProperty(t)&&e.push(t);return e}catch(e){console.error(`Error retrieving WMS layers: ${e.message}`)}}getConfigOrtoLayers(){try{let e=[];for(const t in xs.Orto)xs.Orto.hasOwnProperty(t)&&e.push(t);return e}catch(e){console.error(`Error retrieving orto image layers: ${e.message}`)}}getConfigVectorLayers(){try{let e=[];for(const t in xs.Vector)xs.Vector.hasOwnProperty(t)&&e.push(t);return e}catch(e){console.error(`Error retrieving vector layers: ${e.message}`)}}getConfigVectorAdminLayers(){try{let e=[];for(const t in xs.VectorAdmin)xs.VectorAdmin.hasOwnProperty(t)&&e.push(t);return e}catch(e){console.error(`Error retrieving vectorAdmin layers: ${e.message}`)}}async fetchData(e,t,s){try{const u=await(await fetch(e)).json();let p=u.features[0].geometry.type;p.includes("ine")&&map.addLayer({id:t,type:"line",source:{type:"geojson",data:u},layout:{visibility:"visible"},paint:s}),p.includes("olygon")&&map.addLayer({id:t,type:"fill",source:{type:"geojson",data:u},layout:{visibility:"visible"}}),p.includes("oint")&&map.addLayer({id:t,type:"circle",source:{type:"geojson",data:u},layout:{visibility:"visible"},paint:{"circle-color":"yellow","circle-opacity":.5}})}catch(l){console.error(`Error fetching data: ${l.message}`)}}async fetchDataAndMenu(e,t,s){try{const u=await(await fetch(e)).json();let p=u.features[0].geometry.type;p.includes("ine")&&map.addLayer({id:t,type:"line",source:{type:"geojson",data:u},layout:{visibility:"visible"},paint:s}),p.includes("olygon")&&map.addLayer({id:t,type:"fill",source:{type:"geojson",data:u},layout:{visibility:"visible"}}),p.includes("oint")&&map.addLayer({id:t,type:"circle",source:{type:"geojson",data:u},layout:{visibility:"visible"},paint:{"circle-color":"yellow","circle-opacity":.5}}),map.addMenuItem(t)}catch(l){console.error(`Error fetching data: ${l.message}`)}}async geocodeAddress(){try{let a=function(m){var w=turf.filter(p,"address",m);return w.features.slice(0,5)};var e=document.getElementById("addressInput"),t=e.value;const p=await(await fetch(url)).json();var s=document.getElementById("results");s.innerHTML="";var l=a(t);l.length>0?l.forEach(function(m){var w=m.geometry.coordinates,S=m.properties.address,T=document.createElement("div");T.innerHTML="<strong>"+S+"</strong><br>Coordenadas: "+w.join(", "),s.appendChild(T)}):s.innerHTML="No se encontraron resultados para la direccin: "+t}catch{}}async fetchDataWithSearchbox(e,t,s,l,u){try{let m=function(w){var S=turf.filter(a,"address",w);return S.features.slice(0,5)};const a=await(await fetch(e)).json()}catch(p){console.error(`Error fetching data: ${p.message}`)}}on(e,t){try{this.map.on(e,t)}catch(s){console.error(`Error adding event listener: ${s.message}`)}}getSource(e){try{this.map.getSource(e)}catch(t){console.error(`Error getting source: ${t.message}`)}}addSource(e,t){try{this.map.addSource(e,t)}catch(s){console.error(`Error adding source: ${s.message}`)}}setStyle(e,t){try{console.log("kk",e);for(const s of VA)if(VA.hasOwnProperty(s)){const l=VA[s];l.key===e&&(e=l.url)}console.log("base",e),t!==void 0?this.map.setStyle(e,t):this.map.setStyle(e)}catch(s){console.error(`Error setting style: ${s.message}`)}}getLayer(e){try{this.map.getLayer(e)}catch(t){console.error(`Error getting layer: ${t.message}`)}}jumpTo(e){try{this.map.jumpTo(e)}catch(t){console.error(`Error jumping to ${e}: ${t.message}`)}}setLayoutProperty(e){try{this.map.setLayoutProperty(e)}catch(t){console.error(`Error setting layout property: ${t.message}`)}}addControl(e,t){try{t===void 0&&(t="top-right"),this.map.addControl(e,t)}catch(s){console.error(`Error adding control: ${s.message}`)}}getZoom(){try{return this.map.getZoom()}catch(e){console.error(`Error getting zoom level: ${e.message}`)}}addMouseCoordControl(){try{this.map.on("mousemove",function(e){const t=e.lngLat.lat,l="Lon/Lat (WGS 84)   Lon: "+e.lngLat.lng.toFixed(6)+"  Lat: "+t.toFixed(6),u=document.getElementById("divInfo"),p=document.createElement("div");p.className="coordControl",p.innerHTML=l+" - ZL: "+map.getZoom().toFixed(1),u.appendChild(p)})}catch(e){console.error(`Error adding mouse coordinate control: ${e.message}`)}}addGeolocateControl(e,t){try{t===void 0&&(t="top-right"),e===void 0?this.map.addControl(new oa.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),t):this.map.addControl(new oa.GeolocateControl(e),t)}catch(s){console.error(`Error adding geolocate control: ${s.message}`)}}getBounds(){try{return this.map.getBounds()}catch(e){console.error(`Error getting bounds: ${e.message}`)}}getCenter(){try{return this.map.getCenter()}catch(e){console.error(`Error getting center: ${e.message}`)}}setTerrain(e){try{this.map.on("load",()=>this.map.setTerrain(e))}catch(t){console.error(`Error setting terrain: ${t.message}`)}}getCanvas(){try{return this.map.getCanvas()}catch(e){console.error(`Error getting canvas: ${e.message}`)}}setCenter(e){try{return this.map.setCenter(e)}catch(t){console.error(`Error setting center: ${t.message}`)}}addLayer(e){try{this.map.addLayer(e)}catch(t){console.error(`Error adding layer: ${t.message}`)}}addLayerGeoJSON(e){try{this.map.on("load",()=>{this.map.addSource(`${e.id}-sourceIcgcMap`,{type:"geojson",data:e.data}),this.map.addLayer({id:`${e.id}-layerIcgcMap`,type:e.layerType,source:`${e.id}-sourceIcgcMap`,layout:e.layout,paint:e.paint})})}catch(t){console.error(`Error adding GeoJSON layer: ${t.message}`)}}addLayerWMS(e){try{this.map.on("load",()=>{console.log("holaaddlayerwms",e),this.map.addSource(`${e.id}-sourceIcgcMap`,{type:"raster",tiles:[e.tiles],tileSize:256}),this.map.addLayer({id:`${e.id}-layerIcgcMap`,type:"raster",source:`${e.id}-sourceIcgcMap`,paint:{}})})}catch(t){console.error(`Error adding WMS layer: ${t.message}`)}}removeControl(e){try{this.map.removeControl(e)}catch(t){console.error(`Error removing control: ${t.message}`)}}removeLayer(e){try{this.map.removeLayer(e)}catch(t){console.error(`Error removing layer: ${t.message}`)}}removeSource(e){try{this.map.removeSource(e)}catch(t){console.error(`Error removing source: ${t.message}`)}}addLogo(e){try{const t=document.createElement("img");t.src=e.url,t.style.height="62px";const s=document.getElementById("logos"),l=document.createElement("a");l.id=e.id,l.href=e.href,l.target="_blank",l.style.position="relative",l.style.bottom="1px",l.appendChild(t),s.appendChild(l)}catch(t){console.error(`Error adding logo: ${t.message}`)}}addBasemapsICGC(e){try{const t=l=>{this.map.setStyle(l)},s=document.getElementById("basemap-group");this.map.on("load",()=>{for(const l of e)for(const u of Object.keys(Tl.baseStyles)){const p=Tl.baseStyles[u];if(l===p.url){const a=document.createElement("div");a.className="basemap-item",a.title=p.key,a.style.backgroundImage=`url('${p.image}')`,s.appendChild(a),a.addEventListener("click",()=>t(p.url))}}})}catch(t){console.error(`Error adding basemaps: ${t.message}`)}}addBasemaps(e){try{const t=l=>{console.log("base",l),this.map.setStyle(l.url)},s=document.getElementById("basemap-group");this.map.on("load",()=>{e.forEach(l=>{const u=document.createElement("div");u.className="basemap-item",u.title=l.label,u.style.backgroundImage=`url('${l.image}')`,s.appendChild(u),u.addEventListener("click",()=>t(l))})})}catch(t){console.error(`Error adding basemaps: ${t.message}`)}}addFeatureQuery(e,t){try{let s;this.map.on("load",()=>{this.map.on("mouseenter",e,()=>{this.map.getCanvas().style.cursor="pointer"}),this.map.on("mouseleave",e,()=>{this.map.getCanvas().style.cursor=""}),this.map.on("click",l=>{let u=this.map.queryRenderedFeatures(l.point);if(u&&u[0].source===e){let p=[l.lngLat.lng,l.lngLat.lat];if(t!==void 0&&t.length>0){if(t!==null){let a="";t.forEach(m=>{let w=u[0].properties[m];a=a+`<h4>${w}</h4>`}),s=a,map.addPopup(p,s)}}else{let a="";for(const m in u[0].properties)a+="<b>"+m+"</b>:"+u[0].properties[m]+"<br>";s=a,map.addPopup(p,s)}}})})}catch(s){console.error(`Error adding feature query: ${s.message}`)}}addScaleControl(e,t){try{var s=new oa.ScaleControl(e);this.map.addControl(s,t)}catch(l){console.error(`Error adding scale: ${l.message}`)}}removeMeasureControl(){try{const e=document.getElementById("xButton"),t=document.getElementById("distance");t.innerHTML="";let s=this.map.getStyle().layers;for(let l=0;l<s.length;l++)s[l].id.includes("measure")&&this.map.removeLayer(s[l].id)}catch(e){console.error(`Error removing measure control: ${e.message}`)}}addMeasureControl(){try{let w=function(T,Q){const I=Q.queryRenderedFeatures(T.point,{layers:["measure-points"]});if(a.features.length>1&&a.features.pop(),s.innerHTML="",I.length){const Y=I[0].properties.id;a.features=a.features.filter(K=>K.properties.id!==Y)}else{const Y={type:"Feature",geometry:{type:"Point",coordinates:[T.lngLat.lng,T.lngLat.lat]},properties:{id:String(new Date().getTime())}};a.features.push(Y)}m.geometry.coordinates=a.features.map(Y=>Y.geometry.coordinates),a.features.push(m);const q=document.createElement("pre");q.textContent=`Distncia total: ${turf.length(m).toLocaleString()}km`,s.appendChild(q);const j=document.createElement("div");j.id="xButton",j.textContent="X",j.onclick=()=>{try{const Y=document.getElementById("xButton"),K=document.getElementById("distance");K.innerHTML="";let ne=Q.getStyle().layers;for(let he=0;he<ne.length;he++)ne[he].id.includes("measure")&&Q.removeLayer(ne[he].id)}catch(Y){console.error(`Error adding measure control: ${Y.message}`)}},s.appendChild(j),Q.getSource("geojson").setData(a)},S=function(T,Q){Q.getCanvas().style.cursor="grab",l=!0};const t=document.getElementById("distance"),s=document.getElementById("distanceTotal");let l=!1,u=!1;var e;const p=document.createElement("div");p.id="rulerButton",p.onclick=()=>{try{u?document.getElementById("rulerButton").style.backgroundColor="#ff597a":document.getElementById("rulerButton").style.backgroundColor="#41b883",u=!u}catch(T){console.error(`Error adding measure control: ${T.message}`)}},s.appendChild(p);const a={type:"FeatureCollection",features:[]},m={type:"Feature",geometry:{type:"LineString",coordinates:[]}};this.map.on("load",()=>{this.map.addSource("geojson",{type:"geojson",data:a}),this.map.addLayer({id:"measure-points",type:"circle",source:"geojson",paint:{"circle-radius":5,"circle-color":"#000"},filter:["in","$type","Point"]}),this.map.addLayer({id:"measure-lines",type:"line",source:"geojson",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#000","line-width":2.5},filter:["in","$type","LineString"]})}),this.map.on("click",T=>{clearTimeout(e),!l&&u&&(e=setTimeout(()=>{w(T,this.map)},50))}),this.map.on("dblclick",T=>{u&&(clearTimeout(e),S(T,this.map))}),this.map.on("mousemove",T=>{if(!l&&u){const Q=this.map.queryRenderedFeatures(T.point,{layers:["measure-points"]});this.map.getCanvas().style.cursor=Q.length?"pointer":"crosshair"}else this.map.getCanvas().style.cursor="grab"})}catch{}}addExportControl(e,t){try{typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e={PageSize:du.A4,PageOrientation:gh.Landscape,Format:Ll.PNG,DPI:Dg[300],Crosshair:!0,PrintableArea:!0},t="top-right"),map.addControl(new w3(e),t)}catch(s){console.error(`Error adding export control: ${s.message}`)}}addPopup(e,t){try{this.map.on("load",()=>{new oa.Popup().setLngLat(e).setHTML(t).addTo(this.map)})}catch{}}addMarker(e){try{let t,s;return e.text===void 0?t=new oa.Marker(e.options).setLngLat(e.coord).addTo(this.map):(s=new oa.Popup({offset:e.textOffset}).setText(e.text),t=new oa.Marker().setLngLat(e.coord).setPopup(s).addTo(this.map)),t}catch(t){return console.error(`Error adding marker: ${t.message}`),null}}addPopup(e,t){try{return new oa.Popup().setLngLat(e).setHTML(t).addTo(this.map)}catch(s){return console.error(`Error adding popup: ${s.message}`),null}}addFullScreen(e){try{e===void 0&&(e="top-right"),this.map.addControl(new oa.FullscreenControl,e)}catch(t){console.error(`Error adding fullscreen control: ${t.message}`)}}addMenuItem(e){try{const t=document.getElementById("menu-group"),s=document.createElement("input");s.type="checkbox",s.id=e,s.checked=!0,t.appendChild(s);const l=document.createElement("label");l.setAttribute("for",e),l.textContent=e,t.appendChild(l),s.addEventListener("change",u=>{this.map.setLayoutProperty(e,"visibility",u.target.checked?"visible":"none")})}catch(t){console.error(`Error adding menu item: ${t.message}`)}}addLayerTree(e){try{let t=e.features;const s=document.getElementById("filter-group");this.map.on("load",()=>{const l=this.map.getStyle().layers;let u;for(let p=0;p<l.length;p++)if(l[p].type==="symbol"){u=l[p].id;break}this.map.addSource(`${e.id}-source`,{type:e.type,data:t}),t.features.forEach(p=>{const a=p.properties.icon,m=`poi-${a}`;if(!this.map.getLayer(m)){this.map.addLayer({id:m,type:"circle",source:`${e.id}-source`,paint:{"circle-radius":6,"circle-color":"#B42222"},filter:["==","icon",a]},u);const w=document.createElement("input");w.type="checkbox",w.id=m,w.checked=!0,s.appendChild(w);const S=document.createElement("label");S.setAttribute("for",m),S.textContent=a,s.appendChild(S),w.addEventListener("change",T=>{this.map.setLayoutProperty(m,"visibility",T.target.checked?"visible":"none")})}})})}catch(t){console.error(`Error adding layer tree: ${t.message}`)}}createNavigationControl(e,t){try{t===void 0&&(t="top-right"),this.map.addControl(new oa.NavigationControl(e),t)}catch(s){return console.error(`Error creating navigation control: ${s.message}`),null}}addNavigationControl(e,t){try{t===void 0&&(t="top-right"),this.map.addControl(new oa.NavigationControl(e),t)}catch(s){console.error(`Error adding navigation control: ${s.message}`)}}addAttributionControl(e){try{this.map.addControl(new oa.AttributionControl(e.options),e.position)}catch(t){console.error(`Error adding attribution control: ${t.message}`)}}_dealStyleMaps(e){try{if(e&&e.indexOf("icgc.cat")!=-1){for(const t in VA)if(VA.hasOwnProperty(t)){const s=VA[t];if(t===e)return s}return VA[0]}else return e}catch(t){return console.error(`Error dealing with map styles: ${t.message}`),null}}addImageLayerICGC(e){try{let s=function(u,p,a,m,w){console.log("hola",e);const S=[p,a,m,w];for(const T of S)for(const[Q,I]of Object.entries(T))if(I===u)return Q;return null};console.log("name",e);let t=null;t=s(e,xs.Orto,xs.VectorAdmin,xs.WMS,xs.Vector),console.log("op",t),t||console.log(" %c The layer: %c%s%c does not exist in the ICGC DB. Consult the documentation.","font-weight: bold; font-style: italic;","font-weight: normal; font-style: normal; color: red;",e,"font-weight: bold; font-style: italic;");let l={id:t,tiles:e};console.log("source",l),this.addLayerWMS(l)}catch(t){console.error(`Error adding ICGC image layer: ${t.message}`)}}async addVectorLayerICGC(e,t,s){try{let u=function(p){for(const a in xs.VectorAdmin)if(xs.VectorAdmin.hasOwnProperty(a)&&xs.VectorAdmin[a]===p)return a;return null}(e);if(u===null)console.log(" %c The layer: %c%s%c does not exist in the ICGC DB. Consult the documentation.","font-weight: bold; font-style: italic;","font-weight: normal; font-style: normal; color: red;",u,"font-weight: bold; font-style: italic;");else{const p=await fetch(e);this.map.on("load",async()=>{const a={type:"FeatureCollection",features:[]};for await(const w of flatgeobuf.deserialize(p.body))a.features.push(w);let m=op.name+"-source";this.map.addSource(m,{type:"geojson",data:a}),this.map.addLayer({id:op.name+"-fill",type:"fill",source:m,paint:{"fill-color":"#0000FF","fill-opacity":0}}),this.map.addLayer({id:op.name+"-line",type:"line",source:m,paint:{"line-color":"#FFFFFF","line-opacity":.49,"line-width":1}})})}}catch(l){console.error(`Error adding ICGC vector layer: ${l.message}`)}}addTerrainICGC(e,t){this.map.on("load",()=>{try{let s;for(const u in $p)if($p.hasOwnProperty(u)){const p=$p[u];p===e&&(s=p)}let l=s;this.map.addSource("terrainICGC-src",{type:"raster-dem",tiles:[l],tileSize:512,maxzoom:16}),this.map.setTerrain({source:"terrainICGC-src",exaggeration:1.5}),t===void 0&&(t="top-right"),this.map.addControl(new A4({pitch:90,bearing:null,minpitchzoom:null}),t)}catch(s){console.error(`Error adding 3D terrain: ${s.message}`)}})}};var Nv={exports:{}};function x3(n,e){var t=n.getCenter(),s=n.getZoom(),l=n.getBearing(),u=n.getPitch();e.forEach(function(p){p.jumpTo({center:t,zoom:s,bearing:l,pitch:u})})}function B3(){var n,e=arguments.length;if(e===1)n=arguments[0];else{n=[];for(var t=0;t<e;t++)n.push(arguments[t])}var s=[];n.forEach(function(a,m){s[m]=p.bind(null,a,n.filter(function(w,S){return S!==m}))});function l(){n.forEach(function(a,m){a.on("move",s[m])})}function u(){n.forEach(function(a,m){a.off("move",s[m])})}function p(a,m){u(),x3(a,m),l()}return l(),function(){u(),s=[],n=[]}}var C3=B3,Ng={exports:{}},fu=typeof Reflect=="object"?Reflect:null,Ov=fu&&typeof fu.apply=="function"?fu.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)},Wp;fu&&typeof fu.ownKeys=="function"?Wp=fu.ownKeys:Object.getOwnPropertySymbols?Wp=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Wp=function(e){return Object.getOwnPropertyNames(e)};function S3(n){console&&console.warn&&console.warn(n)}var Rv=Number.isNaN||function(e){return e!==e};function Fi(){Fi.init.call(this)}Ng.exports=Fi,Ng.exports.once=L3,Fi.EventEmitter=Fi,Fi.prototype._events=void 0,Fi.prototype._eventsCount=0,Fi.prototype._maxListeners=void 0;var zv=10;function Xp(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(Fi,"defaultMaxListeners",{enumerable:!0,get:function(){return zv},set:function(n){if(typeof n!="number"||n<0||Rv(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");zv=n}}),Fi.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Fi.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Rv(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Hv(n){return n._maxListeners===void 0?Fi.defaultMaxListeners:n._maxListeners}Fi.prototype.getMaxListeners=function(){return Hv(this)},Fi.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var l=e==="error",u=this._events;if(u!==void 0)l=l&&u.error===void 0;else if(!l)return!1;if(l){var p;if(t.length>0&&(p=t[0]),p instanceof Error)throw p;var a=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw a.context=p,a}var m=u[e];if(m===void 0)return!1;if(typeof m=="function")Ov(m,this,t);else for(var w=m.length,S=Kv(m,w),s=0;s<w;++s)Ov(S[s],this,t);return!0};function Vv(n,e,t,s){var l,u,p;if(Xp(t),u=n._events,u===void 0?(u=n._events=Object.create(null),n._eventsCount=0):(u.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),u=n._events),p=u[e]),p===void 0)p=u[e]=t,++n._eventsCount;else if(typeof p=="function"?p=u[e]=s?[t,p]:[p,t]:s?p.unshift(t):p.push(t),l=Hv(n),l>0&&p.length>l&&!p.warned){p.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=n,a.type=e,a.count=p.length,S3(a)}return n}Fi.prototype.addListener=function(e,t){return Vv(this,e,t,!1)},Fi.prototype.on=Fi.prototype.addListener,Fi.prototype.prependListener=function(e,t){return Vv(this,e,t,!0)};function F3(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function jv(n,e,t){var s={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},l=F3.bind(s);return l.listener=t,s.wrapFn=l,l}Fi.prototype.once=function(e,t){return Xp(t),this.on(e,jv(this,e,t)),this},Fi.prototype.prependOnceListener=function(e,t){return Xp(t),this.prependListener(e,jv(this,e,t)),this},Fi.prototype.removeListener=function(e,t){var s,l,u,p,a;if(Xp(t),l=this._events,l===void 0)return this;if(s=l[e],s===void 0)return this;if(s===t||s.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete l[e],l.removeListener&&this.emit("removeListener",e,s.listener||t));else if(typeof s!="function"){for(u=-1,p=s.length-1;p>=0;p--)if(s[p]===t||s[p].listener===t){a=s[p].listener,u=p;break}if(u<0)return this;u===0?s.shift():E3(s,u),s.length===1&&(l[e]=s[0]),l.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this},Fi.prototype.off=Fi.prototype.removeListener,Fi.prototype.removeAllListeners=function(e){var t,s,l;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var u=Object.keys(s),p;for(l=0;l<u.length;++l)p=u[l],p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=s[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(l=t.length-1;l>=0;l--)this.removeListener(e,t[l]);return this};function Gv(n,e,t){var s=n._events;if(s===void 0)return[];var l=s[e];return l===void 0?[]:typeof l=="function"?t?[l.listener||l]:[l]:t?I3(l):Kv(l,l.length)}Fi.prototype.listeners=function(e){return Gv(this,e,!0)},Fi.prototype.rawListeners=function(e){return Gv(this,e,!1)},Fi.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):qv.call(n,e)},Fi.prototype.listenerCount=qv;function qv(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Fi.prototype.eventNames=function(){return this._eventsCount>0?Wp(this._events):[]};function Kv(n,e){for(var t=new Array(e),s=0;s<e;++s)t[s]=n[s];return t}function E3(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function I3(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function L3(n,e){return new Promise(function(t,s){function l(p){n.removeListener(e,u),s(p)}function u(){typeof n.removeListener=="function"&&n.removeListener("error",l),t([].slice.call(arguments))}$v(n,e,u,{once:!0}),e!=="error"&&T3(n,l,{once:!0})})}function T3(n,e,t){typeof n.on=="function"&&$v(n,"error",e,t)}function $v(n,e,t,s){if(typeof n.on=="function")s.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function l(u){s.once&&n.removeEventListener(e,l),t(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var U3=Ng.exports;(function(n){var e=C3,t=U3.EventEmitter;function s(l,u,p,a){if(this.options=a||{},this._mapA=l,this._mapB=u,this._horizontal=this.options.orientation==="horizontal",this._onDown=this._onDown.bind(this),this._onMove=this._onMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._ev=new t,this._swiper=document.createElement("div"),this._swiper.className=this._horizontal?"compare-swiper-horizontal":"compare-swiper-vertical",this._controlContainer=document.createElement("div"),this._controlContainer.className=this._horizontal?"maplibregl-compare maplibregl-compare-horizontal":"maplibregl-compare",this._controlContainer.className=this._controlContainer.className,this._controlContainer.appendChild(this._swiper),typeof p=="string"&&document.body.querySelectorAll){var m=document.body.querySelectorAll(p)[0];if(!m)throw new Error("Cannot find element with specified container selector.");m.appendChild(this._controlContainer)}else if(p instanceof Element&&p.appendChild)p.appendChild(this._controlContainer);else throw new Error("Invalid container specified. Must be CSS selector or HTML element.");this._bounds=u.getContainer().getBoundingClientRect();var w=(this._horizontal?this._bounds.height:this._bounds.width)/2;this._setPosition(w),this._clearSync=e(l,u),this._onResize=(function(){this._bounds=u.getContainer().getBoundingClientRect(),this.currentPosition&&this._setPosition(this.currentPosition)}).bind(this),u.on("resize",this._onResize),this.options&&this.options.mousemove&&(l.getContainer().addEventListener("mousemove",this._onMove),u.getContainer().addEventListener("mousemove",this._onMove)),this._swiper.addEventListener("mousedown",this._onDown),this._swiper.addEventListener("touchstart",this._onDown)}s.prototype={_setPointerEvents:function(l){this._controlContainer.style.pointerEvents=l,this._swiper.style.pointerEvents=l},_onDown:function(l){l.touches?(document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onTouchEnd)):(document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onMouseUp))},_setPosition:function(l){l=Math.min(l,this._horizontal?this._bounds.height:this._bounds.width);var u=this._horizontal?"translate(0, "+l+"px)":"translate("+l+"px, 0)";this._controlContainer.style.transform=u,this._controlContainer.style.WebkitTransform=u;var p=this._horizontal?"rect(0, 999em, "+l+"px, 0)":"rect(0, "+l+"px, "+this._bounds.height+"px, 0)",a=this._horizontal?"rect("+l+"px, 999em, "+this._bounds.height+"px,0)":"rect(0, 999em, "+this._bounds.height+"px,"+l+"px)";this._mapA.getContainer().style.clip=p,this._mapB.getContainer().style.clip=a,this.currentPosition=l},_onMove:function(l){this.options&&this.options.mousemove&&this._setPointerEvents(l.touches?"auto":"none"),this._horizontal?this._setPosition(this._getY(l)):this._setPosition(this._getX(l))},_onMouseUp:function(){document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onMouseUp),this.fire("slideend",{currentPosition:this.currentPosition})},_onTouchEnd:function(){document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onTouchEnd),this.fire("slideend",{currentPosition:this.currentPosition})},_getX:function(l){l=l.touches?l.touches[0]:l;var u=l.clientX-this._bounds.left;return u<0&&(u=0),u>this._bounds.width&&(u=this._bounds.width),u},_getY:function(l){l=l.touches?l.touches[0]:l;var u=l.clientY-this._bounds.top;return u<0&&(u=0),u>this._bounds.height&&(u=this._bounds.height),u},setSlider:function(l){this._setPosition(l)},on:function(l,u){return this._ev.on(l,u),this},fire:function(l,u){return this._ev.emit(l,u),this},off:function(l,u){return this._ev.removeListener(l,u),this},remove:function(){this._clearSync(),this._mapB.off("resize",this._onResize);var l=this._mapA.getContainer();l&&(l.style.clip=null,l.removeEventListener("mousemove",this._onMove));var u=this._mapB.getContainer();u&&(u.style.clip=null,u.removeEventListener("mousemove",this._onMove)),this._swiper.removeEventListener("mousedown",this._onDown),this._swiper.removeEventListener("touchstart",this._onDown),this._controlContainer.remove()}},window.maplibregl?maplibregl.Compare=s:n.exports=s})(Nv);var P3=Nv.exports;const Q3=Xy(P3);class M3{constructor(e,t,s,l){this.mapCompare=new Q3(e.map,t.map,s,{})}}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Og=function(n,e){return Og=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])},Og(n,e)};function ho(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Og(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Rg=function(){return Rg=Object.assign||function(n){for(var e,t=1,s=arguments.length;t<s;t++){e=arguments[t];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(n[l]=e[l])}return n},Rg.apply(this,arguments)};function Hs(n,e,t,s){function l(u){return u instanceof t?u:new t(function(p){p(u)})}return new(t||(t=Promise))(function(u,p){function a(S){try{w(s.next(S))}catch(T){p(T)}}function m(S){try{w(s.throw(S))}catch(T){p(T)}}function w(S){S.done?u(S.value):l(S.value).then(a,m)}w((s=s.apply(n,e||[])).next())})}function Bs(n,e){var t={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,l,u,p;return p={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function a(w){return function(S){return m([w,S])}}function m(w){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,l&&(u=w[0]&2?l.return:w[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,w[1])).done)return u;switch(l=0,u&&(w=[w[0]&2,u.value]),w[0]){case 0:case 1:u=w;break;case 4:return t.label++,{value:w[1],done:!1};case 5:t.label++,l=w[1],w=[0];continue;case 7:w=t.ops.pop(),t.trys.pop();continue;default:if(u=t.trys,!(u=u.length>0&&u[u.length-1])&&(w[0]===6||w[0]===2)){t=0;continue}if(w[0]===3&&(!u||w[1]>u[0]&&w[1]<u[3])){t.label=w[1];break}if(w[0]===6&&t.label<u[1]){t.label=u[1],u=w;break}if(u&&t.label<u[2]){t.label=u[2],t.ops.push(w);break}u[2]&&t.ops.pop(),t.trys.pop();continue}w=e.call(n,t)}catch(S){w=[6,S],l=0}finally{s=u=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}function Zp(n,e,t){if(t||arguments.length===2)for(var s=0,l=e.length,u;s<l;s++)(u||!(s in e))&&(u||(u=Array.prototype.slice.call(e,0,s)),u[s]=e[s]);return n.concat(u||e)}for(var jA=function(){function n(e,t,s,l){this.left=e,this.top=t,this.width=s,this.height=l}return n.prototype.add=function(e,t,s,l){return new n(this.left+e,this.top+t,this.width+s,this.height+l)},n.fromClientRect=function(e,t){return new n(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},n.fromDOMRectList=function(e,t){var s=Array.from(t).find(function(l){return l.width!==0});return s?new n(s.left+e.windowBounds.left,s.top+e.windowBounds.top,s.width,s.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),Yp=function(n,e){return jA.fromClientRect(n,e.getBoundingClientRect())},k3=function(n){var e=n.body,t=n.documentElement;if(!e||!t)throw new Error("Unable to get document size");var s=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),l=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new jA(0,0,s,l)},Jp=function(n){for(var e=[],t=0,s=n.length;t<s;){var l=n.charCodeAt(t++);if(l>=55296&&l<=56319&&t<s){var u=n.charCodeAt(t++);(u&64512)===56320?e.push(((l&1023)<<10)+(u&1023)+65536):(e.push(l),t--)}else e.push(l)}return e},hn=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var s=[],l=-1,u="";++l<t;){var p=n[l];p<=65535?s.push(p):(p-=65536,s.push((p>>10)+55296,p%1024+56320)),(l+1===t||s.length>16384)&&(u+=String.fromCharCode.apply(String,s),s.length=0)}return u},Wv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D3=typeof Uint8Array>"u"?[]:new Uint8Array(256),ed=0;ed<Wv.length;ed++)D3[Wv.charCodeAt(ed)]=ed;for(var Xv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mh=typeof Uint8Array>"u"?[]:new Uint8Array(256),td=0;td<Xv.length;td++)mh[Xv.charCodeAt(td)]=td;for(var N3=function(n){var e=n.length*.75,t=n.length,s,l=0,u,p,a,m;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var w=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),S=Array.isArray(w)?w:new Uint8Array(w);for(s=0;s<t;s+=4)u=mh[n.charCodeAt(s)],p=mh[n.charCodeAt(s+1)],a=mh[n.charCodeAt(s+2)],m=mh[n.charCodeAt(s+3)],S[l++]=u<<2|p>>4,S[l++]=(p&15)<<4|a>>2,S[l++]=(a&3)<<6|m&63;return w},O3=function(n){for(var e=n.length,t=[],s=0;s<e;s+=2)t.push(n[s+1]<<8|n[s]);return t},R3=function(n){for(var e=n.length,t=[],s=0;s<e;s+=4)t.push(n[s+3]<<24|n[s+2]<<16|n[s+1]<<8|n[s]);return t},vc=5,zg=11,Hg=2,z3=zg-vc,Zv=65536>>vc,H3=1<<vc,Vg=H3-1,V3=1024>>vc,j3=Zv+V3,G3=j3,q3=32,K3=G3+q3,$3=65536>>zg,W3=1<<z3,X3=W3-1,Yv=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},Z3=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},Y3=function(n,e){var t=N3(n),s=Array.isArray(t)?R3(t):new Uint32Array(t),l=Array.isArray(t)?O3(t):new Uint16Array(t),u=24,p=Yv(l,u/2,s[4]/2),a=s[5]===2?Yv(l,(u+s[4])/2):Z3(s,Math.ceil((u+s[4])/4));return new J3(s[0],s[1],s[2],s[3],p,a)},J3=function(){function n(e,t,s,l,u,p){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=l,this.index=u,this.data=p}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>vc],t=(t<<Hg)+(e&Vg),this.data[t];if(e<=65535)return t=this.index[Zv+(e-55296>>vc)],t=(t<<Hg)+(e&Vg),this.data[t];if(e<this.highStart)return t=K3-$3+(e>>zg),t=this.index[t],t+=e>>vc&X3,t=this.index[t],t=(t<<Hg)+(e&Vg),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),Jv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",eS=typeof Uint8Array>"u"?[]:new Uint8Array(256),rd=0;rd<Jv.length;rd++)eS[Jv.charCodeAt(rd)]=rd;var tS="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",e2=50,rS=1,t2=2,r2=3,iS=4,nS=5,i2=7,n2=8,s2=9,Ul=10,jg=11,a2=12,Gg=13,sS=14,yh=15,qg=16,id=17,vh=18,aS=19,o2=20,Kg=21,_h=22,$g=23,gu=24,Sa=25,wh=26,bh=27,mu=28,oS=29,yu=30,AS=31,nd=32,sd=33,Wg=34,Xg=35,Zg=36,xh=37,Yg=38,ad=39,od=40,Jg=41,A2=42,lS=43,cS=[9001,65288],l2="!",Vs="",Ad="",em=Y3(tS),GA=[yu,Zg],tm=[rS,t2,r2,nS],c2=[Ul,n2],u2=[bh,wh],uS=tm.concat(c2),h2=[Yg,ad,od,Wg,Xg],hS=[yh,Gg],pS=function(n,e){e===void 0&&(e="strict");var t=[],s=[],l=[];return n.forEach(function(u,p){var a=em.get(u);if(a>e2?(l.push(!0),a-=e2):l.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(u)!==-1)return s.push(p),t.push(qg);if(a===iS||a===jg){if(p===0)return s.push(p),t.push(yu);var m=t[p-1];return uS.indexOf(m)===-1?(s.push(s[p-1]),t.push(m)):(s.push(p),t.push(yu))}if(s.push(p),a===AS)return t.push(e==="strict"?Kg:xh);if(a===A2||a===oS)return t.push(yu);if(a===lS)return u>=131072&&u<=196605||u>=196608&&u<=262141?t.push(xh):t.push(yu);t.push(a)}),[s,t,l]},rm=function(n,e,t,s){var l=s[t];if(Array.isArray(n)?n.indexOf(l)!==-1:n===l)for(var u=t;u<=s.length;){u++;var p=s[u];if(p===e)return!0;if(p!==Ul)break}if(l===Ul)for(var u=t;u>0;){u--;var a=s[u];if(Array.isArray(n)?n.indexOf(a)!==-1:n===a)for(var m=t;m<=s.length;){m++;var p=s[m];if(p===e)return!0;if(p!==Ul)break}if(a!==Ul)break}return!1},p2=function(n,e){for(var t=n;t>=0;){var s=e[t];if(s===Ul)t--;else return s}return 0},dS=function(n,e,t,s,l){if(t[s]===0)return Vs;var u=s-1;if(Array.isArray(l)&&l[u]===!0)return Vs;var p=u-1,a=u+1,m=e[u],w=p>=0?e[p]:0,S=e[a];if(m===t2&&S===r2)return Vs;if(tm.indexOf(m)!==-1)return l2;if(tm.indexOf(S)!==-1||c2.indexOf(S)!==-1)return Vs;if(p2(u,e)===n2)return Ad;if(em.get(n[u])===jg||(m===nd||m===sd)&&em.get(n[a])===jg||m===i2||S===i2||m===s2||[Ul,Gg,yh].indexOf(m)===-1&&S===s2||[id,vh,aS,gu,mu].indexOf(S)!==-1||p2(u,e)===_h||rm($g,_h,u,e)||rm([id,vh],Kg,u,e)||rm(a2,a2,u,e))return Vs;if(m===Ul)return Ad;if(m===$g||S===$g)return Vs;if(S===qg||m===qg)return Ad;if([Gg,yh,Kg].indexOf(S)!==-1||m===sS||w===Zg&&hS.indexOf(m)!==-1||m===mu&&S===Zg||S===o2||GA.indexOf(S)!==-1&&m===Sa||GA.indexOf(m)!==-1&&S===Sa||m===bh&&[xh,nd,sd].indexOf(S)!==-1||[xh,nd,sd].indexOf(m)!==-1&&S===wh||GA.indexOf(m)!==-1&&u2.indexOf(S)!==-1||u2.indexOf(m)!==-1&&GA.indexOf(S)!==-1||[bh,wh].indexOf(m)!==-1&&(S===Sa||[_h,yh].indexOf(S)!==-1&&e[a+1]===Sa)||[_h,yh].indexOf(m)!==-1&&S===Sa||m===Sa&&[Sa,mu,gu].indexOf(S)!==-1)return Vs;if([Sa,mu,gu,id,vh].indexOf(S)!==-1)for(var T=u;T>=0;){var Q=e[T];if(Q===Sa)return Vs;if([mu,gu].indexOf(Q)!==-1)T--;else break}if([bh,wh].indexOf(S)!==-1)for(var T=[id,vh].indexOf(m)!==-1?p:u;T>=0;){var Q=e[T];if(Q===Sa)return Vs;if([mu,gu].indexOf(Q)!==-1)T--;else break}if(Yg===m&&[Yg,ad,Wg,Xg].indexOf(S)!==-1||[ad,Wg].indexOf(m)!==-1&&[ad,od].indexOf(S)!==-1||[od,Xg].indexOf(m)!==-1&&S===od||h2.indexOf(m)!==-1&&[o2,wh].indexOf(S)!==-1||h2.indexOf(S)!==-1&&m===bh||GA.indexOf(m)!==-1&&GA.indexOf(S)!==-1||m===gu&&GA.indexOf(S)!==-1||GA.concat(Sa).indexOf(m)!==-1&&S===_h&&cS.indexOf(n[a])===-1||GA.concat(Sa).indexOf(S)!==-1&&m===vh)return Vs;if(m===Jg&&S===Jg){for(var I=t[u],q=1;I>0&&(I--,e[I]===Jg);)q++;if(q%2!==0)return Vs}return m===nd&&S===sd?Vs:Ad},fS=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=pS(n,e.lineBreak),s=t[0],l=t[1],u=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(l=l.map(function(a){return[Sa,yu,A2].indexOf(a)!==-1?xh:a}));var p=e.wordBreak==="keep-all"?u.map(function(a,m){return a&&n[m]>=19968&&n[m]<=40959}):void 0;return[s,l,p]},gS=function(){function n(e,t,s,l){this.codePoints=e,this.required=t===l2,this.start=s,this.end=l}return n.prototype.slice=function(){return hn.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),mS=function(n,e){var t=Jp(n),s=fS(t,e),l=s[0],u=s[1],p=s[2],a=t.length,m=0,w=0;return{next:function(){if(w>=a)return{done:!0,value:null};for(var S=Vs;w<a&&(S=dS(t,u,l,++w,p))===Vs;);if(S!==Vs||w===a){var T=new gS(t,S,m,w);return m=w,{value:T,done:!1}}return{done:!0,value:null}}}},yS=1,vS=2,Bh=4,d2=8,ld=10,f2=47,Ch=92,_S=9,wS=32,cd=34,Sh=61,bS=35,xS=36,BS=37,ud=39,hd=40,Fh=41,CS=95,la=45,SS=33,FS=60,ES=62,IS=64,LS=91,TS=93,US=61,PS=123,pd=63,QS=125,g2=124,MS=126,kS=128,m2=65533,im=42,_c=43,DS=44,NS=58,OS=59,Eh=46,RS=0,zS=8,HS=11,VS=14,jS=31,GS=127,sA=-1,y2=48,v2=97,_2=101,qS=102,KS=117,$S=122,w2=65,b2=69,x2=70,WS=85,XS=90,js=function(n){return n>=y2&&n<=57},ZS=function(n){return n>=55296&&n<=57343},vu=function(n){return js(n)||n>=w2&&n<=x2||n>=v2&&n<=qS},YS=function(n){return n>=v2&&n<=$S},JS=function(n){return n>=w2&&n<=XS},eF=function(n){return YS(n)||JS(n)},tF=function(n){return n>=kS},dd=function(n){return n===ld||n===_S||n===wS},fd=function(n){return eF(n)||tF(n)||n===CS},B2=function(n){return fd(n)||js(n)||n===la},rF=function(n){return n>=RS&&n<=zS||n===HS||n>=VS&&n<=jS||n===GS},Pl=function(n,e){return n!==Ch?!1:e!==ld},gd=function(n,e,t){return n===la?fd(e)||Pl(e,t):fd(n)?!0:!!(n===Ch&&Pl(n,e))},nm=function(n,e,t){return n===_c||n===la?js(e)?!0:e===Eh&&js(t):js(n===Eh?e:n)},iF=function(n){var e=0,t=1;(n[e]===_c||n[e]===la)&&(n[e]===la&&(t=-1),e++);for(var s=[];js(n[e]);)s.push(n[e++]);var l=s.length?parseInt(hn.apply(void 0,s),10):0;n[e]===Eh&&e++;for(var u=[];js(n[e]);)u.push(n[e++]);var p=u.length,a=p?parseInt(hn.apply(void 0,u),10):0;(n[e]===b2||n[e]===_2)&&e++;var m=1;(n[e]===_c||n[e]===la)&&(n[e]===la&&(m=-1),e++);for(var w=[];js(n[e]);)w.push(n[e++]);var S=w.length?parseInt(hn.apply(void 0,w),10):0;return t*(l+a*Math.pow(10,-p))*Math.pow(10,m*S)},nF={type:2},sF={type:3},aF={type:4},oF={type:13},AF={type:8},lF={type:21},cF={type:9},uF={type:10},hF={type:11},pF={type:12},dF={type:14},md={type:23},fF={type:1},gF={type:25},mF={type:24},yF={type:26},vF={type:27},_F={type:28},wF={type:29},bF={type:31},sm={type:32},C2=function(){function n(){this._value=[]}return n.prototype.write=function(e){this._value=this._value.concat(Jp(e))},n.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==sm;)e.push(t),t=this.consumeToken();return e},n.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case cd:return this.consumeStringToken(cd);case bS:var t=this.peekCodePoint(0),s=this.peekCodePoint(1),l=this.peekCodePoint(2);if(B2(t)||Pl(s,l)){var u=gd(t,s,l)?vS:yS,p=this.consumeName();return{type:5,value:p,flags:u}}break;case xS:if(this.peekCodePoint(0)===Sh)return this.consumeCodePoint(),oF;break;case ud:return this.consumeStringToken(ud);case hd:return nF;case Fh:return sF;case im:if(this.peekCodePoint(0)===Sh)return this.consumeCodePoint(),dF;break;case _c:if(nm(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case DS:return aF;case la:var a=e,m=this.peekCodePoint(0),w=this.peekCodePoint(1);if(nm(a,m,w))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(gd(a,m,w))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(m===la&&w===ES)return this.consumeCodePoint(),this.consumeCodePoint(),mF;break;case Eh:if(nm(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case f2:if(this.peekCodePoint(0)===im)for(this.consumeCodePoint();;){var S=this.consumeCodePoint();if(S===im&&(S=this.consumeCodePoint(),S===f2))return this.consumeToken();if(S===sA)return this.consumeToken()}break;case NS:return yF;case OS:return vF;case FS:if(this.peekCodePoint(0)===SS&&this.peekCodePoint(1)===la&&this.peekCodePoint(2)===la)return this.consumeCodePoint(),this.consumeCodePoint(),gF;break;case IS:var T=this.peekCodePoint(0),Q=this.peekCodePoint(1),I=this.peekCodePoint(2);if(gd(T,Q,I)){var p=this.consumeName();return{type:7,value:p}}break;case LS:return _F;case Ch:if(Pl(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case TS:return wF;case US:if(this.peekCodePoint(0)===Sh)return this.consumeCodePoint(),AF;break;case PS:return hF;case QS:return pF;case KS:case WS:var q=this.peekCodePoint(0),j=this.peekCodePoint(1);return q===_c&&(vu(j)||j===pd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case g2:if(this.peekCodePoint(0)===Sh)return this.consumeCodePoint(),cF;if(this.peekCodePoint(0)===g2)return this.consumeCodePoint(),lF;break;case MS:if(this.peekCodePoint(0)===Sh)return this.consumeCodePoint(),uF;break;case sA:return sm}return dd(e)?(this.consumeWhiteSpace(),bF):js(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):fd(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:hn(e)}},n.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},n.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},n.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},n.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();vu(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var s=!1;t===pd&&e.length<6;)e.push(t),t=this.consumeCodePoint(),s=!0;if(s){var l=parseInt(hn.apply(void 0,e.map(function(m){return m===pd?y2:m})),16),u=parseInt(hn.apply(void 0,e.map(function(m){return m===pd?x2:m})),16);return{type:30,start:l,end:u}}var p=parseInt(hn.apply(void 0,e),16);if(this.peekCodePoint(0)===la&&vu(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];vu(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();var u=parseInt(hn.apply(void 0,a),16);return{type:30,start:p,end:u}}else return{type:30,start:p,end:p}},n.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===hd?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===hd?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},n.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===sA)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===ud||t===cd){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===sA||this.peekCodePoint(0)===Fh)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),md)}for(;;){var l=this.consumeCodePoint();if(l===sA||l===Fh)return{type:22,value:hn.apply(void 0,e)};if(dd(l))return this.consumeWhiteSpace(),this.peekCodePoint(0)===sA||this.peekCodePoint(0)===Fh?(this.consumeCodePoint(),{type:22,value:hn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),md);if(l===cd||l===ud||l===hd||rF(l))return this.consumeBadUrlRemnants(),md;if(l===Ch)if(Pl(l,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),md;else e.push(l)}},n.prototype.consumeWhiteSpace=function(){for(;dd(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Fh||e===sA)return;Pl(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(e){for(var t=5e4,s="";e>0;){var l=Math.min(t,e);s+=hn.apply(void 0,this._value.splice(0,l)),e-=l}return this._value.shift(),s},n.prototype.consumeStringToken=function(e){var t="",s=0;do{var l=this._value[s];if(l===sA||l===void 0||l===e)return t+=this.consumeStringSlice(s),{type:0,value:t};if(l===ld)return this._value.splice(0,s),fF;if(l===Ch){var u=this._value[s+1];u!==sA&&u!==void 0&&(u===ld?(t+=this.consumeStringSlice(s),s=-1,this._value.shift()):Pl(l,u)&&(t+=this.consumeStringSlice(s),t+=hn(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},n.prototype.consumeNumber=function(){var e=[],t=Bh,s=this.peekCodePoint(0);for((s===_c||s===la)&&e.push(this.consumeCodePoint());js(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0);var l=this.peekCodePoint(1);if(s===Eh&&js(l))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=d2;js(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0),l=this.peekCodePoint(1);var u=this.peekCodePoint(2);if((s===b2||s===_2)&&((l===_c||l===la)&&js(u)||js(l)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=d2;js(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[iF(e),t]},n.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],s=e[1],l=this.peekCodePoint(0),u=this.peekCodePoint(1),p=this.peekCodePoint(2);if(gd(l,u,p)){var a=this.consumeName();return{type:15,number:t,flags:s,unit:a}}return l===BS?(this.consumeCodePoint(),{type:16,number:t,flags:s}):{type:17,number:t,flags:s}},n.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(vu(e)){for(var t=hn(e);vu(this.peekCodePoint(0))&&t.length<6;)t+=hn(this.consumeCodePoint());dd(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(t,16);return s===0||ZS(s)||s>1114111?m2:s}return e===sA?m2:e},n.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(B2(t))e+=hn(t);else if(Pl(t,this.peekCodePoint(0)))e+=hn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},n}(),S2=function(){function n(e){this._tokens=e}return n.create=function(e){var t=new C2;return t.write(e),new n(t.read())},n.parseValue=function(e){return n.create(e).parseComponentValue()},n.parseValues=function(e){return n.create(e).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},n.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},n.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},s=this.consumeToken();;){if(s.type===32||BF(s,e))return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue()),s=this.consumeToken()}},n.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?sm:e},n.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},n}(),Ih=function(n){return n.type===15},_u=function(n){return n.type===17},Ei=function(n){return n.type===20},xF=function(n){return n.type===0},am=function(n,e){return Ei(n)&&n.value===e},F2=function(n){return n.type!==31},wu=function(n){return n.type!==31&&n.type!==4},aA=function(n){var e=[],t=[];return n.forEach(function(s){if(s.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}s.type!==31&&t.push(s)}),t.length&&e.push(t),e},BF=function(n,e){return e===11&&n.type===12||e===28&&n.type===29?!0:e===2&&n.type===3},Ql=function(n){return n.type===17||n.type===15},Fn=function(n){return n.type===16||Ql(n)},E2=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},ss={type:17,number:0,flags:Bh},om={type:16,number:50,flags:Bh},Ml={type:16,number:100,flags:Bh},Lh=function(n,e,t){var s=n[0],l=n[1];return[Oi(s,e),Oi(typeof l<"u"?l:s,t)]},Oi=function(n,e){if(n.type===16)return n.number/100*e;if(Ih(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},I2="deg",L2="grad",T2="rad",U2="turn",yd={name:"angle",parse:function(n,e){if(e.type===15)switch(e.unit){case I2:return Math.PI*e.number/180;case L2:return Math.PI/200*e.number;case T2:return e.number;case U2:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},P2=function(n){return n.type===15&&(n.unit===I2||n.unit===L2||n.unit===T2||n.unit===U2)},Q2=function(n){var e=n.filter(Ei).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ss,ss];case"to top":case"bottom":return za(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ss,Ml];case"to right":case"left":return za(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ml,Ml];case"to bottom":case"top":return za(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ml,ss];case"to left":case"right":return za(270)}return 0},za=function(n){return Math.PI*n/180},kl={name:"color",parse:function(n,e){if(e.type===18){var t=CF[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(n,e.values)}if(e.type===5){if(e.value.length===3){var s=e.value.substring(0,1),l=e.value.substring(1,2),u=e.value.substring(2,3);return Nl(parseInt(s+s,16),parseInt(l+l,16),parseInt(u+u,16),1)}if(e.value.length===4){var s=e.value.substring(0,1),l=e.value.substring(1,2),u=e.value.substring(2,3),p=e.value.substring(3,4);return Nl(parseInt(s+s,16),parseInt(l+l,16),parseInt(u+u,16),parseInt(p+p,16)/255)}if(e.value.length===6){var s=e.value.substring(0,2),l=e.value.substring(2,4),u=e.value.substring(4,6);return Nl(parseInt(s,16),parseInt(l,16),parseInt(u,16),1)}if(e.value.length===8){var s=e.value.substring(0,2),l=e.value.substring(2,4),u=e.value.substring(4,6),p=e.value.substring(6,8);return Nl(parseInt(s,16),parseInt(l,16),parseInt(u,16),parseInt(p,16)/255)}}if(e.type===20){var a=qA[e.value.toUpperCase()];if(typeof a<"u")return a}return qA.TRANSPARENT}},Dl=function(n){return(255&n)===0},jn=function(n){var e=255&n,t=255&n>>8,s=255&n>>16,l=255&n>>24;return e<255?"rgba("+l+","+s+","+t+","+e/255+")":"rgb("+l+","+s+","+t+")"},Nl=function(n,e,t,s){return(n<<24|e<<16|t<<8|Math.round(s*255)<<0)>>>0},M2=function(n,e){if(n.type===17)return n.number;if(n.type===16){var t=e===3?1:255;return e===3?n.number/100*t:Math.round(n.number/100*t)}return 0},k2=function(n,e){var t=e.filter(wu);if(t.length===3){var s=t.map(M2),l=s[0],u=s[1],p=s[2];return Nl(l,u,p,1)}if(t.length===4){var a=t.map(M2),l=a[0],u=a[1],p=a[2],m=a[3];return Nl(l,u,p,m)}return 0};function Am(n,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-n)*t*6+n:t<1/2?e:t<2/3?(e-n)*6*(2/3-t)+n:n}var D2=function(n,e){var t=e.filter(wu),s=t[0],l=t[1],u=t[2],p=t[3],a=(s.type===17?za(s.number):yd.parse(n,s))/(Math.PI*2),m=Fn(l)?l.number/100:0,w=Fn(u)?u.number/100:0,S=typeof p<"u"&&Fn(p)?Oi(p,1):1;if(m===0)return Nl(w*255,w*255,w*255,1);var T=w<=.5?w*(m+1):w+m-w*m,Q=w*2-T,I=Am(Q,T,a+1/3),q=Am(Q,T,a),j=Am(Q,T,a-1/3);return Nl(I*255,q*255,j*255,S)},CF={hsl:D2,hsla:D2,rgb:k2,rgba:k2},Th=function(n,e){return kl.parse(n,S2.create(e).parseComponentValue())},qA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},SF={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(Ei(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},FF={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},vd=function(n,e){var t=kl.parse(n,e[0]),s=e[1];return s&&Fn(s)?{color:t,stop:s}:{color:t,stop:null}},N2=function(n,e){var t=n[0],s=n[n.length-1];t.stop===null&&(t.stop=ss),s.stop===null&&(s.stop=Ml);for(var l=[],u=0,p=0;p<n.length;p++){var a=n[p].stop;if(a!==null){var m=Oi(a,e);m>u?l.push(m):l.push(u),u=m}else l.push(null)}for(var w=null,p=0;p<l.length;p++){var S=l[p];if(S===null)w===null&&(w=p);else if(w!==null){for(var T=p-w,Q=l[w-1],I=(S-Q)/(T+1),q=1;q<=T;q++)l[w+q-1]=I*q;w=null}}return n.map(function(j,Y){var K=j.color;return{color:K,stop:Math.max(Math.min(1,l[Y]/e),0)}})},EF=function(n,e,t){var s=e/2,l=t/2,u=Oi(n[0],e)-s,p=l-Oi(n[1],t);return(Math.atan2(p,u)+Math.PI*2)%(Math.PI*2)},IF=function(n,e,t){var s=typeof n=="number"?n:EF(n,e,t),l=Math.abs(e*Math.sin(s))+Math.abs(t*Math.cos(s)),u=e/2,p=t/2,a=l/2,m=Math.sin(s-Math.PI/2)*a,w=Math.cos(s-Math.PI/2)*a;return[l,u-w,u+w,p-m,p+m]},po=function(n,e){return Math.sqrt(n*n+e*e)},O2=function(n,e,t,s,l){var u=[[0,0],[0,e],[n,0],[n,e]];return u.reduce(function(p,a){var m=a[0],w=a[1],S=po(t-m,s-w);return(l?S<p.optimumDistance:S>p.optimumDistance)?{optimumCorner:a,optimumDistance:S}:p},{optimumDistance:l?1/0:-1/0,optimumCorner:null}).optimumCorner},LF=function(n,e,t,s,l){var u=0,p=0;switch(n.size){case 0:n.shape===0?u=p=Math.min(Math.abs(e),Math.abs(e-s),Math.abs(t),Math.abs(t-l)):n.shape===1&&(u=Math.min(Math.abs(e),Math.abs(e-s)),p=Math.min(Math.abs(t),Math.abs(t-l)));break;case 2:if(n.shape===0)u=p=Math.min(po(e,t),po(e,t-l),po(e-s,t),po(e-s,t-l));else if(n.shape===1){var a=Math.min(Math.abs(t),Math.abs(t-l))/Math.min(Math.abs(e),Math.abs(e-s)),m=O2(s,l,e,t,!0),w=m[0],S=m[1];u=po(w-e,(S-t)/a),p=a*u}break;case 1:n.shape===0?u=p=Math.max(Math.abs(e),Math.abs(e-s),Math.abs(t),Math.abs(t-l)):n.shape===1&&(u=Math.max(Math.abs(e),Math.abs(e-s)),p=Math.max(Math.abs(t),Math.abs(t-l)));break;case 3:if(n.shape===0)u=p=Math.max(po(e,t),po(e,t-l),po(e-s,t),po(e-s,t-l));else if(n.shape===1){var a=Math.max(Math.abs(t),Math.abs(t-l))/Math.max(Math.abs(e),Math.abs(e-s)),T=O2(s,l,e,t,!1),w=T[0],S=T[1];u=po(w-e,(S-t)/a),p=a*u}break}return Array.isArray(n.size)&&(u=Oi(n.size[0],s),p=n.size.length===2?Oi(n.size[1],l):u),[u,p]},TF=function(n,e){var t=za(180),s=[];return aA(e).forEach(function(l,u){if(u===0){var p=l[0];if(p.type===20&&p.value==="to"){t=Q2(l);return}else if(P2(p)){t=yd.parse(n,p);return}}var a=vd(n,l);s.push(a)}),{angle:t,stops:s,type:1}},_d=function(n,e){var t=za(180),s=[];return aA(e).forEach(function(l,u){if(u===0){var p=l[0];if(p.type===20&&["top","left","right","bottom"].indexOf(p.value)!==-1){t=Q2(l);return}else if(P2(p)){t=(yd.parse(n,p)+za(270))%za(360);return}}var a=vd(n,l);s.push(a)}),{angle:t,stops:s,type:1}},UF=function(n,e){var t=za(180),s=[],l=1,u=0,p=3,a=[];return aA(e).forEach(function(m,w){var S=m[0];if(w===0){if(Ei(S)&&S.value==="linear"){l=1;return}else if(Ei(S)&&S.value==="radial"){l=2;return}}if(S.type===18){if(S.name==="from"){var T=kl.parse(n,S.values[0]);s.push({stop:ss,color:T})}else if(S.name==="to"){var T=kl.parse(n,S.values[0]);s.push({stop:Ml,color:T})}else if(S.name==="color-stop"){var Q=S.values.filter(wu);if(Q.length===2){var T=kl.parse(n,Q[1]),I=Q[0];_u(I)&&s.push({stop:{type:16,number:I.number*100,flags:I.flags},color:T})}}}}),l===1?{angle:(t+za(180))%za(360),stops:s,type:l}:{size:p,shape:u,stops:s,position:a,type:l}},R2="closest-side",z2="farthest-side",H2="closest-corner",V2="farthest-corner",j2="circle",G2="ellipse",q2="cover",K2="contain",PF=function(n,e){var t=0,s=3,l=[],u=[];return aA(e).forEach(function(p,a){var m=!0;if(a===0){var w=!1;m=p.reduce(function(T,Q){if(w)if(Ei(Q))switch(Q.value){case"center":return u.push(om),T;case"top":case"left":return u.push(ss),T;case"right":case"bottom":return u.push(Ml),T}else(Fn(Q)||Ql(Q))&&u.push(Q);else if(Ei(Q))switch(Q.value){case j2:return t=0,!1;case G2:return t=1,!1;case"at":return w=!0,!1;case R2:return s=0,!1;case q2:case z2:return s=1,!1;case K2:case H2:return s=2,!1;case V2:return s=3,!1}else if(Ql(Q)||Fn(Q))return Array.isArray(s)||(s=[]),s.push(Q),!1;return T},m)}if(m){var S=vd(n,p);l.push(S)}}),{size:s,shape:t,stops:l,position:u,type:2}},wd=function(n,e){var t=0,s=3,l=[],u=[];return aA(e).forEach(function(p,a){var m=!0;if(a===0?m=p.reduce(function(S,T){if(Ei(T))switch(T.value){case"center":return u.push(om),!1;case"top":case"left":return u.push(ss),!1;case"right":case"bottom":return u.push(Ml),!1}else if(Fn(T)||Ql(T))return u.push(T),!1;return S},m):a===1&&(m=p.reduce(function(S,T){if(Ei(T))switch(T.value){case j2:return t=0,!1;case G2:return t=1,!1;case K2:case R2:return s=0,!1;case z2:return s=1,!1;case H2:return s=2,!1;case q2:case V2:return s=3,!1}else if(Ql(T)||Fn(T))return Array.isArray(s)||(s=[]),s.push(T),!1;return S},m)),m){var w=vd(n,p);l.push(w)}}),{size:s,shape:t,stops:l,position:u,type:2}},QF=function(n){return n.type===1},MF=function(n){return n.type===2},lm={name:"image",parse:function(n,e){if(e.type===22){var t={url:e.value,type:0};return n.cache.addImage(e.value),t}if(e.type===18){var s=$2[e.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return s(n,e.values)}throw new Error("Unsupported image type "+e.type)}};function kF(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!$2[n.name])}var $2={"linear-gradient":TF,"-moz-linear-gradient":_d,"-ms-linear-gradient":_d,"-o-linear-gradient":_d,"-webkit-linear-gradient":_d,"radial-gradient":PF,"-moz-radial-gradient":wd,"-ms-radial-gradient":wd,"-o-radial-gradient":wd,"-webkit-radial-gradient":wd,"-webkit-gradient":UF},DF={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(s){return wu(s)&&kF(s)}).map(function(s){return lm.parse(n,s)})}},NF={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(Ei(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},OF={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,e){return aA(e).map(function(t){return t.filter(Fn)}).map(E2)}},RF={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,e){return aA(e).map(function(t){return t.filter(Ei).map(function(s){return s.value}).join(" ")}).map(zF)}},zF=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},bu;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(bu||(bu={}));var HF={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,e){return aA(e).map(function(t){return t.filter(VF)})}},VF=function(n){return Ei(n)||Fn(n)},bd=function(n){return{name:"border-"+n+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},jF=bd("top"),GF=bd("right"),qF=bd("bottom"),KF=bd("left"),xd=function(n){return{name:"border-radius-"+n,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return E2(t.filter(Fn))}}},$F=xd("top-left"),WF=xd("top-right"),XF=xd("bottom-right"),ZF=xd("bottom-left"),Bd=function(n){return{name:"border-"+n+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},YF=Bd("top"),JF=Bd("right"),eE=Bd("bottom"),tE=Bd("left"),Cd=function(n){return{name:"border-"+n+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Ih(t)?t.number:0}}},rE=Cd("top"),iE=Cd("right"),nE=Cd("bottom"),sE=Cd("left"),aE={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},oE={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},AE={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,e){return e.filter(Ei).reduce(function(t,s){return t|lE(s.value)},0)}},lE=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},cE={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},uE={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Sd;(function(n){n.NORMAL="normal",n.STRICT="strict"})(Sd||(Sd={}));var hE={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"strict":return Sd.STRICT;case"normal":default:return Sd.NORMAL}}},pE={name:"line-height",initialValue:"normal",prefix:!1,type:4},W2=function(n,e){return Ei(n)&&n.value==="normal"?1.2*e:n.type===17?e*n.number:Fn(n)?Oi(n,e):e},dE={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,e){return e.type===20&&e.value==="none"?null:lm.parse(n,e)}},fE={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},cm={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Fd=function(n){return{name:"margin-"+n,initialValue:"0",prefix:!1,type:4}},gE=Fd("top"),mE=Fd("right"),yE=Fd("bottom"),vE=Fd("left"),_E={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,e){return e.filter(Ei).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},wE={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Ed=function(n){return{name:"padding-"+n,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},bE=Ed("top"),xE=Ed("right"),BE=Ed("bottom"),CE=Ed("left"),SE={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},FE={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},EE={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&am(e[0],"none")?[]:aA(e).map(function(t){for(var s={color:qA.TRANSPARENT,offsetX:ss,offsetY:ss,blur:ss},l=0,u=0;u<t.length;u++){var p=t[u];Ql(p)?(l===0?s.offsetX=p:l===1?s.offsetY=p:s.blur=p,l++):s.color=kl.parse(n,p)}return s})}},IE={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},LE={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=PE[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},TE=function(n){var e=n.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},UE=function(n){var e=n.filter(function(m){return m.type===17}).map(function(m){return m.number}),t=e[0],s=e[1];e[2],e[3];var l=e[4],u=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var p=e[12],a=e[13];return e[14],e[15],e.length===16?[t,s,l,u,p,a]:null},PE={matrix:TE,matrix3d:UE},X2={type:16,number:50,flags:Bh},QE=[X2,X2],ME={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,e){var t=e.filter(Fn);return t.length!==2?QE:[t[0],t[1]]}},kE={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Uh;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(Uh||(Uh={}));for(var DE={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-all":return Uh.BREAK_ALL;case"keep-all":return Uh.KEEP_ALL;case"normal":default:return Uh.NORMAL}}},NE={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,e){if(e.type===20)return{auto:!0,order:0};if(_u(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Z2={name:"time",parse:function(n,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},OE={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,e){return _u(e)?e.number:1}},RE={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},zE={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,e){return e.filter(Ei).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},HE={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,e){var t=[],s=[];return e.forEach(function(l){switch(l.type){case 20:case 0:t.push(l.value);break;case 17:t.push(l.number.toString());break;case 4:s.push(t.join(" ")),t.length=0;break}}),t.length&&s.push(t.join(" ")),s.map(function(l){return l.indexOf(" ")===-1?l:"'"+l+"'"})}},VE={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},jE={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,e){if(_u(e))return e.number;if(Ei(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},GE={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.filter(Ei).map(function(t){return t.value})}},qE={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Mn=function(n,e){return(n&e)!==0},KE={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},$E={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var s=[],l=e.filter(F2),u=0;u<l.length;u++){var p=l[u],a=l[u+1];if(p.type===20){var m=a&&_u(a)?a.number:1;s.push({counter:p.value,increment:m})}}return s}},WE={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return[];for(var t=[],s=e.filter(F2),l=0;l<s.length;l++){var u=s[l],p=s[l+1];if(Ei(u)&&u.value!=="none"){var a=p&&_u(p)?p.number:0;t.push({counter:u.value,reset:a})}}return t}},XE={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,e){return e.filter(Ih).map(function(t){return Z2.parse(n,t)})}},ZE={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var s=[],l=e.filter(xF);if(l.length%2!==0)return null;for(var u=0;u<l.length;u+=2){var p=l[u].value,a=l[u+1].value;s.push({open:p,close:a})}return s}},Y2=function(n,e,t){if(!n)return"";var s=n[Math.min(e,n.length-1)];return s?t?s.open:s.close:""},YE={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&am(e[0],"none")?[]:aA(e).map(function(t){for(var s={color:255,offsetX:ss,offsetY:ss,blur:ss,spread:ss,inset:!1},l=0,u=0;u<t.length;u++){var p=t[u];am(p,"inset")?s.inset=!0:Ql(p)?(l===0?s.offsetX=p:l===1?s.offsetY=p:l===2?s.blur=p:s.spread=p,l++):s.color=kl.parse(n,p)}return s})}},JE={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,e){var t=[0,1,2],s=[];return e.filter(Ei).forEach(function(l){switch(l.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),t.forEach(function(l){s.indexOf(l)===-1&&s.push(l)}),s}},eI={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},tI={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,e){return Ih(e)?e.number:0}},rI=function(){function n(e,t){var s,l;this.animationDuration=or(e,XE,t.animationDuration),this.backgroundClip=or(e,SF,t.backgroundClip),this.backgroundColor=or(e,FF,t.backgroundColor),this.backgroundImage=or(e,DF,t.backgroundImage),this.backgroundOrigin=or(e,NF,t.backgroundOrigin),this.backgroundPosition=or(e,OF,t.backgroundPosition),this.backgroundRepeat=or(e,RF,t.backgroundRepeat),this.backgroundSize=or(e,HF,t.backgroundSize),this.borderTopColor=or(e,jF,t.borderTopColor),this.borderRightColor=or(e,GF,t.borderRightColor),this.borderBottomColor=or(e,qF,t.borderBottomColor),this.borderLeftColor=or(e,KF,t.borderLeftColor),this.borderTopLeftRadius=or(e,$F,t.borderTopLeftRadius),this.borderTopRightRadius=or(e,WF,t.borderTopRightRadius),this.borderBottomRightRadius=or(e,XF,t.borderBottomRightRadius),this.borderBottomLeftRadius=or(e,ZF,t.borderBottomLeftRadius),this.borderTopStyle=or(e,YF,t.borderTopStyle),this.borderRightStyle=or(e,JF,t.borderRightStyle),this.borderBottomStyle=or(e,eE,t.borderBottomStyle),this.borderLeftStyle=or(e,tE,t.borderLeftStyle),this.borderTopWidth=or(e,rE,t.borderTopWidth),this.borderRightWidth=or(e,iE,t.borderRightWidth),this.borderBottomWidth=or(e,nE,t.borderBottomWidth),this.borderLeftWidth=or(e,sE,t.borderLeftWidth),this.boxShadow=or(e,YE,t.boxShadow),this.color=or(e,aE,t.color),this.direction=or(e,oE,t.direction),this.display=or(e,AE,t.display),this.float=or(e,cE,t.cssFloat),this.fontFamily=or(e,HE,t.fontFamily),this.fontSize=or(e,VE,t.fontSize),this.fontStyle=or(e,qE,t.fontStyle),this.fontVariant=or(e,GE,t.fontVariant),this.fontWeight=or(e,jE,t.fontWeight),this.letterSpacing=or(e,uE,t.letterSpacing),this.lineBreak=or(e,hE,t.lineBreak),this.lineHeight=or(e,pE,t.lineHeight),this.listStyleImage=or(e,dE,t.listStyleImage),this.listStylePosition=or(e,fE,t.listStylePosition),this.listStyleType=or(e,cm,t.listStyleType),this.marginTop=or(e,gE,t.marginTop),this.marginRight=or(e,mE,t.marginRight),this.marginBottom=or(e,yE,t.marginBottom),this.marginLeft=or(e,vE,t.marginLeft),this.opacity=or(e,OE,t.opacity);var u=or(e,_E,t.overflow);this.overflowX=u[0],this.overflowY=u[u.length>1?1:0],this.overflowWrap=or(e,wE,t.overflowWrap),this.paddingTop=or(e,bE,t.paddingTop),this.paddingRight=or(e,xE,t.paddingRight),this.paddingBottom=or(e,BE,t.paddingBottom),this.paddingLeft=or(e,CE,t.paddingLeft),this.paintOrder=or(e,JE,t.paintOrder),this.position=or(e,FE,t.position),this.textAlign=or(e,SE,t.textAlign),this.textDecorationColor=or(e,RE,(s=t.textDecorationColor)!==null&&s!==void 0?s:t.color),this.textDecorationLine=or(e,zE,(l=t.textDecorationLine)!==null&&l!==void 0?l:t.textDecoration),this.textShadow=or(e,EE,t.textShadow),this.textTransform=or(e,IE,t.textTransform),this.transform=or(e,LE,t.transform),this.transformOrigin=or(e,ME,t.transformOrigin),this.visibility=or(e,kE,t.visibility),this.webkitTextStrokeColor=or(e,eI,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=or(e,tI,t.webkitTextStrokeWidth),this.wordBreak=or(e,DE,t.wordBreak),this.zIndex=or(e,NE,t.zIndex)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return Dl(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return Mn(this.display,4)||Mn(this.display,33554432)||Mn(this.display,268435456)||Mn(this.display,536870912)||Mn(this.display,67108864)||Mn(this.display,134217728)},n}(),iI=function(){function n(e,t){this.content=or(e,KE,t.content),this.quotes=or(e,ZE,t.quotes)}return n}(),J2=function(){function n(e,t){this.counterIncrement=or(e,$E,t.counterIncrement),this.counterReset=or(e,WE,t.counterReset)}return n}(),or=function(n,e,t){var s=new C2,l=t!==null&&typeof t<"u"?t.toString():e.initialValue;s.write(l);var u=new S2(s.read());switch(e.type){case 2:var p=u.parseComponentValue();return e.parse(n,Ei(p)?p.value:e.initialValue);case 0:return e.parse(n,u.parseComponentValue());case 1:return e.parse(n,u.parseComponentValues());case 4:return u.parseComponentValue();case 3:switch(e.format){case"angle":return yd.parse(n,u.parseComponentValue());case"color":return kl.parse(n,u.parseComponentValue());case"image":return lm.parse(n,u.parseComponentValue());case"length":var a=u.parseComponentValue();return Ql(a)?a:ss;case"length-percentage":var m=u.parseComponentValue();return Fn(m)?m:ss;case"time":return Z2.parse(n,u.parseComponentValue())}break}},nI="data-html2canvas-debug",sI=function(n){var e=n.getAttribute(nI);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},um=function(n,e){var t=sI(n);return t===1||e===t},oA=function(){function n(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,um(t,3))debugger;this.styles=new rI(e,window.getComputedStyle(t,null)),Bm(t)&&(this.styles.animationDuration.some(function(s){return s>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=Yp(this.context,t),um(t,4)&&(this.flags|=16)}return n}(),aI="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",e_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ph=typeof Uint8Array>"u"?[]:new Uint8Array(256),Id=0;Id<e_.length;Id++)Ph[e_.charCodeAt(Id)]=Id;for(var oI=function(n){var e=n.length*.75,t=n.length,s,l=0,u,p,a,m;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var w=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),S=Array.isArray(w)?w:new Uint8Array(w);for(s=0;s<t;s+=4)u=Ph[n.charCodeAt(s)],p=Ph[n.charCodeAt(s+1)],a=Ph[n.charCodeAt(s+2)],m=Ph[n.charCodeAt(s+3)],S[l++]=u<<2|p>>4,S[l++]=(p&15)<<4|a>>2,S[l++]=(a&3)<<6|m&63;return w},AI=function(n){for(var e=n.length,t=[],s=0;s<e;s+=2)t.push(n[s+1]<<8|n[s]);return t},lI=function(n){for(var e=n.length,t=[],s=0;s<e;s+=4)t.push(n[s+3]<<24|n[s+2]<<16|n[s+1]<<8|n[s]);return t},wc=5,hm=11,pm=2,cI=hm-wc,t_=65536>>wc,uI=1<<wc,dm=uI-1,hI=1024>>wc,pI=t_+hI,dI=pI,fI=32,gI=dI+fI,mI=65536>>hm,yI=1<<cI,vI=yI-1,r_=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},_I=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},wI=function(n,e){var t=oI(n),s=Array.isArray(t)?lI(t):new Uint32Array(t),l=Array.isArray(t)?AI(t):new Uint16Array(t),u=24,p=r_(l,u/2,s[4]/2),a=s[5]===2?r_(l,(u+s[4])/2):_I(s,Math.ceil((u+s[4])/4));return new bI(s[0],s[1],s[2],s[3],p,a)},bI=function(){function n(e,t,s,l,u,p){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=l,this.index=u,this.data=p}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>wc],t=(t<<pm)+(e&dm),this.data[t];if(e<=65535)return t=this.index[t_+(e-55296>>wc)],t=(t<<pm)+(e&dm),this.data[t];if(e<this.highStart)return t=gI-mI+(e>>hm),t=this.index[t],t+=e>>wc&vI,t=this.index[t],t=(t<<pm)+(e&dm),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),i_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xI=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ld=0;Ld<i_.length;Ld++)xI[i_.charCodeAt(Ld)]=Ld;var BI=1,fm=2,gm=3,n_=4,s_=5,CI=7,a_=8,mm=9,ym=10,o_=11,A_=12,l_=13,c_=14,vm=15,SI=function(n){for(var e=[],t=0,s=n.length;t<s;){var l=n.charCodeAt(t++);if(l>=55296&&l<=56319&&t<s){var u=n.charCodeAt(t++);(u&64512)===56320?e.push(((l&1023)<<10)+(u&1023)+65536):(e.push(l),t--)}else e.push(l)}return e},FI=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var s=[],l=-1,u="";++l<t;){var p=n[l];p<=65535?s.push(p):(p-=65536,s.push((p>>10)+55296,p%1024+56320)),(l+1===t||s.length>16384)&&(u+=String.fromCharCode.apply(String,s),s.length=0)}return u},EI=wI(aI),bc="",u_="",II=function(n){return EI.get(n)},LI=function(n,e,t){var s=t-2,l=e[s],u=e[t-1],p=e[t];if(u===fm&&p===gm)return bc;if(u===fm||u===gm||u===n_||p===fm||p===gm||p===n_)return u_;if(u===a_&&[a_,mm,o_,A_].indexOf(p)!==-1||(u===o_||u===mm)&&(p===mm||p===ym)||(u===A_||u===ym)&&p===ym||p===l_||p===s_||p===CI||u===BI)return bc;if(u===l_&&p===c_){for(;l===s_;)l=e[--s];if(l===c_)return bc}if(u===vm&&p===vm){for(var a=0;l===vm;)a++,l=e[--s];if(a%2===0)return bc}return u_},TI=function(n){var e=SI(n),t=e.length,s=0,l=0,u=e.map(II);return{next:function(){if(s>=t)return{done:!0,value:null};for(var p=bc;s<t&&(p=LI(e,u,++s))===bc;);if(p!==bc||s===t){var a=FI.apply(null,e.slice(l,s));return l=s,{value:a,done:!1}}return{done:!0,value:null}}}},UI=function(n){for(var e=TI(n),t=[],s;!(s=e.next()).done;)s.value&&t.push(s.value.slice());return t},PI=function(n){var e=123;if(n.createRange){var t=n.createRange();if(t.getBoundingClientRect){var s=n.createElement("boundtest");s.style.height=e+"px",s.style.display="block",n.body.appendChild(s),t.selectNode(s);var l=t.getBoundingClientRect(),u=Math.round(l.height);if(n.body.removeChild(s),u===e)return!0}}return!1},QI=function(n){var e=n.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",n.body.appendChild(e);var t=n.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=e.firstChild,l=Jp(s.data).map(function(m){return hn(m)}),u=0,p={},a=l.every(function(m,w){t.setStart(s,u),t.setEnd(s,u+m.length);var S=t.getBoundingClientRect();u+=m.length;var T=S.x>p.x||S.y>p.y;return p=S,w===0?!0:T});return n.body.removeChild(e),a},MI=function(){return typeof new Image().crossOrigin<"u"},kI=function(){return typeof new XMLHttpRequest().responseType=="string"},DI=function(n){var e=new Image,t=n.createElement("canvas"),s=t.getContext("2d");if(!s)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},h_=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},NI=function(n){var e=n.createElement("canvas"),t=100;e.width=t,e.height=t;var s=e.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,t,t);var l=new Image,u=e.toDataURL();l.src=u;var p=_m(t,t,0,0,l);return s.fillStyle="red",s.fillRect(0,0,t,t),p_(p).then(function(a){s.drawImage(a,0,0);var m=s.getImageData(0,0,t,t).data;s.fillStyle="red",s.fillRect(0,0,t,t);var w=n.createElement("div");return w.style.backgroundImage="url("+u+")",w.style.height=t+"px",h_(m)?p_(_m(t,t,0,0,w)):Promise.reject(!1)}).then(function(a){return s.drawImage(a,0,0),h_(s.getImageData(0,0,t,t).data)}).catch(function(){return!1})},_m=function(n,e,t,s,l){var u="http://www.w3.org/2000/svg",p=document.createElementNS(u,"svg"),a=document.createElementNS(u,"foreignObject");return p.setAttributeNS(null,"width",n.toString()),p.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",s.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),p.appendChild(a),a.appendChild(l),p},p_=function(n){return new Promise(function(e,t){var s=new Image;s.onload=function(){return e(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},as={get SUPPORT_RANGE_BOUNDS(){var n=PI(document);return Object.defineProperty(as,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=as.SUPPORT_RANGE_BOUNDS&&QI(document);return Object.defineProperty(as,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=DI(document);return Object.defineProperty(as,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?NI(document):Promise.resolve(!1);return Object.defineProperty(as,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=MI();return Object.defineProperty(as,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=kI();return Object.defineProperty(as,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(as,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(as,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},Qh=function(){function n(e,t){this.text=e,this.bounds=t}return n}(),OI=function(n,e,t,s){var l=HI(e,t),u=[],p=0;return l.forEach(function(a){if(t.textDecorationLine.length||a.trim().length>0)if(as.SUPPORT_RANGE_BOUNDS){var m=d_(s,p,a.length).getClientRects();if(m.length>1){var w=wm(a),S=0;w.forEach(function(Q){u.push(new Qh(Q,jA.fromDOMRectList(n,d_(s,S+p,Q.length).getClientRects()))),S+=Q.length})}else u.push(new Qh(a,jA.fromDOMRectList(n,m)))}else{var T=s.splitText(a.length);u.push(new Qh(a,RI(n,s))),s=T}else as.SUPPORT_RANGE_BOUNDS||(s=s.splitText(a.length));p+=a.length}),u},RI=function(n,e){var t=e.ownerDocument;if(t){var s=t.createElement("html2canvaswrapper");s.appendChild(e.cloneNode(!0));var l=e.parentNode;if(l){l.replaceChild(s,e);var u=Yp(n,s);return s.firstChild&&l.replaceChild(s.firstChild,s),u}}return jA.EMPTY},d_=function(n,e,t){var s=n.ownerDocument;if(!s)throw new Error("Node has no owner document");var l=s.createRange();return l.setStart(n,e),l.setEnd(n,e+t),l},wm=function(n){if(as.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(n)).map(function(t){return t.segment})}return UI(n)},zI=function(n,e){if(as.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(n)).map(function(s){return s.segment})}return jI(n,e)},HI=function(n,e){return e.letterSpacing!==0?wm(n):zI(n,e)},VI=[32,160,4961,65792,65793,4153,4241],jI=function(n,e){for(var t=mS(n,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),s=[],l,u=function(){if(l.value){var p=l.value.slice(),a=Jp(p),m="";a.forEach(function(w){VI.indexOf(w)===-1?m+=hn(w):(m.length&&s.push(m),s.push(hn(w)),m="")}),m.length&&s.push(m)}};!(l=t.next()).done;)u();return s},GI=function(){function n(e,t,s){this.text=qI(t.data,s.textTransform),this.textBounds=OI(e,this.text,s,t)}return n}(),qI=function(n,e){switch(e){case 1:return n.toLowerCase();case 3:return n.replace(KI,$I);case 2:return n.toUpperCase();default:return n}},KI=/(^|\s|:|-|\(|\))([a-z])/g,$I=function(n,e,t){return n.length>0?e+t.toUpperCase():n},f_=function(n){ho(e,n);function e(t,s){var l=n.call(this,t,s)||this;return l.src=s.currentSrc||s.src,l.intrinsicWidth=s.naturalWidth,l.intrinsicHeight=s.naturalHeight,l.context.cache.addImage(l.src),l}return e}(oA),g_=function(n){ho(e,n);function e(t,s){var l=n.call(this,t,s)||this;return l.canvas=s,l.intrinsicWidth=s.width,l.intrinsicHeight=s.height,l}return e}(oA),m_=function(n){ho(e,n);function e(t,s){var l=n.call(this,t,s)||this,u=new XMLSerializer,p=Yp(t,s);return s.setAttribute("width",p.width+"px"),s.setAttribute("height",p.height+"px"),l.svg="data:image/svg+xml,"+encodeURIComponent(u.serializeToString(s)),l.intrinsicWidth=s.width.baseVal.value,l.intrinsicHeight=s.height.baseVal.value,l.context.cache.addImage(l.svg),l}return e}(oA),y_=function(n){ho(e,n);function e(t,s){var l=n.call(this,t,s)||this;return l.value=s.value,l}return e}(oA),bm=function(n){ho(e,n);function e(t,s){var l=n.call(this,t,s)||this;return l.start=s.start,l.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,l}return e}(oA),WI=[{type:15,flags:0,unit:"px",number:3}],XI=[{type:16,flags:0,number:50}],ZI=function(n){return n.width>n.height?new jA(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new jA(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},YI=function(n){var e=n.type===JI?new Array(n.value.length+1).join(""):n.value;return e.length===0?n.placeholder||"":e},Td="checkbox",Ud="radio",JI="password",v_=707406591,xm=function(n){ho(e,n);function e(t,s){var l=n.call(this,t,s)||this;switch(l.type=s.type.toLowerCase(),l.checked=s.checked,l.value=YI(s),(l.type===Td||l.type===Ud)&&(l.styles.backgroundColor=3739148031,l.styles.borderTopColor=l.styles.borderRightColor=l.styles.borderBottomColor=l.styles.borderLeftColor=2779096575,l.styles.borderTopWidth=l.styles.borderRightWidth=l.styles.borderBottomWidth=l.styles.borderLeftWidth=1,l.styles.borderTopStyle=l.styles.borderRightStyle=l.styles.borderBottomStyle=l.styles.borderLeftStyle=1,l.styles.backgroundClip=[0],l.styles.backgroundOrigin=[0],l.bounds=ZI(l.bounds)),l.type){case Td:l.styles.borderTopRightRadius=l.styles.borderTopLeftRadius=l.styles.borderBottomRightRadius=l.styles.borderBottomLeftRadius=WI;break;case Ud:l.styles.borderTopRightRadius=l.styles.borderTopLeftRadius=l.styles.borderBottomRightRadius=l.styles.borderBottomLeftRadius=XI;break}return l}return e}(oA),__=function(n){ho(e,n);function e(t,s){var l=n.call(this,t,s)||this,u=s.options[s.selectedIndex||0];return l.value=u&&u.text||"",l}return e}(oA),w_=function(n){ho(e,n);function e(t,s){var l=n.call(this,t,s)||this;return l.value=s.value,l}return e}(oA),b_=function(n){ho(e,n);function e(t,s){var l=n.call(this,t,s)||this;l.src=s.src,l.width=parseInt(s.width,10)||0,l.height=parseInt(s.height,10)||0,l.backgroundColor=l.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){l.tree=B_(t,s.contentWindow.document.documentElement);var u=s.contentWindow.document.documentElement?Th(t,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):qA.TRANSPARENT,p=s.contentWindow.document.body?Th(t,getComputedStyle(s.contentWindow.document.body).backgroundColor):qA.TRANSPARENT;l.backgroundColor=Dl(u)?Dl(p)?l.styles.backgroundColor:p:u}}catch{}return l}return e}(oA),eL=["OL","UL","MENU"],Pd=function(n,e,t,s){for(var l=e.firstChild,u=void 0;l;l=u)if(u=l.nextSibling,C_(l)&&l.data.trim().length>0)t.textNodes.push(new GI(n,l,t.styles));else if(xu(l))if(T_(l)&&l.assignedNodes)l.assignedNodes().forEach(function(a){return Pd(n,a,t,s)});else{var p=x_(n,l);p.styles.isVisible()&&(tL(l,p,s)?p.flags|=4:rL(p.styles)&&(p.flags|=2),eL.indexOf(l.tagName)!==-1&&(p.flags|=8),t.elements.push(p),l.slot,l.shadowRoot?Pd(n,l.shadowRoot,p,s):!Md(l)&&!S_(l)&&!kd(l)&&Pd(n,l,p,s))}},x_=function(n,e){return Sm(e)?new f_(n,e):F_(e)?new g_(n,e):S_(e)?new m_(n,e):iL(e)?new y_(n,e):nL(e)?new bm(n,e):sL(e)?new xm(n,e):kd(e)?new __(n,e):Md(e)?new w_(n,e):I_(e)?new b_(n,e):new oA(n,e)},B_=function(n,e){var t=x_(n,e);return t.flags|=4,Pd(n,e,t,t),t},tL=function(n,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Cm(n)&&t.styles.isTransparent()},rL=function(n){return n.isPositioned()||n.isFloating()},C_=function(n){return n.nodeType===Node.TEXT_NODE},xu=function(n){return n.nodeType===Node.ELEMENT_NODE},Bm=function(n){return xu(n)&&typeof n.style<"u"&&!Qd(n)},Qd=function(n){return typeof n.className=="object"},iL=function(n){return n.tagName==="LI"},nL=function(n){return n.tagName==="OL"},sL=function(n){return n.tagName==="INPUT"},aL=function(n){return n.tagName==="HTML"},S_=function(n){return n.tagName==="svg"},Cm=function(n){return n.tagName==="BODY"},F_=function(n){return n.tagName==="CANVAS"},E_=function(n){return n.tagName==="VIDEO"},Sm=function(n){return n.tagName==="IMG"},I_=function(n){return n.tagName==="IFRAME"},L_=function(n){return n.tagName==="STYLE"},oL=function(n){return n.tagName==="SCRIPT"},Md=function(n){return n.tagName==="TEXTAREA"},kd=function(n){return n.tagName==="SELECT"},T_=function(n){return n.tagName==="SLOT"},U_=function(n){return n.tagName.indexOf("-")>0},AL=function(){function n(){this.counters={}}return n.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},n.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},n.prototype.pop=function(e){var t=this;e.forEach(function(s){return t.counters[s].pop()})},n.prototype.parse=function(e){var t=this,s=e.counterIncrement,l=e.counterReset,u=!0;s!==null&&s.forEach(function(a){var m=t.counters[a.counter];m&&a.increment!==0&&(u=!1,m.length||m.push(1),m[Math.max(0,m.length-1)]+=a.increment)});var p=[];return u&&l.forEach(function(a){var m=t.counters[a.counter];p.push(a.counter),m||(m=t.counters[a.counter]=[]),m.push(a.reset)}),p},n}(),P_={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Q_={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},lL={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},cL={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Bu=function(n,e,t,s,l,u){return n<e||n>t?kh(n,l,u.length>0):s.integers.reduce(function(p,a,m){for(;n>=a;)n-=a,p+=s.values[m];return p},"")+u},M_=function(n,e,t,s){var l="";do t||n--,l=s(n)+l,n/=e;while(n*e>=e);return l},pn=function(n,e,t,s,l){var u=t-e+1;return(n<0?"-":"")+(M_(Math.abs(n),u,s,function(p){return hn(Math.floor(p%u)+e)})+l)},xc=function(n,e,t){t===void 0&&(t=". ");var s=e.length;return M_(Math.abs(n),s,!1,function(l){return e[Math.floor(l%s)]})+t},Cu=1,Ol=2,Rl=4,Mh=8,KA=function(n,e,t,s,l,u){if(n<-9999||n>9999)return kh(n,4,l.length>0);var p=Math.abs(n),a=l;if(p===0)return e[0]+a;for(var m=0;p>0&&m<=4;m++){var w=p%10;w===0&&Mn(u,Cu)&&a!==""?a=e[w]+a:w>1||w===1&&m===0||w===1&&m===1&&Mn(u,Ol)||w===1&&m===1&&Mn(u,Rl)&&n>100||w===1&&m>1&&Mn(u,Mh)?a=e[w]+(m>0?t[m-1]:"")+a:w===1&&m>0&&(a=t[m-1]+a),p=Math.floor(p/10)}return(n<0?s:"")+a},k_="",D_="",N_="",Fm="",kh=function(n,e,t){var s=t?". ":"",l=t?"":"",u=t?", ":"",p=t?" ":"";switch(e){case 0:return""+p;case 1:return""+p;case 2:return""+p;case 5:var a=pn(n,48,57,!0,s);return a.length<4?"0"+a:a;case 4:return xc(n,"",l);case 6:return Bu(n,1,3999,P_,3,s).toLowerCase();case 7:return Bu(n,1,3999,P_,3,s);case 8:return pn(n,945,969,!1,s);case 9:return pn(n,97,122,!1,s);case 10:return pn(n,65,90,!1,s);case 11:return pn(n,1632,1641,!0,s);case 12:case 49:return Bu(n,1,9999,Q_,3,s);case 35:return Bu(n,1,9999,Q_,3,s).toLowerCase();case 13:return pn(n,2534,2543,!0,s);case 14:case 30:return pn(n,6112,6121,!0,s);case 15:return xc(n,"",l);case 16:return xc(n,"",l);case 17:case 48:return KA(n,"",k_,"",l,Ol|Rl|Mh);case 47:return KA(n,"",D_,"",l,Cu|Ol|Rl|Mh);case 42:return KA(n,"",k_,"",l,Ol|Rl|Mh);case 41:return KA(n,"",D_,"",l,Cu|Ol|Rl|Mh);case 26:return KA(n,"","",N_,l,0);case 25:return KA(n,"","",N_,l,Cu|Ol|Rl);case 31:return KA(n,"","",Fm,u,Cu|Ol|Rl);case 33:return KA(n,"","",Fm,u,0);case 32:return KA(n,"","",Fm,u,Cu|Ol|Rl);case 18:return pn(n,2406,2415,!0,s);case 20:return Bu(n,1,19999,cL,3,s);case 21:return pn(n,2790,2799,!0,s);case 22:return pn(n,2662,2671,!0,s);case 22:return Bu(n,1,10999,lL,3,s);case 23:return xc(n,"");case 24:return xc(n,"");case 27:return pn(n,3302,3311,!0,s);case 28:return xc(n,"",l);case 29:return xc(n,"",l);case 34:return pn(n,3792,3801,!0,s);case 37:return pn(n,6160,6169,!0,s);case 38:return pn(n,4160,4169,!0,s);case 39:return pn(n,2918,2927,!0,s);case 40:return pn(n,1776,1785,!0,s);case 43:return pn(n,3046,3055,!0,s);case 44:return pn(n,3174,3183,!0,s);case 45:return pn(n,3664,3673,!0,s);case 46:return pn(n,3872,3881,!0,s);case 3:default:return pn(n,48,57,!0,s)}},O_="data-html2canvas-ignore",R_=function(){function n(e,t,s){if(this.context=e,this.options=s,this.scrolledElements=[],this.referenceElement=t,this.counters=new AL,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return n.prototype.toIFrame=function(e,t){var s=this,l=uL(e,t);if(!l.contentWindow)return Promise.reject("Unable to find iframe window");var u=e.defaultView.pageXOffset,p=e.defaultView.pageYOffset,a=l.contentWindow,m=a.document,w=dL(l).then(function(){return Hs(s,void 0,void 0,function(){var S,T;return Bs(this,function(Q){switch(Q.label){case 0:return this.scrolledElements.forEach(yL),a&&(a.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==t.top||a.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-t.left,a.scrollY-t.top,0,0))),S=this.options.onclone,T=this.clonedReferenceElement,typeof T>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:m.fonts&&m.fonts.ready?[4,m.fonts.ready]:[3,2];case 1:Q.sent(),Q.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,pL(m)]:[3,4];case 3:Q.sent(),Q.label=4;case 4:return typeof S=="function"?[2,Promise.resolve().then(function(){return S(m,T)}).then(function(){return l})]:[2,l]}})})});return m.open(),m.write(gL(document.doctype)+"<html></html>"),mL(this.referenceElement.ownerDocument,u,p),m.replaceChild(m.adoptNode(this.documentElement),m.documentElement),m.close(),w},n.prototype.createElementClone=function(e){if(um(e,2))debugger;if(F_(e))return this.createCanvasClone(e);if(E_(e))return this.createVideoClone(e);if(L_(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Sm(t)&&(Sm(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),U_(t)?this.createCustomElementClone(t):t},n.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return Em(e.style,t),t},n.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var s=[].slice.call(t.cssRules,0).reduce(function(u,p){return p&&typeof p.cssText=="string"?u+p.cssText:u},""),l=e.cloneNode(!1);return l.textContent=s,l}}catch(u){if(this.context.logger.error("Unable to access cssRules property",u),u.name!=="SecurityError")throw u}return e.cloneNode(!1)},n.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var s=e.ownerDocument.createElement("img");try{return s.src=e.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var l=e.cloneNode(!1);try{l.width=e.width,l.height=e.height;var u=e.getContext("2d"),p=l.getContext("2d");if(p)if(!this.options.allowTaint&&u)p.putImageData(u.getImageData(0,0,e.width,e.height),0,0);else{var a=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(a){var m=a.getContextAttributes();(m==null?void 0:m.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}p.drawImage(e,0,0)}return l}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return l},n.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var s=t.getContext("2d");try{return s&&(s.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||s.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var l=e.ownerDocument.createElement("canvas");return l.width=e.offsetWidth,l.height=e.offsetHeight,l},n.prototype.appendChildNode=function(e,t,s){(!xu(t)||!oL(t)&&!t.hasAttribute(O_)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!xu(t)||!L_(t))&&e.appendChild(this.cloneNode(t,s))},n.prototype.cloneChildNodes=function(e,t,s){for(var l=this,u=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;u;u=u.nextSibling)if(xu(u)&&T_(u)&&typeof u.assignedNodes=="function"){var p=u.assignedNodes();p.length&&p.forEach(function(a){return l.appendChildNode(t,a,s)})}else this.appendChildNode(t,u,s)},n.prototype.cloneNode=function(e,t){if(C_(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var s=e.ownerDocument.defaultView;if(s&&xu(e)&&(Bm(e)||Qd(e))){var l=this.createElementClone(e);l.style.transitionProperty="none";var u=s.getComputedStyle(e),p=s.getComputedStyle(e,":before"),a=s.getComputedStyle(e,":after");this.referenceElement===e&&Bm(l)&&(this.clonedReferenceElement=l),Cm(l)&&wL(l);var m=this.counters.parse(new J2(this.context,u)),w=this.resolvePseudoContent(e,l,p,Dh.BEFORE);U_(e)&&(t=!0),E_(e)||this.cloneChildNodes(e,l,t),w&&l.insertBefore(w,l.firstChild);var S=this.resolvePseudoContent(e,l,a,Dh.AFTER);return S&&l.appendChild(S),this.counters.pop(m),(u&&(this.options.copyStyles||Qd(e))&&!I_(e)||t)&&Em(u,l),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([l,e.scrollLeft,e.scrollTop]),(Md(e)||kd(e))&&(Md(l)||kd(l))&&(l.value=e.value),l}return e.cloneNode(!1)},n.prototype.resolvePseudoContent=function(e,t,s,l){var u=this;if(s){var p=s.content,a=t.ownerDocument;if(!(!a||!p||p==="none"||p==="-moz-alt-content"||s.display==="none")){this.counters.parse(new J2(this.context,s));var m=new iI(this.context,s),w=a.createElement("html2canvaspseudoelement");Em(s,w),m.content.forEach(function(T){if(T.type===0)w.appendChild(a.createTextNode(T.value));else if(T.type===22){var Q=a.createElement("img");Q.src=T.value,Q.style.opacity="1",w.appendChild(Q)}else if(T.type===18){if(T.name==="attr"){var I=T.values.filter(Ei);I.length&&w.appendChild(a.createTextNode(e.getAttribute(I[0].value)||""))}else if(T.name==="counter"){var q=T.values.filter(wu),j=q[0],Y=q[1];if(j&&Ei(j)){var K=u.counters.getCounterValue(j.value),ne=Y&&Ei(Y)?cm.parse(u.context,Y.value):3;w.appendChild(a.createTextNode(kh(K,ne,!1)))}}else if(T.name==="counters"){var he=T.values.filter(wu),j=he[0],Ee=he[1],Y=he[2];if(j&&Ei(j)){var De=u.counters.getCounterValues(j.value),Ne=Y&&Ei(Y)?cm.parse(u.context,Y.value):3,Qe=Ee&&Ee.type===0?Ee.value:"",ge=De.map(function(ce){return kh(ce,Ne,!1)}).join(Qe);w.appendChild(a.createTextNode(ge))}}}else if(T.type===20)switch(T.value){case"open-quote":w.appendChild(a.createTextNode(Y2(m.quotes,u.quoteDepth++,!0)));break;case"close-quote":w.appendChild(a.createTextNode(Y2(m.quotes,--u.quoteDepth,!1)));break;default:w.appendChild(a.createTextNode(T.value))}}),w.className=Im+" "+Lm;var S=l===Dh.BEFORE?" "+Im:" "+Lm;return Qd(t)?t.className.baseValue+=S:t.className+=S,w}}},n.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},n}(),Dh;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(Dh||(Dh={}));var uL=function(n,e){var t=n.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(O_,"true"),n.body.appendChild(t),t},hL=function(n){return new Promise(function(e){if(n.complete){e();return}if(!n.src){e();return}n.onload=e,n.onerror=e})},pL=function(n){return Promise.all([].slice.call(n.images,0).map(hL))},dL=function(n){return new Promise(function(e,t){var s=n.contentWindow;if(!s)return t("No window assigned for iframe");var l=s.document;s.onload=n.onload=function(){s.onload=n.onload=null;var u=setInterval(function(){l.body.childNodes.length>0&&l.readyState==="complete"&&(clearInterval(u),e(n))},50)}})},fL=["all","d","content"],Em=function(n,e){for(var t=n.length-1;t>=0;t--){var s=n.item(t);fL.indexOf(s)===-1&&e.style.setProperty(s,n.getPropertyValue(s))}return e},gL=function(n){var e="";return n&&(e+="<!DOCTYPE ",n.name&&(e+=n.name),n.internalSubset&&(e+=n.internalSubset),n.publicId&&(e+='"'+n.publicId+'"'),n.systemId&&(e+='"'+n.systemId+'"'),e+=">"),e},mL=function(n,e,t){n&&n.defaultView&&(e!==n.defaultView.pageXOffset||t!==n.defaultView.pageYOffset)&&n.defaultView.scrollTo(e,t)},yL=function(n){var e=n[0],t=n[1],s=n[2];e.scrollLeft=t,e.scrollTop=s},vL=":before",_L=":after",Im="___html2canvas___pseudoelement_before",Lm="___html2canvas___pseudoelement_after",z_=`{
    content: "" !important;
    display: none !important;
}`,wL=function(n){bL(n,"."+Im+vL+z_+`
         .`+Lm+_L+z_)},bL=function(n,e){var t=n.ownerDocument;if(t){var s=t.createElement("style");s.textContent=e,n.appendChild(s)}},H_=function(){function n(){}return n.getOrigin=function(e){var t=n._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},n.isSameOrigin=function(e){return n.getOrigin(e)===n._origin},n.setContext=function(e){n._link=e.document.createElement("a"),n._origin=n.getOrigin(e.location.href)},n._origin="about:blank",n}(),xL=function(){function n(e,t){this.context=e,this._options=t,this._cache={}}return n.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(Um(e)||FL(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},n.prototype.match=function(e){return this._cache[e]},n.prototype.loadImage=function(e){return Hs(this,void 0,void 0,function(){var t,s,l,u,p=this;return Bs(this,function(a){switch(a.label){case 0:return t=H_.isSameOrigin(e),s=!Tm(e)&&this._options.useCORS===!0&&as.SUPPORT_CORS_IMAGES&&!t,l=!Tm(e)&&!t&&!Um(e)&&typeof this._options.proxy=="string"&&as.SUPPORT_CORS_XHR&&!s,!t&&this._options.allowTaint===!1&&!Tm(e)&&!Um(e)&&!l&&!s?[2]:(u=e,l?[4,this.proxy(u)]:[3,2]);case 1:u=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(m,w){var S=new Image;S.onload=function(){return m(S)},S.onerror=w,(EL(u)||s)&&(S.crossOrigin="anonymous"),S.src=u,S.complete===!0&&setTimeout(function(){return m(S)},500),p._options.imageTimeout>0&&setTimeout(function(){return w("Timed out ("+p._options.imageTimeout+"ms) loading image")},p._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},n.prototype.has=function(e){return typeof this._cache[e]<"u"},n.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},n.prototype.proxy=function(e){var t=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var l=e.substring(0,256);return new Promise(function(u,p){var a=as.SUPPORT_RESPONSE_TYPE?"blob":"text",m=new XMLHttpRequest;m.onload=function(){if(m.status===200)if(a==="text")u(m.response);else{var T=new FileReader;T.addEventListener("load",function(){return u(T.result)},!1),T.addEventListener("error",function(Q){return p(Q)},!1),T.readAsDataURL(m.response)}else p("Failed to proxy resource "+l+" with status code "+m.status)},m.onerror=p;var w=s.indexOf("?")>-1?"&":"?";if(m.open("GET",""+s+w+"url="+encodeURIComponent(e)+"&responseType="+a),a!=="text"&&m instanceof XMLHttpRequest&&(m.responseType=a),t._options.imageTimeout){var S=t._options.imageTimeout;m.timeout=S,m.ontimeout=function(){return p("Timed out ("+S+"ms) proxying "+l)}}m.send()})},n}(),BL=/^data:image\/svg\+xml/i,CL=/^data:image\/.*;base64,/i,SL=/^data:image\/.*/i,FL=function(n){return as.SUPPORT_SVG_DRAWING||!IL(n)},Tm=function(n){return SL.test(n)},EL=function(n){return CL.test(n)},Um=function(n){return n.substr(0,4)==="blob"},IL=function(n){return n.substr(-3).toLowerCase()==="svg"||BL.test(n)},tr=function(){function n(e,t){this.type=0,this.x=e,this.y=t}return n.prototype.add=function(e,t){return new n(this.x+e,this.y+t)},n}(),Su=function(n,e,t){return new tr(n.x+(e.x-n.x)*t,n.y+(e.y-n.y)*t)},Dd=function(){function n(e,t,s,l){this.type=1,this.start=e,this.startControl=t,this.endControl=s,this.end=l}return n.prototype.subdivide=function(e,t){var s=Su(this.start,this.startControl,e),l=Su(this.startControl,this.endControl,e),u=Su(this.endControl,this.end,e),p=Su(s,l,e),a=Su(l,u,e),m=Su(p,a,e);return t?new n(this.start,s,p,m):new n(m,a,u,this.end)},n.prototype.add=function(e,t){return new n(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),Ha=function(n){return n.type===1},LL=function(){function n(e){var t=e.styles,s=e.bounds,l=Lh(t.borderTopLeftRadius,s.width,s.height),u=l[0],p=l[1],a=Lh(t.borderTopRightRadius,s.width,s.height),m=a[0],w=a[1],S=Lh(t.borderBottomRightRadius,s.width,s.height),T=S[0],Q=S[1],I=Lh(t.borderBottomLeftRadius,s.width,s.height),q=I[0],j=I[1],Y=[];Y.push((u+m)/s.width),Y.push((q+T)/s.width),Y.push((p+j)/s.height),Y.push((w+Q)/s.height);var K=Math.max.apply(Math,Y);K>1&&(u/=K,p/=K,m/=K,w/=K,T/=K,Q/=K,q/=K,j/=K);var ne=s.width-m,he=s.height-Q,Ee=s.width-T,De=s.height-j,Ne=t.borderTopWidth,Qe=t.borderRightWidth,ge=t.borderBottomWidth,Ze=t.borderLeftWidth,$e=Oi(t.paddingTop,e.bounds.width),ce=Oi(t.paddingRight,e.bounds.width),Ae=Oi(t.paddingBottom,e.bounds.width),xe=Oi(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=u>0||p>0?Gi(s.left+Ze/3,s.top+Ne/3,u-Ze/3,p-Ne/3,_i.TOP_LEFT):new tr(s.left+Ze/3,s.top+Ne/3),this.topRightBorderDoubleOuterBox=u>0||p>0?Gi(s.left+ne,s.top+Ne/3,m-Qe/3,w-Ne/3,_i.TOP_RIGHT):new tr(s.left+s.width-Qe/3,s.top+Ne/3),this.bottomRightBorderDoubleOuterBox=T>0||Q>0?Gi(s.left+Ee,s.top+he,T-Qe/3,Q-ge/3,_i.BOTTOM_RIGHT):new tr(s.left+s.width-Qe/3,s.top+s.height-ge/3),this.bottomLeftBorderDoubleOuterBox=q>0||j>0?Gi(s.left+Ze/3,s.top+De,q-Ze/3,j-ge/3,_i.BOTTOM_LEFT):new tr(s.left+Ze/3,s.top+s.height-ge/3),this.topLeftBorderDoubleInnerBox=u>0||p>0?Gi(s.left+Ze*2/3,s.top+Ne*2/3,u-Ze*2/3,p-Ne*2/3,_i.TOP_LEFT):new tr(s.left+Ze*2/3,s.top+Ne*2/3),this.topRightBorderDoubleInnerBox=u>0||p>0?Gi(s.left+ne,s.top+Ne*2/3,m-Qe*2/3,w-Ne*2/3,_i.TOP_RIGHT):new tr(s.left+s.width-Qe*2/3,s.top+Ne*2/3),this.bottomRightBorderDoubleInnerBox=T>0||Q>0?Gi(s.left+Ee,s.top+he,T-Qe*2/3,Q-ge*2/3,_i.BOTTOM_RIGHT):new tr(s.left+s.width-Qe*2/3,s.top+s.height-ge*2/3),this.bottomLeftBorderDoubleInnerBox=q>0||j>0?Gi(s.left+Ze*2/3,s.top+De,q-Ze*2/3,j-ge*2/3,_i.BOTTOM_LEFT):new tr(s.left+Ze*2/3,s.top+s.height-ge*2/3),this.topLeftBorderStroke=u>0||p>0?Gi(s.left+Ze/2,s.top+Ne/2,u-Ze/2,p-Ne/2,_i.TOP_LEFT):new tr(s.left+Ze/2,s.top+Ne/2),this.topRightBorderStroke=u>0||p>0?Gi(s.left+ne,s.top+Ne/2,m-Qe/2,w-Ne/2,_i.TOP_RIGHT):new tr(s.left+s.width-Qe/2,s.top+Ne/2),this.bottomRightBorderStroke=T>0||Q>0?Gi(s.left+Ee,s.top+he,T-Qe/2,Q-ge/2,_i.BOTTOM_RIGHT):new tr(s.left+s.width-Qe/2,s.top+s.height-ge/2),this.bottomLeftBorderStroke=q>0||j>0?Gi(s.left+Ze/2,s.top+De,q-Ze/2,j-ge/2,_i.BOTTOM_LEFT):new tr(s.left+Ze/2,s.top+s.height-ge/2),this.topLeftBorderBox=u>0||p>0?Gi(s.left,s.top,u,p,_i.TOP_LEFT):new tr(s.left,s.top),this.topRightBorderBox=m>0||w>0?Gi(s.left+ne,s.top,m,w,_i.TOP_RIGHT):new tr(s.left+s.width,s.top),this.bottomRightBorderBox=T>0||Q>0?Gi(s.left+Ee,s.top+he,T,Q,_i.BOTTOM_RIGHT):new tr(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=q>0||j>0?Gi(s.left,s.top+De,q,j,_i.BOTTOM_LEFT):new tr(s.left,s.top+s.height),this.topLeftPaddingBox=u>0||p>0?Gi(s.left+Ze,s.top+Ne,Math.max(0,u-Ze),Math.max(0,p-Ne),_i.TOP_LEFT):new tr(s.left+Ze,s.top+Ne),this.topRightPaddingBox=m>0||w>0?Gi(s.left+Math.min(ne,s.width-Qe),s.top+Ne,ne>s.width+Qe?0:Math.max(0,m-Qe),Math.max(0,w-Ne),_i.TOP_RIGHT):new tr(s.left+s.width-Qe,s.top+Ne),this.bottomRightPaddingBox=T>0||Q>0?Gi(s.left+Math.min(Ee,s.width-Ze),s.top+Math.min(he,s.height-ge),Math.max(0,T-Qe),Math.max(0,Q-ge),_i.BOTTOM_RIGHT):new tr(s.left+s.width-Qe,s.top+s.height-ge),this.bottomLeftPaddingBox=q>0||j>0?Gi(s.left+Ze,s.top+Math.min(De,s.height-ge),Math.max(0,q-Ze),Math.max(0,j-ge),_i.BOTTOM_LEFT):new tr(s.left+Ze,s.top+s.height-ge),this.topLeftContentBox=u>0||p>0?Gi(s.left+Ze+xe,s.top+Ne+$e,Math.max(0,u-(Ze+xe)),Math.max(0,p-(Ne+$e)),_i.TOP_LEFT):new tr(s.left+Ze+xe,s.top+Ne+$e),this.topRightContentBox=m>0||w>0?Gi(s.left+Math.min(ne,s.width+Ze+xe),s.top+Ne+$e,ne>s.width+Ze+xe?0:m-Ze+xe,w-(Ne+$e),_i.TOP_RIGHT):new tr(s.left+s.width-(Qe+ce),s.top+Ne+$e),this.bottomRightContentBox=T>0||Q>0?Gi(s.left+Math.min(Ee,s.width-(Ze+xe)),s.top+Math.min(he,s.height+Ne+$e),Math.max(0,T-(Qe+ce)),Q-(ge+Ae),_i.BOTTOM_RIGHT):new tr(s.left+s.width-(Qe+ce),s.top+s.height-(ge+Ae)),this.bottomLeftContentBox=q>0||j>0?Gi(s.left+Ze+xe,s.top+De,Math.max(0,q-(Ze+xe)),j-(ge+Ae),_i.BOTTOM_LEFT):new tr(s.left+Ze+xe,s.top+s.height-(ge+Ae))}return n}(),_i;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(_i||(_i={}));var Gi=function(n,e,t,s,l){var u=4*((Math.sqrt(2)-1)/3),p=t*u,a=s*u,m=n+t,w=e+s;switch(l){case _i.TOP_LEFT:return new Dd(new tr(n,w),new tr(n,w-a),new tr(m-p,e),new tr(m,e));case _i.TOP_RIGHT:return new Dd(new tr(n,e),new tr(n+p,e),new tr(m,w-a),new tr(m,w));case _i.BOTTOM_RIGHT:return new Dd(new tr(m,e),new tr(m,e+a),new tr(n+p,w),new tr(n,w));case _i.BOTTOM_LEFT:default:return new Dd(new tr(m,w),new tr(m-p,w),new tr(n,e+a),new tr(n,e))}},Nd=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},TL=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},Od=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},UL=function(){function n(e,t,s){this.offsetX=e,this.offsetY=t,this.matrix=s,this.type=0,this.target=6}return n}(),Rd=function(){function n(e,t){this.path=e,this.target=t,this.type=1}return n}(),PL=function(){function n(e){this.opacity=e,this.type=2,this.target=6}return n}(),QL=function(n){return n.type===0},V_=function(n){return n.type===1},ML=function(n){return n.type===2},j_=function(n,e){return n.length===e.length?n.some(function(t,s){return t===e[s]}):!1},kL=function(n,e,t,s,l){return n.map(function(u,p){switch(p){case 0:return u.add(e,t);case 1:return u.add(e+s,t);case 2:return u.add(e+s,t+l);case 3:return u.add(e,t+l)}return u})},G_=function(){function n(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),q_=function(){function n(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new LL(this.container),this.container.styles.opacity<1&&this.effects.push(new PL(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,l=this.container.bounds.top+this.container.styles.transformOrigin[1].number,u=this.container.styles.transform;this.effects.push(new UL(s,l,u))}if(this.container.styles.overflowX!==0){var p=Nd(this.curves),a=Od(this.curves);j_(p,a)?this.effects.push(new Rd(p,6)):(this.effects.push(new Rd(p,2)),this.effects.push(new Rd(a,4)))}}return n.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,l=this.effects.slice(0);s;){var u=s.effects.filter(function(m){return!V_(m)});if(t||s.container.styles.position!==0||!s.parent){if(l.unshift.apply(l,u),t=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var p=Nd(s.curves),a=Od(s.curves);j_(p,a)||l.unshift(new Rd(a,6))}}else l.unshift.apply(l,u);s=s.parent}return l.filter(function(m){return Mn(m.target,e)})},n}(),Pm=function(n,e,t,s){n.container.elements.forEach(function(l){var u=Mn(l.flags,4),p=Mn(l.flags,2),a=new q_(l,n);Mn(l.styles.display,2048)&&s.push(a);var m=Mn(l.flags,8)?[]:s;if(u||p){var w=u||l.styles.isPositioned()?t:e,S=new G_(a);if(l.styles.isPositioned()||l.styles.opacity<1||l.styles.isTransformed()){var T=l.styles.zIndex.order;if(T<0){var Q=0;w.negativeZIndex.some(function(q,j){return T>q.element.container.styles.zIndex.order?(Q=j,!1):Q>0}),w.negativeZIndex.splice(Q,0,S)}else if(T>0){var I=0;w.positiveZIndex.some(function(q,j){return T>=q.element.container.styles.zIndex.order?(I=j+1,!1):I>0}),w.positiveZIndex.splice(I,0,S)}else w.zeroOrAutoZIndexOrTransformedOrOpacity.push(S)}else l.styles.isFloating()?w.nonPositionedFloats.push(S):w.nonPositionedInlineLevel.push(S);Pm(a,S,u?S:t,m)}else l.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),Pm(a,e,t,m);Mn(l.flags,8)&&K_(l,m)})},K_=function(n,e){for(var t=n instanceof bm?n.start:1,s=n instanceof bm?n.reversed:!1,l=0;l<e.length;l++){var u=e[l];u.container instanceof y_&&typeof u.container.value=="number"&&u.container.value!==0&&(t=u.container.value),u.listValue=kh(t,u.container.styles.listStyleType,!0),t+=s?-1:1}},DL=function(n){var e=new q_(n,null),t=new G_(e),s=[];return Pm(e,t,t,s),K_(e.container,s),t},$_=function(n,e){switch(e){case 0:return Va(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return Va(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return Va(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return Va(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},NL=function(n,e){switch(e){case 0:return Va(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return Va(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return Va(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return Va(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},OL=function(n,e){switch(e){case 0:return Va(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return Va(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return Va(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return Va(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},RL=function(n,e){switch(e){case 0:return zd(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return zd(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return zd(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return zd(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},zd=function(n,e){var t=[];return Ha(n)?t.push(n.subdivide(.5,!1)):t.push(n),Ha(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Va=function(n,e,t,s){var l=[];return Ha(n)?l.push(n.subdivide(.5,!1)):l.push(n),Ha(t)?l.push(t.subdivide(.5,!0)):l.push(t),Ha(s)?l.push(s.subdivide(.5,!0).reverse()):l.push(s),Ha(e)?l.push(e.subdivide(.5,!1).reverse()):l.push(e),l},W_=function(n){var e=n.bounds,t=n.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},Hd=function(n){var e=n.styles,t=n.bounds,s=Oi(e.paddingLeft,t.width),l=Oi(e.paddingRight,t.width),u=Oi(e.paddingTop,t.width),p=Oi(e.paddingBottom,t.width);return t.add(s+e.borderLeftWidth,u+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+s+l),-(e.borderTopWidth+e.borderBottomWidth+u+p))},zL=function(n,e){return n===0?e.bounds:n===2?Hd(e):W_(e)},HL=function(n,e){return n===0?e.bounds:n===2?Hd(e):W_(e)},Qm=function(n,e,t){var s=zL(Eu(n.styles.backgroundOrigin,e),n),l=HL(Eu(n.styles.backgroundClip,e),n),u=VL(Eu(n.styles.backgroundSize,e),t,s),p=u[0],a=u[1],m=Lh(Eu(n.styles.backgroundPosition,e),s.width-p,s.height-a),w=jL(Eu(n.styles.backgroundRepeat,e),m,u,s,l),S=Math.round(s.left+m[0]),T=Math.round(s.top+m[1]);return[w,S,T,p,a]},Fu=function(n){return Ei(n)&&n.value===bu.AUTO},Vd=function(n){return typeof n=="number"},VL=function(n,e,t){var s=e[0],l=e[1],u=e[2],p=n[0],a=n[1];if(!p)return[0,0];if(Fn(p)&&a&&Fn(a))return[Oi(p,t.width),Oi(a,t.height)];var m=Vd(u);if(Ei(p)&&(p.value===bu.CONTAIN||p.value===bu.COVER)){if(Vd(u)){var w=t.width/t.height;return w<u!=(p.value===bu.COVER)?[t.width,t.width/u]:[t.height*u,t.height]}return[t.width,t.height]}var S=Vd(s),T=Vd(l),Q=S||T;if(Fu(p)&&(!a||Fu(a))){if(S&&T)return[s,l];if(!m&&!Q)return[t.width,t.height];if(Q&&m){var I=S?s:l*u,q=T?l:s/u;return[I,q]}var j=S?s:t.width,Y=T?l:t.height;return[j,Y]}if(m){var K=0,ne=0;return Fn(p)?K=Oi(p,t.width):Fn(a)&&(ne=Oi(a,t.height)),Fu(p)?K=ne*u:(!a||Fu(a))&&(ne=K/u),[K,ne]}var he=null,Ee=null;if(Fn(p)?he=Oi(p,t.width):a&&Fn(a)&&(Ee=Oi(a,t.height)),he!==null&&(!a||Fu(a))&&(Ee=S&&T?he/s*l:t.height),Ee!==null&&Fu(p)&&(he=S&&T?Ee/l*s:t.width),he!==null&&Ee!==null)return[he,Ee];throw new Error("Unable to calculate background-size for element")},Eu=function(n,e){var t=n[e];return typeof t>"u"?n[0]:t},jL=function(n,e,t,s,l){var u=e[0],p=e[1],a=t[0],m=t[1];switch(n){case 2:return[new tr(Math.round(s.left),Math.round(s.top+p)),new tr(Math.round(s.left+s.width),Math.round(s.top+p)),new tr(Math.round(s.left+s.width),Math.round(m+s.top+p)),new tr(Math.round(s.left),Math.round(m+s.top+p))];case 3:return[new tr(Math.round(s.left+u),Math.round(s.top)),new tr(Math.round(s.left+u+a),Math.round(s.top)),new tr(Math.round(s.left+u+a),Math.round(s.height+s.top)),new tr(Math.round(s.left+u),Math.round(s.height+s.top))];case 1:return[new tr(Math.round(s.left+u),Math.round(s.top+p)),new tr(Math.round(s.left+u+a),Math.round(s.top+p)),new tr(Math.round(s.left+u+a),Math.round(s.top+p+m)),new tr(Math.round(s.left+u),Math.round(s.top+p+m))];default:return[new tr(Math.round(l.left),Math.round(l.top)),new tr(Math.round(l.left+l.width),Math.round(l.top)),new tr(Math.round(l.left+l.width),Math.round(l.height+l.top)),new tr(Math.round(l.left),Math.round(l.height+l.top))]}},GL="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",X_="Hidden Text",qL=function(){function n(e){this._data={},this._document=e}return n.prototype.parseMetrics=function(e,t){var s=this._document.createElement("div"),l=this._document.createElement("img"),u=this._document.createElement("span"),p=this._document.body;s.style.visibility="hidden",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",p.appendChild(s),l.src=GL,l.width=1,l.height=1,l.style.margin="0",l.style.padding="0",l.style.verticalAlign="baseline",u.style.fontFamily=e,u.style.fontSize=t,u.style.margin="0",u.style.padding="0",u.appendChild(this._document.createTextNode(X_)),s.appendChild(u),s.appendChild(l);var a=l.offsetTop-u.offsetTop+2;s.removeChild(u),s.appendChild(this._document.createTextNode(X_)),s.style.lineHeight="normal",l.style.verticalAlign="super";var m=l.offsetTop-s.offsetTop+2;return p.removeChild(s),{baseline:a,middle:m}},n.prototype.getMetrics=function(e,t){var s=e+" "+t;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(e,t)),this._data[s]},n}(),Z_=function(){function n(e,t){this.context=e,this.options=t}return n}(),KL=1e4,$L=function(n){ho(e,n);function e(t,s){var l=n.call(this,t,s)||this;return l._activeEffects=[],l.canvas=s.canvas?s.canvas:document.createElement("canvas"),l.ctx=l.canvas.getContext("2d"),s.canvas||(l.canvas.width=Math.floor(s.width*s.scale),l.canvas.height=Math.floor(s.height*s.scale),l.canvas.style.width=s.width+"px",l.canvas.style.height=s.height+"px"),l.fontMetrics=new qL(document),l.ctx.scale(l.options.scale,l.options.scale),l.ctx.translate(-s.x,-s.y),l.ctx.textBaseline="bottom",l._activeEffects=[],l.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),l}return e.prototype.applyEffects=function(t){for(var s=this;this._activeEffects.length;)this.popEffect();t.forEach(function(l){return s.applyEffect(l)})},e.prototype.applyEffect=function(t){this.ctx.save(),ML(t)&&(this.ctx.globalAlpha=t.opacity),QL(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),V_(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return Hs(this,void 0,void 0,function(){var s;return Bs(this,function(l){switch(l.label){case 0:return s=t.element.container.styles,s.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return Hs(this,void 0,void 0,function(){return Bs(this,function(s){switch(s.label){case 0:if(Mn(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(t)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,s,l){var u=this;if(s===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+l);else{var p=wm(t.text);p.reduce(function(a,m){return u.ctx.fillText(m,a,t.bounds.top+l),a+u.ctx.measureText(m).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var s=t.fontVariant.filter(function(p){return p==="normal"||p==="small-caps"}).join(""),l=JL(t.fontFamily).join(", "),u=Ih(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,s,t.fontWeight,u,l].join(" "),l,u]},e.prototype.renderTextNode=function(t,s){return Hs(this,void 0,void 0,function(){var l,u,p,a,m,w,S,T,Q=this;return Bs(this,function(I){return l=this.createFontStyle(s),u=l[0],p=l[1],a=l[2],this.ctx.font=u,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",m=this.fontMetrics.getMetrics(p,a),w=m.baseline,S=m.middle,T=s.paintOrder,t.textBounds.forEach(function(q){T.forEach(function(j){switch(j){case 0:Q.ctx.fillStyle=jn(s.color),Q.renderTextWithLetterSpacing(q,s.letterSpacing,w);var Y=s.textShadow;Y.length&&q.text.trim().length&&(Y.slice(0).reverse().forEach(function(K){Q.ctx.shadowColor=jn(K.color),Q.ctx.shadowOffsetX=K.offsetX.number*Q.options.scale,Q.ctx.shadowOffsetY=K.offsetY.number*Q.options.scale,Q.ctx.shadowBlur=K.blur.number,Q.renderTextWithLetterSpacing(q,s.letterSpacing,w)}),Q.ctx.shadowColor="",Q.ctx.shadowOffsetX=0,Q.ctx.shadowOffsetY=0,Q.ctx.shadowBlur=0),s.textDecorationLine.length&&(Q.ctx.fillStyle=jn(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(K){switch(K){case 1:Q.ctx.fillRect(q.bounds.left,Math.round(q.bounds.top+w),q.bounds.width,1);break;case 2:Q.ctx.fillRect(q.bounds.left,Math.round(q.bounds.top),q.bounds.width,1);break;case 3:Q.ctx.fillRect(q.bounds.left,Math.ceil(q.bounds.top+S),q.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&q.text.trim().length&&(Q.ctx.strokeStyle=jn(s.webkitTextStrokeColor),Q.ctx.lineWidth=s.webkitTextStrokeWidth,Q.ctx.lineJoin=window.chrome?"miter":"round",Q.ctx.strokeText(q.text,q.bounds.left,q.bounds.top+w)),Q.ctx.strokeStyle="",Q.ctx.lineWidth=0,Q.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,s,l){if(l&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var u=Hd(t),p=Od(s);this.path(p),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(l,0,0,t.intrinsicWidth,t.intrinsicHeight,u.left,u.top,u.width,u.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return Hs(this,void 0,void 0,function(){var s,l,u,p,a,m,ne,ne,w,S,T,Q,Ee,I,q,De,j,Y,K,ne,he,Ee,De;return Bs(this,function(Ne){switch(Ne.label){case 0:this.applyEffects(t.getEffects(4)),s=t.container,l=t.curves,u=s.styles,p=0,a=s.textNodes,Ne.label=1;case 1:return p<a.length?(m=a[p],[4,this.renderTextNode(m,u)]):[3,4];case 2:Ne.sent(),Ne.label=3;case 3:return p++,[3,1];case 4:if(!(s instanceof f_))return[3,8];Ne.label=5;case 5:return Ne.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return ne=Ne.sent(),this.renderReplacedElement(s,l,ne),[3,8];case 7:return Ne.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof g_&&this.renderReplacedElement(s,l,s.canvas),!(s instanceof m_))return[3,12];Ne.label=9;case 9:return Ne.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return ne=Ne.sent(),this.renderReplacedElement(s,l,ne),[3,12];case 11:return Ne.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof b_&&s.tree?(w=new e(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,w.render(s.tree)]):[3,14];case 13:S=Ne.sent(),s.width&&s.height&&this.ctx.drawImage(S,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),Ne.label=14;case 14:if(s instanceof xm&&(T=Math.min(s.bounds.width,s.bounds.height),s.type===Td?s.checked&&(this.ctx.save(),this.path([new tr(s.bounds.left+T*.39363,s.bounds.top+T*.79),new tr(s.bounds.left+T*.16,s.bounds.top+T*.5549),new tr(s.bounds.left+T*.27347,s.bounds.top+T*.44071),new tr(s.bounds.left+T*.39694,s.bounds.top+T*.5649),new tr(s.bounds.left+T*.72983,s.bounds.top+T*.23),new tr(s.bounds.left+T*.84,s.bounds.top+T*.34085),new tr(s.bounds.left+T*.39363,s.bounds.top+T*.79)]),this.ctx.fillStyle=jn(v_),this.ctx.fill(),this.ctx.restore()):s.type===Ud&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+T/2,s.bounds.top+T/2,T/4,0,Math.PI*2,!0),this.ctx.fillStyle=jn(v_),this.ctx.fill(),this.ctx.restore())),WL(s)&&s.value.length){switch(Q=this.createFontStyle(u),Ee=Q[0],I=Q[1],q=this.fontMetrics.getMetrics(Ee,I).baseline,this.ctx.font=Ee,this.ctx.fillStyle=jn(u.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=ZL(s.styles.textAlign),De=Hd(s),j=0,s.styles.textAlign){case 1:j+=De.width/2;break;case 2:j+=De.width;break}Y=De.add(j,0,0,-De.height/2+1),this.ctx.save(),this.path([new tr(De.left,De.top),new tr(De.left+De.width,De.top),new tr(De.left+De.width,De.top+De.height),new tr(De.left,De.top+De.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Qh(s.value,Y),u.letterSpacing,q),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Mn(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(K=s.styles.listStyleImage,K.type!==0)return[3,18];ne=void 0,he=K.url,Ne.label=15;case 15:return Ne.trys.push([15,17,,18]),[4,this.context.cache.match(he)];case 16:return ne=Ne.sent(),this.ctx.drawImage(ne,s.bounds.left-(ne.width+10),s.bounds.top),[3,18];case 17:return Ne.sent(),this.context.logger.error("Error loading list-style-image "+he),[3,18];case 18:return[3,20];case 19:t.listValue&&s.styles.listStyleType!==-1&&(Ee=this.createFontStyle(u)[0],this.ctx.font=Ee,this.ctx.fillStyle=jn(u.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",De=new jA(s.bounds.left,s.bounds.top+Oi(s.styles.paddingTop,s.bounds.width),s.bounds.width,W2(u.lineHeight,u.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Qh(t.listValue,De),u.letterSpacing,W2(u.lineHeight,u.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Ne.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return Hs(this,void 0,void 0,function(){var s,l,K,u,p,K,a,m,K,w,S,K,T,Q,K,I,q,K,j,Y,K;return Bs(this,function(ne){switch(ne.label){case 0:if(Mn(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:ne.sent(),s=0,l=t.negativeZIndex,ne.label=2;case 2:return s<l.length?(K=l[s],[4,this.renderStack(K)]):[3,5];case 3:ne.sent(),ne.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:ne.sent(),u=0,p=t.nonInlineLevel,ne.label=7;case 7:return u<p.length?(K=p[u],[4,this.renderNode(K)]):[3,10];case 8:ne.sent(),ne.label=9;case 9:return u++,[3,7];case 10:a=0,m=t.nonPositionedFloats,ne.label=11;case 11:return a<m.length?(K=m[a],[4,this.renderStack(K)]):[3,14];case 12:ne.sent(),ne.label=13;case 13:return a++,[3,11];case 14:w=0,S=t.nonPositionedInlineLevel,ne.label=15;case 15:return w<S.length?(K=S[w],[4,this.renderStack(K)]):[3,18];case 16:ne.sent(),ne.label=17;case 17:return w++,[3,15];case 18:T=0,Q=t.inlineLevel,ne.label=19;case 19:return T<Q.length?(K=Q[T],[4,this.renderNode(K)]):[3,22];case 20:ne.sent(),ne.label=21;case 21:return T++,[3,19];case 22:I=0,q=t.zeroOrAutoZIndexOrTransformedOrOpacity,ne.label=23;case 23:return I<q.length?(K=q[I],[4,this.renderStack(K)]):[3,26];case 24:ne.sent(),ne.label=25;case 25:return I++,[3,23];case 26:j=0,Y=t.positiveZIndex,ne.label=27;case 27:return j<Y.length?(K=Y[j],[4,this.renderStack(K)]):[3,30];case 28:ne.sent(),ne.label=29;case 29:return j++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var s=this;t.forEach(function(l,u){var p=Ha(l)?l.start:l;u===0?s.ctx.moveTo(p.x,p.y):s.ctx.lineTo(p.x,p.y),Ha(l)&&s.ctx.bezierCurveTo(l.startControl.x,l.startControl.y,l.endControl.x,l.endControl.y,l.end.x,l.end.y)})},e.prototype.renderRepeat=function(t,s,l,u){this.path(t),this.ctx.fillStyle=s,this.ctx.translate(l,u),this.ctx.fill(),this.ctx.translate(-l,-u)},e.prototype.resizeImage=function(t,s,l){var u;if(t.width===s&&t.height===l)return t;var p=(u=this.canvas.ownerDocument)!==null&&u!==void 0?u:document,a=p.createElement("canvas");a.width=Math.max(1,s),a.height=Math.max(1,l);var m=a.getContext("2d");return m.drawImage(t,0,0,t.width,t.height,0,0,s,l),a},e.prototype.renderBackgroundImage=function(t){return Hs(this,void 0,void 0,function(){var s,l,u,p,a,m;return Bs(this,function(w){switch(w.label){case 0:s=t.styles.backgroundImage.length-1,l=function(S){var T,Q,I,$e,Je,rt,xe,_e,ge,q,$e,Je,rt,xe,_e,j,Y,K,ne,he,Ee,De,Ne,Qe,ge,Ze,$e,ce,Ae,xe,_e,et,Je,rt,Ye,it,nt,Bt,ee,pe,ye,Re;return Bs(this,function(Ge){switch(Ge.label){case 0:if(S.type!==0)return[3,5];T=void 0,Q=S.url,Ge.label=1;case 1:return Ge.trys.push([1,3,,4]),[4,u.context.cache.match(Q)];case 2:return T=Ge.sent(),[3,4];case 3:return Ge.sent(),u.context.logger.error("Error loading background-image "+Q),[3,4];case 4:return T&&(I=Qm(t,s,[T.width,T.height,T.width/T.height]),$e=I[0],Je=I[1],rt=I[2],xe=I[3],_e=I[4],ge=u.ctx.createPattern(u.resizeImage(T,xe,_e),"repeat"),u.renderRepeat($e,ge,Je,rt)),[3,6];case 5:QF(S)?(q=Qm(t,s,[null,null,null]),$e=q[0],Je=q[1],rt=q[2],xe=q[3],_e=q[4],j=IF(S.angle,xe,_e),Y=j[0],K=j[1],ne=j[2],he=j[3],Ee=j[4],De=document.createElement("canvas"),De.width=xe,De.height=_e,Ne=De.getContext("2d"),Qe=Ne.createLinearGradient(K,he,ne,Ee),N2(S.stops,Y).forEach(function(tt){return Qe.addColorStop(tt.stop,jn(tt.color))}),Ne.fillStyle=Qe,Ne.fillRect(0,0,xe,_e),xe>0&&_e>0&&(ge=u.ctx.createPattern(De,"repeat"),u.renderRepeat($e,ge,Je,rt))):MF(S)&&(Ze=Qm(t,s,[null,null,null]),$e=Ze[0],ce=Ze[1],Ae=Ze[2],xe=Ze[3],_e=Ze[4],et=S.position.length===0?[om]:S.position,Je=Oi(et[0],xe),rt=Oi(et[et.length-1],_e),Ye=LF(S,Je,rt,xe,_e),it=Ye[0],nt=Ye[1],it>0&&nt>0&&(Bt=u.ctx.createRadialGradient(ce+Je,Ae+rt,0,ce+Je,Ae+rt,it),N2(S.stops,it*2).forEach(function(tt){return Bt.addColorStop(tt.stop,jn(tt.color))}),u.path($e),u.ctx.fillStyle=Bt,it!==nt?(ee=t.bounds.left+.5*t.bounds.width,pe=t.bounds.top+.5*t.bounds.height,ye=nt/it,Re=1/ye,u.ctx.save(),u.ctx.translate(ee,pe),u.ctx.transform(1,0,0,ye,0,0),u.ctx.translate(-ee,-pe),u.ctx.fillRect(ce,Re*(Ae-pe)+pe,xe,_e*Re),u.ctx.restore()):u.ctx.fill())),Ge.label=6;case 6:return s--,[2]}})},u=this,p=0,a=t.styles.backgroundImage.slice(0).reverse(),w.label=1;case 1:return p<a.length?(m=a[p],[5,l(m)]):[3,4];case 2:w.sent(),w.label=3;case 3:return p++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,s,l){return Hs(this,void 0,void 0,function(){return Bs(this,function(u){return this.path($_(l,s)),this.ctx.fillStyle=jn(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,s,l,u){return Hs(this,void 0,void 0,function(){var p,a;return Bs(this,function(m){switch(m.label){case 0:return s<3?[4,this.renderSolidBorder(t,l,u)]:[3,2];case 1:return m.sent(),[2];case 2:return p=NL(u,l),this.path(p),this.ctx.fillStyle=jn(t),this.ctx.fill(),a=OL(u,l),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return Hs(this,void 0,void 0,function(){var s,l,u,p,a,m,w,S,T=this;return Bs(this,function(Q){switch(Q.label){case 0:return this.applyEffects(t.getEffects(2)),s=t.container.styles,l=!Dl(s.backgroundColor)||s.backgroundImage.length,u=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],p=XL(Eu(s.backgroundClip,0),t.curves),l||s.boxShadow.length?(this.ctx.save(),this.path(p),this.ctx.clip(),Dl(s.backgroundColor)||(this.ctx.fillStyle=jn(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:Q.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(I){T.ctx.save();var q=Nd(t.curves),j=I.inset?0:KL,Y=kL(q,-j+(I.inset?1:-1)*I.spread.number,(I.inset?1:-1)*I.spread.number,I.spread.number*(I.inset?-2:2),I.spread.number*(I.inset?-2:2));I.inset?(T.path(q),T.ctx.clip(),T.mask(Y)):(T.mask(q),T.ctx.clip(),T.path(Y)),T.ctx.shadowOffsetX=I.offsetX.number+j,T.ctx.shadowOffsetY=I.offsetY.number,T.ctx.shadowColor=jn(I.color),T.ctx.shadowBlur=I.blur.number,T.ctx.fillStyle=I.inset?jn(I.color):"rgba(0,0,0,1)",T.ctx.fill(),T.ctx.restore()}),Q.label=2;case 2:a=0,m=0,w=u,Q.label=3;case 3:return m<w.length?(S=w[m],S.style!==0&&!Dl(S.color)&&S.width>0?S.style!==2?[3,5]:[4,this.renderDashedDottedBorder(S.color,S.width,a,t.curves,2)]:[3,11]):[3,13];case 4:return Q.sent(),[3,11];case 5:return S.style!==3?[3,7]:[4,this.renderDashedDottedBorder(S.color,S.width,a,t.curves,3)];case 6:return Q.sent(),[3,11];case 7:return S.style!==4?[3,9]:[4,this.renderDoubleBorder(S.color,S.width,a,t.curves)];case 8:return Q.sent(),[3,11];case 9:return[4,this.renderSolidBorder(S.color,a,t.curves)];case 10:Q.sent(),Q.label=11;case 11:a++,Q.label=12;case 12:return m++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,s,l,u,p){return Hs(this,void 0,void 0,function(){var a,m,w,S,T,Q,I,q,j,Y,K,ne,he,Ee,De,Ne,De,Ne;return Bs(this,function(Qe){return this.ctx.save(),a=RL(u,l),m=$_(u,l),p===2&&(this.path(m),this.ctx.clip()),Ha(m[0])?(w=m[0].start.x,S=m[0].start.y):(w=m[0].x,S=m[0].y),Ha(m[1])?(T=m[1].end.x,Q=m[1].end.y):(T=m[1].x,Q=m[1].y),l===0||l===2?I=Math.abs(w-T):I=Math.abs(S-Q),this.ctx.beginPath(),p===3?this.formatPath(a):this.formatPath(m.slice(0,2)),q=s<3?s*3:s*2,j=s<3?s*2:s,p===3&&(q=s,j=s),Y=!0,I<=q*2?Y=!1:I<=q*2+j?(K=I/(2*q+j),q*=K,j*=K):(ne=Math.floor((I+j)/(q+j)),he=(I-ne*q)/(ne-1),Ee=(I-(ne+1)*q)/ne,j=Ee<=0||Math.abs(j-he)<Math.abs(j-Ee)?he:Ee),Y&&(p===3?this.ctx.setLineDash([0,q+j]):this.ctx.setLineDash([q,j])),p===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=jn(t),this.ctx.stroke(),this.ctx.setLineDash([]),p===2&&(Ha(m[0])&&(De=m[3],Ne=m[0],this.ctx.beginPath(),this.formatPath([new tr(De.end.x,De.end.y),new tr(Ne.start.x,Ne.start.y)]),this.ctx.stroke()),Ha(m[1])&&(De=m[1],Ne=m[2],this.ctx.beginPath(),this.formatPath([new tr(De.end.x,De.end.y),new tr(Ne.start.x,Ne.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return Hs(this,void 0,void 0,function(){var s;return Bs(this,function(l){switch(l.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=jn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=DL(t),[4,this.renderStack(s)];case 1:return l.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(Z_),WL=function(n){return n instanceof w_||n instanceof __?!0:n instanceof xm&&n.type!==Ud&&n.type!==Td},XL=function(n,e){switch(n){case 0:return Nd(e);case 2:return TL(e);case 1:default:return Od(e)}},ZL=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},YL=["-apple-system","system-ui"],JL=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(e){return YL.indexOf(e)===-1}):n},eT=function(n){ho(e,n);function e(t,s){var l=n.call(this,t,s)||this;return l.canvas=s.canvas?s.canvas:document.createElement("canvas"),l.ctx=l.canvas.getContext("2d"),l.options=s,l.canvas.width=Math.floor(s.width*s.scale),l.canvas.height=Math.floor(s.height*s.scale),l.canvas.style.width=s.width+"px",l.canvas.style.height=s.height+"px",l.ctx.scale(l.options.scale,l.options.scale),l.ctx.translate(-s.x,-s.y),l.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),l}return e.prototype.render=function(t){return Hs(this,void 0,void 0,function(){var s,l;return Bs(this,function(u){switch(u.label){case 0:return s=_m(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,tT(s)];case 1:return l=u.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=jn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(l,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(Z_),tT=function(n){return new Promise(function(e,t){var s=new Image;s.onload=function(){e(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},rT=function(){function n(e){var t=e.id,s=e.enabled;this.id=t,this.enabled=s,this.start=Date.now()}return n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Zp([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.prototype.getTime=function(){return Date.now()-this.start},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Zp([this.id,this.getTime()+"ms"],e))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Zp([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Zp([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.instances={},n}(),iT=function(){function n(e,t){var s;this.windowBounds=t,this.instanceName="#"+n.instanceCount++,this.logger=new rT({id:this.instanceName,enabled:e.logging}),this.cache=(s=e.cache)!==null&&s!==void 0?s:new xL(this,e)}return n.instanceCount=1,n}(),nT=function(n,e){return e===void 0&&(e={}),sT(n,e)};typeof window<"u"&&H_.setContext(window);var sT=function(n,e){return Hs(void 0,void 0,void 0,function(){var t,s,l,u,p,a,m,w,S,T,Q,I,q,j,Y,K,ne,he,Ee,De,Qe,Ne,Qe,ge,Ze,$e,ce,Ae,xe,_e,et,Je,rt,Ye,it,nt,Bt,ee,pe,ye;return Bs(this,function(Re){switch(Re.label){case 0:if(!n||typeof n!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=n.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(s=t.defaultView,!s)throw new Error("Document is not attached to a Window");return l={allowTaint:(ge=e.allowTaint)!==null&&ge!==void 0?ge:!1,imageTimeout:(Ze=e.imageTimeout)!==null&&Ze!==void 0?Ze:15e3,proxy:e.proxy,useCORS:($e=e.useCORS)!==null&&$e!==void 0?$e:!1},u=Rg({logging:(ce=e.logging)!==null&&ce!==void 0?ce:!0,cache:e.cache},l),p={windowWidth:(Ae=e.windowWidth)!==null&&Ae!==void 0?Ae:s.innerWidth,windowHeight:(xe=e.windowHeight)!==null&&xe!==void 0?xe:s.innerHeight,scrollX:(_e=e.scrollX)!==null&&_e!==void 0?_e:s.pageXOffset,scrollY:(et=e.scrollY)!==null&&et!==void 0?et:s.pageYOffset},a=new jA(p.scrollX,p.scrollY,p.windowWidth,p.windowHeight),m=new iT(u,a),w=(Je=e.foreignObjectRendering)!==null&&Je!==void 0?Je:!1,S={allowTaint:(rt=e.allowTaint)!==null&&rt!==void 0?rt:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:w,copyStyles:w},m.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),T=new R_(m,n,S),Q=T.clonedReferenceElement,Q?[4,T.toIFrame(t,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return I=Re.sent(),q=Cm(Q)||aL(Q)?k3(Q.ownerDocument):Yp(m,Q),j=q.width,Y=q.height,K=q.left,ne=q.top,he=aT(m,Q,e.backgroundColor),Ee={canvas:e.canvas,backgroundColor:he,scale:(it=(Ye=e.scale)!==null&&Ye!==void 0?Ye:s.devicePixelRatio)!==null&&it!==void 0?it:1,x:((nt=e.x)!==null&&nt!==void 0?nt:0)+K,y:((Bt=e.y)!==null&&Bt!==void 0?Bt:0)+ne,width:(ee=e.width)!==null&&ee!==void 0?ee:Math.ceil(j),height:(pe=e.height)!==null&&pe!==void 0?pe:Math.ceil(Y)},w?(m.logger.debug("Document cloned, using foreign object rendering"),Qe=new eT(m,Ee),[4,Qe.render(Q)]):[3,3];case 2:return De=Re.sent(),[3,5];case 3:return m.logger.debug("Document cloned, element located at "+K+","+ne+" with size "+j+"x"+Y+" using computed rendering"),m.logger.debug("Starting DOM parsing"),Ne=B_(m,Q),he===Ne.styles.backgroundColor&&(Ne.styles.backgroundColor=qA.TRANSPARENT),m.logger.debug("Starting renderer for element at "+Ee.x+","+Ee.y+" with size "+Ee.width+"x"+Ee.height),Qe=new $L(m,Ee),[4,Qe.render(Ne)];case 4:De=Re.sent(),Re.label=5;case 5:return(!((ye=e.removeContainer)!==null&&ye!==void 0)||ye)&&(R_.destroy(I)||m.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),m.logger.debug("Finished rendering"),[2,De]}})})},aT=function(n,e,t){var s=e.ownerDocument,l=s.documentElement?Th(n,getComputedStyle(s.documentElement).backgroundColor):qA.TRANSPARENT,u=s.body?Th(n,getComputedStyle(s.body).backgroundColor):qA.TRANSPARENT,p=typeof t=="string"?Th(n,t):t===null?qA.TRANSPARENT:4294967295;return e===s.documentElement?Dl(l)?Dl(u)?p:u:l:p};const oT=Object.freeze(Object.defineProperty({__proto__:null,default:nT},Symbol.toStringTag,{value:"Module"}));/*! @license DOMPurify 2.4.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.5/LICENSE */function zl(n){"@babel/helpers - typeof";return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zl(n)}function Mm(n,e){return Mm=Object.setPrototypeOf||function(t,s){return t.__proto__=s,t},Mm(n,e)}function AT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jd(n,e,t){return AT()?jd=Reflect.construct:jd=function(s,l,u){var p=[null];p.push.apply(p,l);var a=Function.bind.apply(s,p),m=new a;return u&&Mm(m,u.prototype),m},jd.apply(null,arguments)}function fo(n){return lT(n)||cT(n)||uT(n)||hT()}function lT(n){if(Array.isArray(n))return km(n)}function cT(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function uT(n,e){if(n){if(typeof n=="string")return km(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return km(n,e)}}function km(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=n[t];return s}function hT(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var pT=Object.hasOwnProperty,Y_=Object.setPrototypeOf,dT=Object.isFrozen,fT=Object.getPrototypeOf,gT=Object.getOwnPropertyDescriptor,Gs=Object.freeze,go=Object.seal,mT=Object.create,J_=typeof Reflect<"u"&&Reflect,Gd=J_.apply,Dm=J_.construct;Gd||(Gd=function(n,e,t){return n.apply(e,t)}),Gs||(Gs=function(n){return n}),go||(go=function(n){return n}),Dm||(Dm=function(n,e){return jd(n,fo(e))});var yT=ja(Array.prototype.forEach),ew=ja(Array.prototype.pop),Nh=ja(Array.prototype.push),qd=ja(String.prototype.toLowerCase),Nm=ja(String.prototype.toString),vT=ja(String.prototype.match),mo=ja(String.prototype.replace),_T=ja(String.prototype.indexOf),wT=ja(String.prototype.trim),qs=ja(RegExp.prototype.test),Om=bT(TypeError);function ja(n){return function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),l=1;l<t;l++)s[l-1]=arguments[l];return Gd(n,e,s)}}function bT(n){return function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Dm(n,t)}}function Jr(n,e,t){t=t||qd,Y_&&Y_(n,null);for(var s=e.length;s--;){var l=e[s];if(typeof l=="string"){var u=t(l);u!==l&&(dT(e)||(e[s]=u),l=u)}n[l]=!0}return n}function Bc(n){var e=mT(null),t;for(t in n)Gd(pT,n,[t])===!0&&(e[t]=n[t]);return e}function Kd(n,e){for(;n!==null;){var t=gT(n,e);if(t){if(t.get)return ja(t.get);if(typeof t.value=="function")return ja(t.value)}n=fT(n)}function s(l){return console.warn("fallback value for",l),null}return s}var tw=Gs(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Rm=Gs(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),zm=Gs(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),xT=Gs(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Hm=Gs(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),BT=Gs(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),rw=Gs(["#text"]),iw=Gs(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Vm=Gs(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),nw=Gs(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),$d=Gs(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),CT=go(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ST=go(/<%[\w\W]*|[\w\W]*%>/gm),FT=go(/\${[\w\W]*}/gm),ET=go(/^data-[\-\w.\u00B7-\uFFFF]/),IT=go(/^aria-[\-\w]+$/),LT=go(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),TT=go(/^(?:\w+script|data):/i),UT=go(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),PT=go(/^html$/i),QT=function(){return typeof window>"u"?null:window},MT=function(n,e){if(zl(n)!=="object"||typeof n.createPolicy!="function")return null;var t=null,s="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(s)&&(t=e.currentScript.getAttribute(s));var l="dompurify"+(t?"#"+t:"");try{return n.createPolicy(l,{createHTML:function(u){return u},createScriptURL:function(u){return u}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}};function sw(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:QT(),e=function(Le){return sw(Le)};if(e.version="2.4.5",e.removed=[],!n||!n.document||n.document.nodeType!==9)return e.isSupported=!1,e;var t=n.document,s=n.document,l=n.DocumentFragment,u=n.HTMLTemplateElement,p=n.Node,a=n.Element,m=n.NodeFilter,w=n.NamedNodeMap,S=w===void 0?n.NamedNodeMap||n.MozNamedAttrMap:w,T=n.HTMLFormElement,Q=n.DOMParser,I=n.trustedTypes,q=a.prototype,j=Kd(q,"cloneNode"),Y=Kd(q,"nextSibling"),K=Kd(q,"childNodes"),ne=Kd(q,"parentNode");if(typeof u=="function"){var he=s.createElement("template");he.content&&he.content.ownerDocument&&(s=he.content.ownerDocument)}var Ee=MT(I,t),De=Ee?Ee.createHTML(""):"",Ne=s,Qe=Ne.implementation,ge=Ne.createNodeIterator,Ze=Ne.createDocumentFragment,$e=Ne.getElementsByTagName,ce=t.importNode,Ae={};try{Ae=Bc(s).documentMode?s.documentMode:{}}catch{}var xe={};e.isSupported=typeof ne=="function"&&Qe&&typeof Qe.createHTMLDocument<"u"&&Ae!==9;var _e=CT,et=ST,Je=FT,rt=ET,Ye=IT,it=TT,nt=UT,Bt=LT,ee=null,pe=Jr({},[].concat(fo(tw),fo(Rm),fo(zm),fo(Hm),fo(rw))),ye=null,Re=Jr({},[].concat(fo(iw),fo(Vm),fo(nw),fo($d))),Ge=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),tt=null,st=null,ot=!0,Ct=!0,Ft=!1,zt=!0,Vt=!1,Jt=!1,ft=!1,Ue=!1,fr=!1,Zt=!1,bt=!1,ze=!0,Ut=!1,Pt="user-content-",Qt=!0,Lt=!1,hr={},wr=null,Lr=Jr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),qr=null,gr=Jr({},["audio","video","img","source","image","track"]),br=null,Rt=Jr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vt="http://www.w3.org/1998/Math/MathML",Cr="http://www.w3.org/2000/svg",Tr="http://www.w3.org/1999/xhtml",Dr=Tr,Vr=!1,xt=null,Kt=Jr({},[vt,Cr,Tr],Nm),rr,Or=["application/xhtml+xml","text/html"],bi="text/html",Nt,$r=null,ue=s.createElement("form"),Z=function(Le){return Le instanceof RegExp||Le instanceof Function},ie=function(Le){$r&&$r===Le||((!Le||zl(Le)!=="object")&&(Le={}),Le=Bc(Le),rr=Or.indexOf(Le.PARSER_MEDIA_TYPE)===-1?rr=bi:rr=Le.PARSER_MEDIA_TYPE,Nt=rr==="application/xhtml+xml"?Nm:qd,ee="ALLOWED_TAGS"in Le?Jr({},Le.ALLOWED_TAGS,Nt):pe,ye="ALLOWED_ATTR"in Le?Jr({},Le.ALLOWED_ATTR,Nt):Re,xt="ALLOWED_NAMESPACES"in Le?Jr({},Le.ALLOWED_NAMESPACES,Nm):Kt,br="ADD_URI_SAFE_ATTR"in Le?Jr(Bc(Rt),Le.ADD_URI_SAFE_ATTR,Nt):Rt,qr="ADD_DATA_URI_TAGS"in Le?Jr(Bc(gr),Le.ADD_DATA_URI_TAGS,Nt):gr,wr="FORBID_CONTENTS"in Le?Jr({},Le.FORBID_CONTENTS,Nt):Lr,tt="FORBID_TAGS"in Le?Jr({},Le.FORBID_TAGS,Nt):{},st="FORBID_ATTR"in Le?Jr({},Le.FORBID_ATTR,Nt):{},hr="USE_PROFILES"in Le?Le.USE_PROFILES:!1,ot=Le.ALLOW_ARIA_ATTR!==!1,Ct=Le.ALLOW_DATA_ATTR!==!1,Ft=Le.ALLOW_UNKNOWN_PROTOCOLS||!1,zt=Le.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Vt=Le.SAFE_FOR_TEMPLATES||!1,Jt=Le.WHOLE_DOCUMENT||!1,fr=Le.RETURN_DOM||!1,Zt=Le.RETURN_DOM_FRAGMENT||!1,bt=Le.RETURN_TRUSTED_TYPE||!1,Ue=Le.FORCE_BODY||!1,ze=Le.SANITIZE_DOM!==!1,Ut=Le.SANITIZE_NAMED_PROPS||!1,Qt=Le.KEEP_CONTENT!==!1,Lt=Le.IN_PLACE||!1,Bt=Le.ALLOWED_URI_REGEXP||Bt,Dr=Le.NAMESPACE||Tr,Ge=Le.CUSTOM_ELEMENT_HANDLING||{},Le.CUSTOM_ELEMENT_HANDLING&&Z(Le.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ge.tagNameCheck=Le.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Le.CUSTOM_ELEMENT_HANDLING&&Z(Le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ge.attributeNameCheck=Le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Le.CUSTOM_ELEMENT_HANDLING&&typeof Le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ge.allowCustomizedBuiltInElements=Le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Vt&&(Ct=!1),Zt&&(fr=!0),hr&&(ee=Jr({},fo(rw)),ye=[],hr.html===!0&&(Jr(ee,tw),Jr(ye,iw)),hr.svg===!0&&(Jr(ee,Rm),Jr(ye,Vm),Jr(ye,$d)),hr.svgFilters===!0&&(Jr(ee,zm),Jr(ye,Vm),Jr(ye,$d)),hr.mathMl===!0&&(Jr(ee,Hm),Jr(ye,nw),Jr(ye,$d))),Le.ADD_TAGS&&(ee===pe&&(ee=Bc(ee)),Jr(ee,Le.ADD_TAGS,Nt)),Le.ADD_ATTR&&(ye===Re&&(ye=Bc(ye)),Jr(ye,Le.ADD_ATTR,Nt)),Le.ADD_URI_SAFE_ATTR&&Jr(br,Le.ADD_URI_SAFE_ATTR,Nt),Le.FORBID_CONTENTS&&(wr===Lr&&(wr=Bc(wr)),Jr(wr,Le.FORBID_CONTENTS,Nt)),Qt&&(ee["#text"]=!0),Jt&&Jr(ee,["html","head","body"]),ee.table&&(Jr(ee,["tbody"]),delete tt.tbody),Gs&&Gs(Le),$r=Le)},le=Jr({},["mi","mo","mn","ms","mtext"]),ve=Jr({},["foreignobject","desc","title","annotation-xml"]),be=Jr({},["title","style","font","a","script"]),ke=Jr({},Rm);Jr(ke,zm),Jr(ke,xT);var Oe=Jr({},Hm);Jr(Oe,BT);var Te=function(Le){var Mt=ne(Le);(!Mt||!Mt.tagName)&&(Mt={namespaceURI:Dr,tagName:"template"});var yt=qd(Le.tagName),vr=qd(Mt.tagName);return xt[Le.namespaceURI]?Le.namespaceURI===Cr?Mt.namespaceURI===Tr?yt==="svg":Mt.namespaceURI===vt?yt==="svg"&&(vr==="annotation-xml"||le[vr]):!!ke[yt]:Le.namespaceURI===vt?Mt.namespaceURI===Tr?yt==="math":Mt.namespaceURI===Cr?yt==="math"&&ve[vr]:!!Oe[yt]:Le.namespaceURI===Tr?Mt.namespaceURI===Cr&&!ve[vr]||Mt.namespaceURI===vt&&!le[vr]?!1:!Oe[yt]&&(be[yt]||!ke[yt]):!!(rr==="application/xhtml+xml"&&xt[Le.namespaceURI]):!1},Ve=function(Le){Nh(e.removed,{element:Le});try{Le.parentNode.removeChild(Le)}catch{try{Le.outerHTML=De}catch{Le.remove()}}},lt=function(Le,Mt){try{Nh(e.removed,{attribute:Mt.getAttributeNode(Le),from:Mt})}catch{Nh(e.removed,{attribute:null,from:Mt})}if(Mt.removeAttribute(Le),Le==="is"&&!ye[Le])if(fr||Zt)try{Ve(Mt)}catch{}else try{Mt.setAttribute(Le,"")}catch{}},ht=function(Le){var Mt,yt;if(Ue)Le="<remove></remove>"+Le;else{var vr=vT(Le,/^[\r\n\t ]+/);yt=vr&&vr[0]}rr==="application/xhtml+xml"&&Dr===Tr&&(Le='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Le+"</body></html>");var Nr=Ee?Ee.createHTML(Le):Le;if(Dr===Tr)try{Mt=new Q().parseFromString(Nr,rr)}catch{}if(!Mt||!Mt.documentElement){Mt=Qe.createDocument(Dr,"template",null);try{Mt.documentElement.innerHTML=Vr?De:Nr}catch{}}var di=Mt.body||Mt.documentElement;return Le&&yt&&di.insertBefore(s.createTextNode(yt),di.childNodes[0]||null),Dr===Tr?$e.call(Mt,Jt?"html":"body")[0]:Jt?Mt.documentElement:di},gt=function(Le){return ge.call(Le.ownerDocument||Le,Le,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT,null,!1)},nr=function(Le){return Le instanceof T&&(typeof Le.nodeName!="string"||typeof Le.textContent!="string"||typeof Le.removeChild!="function"||!(Le.attributes instanceof S)||typeof Le.removeAttribute!="function"||typeof Le.setAttribute!="function"||typeof Le.namespaceURI!="string"||typeof Le.insertBefore!="function"||typeof Le.hasChildNodes!="function")},sr=function(Le){return zl(p)==="object"?Le instanceof p:Le&&zl(Le)==="object"&&typeof Le.nodeType=="number"&&typeof Le.nodeName=="string"},jt=function(Le,Mt,yt){xe[Le]&&yT(xe[Le],function(vr){vr.call(e,Mt,yt,$r)})},Yt=function(Le){var Mt;if(jt("beforeSanitizeElements",Le,null),nr(Le)||qs(/[\u0080-\uFFFF]/,Le.nodeName))return Ve(Le),!0;var yt=Nt(Le.nodeName);if(jt("uponSanitizeElement",Le,{tagName:yt,allowedTags:ee}),Le.hasChildNodes()&&!sr(Le.firstElementChild)&&(!sr(Le.content)||!sr(Le.content.firstElementChild))&&qs(/<[/\w]/g,Le.innerHTML)&&qs(/<[/\w]/g,Le.textContent)||yt==="select"&&qs(/<template/i,Le.innerHTML))return Ve(Le),!0;if(!ee[yt]||tt[yt]){if(!tt[yt]&&Br(yt)&&(Ge.tagNameCheck instanceof RegExp&&qs(Ge.tagNameCheck,yt)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(yt)))return!1;if(Qt&&!wr[yt]){var vr=ne(Le)||Le.parentNode,Nr=K(Le)||Le.childNodes;if(Nr&&vr)for(var di=Nr.length,Ii=di-1;Ii>=0;--Ii)vr.insertBefore(j(Nr[Ii],!0),Y(Le))}return Ve(Le),!0}return Le instanceof a&&!Te(Le)||(yt==="noscript"||yt==="noembed")&&qs(/<\/no(script|embed)/i,Le.innerHTML)?(Ve(Le),!0):(Vt&&Le.nodeType===3&&(Mt=Le.textContent,Mt=mo(Mt,_e," "),Mt=mo(Mt,et," "),Mt=mo(Mt,Je," "),Le.textContent!==Mt&&(Nh(e.removed,{element:Le.cloneNode()}),Le.textContent=Mt)),jt("afterSanitizeElements",Le,null),!1)},ur=function(Le,Mt,yt){if(ze&&(Mt==="id"||Mt==="name")&&(yt in s||yt in ue))return!1;if(!(Ct&&!st[Mt]&&qs(rt,Mt))&&!(ot&&qs(Ye,Mt))){if(!ye[Mt]||st[Mt]){if(!(Br(Le)&&(Ge.tagNameCheck instanceof RegExp&&qs(Ge.tagNameCheck,Le)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(Le))&&(Ge.attributeNameCheck instanceof RegExp&&qs(Ge.attributeNameCheck,Mt)||Ge.attributeNameCheck instanceof Function&&Ge.attributeNameCheck(Mt))||Mt==="is"&&Ge.allowCustomizedBuiltInElements&&(Ge.tagNameCheck instanceof RegExp&&qs(Ge.tagNameCheck,yt)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(yt))))return!1}else if(!br[Mt]&&!qs(Bt,mo(yt,nt,""))&&!((Mt==="src"||Mt==="xlink:href"||Mt==="href")&&Le!=="script"&&_T(yt,"data:")===0&&qr[Le])&&!(Ft&&!qs(it,mo(yt,nt,"")))&&yt)return!1}return!0},Br=function(Le){return Le.indexOf("-")>0},Rr=function(Le){var Mt,yt,vr,Nr;jt("beforeSanitizeAttributes",Le,null);var di=Le.attributes;if(di){var Ii={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ye};for(Nr=di.length;Nr--;){Mt=di[Nr];var qn=Mt,Hi=qn.name,Wi=qn.namespaceURI;if(yt=Hi==="value"?Mt.value:wT(Mt.value),vr=Nt(Hi),Ii.attrName=vr,Ii.attrValue=yt,Ii.keepAttr=!0,Ii.forceKeepAttr=void 0,jt("uponSanitizeAttribute",Le,Ii),yt=Ii.attrValue,!Ii.forceKeepAttr&&(lt(Hi,Le),!!Ii.keepAttr)){if(!zt&&qs(/\/>/i,yt)){lt(Hi,Le);continue}Vt&&(yt=mo(yt,_e," "),yt=mo(yt,et," "),yt=mo(yt,Je," "));var ii=Nt(Le.nodeName);if(ur(ii,vr,yt)){if(Ut&&(vr==="id"||vr==="name")&&(lt(Hi,Le),yt=Pt+yt),Ee&&zl(I)==="object"&&typeof I.getAttributeType=="function"&&!Wi)switch(I.getAttributeType(ii,vr)){case"TrustedHTML":yt=Ee.createHTML(yt);break;case"TrustedScriptURL":yt=Ee.createScriptURL(yt);break}try{Wi?Le.setAttributeNS(Wi,Hi,yt):Le.setAttribute(Hi,yt),ew(e.removed)}catch{}}}}jt("afterSanitizeAttributes",Le,null)}},Sr=function Le(Mt){var yt,vr=gt(Mt);for(jt("beforeSanitizeShadowDOM",Mt,null);yt=vr.nextNode();)jt("uponSanitizeShadowNode",yt,null),!Yt(yt)&&(yt.content instanceof l&&Le(yt.content),Rr(yt));jt("afterSanitizeShadowDOM",Mt,null)};return e.sanitize=function(Le){var Mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},yt,vr,Nr,di,Ii;if(Vr=!Le,Vr&&(Le="<!-->"),typeof Le!="string"&&!sr(Le)){if(typeof Le.toString!="function")throw Om("toString is not a function");if(Le=Le.toString(),typeof Le!="string")throw Om("dirty is not a string, aborting")}if(!e.isSupported){if(zl(n.toStaticHTML)==="object"||typeof n.toStaticHTML=="function"){if(typeof Le=="string")return n.toStaticHTML(Le);if(sr(Le))return n.toStaticHTML(Le.outerHTML)}return Le}if(ft||ie(Mt),e.removed=[],typeof Le=="string"&&(Lt=!1),Lt){if(Le.nodeName){var qn=Nt(Le.nodeName);if(!ee[qn]||tt[qn])throw Om("root node is forbidden and cannot be sanitized in-place")}}else if(Le instanceof p)yt=ht("<!---->"),vr=yt.ownerDocument.importNode(Le,!0),vr.nodeType===1&&vr.nodeName==="BODY"||vr.nodeName==="HTML"?yt=vr:yt.appendChild(vr);else{if(!fr&&!Vt&&!Jt&&Le.indexOf("<")===-1)return Ee&&bt?Ee.createHTML(Le):Le;if(yt=ht(Le),!yt)return fr?null:bt?De:""}yt&&Ue&&Ve(yt.firstChild);for(var Hi=gt(Lt?Le:yt);Nr=Hi.nextNode();)Nr.nodeType===3&&Nr===di||Yt(Nr)||(Nr.content instanceof l&&Sr(Nr.content),Rr(Nr),di=Nr);if(di=null,Lt)return Le;if(fr){if(Zt)for(Ii=Ze.call(yt.ownerDocument);yt.firstChild;)Ii.appendChild(yt.firstChild);else Ii=yt;return(ye.shadowroot||ye.shadowrootmod)&&(Ii=ce.call(t,Ii,!0)),Ii}var Wi=Jt?yt.outerHTML:yt.innerHTML;return Jt&&ee["!doctype"]&&yt.ownerDocument&&yt.ownerDocument.doctype&&yt.ownerDocument.doctype.name&&qs(PT,yt.ownerDocument.doctype.name)&&(Wi="<!DOCTYPE "+yt.ownerDocument.doctype.name+`>
`+Wi),Vt&&(Wi=mo(Wi,_e," "),Wi=mo(Wi,et," "),Wi=mo(Wi,Je," ")),Ee&&bt?Ee.createHTML(Wi):Wi},e.setConfig=function(Le){ie(Le),ft=!0},e.clearConfig=function(){$r=null,ft=!1},e.isValidAttribute=function(Le,Mt,yt){$r||ie({});var vr=Nt(Le),Nr=Nt(Mt);return ur(vr,Nr,yt)},e.addHook=function(Le,Mt){typeof Mt=="function"&&(xe[Le]=xe[Le]||[],Nh(xe[Le],Mt))},e.removeHook=function(Le){if(xe[Le])return ew(xe[Le])},e.removeHooks=function(Le){xe[Le]&&(xe[Le]=[])},e.removeAllHooks=function(){xe={}},e}var kT=sw();const DT=Object.freeze(Object.defineProperty({__proto__:null,default:kT},Symbol.toStringTag,{value:"Module"}));var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wd=function(n){return n&&n.Math==Math&&n},kn=Wd(typeof globalThis=="object"&&globalThis)||Wd(typeof window=="object"&&window)||Wd(typeof self=="object"&&self)||Wd(typeof Oh=="object"&&Oh)||function(){return this}()||Oh||Function("return this")(),Iu={},dn=function(n){try{return!!n()}catch{return!0}},NT=dn,AA=!NT(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),OT=dn,Xd=!OT(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),RT=Xd,Zd=Function.prototype.call,os=RT?Zd.bind(Zd):function(){return Zd.apply(Zd,arguments)},ow={},Aw={}.propertyIsEnumerable,lw=Object.getOwnPropertyDescriptor,zT=lw&&!Aw.call({1:2},1);ow.f=zT?function(n){var e=lw(this,n);return!!e&&e.enumerable}:Aw;var Yd=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}},cw=Xd,uw=Function.prototype,jm=uw.call,HT=cw&&uw.bind.bind(jm,jm),fn=cw?HT:function(n){return function(){return jm.apply(n,arguments)}},hw=fn,VT=hw({}.toString),jT=hw("".slice),Cc=function(n){return jT(VT(n),8,-1)},GT=fn,qT=dn,KT=Cc,Gm=Object,$T=GT("".split),pw=qT(function(){return!Gm("z").propertyIsEnumerable(0)})?function(n){return KT(n)=="String"?$T(n,""):Gm(n)}:Gm,Sc=function(n){return n==null},WT=Sc,XT=TypeError,lA=function(n){if(WT(n))throw XT("Can't call method on "+n);return n},ZT=pw,YT=lA,Rh=function(n){return ZT(YT(n))},qm=typeof document=="object"&&document.all,JT=typeof qm>"u"&&qm!==void 0,dw={all:qm,IS_HTMLDDA:JT},fw=dw,eU=fw.all,sn=fw.IS_HTMLDDA?function(n){return typeof n=="function"||n===eU}:function(n){return typeof n=="function"},gw=sn,mw=dw,tU=mw.all,$A=mw.IS_HTMLDDA?function(n){return typeof n=="object"?n!==null:gw(n)||n===tU}:function(n){return typeof n=="object"?n!==null:gw(n)},Km=kn,rU=sn,iU=function(n){return rU(n)?n:void 0},Fc=function(n,e){return arguments.length<2?iU(Km[n]):Km[n]&&Km[n][e]},nU=fn,Jd=nU({}.isPrototypeOf),ef=typeof navigator<"u"&&String(navigator.userAgent)||"",yw=kn,$m=ef,vw=yw.process,_w=yw.Deno,ww=vw&&vw.versions||_w&&_w.version,bw=ww&&ww.v8,yo,tf;bw&&(yo=bw.split("."),tf=yo[0]>0&&yo[0]<4?1:+(yo[0]+yo[1])),!tf&&$m&&(yo=$m.match(/Edge\/(\d+)/),(!yo||yo[1]>=74)&&(yo=$m.match(/Chrome\/(\d+)/),yo&&(tf=+yo[1])));var Wm=tf,xw=Wm,sU=dn,aU=kn,oU=aU.String,Bw=!!Object.getOwnPropertySymbols&&!sU(function(){var n=Symbol();return!oU(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&xw&&xw<41}),AU=Bw,Cw=AU&&!Symbol.sham&&typeof Symbol.iterator=="symbol",lU=Fc,cU=sn,uU=Jd,hU=Cw,pU=Object,Sw=hU?function(n){return typeof n=="symbol"}:function(n){var e=lU("Symbol");return cU(e)&&uU(e.prototype,pU(n))},dU=String,rf=function(n){try{return dU(n)}catch{return"Object"}},fU=sn,gU=rf,mU=TypeError,WA=function(n){if(fU(n))return n;throw mU(gU(n)+" is not a function")},yU=WA,vU=Sc,Lu=function(n,e){var t=n[e];return vU(t)?void 0:yU(t)},Xm=os,Zm=sn,Ym=$A,_U=TypeError,wU=function(n,e){var t,s;if(e==="string"&&Zm(t=n.toString)&&!Ym(s=Xm(t,n))||Zm(t=n.valueOf)&&!Ym(s=Xm(t,n))||e!=="string"&&Zm(t=n.toString)&&!Ym(s=Xm(t,n)))return s;throw _U("Can't convert object to primitive value")},Fw={exports:{}},Ew=kn,bU=Object.defineProperty,Jm=function(n,e){try{bU(Ew,n,{value:e,configurable:!0,writable:!0})}catch{Ew[n]=e}return e},xU=kn,BU=Jm,Iw="__core-js_shared__",CU=xU[Iw]||BU(Iw,{}),e0=CU,Lw=e0;(Fw.exports=function(n,e){return Lw[n]||(Lw[n]=e!==void 0?e:{})})("versions",[]).push({version:"3.30.2",mode:"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"});var t0=Fw.exports,SU=lA,FU=Object,nf=function(n){return FU(SU(n))},EU=fn,IU=nf,LU=EU({}.hasOwnProperty),vo=Object.hasOwn||function(n,e){return LU(IU(n),e)},TU=fn,UU=0,PU=Math.random(),QU=TU(1 .toString),Tw=function(n){return"Symbol("+(n===void 0?"":n)+")_"+QU(++UU+PU,36)},MU=kn,kU=t0,Uw=vo,DU=Tw,NU=Bw,OU=Cw,Tu=MU.Symbol,r0=kU("wks"),RU=OU?Tu.for||Tu:Tu&&Tu.withoutSetter||DU,Gn=function(n){return Uw(r0,n)||(r0[n]=NU&&Uw(Tu,n)?Tu[n]:RU("Symbol."+n)),r0[n]},zU=os,Pw=$A,Qw=Sw,HU=Lu,VU=wU,jU=Gn,GU=TypeError,qU=jU("toPrimitive"),KU=function(n,e){if(!Pw(n)||Qw(n))return n;var t=HU(n,qU),s;if(t){if(e===void 0&&(e="default"),s=zU(t,n,e),!Pw(s)||Qw(s))return s;throw GU("Can't convert object to primitive value")}return e===void 0&&(e="number"),VU(n,e)},$U=KU,WU=Sw,i0=function(n){var e=$U(n,"string");return WU(e)?e:e+""},XU=kn,Mw=$A,n0=XU.document,ZU=Mw(n0)&&Mw(n0.createElement),sf=function(n){return ZU?n0.createElement(n):{}},YU=AA,JU=dn,e6=sf,kw=!YU&&!JU(function(){return Object.defineProperty(e6("div"),"a",{get:function(){return 7}}).a!=7}),t6=AA,r6=os,i6=ow,n6=Yd,s6=Rh,a6=i0,o6=vo,A6=kw,Dw=Object.getOwnPropertyDescriptor;Iu.f=t6?Dw:function(n,e){if(n=s6(n),e=a6(e),A6)try{return Dw(n,e)}catch{}if(o6(n,e))return n6(!r6(i6.f,n,e),n[e])};var cA={},l6=AA,c6=dn,Nw=l6&&c6(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),u6=$A,h6=String,p6=TypeError,Cs=function(n){if(u6(n))return n;throw p6(h6(n)+" is not an object")},d6=AA,f6=kw,g6=Nw,af=Cs,Ow=i0,m6=TypeError,s0=Object.defineProperty,y6=Object.getOwnPropertyDescriptor,a0="enumerable",o0="configurable",A0="writable";cA.f=d6?g6?function(n,e,t){if(af(n),e=Ow(e),af(t),typeof n=="function"&&e==="prototype"&&"value"in t&&A0 in t&&!t[A0]){var s=y6(n,e);s&&s[A0]&&(n[e]=t.value,t={configurable:o0 in t?t[o0]:s[o0],enumerable:a0 in t?t[a0]:s[a0],writable:!1})}return s0(n,e,t)}:s0:function(n,e,t){if(af(n),e=Ow(e),af(t),f6)try{return s0(n,e,t)}catch{}if("get"in t||"set"in t)throw m6("Accessors not supported");return"value"in t&&(n[e]=t.value),n};var v6=AA,_6=cA,w6=Yd,zh=v6?function(n,e,t){return _6.f(n,e,w6(1,t))}:function(n,e,t){return n[e]=t,n},Rw={exports:{}},l0=AA,b6=vo,zw=Function.prototype,x6=l0&&Object.getOwnPropertyDescriptor,c0=b6(zw,"name"),B6=c0&&(function(){}).name==="something",C6=c0&&(!l0||l0&&x6(zw,"name").configurable),of={EXISTS:c0,PROPER:B6,CONFIGURABLE:C6},S6=fn,F6=sn,u0=e0,E6=S6(Function.toString);F6(u0.inspectSource)||(u0.inspectSource=function(n){return E6(n)});var h0=u0.inspectSource,I6=kn,L6=sn,Hw=I6.WeakMap,T6=L6(Hw)&&/native code/.test(String(Hw)),U6=t0,P6=Tw,Vw=U6("keys"),p0=function(n){return Vw[n]||(Vw[n]=P6(n))},d0={},Q6=T6,jw=kn,M6=$A,k6=zh,f0=vo,g0=e0,D6=p0,N6=d0,Gw="Object already initialized",m0=jw.TypeError,O6=jw.WeakMap,Af,Hh,lf,R6=function(n){return lf(n)?Hh(n):Af(n,{})},z6=function(n){return function(e){var t;if(!M6(e)||(t=Hh(e)).type!==n)throw m0("Incompatible receiver, "+n+" required");return t}};if(Q6||g0.state){var uA=g0.state||(g0.state=new O6);uA.get=uA.get,uA.has=uA.has,uA.set=uA.set,Af=function(n,e){if(uA.has(n))throw m0(Gw);return e.facade=n,uA.set(n,e),e},Hh=function(n){return uA.get(n)||{}},lf=function(n){return uA.has(n)}}else{var Uu=D6("state");N6[Uu]=!0,Af=function(n,e){if(f0(n,Uu))throw m0(Gw);return e.facade=n,k6(n,Uu,e),e},Hh=function(n){return f0(n,Uu)?n[Uu]:{}},lf=function(n){return f0(n,Uu)}}var cf={set:Af,get:Hh,has:lf,enforce:R6,getterFor:z6},y0=fn,H6=dn,V6=sn,uf=vo,v0=AA,j6=of.CONFIGURABLE,G6=h0,qw=cf,q6=qw.enforce,K6=qw.get,Kw=String,hf=Object.defineProperty,$6=y0("".slice),W6=y0("".replace),X6=y0([].join),Z6=v0&&!H6(function(){return hf(function(){},"length",{value:8}).length!==8}),Y6=String(String).split("String"),J6=Rw.exports=function(n,e,t){$6(Kw(e),0,7)==="Symbol("&&(e="["+W6(Kw(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!uf(n,"name")||j6&&n.name!==e)&&(v0?hf(n,"name",{value:e,configurable:!0}):n.name=e),Z6&&t&&uf(t,"arity")&&n.length!==t.arity&&hf(n,"length",{value:t.arity});try{t&&uf(t,"constructor")&&t.constructor?v0&&hf(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch{}var s=q6(n);return uf(s,"source")||(s.source=X6(Y6,typeof e=="string"?e:"")),n};Function.prototype.toString=J6(function(){return V6(this)&&K6(this).source||G6(this)},"toString");var $w=Rw.exports,eP=sn,tP=cA,rP=$w,iP=Jm,Ec=function(n,e,t,s){s||(s={});var l=s.enumerable,u=s.name!==void 0?s.name:e;if(eP(t)&&rP(t,u,s),s.global)l?n[e]=t:iP(e,t);else{try{s.unsafe?n[e]&&(l=!0):delete n[e]}catch{}l?n[e]=t:tP.f(n,e,{value:t,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return n},Ww={},nP=Math.ceil,sP=Math.floor,aP=Math.trunc||function(n){var e=+n;return(e>0?sP:nP)(e)},oP=aP,pf=function(n){var e=+n;return e!==e||e===0?0:oP(e)},AP=pf,lP=Math.max,cP=Math.min,Xw=function(n,e){var t=AP(n);return t<0?lP(t+e,0):cP(t,e)},uP=pf,hP=Math.min,Pu=function(n){return n>0?hP(uP(n),9007199254740991):0},pP=Pu,df=function(n){return pP(n.length)},dP=Rh,fP=Xw,gP=df,Zw=function(n){return function(e,t,s){var l=dP(e),u=gP(l),p=fP(s,u),a;if(n&&t!=t){for(;u>p;)if(a=l[p++],a!=a)return!0}else for(;u>p;p++)if((n||p in l)&&l[p]===t)return n||p||0;return!n&&-1}},Yw={includes:Zw(!0),indexOf:Zw(!1)},mP=fn,_0=vo,yP=Rh,vP=Yw.indexOf,_P=d0,Jw=mP([].push),eb=function(n,e){var t=yP(n),s=0,l=[],u;for(u in t)!_0(_P,u)&&_0(t,u)&&Jw(l,u);for(;e.length>s;)_0(t,u=e[s++])&&(~vP(l,u)||Jw(l,u));return l},w0=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],wP=eb,bP=w0,xP=bP.concat("length","prototype");Ww.f=Object.getOwnPropertyNames||function(n){return wP(n,xP)};var tb={};tb.f=Object.getOwnPropertySymbols;var BP=Fc,CP=fn,SP=Ww,FP=tb,EP=Cs,IP=CP([].concat),LP=BP("Reflect","ownKeys")||function(n){var e=SP.f(EP(n)),t=FP.f;return t?IP(e,t(n)):e},rb=vo,TP=LP,UP=Iu,PP=cA,QP=function(n,e,t){for(var s=TP(e),l=PP.f,u=UP.f,p=0;p<s.length;p++){var a=s[p];!rb(n,a)&&!(t&&rb(t,a))&&l(n,a,u(e,a))}},MP=dn,kP=sn,DP=/#|\.prototype\./,Vh=function(n,e){var t=OP[NP(n)];return t==zP?!0:t==RP?!1:kP(e)?MP(e):!!e},NP=Vh.normalize=function(n){return String(n).replace(DP,".").toLowerCase()},OP=Vh.data={},RP=Vh.NATIVE="N",zP=Vh.POLYFILL="P",ib=Vh,b0=kn,HP=Iu.f,VP=zh,jP=Ec,GP=Jm,qP=QP,KP=ib,Ks=function(n,e){var t=n.target,s=n.global,l=n.stat,u,p,a,m,w,S;if(s?p=b0:l?p=b0[t]||GP(t,{}):p=(b0[t]||{}).prototype,p)for(a in e){if(w=e[a],n.dontCallGetSet?(S=HP(p,a),m=S&&S.value):m=p[a],u=KP(s?a:t+(l?".":"#")+a,n.forced),!u&&m!==void 0){if(typeof w==typeof m)continue;qP(w,m)}(n.sham||m&&m.sham)&&VP(w,"sham",!0),jP(p,a,w,n)}},$P=Cc,jh=typeof process<"u"&&$P(process)=="process",WP=fn,XP=WA,ZP=function(n,e,t){try{return WP(XP(Object.getOwnPropertyDescriptor(n,e)[t]))}catch{}},YP=sn,JP=String,eQ=TypeError,tQ=function(n){if(typeof n=="object"||YP(n))return n;throw eQ("Can't set "+JP(n)+" as a prototype")},rQ=ZP,iQ=Cs,nQ=tQ,nb=Object.setPrototypeOf||("__proto__"in{}?function(){var n=!1,e={},t;try{t=rQ(Object.prototype,"__proto__","set"),t(e,[]),n=e instanceof Array}catch{}return function(s,l){return iQ(s),nQ(l),n?t(s,l):s.__proto__=l,s}}():void 0),sQ=cA.f,aQ=vo,oQ=Gn,sb=oQ("toStringTag"),x0=function(n,e,t){n&&!t&&(n=n.prototype),n&&!aQ(n,sb)&&sQ(n,sb,{configurable:!0,value:e})},ab=$w,AQ=cA,lQ=function(n,e,t){return t.get&&ab(t.get,e,{getter:!0}),t.set&&ab(t.set,e,{setter:!0}),AQ.f(n,e,t)},cQ=Fc,uQ=lQ,hQ=Gn,pQ=AA,ob=hQ("species"),dQ=function(n){var e=cQ(n);pQ&&e&&!e[ob]&&uQ(e,ob,{configurable:!0,get:function(){return this}})},fQ=Jd,gQ=TypeError,mQ=function(n,e){if(fQ(e,n))return n;throw gQ("Incorrect invocation")},yQ=Gn,vQ=yQ("toStringTag"),Ab={};Ab[vQ]="z";var _Q=String(Ab)==="[object z]",wQ=_Q,bQ=sn,ff=Cc,xQ=Gn,BQ=xQ("toStringTag"),CQ=Object,SQ=ff(function(){return arguments}())=="Arguments",FQ=function(n,e){try{return n[e]}catch{}},B0=wQ?ff:function(n){var e,t,s;return n===void 0?"Undefined":n===null?"Null":typeof(t=FQ(e=CQ(n),BQ))=="string"?t:SQ?ff(e):(s=ff(e))=="Object"&&bQ(e.callee)?"Arguments":s},EQ=fn,IQ=dn,lb=sn,LQ=B0,TQ=Fc,UQ=h0,cb=function(){},PQ=[],ub=TQ("Reflect","construct"),C0=/^\s*(?:class|function)\b/,QQ=EQ(C0.exec),MQ=!C0.exec(cb),Gh=function(n){if(!lb(n))return!1;try{return ub(cb,PQ,n),!0}catch{return!1}},hb=function(n){if(!lb(n))return!1;switch(LQ(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return MQ||!!QQ(C0,UQ(n))}catch{return!0}};hb.sham=!0;var kQ=!ub||IQ(function(){var n;return Gh(Gh.call)||!Gh(Object)||!Gh(function(){n=!0})||n})?hb:Gh,DQ=kQ,NQ=rf,OQ=TypeError,RQ=function(n){if(DQ(n))return n;throw OQ(NQ(n)+" is not a constructor")},pb=Cs,zQ=RQ,HQ=Sc,VQ=Gn,jQ=VQ("species"),db=function(n,e){var t=pb(n).constructor,s;return t===void 0||HQ(s=pb(t)[jQ])?e:zQ(s)},GQ=Xd,fb=Function.prototype,gb=fb.apply,mb=fb.call,S0=typeof Reflect=="object"&&Reflect.apply||(GQ?mb.bind(gb):function(){return mb.apply(gb,arguments)}),qQ=Cc,KQ=fn,qh=function(n){if(qQ(n)==="Function")return KQ(n)},yb=qh,$Q=WA,WQ=Xd,XQ=yb(yb.bind),F0=function(n,e){return $Q(n),e===void 0?n:WQ?XQ(n,e):function(){return n.apply(e,arguments)}},ZQ=Fc,vb=ZQ("document","documentElement"),YQ=fn,JQ=YQ([].slice),eM=TypeError,tM=function(n,e){if(n<e)throw eM("Not enough arguments");return n},rM=ef,_b=/(?:ipad|iphone|ipod).*applewebkit/i.test(rM),Fa=kn,iM=S0,nM=F0,wb=sn,sM=vo,bb=dn,xb=vb,aM=JQ,Bb=sf,oM=tM,AM=_b,lM=jh,E0=Fa.setImmediate,I0=Fa.clearImmediate,cM=Fa.process,L0=Fa.Dispatch,uM=Fa.Function,Cb=Fa.MessageChannel,hM=Fa.String,T0=0,Kh={},Sb="onreadystatechange",$h,Ic,U0,P0;bb(function(){$h=Fa.location});var Q0=function(n){if(sM(Kh,n)){var e=Kh[n];delete Kh[n],e()}},M0=function(n){return function(){Q0(n)}},Fb=function(n){Q0(n.data)},Eb=function(n){Fa.postMessage(hM(n),$h.protocol+"//"+$h.host)};(!E0||!I0)&&(E0=function(n){oM(arguments.length,1);var e=wb(n)?n:uM(n),t=aM(arguments,1);return Kh[++T0]=function(){iM(e,void 0,t)},Ic(T0),T0},I0=function(n){delete Kh[n]},lM?Ic=function(n){cM.nextTick(M0(n))}:L0&&L0.now?Ic=function(n){L0.now(M0(n))}:Cb&&!AM?(U0=new Cb,P0=U0.port2,U0.port1.onmessage=Fb,Ic=nM(P0.postMessage,P0)):Fa.addEventListener&&wb(Fa.postMessage)&&!Fa.importScripts&&$h&&$h.protocol!=="file:"&&!bb(Eb)?(Ic=Eb,Fa.addEventListener("message",Fb,!1)):Sb in Bb("script")?Ic=function(n){xb.appendChild(Bb("script"))[Sb]=function(){xb.removeChild(this),Q0(n)}}:Ic=function(n){setTimeout(M0(n),0)});var Ib={set:E0,clear:I0},Lb=function(){this.head=null,this.tail=null};Lb.prototype={add:function(n){var e={item:n,next:null},t=this.tail;t?t.next=e:this.head=e,this.tail=e},get:function(){var n=this.head;if(n){var e=this.head=n.next;return e===null&&(this.tail=null),n.item}}};var Tb=Lb,pM=ef,dM=/ipad|iphone|ipod/i.test(pM)&&typeof Pebble<"u",fM=ef,gM=/web0s(?!.*chrome)/i.test(fM),Lc=kn,Ub=F0,mM=Iu.f,k0=Ib.set,yM=Tb,vM=_b,_M=dM,wM=gM,D0=jh,Pb=Lc.MutationObserver||Lc.WebKitMutationObserver,Qb=Lc.document,Mb=Lc.process,gf=Lc.Promise,kb=mM(Lc,"queueMicrotask"),N0=kb&&kb.value,Qu,O0,R0,mf,Db;if(!N0){var yf=new yM,vf=function(){var n,e;for(D0&&(n=Mb.domain)&&n.exit();e=yf.get();)try{e()}catch(t){throw yf.head&&Qu(),t}n&&n.enter()};!vM&&!D0&&!wM&&Pb&&Qb?(O0=!0,R0=Qb.createTextNode(""),new Pb(vf).observe(R0,{characterData:!0}),Qu=function(){R0.data=O0=!O0}):!_M&&gf&&gf.resolve?(mf=gf.resolve(void 0),mf.constructor=gf,Db=Ub(mf.then,mf),Qu=function(){Db(vf)}):D0?Qu=function(){Mb.nextTick(vf)}:(k0=Ub(k0,Lc),Qu=function(){k0(vf)}),N0=function(n){yf.head||Qu(),yf.add(n)}}var bM=N0,xM=function(n,e){try{arguments.length==1?console.error(n):console.error(n,e)}catch{}},z0=function(n){try{return{error:!1,value:n()}}catch(e){return{error:!0,value:e}}},BM=kn,_f=BM.Promise,Nb=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",CM=Nb,SM=jh,FM=!CM&&!SM&&typeof window=="object"&&typeof document=="object",EM=kn,Wh=_f,IM=sn,LM=ib,TM=h0,UM=Gn,PM=FM,QM=Nb,H0=Wm;Wh&&Wh.prototype;var MM=UM("species"),V0=!1,Ob=IM(EM.PromiseRejectionEvent),kM=LM("Promise",function(){var n=TM(Wh),e=n!==String(Wh);if(!e&&H0===66)return!0;if(!H0||H0<51||!/native code/.test(n)){var t=new Wh(function(u){u(1)}),s=function(u){u(function(){},function(){})},l=t.constructor={};if(l[MM]=s,V0=t.then(function(){})instanceof s,!V0)return!0}return!e&&(PM||QM)&&!Ob}),Xh={CONSTRUCTOR:kM,REJECTION_EVENT:Ob,SUBCLASSING:V0},Mu={},Rb=WA,DM=TypeError,NM=function(n){var e,t;this.promise=new n(function(s,l){if(e!==void 0||t!==void 0)throw DM("Bad Promise constructor");e=s,t=l}),this.resolve=Rb(e),this.reject=Rb(t)};Mu.f=function(n){return new NM(n)};var OM=Ks,wf=jh,Hl=kn,ku=os,zb=Ec,Hb=nb,RM=x0,zM=dQ,HM=WA,bf=sn,VM=$A,jM=mQ,GM=db,Vb=Ib.set,j0=bM,qM=xM,KM=z0,$M=Tb,jb=cf,xf=_f,G0=Xh,Gb=Mu,Bf="Promise",qb=G0.CONSTRUCTOR,WM=G0.REJECTION_EVENT,XM=G0.SUBCLASSING,q0=jb.getterFor(Bf),ZM=jb.set,Du=xf&&xf.prototype,Tc=xf,Cf=Du,Kb=Hl.TypeError,K0=Hl.document,$0=Hl.process,W0=Gb.f,YM=W0,JM=!!(K0&&K0.createEvent&&Hl.dispatchEvent),$b="unhandledrejection",ek="rejectionhandled",Wb=0,Xb=1,tk=2,X0=1,Zb=2,Sf,Yb,rk,Jb,ex=function(n){var e;return VM(n)&&bf(e=n.then)?e:!1},tx=function(n,e){var t=e.value,s=e.state==Xb,l=s?n.ok:n.fail,u=n.resolve,p=n.reject,a=n.domain,m,w,S;try{l?(s||(e.rejection===Zb&&nk(e),e.rejection=X0),l===!0?m=t:(a&&a.enter(),m=l(t),a&&(a.exit(),S=!0)),m===n.promise?p(Kb("Promise-chain cycle")):(w=ex(m))?ku(w,m,u,p):u(m)):p(t)}catch(T){a&&!S&&a.exit(),p(T)}},rx=function(n,e){n.notified||(n.notified=!0,j0(function(){for(var t=n.reactions,s;s=t.get();)tx(s,n);n.notified=!1,e&&!n.rejection&&ik(n)}))},ix=function(n,e,t){var s,l;JM?(s=K0.createEvent("Event"),s.promise=e,s.reason=t,s.initEvent(n,!1,!0),Hl.dispatchEvent(s)):s={promise:e,reason:t},!WM&&(l=Hl["on"+n])?l(s):n===$b&&qM("Unhandled promise rejection",t)},ik=function(n){ku(Vb,Hl,function(){var e=n.facade,t=n.value,s=nx(n),l;if(s&&(l=KM(function(){wf?$0.emit("unhandledRejection",t,e):ix($b,e,t)}),n.rejection=wf||nx(n)?Zb:X0,l.error))throw l.value})},nx=function(n){return n.rejection!==X0&&!n.parent},nk=function(n){ku(Vb,Hl,function(){var e=n.facade;wf?$0.emit("rejectionHandled",e):ix(ek,e,n.value)})},Nu=function(n,e,t){return function(s){n(e,s,t)}},Ou=function(n,e,t){n.done||(n.done=!0,t&&(n=t),n.value=e,n.state=tk,rx(n,!0))},Z0=function(n,e,t){if(!n.done){n.done=!0,t&&(n=t);try{if(n.facade===e)throw Kb("Promise can't be resolved itself");var s=ex(e);s?j0(function(){var l={done:!1};try{ku(s,e,Nu(Z0,l,n),Nu(Ou,l,n))}catch(u){Ou(l,u,n)}}):(n.value=e,n.state=Xb,rx(n,!1))}catch(l){Ou({done:!1},l,n)}}};if(qb&&(Tc=function(n){jM(this,Cf),HM(n),ku(Sf,this);var e=q0(this);try{n(Nu(Z0,e),Nu(Ou,e))}catch(t){Ou(e,t)}},Cf=Tc.prototype,Sf=function(n){ZM(this,{type:Bf,done:!1,notified:!1,parent:!1,reactions:new $M,rejection:!1,state:Wb,value:void 0})},Sf.prototype=zb(Cf,"then",function(n,e){var t=q0(this),s=W0(GM(this,Tc));return t.parent=!0,s.ok=bf(n)?n:!0,s.fail=bf(e)&&e,s.domain=wf?$0.domain:void 0,t.state==Wb?t.reactions.add(s):j0(function(){tx(s,t)}),s.promise}),Yb=function(){var n=new Sf,e=q0(n);this.promise=n,this.resolve=Nu(Z0,e),this.reject=Nu(Ou,e)},Gb.f=W0=function(n){return n===Tc||n===rk?new Yb(n):YM(n)},bf(xf)&&Du!==Object.prototype)){Jb=Du.then,XM||zb(Du,"then",function(n,e){var t=this;return new Tc(function(s,l){ku(Jb,t,s,l)}).then(n,e)},{unsafe:!0});try{delete Du.constructor}catch{}Hb&&Hb(Du,Cf)}OM({global:!0,constructor:!0,wrap:!0,forced:qb},{Promise:Tc}),RM(Tc,Bf,!1),zM(Bf);var Zh={},sk=Gn,ak=Zh,ok=sk("iterator"),Ak=Array.prototype,lk=function(n){return n!==void 0&&(ak.Array===n||Ak[ok]===n)},ck=B0,sx=Lu,uk=Sc,hk=Zh,pk=Gn,dk=pk("iterator"),ax=function(n){if(!uk(n))return sx(n,dk)||sx(n,"@@iterator")||hk[ck(n)]},fk=os,gk=WA,mk=Cs,yk=rf,vk=ax,_k=TypeError,wk=function(n,e){var t=arguments.length<2?vk(n):e;if(gk(t))return mk(fk(t,n));throw _k(yk(n)+" is not iterable")},bk=os,ox=Cs,xk=Lu,Bk=function(n,e,t){var s,l;ox(n);try{if(s=xk(n,"return"),!s){if(e==="throw")throw t;return t}s=bk(s,n)}catch(u){l=!0,s=u}if(e==="throw")throw t;if(l)throw s;return ox(s),t},Ck=F0,Sk=os,Fk=Cs,Ek=rf,Ik=lk,Lk=df,Ax=Jd,Tk=wk,Uk=ax,lx=Bk,Pk=TypeError,Ff=function(n,e){this.stopped=n,this.result=e},cx=Ff.prototype,ux=function(n,e,t){var s=t&&t.that,l=!!(t&&t.AS_ENTRIES),u=!!(t&&t.IS_RECORD),p=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),m=Ck(e,s),w,S,T,Q,I,q,j,Y=function(ne){return w&&lx(w,"normal",ne),new Ff(!0,ne)},K=function(ne){return l?(Fk(ne),a?m(ne[0],ne[1],Y):m(ne[0],ne[1])):a?m(ne,Y):m(ne)};if(u)w=n.iterator;else if(p)w=n;else{if(S=Uk(n),!S)throw Pk(Ek(n)+" is not iterable");if(Ik(S)){for(T=0,Q=Lk(n);Q>T;T++)if(I=K(n[T]),I&&Ax(cx,I))return I;return new Ff(!1)}w=Tk(n,S)}for(q=u?n.next:w.next;!(j=Sk(q,w)).done;){try{I=K(j.value)}catch(ne){lx(w,"throw",ne)}if(typeof I=="object"&&I&&Ax(cx,I))return I}return new Ff(!1)},Qk=Gn,hx=Qk("iterator"),px=!1;try{var Mk=0,dx={next:function(){return{done:!!Mk++}},return:function(){px=!0}};dx[hx]=function(){return this},Array.from(dx,function(){throw 2})}catch{}var kk=function(n,e){if(!e&&!px)return!1;var t=!1;try{var s={};s[hx]=function(){return{next:function(){return{done:t=!0}}}},n(s)}catch{}return t},Dk=_f,Nk=kk,Ok=Xh.CONSTRUCTOR,fx=Ok||!Nk(function(n){Dk.all(n).then(void 0,function(){})}),Rk=Ks,zk=os,Hk=WA,Vk=Mu,jk=z0,Gk=ux,qk=fx;Rk({target:"Promise",stat:!0,forced:qk},{all:function(n){var e=this,t=Vk.f(e),s=t.resolve,l=t.reject,u=jk(function(){var p=Hk(e.resolve),a=[],m=0,w=1;Gk(n,function(S){var T=m++,Q=!1;w++,zk(p,e,S).then(function(I){Q||(Q=!0,a[T]=I,--w||s(a))},l)}),--w||s(a)});return u.error&&l(u.value),t.promise}});var Kk=Ks,$k=Xh.CONSTRUCTOR,Y0=_f,Wk=Fc,Xk=sn,Zk=Ec,gx=Y0&&Y0.prototype;if(Kk({target:"Promise",proto:!0,forced:$k,real:!0},{catch:function(n){return this.then(void 0,n)}}),Xk(Y0)){var mx=Wk("Promise").prototype.catch;gx.catch!==mx&&Zk(gx,"catch",mx,{unsafe:!0})}var Yk=Ks,Jk=os,e8=WA,t8=Mu,r8=z0,i8=ux,n8=fx;Yk({target:"Promise",stat:!0,forced:n8},{race:function(n){var e=this,t=t8.f(e),s=t.reject,l=r8(function(){var u=e8(e.resolve);i8(n,function(p){Jk(u,e,p).then(t.resolve,s)})});return l.error&&s(l.value),t.promise}});var s8=Ks,a8=os,o8=Mu,A8=Xh.CONSTRUCTOR;s8({target:"Promise",stat:!0,forced:A8},{reject:function(n){var e=o8.f(this);return a8(e.reject,void 0,n),e.promise}});var l8=Cs,c8=$A,u8=Mu,h8=function(n,e){if(l8(n),c8(e)&&e.constructor===n)return e;var t=u8.f(n),s=t.resolve;return s(e),t.promise},p8=Ks,d8=Fc,f8=Xh.CONSTRUCTOR,g8=h8;d8("Promise"),p8({target:"Promise",stat:!0,forced:f8},{resolve:function(n){return g8(this,n)}});function yx(n,e,t,s,l,u,p){try{var a=n[u](p),m=a.value}catch(w){t(w);return}a.done?e(m):Promise.resolve(m).then(s,l)}function XA(n){return function(){var e=this,t=arguments;return new Promise(function(s,l){var u=n.apply(e,t);function p(m){yx(u,s,l,p,a,"next",m)}function a(m){yx(u,s,l,p,a,"throw",m)}p(void 0)})}}var m8=B0,y8=String,hA=function(n){if(m8(n)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return y8(n)},v8=Cs,vx=function(){var n=v8(this),e="";return n.hasIndices&&(e+="d"),n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.unicodeSets&&(e+="v"),n.sticky&&(e+="y"),e},J0=dn,_8=kn,e1=_8.RegExp,t1=J0(function(){var n=e1("a","y");return n.lastIndex=2,n.exec("abcd")!=null}),w8=t1||J0(function(){return!e1("a","y").sticky}),b8=t1||J0(function(){var n=e1("^r","gy");return n.lastIndex=2,n.exec("str")!=null}),_x={BROKEN_CARET:b8,MISSED_STICKY:w8,UNSUPPORTED_Y:t1},wx={},x8=eb,B8=w0,C8=Object.keys||function(n){return x8(n,B8)},S8=AA,F8=Nw,E8=cA,I8=Cs,L8=Rh,T8=C8;wx.f=S8&&!F8?Object.defineProperties:function(n,e){I8(n);for(var t=L8(e),s=T8(e),l=s.length,u=0,p;l>u;)E8.f(n,p=s[u++],t[p]);return n};var U8=Cs,P8=wx,bx=w0,Q8=d0,M8=vb,k8=sf,D8=p0,xx=">",Bx="<",r1="prototype",i1="script",Cx=D8("IE_PROTO"),n1=function(){},Sx=function(n){return Bx+i1+xx+n+Bx+"/"+i1+xx},Fx=function(n){n.write(Sx("")),n.close();var e=n.parentWindow.Object;return n=null,e},N8=function(){var n=k8("iframe"),e="java"+i1+":",t;return n.style.display="none",M8.appendChild(n),n.src=String(e),t=n.contentWindow.document,t.open(),t.write(Sx("document.F=Object")),t.close(),t.F},Ef,If=function(){try{Ef=new ActiveXObject("htmlfile")}catch{}If=typeof document<"u"?document.domain&&Ef?Fx(Ef):N8():Fx(Ef);for(var n=bx.length;n--;)delete If[r1][bx[n]];return If()};Q8[Cx]=!0;var s1=Object.create||function(n,e){var t;return n!==null?(n1[r1]=U8(n),t=new n1,n1[r1]=null,t[Cx]=n):t=If(),e===void 0?t:P8.f(t,e)},O8=dn,R8=kn,z8=R8.RegExp,H8=O8(function(){var n=z8(".","s");return!(n.dotAll&&n.exec(`
`)&&n.flags==="s")}),V8=dn,j8=kn,G8=j8.RegExp,q8=V8(function(){var n=G8("(?<a>b)","g");return n.exec("b").groups.a!=="b"||"b".replace(n,"$<a>c")!=="bc"}),Ru=os,Lf=fn,K8=hA,$8=vx,W8=_x,X8=t0,Z8=s1,Y8=cf.get,J8=H8,eD=q8,tD=X8("native-string-replace",String.prototype.replace),Tf=RegExp.prototype.exec,a1=Tf,rD=Lf("".charAt),iD=Lf("".indexOf),nD=Lf("".replace),o1=Lf("".slice),A1=function(){var n=/a/,e=/b*/g;return Ru(Tf,n,"a"),Ru(Tf,e,"a"),n.lastIndex!==0||e.lastIndex!==0}(),Ex=W8.BROKEN_CARET,l1=/()??/.exec("")[1]!==void 0,sD=A1||l1||Ex||J8||eD;sD&&(a1=function(n){var e=this,t=Y8(e),s=K8(n),l=t.raw,u,p,a,m,w,S,T;if(l)return l.lastIndex=e.lastIndex,u=Ru(a1,l,s),e.lastIndex=l.lastIndex,u;var Q=t.groups,I=Ex&&e.sticky,q=Ru($8,e),j=e.source,Y=0,K=s;if(I&&(q=nD(q,"y",""),iD(q,"g")===-1&&(q+="g"),K=o1(s,e.lastIndex),e.lastIndex>0&&(!e.multiline||e.multiline&&rD(s,e.lastIndex-1)!==`
`)&&(j="(?: "+j+")",K=" "+K,Y++),p=new RegExp("^(?:"+j+")",q)),l1&&(p=new RegExp("^"+j+"$(?!\\s)",q)),A1&&(a=e.lastIndex),m=Ru(Tf,I?p:e,K),I?m?(m.input=o1(m.input,Y),m[0]=o1(m[0],Y),m.index=e.lastIndex,e.lastIndex+=m[0].length):e.lastIndex=0:A1&&m&&(e.lastIndex=e.global?m.index+m[0].length:a),l1&&m&&m.length>1&&Ru(tD,m[0],p,function(){for(w=1;w<arguments.length-2;w++)arguments[w]===void 0&&(m[w]=void 0)}),m&&Q)for(m.groups=S=Z8(null),w=0;w<Q.length;w++)T=Q[w],S[T[0]]=m[T[1]];return m});var Uf=a1,aD=Ks,Ix=Uf;aD({target:"RegExp",proto:!0,forced:/./.exec!==Ix},{exec:Ix});var Lx=qh,Tx=Ec,oD=Uf,Ux=dn,Px=Gn,AD=zh,lD=Px("species"),c1=RegExp.prototype,u1=function(n,e,t,s){var l=Px(n),u=!Ux(function(){var w={};return w[l]=function(){return 7},""[n](w)!=7}),p=u&&!Ux(function(){var w=!1,S=/a/;return n==="split"&&(S={},S.constructor={},S.constructor[lD]=function(){return S},S.flags="",S[l]=/./[l]),S.exec=function(){return w=!0,null},S[l](""),!w});if(!u||!p||t){var a=Lx(/./[l]),m=e(l,""[n],function(w,S,T,Q,I){var q=Lx(w),j=S.exec;return j===oD||j===c1.exec?u&&!I?{done:!0,value:a(S,T,Q)}:{done:!0,value:q(T,S,Q)}:{done:!1}});Tx(String.prototype,n,m[0]),Tx(c1,l,m[1])}s&&AD(c1[l],"sham",!0)},h1=fn,cD=pf,uD=hA,hD=lA,pD=h1("".charAt),Qx=h1("".charCodeAt),dD=h1("".slice),Mx=function(n){return function(e,t){var s=uD(hD(e)),l=cD(t),u=s.length,p,a;return l<0||l>=u?n?"":void 0:(p=Qx(s,l),p<55296||p>56319||l+1===u||(a=Qx(s,l+1))<56320||a>57343?n?pD(s,l):p:n?dD(s,l,l+2):(p-55296<<10)+(a-56320)+65536)}},fD={codeAt:Mx(!1),charAt:Mx(!0)},gD=fD.charAt,p1=function(n,e,t){return e+(t?gD(n,e).length:1)},kx=os,mD=Cs,yD=sn,vD=Cc,_D=Uf,wD=TypeError,d1=function(n,e){var t=n.exec;if(yD(t)){var s=kx(t,n,e);return s!==null&&mD(s),s}if(vD(n)==="RegExp")return kx(_D,n,e);throw wD("RegExp#exec called on incompatible receiver")},bD=os,xD=u1,BD=Cs,CD=Sc,SD=Pu,f1=hA,FD=lA,ED=Lu,ID=p1,Dx=d1;xD("match",function(n,e,t){return[function(s){var l=FD(this),u=CD(s)?void 0:ED(s,n);return u?bD(u,s,l):new RegExp(s)[n](f1(l))},function(s){var l=BD(this),u=f1(s),p=t(e,l,u);if(p.done)return p.value;if(!l.global)return Dx(l,u);var a=l.unicode;l.lastIndex=0;for(var m=[],w=0,S;(S=Dx(l,u))!==null;){var T=f1(S[0]);m[w]=T,T===""&&(l.lastIndex=ID(u,SD(l.lastIndex),a)),w++}return w===0?null:m}]});var g1=fn,LD=nf,TD=Math.floor,m1=g1("".charAt),UD=g1("".replace),y1=g1("".slice),PD=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,QD=/\$([$&'`]|\d{1,2})/g,MD=function(n,e,t,s,l,u){var p=t+n.length,a=s.length,m=QD;return l!==void 0&&(l=LD(l),m=PD),UD(u,m,function(w,S){var T;switch(m1(S,0)){case"$":return"$";case"&":return n;case"`":return y1(e,0,t);case"'":return y1(e,p);case"<":T=l[y1(S,1,-1)];break;default:var Q=+S;if(Q===0)return w;if(Q>a){var I=TD(Q/10);return I===0?w:I<=a?s[I-1]===void 0?m1(S,1):s[I-1]+m1(S,1):w}T=s[Q-1]}return T===void 0?"":T})},kD=S0,Nx=os,Pf=fn,DD=u1,ND=dn,OD=Cs,RD=sn,zD=Sc,HD=pf,VD=Pu,zu=hA,jD=lA,GD=p1,qD=Lu,KD=MD,$D=d1,WD=Gn,v1=WD("replace"),XD=Math.max,ZD=Math.min,YD=Pf([].concat),_1=Pf([].push),Ox=Pf("".indexOf),Rx=Pf("".slice),JD=function(n){return n===void 0?n:String(n)},eN=function(){return"a".replace(/./,"$0")==="$0"}(),zx=function(){return/./[v1]?/./[v1]("a","$0")==="":!1}(),tN=!ND(function(){var n=/./;return n.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(n,"$<a>")!=="7"});DD("replace",function(n,e,t){var s=zx?"$":"$0";return[function(l,u){var p=jD(this),a=zD(l)?void 0:qD(l,v1);return a?Nx(a,l,p,u):Nx(e,zu(p),l,u)},function(l,u){var p=OD(this),a=zu(l);if(typeof u=="string"&&Ox(u,s)===-1&&Ox(u,"$<")===-1){var m=t(e,p,a,u);if(m.done)return m.value}var w=RD(u);w||(u=zu(u));var S=p.global;if(S){var T=p.unicode;p.lastIndex=0}for(var Q=[];;){var I=$D(p,a);if(I===null||(_1(Q,I),!S))break;var q=zu(I[0]);q===""&&(p.lastIndex=GD(a,VD(p.lastIndex),T))}for(var j="",Y=0,K=0;K<Q.length;K++){I=Q[K];for(var ne=zu(I[0]),he=XD(ZD(HD(I.index),a.length),0),Ee=[],De=1;De<I.length;De++)_1(Ee,JD(I[De]));var Ne=I.groups;if(w){var Qe=YD([ne],Ee,he,a);Ne!==void 0&&_1(Qe,Ne);var ge=zu(kD(u,void 0,Qe))}else ge=KD(ne,a,he,Ee,Ne,u);he>=Y&&(j+=Rx(a,Y,he)+ge,Y=he+ne.length)}return j+Rx(a,Y)}]},!tN||!eN||zx);var rN=$A,iN=Cc,nN=Gn,sN=nN("match"),Hx=function(n){var e;return rN(n)&&((e=n[sN])!==void 0?!!e:iN(n)=="RegExp")},aN=Hx,oN=TypeError,w1=function(n){if(aN(n))throw oN("The method doesn't accept regular expressions");return n},AN=Gn,lN=AN("match"),b1=function(n){var e=/./;try{"/./"[n](e)}catch{try{return e[lN]=!1,"/./"[n](e)}catch{}}return!1},cN=Ks,Vx=qh,uN=Iu.f,hN=Pu,jx=hA,pN=w1,dN=lA,fN=b1,Gx=Vx("".startsWith),gN=Vx("".slice),mN=Math.min,qx=fN("startsWith"),yN=!qx&&!!function(){var n=uN(String.prototype,"startsWith");return n&&!n.writable}();cN({target:"String",proto:!0,forced:!yN&&!qx},{startsWith:function(n){var e=jx(dN(this));pN(n);var t=hN(mN(arguments.length>1?arguments[1]:void 0,e.length)),s=jx(n);return Gx?Gx(e,s,t):gN(e,t,t+s.length)===s}});var vN=Gn,_N=s1,wN=cA.f,x1=vN("unscopables"),B1=Array.prototype;B1[x1]==null&&wN(B1,x1,{configurable:!0,value:_N(null)});var bN=function(n){B1[x1][n]=!0},xN=dn,BN=!xN(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),CN=vo,SN=sn,FN=nf,EN=p0,IN=BN,Kx=EN("IE_PROTO"),C1=Object,LN=C1.prototype,$x=IN?C1.getPrototypeOf:function(n){var e=FN(n);if(CN(e,Kx))return e[Kx];var t=e.constructor;return SN(t)&&e instanceof t?t.prototype:e instanceof C1?LN:null},TN=dn,UN=sn,PN=$A,Wx=$x,QN=Ec,MN=Gn,S1=MN("iterator"),Xx=!1,Uc,F1,E1;[].keys&&(E1=[].keys(),"next"in E1?(F1=Wx(Wx(E1)),F1!==Object.prototype&&(Uc=F1)):Xx=!0);var kN=!PN(Uc)||TN(function(){var n={};return Uc[S1].call(n)!==n});kN&&(Uc={}),UN(Uc[S1])||QN(Uc,S1,function(){return this});var Zx={IteratorPrototype:Uc,BUGGY_SAFARI_ITERATORS:Xx},DN=Zx.IteratorPrototype,NN=s1,ON=Yd,RN=x0,zN=Zh,HN=function(){return this},VN=function(n,e,t,s){var l=e+" Iterator";return n.prototype=NN(DN,{next:ON(+!s,t)}),RN(n,l,!1),zN[l]=HN,n},jN=Ks,GN=os,Yx=of,qN=sn,KN=VN,Jx=$x,eB=nb,$N=x0,WN=zh,I1=Ec,XN=Gn,ZN=Zh,tB=Zx,YN=Yx.PROPER,JN=Yx.CONFIGURABLE,rB=tB.IteratorPrototype,Qf=tB.BUGGY_SAFARI_ITERATORS,Yh=XN("iterator"),iB="keys",Jh="values",nB="entries",eO=function(){return this},tO=function(n,e,t,s,l,u,p){KN(t,e,s);var a=function(K){if(K===l&&Q)return Q;if(!Qf&&K in S)return S[K];switch(K){case iB:return function(){return new t(this,K)};case Jh:return function(){return new t(this,K)};case nB:return function(){return new t(this,K)}}return function(){return new t(this)}},m=e+" Iterator",w=!1,S=n.prototype,T=S[Yh]||S["@@iterator"]||l&&S[l],Q=!Qf&&T||a(l),I=e=="Array"&&S.entries||T,q,j,Y;if(I&&(q=Jx(I.call(new n)),q!==Object.prototype&&q.next&&(Jx(q)!==rB&&(eB?eB(q,rB):qN(q[Yh])||I1(q,Yh,eO)),$N(q,m,!0))),YN&&l==Jh&&T&&T.name!==Jh&&(JN?WN(S,"name",Jh):(w=!0,Q=function(){return GN(T,this)})),l)if(j={values:a(Jh),keys:u?Q:a(iB),entries:a(nB)},p)for(Y in j)(Qf||w||!(Y in S))&&I1(S,Y,j[Y]);else jN({target:e,proto:!0,forced:Qf||w},j);return S[Yh]!==Q&&I1(S,Yh,Q,{name:l}),ZN[e]=Q,j},rO=function(n,e){return{value:n,done:e}},iO=Rh,L1=bN,sB=Zh,aB=cf,nO=cA.f,sO=tO,Mf=rO,aO=AA,oB="Array Iterator",oO=aB.set,AO=aB.getterFor(oB),lO=sO(Array,"Array",function(n,e){oO(this,{type:oB,target:iO(n),index:0,kind:e})},function(){var n=AO(this),e=n.target,t=n.kind,s=n.index++;return!e||s>=e.length?(n.target=void 0,Mf(void 0,!0)):t=="keys"?Mf(s,!1):t=="values"?Mf(e[s],!1):Mf([s,e[s]],!1)},"values"),AB=sB.Arguments=sB.Array;if(L1("keys"),L1("values"),L1("entries"),aO&&AB.name!=="values")try{nO(AB,"name",{value:"values"})}catch{}var cO={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},uO=sf,T1=uO("span").classList,lB=T1&&T1.constructor&&T1.constructor.prototype,hO=lB===Object.prototype?void 0:lB,cB=kn,uB=cO,pO=hO,ep=lO,U1=zh,hB=Gn,P1=hB("iterator"),pB=hB("toStringTag"),Q1=ep.values,dB=function(n,e){if(n){if(n[P1]!==Q1)try{U1(n,P1,Q1)}catch{n[P1]=Q1}if(n[pB]||U1(n,pB,e),uB[e]){for(var t in ep)if(n[t]!==ep[t])try{U1(n,t,ep[t])}catch{n[t]=ep[t]}}}};for(var M1 in uB)dB(cB[M1]&&cB[M1].prototype,M1);dB(pO,"DOMTokenList");function dO(n,e){if(fi(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e||"default");if(fi(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fO(n){var e=dO(n,"string");return fi(e)==="symbol"?e:String(e)}function k1(n,e,t){return e=fO(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var gO=WA,mO=nf,yO=pw,vO=df,_O=TypeError,fB=function(n){return function(e,t,s,l){gO(t);var u=mO(e),p=yO(u),a=vO(u),m=n?a-1:0,w=n?-1:1;if(s<2)for(;;){if(m in p){l=p[m],m+=w;break}if(m+=w,n?m<0:a<=m)throw _O("Reduce of empty array with no initial value")}for(;n?m>=0:a>m;m+=w)m in p&&(l=t(l,p[m],m,u));return l}},wO={left:fB(!1),right:fB(!0)},bO=dn,gB=function(n,e){var t=[][n];return!!t&&bO(function(){t.call(null,e||function(){return 1},1)})},xO=Ks,BO=wO.left,CO=gB,mB=Wm,SO=jh,FO=!SO&&mB>79&&mB<83,EO=FO||!CO("reduce");xO({target:"Array",proto:!0,forced:EO},{reduce:function(n){var e=arguments.length;return BO(this,n,e,e>1?arguments[1]:void 0)}});var IO=Ks,yB=qh,LO=Iu.f,TO=Pu,vB=hA,UO=w1,PO=lA,QO=b1,_B=yB("".endsWith),MO=yB("".slice),kO=Math.min,wB=QO("endsWith"),DO=!wB&&!!function(){var n=LO(String.prototype,"endsWith");return n&&!n.writable}();IO({target:"String",proto:!0,forced:!DO&&!wB},{endsWith:function(n){var e=vB(PO(this));UO(n);var t=arguments.length>1?arguments[1]:void 0,s=e.length,l=t===void 0?s:kO(TO(t),s),u=vB(n);return _B?_B(e,u,l):MO(e,l-u.length,l)===u}});var NO=i0,OO=cA,RO=Yd,zO=function(n,e,t){var s=NO(e);s in n?OO.f(n,s,RO(0,t)):n[s]=t},bB=Xw,HO=df,VO=zO,jO=Array,GO=Math.max,qO=function(n,e,t){for(var s=HO(n),l=bB(e,s),u=bB(t===void 0?s:t,s),p=jO(GO(u-l,0)),a=0;l<u;l++,a++)VO(p,a,n[l]);return p.length=a,p},KO=S0,tp=os,D1=fn,$O=u1,WO=Cs,XO=Sc,ZO=Hx,xB=lA,YO=db,JO=p1,e7=Pu,N1=hA,t7=Lu,BB=qO,CB=d1,r7=Uf,i7=_x,n7=dn,Hu=i7.UNSUPPORTED_Y,SB=4294967295,s7=Math.min,FB=[].push,a7=D1(/./.exec),Vu=D1(FB),rp=D1("".slice),o7=!n7(function(){var n=/(?:)/,e=n.exec;n.exec=function(){return e.apply(this,arguments)};var t="ab".split(n);return t.length!==2||t[0]!=="a"||t[1]!=="b"});$O("split",function(n,e,t){var s;return"abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?s=function(l,u){var p=N1(xB(this)),a=u===void 0?SB:u>>>0;if(a===0)return[];if(l===void 0)return[p];if(!ZO(l))return tp(e,p,l,a);for(var m=[],w=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(l.sticky?"y":""),S=0,T=new RegExp(l.source,w+"g"),Q,I,q;(Q=tp(r7,T,p))&&(I=T.lastIndex,!(I>S&&(Vu(m,rp(p,S,Q.index)),Q.length>1&&Q.index<p.length&&KO(FB,m,BB(Q,1)),q=Q[0].length,S=I,m.length>=a)));)T.lastIndex===Q.index&&T.lastIndex++;return S===p.length?(q||!a7(T,""))&&Vu(m,""):Vu(m,rp(p,S)),m.length>a?BB(m,0,a):m}:"0".split(void 0,0).length?s=function(l,u){return l===void 0&&u===0?[]:tp(e,this,l,u)}:s=e,[function(l,u){var p=xB(this),a=XO(l)?void 0:t7(l,n);return a?tp(a,l,p,u):tp(s,N1(p),l,u)},function(l,u){var p=WO(this),a=N1(l),m=t(s,p,a,u,s!==e);if(m.done)return m.value;var w=YO(p,RegExp),S=p.unicode,T=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(Hu?"g":"y"),Q=new w(Hu?"^(?:"+p.source+")":p,T),I=u===void 0?SB:u>>>0;if(I===0)return[];if(a.length===0)return CB(Q,a)===null?[a]:[];for(var q=0,j=0,Y=[];j<a.length;){Q.lastIndex=Hu?0:j;var K=CB(Q,Hu?rp(a,j):a),ne;if(K===null||(ne=s7(e7(Q.lastIndex+(Hu?j:0)),a.length))===q)j=JO(a,j,S);else{if(Vu(Y,rp(a,q,j)),Y.length===I)return Y;for(var he=1;he<=K.length-1;he++)if(Vu(Y,K[he]),Y.length===I)return Y;j=q=ne}}return Vu(Y,rp(a,q)),Y}]},!o7,Hu);var kf={exports:{}},ip={exports:{}};(function(){var n,e,t,s,l,u;typeof performance<"u"&&performance!==null&&performance.now?ip.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(ip.exports=function(){return(n()-l)/1e6},e=process.hrtime,n=function(){var p;return p=e(),p[0]*1e9+p[1]},s=n(),u=process.uptime()*1e9,l=s-u):Date.now?(ip.exports=function(){return Date.now()-t},t=Date.now()):(ip.exports=function(){return new Date().getTime()-t},t=new Date().getTime())}).call(Oh);for(var A7=ip.exports,l7=A7,ZA=typeof window>"u"?Oh:window,Df=["moz","webkit"],ju="AnimationFrame",Gu=ZA["request"+ju],np=ZA["cancel"+ju]||ZA["cancelRequest"+ju],sp=0;!Gu&&sp<Df.length;sp++)Gu=ZA[Df[sp]+"Request"+ju],np=ZA[Df[sp]+"Cancel"+ju]||ZA[Df[sp]+"CancelRequest"+ju];if(!Gu||!np){var O1=0,EB=0,Pc=[],c7=1e3/60;Gu=function(n){if(Pc.length===0){var e=l7(),t=Math.max(0,c7-(e-O1));O1=t+e,setTimeout(function(){var s=Pc.slice(0);Pc.length=0;for(var l=0;l<s.length;l++)if(!s[l].cancelled)try{s[l].callback(O1)}catch(u){setTimeout(function(){throw u},0)}},Math.round(t))}return Pc.push({handle:++EB,callback:n,cancelled:!1}),EB},np=function(n){for(var e=0;e<Pc.length;e++)Pc[e].handle===n&&(Pc[e].cancelled=!0)}}kf.exports=function(n){return Gu.call(ZA,n)},kf.exports.cancel=function(){np.apply(ZA,arguments)},kf.exports.polyfill=function(n){n||(n=ZA),n.requestAnimationFrame=Gu,n.cancelAnimationFrame=np};var u7=kf.exports;const R1=aw(u7);var IB=`	
\v\f\r \u2028\u2029\uFEFF`,h7=fn,p7=lA,d7=hA,z1=IB,LB=h7("".replace),f7=RegExp("^["+z1+"]+"),g7=RegExp("(^|[^"+z1+"])["+z1+"]+$"),H1=function(n){return function(e){var t=d7(p7(e));return n&1&&(t=LB(t,f7,"")),n&2&&(t=LB(t,g7,"$1")),t}},m7={start:H1(1),end:H1(2),trim:H1(3)},y7=of.PROPER,v7=dn,TB=IB,UB="",_7=function(n){return v7(function(){return!!TB[n]()||UB[n]()!==UB||y7&&TB[n].name!==n})},w7=Ks,b7=m7.trim,x7=_7;w7({target:"String",proto:!0,forced:x7("trim")},{trim:function(){return b7(this)}});var B7=function(n){this.ok=!1,this.alpha=1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n=n.replace(/ /g,""),n=n.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};n=e[n]||n;for(var t=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(m){return[parseInt(m[1]),parseInt(m[2]),parseInt(m[3]),parseFloat(m[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(m){return[parseInt(m[1]),parseInt(m[2]),parseInt(m[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(m){return[parseInt(m[1],16),parseInt(m[2],16),parseInt(m[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(m){return[parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16),parseInt(m[3]+m[3],16)]}}],s=0;s<t.length;s++){var l=t[s].re,u=t[s].process,p=l.exec(n);if(p){var a=u(p);this.r=a[0],this.g=a[1],this.b=a[2],a.length>3&&(this.alpha=a[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var m=this.r.toString(16),w=this.g.toString(16),S=this.b.toString(16);return m.length==1&&(m="0"+m),w.length==1&&(w="0"+w),S.length==1&&(S="0"+S),"#"+m+w+S},this.getHelpXML=function(){for(var m=new Array,w=0;w<t.length;w++)for(var S=t[w].example,T=0;T<S.length;T++)m[m.length]=S[T];for(var Q in e)m[m.length]=Q;var I=document.createElement("ul");I.setAttribute("id","rgbcolor-examples");for(var w=0;w<m.length;w++)try{var q=document.createElement("li"),j=new RGBColor(m[w]),Y=document.createElement("div");Y.style.cssText="margin: 3px; border: 1px solid black; background:"+j.toHex()+"; color:"+j.toHex(),Y.appendChild(document.createTextNode("test"));var K=document.createTextNode(" "+m[w]+" -> "+j.toRGB()+" -> "+j.toHex());q.appendChild(Y),q.appendChild(K),I.appendChild(q)}catch{}return I}};const V1=aw(B7);var C7=Ks,S7=qh,F7=Yw.indexOf,E7=gB,j1=S7([].indexOf),PB=!!j1&&1/j1([1],1,-0)<0,I7=PB||!E7("indexOf");C7({target:"Array",proto:!0,forced:I7},{indexOf:function(n){var e=arguments.length>1?arguments[1]:void 0;return PB?j1(this,n,e)||0:F7(this,n,e)}});var L7=Ks,T7=fn,U7=w1,P7=lA,QB=hA,Q7=b1,M7=T7("".indexOf);L7({target:"String",proto:!0,forced:!Q7("includes")},{includes:function(n){return!!~M7(QB(P7(this)),QB(U7(n)),arguments.length>1?arguments[1]:void 0)}});var k7=Cc,D7=Array.isArray||function(n){return k7(n)=="Array"},N7=Ks,O7=fn,R7=D7,z7=O7([].reverse),MB=[1,2];N7({target:"Array",proto:!0,forced:String(MB)===String(MB.reverse())},{reverse:function(){return R7(this)&&(this.length=this.length),z7(this)}});/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var kB=function(n,e){return(kB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])})(n,e)};function DB(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}kB(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function H7(n){var e="";Array.isArray(n)||(n=[n]);for(var t=0;t<n.length;t++){var s=n[t];if(s.type===It.CLOSE_PATH)e+="z";else if(s.type===It.HORIZ_LINE_TO)e+=(s.relative?"h":"H")+s.x;else if(s.type===It.VERT_LINE_TO)e+=(s.relative?"v":"V")+s.y;else if(s.type===It.MOVE_TO)e+=(s.relative?"m":"M")+s.x+" "+s.y;else if(s.type===It.LINE_TO)e+=(s.relative?"l":"L")+s.x+" "+s.y;else if(s.type===It.CURVE_TO)e+=(s.relative?"c":"C")+s.x1+" "+s.y1+" "+s.x2+" "+s.y2+" "+s.x+" "+s.y;else if(s.type===It.SMOOTH_CURVE_TO)e+=(s.relative?"s":"S")+s.x2+" "+s.y2+" "+s.x+" "+s.y;else if(s.type===It.QUAD_TO)e+=(s.relative?"q":"Q")+s.x1+" "+s.y1+" "+s.x+" "+s.y;else if(s.type===It.SMOOTH_QUAD_TO)e+=(s.relative?"t":"T")+s.x+" "+s.y;else{if(s.type!==It.ARC)throw new Error('Unexpected command type "'+s.type+'" at index '+t+".");e+=(s.relative?"a":"A")+s.rX+" "+s.rY+" "+s.xRot+" "+ +s.lArcFlag+" "+ +s.sweepFlag+" "+s.x+" "+s.y}}return e}function G1(n,e){var t=n[0],s=n[1];return[t*Math.cos(e)-s*Math.sin(e),t*Math.sin(e)+s*Math.cos(e)]}function _o(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=0;t<n.length;t++)if(typeof n[t]!="number")throw new Error("assertNumbers arguments["+t+"] is not a number. "+typeof n[t]+" == typeof "+n[t]);return!0}var Vl=Math.PI;function q1(n,e,t){n.lArcFlag=n.lArcFlag===0?0:1,n.sweepFlag=n.sweepFlag===0?0:1;var s=n.rX,l=n.rY,u=n.x,p=n.y;s=Math.abs(n.rX),l=Math.abs(n.rY);var a=G1([(e-u)/2,(t-p)/2],-n.xRot/180*Vl),m=a[0],w=a[1],S=Math.pow(m,2)/Math.pow(s,2)+Math.pow(w,2)/Math.pow(l,2);1<S&&(s*=Math.sqrt(S),l*=Math.sqrt(S)),n.rX=s,n.rY=l;var T=Math.pow(s,2)*Math.pow(w,2)+Math.pow(l,2)*Math.pow(m,2),Q=(n.lArcFlag!==n.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(s,2)*Math.pow(l,2)-T)/T)),I=s*w/l*Q,q=-l*m/s*Q,j=G1([I,q],n.xRot/180*Vl);n.cX=j[0]+(e+u)/2,n.cY=j[1]+(t+p)/2,n.phi1=Math.atan2((w-q)/l,(m-I)/s),n.phi2=Math.atan2((-w-q)/l,(-m-I)/s),n.sweepFlag===0&&n.phi2>n.phi1&&(n.phi2-=2*Vl),n.sweepFlag===1&&n.phi2<n.phi1&&(n.phi2+=2*Vl),n.phi1*=180/Vl,n.phi2*=180/Vl}function NB(n,e,t){_o(n,e,t);var s=n*n+e*e-t*t;if(0>s)return[];if(s===0)return[[n*t/(n*n+e*e),e*t/(n*n+e*e)]];var l=Math.sqrt(s);return[[(n*t+e*l)/(n*n+e*e),(e*t-n*l)/(n*n+e*e)],[(n*t-e*l)/(n*n+e*e),(e*t+n*l)/(n*n+e*e)]]}var En,YA=Math.PI/180;function OB(n,e,t){return(1-t)*n+t*e}function RB(n,e,t,s){return n+Math.cos(s/180*Vl)*e+Math.sin(s/180*Vl)*t}function zB(n,e,t,s){var l=1e-6,u=e-n,p=t-e,a=3*u+3*(s-t)-6*p,m=6*(p-u),w=3*u;return Math.abs(a)<l?[-w/m]:function(S,T,Q){Q===void 0&&(Q=1e-6);var I=S*S/4-T;if(I<-Q)return[];if(I<=Q)return[-S/2];var q=Math.sqrt(I);return[-S/2-q,-S/2+q]}(m/a,w/a,l)}function HB(n,e,t,s,l){var u=1-l;return n*(u*u*u)+e*(3*u*u*l)+t*(3*u*l*l)+s*(l*l*l)}(function(n){function e(){return l(function(a,m,w){return a.relative&&(a.x1!==void 0&&(a.x1+=m),a.y1!==void 0&&(a.y1+=w),a.x2!==void 0&&(a.x2+=m),a.y2!==void 0&&(a.y2+=w),a.x!==void 0&&(a.x+=m),a.y!==void 0&&(a.y+=w),a.relative=!1),a})}function t(){var a=NaN,m=NaN,w=NaN,S=NaN;return l(function(T,Q,I){return T.type&It.SMOOTH_CURVE_TO&&(T.type=It.CURVE_TO,a=isNaN(a)?Q:a,m=isNaN(m)?I:m,T.x1=T.relative?Q-a:2*Q-a,T.y1=T.relative?I-m:2*I-m),T.type&It.CURVE_TO?(a=T.relative?Q+T.x2:T.x2,m=T.relative?I+T.y2:T.y2):(a=NaN,m=NaN),T.type&It.SMOOTH_QUAD_TO&&(T.type=It.QUAD_TO,w=isNaN(w)?Q:w,S=isNaN(S)?I:S,T.x1=T.relative?Q-w:2*Q-w,T.y1=T.relative?I-S:2*I-S),T.type&It.QUAD_TO?(w=T.relative?Q+T.x1:T.x1,S=T.relative?I+T.y1:T.y1):(w=NaN,S=NaN),T})}function s(){var a=NaN,m=NaN;return l(function(w,S,T){if(w.type&It.SMOOTH_QUAD_TO&&(w.type=It.QUAD_TO,a=isNaN(a)?S:a,m=isNaN(m)?T:m,w.x1=w.relative?S-a:2*S-a,w.y1=w.relative?T-m:2*T-m),w.type&It.QUAD_TO){a=w.relative?S+w.x1:w.x1,m=w.relative?T+w.y1:w.y1;var Q=w.x1,I=w.y1;w.type=It.CURVE_TO,w.x1=((w.relative?0:S)+2*Q)/3,w.y1=((w.relative?0:T)+2*I)/3,w.x2=(w.x+2*Q)/3,w.y2=(w.y+2*I)/3}else a=NaN,m=NaN;return w})}function l(a){var m=0,w=0,S=NaN,T=NaN;return function(Q){if(isNaN(S)&&!(Q.type&It.MOVE_TO))throw new Error("path must start with moveto");var I=a(Q,m,w,S,T);return Q.type&It.CLOSE_PATH&&(m=S,w=T),Q.x!==void 0&&(m=Q.relative?m+Q.x:Q.x),Q.y!==void 0&&(w=Q.relative?w+Q.y:Q.y),Q.type&It.MOVE_TO&&(S=m,T=w),I}}function u(a,m,w,S,T,Q){return _o(a,m,w,S,T,Q),l(function(I,q,j,Y){var K=I.x1,ne=I.x2,he=I.relative&&!isNaN(Y),Ee=I.x!==void 0?I.x:he?0:q,De=I.y!==void 0?I.y:he?0:j;function Ne(ee){return ee*ee}I.type&It.HORIZ_LINE_TO&&m!==0&&(I.type=It.LINE_TO,I.y=I.relative?0:j),I.type&It.VERT_LINE_TO&&w!==0&&(I.type=It.LINE_TO,I.x=I.relative?0:q),I.x!==void 0&&(I.x=I.x*a+De*w+(he?0:T)),I.y!==void 0&&(I.y=Ee*m+I.y*S+(he?0:Q)),I.x1!==void 0&&(I.x1=I.x1*a+I.y1*w+(he?0:T)),I.y1!==void 0&&(I.y1=K*m+I.y1*S+(he?0:Q)),I.x2!==void 0&&(I.x2=I.x2*a+I.y2*w+(he?0:T)),I.y2!==void 0&&(I.y2=ne*m+I.y2*S+(he?0:Q));var Qe=a*S-m*w;if(I.xRot!==void 0&&(a!==1||m!==0||w!==0||S!==1))if(Qe===0)delete I.rX,delete I.rY,delete I.xRot,delete I.lArcFlag,delete I.sweepFlag,I.type=It.LINE_TO;else{var ge=I.xRot*Math.PI/180,Ze=Math.sin(ge),$e=Math.cos(ge),ce=1/Ne(I.rX),Ae=1/Ne(I.rY),xe=Ne($e)*ce+Ne(Ze)*Ae,_e=2*Ze*$e*(ce-Ae),et=Ne(Ze)*ce+Ne($e)*Ae,Je=xe*S*S-_e*m*S+et*m*m,rt=_e*(a*S+m*w)-2*(xe*w*S+et*a*m),Ye=xe*w*w-_e*a*w+et*a*a,it=(Math.atan2(rt,Je-Ye)+Math.PI)%Math.PI/2,nt=Math.sin(it),Bt=Math.cos(it);I.rX=Math.abs(Qe)/Math.sqrt(Je*Ne(Bt)+rt*nt*Bt+Ye*Ne(nt)),I.rY=Math.abs(Qe)/Math.sqrt(Je*Ne(nt)-rt*nt*Bt+Ye*Ne(Bt)),I.xRot=180*it/Math.PI}return I.sweepFlag!==void 0&&0>Qe&&(I.sweepFlag=+!I.sweepFlag),I})}function p(){return function(a){var m={};for(var w in a)m[w]=a[w];return m}}n.ROUND=function(a){function m(w){return Math.round(w*a)/a}return a===void 0&&(a=1e13),_o(a),function(w){return w.x1!==void 0&&(w.x1=m(w.x1)),w.y1!==void 0&&(w.y1=m(w.y1)),w.x2!==void 0&&(w.x2=m(w.x2)),w.y2!==void 0&&(w.y2=m(w.y2)),w.x!==void 0&&(w.x=m(w.x)),w.y!==void 0&&(w.y=m(w.y)),w.rX!==void 0&&(w.rX=m(w.rX)),w.rY!==void 0&&(w.rY=m(w.rY)),w}},n.TO_ABS=e,n.TO_REL=function(){return l(function(a,m,w){return a.relative||(a.x1!==void 0&&(a.x1-=m),a.y1!==void 0&&(a.y1-=w),a.x2!==void 0&&(a.x2-=m),a.y2!==void 0&&(a.y2-=w),a.x!==void 0&&(a.x-=m),a.y!==void 0&&(a.y-=w),a.relative=!0),a})},n.NORMALIZE_HVZ=function(a,m,w){return a===void 0&&(a=!0),m===void 0&&(m=!0),w===void 0&&(w=!0),l(function(S,T,Q,I,q){if(isNaN(I)&&!(S.type&It.MOVE_TO))throw new Error("path must start with moveto");return m&&S.type&It.HORIZ_LINE_TO&&(S.type=It.LINE_TO,S.y=S.relative?0:Q),w&&S.type&It.VERT_LINE_TO&&(S.type=It.LINE_TO,S.x=S.relative?0:T),a&&S.type&It.CLOSE_PATH&&(S.type=It.LINE_TO,S.x=S.relative?I-T:I,S.y=S.relative?q-Q:q),S.type&It.ARC&&(S.rX===0||S.rY===0)&&(S.type=It.LINE_TO,delete S.rX,delete S.rY,delete S.xRot,delete S.lArcFlag,delete S.sweepFlag),S})},n.NORMALIZE_ST=t,n.QT_TO_C=s,n.INFO=l,n.SANITIZE=function(a){a===void 0&&(a=0),_o(a);var m=NaN,w=NaN,S=NaN,T=NaN;return l(function(Q,I,q,j,Y){var K=Math.abs,ne=!1,he=0,Ee=0;if(Q.type&It.SMOOTH_CURVE_TO&&(he=isNaN(m)?0:I-m,Ee=isNaN(w)?0:q-w),Q.type&(It.CURVE_TO|It.SMOOTH_CURVE_TO)?(m=Q.relative?I+Q.x2:Q.x2,w=Q.relative?q+Q.y2:Q.y2):(m=NaN,w=NaN),Q.type&It.SMOOTH_QUAD_TO?(S=isNaN(S)?I:2*I-S,T=isNaN(T)?q:2*q-T):Q.type&It.QUAD_TO?(S=Q.relative?I+Q.x1:Q.x1,T=Q.relative?q+Q.y1:Q.y2):(S=NaN,T=NaN),Q.type&It.LINE_COMMANDS||Q.type&It.ARC&&(Q.rX===0||Q.rY===0||!Q.lArcFlag)||Q.type&It.CURVE_TO||Q.type&It.SMOOTH_CURVE_TO||Q.type&It.QUAD_TO||Q.type&It.SMOOTH_QUAD_TO){var De=Q.x===void 0?0:Q.relative?Q.x:Q.x-I,Ne=Q.y===void 0?0:Q.relative?Q.y:Q.y-q;he=isNaN(S)?Q.x1===void 0?he:Q.relative?Q.x:Q.x1-I:S-I,Ee=isNaN(T)?Q.y1===void 0?Ee:Q.relative?Q.y:Q.y1-q:T-q;var Qe=Q.x2===void 0?0:Q.relative?Q.x:Q.x2-I,ge=Q.y2===void 0?0:Q.relative?Q.y:Q.y2-q;K(De)<=a&&K(Ne)<=a&&K(he)<=a&&K(Ee)<=a&&K(Qe)<=a&&K(ge)<=a&&(ne=!0)}return Q.type&It.CLOSE_PATH&&K(I-j)<=a&&K(q-Y)<=a&&(ne=!0),ne?[]:Q})},n.MATRIX=u,n.ROTATE=function(a,m,w){m===void 0&&(m=0),w===void 0&&(w=0),_o(a,m,w);var S=Math.sin(a),T=Math.cos(a);return u(T,S,-S,T,m-m*T+w*S,w-m*S-w*T)},n.TRANSLATE=function(a,m){return m===void 0&&(m=0),_o(a,m),u(1,0,0,1,a,m)},n.SCALE=function(a,m){return m===void 0&&(m=a),_o(a,m),u(a,0,0,m,0,0)},n.SKEW_X=function(a){return _o(a),u(1,0,Math.atan(a),1,0,0)},n.SKEW_Y=function(a){return _o(a),u(1,Math.atan(a),0,1,0,0)},n.X_AXIS_SYMMETRY=function(a){return a===void 0&&(a=0),_o(a),u(-1,0,0,1,a,0)},n.Y_AXIS_SYMMETRY=function(a){return a===void 0&&(a=0),_o(a),u(1,0,0,-1,0,a)},n.A_TO_C=function(){return l(function(a,m,w){return It.ARC===a.type?function(S,T,Q){var I,q,j,Y;S.cX||q1(S,T,Q);for(var K=Math.min(S.phi1,S.phi2),ne=Math.max(S.phi1,S.phi2)-K,he=Math.ceil(ne/90),Ee=new Array(he),De=T,Ne=Q,Qe=0;Qe<he;Qe++){var ge=OB(S.phi1,S.phi2,Qe/he),Ze=OB(S.phi1,S.phi2,(Qe+1)/he),$e=Ze-ge,ce=4/3*Math.tan($e*YA/4),Ae=[Math.cos(ge*YA)-ce*Math.sin(ge*YA),Math.sin(ge*YA)+ce*Math.cos(ge*YA)],xe=Ae[0],_e=Ae[1],et=[Math.cos(Ze*YA),Math.sin(Ze*YA)],Je=et[0],rt=et[1],Ye=[Je+ce*Math.sin(Ze*YA),rt-ce*Math.cos(Ze*YA)],it=Ye[0],nt=Ye[1];Ee[Qe]={relative:S.relative,type:It.CURVE_TO};var Bt=function(ee,pe){var ye=G1([ee*S.rX,pe*S.rY],S.xRot),Re=ye[0],Ge=ye[1];return[S.cX+Re,S.cY+Ge]};I=Bt(xe,_e),Ee[Qe].x1=I[0],Ee[Qe].y1=I[1],q=Bt(it,nt),Ee[Qe].x2=q[0],Ee[Qe].y2=q[1],j=Bt(Je,rt),Ee[Qe].x=j[0],Ee[Qe].y=j[1],S.relative&&(Ee[Qe].x1-=De,Ee[Qe].y1-=Ne,Ee[Qe].x2-=De,Ee[Qe].y2-=Ne,Ee[Qe].x-=De,Ee[Qe].y-=Ne),De=(Y=[Ee[Qe].x,Ee[Qe].y])[0],Ne=Y[1]}return Ee}(a,a.relative?0:m,a.relative?0:w):a})},n.ANNOTATE_ARCS=function(){return l(function(a,m,w){return a.relative&&(m=0,w=0),It.ARC===a.type&&q1(a,m,w),a})},n.CLONE=p,n.CALCULATE_BOUNDS=function(){var a=function(Q){var I={};for(var q in Q)I[q]=Q[q];return I},m=e(),w=s(),S=t(),T=l(function(Q,I,q){var j=S(w(m(a(Q))));function Y(nt){nt>T.maxX&&(T.maxX=nt),nt<T.minX&&(T.minX=nt)}function K(nt){nt>T.maxY&&(T.maxY=nt),nt<T.minY&&(T.minY=nt)}if(j.type&It.DRAWING_COMMANDS&&(Y(I),K(q)),j.type&It.HORIZ_LINE_TO&&Y(j.x),j.type&It.VERT_LINE_TO&&K(j.y),j.type&It.LINE_TO&&(Y(j.x),K(j.y)),j.type&It.CURVE_TO){Y(j.x),K(j.y);for(var ne=0,he=zB(I,j.x1,j.x2,j.x);ne<he.length;ne++)0<(it=he[ne])&&1>it&&Y(HB(I,j.x1,j.x2,j.x,it));for(var Ee=0,De=zB(q,j.y1,j.y2,j.y);Ee<De.length;Ee++)0<(it=De[Ee])&&1>it&&K(HB(q,j.y1,j.y2,j.y,it))}if(j.type&It.ARC){Y(j.x),K(j.y),q1(j,I,q);for(var Ne=j.xRot/180*Math.PI,Qe=Math.cos(Ne)*j.rX,ge=Math.sin(Ne)*j.rX,Ze=-Math.sin(Ne)*j.rY,$e=Math.cos(Ne)*j.rY,ce=j.phi1<j.phi2?[j.phi1,j.phi2]:-180>j.phi2?[j.phi2+360,j.phi1+360]:[j.phi2,j.phi1],Ae=ce[0],xe=ce[1],_e=function(nt){var Bt=nt[0],ee=nt[1],pe=180*Math.atan2(ee,Bt)/Math.PI;return pe<Ae?pe+360:pe},et=0,Je=NB(Ze,-Qe,0).map(_e);et<Je.length;et++)(it=Je[et])>Ae&&it<xe&&Y(RB(j.cX,Qe,Ze,it));for(var rt=0,Ye=NB($e,-ge,0).map(_e);rt<Ye.length;rt++){var it;(it=Ye[rt])>Ae&&it<xe&&K(RB(j.cY,ge,$e,it))}}return Q});return T.minX=1/0,T.maxX=-1/0,T.minY=1/0,T.maxY=-1/0,T}})(En||(En={}));var wo,VB=function(){function n(){}return n.prototype.round=function(e){return this.transform(En.ROUND(e))},n.prototype.toAbs=function(){return this.transform(En.TO_ABS())},n.prototype.toRel=function(){return this.transform(En.TO_REL())},n.prototype.normalizeHVZ=function(e,t,s){return this.transform(En.NORMALIZE_HVZ(e,t,s))},n.prototype.normalizeST=function(){return this.transform(En.NORMALIZE_ST())},n.prototype.qtToC=function(){return this.transform(En.QT_TO_C())},n.prototype.aToC=function(){return this.transform(En.A_TO_C())},n.prototype.sanitize=function(e){return this.transform(En.SANITIZE(e))},n.prototype.translate=function(e,t){return this.transform(En.TRANSLATE(e,t))},n.prototype.scale=function(e,t){return this.transform(En.SCALE(e,t))},n.prototype.rotate=function(e,t,s){return this.transform(En.ROTATE(e,t,s))},n.prototype.matrix=function(e,t,s,l,u,p){return this.transform(En.MATRIX(e,t,s,l,u,p))},n.prototype.skewX=function(e){return this.transform(En.SKEW_X(e))},n.prototype.skewY=function(e){return this.transform(En.SKEW_Y(e))},n.prototype.xSymmetry=function(e){return this.transform(En.X_AXIS_SYMMETRY(e))},n.prototype.ySymmetry=function(e){return this.transform(En.Y_AXIS_SYMMETRY(e))},n.prototype.annotateArcs=function(){return this.transform(En.ANNOTATE_ARCS())},n}(),V7=function(n){return n===" "||n==="	"||n==="\r"||n===`
`},jB=function(n){return 48<=n.charCodeAt(0)&&n.charCodeAt(0)<=57},j7=function(n){function e(){var t=n.call(this)||this;return t.curNumber="",t.curCommandType=-1,t.curCommandRelative=!1,t.canParseCommandOrComma=!0,t.curNumberHasExp=!1,t.curNumberHasExpDigits=!1,t.curNumberHasDecimal=!1,t.curArgs=[],t}return DB(e,n),e.prototype.finish=function(t){if(t===void 0&&(t=[]),this.parse(" ",t),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return t},e.prototype.parse=function(t,s){var l=this;s===void 0&&(s=[]);for(var u=function(T){s.push(T),l.curArgs.length=0,l.canParseCommandOrComma=!0},p=0;p<t.length;p++){var a=t[p],m=!(this.curCommandType!==It.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),w=jB(a)&&(this.curNumber==="0"&&a==="0"||m);if(!jB(a)||w)if(a!=="e"&&a!=="E")if(a!=="-"&&a!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(a!=="."||this.curNumberHasExp||this.curNumberHasDecimal||m){if(this.curNumber&&this.curCommandType!==-1){var S=Number(this.curNumber);if(isNaN(S))throw new SyntaxError("Invalid number ending at "+p);if(this.curCommandType===It.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>S)throw new SyntaxError('Expected positive number, got "'+S+'" at index "'+p+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+p+'"')}this.curArgs.push(S),this.curArgs.length===G7[this.curCommandType]&&(It.HORIZ_LINE_TO===this.curCommandType?u({type:It.HORIZ_LINE_TO,relative:this.curCommandRelative,x:S}):It.VERT_LINE_TO===this.curCommandType?u({type:It.VERT_LINE_TO,relative:this.curCommandRelative,y:S}):this.curCommandType===It.MOVE_TO||this.curCommandType===It.LINE_TO||this.curCommandType===It.SMOOTH_QUAD_TO?(u({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),It.MOVE_TO===this.curCommandType&&(this.curCommandType=It.LINE_TO)):this.curCommandType===It.CURVE_TO?u({type:It.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===It.SMOOTH_CURVE_TO?u({type:It.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===It.QUAD_TO?u({type:It.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===It.ARC&&u({type:It.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!V7(a))if(a===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(a!=="+"&&a!=="-"&&a!==".")if(w)this.curNumber=a,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+p+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+a+'" at index '+p+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,a!=="z"&&a!=="Z")if(a==="h"||a==="H")this.curCommandType=It.HORIZ_LINE_TO,this.curCommandRelative=a==="h";else if(a==="v"||a==="V")this.curCommandType=It.VERT_LINE_TO,this.curCommandRelative=a==="v";else if(a==="m"||a==="M")this.curCommandType=It.MOVE_TO,this.curCommandRelative=a==="m";else if(a==="l"||a==="L")this.curCommandType=It.LINE_TO,this.curCommandRelative=a==="l";else if(a==="c"||a==="C")this.curCommandType=It.CURVE_TO,this.curCommandRelative=a==="c";else if(a==="s"||a==="S")this.curCommandType=It.SMOOTH_CURVE_TO,this.curCommandRelative=a==="s";else if(a==="q"||a==="Q")this.curCommandType=It.QUAD_TO,this.curCommandRelative=a==="q";else if(a==="t"||a==="T")this.curCommandType=It.SMOOTH_QUAD_TO,this.curCommandRelative=a==="t";else{if(a!=="a"&&a!=="A")throw new SyntaxError('Unexpected character "'+a+'" at index '+p+".");this.curCommandType=It.ARC,this.curCommandRelative=a==="a"}else s.push({type:It.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=a,this.curNumberHasDecimal=a==="."}else this.curNumber+=a,this.curNumberHasDecimal=!0;else this.curNumber+=a;else this.curNumber+=a,this.curNumberHasExp=!0;else this.curNumber+=a,this.curNumberHasExpDigits=this.curNumberHasExp}return s},e.prototype.transform=function(t){return Object.create(this,{parse:{value:function(s,l){l===void 0&&(l=[]);for(var u=0,p=Object.getPrototypeOf(this).parse.call(this,s);u<p.length;u++){var a=p[u],m=t(a);Array.isArray(m)?l.push.apply(l,m):l.push(m)}return l}}})},e}(VB),It=function(n){function e(t){var s=n.call(this)||this;return s.commands=typeof t=="string"?e.parse(t):t,s}return DB(e,n),e.prototype.encode=function(){return e.encode(this.commands)},e.prototype.getBounds=function(){var t=En.CALCULATE_BOUNDS();return this.transform(t),t},e.prototype.transform=function(t){for(var s=[],l=0,u=this.commands;l<u.length;l++){var p=t(u[l]);Array.isArray(p)?s.push.apply(s,p):s.push(p)}return this.commands=s,this},e.encode=function(t){return H7(t)},e.parse=function(t){var s=new j7,l=[];return s.parse(t,l),s.finish(l),l},e.CLOSE_PATH=1,e.MOVE_TO=2,e.HORIZ_LINE_TO=4,e.VERT_LINE_TO=8,e.LINE_TO=16,e.CURVE_TO=32,e.SMOOTH_CURVE_TO=64,e.QUAD_TO=128,e.SMOOTH_QUAD_TO=256,e.ARC=512,e.LINE_COMMANDS=e.LINE_TO|e.HORIZ_LINE_TO|e.VERT_LINE_TO,e.DRAWING_COMMANDS=e.HORIZ_LINE_TO|e.VERT_LINE_TO|e.LINE_TO|e.CURVE_TO|e.SMOOTH_CURVE_TO|e.QUAD_TO|e.SMOOTH_QUAD_TO|e.ARC,e}(VB),G7=((wo={})[It.MOVE_TO]=2,wo[It.LINE_TO]=2,wo[It.HORIZ_LINE_TO]=1,wo[It.VERT_LINE_TO]=1,wo[It.CLOSE_PATH]=0,wo[It.QUAD_TO]=4,wo[It.SMOOTH_QUAD_TO]=2,wo[It.CURVE_TO]=6,wo[It.SMOOTH_CURVE_TO]=4,wo[It.ARC]=7,wo),q7=os,K7=vo,$7=Jd,W7=vx,GB=RegExp.prototype,X7=function(n){var e=n.flags;return e===void 0&&!("flags"in GB)&&!K7(n,"flags")&&$7(GB,n)?q7(W7,n):e},Z7=of.PROPER,Y7=Ec,J7=Cs,qB=hA,eR=dn,tR=X7,K1="toString",rR=RegExp.prototype,KB=rR[K1],iR=eR(function(){return KB.call({source:"a",flags:"b"})!="/a/b"}),nR=Z7&&KB.name!=K1;(iR||nR)&&Y7(RegExp.prototype,K1,function(){var n=J7(this),e=qB(n.source),t=qB(tR(n));return"/"+e+"/"+t},{unsafe:!0});function Nf(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Nf=function(e){return typeof e}:Nf=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nf(n)}function sR(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var aR=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],oR=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function AR(n,e,t,s,l){if(typeof n=="string"&&(n=document.getElementById(n)),!n||Nf(n)!=="object"||!("getContext"in n))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var u=n.getContext("2d");try{return u.getImageData(e,t,s,l)}catch(p){throw new Error("unable to access image data: "+p)}}function lR(n,e,t,s,l,u){if(!(isNaN(u)||u<1)){u|=0;var p=AR(n,e,t,s,l);p=cR(p,e,t,s,l,u),n.getContext("2d").putImageData(p,e,t)}}function cR(n,e,t,s,l,u){for(var p=n.data,a=2*u+1,m=s-1,w=l-1,S=u+1,T=S*(S+1)/2,Q=new $B,I=Q,q,j=1;j<a;j++)I=I.next=new $B,j===S&&(q=I);I.next=Q;for(var Y=null,K=null,ne=0,he=0,Ee=aR[u],De=oR[u],Ne=0;Ne<l;Ne++){I=Q;for(var Qe=p[he],ge=p[he+1],Ze=p[he+2],$e=p[he+3],ce=0;ce<S;ce++)I.r=Qe,I.g=ge,I.b=Ze,I.a=$e,I=I.next;for(var Ae=0,xe=0,_e=0,et=0,Je=S*Qe,rt=S*ge,Ye=S*Ze,it=S*$e,nt=T*Qe,Bt=T*ge,ee=T*Ze,pe=T*$e,ye=1;ye<S;ye++){var Re=he+((m<ye?m:ye)<<2),Ge=p[Re],tt=p[Re+1],st=p[Re+2],ot=p[Re+3],Ct=S-ye;nt+=(I.r=Ge)*Ct,Bt+=(I.g=tt)*Ct,ee+=(I.b=st)*Ct,pe+=(I.a=ot)*Ct,Ae+=Ge,xe+=tt,_e+=st,et+=ot,I=I.next}Y=Q,K=q;for(var Ft=0;Ft<s;Ft++){var zt=pe*Ee>>De;if(p[he+3]=zt,zt!==0){var Vt=255/zt;p[he]=(nt*Ee>>De)*Vt,p[he+1]=(Bt*Ee>>De)*Vt,p[he+2]=(ee*Ee>>De)*Vt}else p[he]=p[he+1]=p[he+2]=0;nt-=Je,Bt-=rt,ee-=Ye,pe-=it,Je-=Y.r,rt-=Y.g,Ye-=Y.b,it-=Y.a;var Jt=Ft+u+1;Jt=ne+(Jt<m?Jt:m)<<2,Ae+=Y.r=p[Jt],xe+=Y.g=p[Jt+1],_e+=Y.b=p[Jt+2],et+=Y.a=p[Jt+3],nt+=Ae,Bt+=xe,ee+=_e,pe+=et,Y=Y.next;var ft=K,Ue=ft.r,fr=ft.g,Zt=ft.b,bt=ft.a;Je+=Ue,rt+=fr,Ye+=Zt,it+=bt,Ae-=Ue,xe-=fr,_e-=Zt,et-=bt,K=K.next,he+=4}ne+=s}for(var ze=0;ze<s;ze++){he=ze<<2;var Ut=p[he],Pt=p[he+1],Qt=p[he+2],Lt=p[he+3],hr=S*Ut,wr=S*Pt,Lr=S*Qt,qr=S*Lt,gr=T*Ut,br=T*Pt,Rt=T*Qt,vt=T*Lt;I=Q;for(var Cr=0;Cr<S;Cr++)I.r=Ut,I.g=Pt,I.b=Qt,I.a=Lt,I=I.next;for(var Tr=s,Dr=0,Vr=0,xt=0,Kt=0,rr=1;rr<=u;rr++){he=Tr+ze<<2;var Or=S-rr;gr+=(I.r=Ut=p[he])*Or,br+=(I.g=Pt=p[he+1])*Or,Rt+=(I.b=Qt=p[he+2])*Or,vt+=(I.a=Lt=p[he+3])*Or,Kt+=Ut,Dr+=Pt,Vr+=Qt,xt+=Lt,I=I.next,rr<w&&(Tr+=s)}he=ze,Y=Q,K=q;for(var bi=0;bi<l;bi++){var Nt=he<<2;p[Nt+3]=Lt=vt*Ee>>De,Lt>0?(Lt=255/Lt,p[Nt]=(gr*Ee>>De)*Lt,p[Nt+1]=(br*Ee>>De)*Lt,p[Nt+2]=(Rt*Ee>>De)*Lt):p[Nt]=p[Nt+1]=p[Nt+2]=0,gr-=hr,br-=wr,Rt-=Lr,vt-=qr,hr-=Y.r,wr-=Y.g,Lr-=Y.b,qr-=Y.a,Nt=ze+((Nt=bi+S)<w?Nt:w)*s<<2,gr+=Kt+=Y.r=p[Nt],br+=Dr+=Y.g=p[Nt+1],Rt+=Vr+=Y.b=p[Nt+2],vt+=xt+=Y.a=p[Nt+3],Y=Y.next,hr+=Ut=K.r,wr+=Pt=K.g,Lr+=Qt=K.b,qr+=Lt=K.a,Kt-=Ut,Dr-=Pt,Vr-=Qt,xt-=Lt,K=K.next,he+=s}}return n}var $B=function n(){sR(this,n),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function uR(){var{DOMParser:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:n,createCanvas(t,s){return new OffscreenCanvas(t,s)},createImage(t){return XA(function*(){var s=yield fetch(t),l=yield s.blob(),u=yield createImageBitmap(l);return u})()}};return(typeof DOMParser<"u"||typeof n>"u")&&Reflect.deleteProperty(e,"DOMParser"),e}function hR(n){var{DOMParser:e,canvas:t,fetch:s}=n;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,fetch:s,createCanvas:t.createCanvas,createImage:t.loadImage}}var pR=Object.freeze({__proto__:null,offscreen:uR,node:hR});function Qc(n){return n.replace(/(?!\u3000)\s+/gm," ")}function WB(n){return n.replace(/^[\n \t]+/,"")}function XB(n){return n.replace(/[\n \t]+$/,"")}function ca(n){var e=(n||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[];return e.map(parseFloat)}var dR=/^[A-Z-]+$/;function ZB(n){return dR.test(n)?n.toLowerCase():n}function $1(n){var e=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(n)||[];return e[2]||e[3]||e[4]}function YB(n){if(!n.startsWith("rgb"))return n;var e=3,t=n.replace(/\d+(\.\d+)?/g,(s,l)=>e--&&l?String(Math.round(parseFloat(s))):s);return t}var fR=/(\[[^\]]+\])/g,gR=/(#[^\s+>~.[:]+)/g,mR=/(\.[^\s+>~.[:]+)/g,yR=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,vR=/(:[\w-]+\([^)]*\))/gi,_R=/(:[^\s+>~.[:]+)/g,wR=/([^\s+>~.[:]+)/g;function Mc(n,e){var t=e.exec(n);return t?[n.replace(e," "),t.length]:[n,0]}function JB(n){var e=[0,0,0],t=n.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),s=0;return[t,s]=Mc(t,fR),e[1]+=s,[t,s]=Mc(t,gR),e[0]+=s,[t,s]=Mc(t,mR),e[1]+=s,[t,s]=Mc(t,yR),e[2]+=s,[t,s]=Mc(t,vR),e[1]+=s,[t,s]=Mc(t,_R),e[1]+=s,t=t.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[t,s]=Mc(t,wR),e[2]+=s,e.join("")}var kc=1e-8;function W1(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2))}function Of(n,e){return(n[0]*e[0]+n[1]*e[1])/(W1(n)*W1(e))}function X1(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(Of(n,e))}function Z1(n){return n*n*n}function Y1(n){return 3*n*n*(1-n)}function J1(n){return 3*n*(1-n)*(1-n)}function ey(n){return(1-n)*(1-n)*(1-n)}function ty(n){return n*n}function ry(n){return 2*n*(1-n)}function iy(n){return(1-n)*(1-n)}class xr{constructor(e,t,s){this.document=e,this.name=t,this.value=s,this.isNormalizedColor=!1}static empty(e){return new xr(e,"EMPTY","")}split(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:t,name:s}=this;return Qc(this.getString()).trim().split(e).map(l=>new xr(t,s,l))}hasValue(e){var{value:t}=this;return t!==null&&t!==""&&(e||t!==0)&&typeof t<"u"}isString(e){var{value:t}=this,s=typeof t=="string";return!s||!e?s:e.test(t)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var e=this.getString();switch(!0){case e.endsWith("px"):case/^[0-9]+$/.test(e):return!0;default:return!1}}setValue(e){return this.value=e,this}getValue(e){return typeof e>"u"||this.hasValue()?this.value:e}getNumber(e){if(!this.hasValue())return typeof e>"u"?0:parseFloat(e);var{value:t}=this,s=parseFloat(t);return this.isString(/%$/)&&(s/=100),s}getString(e){return typeof e>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(e)}getColor(e){var t=this.getString(e);return this.isNormalizedColor||(this.isNormalizedColor=!0,t=YB(t),this.value=t),t}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;var[s,l]=typeof e=="boolean"?[void 0,e]:[e],{viewPort:u}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(u.computeSize("x"),u.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(u.computeSize("x"),u.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*u.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*u.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&l):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*u.computeSize(s);default:{var p=this.getNumber();return t&&p<1?p*u.computeSize(s):p}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var e=this.getString(),t=/#([^)'"]+)/.exec(e);return t&&(t=t[1]),t||(t=e),this.document.definitions[t]}getFillStyleDefinition(e,t){var s=this.getDefinition();if(!s)return null;if(typeof s.createGradient=="function")return s.createGradient(this.document.ctx,e,t);if(typeof s.createPattern=="function"){if(s.getHrefAttribute().hasValue()){var l=s.getAttribute("patternTransform");s=s.getHrefAttribute().getDefinition(),l.hasValue()&&s.getAttribute("patternTransform",!0).setValue(l.value)}return s.createPattern(this.document.ctx,e,t)}return null}getTextBaseline(){return this.hasValue()?xr.textBaselineMapping[this.getString()]:null}addOpacity(e){for(var t=this.getColor(),s=t.length,l=0,u=0;u<s&&(t[u]===","&&l++,l!==3);u++);if(e.hasValue()&&this.isString()&&l!==3){var p=new V1(t);p.ok&&(p.alpha=e.getNumber(),t=p.toRGBA())}return new xr(this.document,this.name,t)}}xr.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class e5{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(e,t){this.viewPorts.push({width:e,height:t})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:e}=this;return e[e.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(e){return typeof e=="number"?e:e==="x"?this.width:e==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}class an{constructor(e,t){this.x=e,this.y=t}static parse(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[s=t,l=t]=ca(e);return new an(s,l)}static parseScale(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[s=t,l=s]=ca(e);return new an(s,l)}static parsePath(e){for(var t=ca(e),s=t.length,l=[],u=0;u<s;u+=2)l.push(new an(t[u],t[u+1]));return l}angleTo(e){return Math.atan2(e.y-this.y,e.x-this.x)}applyTransform(e){var{x:t,y:s}=this,l=t*e[0]+s*e[2]+e[4],u=t*e[1]+s*e[3]+e[5];this.x=l,this.y=u}}class t5{constructor(e){this.screen=e,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:e,onClick:t,onMouseMove:s}=this,l=e.ctx.canvas;l.onclick=t,l.onmousemove=s,this.working=!0}}stop(){if(this.working){var e=this.screen.ctx.canvas;this.working=!1,e.onclick=null,e.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:e,events:t,eventElements:s}=this,{style:l}=e.ctx.canvas;l&&(l.cursor=""),t.forEach((u,p)=>{for(var{run:a}=u,m=s[p];m;)a(m),m=m.parent}),this.events=[],this.eventElements=[]}}checkPath(e,t){if(!(!this.working||!t)){var{events:s,eventElements:l}=this;s.forEach((u,p)=>{var{x:a,y:m}=u;!l[p]&&t.isPointInPath&&t.isPointInPath(a,m)&&(l[p]=e)})}}checkBoundingBox(e,t){if(!(!this.working||!t)){var{events:s,eventElements:l}=this;s.forEach((u,p)=>{var{x:a,y:m}=u;!l[p]&&t.isPointInBox(a,m)&&(l[p]=e)})}}mapXY(e,t){for(var{window:s,ctx:l}=this.screen,u=new an(e,t),p=l.canvas;p;)u.x-=p.offsetLeft,u.y-=p.offsetTop,p=p.offsetParent;return s.scrollX&&(u.x+=s.scrollX),s.scrollY&&(u.y+=s.scrollY),u}onClick(e){var{x:t,y:s}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onclick",x:t,y:s,run(l){l.onClick&&l.onClick()}})}onMouseMove(e){var{x:t,y:s}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onmousemove",x:t,y:s,run(l){l.onMouseMove&&l.onMouseMove()}})}}var r5=typeof window<"u"?window:null,i5=typeof fetch<"u"?fetch.bind(void 0):null;class ap{constructor(e){var{fetch:t=i5,window:s=r5}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.ctx=e,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new e5,this.mouse=new t5(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=s,this.fetch=t}wait(e){this.waits.push(e)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var e=this.waits.every(t=>t());return e&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=e,e}setDefaults(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4}setViewBox(e){var{document:t,ctx:s,aspectRatio:l,width:u,desiredWidth:p,height:a,desiredHeight:m,minX:w=0,minY:S=0,refX:T,refY:Q,clip:I=!1,clipX:q=0,clipY:j=0}=e,Y=Qc(l).replace(/^defer\s/,""),[K,ne]=Y.split(" "),he=K||"xMidYMid",Ee=ne||"meet",De=u/p,Ne=a/m,Qe=Math.min(De,Ne),ge=Math.max(De,Ne),Ze=p,$e=m;Ee==="meet"&&(Ze*=Qe,$e*=Qe),Ee==="slice"&&(Ze*=ge,$e*=ge);var ce=new xr(t,"refX",T),Ae=new xr(t,"refY",Q),xe=ce.hasValue()&&Ae.hasValue();if(xe&&s.translate(-Qe*ce.getPixels("x"),-Qe*Ae.getPixels("y")),I){var _e=Qe*q,et=Qe*j;s.beginPath(),s.moveTo(_e,et),s.lineTo(u,et),s.lineTo(u,a),s.lineTo(_e,a),s.closePath(),s.clip()}if(!xe){var Je=Ee==="meet"&&Qe===Ne,rt=Ee==="slice"&&ge===Ne,Ye=Ee==="meet"&&Qe===De,it=Ee==="slice"&&ge===De;he.startsWith("xMid")&&(Je||rt)&&s.translate(u/2-Ze/2,0),he.endsWith("YMid")&&(Ye||it)&&s.translate(0,a/2-$e/2),he.startsWith("xMax")&&(Je||rt)&&s.translate(u-Ze,0),he.endsWith("YMax")&&(Ye||it)&&s.translate(0,a-$e)}switch(!0){case he==="none":s.scale(De,Ne);break;case Ee==="meet":s.scale(Qe,Qe);break;case Ee==="slice":s.scale(ge,ge);break}s.translate(-w,-S)}start(e){var{enableRedraw:t=!1,ignoreMouse:s=!1,ignoreAnimation:l=!1,ignoreDimensions:u=!1,ignoreClear:p=!1,forceRedraw:a,scaleWidth:m,scaleHeight:w,offsetX:S,offsetY:T}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{FRAMERATE:Q,mouse:I}=this,q=1e3/Q;if(this.frameDuration=q,this.readyPromise=new Promise(he=>{this.resolveReady=he}),this.isReady()&&this.render(e,u,p,m,w,S,T),!!t){var j=Date.now(),Y=j,K=0,ne=()=>{j=Date.now(),K=j-Y,K>=q&&(Y=j-K%q,this.shouldUpdate(l,a)&&(this.render(e,u,p,m,w,S,T),I.runEvents())),this.intervalId=R1(ne)};s||I.start(),this.intervalId=R1(ne)}}stop(){this.intervalId&&(R1.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(e,t){if(!e){var{frameDuration:s}=this,l=this.animations.reduce((u,p)=>p.update(s)||u,!1);if(l)return!0}return!!(typeof t=="function"&&t()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(e,t,s,l,u,p,a){var{CLIENT_WIDTH:m,CLIENT_HEIGHT:w,viewPort:S,ctx:T,isFirstRender:Q}=this,I=T.canvas;S.clear(),I.width&&I.height?S.setCurrent(I.width,I.height):S.setCurrent(m,w);var q=e.getStyle("width"),j=e.getStyle("height");!t&&(Q||typeof l!="number"&&typeof u!="number")&&(q.hasValue()&&(I.width=q.getPixels("x"),I.style&&(I.style.width="".concat(I.width,"px"))),j.hasValue()&&(I.height=j.getPixels("y"),I.style&&(I.style.height="".concat(I.height,"px"))));var Y=I.clientWidth||I.width,K=I.clientHeight||I.height;if(t&&q.hasValue()&&j.hasValue()&&(Y=q.getPixels("x"),K=j.getPixels("y")),S.setCurrent(Y,K),typeof p=="number"&&e.getAttribute("x",!0).setValue(p),typeof a=="number"&&e.getAttribute("y",!0).setValue(a),typeof l=="number"||typeof u=="number"){var ne=ca(e.getAttribute("viewBox").getString()),he=0,Ee=0;if(typeof l=="number"){var De=e.getStyle("width");De.hasValue()?he=De.getPixels("x")/l:isNaN(ne[2])||(he=ne[2]/l)}if(typeof u=="number"){var Ne=e.getStyle("height");Ne.hasValue()?Ee=Ne.getPixels("y")/u:isNaN(ne[3])||(Ee=ne[3]/u)}he||(he=Ee),Ee||(Ee=he),e.getAttribute("width",!0).setValue(l),e.getAttribute("height",!0).setValue(u);var Qe=e.getStyle("transform",!0,!0);Qe.setValue("".concat(Qe.getString()," scale(").concat(1/he,", ").concat(1/Ee,")"))}s||T.clearRect(0,0,Y,K),e.render(T),Q&&(this.isFirstRender=!1)}}ap.defaultWindow=r5,ap.defaultFetch=i5;var{defaultFetch:bR}=ap,xR=typeof DOMParser<"u"?DOMParser:null;class Rf{constructor(){var{fetch:e=bR,DOMParser:t=xR}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fetch=e,this.DOMParser=t}parse(e){var t=this;return XA(function*(){return e.startsWith("<")?t.parseFromString(e):t.load(e)})()}parseFromString(e){var t=new this.DOMParser;try{return this.checkDocument(t.parseFromString(e,"image/svg+xml"))}catch{return this.checkDocument(t.parseFromString(e,"text/xml"))}}checkDocument(e){var t=e.getElementsByTagName("parsererror")[0];if(t)throw new Error(t.textContent);return e}load(e){var t=this;return XA(function*(){var s=yield t.fetch(e),l=yield s.text();return t.parseFromString(l)})()}}class n5{constructor(e,t){this.type="translate",this.point=null,this.point=an.parse(t)}apply(e){var{x:t,y:s}=this.point;e.translate(t||0,s||0)}unapply(e){var{x:t,y:s}=this.point;e.translate(-1*t||0,-1*s||0)}applyToPoint(e){var{x:t,y:s}=this.point;e.applyTransform([1,0,0,1,t||0,s||0])}}class s5{constructor(e,t,s){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var l=ca(t);this.angle=new xr(e,"angle",l[0]),this.originX=s[0],this.originY=s[1],this.cx=l[1]||0,this.cy=l[2]||0}apply(e){var{cx:t,cy:s,originX:l,originY:u,angle:p}=this,a=t+l.getPixels("x"),m=s+u.getPixels("y");e.translate(a,m),e.rotate(p.getRadians()),e.translate(-a,-m)}unapply(e){var{cx:t,cy:s,originX:l,originY:u,angle:p}=this,a=t+l.getPixels("x"),m=s+u.getPixels("y");e.translate(a,m),e.rotate(-1*p.getRadians()),e.translate(-a,-m)}applyToPoint(e){var{cx:t,cy:s,angle:l}=this,u=l.getRadians();e.applyTransform([1,0,0,1,t||0,s||0]),e.applyTransform([Math.cos(u),Math.sin(u),-Math.sin(u),Math.cos(u),0,0]),e.applyTransform([1,0,0,1,-t||0,-s||0])}}class a5{constructor(e,t,s){this.type="scale",this.scale=null,this.originX=null,this.originY=null;var l=an.parseScale(t);(l.x===0||l.y===0)&&(l.x=kc,l.y=kc),this.scale=l,this.originX=s[0],this.originY=s[1]}apply(e){var{scale:{x:t,y:s},originX:l,originY:u}=this,p=l.getPixels("x"),a=u.getPixels("y");e.translate(p,a),e.scale(t,s||t),e.translate(-p,-a)}unapply(e){var{scale:{x:t,y:s},originX:l,originY:u}=this,p=l.getPixels("x"),a=u.getPixels("y");e.translate(p,a),e.scale(1/t,1/s||t),e.translate(-p,-a)}applyToPoint(e){var{x:t,y:s}=this.scale;e.applyTransform([t||0,0,0,s||0,0,0])}}class ny{constructor(e,t,s){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=ca(t),this.originX=s[0],this.originY=s[1]}apply(e){var{originX:t,originY:s,matrix:l}=this,u=t.getPixels("x"),p=s.getPixels("y");e.translate(u,p),e.transform(l[0],l[1],l[2],l[3],l[4],l[5]),e.translate(-u,-p)}unapply(e){var{originX:t,originY:s,matrix:l}=this,u=l[0],p=l[2],a=l[4],m=l[1],w=l[3],S=l[5],T=0,Q=0,I=1,q=1/(u*(w*I-S*Q)-p*(m*I-S*T)+a*(m*Q-w*T)),j=t.getPixels("x"),Y=s.getPixels("y");e.translate(j,Y),e.transform(q*(w*I-S*Q),q*(S*T-m*I),q*(a*Q-p*I),q*(u*I-a*T),q*(p*S-a*w),q*(a*m-u*S)),e.translate(-j,-Y)}applyToPoint(e){e.applyTransform(this.matrix)}}class sy extends ny{constructor(e,t,s){super(e,t,s),this.type="skew",this.angle=null,this.angle=new xr(e,"angle",t)}}class o5 extends sy{constructor(e,t,s){super(e,t,s),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class A5 extends sy{constructor(e,t,s){super(e,t,s),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function BR(n){return Qc(n).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function CR(n){var[e,t]=n.split("(");return[e.trim(),t.trim().replace(")","")]}class jl{constructor(e,t,s){this.document=e,this.transforms=[];var l=BR(t);l.forEach(u=>{if(u!=="none"){var[p,a]=CR(u),m=jl.transformTypes[p];typeof m<"u"&&this.transforms.push(new m(this.document,a,s))}})}static fromElement(e,t){var s=t.getStyle("transform",!1,!0),[l,u=l]=t.getStyle("transform-origin",!1,!0).split(),p=[l,u];return s.hasValue()?new jl(e,s.getString(),p):null}apply(e){for(var{transforms:t}=this,s=t.length,l=0;l<s;l++)t[l].apply(e)}unapply(e){for(var{transforms:t}=this,s=t.length,l=s-1;l>=0;l--)t[l].unapply(e)}applyToPoint(e){for(var{transforms:t}=this,s=t.length,l=0;l<s;l++)t[l].applyToPoint(e)}}jl.transformTypes={translate:n5,rotate:s5,scale:a5,matrix:ny,skewX:o5,skewY:A5};class Ri{constructor(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.document=e,this.node=t,this.captureTextNodes=s,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!(!t||t.nodeType!==1)){if(Array.from(t.attributes).forEach(a=>{var m=ZB(a.nodeName);this.attributes[m]=new xr(e,m,a.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var l=this.getAttribute("style").getString().split(";").map(a=>a.trim());l.forEach(a=>{if(a){var[m,w]=a.split(":").map(S=>S.trim());this.styles[m]=new xr(e,m,w)}})}var{definitions:u}=e,p=this.getAttribute("id");p.hasValue()&&(u[p.getString()]||(u[p.getString()]=this)),Array.from(t.childNodes).forEach(a=>{if(a.nodeType===1)this.addChild(a);else if(s&&(a.nodeType===3||a.nodeType===4)){var m=e.createTextNode(a);m.getText().length>0&&this.addChild(m)}})}}getAttribute(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.attributes[e];if(!s&&t){var l=new xr(this.document,e,"");return this.attributes[e]=l,l}return s||xr.empty(this.document)}getHrefAttribute(){for(var e in this.attributes)if(e==="href"||e.endsWith(":href"))return this.attributes[e];return xr.empty(this.document)}getStyle(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,l=this.styles[e];if(l)return l;var u=this.getAttribute(e);if(u!=null&&u.hasValue())return this.styles[e]=u,u;if(!s){var{parent:p}=this;if(p){var a=p.getStyle(e);if(a!=null&&a.hasValue())return a}}if(t){var m=new xr(this.document,e,"");return this.styles[e]=m,m}return l||xr.empty(this.document)}render(e){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(e.save(),this.getStyle("mask").hasValue()){var t=this.getStyle("mask").getDefinition();t&&(this.applyEffects(e),t.apply(e,this))}else if(this.getStyle("filter").getValue("none")!=="none"){var s=this.getStyle("filter").getDefinition();s&&(this.applyEffects(e),s.apply(e,this))}else this.setContext(e),this.renderChildren(e),this.clearContext(e);e.restore()}}setContext(e){}applyEffects(e){var t=jl.fromElement(this.document,this);t&&t.apply(e);var s=this.getStyle("clip-path",!1,!0);if(s.hasValue()){var l=s.getDefinition();l&&l.apply(e)}}clearContext(e){}renderChildren(e){this.children.forEach(t=>{t.render(e)})}addChild(e){var t=e instanceof Ri?e:this.document.createElement(e);t.parent=this,Ri.ignoreChildTypes.includes(t.type)||this.children.push(t)}matchesSelector(e){var t,{node:s}=this;if(typeof s.matches=="function")return s.matches(e);var l=(t=s.getAttribute)===null||t===void 0?void 0:t.call(s,"class");return!l||l===""?!1:l.split(" ").some(u=>".".concat(u)===e)}addStylesFromStyleDefinition(){var{styles:e,stylesSpecificity:t}=this.document;for(var s in e)if(!s.startsWith("@")&&this.matchesSelector(s)){var l=e[s],u=t[s];if(l)for(var p in l){var a=this.stylesSpecificity[p];typeof a>"u"&&(a="000"),u>=a&&(this.styles[p]=l[p],this.stylesSpecificity[p]=u)}}}removeStyles(e,t){var s=t.reduce((l,u)=>{var p=e.getStyle(u);if(!p.hasValue())return l;var a=p.getString();return p.setValue(""),[...l,[u,a]]},[]);return s}restoreStyles(e,t){t.forEach(s=>{var[l,u]=s;e.getStyle(l,!0).setValue(u)})}isFirstChild(){var e;return((e=this.parent)===null||e===void 0?void 0:e.children.indexOf(this))===0}}Ri.ignoreChildTypes=["title"];class l5 extends Ri{constructor(e,t,s){super(e,t,s)}}function SR(n){var e=n.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}function FR(n){return typeof process>"u"?n:n.trim().split(",").map(SR).join(",")}function ER(n){if(!n)return"";var e=n.trim().toLowerCase();switch(e){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return e;default:return/^oblique\s+(-|)\d+deg$/.test(e)?e:""}}function IR(n){if(!n)return"";var e=n.trim().toLowerCase();switch(e){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return e;default:return/^[\d.]+$/.test(e)?e:""}}class Ss{constructor(e,t,s,l,u,p){var a=p?typeof p=="string"?Ss.parse(p):p:{};this.fontFamily=u||a.fontFamily,this.fontSize=l||a.fontSize,this.fontStyle=e||a.fontStyle,this.fontWeight=s||a.fontWeight,this.fontVariant=t||a.fontVariant}static parse(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,s="",l="",u="",p="",a="",m=Qc(e).trim().split(" "),w={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return m.forEach(S=>{switch(!0){case(!w.fontStyle&&Ss.styles.includes(S)):S!=="inherit"&&(s=S),w.fontStyle=!0;break;case(!w.fontVariant&&Ss.variants.includes(S)):S!=="inherit"&&(l=S),w.fontStyle=!0,w.fontVariant=!0;break;case(!w.fontWeight&&Ss.weights.includes(S)):S!=="inherit"&&(u=S),w.fontStyle=!0,w.fontVariant=!0,w.fontWeight=!0;break;case!w.fontSize:S!=="inherit"&&([p]=S.split("/")),w.fontStyle=!0,w.fontVariant=!0,w.fontWeight=!0,w.fontSize=!0;break;default:S!=="inherit"&&(a+=S)}}),new Ss(s,l,u,p,a,t)}toString(){return[ER(this.fontStyle),this.fontVariant,IR(this.fontWeight),this.fontSize,FR(this.fontFamily)].join(" ").trim()}}Ss.styles="normal|italic|oblique|inherit",Ss.variants="normal|small-caps|inherit",Ss.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class Ga{constructor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.NaN,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.NaN,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.NaN,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Number.NaN;this.x1=e,this.y1=t,this.x2=s,this.y2=l,this.addPoint(e,t),this.addPoint(s,l)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(e,t){typeof e<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),typeof t<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))}addX(e){this.addPoint(e,null)}addY(e){this.addPoint(null,e)}addBoundingBox(e){if(e){var{x1:t,y1:s,x2:l,y2:u}=e;this.addPoint(t,s),this.addPoint(l,u)}}sumCubic(e,t,s,l,u){return Math.pow(1-e,3)*t+3*Math.pow(1-e,2)*e*s+3*(1-e)*Math.pow(e,2)*l+Math.pow(e,3)*u}bezierCurveAdd(e,t,s,l,u){var p=6*t-12*s+6*l,a=-3*t+9*s-9*l+3*u,m=3*s-3*t;if(a===0){if(p===0)return;var w=-m/p;0<w&&w<1&&(e?this.addX(this.sumCubic(w,t,s,l,u)):this.addY(this.sumCubic(w,t,s,l,u)));return}var S=Math.pow(p,2)-4*m*a;if(!(S<0)){var T=(-p+Math.sqrt(S))/(2*a);0<T&&T<1&&(e?this.addX(this.sumCubic(T,t,s,l,u)):this.addY(this.sumCubic(T,t,s,l,u)));var Q=(-p-Math.sqrt(S))/(2*a);0<Q&&Q<1&&(e?this.addX(this.sumCubic(Q,t,s,l,u)):this.addY(this.sumCubic(Q,t,s,l,u)))}}addBezierCurve(e,t,s,l,u,p,a,m){this.addPoint(e,t),this.addPoint(a,m),this.bezierCurveAdd(!0,e,s,u,a),this.bezierCurveAdd(!1,t,l,p,m)}addQuadraticCurve(e,t,s,l,u,p){var a=e+.6666666666666666*(s-e),m=t+2/3*(l-t),w=a+1/3*(u-e),S=m+1/3*(p-t);this.addBezierCurve(e,t,a,w,m,S,u,p)}isPointInBox(e,t){var{x1:s,y1:l,x2:u,y2:p}=this;return s<=e&&e<=u&&l<=t&&t<=p}}class Gr extends It{constructor(e){super(e.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new an(0,0),this.control=new an(0,0),this.current=new an(0,0),this.points=[],this.angles=[]}isEnd(){var{i:e,commands:t}=this;return e>=t.length-1}next(){var e=this.commands[++this.i];return this.previousCommand=this.command,this.command=e,e}getPoint(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",s=new an(this.command[e],this.command[t]);return this.makeAbsolute(s)}getAsControlPoint(e,t){var s=this.getPoint(e,t);return this.control=s,s}getAsCurrentPoint(e,t){var s=this.getPoint(e,t);return this.current=s,s}getReflectedControlPoint(){var e=this.previousCommand.type;if(e!==It.CURVE_TO&&e!==It.SMOOTH_CURVE_TO&&e!==It.QUAD_TO&&e!==It.SMOOTH_QUAD_TO)return this.current;var{current:{x:t,y:s},control:{x:l,y:u}}=this,p=new an(2*t-l,2*s-u);return p}makeAbsolute(e){if(this.command.relative){var{x:t,y:s}=this.current;e.x+=t,e.y+=s}return e}addMarker(e,t,s){var{points:l,angles:u}=this;s&&u.length>0&&!u[u.length-1]&&(u[u.length-1]=l[l.length-1].angleTo(s)),this.addMarkerAngle(e,t?t.angleTo(e):null)}addMarkerAngle(e,t){this.points.push(e),this.angles.push(t)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:e}=this,t=e.length,s=0;s<t;s++)if(!e[s]){for(var l=s+1;l<t;l++)if(e[l]){e[s]=e[l];break}}return e}}class Gl extends Ri{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var e=1,t=this;t;){var s=t.getStyle("opacity",!1,!0);s.hasValue(!0)&&(e*=s.getNumber()),t=t.parent}return e}setContext(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!t){var s=this.getStyle("fill"),l=this.getStyle("fill-opacity"),u=this.getStyle("stroke"),p=this.getStyle("stroke-opacity");if(s.isUrlDefinition()){var a=s.getFillStyleDefinition(this,l);a&&(e.fillStyle=a)}else if(s.hasValue()){s.getString()==="currentColor"&&s.setValue(this.getStyle("color").getColor());var m=s.getColor();m!=="inherit"&&(e.fillStyle=m==="none"?"rgba(0,0,0,0)":m)}if(l.hasValue()){var w=new xr(this.document,"fill",e.fillStyle).addOpacity(l).getColor();e.fillStyle=w}if(u.isUrlDefinition()){var S=u.getFillStyleDefinition(this,p);S&&(e.strokeStyle=S)}else if(u.hasValue()){u.getString()==="currentColor"&&u.setValue(this.getStyle("color").getColor());var T=u.getString();T!=="inherit"&&(e.strokeStyle=T==="none"?"rgba(0,0,0,0)":T)}if(p.hasValue()){var Q=new xr(this.document,"stroke",e.strokeStyle).addOpacity(p).getString();e.strokeStyle=Q}var I=this.getStyle("stroke-width");if(I.hasValue()){var q=I.getPixels();e.lineWidth=q||kc}var j=this.getStyle("stroke-linecap"),Y=this.getStyle("stroke-linejoin"),K=this.getStyle("stroke-miterlimit"),ne=this.getStyle("stroke-dasharray"),he=this.getStyle("stroke-dashoffset");if(j.hasValue()&&(e.lineCap=j.getString()),Y.hasValue()&&(e.lineJoin=Y.getString()),K.hasValue()&&(e.miterLimit=K.getNumber()),ne.hasValue()&&ne.getString()!=="none"){var Ee=ca(ne.getString());typeof e.setLineDash<"u"?e.setLineDash(Ee):typeof e.webkitLineDash<"u"?e.webkitLineDash=Ee:typeof e.mozDash<"u"&&!(Ee.length===1&&Ee[0]===0)&&(e.mozDash=Ee);var De=he.getPixels();typeof e.lineDashOffset<"u"?e.lineDashOffset=De:typeof e.webkitLineDashOffset<"u"?e.webkitLineDashOffset=De:typeof e.mozDashOffset<"u"&&(e.mozDashOffset=De)}}if(this.modifiedEmSizeStack=!1,typeof e.font<"u"){var Ne=this.getStyle("font"),Qe=this.getStyle("font-style"),ge=this.getStyle("font-variant"),Ze=this.getStyle("font-weight"),$e=this.getStyle("font-size"),ce=this.getStyle("font-family"),Ae=new Ss(Qe.getString(),ge.getString(),Ze.getString(),$e.hasValue()?"".concat($e.getPixels(!0),"px"):"",ce.getString(),Ss.parse(Ne.getString(),e.font));Qe.setValue(Ae.fontStyle),ge.setValue(Ae.fontVariant),Ze.setValue(Ae.fontWeight),$e.setValue(Ae.fontSize),ce.setValue(Ae.fontFamily),e.font=Ae.toString(),$e.isPixels()&&(this.document.emSize=$e.getPixels(),this.modifiedEmSizeStack=!0)}t||(this.applyEffects(e),e.globalAlpha=this.calculateOpacity())}clearContext(e){super.clearContext(e),this.modifiedEmSizeStack&&this.document.popEmSize()}}class wi extends Gl{constructor(e,t,s){super(e,t,s),this.type="path",this.pathParser=null,this.pathParser=new Gr(this.getAttribute("d").getString())}path(e){var{pathParser:t}=this,s=new Ga;for(t.reset(),e&&e.beginPath();!t.isEnd();)switch(t.next().type){case Gr.MOVE_TO:this.pathM(e,s);break;case Gr.LINE_TO:this.pathL(e,s);break;case Gr.HORIZ_LINE_TO:this.pathH(e,s);break;case Gr.VERT_LINE_TO:this.pathV(e,s);break;case Gr.CURVE_TO:this.pathC(e,s);break;case Gr.SMOOTH_CURVE_TO:this.pathS(e,s);break;case Gr.QUAD_TO:this.pathQ(e,s);break;case Gr.SMOOTH_QUAD_TO:this.pathT(e,s);break;case Gr.ARC:this.pathA(e,s);break;case Gr.CLOSE_PATH:this.pathZ(e,s);break}return s}getBoundingBox(e){return this.path()}getMarkers(){var{pathParser:e}=this,t=e.getMarkerPoints(),s=e.getMarkerAngles(),l=t.map((u,p)=>[u,s[p]]);return l}renderChildren(e){this.path(e),this.document.screen.mouse.checkPath(this,e);var t=this.getStyle("fill-rule");e.fillStyle!==""&&(t.getString("inherit")!=="inherit"?e.fill(t.getString()):e.fill()),e.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(e.save(),e.setTransform(1,0,0,1,0,0),e.stroke(),e.restore()):e.stroke());var s=this.getMarkers();if(s){var l=s.length-1,u=this.getStyle("marker-start"),p=this.getStyle("marker-mid"),a=this.getStyle("marker-end");if(u.isUrlDefinition()){var m=u.getDefinition(),[w,S]=s[0];m.render(e,w,S)}if(p.isUrlDefinition())for(var T=p.getDefinition(),Q=1;Q<l;Q++){var[I,q]=s[Q];T.render(e,I,q)}if(a.isUrlDefinition()){var j=a.getDefinition(),[Y,K]=s[l];j.render(e,Y,K)}}}static pathM(e){var t=e.getAsCurrentPoint();return e.start=e.current,{point:t}}pathM(e,t){var{pathParser:s}=this,{point:l}=wi.pathM(s),{x:u,y:p}=l;s.addMarker(l),t.addPoint(u,p),e&&e.moveTo(u,p)}static pathL(e){var{current:t}=e,s=e.getAsCurrentPoint();return{current:t,point:s}}pathL(e,t){var{pathParser:s}=this,{current:l,point:u}=wi.pathL(s),{x:p,y:a}=u;s.addMarker(u,l),t.addPoint(p,a),e&&e.lineTo(p,a)}static pathH(e){var{current:t,command:s}=e,l=new an((s.relative?t.x:0)+s.x,t.y);return e.current=l,{current:t,point:l}}pathH(e,t){var{pathParser:s}=this,{current:l,point:u}=wi.pathH(s),{x:p,y:a}=u;s.addMarker(u,l),t.addPoint(p,a),e&&e.lineTo(p,a)}static pathV(e){var{current:t,command:s}=e,l=new an(t.x,(s.relative?t.y:0)+s.y);return e.current=l,{current:t,point:l}}pathV(e,t){var{pathParser:s}=this,{current:l,point:u}=wi.pathV(s),{x:p,y:a}=u;s.addMarker(u,l),t.addPoint(p,a),e&&e.lineTo(p,a)}static pathC(e){var{current:t}=e,s=e.getPoint("x1","y1"),l=e.getAsControlPoint("x2","y2"),u=e.getAsCurrentPoint();return{current:t,point:s,controlPoint:l,currentPoint:u}}pathC(e,t){var{pathParser:s}=this,{current:l,point:u,controlPoint:p,currentPoint:a}=wi.pathC(s);s.addMarker(a,p,u),t.addBezierCurve(l.x,l.y,u.x,u.y,p.x,p.y,a.x,a.y),e&&e.bezierCurveTo(u.x,u.y,p.x,p.y,a.x,a.y)}static pathS(e){var{current:t}=e,s=e.getReflectedControlPoint(),l=e.getAsControlPoint("x2","y2"),u=e.getAsCurrentPoint();return{current:t,point:s,controlPoint:l,currentPoint:u}}pathS(e,t){var{pathParser:s}=this,{current:l,point:u,controlPoint:p,currentPoint:a}=wi.pathS(s);s.addMarker(a,p,u),t.addBezierCurve(l.x,l.y,u.x,u.y,p.x,p.y,a.x,a.y),e&&e.bezierCurveTo(u.x,u.y,p.x,p.y,a.x,a.y)}static pathQ(e){var{current:t}=e,s=e.getAsControlPoint("x1","y1"),l=e.getAsCurrentPoint();return{current:t,controlPoint:s,currentPoint:l}}pathQ(e,t){var{pathParser:s}=this,{current:l,controlPoint:u,currentPoint:p}=wi.pathQ(s);s.addMarker(p,u,u),t.addQuadraticCurve(l.x,l.y,u.x,u.y,p.x,p.y),e&&e.quadraticCurveTo(u.x,u.y,p.x,p.y)}static pathT(e){var{current:t}=e,s=e.getReflectedControlPoint();e.control=s;var l=e.getAsCurrentPoint();return{current:t,controlPoint:s,currentPoint:l}}pathT(e,t){var{pathParser:s}=this,{current:l,controlPoint:u,currentPoint:p}=wi.pathT(s);s.addMarker(p,u,u),t.addQuadraticCurve(l.x,l.y,u.x,u.y,p.x,p.y),e&&e.quadraticCurveTo(u.x,u.y,p.x,p.y)}static pathA(e){var{current:t,command:s}=e,{rX:l,rY:u,xRot:p,lArcFlag:a,sweepFlag:m}=s,w=p*(Math.PI/180),S=e.getAsCurrentPoint(),T=new an(Math.cos(w)*(t.x-S.x)/2+Math.sin(w)*(t.y-S.y)/2,-Math.sin(w)*(t.x-S.x)/2+Math.cos(w)*(t.y-S.y)/2),Q=Math.pow(T.x,2)/Math.pow(l,2)+Math.pow(T.y,2)/Math.pow(u,2);Q>1&&(l*=Math.sqrt(Q),u*=Math.sqrt(Q));var I=(a===m?-1:1)*Math.sqrt((Math.pow(l,2)*Math.pow(u,2)-Math.pow(l,2)*Math.pow(T.y,2)-Math.pow(u,2)*Math.pow(T.x,2))/(Math.pow(l,2)*Math.pow(T.y,2)+Math.pow(u,2)*Math.pow(T.x,2)));isNaN(I)&&(I=0);var q=new an(I*l*T.y/u,I*-u*T.x/l),j=new an((t.x+S.x)/2+Math.cos(w)*q.x-Math.sin(w)*q.y,(t.y+S.y)/2+Math.sin(w)*q.x+Math.cos(w)*q.y),Y=X1([1,0],[(T.x-q.x)/l,(T.y-q.y)/u]),K=[(T.x-q.x)/l,(T.y-q.y)/u],ne=[(-T.x-q.x)/l,(-T.y-q.y)/u],he=X1(K,ne);return Of(K,ne)<=-1&&(he=Math.PI),Of(K,ne)>=1&&(he=0),{currentPoint:S,rX:l,rY:u,sweepFlag:m,xAxisRotation:w,centp:j,a1:Y,ad:he}}pathA(e,t){var{pathParser:s}=this,{currentPoint:l,rX:u,rY:p,sweepFlag:a,xAxisRotation:m,centp:w,a1:S,ad:T}=wi.pathA(s),Q=1-a?1:-1,I=S+Q*(T/2),q=new an(w.x+u*Math.cos(I),w.y+p*Math.sin(I));if(s.addMarkerAngle(q,I-Q*Math.PI/2),s.addMarkerAngle(l,I-Q*Math.PI),t.addPoint(l.x,l.y),e&&!isNaN(S)&&!isNaN(T)){var j=u>p?u:p,Y=u>p?1:u/p,K=u>p?p/u:1;e.translate(w.x,w.y),e.rotate(m),e.scale(Y,K),e.arc(0,0,j,S,S+T,!!(1-a)),e.scale(1/Y,1/K),e.rotate(-m),e.translate(-w.x,-w.y)}}static pathZ(e){e.current=e.start}pathZ(e,t){wi.pathZ(this.pathParser),e&&t.x1!==t.x2&&t.y1!==t.y2&&e.closePath()}}class ay extends wi{constructor(e,t,s){super(e,t,s),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class JA extends Gl{constructor(e,t,s){super(e,t,new.target===JA?!0:s),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(e,t);var s=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();s&&(e.textBaseline=s)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(e){if(this.type!=="text")return this.getTElementBoundingBox(e);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e);var t=null;return this.children.forEach((s,l)=>{var u=this.getChildBoundingBox(e,this,this,l);t?t.addBoundingBox(u):t=u}),t}getFontSize(){var{document:e,parent:t}=this,s=Ss.parse(e.ctx.font).fontSize,l=t.getStyle("font-size").getNumber(s);return l}getTElementBoundingBox(e){var t=this.getFontSize();return new Ga(this.x,this.y-t,this.x+this.measureText(e),this.y)}getGlyph(e,t,s){var l=t[s],u=null;if(e.isArabic){var p=t.length,a=t[s-1],m=t[s+1],w="isolated";if((s===0||a===" ")&&s<p-1&&m!==" "&&(w="terminal"),s>0&&a!==" "&&s<p-1&&m!==" "&&(w="medial"),s>0&&a!==" "&&(s===p-1||m===" ")&&(w="initial"),typeof e.glyphs[l]<"u"){var S=e.glyphs[l];u=S instanceof ay?S:S[w]}}else u=e.glyphs[l];return u||(u=e.missingGlyph),u}getText(){return""}getTextFromNode(e){var t=e||this.node,s=Array.from(t.parentNode.childNodes),l=s.indexOf(t),u=s.length-1,p=Qc(t.textContent||"");return l===0&&(p=WB(p)),l===u&&(p=XB(p)),p}renderChildren(e){if(this.type!=="text"){this.renderTElementChildren(e);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e),this.children.forEach((s,l)=>{this.renderChild(e,this,this,l)});var{mouse:t}=this.document.screen;t.isWorking()&&t.checkBoundingBox(this,this.getBoundingBox(e))}renderTElementChildren(e){var{document:t,parent:s}=this,l=this.getText(),u=s.getStyle("font-family").getDefinition();if(u){for(var{unitsPerEm:p}=u.fontFace,a=Ss.parse(t.ctx.font),m=s.getStyle("font-size").getNumber(a.fontSize),w=s.getStyle("font-style").getString(a.fontStyle),S=m/p,T=u.isRTL?l.split("").reverse().join(""):l,Q=ca(s.getAttribute("dx").getString()),I=T.length,q=0;q<I;q++){var j=this.getGlyph(u,T,q);e.translate(this.x,this.y),e.scale(S,-S);var Y=e.lineWidth;e.lineWidth=e.lineWidth*p/m,w==="italic"&&e.transform(1,0,.4,1,0,0),j.render(e),w==="italic"&&e.transform(1,0,-.4,1,0,0),e.lineWidth=Y,e.scale(1/S,-1/S),e.translate(-this.x,-this.y),this.x+=m*(j.horizAdvX||u.horizAdvX)/p,typeof Q[q]<"u"&&!isNaN(Q[q])&&(this.x+=Q[q])}return}var{x:K,y:ne}=this;e.fillStyle&&e.fillText(l,K,ne),e.strokeStyle&&e.strokeText(l,K,ne)}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var e=this.leafTexts[this.textChunkStart],t=e.getStyle("text-anchor").getString("start"),s=!1,l=0;t==="start"&&!s||t==="end"&&s?l=e.x-this.minX:t==="end"&&!s||t==="start"&&s?l=e.x-this.maxX:l=e.x-(this.minX+this.maxX)/2;for(var u=this.textChunkStart;u<this.leafTexts.length;u++)this.leafTexts[u].x+=l;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(e){this.children.forEach((t,s)=>{this.adjustChildCoordinatesRecursiveCore(e,this,this,s)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(e,t,s,l){var u=s.children[l];u.children.length>0?u.children.forEach((p,a)=>{t.adjustChildCoordinatesRecursiveCore(e,t,u,a)}):this.adjustChildCoordinates(e,t,s,l)}adjustChildCoordinates(e,t,s,l){var u=s.children[l];if(typeof u.measureText!="function")return u;e.save(),u.setContext(e,!0);var p=u.getAttribute("x"),a=u.getAttribute("y"),m=u.getAttribute("dx"),w=u.getAttribute("dy"),S=u.getStyle("font-family").getDefinition(),T=!!S&&S.isRTL;l===0&&(p.hasValue()||p.setValue(u.getInheritedAttribute("x")),a.hasValue()||a.setValue(u.getInheritedAttribute("y")),m.hasValue()||m.setValue(u.getInheritedAttribute("dx")),w.hasValue()||w.setValue(u.getInheritedAttribute("dy")));var Q=u.measureText(e);return T&&(t.x-=Q),p.hasValue()?(t.applyAnchoring(),u.x=p.getPixels("x"),m.hasValue()&&(u.x+=m.getPixels("x"))):(m.hasValue()&&(t.x+=m.getPixels("x")),u.x=t.x),t.x=u.x,T||(t.x+=Q),a.hasValue()?(u.y=a.getPixels("y"),w.hasValue()&&(u.y+=w.getPixels("y"))):(w.hasValue()&&(t.y+=w.getPixels("y")),u.y=t.y),t.y=u.y,t.leafTexts.push(u),t.minX=Math.min(t.minX,u.x,u.x+Q),t.maxX=Math.max(t.maxX,u.x,u.x+Q),u.clearContext(e),e.restore(),u}getChildBoundingBox(e,t,s,l){var u=s.children[l];if(typeof u.getBoundingBox!="function")return null;var p=u.getBoundingBox(e);return p?(u.children.forEach((a,m)=>{var w=t.getChildBoundingBox(e,t,u,m);p.addBoundingBox(w)}),p):null}renderChild(e,t,s,l){var u=s.children[l];u.render(e),u.children.forEach((p,a)=>{t.renderChild(e,t,u,a)})}measureText(e){var{measureCache:t}=this;if(~t)return t;var s=this.getText(),l=this.measureTargetText(e,s);return this.measureCache=l,l}measureTargetText(e,t){if(!t.length)return 0;var{parent:s}=this,l=s.getStyle("font-family").getDefinition();if(l){for(var u=this.getFontSize(),p=l.isRTL?t.split("").reverse().join(""):t,a=ca(s.getAttribute("dx").getString()),m=p.length,w=0,S=0;S<m;S++){var T=this.getGlyph(l,p,S);w+=(T.horizAdvX||l.horizAdvX)*u/l.fontFace.unitsPerEm,typeof a[S]<"u"&&!isNaN(a[S])&&(w+=a[S])}return w}if(!e.measureText)return t.length*10;e.save(),this.setContext(e,!0);var{width:Q}=e.measureText(t);return this.clearContext(e),e.restore(),Q}getInheritedAttribute(e){for(var t=this;t instanceof JA&&t.isFirstChild();){var s=t.parent.getAttribute(e);if(s.hasValue(!0))return s.getValue("0");t=t.parent}return null}}class Ap extends JA{constructor(e,t,s){super(e,t,new.target===Ap?!0:s),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}getText(){return this.text}}class LR extends Ap{constructor(){super(...arguments),this.type="textNode"}}class qu extends Gl{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(e){var t,{document:s}=this,{screen:l,window:u}=s,p=e.canvas;if(l.setDefaults(e),p.style&&typeof e.font<"u"&&u&&typeof u.getComputedStyle<"u"){e.font=u.getComputedStyle(p).getPropertyValue("font");var a=new xr(s,"fontSize",Ss.parse(e.font).fontSize);a.hasValue()&&(s.rootEmSize=a.getPixels("y"),s.emSize=s.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var{width:m,height:w}=l.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var S=this.getAttribute("refX"),T=this.getAttribute("refY"),Q=this.getAttribute("viewBox"),I=Q.hasValue()?ca(Q.getString()):null,q=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",j=0,Y=0,K=0,ne=0;I&&(j=I[0],Y=I[1]),this.root||(m=this.getStyle("width").getPixels("x"),w=this.getStyle("height").getPixels("y"),this.type==="marker"&&(K=j,ne=Y,j=0,Y=0)),l.viewPort.setCurrent(m,w),this.node&&(!this.parent||((t=this.node.parentNode)===null||t===void 0?void 0:t.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(e),e.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),I&&(m=I[2],w=I[3]),s.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:l.viewPort.width,desiredWidth:m,height:l.viewPort.height,desiredHeight:w,minX:j,minY:Y,refX:S.getValue(),refY:T.getValue(),clip:q,clipX:K,clipY:ne}),I&&(l.viewPort.removeCurrent(),l.viewPort.setCurrent(m,w))}clearContext(e){super.clearContext(e),this.document.screen.viewPort.removeCurrent()}resize(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,l=this.getAttribute("width",!0),u=this.getAttribute("height",!0),p=this.getAttribute("viewBox"),a=this.getAttribute("style"),m=l.getNumber(0),w=u.getNumber(0);if(s)if(typeof s=="string")this.getAttribute("preserveAspectRatio",!0).setValue(s);else{var S=this.getAttribute("preserveAspectRatio");S.hasValue()&&S.setValue(S.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(l.setValue(e),u.setValue(t),p.hasValue()||p.setValue("0 0 ".concat(m||e," ").concat(w||t)),a.hasValue()){var T=this.getStyle("width"),Q=this.getStyle("height");T.hasValue()&&T.setValue("".concat(e,"px")),Q.hasValue()&&Q.setValue("".concat(t,"px"))}}}class oy extends wi{constructor(){super(...arguments),this.type="rect"}path(e){var t=this.getAttribute("x").getPixels("x"),s=this.getAttribute("y").getPixels("y"),l=this.getStyle("width",!1,!0).getPixels("x"),u=this.getStyle("height",!1,!0).getPixels("y"),p=this.getAttribute("rx"),a=this.getAttribute("ry"),m=p.getPixels("x"),w=a.getPixels("y");if(p.hasValue()&&!a.hasValue()&&(w=m),a.hasValue()&&!p.hasValue()&&(m=w),m=Math.min(m,l/2),w=Math.min(w,u/2),e){var S=4*((Math.sqrt(2)-1)/3);e.beginPath(),u>0&&l>0&&(e.moveTo(t+m,s),e.lineTo(t+l-m,s),e.bezierCurveTo(t+l-m+S*m,s,t+l,s+w-S*w,t+l,s+w),e.lineTo(t+l,s+u-w),e.bezierCurveTo(t+l,s+u-w+S*w,t+l-m+S*m,s+u,t+l-m,s+u),e.lineTo(t+m,s+u),e.bezierCurveTo(t+m-S*m,s+u,t,s+u-w+S*w,t,s+u-w),e.lineTo(t,s+w),e.bezierCurveTo(t,s+w-S*w,t+m-S*m,s,t+m,s),e.closePath())}return new Ga(t,s,t+l,s+u)}getMarkers(){return null}}class c5 extends wi{constructor(){super(...arguments),this.type="circle"}path(e){var t=this.getAttribute("cx").getPixels("x"),s=this.getAttribute("cy").getPixels("y"),l=this.getAttribute("r").getPixels();return e&&l>0&&(e.beginPath(),e.arc(t,s,l,0,Math.PI*2,!1),e.closePath()),new Ga(t-l,s-l,t+l,s+l)}getMarkers(){return null}}class u5 extends wi{constructor(){super(...arguments),this.type="ellipse"}path(e){var t=4*((Math.sqrt(2)-1)/3),s=this.getAttribute("rx").getPixels("x"),l=this.getAttribute("ry").getPixels("y"),u=this.getAttribute("cx").getPixels("x"),p=this.getAttribute("cy").getPixels("y");return e&&s>0&&l>0&&(e.beginPath(),e.moveTo(u+s,p),e.bezierCurveTo(u+s,p+t*l,u+t*s,p+l,u,p+l),e.bezierCurveTo(u-t*s,p+l,u-s,p+t*l,u-s,p),e.bezierCurveTo(u-s,p-t*l,u-t*s,p-l,u,p-l),e.bezierCurveTo(u+t*s,p-l,u+s,p-t*l,u+s,p),e.closePath()),new Ga(u-s,p-l,u+s,p+l)}getMarkers(){return null}}class h5 extends wi{constructor(){super(...arguments),this.type="line"}getPoints(){return[new an(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new an(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(e){var[{x:t,y:s},{x:l,y:u}]=this.getPoints();return e&&(e.beginPath(),e.moveTo(t,s),e.lineTo(l,u)),new Ga(t,s,l,u)}getMarkers(){var[e,t]=this.getPoints(),s=e.angleTo(t);return[[e,s],[t,s]]}}class Ay extends wi{constructor(e,t,s){super(e,t,s),this.type="polyline",this.points=[],this.points=an.parsePath(this.getAttribute("points").getString())}path(e){var{points:t}=this,[{x:s,y:l}]=t,u=new Ga(s,l);return e&&(e.beginPath(),e.moveTo(s,l)),t.forEach(p=>{var{x:a,y:m}=p;u.addPoint(a,m),e&&e.lineTo(a,m)}),u}getMarkers(){var{points:e}=this,t=e.length-1,s=[];return e.forEach((l,u)=>{u!==t&&s.push([l,l.angleTo(e[u+1])])}),s.length>0&&s.push([e[e.length-1],s[s.length-1][1]]),s}}class p5 extends Ay{constructor(){super(...arguments),this.type="polygon"}path(e){var t=super.path(e),[{x:s,y:l}]=this.points;return e&&(e.lineTo(s,l),e.closePath()),t}}class d5 extends Ri{constructor(){super(...arguments),this.type="pattern"}createPattern(e,t,s){var l=this.getStyle("width").getPixels("x",!0),u=this.getStyle("height").getPixels("y",!0),p=new qu(this.document,null);p.attributes.viewBox=new xr(this.document,"viewBox",this.getAttribute("viewBox").getValue()),p.attributes.width=new xr(this.document,"width","".concat(l,"px")),p.attributes.height=new xr(this.document,"height","".concat(u,"px")),p.attributes.transform=new xr(this.document,"transform",this.getAttribute("patternTransform").getValue()),p.children=this.children;var a=this.document.createCanvas(l,u),m=a.getContext("2d"),w=this.getAttribute("x"),S=this.getAttribute("y");w.hasValue()&&S.hasValue()&&m.translate(w.getPixels("x",!0),S.getPixels("y",!0)),s.hasValue()?this.styles["fill-opacity"]=s:Reflect.deleteProperty(this.styles,"fill-opacity");for(var T=-1;T<=1;T++)for(var Q=-1;Q<=1;Q++)m.save(),p.attributes.x=new xr(this.document,"x",T*a.width),p.attributes.y=new xr(this.document,"y",Q*a.height),p.render(m),m.restore();var I=e.createPattern(a,"repeat");return I}}class f5 extends Ri{constructor(){super(...arguments),this.type="marker"}render(e,t,s){if(t){var{x:l,y:u}=t,p=this.getAttribute("orient").getString("auto"),a=this.getAttribute("markerUnits").getString("strokeWidth");e.translate(l,u),p==="auto"&&e.rotate(s),a==="strokeWidth"&&e.scale(e.lineWidth,e.lineWidth),e.save();var m=new qu(this.document,null);m.type=this.type,m.attributes.viewBox=new xr(this.document,"viewBox",this.getAttribute("viewBox").getValue()),m.attributes.refX=new xr(this.document,"refX",this.getAttribute("refX").getValue()),m.attributes.refY=new xr(this.document,"refY",this.getAttribute("refY").getValue()),m.attributes.width=new xr(this.document,"width",this.getAttribute("markerWidth").getValue()),m.attributes.height=new xr(this.document,"height",this.getAttribute("markerHeight").getValue()),m.attributes.overflow=new xr(this.document,"overflow",this.getAttribute("overflow").getValue()),m.attributes.fill=new xr(this.document,"fill",this.getAttribute("fill").getColor("black")),m.attributes.stroke=new xr(this.document,"stroke",this.getAttribute("stroke").getValue("none")),m.children=this.children,m.render(e),e.restore(),a==="strokeWidth"&&e.scale(1/e.lineWidth,1/e.lineWidth),p==="auto"&&e.rotate(-s),e.translate(-l,-u)}}}class g5 extends Ri{constructor(){super(...arguments),this.type="defs"}render(){}}class zf extends Gl{constructor(){super(...arguments),this.type="g"}getBoundingBox(e){var t=new Ga;return this.children.forEach(s=>{t.addBoundingBox(s.getBoundingBox(e))}),t}}class ly extends Ri{constructor(e,t,s){super(e,t,s),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:l,children:u}=this;u.forEach(p=>{p.type==="stop"&&l.push(p)})}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(e,t,s){var l=this;this.getHrefAttribute().hasValue()&&(l=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(l));var{stops:u}=l,p=this.getGradient(e,t);if(!p)return this.addParentOpacity(s,u[u.length-1].color);if(u.forEach(Y=>{p.addColorStop(Y.offset,this.addParentOpacity(s,Y.color))}),this.getAttribute("gradientTransform").hasValue()){var{document:a}=this,{MAX_VIRTUAL_PIXELS:m,viewPort:w}=a.screen,[S]=w.viewPorts,T=new oy(a,null);T.attributes.x=new xr(a,"x",-m/3),T.attributes.y=new xr(a,"y",-m/3),T.attributes.width=new xr(a,"width",m),T.attributes.height=new xr(a,"height",m);var Q=new zf(a,null);Q.attributes.transform=new xr(a,"transform",this.getAttribute("gradientTransform").getValue()),Q.children=[T];var I=new qu(a,null);I.attributes.x=new xr(a,"x",0),I.attributes.y=new xr(a,"y",0),I.attributes.width=new xr(a,"width",S.width),I.attributes.height=new xr(a,"height",S.height),I.children=[Q];var q=a.createCanvas(S.width,S.height),j=q.getContext("2d");return j.fillStyle=p,I.render(j),j.createPattern(q,"no-repeat")}return p}inheritStopContainer(e){this.attributesToInherit.forEach(t=>{!this.getAttribute(t).hasValue()&&e.getAttribute(t).hasValue()&&this.getAttribute(t,!0).setValue(e.getAttribute(t).getValue())})}addParentOpacity(e,t){if(e.hasValue()){var s=new xr(this.document,"color",t);return s.addOpacity(e).getColor()}return t}}class m5 extends ly{constructor(e,t,s){super(e,t,s),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(e,t){var s=this.getGradientUnits()==="objectBoundingBox",l=s?t.getBoundingBox(e):null;if(s&&!l)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var u=s?l.x+l.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),p=s?l.y+l.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),a=s?l.x+l.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),m=s?l.y+l.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return u===a&&p===m?null:e.createLinearGradient(u,p,a,m)}}class y5 extends ly{constructor(e,t,s){super(e,t,s),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(e,t){var s=this.getGradientUnits()==="objectBoundingBox",l=t.getBoundingBox(e);if(s&&!l)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var u=s?l.x+l.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),p=s?l.y+l.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),a=u,m=p;this.getAttribute("fx").hasValue()&&(a=s?l.x+l.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(m=s?l.y+l.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var w=s?(l.width+l.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),S=this.getAttribute("fr").getPixels();return e.createRadialGradient(a,m,S,u,p,w)}}class v5 extends Ri{constructor(e,t,s){super(e,t,s),this.type="stop";var l=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),u=this.getStyle("stop-opacity"),p=this.getStyle("stop-color",!0);p.getString()===""&&p.setValue("#000"),u.hasValue()&&(p=p.addOpacity(u)),this.offset=l,this.color=p.getColor()}}class Hf extends Ri{constructor(e,t,s){super(e,t,s),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,e.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new xr(e,"values",null);var l=this.getAttribute("values");l.hasValue()&&this.values.setValue(l.getString().split(";"))}getProperty(){var e=this.getAttribute("attributeType").getString(),t=this.getAttribute("attributeName").getString();return e==="CSS"?this.parent.getStyle(t,!0):this.parent.getAttribute(t,!0)}calcValue(){var{initialUnits:e}=this,{progress:t,from:s,to:l}=this.getProgress(),u=s.getNumber()+(l.getNumber()-s.getNumber())*t;return e==="%"&&(u*=100),"".concat(u).concat(e)}update(e){var{parent:t}=this,s=this.getProperty();if(this.initialValue||(this.initialValue=s.getString(),this.initialUnits=s.getUnits()),this.duration>this.maxDuration){var l=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(l==="freeze"&&!this.frozen)this.frozen=!0,t.animationFrozen=!0,t.animationFrozenValue=s.getString();else if(l==="remove"&&!this.removed)return this.removed=!0,s.setValue(t.animationFrozen?t.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=e;var u=!1;if(this.begin<this.duration){var p=this.calcValue(),a=this.getAttribute("type");if(a.hasValue()){var m=a.getString();p="".concat(m,"(").concat(p,")")}s.setValue(p),u=!0}return u}getProgress(){var{document:e,values:t}=this,s={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(t.hasValue()){var l=s.progress*(t.getValue().length-1),u=Math.floor(l),p=Math.ceil(l);s.from=new xr(e,"from",parseFloat(t.getValue()[u])),s.to=new xr(e,"to",parseFloat(t.getValue()[p])),s.progress=(l-u)/(p-u)}else s.from=this.from,s.to=this.to;return s}}class _5 extends Hf{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var{progress:e,from:t,to:s}=this.getProgress(),l=new V1(t.getColor()),u=new V1(s.getColor());if(l.ok&&u.ok){var p=l.r+(u.r-l.r)*e,a=l.g+(u.g-l.g)*e,m=l.b+(u.b-l.b)*e;return"rgb(".concat(Math.floor(p),", ").concat(Math.floor(a),", ").concat(Math.floor(m),")")}return this.getAttribute("from").getColor()}}class w5 extends Hf{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:e,from:t,to:s}=this.getProgress(),l=ca(t.getString()),u=ca(s.getString()),p=l.map((a,m)=>{var w=u[m];return a+(w-a)*e}).join(" ");return p}}class b5 extends Ri{constructor(e,t,s){super(e,t,s),this.type="font",this.glyphs={},this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var{definitions:l}=e,{children:u}=this;for(var p of u)switch(p.type){case"font-face":{this.fontFace=p;var a=p.getStyle("font-family");a.hasValue()&&(l[a.getString()]=this);break}case"missing-glyph":this.missingGlyph=p;break;case"glyph":{var m=p;m.arabicForm?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[m.unicode]>"u"&&(this.glyphs[m.unicode]={}),this.glyphs[m.unicode][m.arabicForm]=m):this.glyphs[m.unicode]=m;break}}}render(){}}class x5 extends Ri{constructor(e,t,s){super(e,t,s),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class B5 extends wi{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}}class C5 extends JA{constructor(){super(...arguments),this.type="tref"}getText(){var e=this.getHrefAttribute().getDefinition();if(e){var t=e.children[0];if(t)return t.getText()}return""}}class S5 extends JA{constructor(e,t,s){super(e,t,s),this.type="a";var{childNodes:l}=t,u=l[0],p=l.length>0&&Array.from(l).every(a=>a.nodeType===3);this.hasText=p,this.text=p?this.getTextFromNode(u):""}getText(){return this.text}renderChildren(e){if(this.hasText){super.renderChildren(e);var{document:t,x:s,y:l}=this,{mouse:u}=t.screen,p=new xr(t,"fontSize",Ss.parse(t.ctx.font).fontSize);u.isWorking()&&u.checkBoundingBox(this,new Ga(s,l-p.getPixels("y"),s+this.measureText(e),l))}else if(this.children.length>0){var a=new zf(this.document,null);a.children=this.children,a.parent=this,a.render(e)}}onClick(){var{window:e}=this.document;e&&e.open(this.getHrefAttribute().getString())}onMouseMove(){var e=this.document.ctx;e.canvas.style.cursor="pointer"}}function F5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),t.push.apply(t,s)}return t}function Vf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?F5(Object(t),!0).forEach(function(s){k1(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):F5(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}class E5 extends JA{constructor(e,t,s){super(e,t,s),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);var l=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(l)}getText(){return this.text}path(e){var{dataArray:t}=this;e&&e.beginPath(),t.forEach(s=>{var{type:l,points:u}=s;switch(l){case Gr.LINE_TO:e&&e.lineTo(u[0],u[1]);break;case Gr.MOVE_TO:e&&e.moveTo(u[0],u[1]);break;case Gr.CURVE_TO:e&&e.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5]);break;case Gr.QUAD_TO:e&&e.quadraticCurveTo(u[0],u[1],u[2],u[3]);break;case Gr.ARC:{var[p,a,m,w,S,T,Q,I]=u,q=m>w?m:w,j=m>w?1:m/w,Y=m>w?w/m:1;e&&(e.translate(p,a),e.rotate(Q),e.scale(j,Y),e.arc(0,0,q,S,S+T,!!(1-I)),e.scale(1/j,1/Y),e.rotate(-Q),e.translate(-p,-a));break}case Gr.CLOSE_PATH:e&&e.closePath();break}})}renderChildren(e){this.setTextData(e),e.save();var t=this.parent.getStyle("text-decoration").getString(),s=this.getFontSize(),{glyphInfo:l}=this,u=e.fillStyle;t==="underline"&&e.beginPath(),l.forEach((p,a)=>{var{p0:m,p1:w,rotation:S,text:T}=p;e.save(),e.translate(m.x,m.y),e.rotate(S),e.fillStyle&&e.fillText(T,0,0),e.strokeStyle&&e.strokeText(T,0,0),e.restore(),t==="underline"&&(a===0&&e.moveTo(m.x,m.y+s/8),e.lineTo(w.x,w.y+s/5))}),t==="underline"&&(e.lineWidth=s/20,e.strokeStyle=u,e.stroke(),e.closePath()),e.restore()}getLetterSpacingAt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[e]||0}findSegmentToFitChar(e,t,s,l,u,p,a,m,w){var S=p,T=this.measureText(e,m);m===" "&&t==="justify"&&s<l&&(T+=(l-s)/u),w>-1&&(S+=this.getLetterSpacingAt(w));var Q=this.textHeight/20,I=this.getEquidistantPointOnPath(S,Q,0),q=this.getEquidistantPointOnPath(S+T,Q,0),j={p0:I,p1:q},Y=I&&q?Math.atan2(q.y-I.y,q.x-I.x):0;if(a){var K=Math.cos(Math.PI/2+Y)*a,ne=Math.cos(-Y)*a;j.p0=Vf(Vf({},I),{},{x:I.x+K,y:I.y+ne}),j.p1=Vf(Vf({},q),{},{x:q.x+K,y:q.y+ne})}return S+=T,{offset:S,segment:j,rotation:Y}}measureText(e,t){var{measuresCache:s}=this,l=t||this.getText();if(s.has(l))return s.get(l);var u=this.measureTargetText(e,l);return s.set(l,u),u}setTextData(e){if(!this.glyphInfo){var t=this.getText(),s=t.split(""),l=t.split(" ").length-1,u=this.parent.getAttribute("dx").split().map(Ee=>Ee.getPixels("x")),p=this.parent.getAttribute("dy").getPixels("y"),a=this.parent.getStyle("text-anchor").getString("start"),m=this.getStyle("letter-spacing"),w=this.parent.getStyle("letter-spacing"),S=0;!m.hasValue()||m.getValue()==="inherit"?S=w.getPixels():m.hasValue()&&m.getValue()!=="initial"&&m.getValue()!=="unset"&&(S=m.getPixels());var T=[],Q=t.length;this.letterSpacingCache=T;for(var I=0;I<Q;I++)T.push(typeof u[I]<"u"?u[I]:S);var q=T.reduce((Ee,De,Ne)=>Ne===0?0:Ee+De||0,0),j=this.measureText(e),Y=Math.max(j+q,0);this.textWidth=j,this.textHeight=this.getFontSize(),this.glyphInfo=[];var K=this.getPathLength(),ne=this.getStyle("startOffset").getNumber(0)*K,he=0;(a==="middle"||a==="center")&&(he=-Y/2),(a==="end"||a==="right")&&(he=-Y),he+=ne,s.forEach((Ee,De)=>{var{offset:Ne,segment:Qe,rotation:ge}=this.findSegmentToFitChar(e,a,Y,K,l,he,p,Ee,De);he=Ne,!(!Qe.p0||!Qe.p1)&&this.glyphInfo.push({text:s[De],p0:Qe.p0,p1:Qe.p1,rotation:ge})})}}parsePathData(e){if(this.pathLength=-1,!e)return[];var t=[],{pathParser:s}=e;for(s.reset();!s.isEnd();){var{current:l}=s,u=l?l.x:0,p=l?l.y:0,a=s.next(),m=a.type,w=[];switch(a.type){case Gr.MOVE_TO:this.pathM(s,w);break;case Gr.LINE_TO:m=this.pathL(s,w);break;case Gr.HORIZ_LINE_TO:m=this.pathH(s,w);break;case Gr.VERT_LINE_TO:m=this.pathV(s,w);break;case Gr.CURVE_TO:this.pathC(s,w);break;case Gr.SMOOTH_CURVE_TO:m=this.pathS(s,w);break;case Gr.QUAD_TO:this.pathQ(s,w);break;case Gr.SMOOTH_QUAD_TO:m=this.pathT(s,w);break;case Gr.ARC:w=this.pathA(s);break;case Gr.CLOSE_PATH:wi.pathZ(s);break}a.type!==Gr.CLOSE_PATH?t.push({type:m,points:w,start:{x:u,y:p},pathLength:this.calcLength(u,p,m,w)}):t.push({type:Gr.CLOSE_PATH,points:[],pathLength:0})}return t}pathM(e,t){var{x:s,y:l}=wi.pathM(e).point;t.push(s,l)}pathL(e,t){var{x:s,y:l}=wi.pathL(e).point;return t.push(s,l),Gr.LINE_TO}pathH(e,t){var{x:s,y:l}=wi.pathH(e).point;return t.push(s,l),Gr.LINE_TO}pathV(e,t){var{x:s,y:l}=wi.pathV(e).point;return t.push(s,l),Gr.LINE_TO}pathC(e,t){var{point:s,controlPoint:l,currentPoint:u}=wi.pathC(e);t.push(s.x,s.y,l.x,l.y,u.x,u.y)}pathS(e,t){var{point:s,controlPoint:l,currentPoint:u}=wi.pathS(e);return t.push(s.x,s.y,l.x,l.y,u.x,u.y),Gr.CURVE_TO}pathQ(e,t){var{controlPoint:s,currentPoint:l}=wi.pathQ(e);t.push(s.x,s.y,l.x,l.y)}pathT(e,t){var{controlPoint:s,currentPoint:l}=wi.pathT(e);return t.push(s.x,s.y,l.x,l.y),Gr.QUAD_TO}pathA(e){var{rX:t,rY:s,sweepFlag:l,xAxisRotation:u,centp:p,a1:a,ad:m}=wi.pathA(e);return l===0&&m>0&&(m-=2*Math.PI),l===1&&m<0&&(m+=2*Math.PI),[p.x,p.y,t,s,a,m,u,l]}calcLength(e,t,s,l){var u=0,p=null,a=null,m=0;switch(s){case Gr.LINE_TO:return this.getLineLength(e,t,l[0],l[1]);case Gr.CURVE_TO:for(u=0,p=this.getPointOnCubicBezier(0,e,t,l[0],l[1],l[2],l[3],l[4],l[5]),m=.01;m<=1;m+=.01)a=this.getPointOnCubicBezier(m,e,t,l[0],l[1],l[2],l[3],l[4],l[5]),u+=this.getLineLength(p.x,p.y,a.x,a.y),p=a;return u;case Gr.QUAD_TO:for(u=0,p=this.getPointOnQuadraticBezier(0,e,t,l[0],l[1],l[2],l[3]),m=.01;m<=1;m+=.01)a=this.getPointOnQuadraticBezier(m,e,t,l[0],l[1],l[2],l[3]),u+=this.getLineLength(p.x,p.y,a.x,a.y),p=a;return u;case Gr.ARC:{u=0;var w=l[4],S=l[5],T=l[4]+S,Q=Math.PI/180;if(Math.abs(w-T)<Q&&(Q=Math.abs(w-T)),p=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],w,0),S<0)for(m=w-Q;m>T;m-=Q)a=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],m,0),u+=this.getLineLength(p.x,p.y,a.x,a.y),p=a;else for(m=w+Q;m<T;m+=Q)a=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],m,0),u+=this.getLineLength(p.x,p.y,a.x,a.y),p=a;return a=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],T,0),u+=this.getLineLength(p.x,p.y,a.x,a.y),u}}return 0}getPointOnLine(e,t,s,l,u){var p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:t,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:s,m=(u-s)/(l-t+kc),w=Math.sqrt(e*e/(1+m*m));l<t&&(w*=-1);var S=m*w,T=null;if(l===t)T={x:p,y:a+S};else if((a-s)/(p-t+kc)===m)T={x:p+w,y:a+S};else{var Q=0,I=0,q=this.getLineLength(t,s,l,u);if(q<kc)return null;var j=(p-t)*(l-t)+(a-s)*(u-s);j/=q*q,Q=t+j*(l-t),I=s+j*(u-s);var Y=this.getLineLength(p,a,Q,I),K=Math.sqrt(e*e-Y*Y);w=Math.sqrt(K*K/(1+m*m)),l<t&&(w*=-1),S=m*w,T={x:Q+w,y:I+S}}return T}getPointOnPath(e){var t=this.getPathLength(),s=0,l=null;if(e<-5e-5||e-5e-5>t)return null;var{dataArray:u}=this;for(var p of u){if(p&&(p.pathLength<5e-5||s+p.pathLength+5e-5<e)){s+=p.pathLength;continue}var a=e-s,m=0;switch(p.type){case Gr.LINE_TO:l=this.getPointOnLine(a,p.start.x,p.start.y,p.points[0],p.points[1],p.start.x,p.start.y);break;case Gr.ARC:{var w=p.points[4],S=p.points[5],T=p.points[4]+S;if(m=w+a/p.pathLength*S,S<0&&m<T||S>=0&&m>T)break;l=this.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],m,p.points[6]);break}case Gr.CURVE_TO:m=a/p.pathLength,m>1&&(m=1),l=this.getPointOnCubicBezier(m,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);break;case Gr.QUAD_TO:m=a/p.pathLength,m>1&&(m=1),l=this.getPointOnQuadraticBezier(m,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3]);break}if(l)return l;break}return null}getLineLength(e,t,s,l){return Math.sqrt((s-e)*(s-e)+(l-t)*(l-t))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((e,t)=>t.pathLength>0?e+t.pathLength:e,0)),this.pathLength}getPointOnCubicBezier(e,t,s,l,u,p,a,m,w){var S=m*Z1(e)+p*Y1(e)+l*J1(e)+t*ey(e),T=w*Z1(e)+a*Y1(e)+u*J1(e)+s*ey(e);return{x:S,y:T}}getPointOnQuadraticBezier(e,t,s,l,u,p,a){var m=p*ty(e)+l*ry(e)+t*iy(e),w=a*ty(e)+u*ry(e)+s*iy(e);return{x:m,y:w}}getPointOnEllipticalArc(e,t,s,l,u,p){var a=Math.cos(p),m=Math.sin(p),w={x:s*Math.cos(u),y:l*Math.sin(u)};return{x:e+(w.x*a-w.y*m),y:t+(w.x*m+w.y*a)}}buildEquidistantCache(e,t){var s=this.getPathLength(),l=t||.25,u=e||s/100;if(!this.equidistantCache||this.equidistantCache.step!==u||this.equidistantCache.precision!==l){this.equidistantCache={step:u,precision:l,points:[]};for(var p=0,a=0;a<=s;a+=l){var m=this.getPointOnPath(a),w=this.getPointOnPath(a+l);!m||!w||(p+=this.getLineLength(m.x,m.y,w.x,w.y),p>=u&&(this.equidistantCache.points.push({x:m.x,y:m.y,distance:a}),p-=u))}}}getEquidistantPointOnPath(e,t,s){if(this.buildEquidistantCache(t,s),e<0||e-this.getPathLength()>5e-5)return null;var l=Math.round(e/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[l]||null}}var TR=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class I5 extends Gl{constructor(e,t,s){super(e,t,s),this.type="image",this.loaded=!1;var l=this.getHrefAttribute().getString();if(l){var u=l.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(l);e.images.push(this),u?this.loadSvg(l):this.loadImage(l),this.isSvg=u}}loadImage(e){var t=this;return XA(function*(){try{var s=yield t.document.createImage(e);t.image=s}catch(l){console.error('Error while loading image "'.concat(e,'":'),l)}t.loaded=!0})()}loadSvg(e){var t=this;return XA(function*(){var s=TR.exec(e);if(s){var l=s[5];s[4]==="base64"?t.image=atob(l):t.image=decodeURIComponent(l)}else try{var u=yield t.document.fetch(e),p=yield u.text();t.image=p}catch(a){console.error('Error while loading image "'.concat(e,'":'),a)}t.loaded=!0})()}renderChildren(e){var{document:t,image:s,loaded:l}=this,u=this.getAttribute("x").getPixels("x"),p=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),m=this.getStyle("height").getPixels("y");if(!(!l||!s||!a||!m)){if(e.save(),e.translate(u,p),this.isSvg){var w=t.canvg.forkString(e,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:a,scaleHeight:m});w.document.documentElement.parent=this,w.render()}else{var S=this.image;t.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:a,desiredWidth:S.width,height:m,desiredHeight:S.height}),this.loaded&&(typeof S.complete>"u"||S.complete)&&e.drawImage(S,0,0)}e.restore()}}getBoundingBox(){var e=this.getAttribute("x").getPixels("x"),t=this.getAttribute("y").getPixels("y"),s=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");return new Ga(e,t,e+s,t+l)}}class L5 extends Gl{constructor(){super(...arguments),this.type="symbol"}render(e){}}class T5{constructor(e){this.document=e,this.loaded=!1,e.fonts.push(this)}load(e,t){var s=this;return XA(function*(){try{var{document:l}=s,u=yield l.canvg.parser.load(t),p=u.getElementsByTagName("font");Array.from(p).forEach(a=>{var m=l.createElement(a);l.definitions[e]=m})}catch(a){console.error('Error while loading font "'.concat(t,'":'),a)}s.loaded=!0})()}}class cy extends Ri{constructor(e,t,s){super(e,t,s),this.type="style";var l=Qc(Array.from(t.childNodes).map(p=>p.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")),u=l.split("}");u.forEach(p=>{var a=p.trim();if(a){var m=a.split("{"),w=m[0].split(","),S=m[1].split(";");w.forEach(T=>{var Q=T.trim();if(Q){var I=e.styles[Q]||{};if(S.forEach(Y=>{var K=Y.indexOf(":"),ne=Y.substr(0,K).trim(),he=Y.substr(K+1,Y.length-K).trim();ne&&he&&(I[ne]=new xr(e,ne,he))}),e.styles[Q]=I,e.stylesSpecificity[Q]=JB(Q),Q==="@font-face"){var q=I["font-family"].getString().replace(/"|'/g,""),j=I.src.getString().split(",");j.forEach(Y=>{if(Y.indexOf('format("svg")')>0){var K=$1(Y);K&&new T5(e).load(q,K)}})}}})}})}}cy.parseExternalUrl=$1;class U5 extends Gl{constructor(){super(...arguments),this.type="use"}setContext(e){super.setContext(e);var t=this.getAttribute("x"),s=this.getAttribute("y");t.hasValue()&&e.translate(t.getPixels("x"),0),s.hasValue()&&e.translate(0,s.getPixels("y"))}path(e){var{element:t}=this;t&&t.path(e)}renderChildren(e){var{document:t,element:s}=this;if(s){var l=s;if(s.type==="symbol"&&(l=new qu(t,null),l.attributes.viewBox=new xr(t,"viewBox",s.getAttribute("viewBox").getString()),l.attributes.preserveAspectRatio=new xr(t,"preserveAspectRatio",s.getAttribute("preserveAspectRatio").getString()),l.attributes.overflow=new xr(t,"overflow",s.getAttribute("overflow").getString()),l.children=s.children,s.styles.opacity=new xr(t,"opacity",this.calculateOpacity())),l.type==="svg"){var u=this.getStyle("width",!1,!0),p=this.getStyle("height",!1,!0);u.hasValue()&&(l.attributes.width=new xr(t,"width",u.getString())),p.hasValue()&&(l.attributes.height=new xr(t,"height",p.getString()))}var a=l.parent;l.parent=this,l.render(e),l.parent=a}}getBoundingBox(e){var{element:t}=this;return t?t.getBoundingBox(e):null}elementTransform(){var{document:e,element:t}=this;return jl.fromElement(e,t)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}function jf(n,e,t,s,l,u){return n[t*s*4+e*4+u]}function Gf(n,e,t,s,l,u,p){n[t*s*4+e*4+u]=p}function In(n,e,t){var s=n[e];return s*t}function el(n,e,t,s){return e+Math.cos(n)*t+Math.sin(n)*s}class uy extends Ri{constructor(e,t,s){super(e,t,s),this.type="feColorMatrix";var l=ca(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{var u=l[0];l=[.213+.787*u,.715-.715*u,.072-.072*u,0,0,.213-.213*u,.715+.285*u,.072-.072*u,0,0,.213-.213*u,.715-.715*u,.072+.928*u,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{var p=l[0]*Math.PI/180;l=[el(p,.213,.787,-.213),el(p,.715,-.715,-.715),el(p,.072,-.072,.928),0,0,el(p,.213,-.213,.143),el(p,.715,.285,.14),el(p,.072,-.072,-.283),0,0,el(p,.213,-.213,-.787),el(p,.715,-.715,.715),el(p,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=l,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(e,t,s,l,u){for(var{includeOpacity:p,matrix:a}=this,m=e.getImageData(0,0,l,u),w=0;w<u;w++)for(var S=0;S<l;S++){var T=jf(m.data,S,w,l,u,0),Q=jf(m.data,S,w,l,u,1),I=jf(m.data,S,w,l,u,2),q=jf(m.data,S,w,l,u,3),j=In(a,0,T)+In(a,1,Q)+In(a,2,I)+In(a,3,q)+In(a,4,1),Y=In(a,5,T)+In(a,6,Q)+In(a,7,I)+In(a,8,q)+In(a,9,1),K=In(a,10,T)+In(a,11,Q)+In(a,12,I)+In(a,13,q)+In(a,14,1),ne=In(a,15,T)+In(a,16,Q)+In(a,17,I)+In(a,18,q)+In(a,19,1);p&&(j=0,Y=0,K=0,ne*=q/255),Gf(m.data,S,w,l,u,0,j),Gf(m.data,S,w,l,u,1,Y),Gf(m.data,S,w,l,u,2,K),Gf(m.data,S,w,l,u,3,ne)}e.clearRect(0,0,l,u),e.putImageData(m,0,0)}}class lp extends Ri{constructor(){super(...arguments),this.type="mask"}apply(e,t){var{document:s}=this,l=this.getAttribute("x").getPixels("x"),u=this.getAttribute("y").getPixels("y"),p=this.getStyle("width").getPixels("x"),a=this.getStyle("height").getPixels("y");if(!p&&!a){var m=new Ga;this.children.forEach(q=>{m.addBoundingBox(q.getBoundingBox(e))}),l=Math.floor(m.x1),u=Math.floor(m.y1),p=Math.floor(m.width),a=Math.floor(m.height)}var w=this.removeStyles(t,lp.ignoreStyles),S=s.createCanvas(l+p,u+a),T=S.getContext("2d");s.screen.setDefaults(T),this.renderChildren(T),new uy(s,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(T,0,0,l+p,u+a);var Q=s.createCanvas(l+p,u+a),I=Q.getContext("2d");s.screen.setDefaults(I),t.render(I),I.globalCompositeOperation="destination-in",I.fillStyle=T.createPattern(S,"no-repeat"),I.fillRect(0,0,l+p,u+a),e.fillStyle=I.createPattern(Q,"no-repeat"),e.fillRect(0,0,l+p,u+a),this.restoreStyles(t,w)}render(e){}}lp.ignoreStyles=["mask","transform","clip-path"];var P5=()=>{};class Q5 extends Ri{constructor(){super(...arguments),this.type="clipPath"}apply(e){var{document:t}=this,s=Reflect.getPrototypeOf(e),{beginPath:l,closePath:u}=e;s&&(s.beginPath=P5,s.closePath=P5),Reflect.apply(l,e,[]),this.children.forEach(p=>{if(!(typeof p.path>"u")){var a=typeof p.elementTransform<"u"?p.elementTransform():null;a||(a=jl.fromElement(t,p)),a&&a.apply(e),p.path(e),s&&(s.closePath=u),a&&a.unapply(e)}}),Reflect.apply(u,e,[]),e.clip(),s&&(s.beginPath=l,s.closePath=u)}render(e){}}class cp extends Ri{constructor(){super(...arguments),this.type="filter"}apply(e,t){var{document:s,children:l}=this,u=t.getBoundingBox(e);if(u){var p=0,a=0;l.forEach(K=>{var ne=K.extraFilterDistance||0;p=Math.max(p,ne),a=Math.max(a,ne)});var m=Math.floor(u.width),w=Math.floor(u.height),S=m+2*p,T=w+2*a;if(!(S<1||T<1)){var Q=Math.floor(u.x),I=Math.floor(u.y),q=this.removeStyles(t,cp.ignoreStyles),j=s.createCanvas(S,T),Y=j.getContext("2d");s.screen.setDefaults(Y),Y.translate(-Q+p,-I+a),t.render(Y),l.forEach(K=>{typeof K.apply=="function"&&K.apply(Y,0,0,S,T)}),e.drawImage(j,0,0,S,T,Q-p,I-a,S,T),this.restoreStyles(t,q)}}}render(e){}}cp.ignoreStyles=["filter","transform","clip-path"];class M5 extends Ri{constructor(e,t,s){super(e,t,s),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(e,t,s,l,u){}}class k5 extends Ri{constructor(){super(...arguments),this.type="feMorphology"}apply(e,t,s,l,u){}}class D5 extends Ri{constructor(){super(...arguments),this.type="feComposite"}apply(e,t,s,l,u){}}class N5 extends Ri{constructor(e,t,s){super(e,t,s),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(e,t,s,l,u){var{document:p,blurRadius:a}=this,m=p.window?p.window.document.body:null,w=e.canvas;w.id=p.getUniqueId(),m&&(w.style.display="none",m.appendChild(w)),lR(w,t,s,l,u,a),m&&m.removeChild(w)}}class O5 extends Ri{constructor(){super(...arguments),this.type="title"}}class R5 extends Ri{constructor(){super(...arguments),this.type="desc"}}var UR={svg:qu,rect:oy,circle:c5,ellipse:u5,line:h5,polyline:Ay,polygon:p5,path:wi,pattern:d5,marker:f5,defs:g5,linearGradient:m5,radialGradient:y5,stop:v5,animate:Hf,animateColor:_5,animateTransform:w5,font:b5,"font-face":x5,"missing-glyph":B5,glyph:ay,text:JA,tspan:Ap,tref:C5,a:S5,textPath:E5,image:I5,g:zf,symbol:L5,style:cy,use:U5,mask:lp,clipPath:Q5,filter:cp,feDropShadow:M5,feMorphology:k5,feComposite:D5,feColorMatrix:uy,feGaussianBlur:N5,title:O5,desc:R5};function z5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),t.push.apply(t,s)}return t}function PR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?z5(Object(t),!0).forEach(function(s){k1(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):z5(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function QR(n,e){var t=document.createElement("canvas");return t.width=n,t.height=e,t}function MR(n){return hy.apply(this,arguments)}function hy(){return hy=XA(function*(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=document.createElement("img");return e&&(t.crossOrigin="Anonymous"),new Promise((s,l)=>{t.onload=()=>{s(t)},t.onerror=(u,p,a,m,w)=>{l(w)},t.src=n})}),hy.apply(this,arguments)}class tl{constructor(e){var{rootEmSize:t=12,emSize:s=12,createCanvas:l=tl.createCanvas,createImage:u=tl.createImage,anonymousCrossOrigin:p}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.canvg=e,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=e.screen,this.rootEmSize=t,this.emSize=s,this.createCanvas=l,this.createImage=this.bindCreateImage(u,p),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(e,t){return typeof t=="boolean"?(s,l)=>e(s,typeof l=="boolean"?l:t):e}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:e}=this;return e[e.length-1]}set emSize(e){var{emSizeStack:t}=this;t.push(e)}popEmSize(){var{emSizeStack:e}=this;e.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(e=>e.loaded)}isFontsLoaded(){return this.fonts.every(e=>e.loaded)}createDocumentElement(e){var t=this.createElement(e.documentElement);return t.root=!0,t.addStylesFromStyleDefinition(),this.documentElement=t,t}createElement(e){var t=e.nodeName.replace(/^[^:]+:/,""),s=tl.elementTypes[t];return typeof s<"u"?new s(this,e):new l5(this,e)}createTextNode(e){return new LR(this,e)}setViewBox(e){this.screen.setViewBox(PR({document:this},e))}}tl.createCanvas=QR,tl.createImage=MR,tl.elementTypes=UR;function H5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),t.push.apply(t,s)}return t}function Dc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?H5(Object(t),!0).forEach(function(s){k1(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):H5(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}class Nc{constructor(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.parser=new Rf(s),this.screen=new ap(e,s),this.options=s;var l=new tl(this,s),u=l.createDocumentElement(t);this.document=l,this.documentElement=u}static from(e,t){var s=arguments;return XA(function*(){var l=s.length>2&&s[2]!==void 0?s[2]:{},u=new Rf(l),p=yield u.parse(t);return new Nc(e,p,l)})()}static fromString(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=new Rf(s),u=l.parseFromString(t);return new Nc(e,u,s)}fork(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Nc.from(e,t,Dc(Dc({},this.options),s))}forkString(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Nc.fromString(e,t,Dc(Dc({},this.options),s))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var e=arguments,t=this;return XA(function*(){var s=e.length>0&&e[0]!==void 0?e[0]:{};t.start(Dc({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},s)),yield t.ready(),t.stop()})()}start(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:t,screen:s,options:l}=this;s.start(t,Dc(Dc({enableRedraw:!0},l),e))}stop(){this.screen.stop()}resize(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(e,t,s)}}const kR=Object.freeze(Object.defineProperty({__proto__:null,AElement:S5,AnimateColorElement:_5,AnimateElement:Hf,AnimateTransformElement:w5,BoundingBox:Ga,CB1:Z1,CB2:Y1,CB3:J1,CB4:ey,Canvg:Nc,CircleElement:c5,ClipPathElement:Q5,DefsElement:g5,DescElement:R5,Document:tl,Element:Ri,EllipseElement:u5,FeColorMatrixElement:uy,FeCompositeElement:D5,FeDropShadowElement:M5,FeGaussianBlurElement:N5,FeMorphologyElement:k5,FilterElement:cp,Font:Ss,FontElement:b5,FontFaceElement:x5,GElement:zf,GlyphElement:ay,GradientElement:ly,ImageElement:I5,LineElement:h5,LinearGradientElement:m5,MarkerElement:f5,MaskElement:lp,Matrix:ny,MissingGlyphElement:B5,Mouse:t5,PSEUDO_ZERO:kc,Parser:Rf,PathElement:wi,PathParser:Gr,PatternElement:d5,Point:an,PolygonElement:p5,PolylineElement:Ay,Property:xr,QB1:ty,QB2:ry,QB3:iy,RadialGradientElement:y5,RectElement:oy,RenderedElement:Gl,Rotate:s5,SVGElement:qu,SVGFontLoader:T5,Scale:a5,Screen:ap,Skew:sy,SkewX:o5,SkewY:A5,StopElement:v5,StyleElement:cy,SymbolElement:L5,TRefElement:C5,TSpanElement:Ap,TextElement:JA,TextPathElement:E5,TitleElement:O5,Transform:jl,Translate:n5,UnknownElement:l5,UseElement:U5,ViewPort:e5,compressSpaces:Qc,default:Nc,getSelectorSpecificity:JB,normalizeAttributeName:ZB,normalizeColor:YB,parseExternalUrl:$1,presets:pR,toNumbers:ca,trimLeft:WB,trimRight:XB,vectorMagnitude:W1,vectorsAngle:X1,vectorsRatio:Of},Symbol.toStringTag,{value:"Module"}));eA.CompareMaps=M3,eA.Layers=xs,eA.Map=b3,eA.Styles=VA,eA.Terrains=$p,Object.defineProperty(eA,Symbol.toStringTag,{value:"Module"})});
