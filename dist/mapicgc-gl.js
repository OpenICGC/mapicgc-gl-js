(function(iA,nA){typeof exports=="object"&&typeof module<"u"?nA(exports):typeof define=="function"&&define.amd?define(["exports"],nA):(iA=typeof globalThis<"u"?globalThis:iA||self,nA(iA.mapicgcgl={}))})(this,function(iA){"use strict";var nA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vg(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var rv={exports:{}};(function(i,e){(function(t,s){i.exports=s()})(nA,function(){var t,s,l;function c(a,g){if(!t)t=g;else if(!s)s=g;else{var _="var sharedChunk = {}; ("+t+")(sharedChunk); ("+s+")(sharedChunk);",C={};t(C),l=g(C),typeof window<"u"&&(l.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}c(["exports"],function(a){function g(o,r,A,h){return new(A||(A=Promise))(function(m,w){function B(D){try{U(h.next(D))}catch(V){w(V)}}function E(D){try{U(h.throw(D))}catch(V){w(V)}}function U(D){var V;D.done?m(D.value):(V=D.value,V instanceof A?V:new A(function(W){W(V)})).then(B,E)}U((h=h.apply(o,r||[])).next())})}function _(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var C=L;function L(o,r){this.x=o,this.y=r}L.prototype={clone:function(){return new L(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,A=o.y-this.y;return r*r+A*A},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),A=Math.sin(o),h=A*this.x+r*this.y;return this.x=r*this.x-A*this.y,this.y=h,this},_rotateAround:function(o,r){var A=Math.cos(o),h=Math.sin(o),m=r.y+h*(this.x-r.x)+A*(this.y-r.y);return this.x=r.x+A*(this.x-r.x)-h*(this.y-r.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},L.convert=function(o){return o instanceof L?o:Array.isArray(o)?new L(o[0],o[1]):o};var M=_(C),I=G;function G(o,r,A,h){this.cx=3*o,this.bx=3*(A-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=A,this.p2y=h}G.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var A=o,h=0;h<8;h++){var m=this.sampleCurveX(A)-o;if(Math.abs(m)<r)return A;var w=this.sampleCurveDerivativeX(A);if(Math.abs(w)<1e-6)break;A-=m/w}var B=0,E=1;for(A=o,h=0;h<20&&(m=this.sampleCurveX(A),!(Math.abs(m-o)<r));h++)o>m?B=A:E=A,A=.5*(E-B)+B;return A},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var j=_(I);let Y,q;function ne(){return Y==null&&(Y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Y}function he(){if(q==null&&(q=!1,ne())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let h=0;h<5*5;h++){const m=4*h;r.fillStyle=`rgb(${m},${m+1},${m+2})`,r.fillRect(h%5,Math.floor(h/5),1,1)}const A=r.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&A[h]!==h){q=!0;break}}}return q||!1}function Se(o,r,A,h){const m=new j(o,r,A,h);return function(w){return m.solve(w)}}const Ne=Se(.25,.1,.25,1);function Pe(o,r,A){return Math.min(A,Math.max(r,o))}function Ee(o,r,A){const h=A-r,m=((o-r)%h+h)%h+r;return m===r?A:m}function fe(o){for(var r=arguments.length,A=new Array(r>1?r-1:0),h=1;h<r;h++)A[h-1]=arguments[h];for(const m of A)for(const w in m)o[w]=m[w];return o}let We=1;function Ke(o,r,A){const h={};for(const m in o)h[m]=r.call(A||this,o[m],m,o);return h}function ce(o,r,A){const h={};for(const m in o)r.call(A||this,o[m],m,o)&&(h[m]=o[m]);return h}function Ae(o){return Array.isArray(o)?o.map(Ae):typeof o=="object"&&o?Ke(o,Ae):o}const xe={};function _e(o){xe[o]||(typeof console<"u"&&console.warn(o),xe[o]=!0)}function et(o,r,A){return(A.y-o.y)*(r.x-o.x)>(r.y-o.y)*(A.x-o.x)}function Je(o){let r=0;for(let A,h,m=0,w=o.length,B=w-1;m<w;B=m++)A=o[m],h=o[B],r+=(h.x-A.x)*(A.y+h.y);return r}function rt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Ye=null;function it(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const nt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Bt(o,r,A,h,m){return g(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const w=new VideoFrame(o,{timestamp:0});try{const B=w==null?void 0:w.format;if(!B||!B.startsWith("BGR")&&!B.startsWith("RGB"))throw new Error(`Unrecognized format ${B}`);const E=B.startsWith("BGR"),U=new Uint8ClampedArray(h*m*4);if(yield w.copyTo(U,function(D,V,W,te,ae){const oe=4*Math.max(-V,0),me=(Math.max(0,W)-W)*te*4+oe,Be=4*te,ke=Math.max(0,V),Ze=Math.max(0,W);return{rect:{x:ke,y:Ze,width:Math.min(D.width,V+te)-ke,height:Math.min(D.height,W+ae)-Ze},layout:[{offset:me,stride:Be}]}}(o,r,A,h,m)),E)for(let D=0;D<U.length;D+=4){const V=U[D];U[D]=U[D+2],U[D+2]=V}return U}finally{w.close()}})}let ee,pe,ye,Re;const Ge={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const r=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(o){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.getImageCanvasContext(o).getImageData(-r,-r,o.width+2*r,o.height+2*r)},getImageCanvasContext(o){const r=window.document.createElement("canvas"),A=r.getContext("2d",{willReadFrequently:!0});if(!A)throw new Error("failed to create canvas 2d context");return r.width=o.width,r.height=o.height,A.drawImage(o,0,0,o.width,o.height),A},resolveURL:o=>(ye||(ye=document.createElement("a")),ye.href=o,ye.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Re==null&&(Re=matchMedia("(prefers-reduced-motion: reduce)")),Re.matches)}},tt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class st extends Error{constructor(r,A,h,m){super(`AJAXError: ${A} (${r}): ${h}`),this.status=r,this.statusText=A,this.url=h,this.body=m}}const ot=rt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Ct=o=>tt.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function Et(o,r){const A=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:ot(),signal:A.signal});let m=!1,w=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),w||fetch(h).then(B=>B.ok?(E=>{(o.type==="arrayBuffer"||o.type==="image"?E.arrayBuffer():o.type==="json"?E.json():E.text()).then(U=>{w||(m=!0,r(null,U,E.headers.get("Cache-Control"),E.headers.get("Expires")))}).catch(U=>{w||r(new Error(U.message))})})(B):B.blob().then(E=>r(new st(B.status,B.statusText,o.url,E)))).catch(B=>{B.code!==20&&r(new Error(B.message))}),{cancel:()=>{w=!0,m||A.abort()}}}const zt=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(rt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r);if(!rt())return(Ct(o.url)||Et)(o,r)}if(!(/^file:/.test(A=o.url)||/^file:/.test(ot())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Et(o,r);if(rt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var A;return function(h,m){const w=new XMLHttpRequest;w.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(w.responseType="arraybuffer");for(const B in h.headers)w.setRequestHeader(B,h.headers[B]);return h.type==="json"&&(w.responseType="text",w.setRequestHeader("Accept","application/json")),w.withCredentials=h.credentials==="include",w.onerror=()=>{m(new Error(w.statusText))},w.onload=()=>{if((w.status>=200&&w.status<300||w.status===0)&&w.response!==null){let B=w.response;if(h.type==="json")try{B=JSON.parse(w.response)}catch(E){return m(E)}m(null,B,w.getResponseHeader("Cache-Control"),w.getResponseHeader("Expires"))}else{const B=new Blob([w.response],{type:w.getResponseHeader("Content-Type")});m(new st(w.status,w.statusText,h.url,B))}},w.send(h.body),{cancel:()=>w.abort()}}(o,r)},Vt=function(o,r){return zt(fe(o,{type:"arrayBuffer"}),r)};function Jt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),A=window.location;return r.protocol===A.protocol&&r.host===A.host}function ft(o,r,A){A[o]&&A[o].indexOf(r)!==-1||(A[o]=A[o]||[],A[o].push(r))}function Me(o,r,A){if(A&&A[o]){const h=A[o].indexOf(r);h!==-1&&A[o].splice(h,1)}}class fr{constructor(r){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};fe(this,A),this.type=r}}class Xt extends fr{constructor(r){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super("error",fe({error:r},A))}}class bt{on(r,A){return this._listeners=this._listeners||{},ft(r,A,this._listeners),this}off(r,A){return Me(r,A,this._listeners),Me(r,A,this._oneTimeListeners),this}once(r,A){return A?(this._oneTimeListeners=this._oneTimeListeners||{},ft(r,A,this._oneTimeListeners),this):new Promise(h=>this.once(r,h))}fire(r,A){typeof r=="string"&&(r=new fr(r,A||{}));const h=r.type;if(this.listens(h)){r.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const E of m)E.call(this,r);const w=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const E of w)Me(h,E,this._oneTimeListeners),E.call(this,r);const B=this._eventedParent;B&&(fe(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),B.fire(r))}else r instanceof Xt&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,A){return this._eventedParent=r,this._eventedParentData=A,this}}var ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ut=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Pt(o,r){const A={};for(const h in o)h!=="ref"&&(A[h]=o[h]);return Ut.forEach(h=>{h in r&&(A[h]=r[h])}),A}function Mt(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let A=0;A<o.length;A++)if(!Mt(o[A],r[A]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const A in o)if(!Mt(o[A],r[A]))return!1;return!0}return o===r}const Lt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function hr(o,r,A){A.push({command:Lt.addSource,args:[o,r[o]]})}function wr(o,r,A){r.push({command:Lt.removeSource,args:[o]}),A[o]=!0}function Lr(o,r,A,h){wr(o,A,h),hr(o,r,A)}function qr(o,r,A){let h;for(h in o[A])if(Object.prototype.hasOwnProperty.call(o[A],h)&&h!=="data"&&!Mt(o[A][h],r[A][h]))return!1;for(h in r[A])if(Object.prototype.hasOwnProperty.call(r[A],h)&&h!=="data"&&!Mt(o[A][h],r[A][h]))return!1;return!0}function gr(o,r,A,h,m,w){let B;for(B in r=r||{},o=o||{})Object.prototype.hasOwnProperty.call(o,B)&&(Mt(o[B],r[B])||A.push({command:w,args:[h,B,r[B],m]}));for(B in r)Object.prototype.hasOwnProperty.call(r,B)&&!Object.prototype.hasOwnProperty.call(o,B)&&(Mt(o[B],r[B])||A.push({command:w,args:[h,B,r[B],m]}))}function br(o){return o.id}function Rt(o,r){return o[r.id]=r,o}class vt{constructor(r,A,h,m){this.message=(r?`${r}: `:"")+h,m&&(this.identifier=m),A!=null&&A.__line__&&(this.line=A.__line__)}}function Cr(o){for(var r=arguments.length,A=new Array(r>1?r-1:0),h=1;h<r;h++)A[h-1]=arguments[h];for(const m of A)for(const w in m)o[w]=m[w];return o}class Tr extends Error{constructor(r,A){super(A),this.message=A,this.key=r}}class Dr{constructor(r){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.parent=r,this.bindings={};for(const[h,m]of A)this.bindings[h]=m}concat(r){return new Dr(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Vr={kind:"null"},xt={kind:"number"},$t={kind:"string"},rr={kind:"boolean"},Or={kind:"color"},bi={kind:"object"},Nt={kind:"value"},Kr={kind:"collator"},ue={kind:"formatted"},X={kind:"padding"},ie={kind:"resolvedImage"},le={kind:"variableAnchorOffsetCollection"};function ve(o,r){return{kind:"array",itemType:o,N:r}}function be(o){if(o.kind==="array"){const r=be(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const De=[Vr,xt,$t,rr,Or,ue,bi,ve(Nt),X,ie,le];function Oe(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Oe(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const A of De)if(!Oe(A,r))return null}}return`Expected ${be(o)} but found ${be(r)} instead.`}function Ue(o,r){return r.some(A=>A.kind===o.kind)}function Ve(o,r){return r.some(A=>A==="null"?o===null:A==="array"?Array.isArray(o):A==="object"?o&&!Array.isArray(o)&&typeof o=="object":A===typeof o)}function lt(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const ht=.96422,gt=.82521,nr=4/29,sr=6/29,jt=3*sr*sr,Yt=sr*sr*sr,ur=Math.PI/180,Br=180/Math.PI;function Rr(o){return(o%=360)<0&&(o+=360),o}function Sr(o){let[r,A,h,m]=o,w,B;const E=Qt((.2225045*(r=Te(r))+.7168786*(A=Te(A))+.0606169*(h=Te(h)))/1);r===A&&A===h?w=B=E:(w=Qt((.4360747*r+.3850649*A+.1430804*h)/ht),B=Qt((.0139322*r+.0971045*A+.7141733*h)/gt));const U=116*E-16;return[U<0?0:U,500*(w-E),200*(E-B),m]}function Te(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Qt(o){return o>Yt?Math.pow(o,1/3):o/jt+nr}function yt(o){let[r,A,h,m]=o,w=(r+16)/116,B=isNaN(A)?w:w+A/500,E=isNaN(h)?w:w-h/200;return w=1*Nr(w),B=ht*Nr(B),E=gt*Nr(E),[vr(3.1338561*B-1.6168667*w-.4906146*E),vr(-.9787684*B+1.9161415*w+.033454*E),vr(.0719453*B-.2289914*w+1.4052427*E),m]}function vr(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Nr(o){return o>sr?o*o*o:jt*(o-nr)}function di(o){return parseInt(o.padEnd(2,o),16)/255}function Ii(o,r){return qn(r?o/100:o,0,1)}function qn(o,r,A){return Math.min(Math.max(r,o),A)}function Hi(o){return!o.some(Number.isNaN)}const Wi={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class ii{constructor(r,A,h){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,w=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;this.r=r,this.g=A,this.b=h,this.a=m,w||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[r,A,h,m]))}static parse(r){if(r instanceof ii)return r;if(typeof r!="string")return;const A=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Wi[h];if(m){const[B,E,U]=m;return[B/255,E/255,U/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const B=h.length<6?1:2;let E=1;return[di(h.slice(E,E+=B)),di(h.slice(E,E+=B)),di(h.slice(E,E+=B)),di(h.slice(E,E+B)||"ff")]}if(h.startsWith("rgb")){const B=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(B){const[E,U,D,V,W,te,ae,oe,me,Be,ke,Ze]=B,je=[V||" ",ae||" ",Be].join("");if(je==="  "||je==="  /"||je===",,"||je===",,,"){const Xe=[D,te,me].join(""),At=Xe==="%%%"?100:Xe===""?255:0;if(At){const mt=[qn(+U/At,0,1),qn(+W/At,0,1),qn(+oe/At,0,1),ke?Ii(+ke,Ze):1];if(Hi(mt))return mt}}return}}const w=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[B,E,U,D,V,W,te,ae,oe]=w,me=[U||" ",V||" ",te].join("");if(me==="  "||me==="  /"||me===",,"||me===",,,"){const Be=[+E,qn(+D,0,100),qn(+W,0,100),ae?Ii(+ae,oe):1];if(Hi(Be))return function(ke){let[Ze,je,Xe,At]=ke;function mt(Kt){const ir=(Kt+Ze/30)%12,qt=je*Math.min(Xe,1-Xe);return Xe-qt*Math.max(-1,Math.min(ir-3,9-ir,1))}return Ze=Rr(Ze),je/=100,Xe/=100,[mt(0),mt(8),mt(4),At]}(Be)}}}(r);return A?new ii(...A,!1):void 0}get rgb(){const{r,g:A,b:h,a:m}=this,w=m||1/0;return this.overwriteGetter("rgb",[r/w,A/w,h/w,m])}get hcl(){return this.overwriteGetter("hcl",function(r){const[A,h,m,w]=Sr(r),B=Math.sqrt(h*h+m*m);return[Math.round(1e4*B)?Rr(Math.atan2(m,h)*Br):NaN,B,A,w]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Sr(this.rgb))}overwriteGetter(r,A){return Object.defineProperty(this,r,{value:A}),A}toString(){const[r,A,h,m]=this.rgb;return`rgba(${[r,A,h].map(w=>Math.round(255*w)).join(",")},${m})`}}ii.black=new ii(0,0,0,1),ii.white=new ii(1,1,1,1),ii.transparent=new ii(0,0,0,0),ii.red=new ii(1,0,0,1);class Co{constructor(r,A,h){this.sensitivity=r?A?"variant":"case":A?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,A){return this.collator.compare(r,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class mA{constructor(r,A,h,m,w){this.text=r,this.image=A,this.scale=h,this.fontStack=m,this.textColor=w}}class Zi{constructor(r){this.sections=r}static fromString(r){return new Zi([new mA(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Zi?r:Zi.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class Dn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Dn)return r;if(typeof r=="number")return new Dn([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const A of r)if(typeof A!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Dn(r)}}toString(){return JSON.stringify(this.values)}}const yA=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class $n{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof $n)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let A=0;A<r.length;A+=2){const h=r[A],m=r[A+1];if(typeof h!="string"||!yA.has(h)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new $n(r)}}toString(){return JSON.stringify(this.values)}}class Wr{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Wr({name:r,available:!1}):null}}function So(o,r,A,h){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof A=="number"&&A>=0&&A<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,r,A,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,r,A,h]:[o,r,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ta(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof ii||o instanceof Co||o instanceof Zi||o instanceof Dn||o instanceof $n||o instanceof Wr)return!0;if(Array.isArray(o)){for(const r of o)if(!Ta(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!Ta(o[r]))return!1;return!0}return!1}function mi(o){if(o===null)return Vr;if(typeof o=="string")return $t;if(typeof o=="boolean")return rr;if(typeof o=="number")return xt;if(o instanceof ii)return Or;if(o instanceof Co)return Kr;if(o instanceof Zi)return ue;if(o instanceof Dn)return X;if(o instanceof $n)return le;if(o instanceof Wr)return ie;if(Array.isArray(o)){const r=o.length;let A;for(const h of o){const m=mi(h);if(A){if(A===m)continue;A=Nt;break}A=m}return ve(A||Nt,r)}return bi}function Zr(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof ii||o instanceof Zi||o instanceof Dn||o instanceof $n||o instanceof Wr?o.toString():JSON.stringify(o)}class Ua{constructor(r,A){this.type=r,this.value=A}static parse(r,A){if(r.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Ta(r[1]))return A.error("invalid value");const h=r[1];let m=mi(h);const w=A.expectedType;return m.kind!=="array"||m.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(m=w),new Ua(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ci{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const Pa={string:$t,number:xt,boolean:rr,object:bi};class Ci{constructor(r,A){this.type=r,this.args=A}static parse(r,A){if(r.length<2)return A.error("Expected at least one argument.");let h,m=1;const w=r[0];if(w==="array"){let E,U;if(r.length>2){const D=r[1];if(typeof D!="string"||!(D in Pa)||D==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);E=Pa[D],m++}else E=Nt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return A.error('The length argument to "array" must be a positive integer literal',2);U=r[2],m++}h=ve(E,U)}else{if(!Pa[w])throw new Error(`Types doesn't contain name = ${w}`);h=Pa[w]}const B=[];for(;m<r.length;m++){const E=A.parse(r[m],m,Nt);if(!E)return null;B.push(E)}return new Ci(h,B)}evaluate(r){for(let A=0;A<this.args.length;A++){const h=this.args[A].evaluate(r);if(!Oe(this.type,mi(h)))return h;if(A===this.args.length-1)throw new ci(`Expected value to be of type ${be(this.type)}, but found ${be(mi(h))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Eo={"to-boolean":rr,"to-color":Or,"to-number":xt,"to-string":$t};class Zs{constructor(r,A){this.type=r,this.args=A}static parse(r,A){if(r.length<2)return A.error("Expected at least one argument.");const h=r[0];if(!Eo[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&r.length!==2)return A.error("Expected one argument.");const m=Eo[h],w=[];for(let B=1;B<r.length;B++){const E=A.parse(r[B],B,Nt);if(!E)return null;w.push(E)}return new Zs(m,w)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let A,h;for(const m of this.args){if(A=m.evaluate(r),h=null,A instanceof ii)return A;if(typeof A=="string"){const w=r.parseColor(A);if(w)return w}else if(Array.isArray(A)&&(h=A.length<3||A.length>4?`Invalid rbga value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:So(A[0],A[1],A[2],A[3]),!h))return new ii(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new ci(h||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"padding":{let A;for(const h of this.args){A=h.evaluate(r);const m=Dn.parse(A);if(m)return m}throw new ci(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"variableAnchorOffsetCollection":{let A;for(const h of this.args){A=h.evaluate(r);const m=$n.parse(A);if(m)return m}throw new ci(`Could not parse variableAnchorOffsetCollection from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"number":{let A=null;for(const h of this.args){if(A=h.evaluate(r),A===null)return 0;const m=Number(A);if(!isNaN(m))return m}throw new ci(`Could not convert ${JSON.stringify(A)} to number.`)}case"formatted":return Zi.fromString(Zr(this.args[0].evaluate(r)));case"resolvedImage":return Wr.fromString(Zr(this.args[0].evaluate(r)));default:return Zr(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Zl=["Unknown","Point","LineString","Polygon"];class vA{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Zl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let A=this._parseColorCache[r];return A||(A=this._parseColorCache[r]=ii.parse(r)),A}}class _A{constructor(r,A){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],m=arguments.length>3?arguments[3]:void 0,w=arguments.length>4&&arguments[4]!==void 0?arguments[4]:new Dr,B=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[];this.registry=r,this.path=h,this.key=h.map(E=>`[${E}]`).join(""),this.scope=w,this.errors=B,this.expectedType=m,this._isConstant=A}parse(r,A,h,m){let w=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return A?this.concat(A,h,m)._parse(r,w):this._parse(r,w)}_parse(r,A){function h(m,w,B){return B==="assert"?new Ci(w,[m]):B==="coerce"?new Zs(w,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=r[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[m];if(w){let B=w.parse(r,this);if(!B)return null;if(this.expectedType){const E=this.expectedType,U=B.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||U.kind!=="value")if(E.kind!=="color"&&E.kind!=="formatted"&&E.kind!=="resolvedImage"||U.kind!=="value"&&U.kind!=="string")if(E.kind!=="padding"||U.kind!=="value"&&U.kind!=="number"&&U.kind!=="array")if(E.kind!=="variableAnchorOffsetCollection"||U.kind!=="value"&&U.kind!=="array"){if(this.checkSubtype(E,U))return null}else B=h(B,E,A.typeAnnotation||"coerce");else B=h(B,E,A.typeAnnotation||"coerce");else B=h(B,E,A.typeAnnotation||"coerce");else B=h(B,E,A.typeAnnotation||"assert")}if(!(B instanceof Ua)&&B.type.kind!=="resolvedImage"&&this._isConstant(B)){const E=new vA;try{B=new Ua(B.type,B.evaluate(E))}catch(U){return this.error(U.message),null}}return B}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,A,h){const m=typeof r=="number"?this.path.concat(r):this.path,w=h?this.scope.concat(h):this.scope;return new _A(this.registry,this._isConstant,m,A||null,w,this.errors)}error(r){for(var A=arguments.length,h=new Array(A>1?A-1:0),m=1;m<A;m++)h[m-1]=arguments[m];const w=`${this.key}${h.map(B=>`[${B}]`).join("")}`;this.errors.push(new Tr(w,r))}checkSubtype(r,A){const h=Oe(r,A);return h&&this.error(h),h}}class Fo{constructor(r,A,h){this.type=Kr,this.locale=h,this.caseSensitive=r,this.diacriticSensitive=A}static parse(r,A){if(r.length!==2)return A.error("Expected one argument.");const h=r[1];if(typeof h!="object"||Array.isArray(h))return A.error("Collator options argument must be an object.");const m=A.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,rr);if(!m)return null;const w=A.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,rr);if(!w)return null;let B=null;return h.locale&&(B=A.parse(h.locale,1,$t),!B)?null:new Fo(m,w,B)}evaluate(r){return new Co(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const pa=8192;function Io(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function Lo(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function Xl(o,r){const A=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(A*m*pa),Math.round(h*m*pa)]}function Vc(o,r,A){const h=o[0]-r[0],m=o[1]-r[1],w=o[0]-A[0],B=o[1]-A[1];return h*B-w*m==0&&h*w<=0&&m*B<=0}function Xs(o,r){let A=!1;for(let B=0,E=r.length;B<E;B++){const U=r[B];for(let D=0,V=U.length;D<V-1;D++){if(Vc(o,U[D],U[D+1]))return!1;(m=U[D])[1]>(h=o)[1]!=(w=U[D+1])[1]>h[1]&&h[0]<(w[0]-m[0])*(h[1]-m[1])/(w[1]-m[1])+m[0]&&(A=!A)}}var h,m,w;return A}function Wa(o,r){for(let A=0;A<r.length;A++)if(Xs(o,r[A]))return!0;return!1}function To(o,r,A,h){const m=h[0]-A[0],w=h[1]-A[1],B=(o[0]-A[0])*w-m*(o[1]-A[1]),E=(r[0]-A[0])*w-m*(r[1]-A[1]);return B>0&&E<0||B<0&&E>0}function Yl(o,r,A){for(const D of A)for(let V=0;V<D.length-1;++V)if((E=[(B=D[V+1])[0]-(w=D[V])[0],B[1]-w[1]])[0]*(U=[(m=r)[0]-(h=o)[0],m[1]-h[1]])[1]-E[1]*U[0]!=0&&To(h,m,w,B)&&To(w,B,h,m))return!0;var h,m,w,B,E,U;return!1}function gn(o,r){for(let A=0;A<o.length;++A)if(!Xs(o[A],r))return!1;for(let A=0;A<o.length-1;++A)if(Yl(o[A],o[A+1],r))return!1;return!0}function Jl(o,r){for(let A=0;A<r.length;A++)if(gn(o,r[A]))return!0;return!1}function Uo(o,r,A){const h=[];for(let m=0;m<o.length;m++){const w=[];for(let B=0;B<o[m].length;B++){const E=Xl(o[m][B],A);Io(r,E),w.push(E)}h.push(w)}return h}function Ur(o,r,A){const h=[];for(let m=0;m<o.length;m++){const w=Uo(o[m],r,A);h.push(w)}return h}function ec(o,r,A,h){if(o[0]<A[0]||o[0]>A[2]){const m=.5*h;let w=o[0]-A[0]>m?-h:A[0]-o[0]>m?h:0;w===0&&(w=o[0]-A[2]>m?-h:A[2]-o[0]>m?h:0),o[0]+=w}Io(r,o)}function al(o,r,A,h){const m=Math.pow(2,h.z)*pa,w=[h.x*pa,h.y*pa],B=[];for(const E of o)for(const U of E){const D=[U.x+w[0],U.y+w[1]];ec(D,r,A,m),B.push(D)}return B}function Fs(o,r,A,h){const m=Math.pow(2,h.z)*pa,w=[h.x*pa,h.y*pa],B=[];for(const U of o){const D=[];for(const V of U){const W=[V.x+w[0],V.y+w[1]];Io(r,W),D.push(W)}B.push(D)}if(r[2]-r[0]<=m/2){(E=r)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const U of B)for(const D of U)ec(D,r,A,m)}var E;return B}class da{constructor(r,A){this.type=rr,this.geojson=r,this.geometries=A}static parse(r,A){if(r.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Ta(r[1])){const h=r[1];if(h.type==="FeatureCollection")for(let m=0;m<h.features.length;++m){const w=h.features[m].geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new da(h,h.features[m].geometry)}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new da(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new da(h,h)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(A,h){const m=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],B=A.canonicalID();if(h.type==="Polygon"){const E=Uo(h.coordinates,w,B),U=al(A.geometry(),m,w,B);if(!Lo(m,w))return!1;for(const D of U)if(!Xs(D,E))return!1}if(h.type==="MultiPolygon"){const E=Ur(h.coordinates,w,B),U=al(A.geometry(),m,w,B);if(!Lo(m,w))return!1;for(const D of U)if(!Wa(D,E))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(A,h){const m=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],B=A.canonicalID();if(h.type==="Polygon"){const E=Uo(h.coordinates,w,B),U=Fs(A.geometry(),m,w,B);if(!Lo(m,w))return!1;for(const D of U)if(!gn(D,E))return!1}if(h.type==="MultiPolygon"){const E=Ur(h.coordinates,w,B),U=Fs(A.geometry(),m,w,B);if(!Lo(m,w))return!1;for(const D of U)if(!Jl(D,E))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Po{constructor(r,A){this.type=A.type,this.name=r,this.boundExpression=A}static parse(r,A){if(r.length!==2||typeof r[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const h=r[1];return A.scope.has(h)?new Po(h,A.scope.get(h)):A.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class mn{constructor(r,A,h,m){this.name=r,this.type=A,this._evaluate=h,this.args=m}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,A){const h=r[0],m=mn.definitions[h];if(!m)return A.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(m)?m[0]:m.type,B=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,E=B.filter(D=>{let[V]=D;return!Array.isArray(V)||V.length===r.length-1});let U=null;for(const[D,V]of E){U=new _A(A.registry,Za,A.path,null,A.scope);const W=[];let te=!1;for(let ae=1;ae<r.length;ae++){const oe=r[ae],me=Array.isArray(D)?D[ae-1]:D.type,Be=U.parse(oe,1+W.length,me);if(!Be){te=!0;break}W.push(Be)}if(!te)if(Array.isArray(D)&&D.length!==W.length)U.error(`Expected ${D.length} arguments, but found ${W.length} instead.`);else{for(let ae=0;ae<W.length;ae++){const oe=Array.isArray(D)?D[ae]:D.type,me=W[ae];U.concat(ae+1).checkSubtype(oe,me.type)}if(U.errors.length===0)return new mn(h,w,V,W)}}if(E.length===1)A.errors.push(...U.errors);else{const D=(E.length?E:B).map(W=>{let[te]=W;return ae=te,Array.isArray(ae)?`(${ae.map(be).join(", ")})`:`(${be(ae.type)}...)`;var ae}).join(" | "),V=[];for(let W=1;W<r.length;W++){const te=A.parse(r[W],1+V.length);if(!te)return null;V.push(be(te.type))}A.error(`Expected arguments of type ${D}, but found (${V.join(", ")}) instead.`)}return null}static register(r,A){mn.definitions=A;for(const h in A)r[h]=mn}}function Za(o){if(o instanceof Po)return Za(o.boundExpression);if(o instanceof mn&&o.name==="error"||o instanceof Fo||o instanceof da)return!1;const r=o instanceof Zs||o instanceof Ci;let A=!0;return o.eachChild(h=>{A=r?A&&Za(h):A&&h instanceof Ua}),!!A&&wA(o)&&bA(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function wA(o){if(o instanceof mn&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof da)return!1;let r=!0;return o.eachChild(A=>{r&&!wA(A)&&(r=!1)}),r}function Mo(o){if(o instanceof mn&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(A=>{r&&!Mo(A)&&(r=!1)}),r}function bA(o,r){if(o instanceof mn&&r.indexOf(o.name)>=0)return!1;let A=!0;return o.eachChild(h=>{A&&!bA(h,r)&&(A=!1)}),A}function fa(o,r){const A=o.length-1;let h,m,w=0,B=A,E=0;for(;w<=B;)if(E=Math.floor((w+B)/2),h=o[E],m=o[E+1],h<=r){if(E===A||r<m)return E;w=E+1}else{if(!(h>r))throw new ci("Input is not a number.");B=E-1}return 0}class Kn{constructor(r,A,h){this.type=r,this.input=A,this.labels=[],this.outputs=[];for(const[m,w]of h)this.labels.push(m),this.outputs.push(w)}static parse(r,A){if(r.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return A.error("Expected an even number of arguments.");const h=A.parse(r[1],1,xt);if(!h)return null;const m=[];let w=null;A.expectedType&&A.expectedType.kind!=="value"&&(w=A.expectedType);for(let B=1;B<r.length;B+=2){const E=B===1?-1/0:r[B],U=r[B+1],D=B,V=B+1;if(typeof E!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(m.length&&m[m.length-1][0]>=E)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const W=A.parse(U,V,w);if(!W)return null;w=w||W.type,m.push([E,W])}return new Kn(w,h,m)}evaluate(r){const A=this.labels,h=this.outputs;if(A.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=A[0])return h[0].evaluate(r);const w=A.length;return m>=A[w-1]?h[w-1].evaluate(r):h[fa(A,m)].evaluate(r)}eachChild(r){r(this.input);for(const A of this.outputs)r(A)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Qr(o,r,A){return o+A*(r-o)}function xA(o,r,A){return o.map((h,m)=>Qr(h,r[m],A))}const Xi={number:Qr,color:function(o,r,A){switch(arguments.length>3&&arguments[3]!==void 0?arguments[3]:"rgb"){case"rgb":{const[m,w,B,E]=xA(o.rgb,r.rgb,A);return new ii(m,w,B,E,!1)}case"hcl":{const[m,w,B,E]=o.hcl,[U,D,V,W]=r.hcl;let te,ae;if(isNaN(m)||isNaN(U))isNaN(m)?isNaN(U)?te=NaN:(te=U,B!==1&&B!==0||(ae=D)):(te=m,V!==1&&V!==0||(ae=w));else{let Ze=U-m;U>m&&Ze>180?Ze-=360:U<m&&m-U>180&&(Ze+=360),te=m+A*Ze}const[oe,me,Be,ke]=function(Ze){let[je,Xe,At,mt]=Ze;return je=isNaN(je)?0:je*ur,yt([At,Math.cos(je)*Xe,Math.sin(je)*Xe,mt])}([te,ae??Qr(w,D,A),Qr(B,V,A),Qr(E,W,A)]);return new ii(oe,me,Be,ke,!1)}case"lab":{const[m,w,B,E]=yt(xA(o.lab,r.lab,A));return new ii(m,w,B,E,!1)}}},array:xA,padding:function(o,r,A){return new Dn(xA(o.values,r.values,A))},variableAnchorOffsetCollection:function(o,r,A){const h=o.values,m=r.values;if(h.length!==m.length)throw new ci(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const w=[];for(let B=0;B<h.length;B+=2){if(h[B]!==m[B])throw new ci(`Cannot interpolate values containing mismatched anchors. from[${B}]: ${h[B]}, to[${B}]: ${m[B]}`);w.push(h[B]);const[E,U]=h[B+1],[D,V]=m[B+1];w.push([Qr(E,D,A),Qr(U,V,A)])}return new $n(w)}};class yn{constructor(r,A,h,m,w){this.type=r,this.operator=A,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[B,E]of w)this.labels.push(B),this.outputs.push(E)}static interpolationFactor(r,A,h,m){let w=0;if(r.name==="exponential")w=Xa(A,r.base,h,m);else if(r.name==="linear")w=Xa(A,1,h,m);else if(r.name==="cubic-bezier"){const B=r.controlPoints;w=new j(B[0],B[1],B[2],B[3]).solve(Xa(A,1,h,m))}return w}static parse(r,A){let[h,m,w,...B]=r;if(!Array.isArray(m)||m.length===0)return A.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const D=m[1];if(typeof D!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:D}}else{if(m[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const D=m.slice(1);if(D.length!==4||D.some(V=>typeof V!="number"||V<0||V>1))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:D}}}if(r.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(w=A.parse(w,2,xt),!w)return null;const E=[];let U=null;h==="interpolate-hcl"||h==="interpolate-lab"?U=Or:A.expectedType&&A.expectedType.kind!=="value"&&(U=A.expectedType);for(let D=0;D<B.length;D+=2){const V=B[D],W=B[D+1],te=D+3,ae=D+4;if(typeof V!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',te);if(E.length&&E[E.length-1][0]>=V)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',te);const oe=A.parse(W,ae,U);if(!oe)return null;U=U||oe.type,E.push([V,oe])}return lt(U,xt)||lt(U,Or)||lt(U,X)||lt(U,le)||lt(U,ve(xt))?new yn(U,h,m,w,E):A.error(`Type ${be(U)} is not interpolatable.`)}evaluate(r){const A=this.labels,h=this.outputs;if(A.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=A[0])return h[0].evaluate(r);const w=A.length;if(m>=A[w-1])return h[w-1].evaluate(r);const B=fa(A,m),E=yn.interpolationFactor(this.interpolation,m,A[B],A[B+1]),U=h[B].evaluate(r),D=h[B+1].evaluate(r);switch(this.operator){case"interpolate":return Xi[this.type.kind](U,D,E);case"interpolate-hcl":return Xi.color(U,D,E,"hcl");case"interpolate-lab":return Xi.color(U,D,E,"lab")}}eachChild(r){r(this.input);for(const A of this.outputs)r(A)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Xa(o,r,A,h){const m=h-A,w=o-A;return m===0?0:r===1?w/m:(Math.pow(r,w)-1)/(Math.pow(r,m)-1)}class Qo{constructor(r,A){this.type=r,this.args=A}static parse(r,A){if(r.length<2)return A.error("Expectected at least one argument.");let h=null;const m=A.expectedType;m&&m.kind!=="value"&&(h=m);const w=[];for(const E of r.slice(1)){const U=A.parse(E,1+w.length,h,void 0,{typeAnnotation:"omit"});if(!U)return null;h=h||U.type,w.push(U)}if(!h)throw new Error("No output type");const B=m&&w.some(E=>Oe(m,E.type));return new Qo(B?Nt:h,w)}evaluate(r){let A,h=null,m=0;for(const w of this.args)if(m++,h=w.evaluate(r),h&&h instanceof Wr&&!h.available&&(A||(A=h.name),h=null,m===this.args.length&&(h=A)),h!==null)break;return h}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class ko{constructor(r,A){this.type=A.type,this.bindings=[].concat(r),this.result=A}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const A of this.bindings)r(A[1]);r(this.result)}static parse(r,A){if(r.length<4)return A.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const h=[];for(let w=1;w<r.length-1;w+=2){const B=r[w];if(typeof B!="string")return A.error(`Expected string, but found ${typeof B} instead.`,w);if(/[^a-zA-Z0-9_]/.test(B))return A.error("Variable names must contain only alphanumeric characters or '_'.",w);const E=A.parse(r[w+1],w+1);if(!E)return null;h.push([B,E])}const m=A.parse(r[r.length-1],r.length-1,A.expectedType,h);return m?new ko(h,m):null}outputDefined(){return this.result.outputDefined()}}class BA{constructor(r,A,h){this.type=r,this.index=A,this.input=h}static parse(r,A){if(r.length!==3)return A.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=A.parse(r[1],1,xt),m=A.parse(r[2],2,ve(A.expectedType||Nt));return h&&m?new BA(m.type.itemType,h,m):null}evaluate(r){const A=this.index.evaluate(r),h=this.input.evaluate(r);if(A<0)throw new ci(`Array index out of bounds: ${A} < 0.`);if(A>=h.length)throw new ci(`Array index out of bounds: ${A} > ${h.length-1}.`);if(A!==Math.floor(A))throw new ci(`Array index must be an integer, but found ${A} instead.`);return h[A]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class CA{constructor(r,A){this.type=rr,this.needle=r,this.haystack=A}static parse(r,A){if(r.length!==3)return A.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=A.parse(r[1],1,Nt),m=A.parse(r[2],2,Nt);return h&&m?Ue(h.type,[rr,$t,xt,Vr,Nt])?new CA(h,m):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${be(h.type)} instead`):null}evaluate(r){const A=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!h)return!1;if(!Ve(A,["boolean","string","number","null"]))throw new ci(`Expected first argument to be of type boolean, string, number or null, but found ${be(mi(A))} instead.`);if(!Ve(h,["string","array"]))throw new ci(`Expected second argument to be of type array or string, but found ${be(mi(h))} instead.`);return h.indexOf(A)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Is{constructor(r,A,h){this.type=xt,this.needle=r,this.haystack=A,this.fromIndex=h}static parse(r,A){if(r.length<=2||r.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=A.parse(r[1],1,Nt),m=A.parse(r[2],2,Nt);if(!h||!m)return null;if(!Ue(h.type,[rr,$t,xt,Vr,Nt]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${be(h.type)} instead`);if(r.length===4){const w=A.parse(r[3],3,xt);return w?new Is(h,m,w):null}return new Is(h,m)}evaluate(r){const A=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!Ve(A,["boolean","string","number","null"]))throw new ci(`Expected first argument to be of type boolean, string, number or null, but found ${be(mi(A))} instead.`);if(!Ve(h,["string","array"]))throw new ci(`Expected second argument to be of type array or string, but found ${be(mi(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(r);return h.indexOf(A,m)}return h.indexOf(A)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class ga{constructor(r,A,h,m,w,B){this.inputType=r,this.type=A,this.input=h,this.cases=m,this.outputs=w,this.otherwise=B}static parse(r,A){if(r.length<5)return A.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return A.error("Expected an even number of arguments.");let h,m;A.expectedType&&A.expectedType.kind!=="value"&&(m=A.expectedType);const w={},B=[];for(let D=2;D<r.length-1;D+=2){let V=r[D];const W=r[D+1];Array.isArray(V)||(V=[V]);const te=A.concat(D);if(V.length===0)return te.error("Expected at least one branch label.");for(const oe of V){if(typeof oe!="number"&&typeof oe!="string")return te.error("Branch labels must be numbers or strings.");if(typeof oe=="number"&&Math.abs(oe)>Number.MAX_SAFE_INTEGER)return te.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof oe=="number"&&Math.floor(oe)!==oe)return te.error("Numeric branch labels must be integer values.");if(h){if(te.checkSubtype(h,mi(oe)))return null}else h=mi(oe);if(w[String(oe)]!==void 0)return te.error("Branch labels must be unique.");w[String(oe)]=B.length}const ae=A.parse(W,D,m);if(!ae)return null;m=m||ae.type,B.push(ae)}const E=A.parse(r[1],1,Nt);if(!E)return null;const U=A.parse(r[r.length-1],r.length-1,m);return U?E.type.kind!=="value"&&A.concat(1).checkSubtype(h,E.type)?null:new ga(h,m,E,w,B,U):null}evaluate(r){const A=this.input.evaluate(r);return(mi(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class ol{constructor(r,A,h){this.type=r,this.branches=A,this.otherwise=h}static parse(r,A){if(r.length<4)return A.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return A.error("Expected an odd number of arguments.");let h;A.expectedType&&A.expectedType.kind!=="value"&&(h=A.expectedType);const m=[];for(let B=1;B<r.length-1;B+=2){const E=A.parse(r[B],B,rr);if(!E)return null;const U=A.parse(r[B+1],B+1,h);if(!U)return null;m.push([E,U]),h=h||U.type}const w=A.parse(r[r.length-1],r.length-1,h);if(!w)return null;if(!h)throw new Error("Can't infer output type");return new ol(h,m,w)}evaluate(r){for(const[A,h]of this.branches)if(A.evaluate(r))return h.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[A,h]of this.branches)r(A),r(h);r(this.otherwise)}outputDefined(){return this.branches.every(r=>{let[A,h]=r;return h.outputDefined()})&&this.otherwise.outputDefined()}}class Ys{constructor(r,A,h,m){this.type=r,this.input=A,this.beginIndex=h,this.endIndex=m}static parse(r,A){if(r.length<=2||r.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=A.parse(r[1],1,Nt),m=A.parse(r[2],2,xt);if(!h||!m)return null;if(!Ue(h.type,[ve(Nt),$t,Nt]))return A.error(`Expected first argument to be of type array or string, but found ${be(h.type)} instead`);if(r.length===4){const w=A.parse(r[3],3,xt);return w?new Ys(h.type,h,m,w):null}return new Ys(h.type,h,m)}evaluate(r){const A=this.input.evaluate(r),h=this.beginIndex.evaluate(r);if(!Ve(A,["string","array"]))throw new ci(`Expected first argument to be of type array or string, but found ${be(mi(A))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(r);return A.slice(h,m)}return A.slice(h)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Ls(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function SA(o,r,A,h){return h.compare(r,A)===0}function Ts(o,r,A){const h=o!=="=="&&o!=="!=";return class w4{constructor(w,B,E){this.type=rr,this.lhs=w,this.rhs=B,this.collator=E,this.hasUntypedArgument=w.type.kind==="value"||B.type.kind==="value"}static parse(w,B){if(w.length!==3&&w.length!==4)return B.error("Expected two or three arguments.");const E=w[0];let U=B.parse(w[1],1,Nt);if(!U)return null;if(!Ls(E,U.type))return B.concat(1).error(`"${E}" comparisons are not supported for type '${be(U.type)}'.`);let D=B.parse(w[2],2,Nt);if(!D)return null;if(!Ls(E,D.type))return B.concat(2).error(`"${E}" comparisons are not supported for type '${be(D.type)}'.`);if(U.type.kind!==D.type.kind&&U.type.kind!=="value"&&D.type.kind!=="value")return B.error(`Cannot compare types '${be(U.type)}' and '${be(D.type)}'.`);h&&(U.type.kind==="value"&&D.type.kind!=="value"?U=new Ci(D.type,[U]):U.type.kind!=="value"&&D.type.kind==="value"&&(D=new Ci(U.type,[D])));let V=null;if(w.length===4){if(U.type.kind!=="string"&&D.type.kind!=="string"&&U.type.kind!=="value"&&D.type.kind!=="value")return B.error("Cannot use collator to compare non-string types.");if(V=B.parse(w[3],3,Kr),!V)return null}return new w4(U,D,V)}evaluate(w){const B=this.lhs.evaluate(w),E=this.rhs.evaluate(w);if(h&&this.hasUntypedArgument){const U=mi(B),D=mi(E);if(U.kind!==D.kind||U.kind!=="string"&&U.kind!=="number")throw new ci(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${U.kind}, ${D.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const U=mi(B),D=mi(E);if(U.kind!=="string"||D.kind!=="string")return r(w,B,E)}return this.collator?A(w,B,E,this.collator.evaluate(w)):r(w,B,E)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}const jc=Ts("==",function(o,r,A){return r===A},SA),EA=Ts("!=",function(o,r,A){return r!==A},function(o,r,A,h){return!SA(0,r,A,h)}),Gc=Ts("<",function(o,r,A){return r<A},function(o,r,A,h){return h.compare(r,A)<0}),Al=Ts(">",function(o,r,A){return r>A},function(o,r,A,h){return h.compare(r,A)>0}),ll=Ts("<=",function(o,r,A){return r<=A},function(o,r,A,h){return h.compare(r,A)<=0}),tc=Ts(">=",function(o,r,A){return r>=A},function(o,r,A,h){return h.compare(r,A)>=0});class Ya{constructor(r,A,h,m,w){this.type=$t,this.number=r,this.locale=A,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=w}static parse(r,A){if(r.length!==3)return A.error("Expected two arguments.");const h=A.parse(r[1],1,xt);if(!h)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return A.error("NumberFormat options argument must be an object.");let w=null;if(m.locale&&(w=A.parse(m.locale,1,$t),!w))return null;let B=null;if(m.currency&&(B=A.parse(m.currency,1,$t),!B))return null;let E=null;if(m["min-fraction-digits"]&&(E=A.parse(m["min-fraction-digits"],1,xt),!E))return null;let U=null;return m["max-fraction-digits"]&&(U=A.parse(m["max-fraction-digits"],1,xt),!U)?null:new Ya(h,w,B,E,U)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Ja{constructor(r){this.type=ue,this.sections=r}static parse(r,A){if(r.length<2)return A.error("Expected at least one argument.");const h=r[1];if(!Array.isArray(h)&&typeof h=="object")return A.error("First argument must be an image or text section.");const m=[];let w=!1;for(let B=1;B<=r.length-1;++B){const E=r[B];if(w&&typeof E=="object"&&!Array.isArray(E)){w=!1;let U=null;if(E["font-scale"]&&(U=A.parse(E["font-scale"],1,xt),!U))return null;let D=null;if(E["text-font"]&&(D=A.parse(E["text-font"],1,ve($t)),!D))return null;let V=null;if(E["text-color"]&&(V=A.parse(E["text-color"],1,Or),!V))return null;const W=m[m.length-1];W.scale=U,W.font=D,W.textColor=V}else{const U=A.parse(r[B],1,Nt);if(!U)return null;const D=U.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,m.push({content:U,scale:null,font:null,textColor:null})}}return new Ja(m)}evaluate(r){return new Zi(this.sections.map(A=>{const h=A.content.evaluate(r);return mi(h)===ie?new mA("",h,null,null,null):new mA(Zr(h),null,A.scale?A.scale.evaluate(r):null,A.font?A.font.evaluate(r).join(","):null,A.textColor?A.textColor.evaluate(r):null)}))}eachChild(r){for(const A of this.sections)r(A.content),A.scale&&r(A.scale),A.font&&r(A.font),A.textColor&&r(A.textColor)}outputDefined(){return!1}}class Do{constructor(r){this.type=ie,this.input=r}static parse(r,A){if(r.length!==2)return A.error("Expected two arguments.");const h=A.parse(r[1],1,$t);return h?new Do(h):A.error("No image name provided.")}evaluate(r){const A=this.input.evaluate(r),h=Wr.fromString(A);return h&&r.availableImages&&(h.available=r.availableImages.indexOf(A)>-1),h}eachChild(r){r(this.input)}outputDefined(){return!1}}class FA{constructor(r){this.type=xt,this.input=r}static parse(r,A){if(r.length!==2)return A.error(`Expected 1 argument, but found ${r.length-1} instead.`);const h=A.parse(r[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${be(h.type)} instead.`):new FA(h):null}evaluate(r){const A=this.input.evaluate(r);if(typeof A=="string"||Array.isArray(A))return A.length;throw new ci(`Expected value to be of type string or array, but found ${be(mi(A))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const eo={"==":jc,"!=":EA,">":Al,"<":Gc,">=":tc,"<=":ll,array:Ci,at:BA,boolean:Ci,case:ol,coalesce:Qo,collator:Fo,format:Ja,image:Do,in:CA,"index-of":Is,interpolate:yn,"interpolate-hcl":yn,"interpolate-lab":yn,length:FA,let:ko,literal:Ua,match:ga,number:Ci,"number-format":Ya,object:Ci,slice:Ys,step:Kn,string:Ci,"to-boolean":Zs,"to-color":Zs,"to-number":Zs,"to-string":Zs,var:Po,within:da};function No(o,r){let[A,h,m,w]=r;A=A.evaluate(o),h=h.evaluate(o),m=m.evaluate(o);const B=w?w.evaluate(o):1,E=So(A,h,m,B);if(E)throw new ci(E);return new ii(A/255,h/255,m/255,B,!1)}function to(o,r){return o in r}function Oo(o,r){const A=r[o];return A===void 0?null:A}function Wn(o){return{type:o}}function IA(o){return{result:"success",value:o}}function P(o){return{result:"error",value:o}}function J(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Ce(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function qe(o){return!!o.expression&&o.expression.interpolated}function $e(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function ct(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Tt(o){return o}function wt(o,r){const A=r.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",m=h||!(h||o.property!==void 0),w=o.type||(qe(r)?"exponential":"interval");if(A||r.type==="padding"){const V=A?ii.parse:Dn.parse;(o=Cr({},o)).stops&&(o.stops=o.stops.map(W=>[W[0],V(W[1])])),o.default=V(o.default?o.default:r.default)}if(o.colorSpace&&(B=o.colorSpace)!=="rgb"&&B!=="hcl"&&B!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var B;let E,U,D;if(w==="exponential")E=$r;else if(w==="interval")E=cr;else if(w==="categorical"){E=ar,U=Object.create(null);for(const V of o.stops)U[V[0]]=V[1];D=typeof o.stops[0][0]}else{if(w!=="identity")throw new Error(`Unknown function type "${w}"`);E=Li}if(h){const V={},W=[];for(let oe=0;oe<o.stops.length;oe++){const me=o.stops[oe],Be=me[0].zoom;V[Be]===void 0&&(V[Be]={zoom:Be,type:o.type,property:o.property,default:o.default,stops:[]},W.push(Be)),V[Be].stops.push([me[0].value,me[1]])}const te=[];for(const oe of W)te.push([V[oe].zoom,wt(V[oe],r)]);const ae={name:"linear"};return{kind:"composite",interpolationType:ae,interpolationFactor:yn.interpolationFactor.bind(void 0,ae),zoomStops:te.map(oe=>oe[0]),evaluate:(oe,me)=>{let{zoom:Be}=oe;return $r({stops:te,base:o.base},r,Be).evaluate(Be,me)}}}if(m){const V=w==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:yn.interpolationFactor.bind(void 0,V),zoomStops:o.stops.map(W=>W[0]),evaluate:W=>{let{zoom:te}=W;return E(o,r,te,U,D)}}}return{kind:"source",evaluate(V,W){const te=W&&W.properties?W.properties[o.property]:void 0;return te===void 0?mr(o.default,r.default):E(o,r,te,U,D)}}}function mr(o,r,A){return o!==void 0?o:r!==void 0?r:A!==void 0?A:void 0}function ar(o,r,A,h,m){return mr(typeof A===m?h[A]:void 0,o.default,r.default)}function cr(o,r,A){if($e(A)!=="number")return mr(o.default,r.default);const h=o.stops.length;if(h===1||A<=o.stops[0][0])return o.stops[0][1];if(A>=o.stops[h-1][0])return o.stops[h-1][1];const m=fa(o.stops.map(w=>w[0]),A);return o.stops[m][1]}function $r(o,r,A){const h=o.base!==void 0?o.base:1;if($e(A)!=="number")return mr(o.default,r.default);const m=o.stops.length;if(m===1||A<=o.stops[0][0])return o.stops[0][1];if(A>=o.stops[m-1][0])return o.stops[m-1][1];const w=fa(o.stops.map(V=>V[0]),A),B=function(V,W,te,ae){const oe=ae-te,me=V-te;return oe===0?0:W===1?me/oe:(Math.pow(W,me)-1)/(Math.pow(W,oe)-1)}(A,h,o.stops[w][0],o.stops[w+1][0]),E=o.stops[w][1],U=o.stops[w+1][1],D=Xi[r.type]||Tt;return typeof E.evaluate=="function"?{evaluate(){for(var V=arguments.length,W=new Array(V),te=0;te<V;te++)W[te]=arguments[te];const ae=E.evaluate.apply(void 0,W),oe=U.evaluate.apply(void 0,W);if(ae!==void 0&&oe!==void 0)return D(ae,oe,B,o.colorSpace)}}:D(E,U,B,o.colorSpace)}function Li(o,r,A){switch(r.type){case"color":A=ii.parse(A);break;case"formatted":A=Zi.fromString(A.toString());break;case"resolvedImage":A=Wr.fromString(A.toString());break;case"padding":A=Dn.parse(A);break;default:$e(A)===r.type||r.type==="enum"&&r.values[A]||(A=void 0)}return mr(A,o.default,r.default)}mn.register(eo,{error:[{kind:"error"},[$t],(o,r)=>{let[A]=r;throw new ci(A.evaluate(o))}],typeof:[$t,[Nt],(o,r)=>{let[A]=r;return be(mi(A.evaluate(o)))}],"to-rgba":[ve(xt,4),[Or],(o,r)=>{let[A]=r;const[h,m,w,B]=A.evaluate(o).rgb;return[255*h,255*m,255*w,B]}],rgb:[Or,[xt,xt,xt],No],rgba:[Or,[xt,xt,xt,xt],No],has:{type:rr,overloads:[[[$t],(o,r)=>{let[A]=r;return to(A.evaluate(o),o.properties())}],[[$t,bi],(o,r)=>{let[A,h]=r;return to(A.evaluate(o),h.evaluate(o))}]]},get:{type:Nt,overloads:[[[$t],(o,r)=>{let[A]=r;return Oo(A.evaluate(o),o.properties())}],[[$t,bi],(o,r)=>{let[A,h]=r;return Oo(A.evaluate(o),h.evaluate(o))}]]},"feature-state":[Nt,[$t],(o,r)=>{let[A]=r;return Oo(A.evaluate(o),o.featureState||{})}],properties:[bi,[],o=>o.properties()],"geometry-type":[$t,[],o=>o.geometryType()],id:[Nt,[],o=>o.id()],zoom:[xt,[],o=>o.globals.zoom],"heatmap-density":[xt,[],o=>o.globals.heatmapDensity||0],"line-progress":[xt,[],o=>o.globals.lineProgress||0],accumulated:[Nt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[xt,Wn(xt),(o,r)=>{let A=0;for(const h of r)A+=h.evaluate(o);return A}],"*":[xt,Wn(xt),(o,r)=>{let A=1;for(const h of r)A*=h.evaluate(o);return A}],"-":{type:xt,overloads:[[[xt,xt],(o,r)=>{let[A,h]=r;return A.evaluate(o)-h.evaluate(o)}],[[xt],(o,r)=>{let[A]=r;return-A.evaluate(o)}]]},"/":[xt,[xt,xt],(o,r)=>{let[A,h]=r;return A.evaluate(o)/h.evaluate(o)}],"%":[xt,[xt,xt],(o,r)=>{let[A,h]=r;return A.evaluate(o)%h.evaluate(o)}],ln2:[xt,[],()=>Math.LN2],pi:[xt,[],()=>Math.PI],e:[xt,[],()=>Math.E],"^":[xt,[xt,xt],(o,r)=>{let[A,h]=r;return Math.pow(A.evaluate(o),h.evaluate(o))}],sqrt:[xt,[xt],(o,r)=>{let[A]=r;return Math.sqrt(A.evaluate(o))}],log10:[xt,[xt],(o,r)=>{let[A]=r;return Math.log(A.evaluate(o))/Math.LN10}],ln:[xt,[xt],(o,r)=>{let[A]=r;return Math.log(A.evaluate(o))}],log2:[xt,[xt],(o,r)=>{let[A]=r;return Math.log(A.evaluate(o))/Math.LN2}],sin:[xt,[xt],(o,r)=>{let[A]=r;return Math.sin(A.evaluate(o))}],cos:[xt,[xt],(o,r)=>{let[A]=r;return Math.cos(A.evaluate(o))}],tan:[xt,[xt],(o,r)=>{let[A]=r;return Math.tan(A.evaluate(o))}],asin:[xt,[xt],(o,r)=>{let[A]=r;return Math.asin(A.evaluate(o))}],acos:[xt,[xt],(o,r)=>{let[A]=r;return Math.acos(A.evaluate(o))}],atan:[xt,[xt],(o,r)=>{let[A]=r;return Math.atan(A.evaluate(o))}],min:[xt,Wn(xt),(o,r)=>Math.min(...r.map(A=>A.evaluate(o)))],max:[xt,Wn(xt),(o,r)=>Math.max(...r.map(A=>A.evaluate(o)))],abs:[xt,[xt],(o,r)=>{let[A]=r;return Math.abs(A.evaluate(o))}],round:[xt,[xt],(o,r)=>{let[A]=r;const h=A.evaluate(o);return h<0?-Math.round(-h):Math.round(h)}],floor:[xt,[xt],(o,r)=>{let[A]=r;return Math.floor(A.evaluate(o))}],ceil:[xt,[xt],(o,r)=>{let[A]=r;return Math.ceil(A.evaluate(o))}],"filter-==":[rr,[$t,Nt],(o,r)=>{let[A,h]=r;return o.properties()[A.value]===h.value}],"filter-id-==":[rr,[Nt],(o,r)=>{let[A]=r;return o.id()===A.value}],"filter-type-==":[rr,[$t],(o,r)=>{let[A]=r;return o.geometryType()===A.value}],"filter-<":[rr,[$t,Nt],(o,r)=>{let[A,h]=r;const m=o.properties()[A.value],w=h.value;return typeof m==typeof w&&m<w}],"filter-id-<":[rr,[Nt],(o,r)=>{let[A]=r;const h=o.id(),m=A.value;return typeof h==typeof m&&h<m}],"filter->":[rr,[$t,Nt],(o,r)=>{let[A,h]=r;const m=o.properties()[A.value],w=h.value;return typeof m==typeof w&&m>w}],"filter-id->":[rr,[Nt],(o,r)=>{let[A]=r;const h=o.id(),m=A.value;return typeof h==typeof m&&h>m}],"filter-<=":[rr,[$t,Nt],(o,r)=>{let[A,h]=r;const m=o.properties()[A.value],w=h.value;return typeof m==typeof w&&m<=w}],"filter-id-<=":[rr,[Nt],(o,r)=>{let[A]=r;const h=o.id(),m=A.value;return typeof h==typeof m&&h<=m}],"filter->=":[rr,[$t,Nt],(o,r)=>{let[A,h]=r;const m=o.properties()[A.value],w=h.value;return typeof m==typeof w&&m>=w}],"filter-id->=":[rr,[Nt],(o,r)=>{let[A]=r;const h=o.id(),m=A.value;return typeof h==typeof m&&h>=m}],"filter-has":[rr,[Nt],(o,r)=>{let[A]=r;return A.value in o.properties()}],"filter-has-id":[rr,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[rr,[ve($t)],(o,r)=>{let[A]=r;return A.value.indexOf(o.geometryType())>=0}],"filter-id-in":[rr,[ve(Nt)],(o,r)=>{let[A]=r;return A.value.indexOf(o.id())>=0}],"filter-in-small":[rr,[$t,ve(Nt)],(o,r)=>{let[A,h]=r;return h.value.indexOf(o.properties()[A.value])>=0}],"filter-in-large":[rr,[$t,ve(Nt)],(o,r)=>{let[A,h]=r;return function(m,w,B,E){for(;B<=E;){const U=B+E>>1;if(w[U]===m)return!0;w[U]>m?E=U-1:B=U+1}return!1}(o.properties()[A.value],h.value,0,h.value.length-1)}],all:{type:rr,overloads:[[[rr,rr],(o,r)=>{let[A,h]=r;return A.evaluate(o)&&h.evaluate(o)}],[Wn(rr),(o,r)=>{for(const A of r)if(!A.evaluate(o))return!1;return!0}]]},any:{type:rr,overloads:[[[rr,rr],(o,r)=>{let[A,h]=r;return A.evaluate(o)||h.evaluate(o)}],[Wn(rr),(o,r)=>{for(const A of r)if(A.evaluate(o))return!0;return!1}]]},"!":[rr,[rr],(o,r)=>{let[A]=r;return!A.evaluate(o)}],"is-supported-script":[rr,[$t],(o,r)=>{let[A]=r;const h=o.globals&&o.globals.isSupportedScript;return!h||h(A.evaluate(o))}],upcase:[$t,[$t],(o,r)=>{let[A]=r;return A.evaluate(o).toUpperCase()}],downcase:[$t,[$t],(o,r)=>{let[A]=r;return A.evaluate(o).toLowerCase()}],concat:[$t,Wn(Nt),(o,r)=>r.map(A=>Zr(A.evaluate(o))).join("")],"resolved-locale":[$t,[Kr],(o,r)=>{let[A]=r;return A.evaluate(o).resolvedLocale()}]});class ki{constructor(r,A){var h;this.expression=r,this._warningHistory={},this._evaluator=new vA,this._defaultValue=A?(h=A).type==="color"&&ct(h.default)?new ii(0,0,0,0):h.type==="color"?ii.parse(h.default)||null:h.type==="padding"?Dn.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?$n.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=A&&A.type==="enum"?A.values:null}evaluateWithoutErrorHandling(r,A,h,m,w,B){return this._evaluator.globals=r,this._evaluator.feature=A,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=B,this.expression.evaluate(this._evaluator)}evaluate(r,A,h,m,w,B){this._evaluator.globals=r,this._evaluator.feature=A||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=B||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new ci(`Expected value to be one of ${Object.keys(this._enumValues).map(U=>JSON.stringify(U)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function Di(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in eo}function Yi(o,r){const A=new _A(eo,Za,[],r?function(m){const w={color:Or,string:$t,number:xt,enum:$t,boolean:rr,formatted:ue,padding:X,resolvedImage:ie,variableAnchorOffsetCollection:le};return m.type==="array"?ve(w[m.value]||Nt,m.length):w[m.type]}(r):void 0),h=A.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?IA(new ki(h,r)):P(A.errors)}class qi{constructor(r,A){this.kind=r,this._styleExpression=A,this.isStateDependent=r!=="constant"&&!Mo(A.expression)}evaluateWithoutErrorHandling(r,A,h,m,w,B){return this._styleExpression.evaluateWithoutErrorHandling(r,A,h,m,w,B)}evaluate(r,A,h,m,w,B){return this._styleExpression.evaluate(r,A,h,m,w,B)}}class Zn{constructor(r,A,h,m){this.kind=r,this.zoomStops=h,this._styleExpression=A,this.isStateDependent=r!=="camera"&&!Mo(A.expression),this.interpolationType=m}evaluateWithoutErrorHandling(r,A,h,m,w,B){return this._styleExpression.evaluateWithoutErrorHandling(r,A,h,m,w,B)}evaluate(r,A,h,m,w,B){return this._styleExpression.evaluate(r,A,h,m,w,B)}interpolationFactor(r,A,h){return this.interpolationType?yn.interpolationFactor(this.interpolationType,r,A,h):0}}function Xn(o,r){const A=Yi(o,r);if(A.result==="error")return A;const h=A.value.expression,m=wA(h);if(!m&&!J(r))return P([new Tr("","data expressions not supported")]);const w=bA(h,["zoom"]);if(!w&&!Ce(r))return P([new Tr("","zoom expressions not supported")]);const B=ro(h);return B||w?B instanceof Tr?P([B]):B instanceof yn&&!qe(r)?P([new Tr("",'"interpolate" expressions cannot be used with this property')]):IA(B?new Zn(m?"camera":"composite",A.value,B.labels,B instanceof yn?B.interpolation:void 0):new qi(m?"constant":"source",A.value)):P([new Tr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class As{constructor(r,A){this._parameters=r,this._specification=A,Cr(this,wt(this._parameters,this._specification))}static deserialize(r){return new As(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function ro(o){let r=null;if(o instanceof ko)r=ro(o.result);else if(o instanceof Qo){for(const A of o.args)if(r=ro(A),r)break}else(o instanceof Kn||o instanceof yn)&&o.input instanceof mn&&o.input.name==="zoom"&&(r=o);return r instanceof Tr||o.eachChild(A=>{const h=ro(A);h instanceof Tr?r=h:!r&&h?r=new Tr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&h&&r!==h&&(r=new Tr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Ma(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!Ma(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const cl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function io(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Ma(o)||(o=Qa(o));const r=Yi(o,cl);if(r.result==="error")throw new Error(r.value.map(A=>`${A.key}: ${A.message}`).join(", "));return{filter:(A,h,m)=>r.value.evaluate(A,h,{},m),needGeometry:LA(o)}}function ul(o,r){return o<r?-1:o>r?1:0}function LA(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(LA(o[r]))return!0;return!1}function Qa(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?Ln(o[1],o[2],"=="):r==="!="?ma(Ln(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Ln(o[1],o[2],r):r==="any"?(A=o.slice(1),["any"].concat(A.map(Qa))):r==="all"?["all"].concat(o.slice(1).map(Qa)):r==="none"?["all"].concat(o.slice(1).map(Qa).map(ma)):r==="in"?Ro(o[1],o.slice(2)):r==="!in"?ma(Ro(o[1],o.slice(2))):r==="has"?zo(o[1]):r==="!has"?ma(zo(o[1])):r!=="within"||o;var A}function Ln(o,r,A){switch(o){case"$type":return[`filter-type-${A}`,r];case"$id":return[`filter-id-${A}`,r];default:return[`filter-${A}`,o,r]}}function Ro(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(A=>typeof A!=typeof r[0])?["filter-in-large",o,["literal",r.sort(ul)]]:["filter-in-small",o,["literal",r]]}}function zo(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function ma(o){return["!",o]}function no(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let m="[";for(const w of o)m+=`${no(w)},`;return`${m}]`}const A=Object.keys(o).sort();let h="{";for(let m=0;m<A.length;m++)h+=`${JSON.stringify(A[m])}:${no(o[A[m]])},`;return`${h}}`}function vn(o){let r="";for(const A of Ut)r+=`/${no(o[A])}`;return r}function rc(o){const r=o.value;return r?[new vt(o.key,r,"constants have been deprecated as of v8")]:[]}function yi(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function ya(o){if(Array.isArray(o))return o.map(ya);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const A in o)r[A]=ya(o[A]);return r}return yi(o)}function Ti(o){const r=o.key,A=o.value,h=o.valueSpec||{},m=o.objectElementValidators||{},w=o.style,B=o.styleSpec,E=o.validateSpec;let U=[];const D=$e(A);if(D!=="object")return[new vt(r,A,`object expected, ${D} found`)];for(const V in A){const W=V.split(".")[0],te=h[W]||h["*"];let ae;if(m[W])ae=m[W];else if(h[W])ae=E;else if(m["*"])ae=m["*"];else{if(!h["*"]){U.push(new vt(r,A[V],`unknown property "${V}"`));continue}ae=E}U=U.concat(ae({key:(r&&`${r}.`)+V,value:A[V],valueSpec:te,style:w,styleSpec:B,object:A,objectKey:V,validateSpec:E},A))}for(const V in h)m[V]||h[V].required&&h[V].default===void 0&&A[V]===void 0&&U.push(new vt(r,A,`missing required property "${V}"`));return U}function va(o){const r=o.value,A=o.valueSpec,h=o.style,m=o.styleSpec,w=o.key,B=o.arrayElementValidator||o.validateSpec;if($e(r)!=="array")return[new vt(w,r,`array expected, ${$e(r)} found`)];if(A.length&&r.length!==A.length)return[new vt(w,r,`array length ${A.length} expected, length ${r.length} found`)];if(A["min-length"]&&r.length<A["min-length"])return[new vt(w,r,`array length at least ${A["min-length"]} expected, length ${r.length} found`)];let E={type:A.value,values:A.values};m.$version<7&&(E.function=A.function),$e(A.value)==="object"&&(E=A.value);let U=[];for(let D=0;D<r.length;D++)U=U.concat(B({array:r,arrayIndex:D,value:r[D],valueSpec:E,validateSpec:o.validateSpec,style:h,styleSpec:m,key:`${w}[${D}]`}));return U}function Ho(o){const r=o.key,A=o.value,h=o.valueSpec;let m=$e(A);return m==="number"&&A!=A&&(m="NaN"),m!=="number"?[new vt(r,A,`number expected, ${m} found`)]:"minimum"in h&&A<h.minimum?[new vt(r,A,`${A} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&A>h.maximum?[new vt(r,A,`${A} is greater than the maximum value ${h.maximum}`)]:[]}function TA(o){const r=o.valueSpec,A=yi(o.value.type);let h,m,w,B={};const E=A!=="categorical"&&o.value.property===void 0,U=!E,D=$e(o.value.stops)==="array"&&$e(o.value.stops[0])==="array"&&$e(o.value.stops[0][0])==="object",V=Ti({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(ae){if(A==="identity")return[new vt(ae.key,ae.value,'identity function may not have a "stops" property')];let oe=[];const me=ae.value;return oe=oe.concat(va({key:ae.key,value:me,valueSpec:ae.valueSpec,validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec,arrayElementValidator:W})),$e(me)==="array"&&me.length===0&&oe.push(new vt(ae.key,me,"array must have at least one stop")),oe},default:function(ae){return ae.validateSpec({key:ae.key,value:ae.value,valueSpec:r,validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec})}}});return A==="identity"&&E&&V.push(new vt(o.key,o.value,'missing required property "property"')),A==="identity"||o.value.stops||V.push(new vt(o.key,o.value,'missing required property "stops"')),A==="exponential"&&o.valueSpec.expression&&!qe(o.valueSpec)&&V.push(new vt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(U&&!J(o.valueSpec)?V.push(new vt(o.key,o.value,"property functions not supported")):E&&!Ce(o.valueSpec)&&V.push(new vt(o.key,o.value,"zoom functions not supported"))),A!=="categorical"&&!D||o.value.property!==void 0||V.push(new vt(o.key,o.value,'"property" property is required')),V;function W(ae){let oe=[];const me=ae.value,Be=ae.key;if($e(me)!=="array")return[new vt(Be,me,`array expected, ${$e(me)} found`)];if(me.length!==2)return[new vt(Be,me,`array length 2 expected, length ${me.length} found`)];if(D){if($e(me[0])!=="object")return[new vt(Be,me,`object expected, ${$e(me[0])} found`)];if(me[0].zoom===void 0)return[new vt(Be,me,"object stop key must have zoom")];if(me[0].value===void 0)return[new vt(Be,me,"object stop key must have value")];if(w&&w>yi(me[0].zoom))return[new vt(Be,me[0].zoom,"stop zoom values must appear in ascending order")];yi(me[0].zoom)!==w&&(w=yi(me[0].zoom),m=void 0,B={}),oe=oe.concat(Ti({key:`${Be}[0]`,value:me[0],valueSpec:{zoom:{}},validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec,objectElementValidators:{zoom:Ho,value:te}}))}else oe=oe.concat(te({key:`${Be}[0]`,value:me[0],valueSpec:{},validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec},me));return Di(ya(me[1]))?oe.concat([new vt(`${Be}[1]`,me[1],"expressions are not allowed in function stops.")]):oe.concat(ae.validateSpec({key:`${Be}[1]`,value:me[1],valueSpec:r,validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec}))}function te(ae,oe){const me=$e(ae.value),Be=yi(ae.value),ke=ae.value!==null?ae.value:oe;if(h){if(me!==h)return[new vt(ae.key,ke,`${me} stop domain type must match previous stop domain type ${h}`)]}else h=me;if(me!=="number"&&me!=="string"&&me!=="boolean")return[new vt(ae.key,ke,"stop domain value must be a number, string, or boolean")];if(me!=="number"&&A!=="categorical"){let Ze=`number expected, ${me} found`;return J(r)&&A===void 0&&(Ze+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vt(ae.key,ke,Ze)]}return A!=="categorical"||me!=="number"||isFinite(Be)&&Math.floor(Be)===Be?A!=="categorical"&&me==="number"&&m!==void 0&&Be<m?[new vt(ae.key,ke,"stop domain values must appear in ascending order")]:(m=Be,A==="categorical"&&Be in B?[new vt(ae.key,ke,"stop domain values must be unique")]:(B[Be]=!0,[])):[new vt(ae.key,ke,`integer expected, found ${Be}`)]}}function Yn(o){const r=(o.expressionContext==="property"?Xn:Yi)(ya(o.value),o.valueSpec);if(r.result==="error")return r.value.map(h=>new vt(`${o.key}${h.key}`,o.value,h.message));const A=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!A.outputDefined())return[new vt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Mo(A))return[new vt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Mo(A))return[new vt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!bA(A,["zoom","feature-state"]))return[new vt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!wA(A))return[new vt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Tn(o){const r=o.key,A=o.value,h=o.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(yi(A))===-1&&m.push(new vt(r,A,`expected one of [${h.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(h.values).indexOf(yi(A))===-1&&m.push(new vt(r,A,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(A)} found`)),m}function Un(o){return Ma(ya(o.value))?Yn(Cr({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ka(o)}function ka(o){const r=o.value,A=o.key;if($e(r)!=="array")return[new vt(A,r,`array expected, ${$e(r)} found`)];const h=o.styleSpec;let m,w=[];if(r.length<1)return[new vt(A,r,"filter array must have at least 1 element")];switch(w=w.concat(Tn({key:`${A}[0]`,value:r[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),yi(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&yi(r[1])==="$type"&&w.push(new vt(A,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&w.push(new vt(A,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(m=$e(r[1]),m!=="string"&&w.push(new vt(`${A}[1]`,r[1],`string expected, ${m} found`)));for(let B=2;B<r.length;B++)m=$e(r[B]),yi(r[1])==="$type"?w=w.concat(Tn({key:`${A}[${B}]`,value:r[B],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&w.push(new vt(`${A}[${B}]`,r[B],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let B=1;B<r.length;B++)w=w.concat(ka({key:`${A}[${B}]`,value:r[B],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":m=$e(r[1]),r.length!==2?w.push(new vt(A,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="string"&&w.push(new vt(`${A}[1]`,r[1],`string expected, ${m} found`));break;case"within":m=$e(r[1]),r.length!==2?w.push(new vt(A,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="object"&&w.push(new vt(`${A}[1]`,r[1],`object expected, ${m} found`))}return w}function Js(o,r){const A=o.key,h=o.validateSpec,m=o.style,w=o.styleSpec,B=o.value,E=o.objectKey,U=w[`${r}_${o.layerType}`];if(!U)return[];const D=E.match(/^(.*)-transition$/);if(r==="paint"&&D&&U[D[1]]&&U[D[1]].transition)return h({key:A,value:B,valueSpec:w.transition,style:m,styleSpec:w});const V=o.valueSpec||U[E];if(!V)return[new vt(A,B,`unknown property "${E}"`)];let W;if($e(B)==="string"&&J(V)&&!V.tokens&&(W=/^{([^}]+)}$/.exec(B)))return[new vt(A,B,`"${E}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(W[1])} }\`.`)];const te=[];return o.layerType==="symbol"&&(E==="text-field"&&m&&!m.glyphs&&te.push(new vt(A,B,'use of "text-field" requires a style "glyphs" property')),E==="text-font"&&ct(ya(B))&&yi(B.type)==="identity"&&te.push(new vt(A,B,'"text-font" does not support identity functions'))),te.concat(h({key:o.key,value:B,valueSpec:V,style:m,styleSpec:w,expressionContext:"property",propertyType:r,propertyKey:E}))}function _a(o){return Js(o,"paint")}function Vo(o){return Js(o,"layout")}function Us(o){let r=[];const A=o.value,h=o.key,m=o.style,w=o.styleSpec;A.type||A.ref||r.push(new vt(h,A,'either "type" or "ref" is required'));let B=yi(A.type);const E=yi(A.ref);if(A.id){const U=yi(A.id);for(let D=0;D<o.arrayIndex;D++){const V=m.layers[D];yi(V.id)===U&&r.push(new vt(h,A.id,`duplicate layer id "${A.id}", previously used at line ${V.id.__line__}`))}}if("ref"in A){let U;["type","source","source-layer","filter","layout"].forEach(D=>{D in A&&r.push(new vt(h,A[D],`"${D}" is prohibited for ref layers`))}),m.layers.forEach(D=>{yi(D.id)===E&&(U=D)}),U?U.ref?r.push(new vt(h,A.ref,"ref cannot reference another ref layer")):B=yi(U.type):r.push(new vt(h,A.ref,`ref layer "${E}" not found`))}else if(B!=="background")if(A.source){const U=m.sources&&m.sources[A.source],D=U&&yi(U.type);U?D==="vector"&&B==="raster"?r.push(new vt(h,A.source,`layer "${A.id}" requires a raster source`)):D!=="raster-dem"&&B==="hillshade"?r.push(new vt(h,A.source,`layer "${A.id}" requires a raster-dem source`)):D==="raster"&&B!=="raster"?r.push(new vt(h,A.source,`layer "${A.id}" requires a vector source`)):D!=="vector"||A["source-layer"]?D==="raster-dem"&&B!=="hillshade"?r.push(new vt(h,A.source,"raster-dem source can only be used with layer type 'hillshade'.")):B!=="line"||!A.paint||!A.paint["line-gradient"]||D==="geojson"&&U.lineMetrics||r.push(new vt(h,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new vt(h,A,`layer "${A.id}" must specify a "source-layer"`)):r.push(new vt(h,A.source,`source "${A.source}" not found`))}else r.push(new vt(h,A,'missing required property "source"'));return r=r.concat(Ti({key:h,value:A,valueSpec:w.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:A.type,valueSpec:w.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:A,objectKey:"type"}),filter:Un,layout:U=>Ti({layer:A,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,validateSpec:U.validateSpec,objectElementValidators:{"*":D=>Vo(Cr({layerType:B},D))}}),paint:U=>Ti({layer:A,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,validateSpec:U.validateSpec,objectElementValidators:{"*":D=>_a(Cr({layerType:B},D))}})}})),r}function Nn(o){const r=o.value,A=o.key,h=$e(r);return h!=="string"?[new vt(A,r,`string expected, ${h} found`)]:[]}const Da={promoteId:function(o){let{key:r,value:A}=o;if($e(A)==="string")return Nn({key:r,value:A});{const h=[];for(const m in A)h.push(...Nn({key:`${r}.${m}`,value:A[m]}));return h}}};function $i(o){const r=o.value,A=o.key,h=o.styleSpec,m=o.style,w=o.validateSpec;if(!r.type)return[new vt(A,r,'"type" is required')];const B=yi(r.type);let E;switch(B){case"vector":case"raster":return E=Ti({key:A,value:r,valueSpec:h[`source_${B.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Da,validateSpec:w}),E;case"raster-dem":return E=function(U){var D;const V=(D=U.sourceName)!==null&&D!==void 0?D:"",W=U.value,te=U.styleSpec,ae=te.source_raster_dem,oe=U.style;let me=[];const Be=$e(W);if(W===void 0)return me;if(Be!=="object")return me.push(new vt("source_raster_dem",W,`object expected, ${Be} found`)),me;const ke=yi(W.encoding)==="custom",Ze=["redFactor","greenFactor","blueFactor","baseShift"],je=U.value.encoding?`"${U.value.encoding}"`:"Default";for(const Xe in W)!ke&&Ze.includes(Xe)?me.push(new vt(Xe,W[Xe],`In "${V}": "${Xe}" is only valid when "encoding" is set to "custom". ${je} encoding found`)):ae[Xe]?me=me.concat(U.validateSpec({key:Xe,value:W[Xe],valueSpec:ae[Xe],validateSpec:U.validateSpec,style:oe,styleSpec:te})):me.push(new vt(Xe,W[Xe],`unknown property "${Xe}"`));return me}({sourceName:A,value:r,style:o.style,styleSpec:h,validateSpec:w}),E;case"geojson":if(E=Ti({key:A,value:r,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:w,objectElementValidators:Da}),r.cluster)for(const U in r.clusterProperties){const[D,V]=r.clusterProperties[U],W=typeof D=="string"?[D,["accumulated"],["get",U]]:D;E.push(...Yn({key:`${A}.${U}.map`,value:V,validateSpec:w,expressionContext:"cluster-map"})),E.push(...Yn({key:`${A}.${U}.reduce`,value:W,validateSpec:w,expressionContext:"cluster-reduce"}))}return E;case"video":return Ti({key:A,value:r,valueSpec:h.source_video,style:m,validateSpec:w,styleSpec:h});case"image":return Ti({key:A,value:r,valueSpec:h.source_image,style:m,validateSpec:w,styleSpec:h});case"canvas":return[new vt(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Tn({key:`${A}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:w,styleSpec:h})}}function On(o){const r=o.value,A=o.styleSpec,h=A.light,m=o.style;let w=[];const B=$e(r);if(r===void 0)return w;if(B!=="object")return w=w.concat([new vt("light",r,`object expected, ${B} found`)]),w;for(const E in r){const U=E.match(/^(.*)-transition$/);w=w.concat(U&&h[U[1]]&&h[U[1]].transition?o.validateSpec({key:E,value:r[E],valueSpec:A.transition,validateSpec:o.validateSpec,style:m,styleSpec:A}):h[E]?o.validateSpec({key:E,value:r[E],valueSpec:h[E],validateSpec:o.validateSpec,style:m,styleSpec:A}):[new vt(E,r[E],`unknown property "${E}"`)])}return w}function wa(o){const r=o.value,A=o.styleSpec,h=A.terrain,m=o.style;let w=[];const B=$e(r);if(r===void 0)return w;if(B!=="object")return w=w.concat([new vt("terrain",r,`object expected, ${B} found`)]),w;for(const E in r)w=w.concat(h[E]?o.validateSpec({key:E,value:r[E],valueSpec:h[E],validateSpec:o.validateSpec,style:m,styleSpec:A}):[new vt(E,r[E],`unknown property "${E}"`)]);return w}function so(o){let r=[];const A=o.value,h=o.key;if(Array.isArray(A)){const m=[],w=[];for(const B in A)A[B].id&&m.includes(A[B].id)&&r.push(new vt(h,A,`all the sprites' ids must be unique, but ${A[B].id} is duplicated`)),m.push(A[B].id),A[B].url&&w.includes(A[B].url)&&r.push(new vt(h,A,`all the sprites' URLs must be unique, but ${A[B].url} is duplicated`)),w.push(A[B].url),r=r.concat(Ti({key:`${h}[${B}]`,value:A[B],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return Nn({key:h,value:A})}const jo={"*":()=>[],array:va,boolean:function(o){const r=o.value,A=o.key,h=$e(r);return h!=="boolean"?[new vt(A,r,`boolean expected, ${h} found`)]:[]},number:Ho,color:function(o){const r=o.key,A=o.value,h=$e(A);return h!=="string"?[new vt(r,A,`color expected, ${h} found`)]:ii.parse(String(A))?[]:[new vt(r,A,`color expected, "${A}" found`)]},constants:rc,enum:Tn,filter:Un,function:TA,layer:Us,object:Ti,source:$i,light:On,terrain:wa,string:Nn,formatted:function(o){return Nn(o).length===0?[]:Yn(o)},resolvedImage:function(o){return Nn(o).length===0?[]:Yn(o)},padding:function(o){const r=o.key,A=o.value;if($e(A)==="array"){if(A.length<1||A.length>4)return[new vt(r,A,`padding requires 1 to 4 values; ${A.length} values found`)];const h={type:"number"};let m=[];for(let w=0;w<A.length;w++)m=m.concat(o.validateSpec({key:`${r}[${w}]`,value:A[w],validateSpec:o.validateSpec,valueSpec:h}));return m}return Ho({key:r,value:A,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,A=o.value,h=$e(A),m=o.styleSpec;if(h!=="array"||A.length<1||A.length%2!=0)return[new vt(r,A,"variableAnchorOffsetCollection requires a non-empty array of even length")];let w=[];for(let B=0;B<A.length;B+=2)w=w.concat(Tn({key:`${r}[${B}]`,value:A[B],valueSpec:m.layout_symbol["text-anchor"]})),w=w.concat(va({key:`${r}[${B+1}]`,value:A[B+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:m}));return w},sprite:so};function Rn(o){const r=o.value,A=o.valueSpec,h=o.styleSpec;return o.validateSpec=Rn,A.expression&&ct(yi(r))?TA(o):A.expression&&Di(ya(r))?Yn(o):A.type&&jo[A.type]?jo[A.type](o):Ti(Cr({},o,{valueSpec:A.type?h[A.type]:A}))}function Na(o){const r=o.value,A=o.key,h=Nn(o);return h.length||(r.indexOf("{fontstack}")===-1&&h.push(new vt(A,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&h.push(new vt(A,r,'"glyphs" url must include a "{range}" token'))),h}function Pn(o){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze,A=[];return A=A.concat(Rn({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:Rn,objectElementValidators:{glyphs:Na,"*":()=>[]}})),o.constants&&(A=A.concat(rc({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:Rn}))),Ps(A)}function Ki(o){return function(r){return o({...r,validateSpec:Rn})}}function Ps(o){return[].concat(o).sort((r,A)=>r.line-A.line)}function ai(o){return function(){for(var r=arguments.length,A=new Array(r),h=0;h<r;h++)A[h]=arguments[h];return Ps(o.apply(this,A))}}Pn.source=ai(Ki($i)),Pn.sprite=ai(Ki(so)),Pn.glyphs=ai(Ki(Na)),Pn.light=ai(Ki(On)),Pn.terrain=ai(Ki(wa)),Pn.layer=ai(Ki(Us)),Pn.filter=ai(Ki(Un)),Pn.paintProperty=ai(Ki(_a)),Pn.layoutProperty=ai(Ki(Vo));const oi=Pn,Vi=oi.light,ji=oi.paintProperty,ba=oi.layoutProperty;function ea(o,r){let A=!1;if(r&&r.length)for(const h of r)o.fire(new Xt(new Error(h.message))),A=!0;return A}class ta{constructor(r,A,h){const m=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const B=new Int32Array(this.arrayBuffer);r=B[0],this.d=(A=B[1])+2*(h=B[2]);for(let U=0;U<this.d*this.d;U++){const D=B[3+U],V=B[3+U+1];m.push(D===V?null:B.subarray(D,V))}const E=B[3+m.length+1];this.keys=B.subarray(B[3+m.length],E),this.bboxes=B.subarray(E),this.insert=this._insertReadonly}else{this.d=A+2*h;for(let B=0;B<this.d*this.d;B++)m.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=r,this.padding=h,this.scale=A/r,this.uid=0;const w=h/A*r;this.min=-w,this.max=r+w}insert(r,A,h,m,w){this._forEachCell(A,h,m,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(A),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,A,h,m,w,B){this.cells[w].push(B)}query(r,A,h,m,w){const B=this.min,E=this.max;if(r<=B&&A<=B&&E<=h&&E<=m&&!w)return Array.prototype.slice.call(this.keys);{const U=[];return this._forEachCell(r,A,h,m,this._queryCell,U,{},w),U}}_queryCell(r,A,h,m,w,B,E,U){const D=this.cells[w];if(D!==null){const V=this.keys,W=this.bboxes;for(let te=0;te<D.length;te++){const ae=D[te];if(E[ae]===void 0){const oe=4*ae;(U?U(W[oe+0],W[oe+1],W[oe+2],W[oe+3]):r<=W[oe+2]&&A<=W[oe+3]&&h>=W[oe+0]&&m>=W[oe+1])?(E[ae]=!0,B.push(V[ae])):E[ae]=!1}}}}_forEachCell(r,A,h,m,w,B,E,U){const D=this._convertToCellCoord(r),V=this._convertToCellCoord(A),W=this._convertToCellCoord(h),te=this._convertToCellCoord(m);for(let ae=D;ae<=W;ae++)for(let oe=V;oe<=te;oe++){const me=this.d*oe+ae;if((!U||U(this._convertFromCellCoord(ae),this._convertFromCellCoord(oe),this._convertFromCellCoord(ae+1),this._convertFromCellCoord(oe+1)))&&w.call(this,r,A,h,m,me,B,E,U))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,A=3+this.cells.length+1+1;let h=0;for(let B=0;B<this.cells.length;B++)h+=this.cells[B].length;const m=new Int32Array(A+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let w=A;for(let B=0;B<r.length;B++){const E=r[B];m[3+B]=w,m.set(E,w),w+=E.length}return m[3+r.length]=w,m.set(this.keys,w),w+=this.keys.length,m[3+r.length+1]=w,m.set(this.bboxes,w),w+=this.bboxes.length,m.buffer}static serialize(r,A){const h=r.toArrayBuffer();return A&&A.push(h),{buffer:h}}static deserialize(r){return new ta(r.buffer)}}const Ms={};function Zt(o,r){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ms[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),Ms[o]={klass:r,omit:A.omit||[],shallow:A.shallow||[]}}Zt("Object",Object),Zt("TransferableGridIndex",ta),Zt("Color",ii),Zt("Error",Error),Zt("AJAXError",st),Zt("ResolvedImage",Wr),Zt("StylePropertyFunction",As),Zt("StyleExpression",ki,{omit:["_evaluator"]}),Zt("ZoomDependentExpression",Zn),Zt("ZoomConstantExpression",qi),Zt("CompoundExpression",mn,{omit:["_evaluate"]});for(const o in eo)eo[o]._classRegistryKey||Zt(`Expression_${o}`,eo[o]);function hl(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Oa(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(hl(o)||it(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const A=o;return r&&r.push(A.buffer),A}if(o instanceof ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const A=[];for(const h of o)A.push(Oa(h,r));return A}if(typeof o=="object"){const A=o.constructor,h=A._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!Ms[h])throw new Error(`${h} is not registered.`);const m=A.serialize?A.serialize(o,r):{};if(A.serialize){if(r&&m===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const w in o){if(!o.hasOwnProperty(w)||Ms[h].omit.indexOf(w)>=0)continue;const B=o[w];m[w]=Ms[h].shallow.indexOf(w)>=0?B:Oa(B,r)}o instanceof Error&&(m.message=o.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(m.$name=h),m}throw new Error("can't serialize object of type "+typeof o)}function Go(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||hl(o)||it(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Go);if(typeof o=="object"){const r=o.$name||"Object";if(!Ms[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:A}=Ms[r];if(!A)throw new Error(`can't deserialize unregistered class ${r}`);if(A.deserialize)return A.deserialize(o);const h=Object.create(A.prototype);for(const m of Object.keys(o)){if(m==="$name")continue;const w=o[m];h[m]=Ms[r].shallow.indexOf(m)>=0?w:Go(w)}return h}throw new Error("can't deserialize object of type "+typeof o)}class qc{constructor(){this.first=!0}update(r,A){const h=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=A),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=h,!0))}}const Gt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function pl(o){for(const r of o)if(Jn(r.charCodeAt(0)))return!0;return!1}function UA(o){for(const r of o)if(!ls(r.charCodeAt(0)))return!1;return!0}function ls(o){return!(Gt.Arabic(o)||Gt["Arabic Supplement"](o)||Gt["Arabic Extended-A"](o)||Gt["Arabic Presentation Forms-A"](o)||Gt["Arabic Presentation Forms-B"](o))}function Jn(o){return!(o!==746&&o!==747&&(o<4352||!(Gt["Bopomofo Extended"](o)||Gt.Bopomofo(o)||Gt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Gt["CJK Compatibility Ideographs"](o)||Gt["CJK Compatibility"](o)||Gt["CJK Radicals Supplement"](o)||Gt["CJK Strokes"](o)||!(!Gt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Gt["CJK Unified Ideographs Extension A"](o)||Gt["CJK Unified Ideographs"](o)||Gt["Enclosed CJK Letters and Months"](o)||Gt["Hangul Compatibility Jamo"](o)||Gt["Hangul Jamo Extended-A"](o)||Gt["Hangul Jamo Extended-B"](o)||Gt["Hangul Jamo"](o)||Gt["Hangul Syllables"](o)||Gt.Hiragana(o)||Gt["Ideographic Description Characters"](o)||Gt.Kanbun(o)||Gt["Kangxi Radicals"](o)||Gt["Katakana Phonetic Extensions"](o)||Gt.Katakana(o)&&o!==12540||!(!Gt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Gt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Gt["Unified Canadian Aboriginal Syllabics"](o)||Gt["Unified Canadian Aboriginal Syllabics Extended"](o)||Gt["Vertical Forms"](o)||Gt["Yijing Hexagram Symbols"](o)||Gt["Yi Syllables"](o)||Gt["Yi Radicals"](o))))}function dl(o){return!(Jn(o)||function(r){return!!(Gt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Gt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Gt["Letterlike Symbols"](r)||Gt["Number Forms"](r)||Gt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Gt["Control Pictures"](r)&&r!==9251||Gt["Optical Character Recognition"](r)||Gt["Enclosed Alphanumerics"](r)||Gt["Geometric Shapes"](r)||Gt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Gt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Gt["CJK Symbols and Punctuation"](r)||Gt.Katakana(r)||Gt["Private Use Area"](r)||Gt["CJK Compatibility Forms"](r)||Gt["Small Form Variants"](r)||Gt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function fl(o){return o>=1424&&o<=2303||Gt["Arabic Presentation Forms-A"](o)||Gt["Arabic Presentation Forms-B"](o)}function $c(o,r){return!(!r&&fl(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Gt.Khmer(o))}function ic(o){for(const r of o)if(fl(r.charCodeAt(0)))return!0;return!1}const PA="deferred",gl="loading",nc="loaded";let ml=null,Mn="unavailable",ra=null;const qo=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Mn="error"),ml&&ml(o)};function Kc(){yl.fire(new fr("pluginStateChange",{pluginStatus:Mn,pluginURL:ra}))}const yl=new bt,sc=function(){return Mn},Xu=function(){if(Mn!==PA||!ra)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Mn=gl,Kc(),ra&&Vt({url:ra},o=>{o?qo(o):(Mn=nc,Kc())})},cs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Mn===nc||cs.applyArabicShaping!=null,isLoading:()=>Mn===gl,setState(o){if(!rt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Mn=o.pluginStatus,ra=o.pluginURL},isParsed(){if(!rt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return cs.applyArabicShaping!=null&&cs.processBidirectionalText!=null&&cs.processStyledBidirectionalText!=null},getPluginURL(){if(!rt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ra}};class xi{constructor(r,A){this.zoom=r,A?(this.now=A.now,this.fadeDuration=A.fadeDuration,this.zoomHistory=A.zoomHistory,this.transition=A.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qc,this.transition={})}isSupportedScript(r){return function(A,h){for(const m of A)if(!$c(m.charCodeAt(0),h))return!1;return!0}(r,cs.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,A=r-Math.floor(r),h=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*A}}}class ac{constructor(r,A){this.property=r,this.value=A,this.expression=function(h,m){if(ct(h))return new As(h,m);if(Di(h)){const w=Xn(h,m);if(w.result==="error")throw new Error(w.value.map(B=>`${B.key}: ${B.message}`).join(", "));return w.value}{let w=h;return m.type==="color"&&typeof h=="string"?w=ii.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(w=$n.parse(h)):w=Dn.parse(h),{kind:"constant",evaluate:()=>w}}}(A===void 0?r.specification.default:A,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,A,h){return this.property.possiblyEvaluate(this,r,A,h)}}class Wc{constructor(r){this.property=r,this.value=new ac(r,void 0)}transitioned(r,A){return new Ac(this.property,this.value,A,fe({},r.transition,this.transition),r.now)}untransitioned(){return new Ac(this.property,this.value,null,{},0)}}class oc{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Ae(this._values[r].value.value)}setValue(r,A){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Wc(this._values[r].property)),this._values[r].value=new ac(this._values[r].property,A===null?void 0:Ae(A))}getTransition(r){return Ae(this._values[r].transition)}setTransition(r,A){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Wc(this._values[r].property)),this._values[r].transition=Ae(A)||void 0}serialize(){const r={};for(const A of Object.keys(this._values)){const h=this.getValue(A);h!==void 0&&(r[A]=h);const m=this.getTransition(A);m!==void 0&&(r[`${A}-transition`]=m)}return r}transitioned(r,A){const h=new MA(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(r,A._values[m]);return h}untransitioned(){const r=new MA(this._properties);for(const A of Object.keys(this._values))r._values[A]=this._values[A].untransitioned();return r}}class Ac{constructor(r,A,h,m,w){this.property=r,this.value=A,this.begin=w+m.delay||0,this.end=this.begin+m.duration||0,r.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(r,A,h){const m=r.now||0,w=this.value.possiblyEvaluate(r,A,h),B=this.prior;if(B){if(m>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(m<this.begin)return B.possiblyEvaluate(r,A,h);{const E=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(B.possiblyEvaluate(r,A,h),w,function(U){if(U<=0)return 0;if(U>=1)return 1;const D=U*U,V=D*U;return 4*(U<.5?V:3*(U-D)+V-.75)}(E))}}return w}}class MA{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,A,h){const m=new vl(this._properties);for(const w of Object.keys(this._values))m._values[w]=this._values[w].possiblyEvaluate(r,A,h);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class dp{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return Ae(this._values[r].value)}setValue(r,A){this._values[r]=new ac(this._values[r].property,A===null?void 0:Ae(A))}serialize(){const r={};for(const A of Object.keys(this._values)){const h=this.getValue(A);h!==void 0&&(r[A]=h)}return r}possiblyEvaluate(r,A,h){const m=new vl(this._properties);for(const w of Object.keys(this._values))m._values[w]=this._values[w].possiblyEvaluate(r,A,h);return m}}class zn{constructor(r,A,h){this.property=r,this.value=A,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,A,h,m){return this.property.evaluate(this.value,this.parameters,r,A,h,m)}}class vl{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Ar{constructor(r){this.specification=r}possiblyEvaluate(r,A){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(A)}interpolate(r,A,h){const m=Xi[this.specification.type];return m?m(r,A,h):r}}class _r{constructor(r,A){this.specification=r,this.overrides=A}possiblyEvaluate(r,A,h,m){return new zn(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(A,null,{},h,m)}:r.expression,A)}interpolate(r,A,h){if(r.value.kind!=="constant"||A.value.kind!=="constant")return r;if(r.value.value===void 0||A.value.value===void 0)return new zn(this,{kind:"constant",value:void 0},r.parameters);const m=Xi[this.specification.type];if(m){const w=m(r.value.value,A.value.value,h);return new zn(this,{kind:"constant",value:w},r.parameters)}return r}evaluate(r,A,h,m,w,B){return r.kind==="constant"?r.value:r.evaluate(A,h,m,w,B)}}class _l extends _r{possiblyEvaluate(r,A,h,m){if(r.value===void 0)return new zn(this,{kind:"constant",value:void 0},A);if(r.expression.kind==="constant"){const w=r.expression.evaluate(A,null,{},h,m),B=r.property.specification.type==="resolvedImage"&&typeof w!="string"?w.name:w,E=this._calculate(B,B,B,A);return new zn(this,{kind:"constant",value:E},A)}if(r.expression.kind==="camera"){const w=this._calculate(r.expression.evaluate({zoom:A.zoom-1}),r.expression.evaluate({zoom:A.zoom}),r.expression.evaluate({zoom:A.zoom+1}),A);return new zn(this,{kind:"constant",value:w},A)}return new zn(this,r.expression,A)}evaluate(r,A,h,m,w,B){if(r.kind==="source"){const E=r.evaluate(A,h,m,w,B);return this._calculate(E,E,E,A)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(A.zoom)-1},h,m),r.evaluate({zoom:Math.floor(A.zoom)},h,m),r.evaluate({zoom:Math.floor(A.zoom)+1},h,m),A):r.value}_calculate(r,A,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:A}:{from:h,to:A}}interpolate(r){return r}}class Zc{constructor(r){this.specification=r}possiblyEvaluate(r,A,h,m){if(r.value!==void 0){if(r.expression.kind==="constant"){const w=r.expression.evaluate(A,null,{},h,m);return this._calculate(w,w,w,A)}return this._calculate(r.expression.evaluate(new xi(Math.floor(A.zoom-1),A)),r.expression.evaluate(new xi(Math.floor(A.zoom),A)),r.expression.evaluate(new xi(Math.floor(A.zoom+1),A)),A)}}_calculate(r,A,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:A}:{from:h,to:A}}interpolate(r){return r}}class xa{constructor(r){this.specification=r}possiblyEvaluate(r,A,h,m){return!!r.expression.evaluate(A,null,{},h,m)}interpolate(){return!1}}class ui{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in r){const h=r[A];h.specification.overridable&&this.overridableProperties.push(A);const m=this.defaultPropertyValues[A]=new ac(h,void 0),w=this.defaultTransitionablePropertyValues[A]=new Wc(h);this.defaultTransitioningPropertyValues[A]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=m.possiblyEvaluate({})}}}Zt("DataDrivenProperty",_r),Zt("DataConstantProperty",Ar),Zt("CrossFadedDataDrivenProperty",_l),Zt("CrossFadedProperty",Zc),Zt("ColorRampProperty",xa);const ia="-transition";class Qs extends bt{constructor(r,A){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),A.layout&&(this._unevaluatedLayout=new dp(A.layout)),A.paint)){this._transitionablePaint=new oc(A.paint);for(const h in r.paint)this.setPaintProperty(h,r.paint[h],{validate:!1});for(const h in r.layout)this.setLayoutProperty(h,r.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new vl(A.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,A){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};A!=null&&this._validate(ba,`layers.${this.id}.layout.${r}`,r,A,h)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,A):this.visibility=A)}getPaintProperty(r){return r.endsWith(ia)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,A){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(A!=null&&this._validate(ji,`layers.${this.id}.paint.${r}`,r,A,h))return!1;if(r.endsWith(ia))return this._transitionablePaint.setTransition(r.slice(0,-11),A||void 0),!1;{const m=this._transitionablePaint._values[r],w=m.property.specification["property-type"]==="cross-faded-data-driven",B=m.value.isDataDriven(),E=m.value;this._transitionablePaint.setValue(r,A),this._handleSpecialPaintPropertyUpdate(r);const U=this._transitionablePaint._values[r].value;return U.isDataDriven()||B||w||this._handleOverridablePaintPropertyUpdate(r,E,U)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,A,h){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,A){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,A)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),ce(r,(A,h)=>!(A===void 0||h==="layout"&&!Object.keys(A).length||h==="paint"&&!Object.keys(A).length))}_validate(r,A,h,m){let w=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return(!w||w.validate!==!1)&&ea(this,r.call(oi,{key:A,layerType:this.type,objectKey:h,value:m,styleSpec:ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const A=this.paint.get(r);if(A instanceof zn&&J(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}const Xc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class es{constructor(r,A){this._structArray=r,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ai{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,A){return r._trim(),A&&(r.isTransferred=!0,A.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const A=Object.create(this.prototype);return A.arrayBuffer=r.arrayBuffer,A.length=r.length,A.capacity=r.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ui(o){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,A=0,h=0;return{members:o.map(m=>{const w=Xc[m.type].BYTES_PER_ELEMENT,B=A=QA(A,Math.max(r,w)),E=m.components||1;return h=Math.max(h,w),A+=w*E,{name:m.name,type:m.type,components:E,offset:B}}),size:QA(A,Math.max(h,r)),alignment:r}}function QA(o,r){return Math.ceil(o/r)*r}class kA extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A){const h=this.length;return this.resize(h+1),this.emplace(h,r,A)}emplace(r,A,h){const m=2*r;return this.int16[m+0]=A,this.int16[m+1]=h,r}}kA.prototype.bytesPerElement=4,Zt("StructArrayLayout2i4",kA);class DA extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,A,h)}emplace(r,A,h,m){const w=3*r;return this.int16[w+0]=A,this.int16[w+1]=h,this.int16[w+2]=m,r}}DA.prototype.bytesPerElement=6,Zt("StructArrayLayout3i6",DA);class ao extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,h,m){const w=this.length;return this.resize(w+1),this.emplace(w,r,A,h,m)}emplace(r,A,h,m,w){const B=4*r;return this.int16[B+0]=A,this.int16[B+1]=h,this.int16[B+2]=m,this.int16[B+3]=w,r}}ao.prototype.bytesPerElement=8,Zt("StructArrayLayout4i8",ao);class lc extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,h,m,w,B){const E=this.length;return this.resize(E+1),this.emplace(E,r,A,h,m,w,B)}emplace(r,A,h,m,w,B,E){const U=6*r;return this.int16[U+0]=A,this.int16[U+1]=h,this.int16[U+2]=m,this.int16[U+3]=w,this.int16[U+4]=B,this.int16[U+5]=E,r}}lc.prototype.bytesPerElement=12,Zt("StructArrayLayout2i4i12",lc);class Yc extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,h,m,w,B){const E=this.length;return this.resize(E+1),this.emplace(E,r,A,h,m,w,B)}emplace(r,A,h,m,w,B,E){const U=4*r,D=8*r;return this.int16[U+0]=A,this.int16[U+1]=h,this.uint8[D+4]=m,this.uint8[D+5]=w,this.uint8[D+6]=B,this.uint8[D+7]=E,r}}Yc.prototype.bytesPerElement=8,Zt("StructArrayLayout2i4ub8",Yc);class Ra extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A){const h=this.length;return this.resize(h+1),this.emplace(h,r,A)}emplace(r,A,h){const m=2*r;return this.float32[m+0]=A,this.float32[m+1]=h,r}}Ra.prototype.bytesPerElement=8,Zt("StructArrayLayout2f8",Ra);class NA extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A,h,m,w,B,E,U,D,V){const W=this.length;return this.resize(W+1),this.emplace(W,r,A,h,m,w,B,E,U,D,V)}emplace(r,A,h,m,w,B,E,U,D,V,W){const te=10*r;return this.uint16[te+0]=A,this.uint16[te+1]=h,this.uint16[te+2]=m,this.uint16[te+3]=w,this.uint16[te+4]=B,this.uint16[te+5]=E,this.uint16[te+6]=U,this.uint16[te+7]=D,this.uint16[te+8]=V,this.uint16[te+9]=W,r}}NA.prototype.bytesPerElement=20,Zt("StructArrayLayout10ui20",NA);class $o extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A,h,m,w,B,E,U,D,V,W,te){const ae=this.length;return this.resize(ae+1),this.emplace(ae,r,A,h,m,w,B,E,U,D,V,W,te)}emplace(r,A,h,m,w,B,E,U,D,V,W,te,ae){const oe=12*r;return this.int16[oe+0]=A,this.int16[oe+1]=h,this.int16[oe+2]=m,this.int16[oe+3]=w,this.uint16[oe+4]=B,this.uint16[oe+5]=E,this.uint16[oe+6]=U,this.uint16[oe+7]=D,this.int16[oe+8]=V,this.int16[oe+9]=W,this.int16[oe+10]=te,this.int16[oe+11]=ae,r}}$o.prototype.bytesPerElement=24,Zt("StructArrayLayout4i4ui4i24",$o);class ni extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,A,h)}emplace(r,A,h,m){const w=3*r;return this.float32[w+0]=A,this.float32[w+1]=h,this.float32[w+2]=m,r}}ni.prototype.bytesPerElement=12,Zt("StructArrayLayout3f12",ni);class v extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const A=this.length;return this.resize(A+1),this.emplace(A,r)}emplace(r,A){return this.uint32[1*r+0]=A,r}}v.prototype.bytesPerElement=4,Zt("StructArrayLayout1ul4",v);class n extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A,h,m,w,B,E,U,D){const V=this.length;return this.resize(V+1),this.emplace(V,r,A,h,m,w,B,E,U,D)}emplace(r,A,h,m,w,B,E,U,D,V){const W=10*r,te=5*r;return this.int16[W+0]=A,this.int16[W+1]=h,this.int16[W+2]=m,this.int16[W+3]=w,this.int16[W+4]=B,this.int16[W+5]=E,this.uint32[te+3]=U,this.uint16[W+8]=D,this.uint16[W+9]=V,r}}n.prototype.bytesPerElement=20,Zt("StructArrayLayout6i1ul2ui20",n);class u extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,h,m,w,B){const E=this.length;return this.resize(E+1),this.emplace(E,r,A,h,m,w,B)}emplace(r,A,h,m,w,B,E){const U=6*r;return this.int16[U+0]=A,this.int16[U+1]=h,this.int16[U+2]=m,this.int16[U+3]=w,this.int16[U+4]=B,this.int16[U+5]=E,r}}u.prototype.bytesPerElement=12,Zt("StructArrayLayout2i2i2i12",u);class d extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,A,h,m,w){const B=this.length;return this.resize(B+1),this.emplace(B,r,A,h,m,w)}emplace(r,A,h,m,w,B){const E=4*r,U=8*r;return this.float32[E+0]=A,this.float32[E+1]=h,this.float32[E+2]=m,this.int16[U+6]=w,this.int16[U+7]=B,r}}d.prototype.bytesPerElement=16,Zt("StructArrayLayout2f1f2i16",d);class y extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,h,m){const w=this.length;return this.resize(w+1),this.emplace(w,r,A,h,m)}emplace(r,A,h,m,w){const B=12*r,E=3*r;return this.uint8[B+0]=A,this.uint8[B+1]=h,this.float32[E+1]=m,this.float32[E+2]=w,r}}y.prototype.bytesPerElement=12,Zt("StructArrayLayout2ub2f12",y);class b extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,A,h)}emplace(r,A,h,m){const w=3*r;return this.uint16[w+0]=A,this.uint16[w+1]=h,this.uint16[w+2]=m,r}}b.prototype.bytesPerElement=6,Zt("StructArrayLayout3ui6",b);class F extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,h,m,w,B,E,U,D,V,W,te,ae,oe,me,Be,ke){const Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,r,A,h,m,w,B,E,U,D,V,W,te,ae,oe,me,Be,ke)}emplace(r,A,h,m,w,B,E,U,D,V,W,te,ae,oe,me,Be,ke,Ze){const je=24*r,Xe=12*r,At=48*r;return this.int16[je+0]=A,this.int16[je+1]=h,this.uint16[je+2]=m,this.uint16[je+3]=w,this.uint32[Xe+2]=B,this.uint32[Xe+3]=E,this.uint32[Xe+4]=U,this.uint16[je+10]=D,this.uint16[je+11]=V,this.uint16[je+12]=W,this.float32[Xe+7]=te,this.float32[Xe+8]=ae,this.uint8[At+36]=oe,this.uint8[At+37]=me,this.uint8[At+38]=Be,this.uint32[Xe+10]=ke,this.int16[je+22]=Ze,r}}F.prototype.bytesPerElement=48,Zt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",F);class T extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,h,m,w,B,E,U,D,V,W,te,ae,oe,me,Be,ke,Ze,je,Xe,At,mt,Kt,ir,qt,Ht,Dt,er){const Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,r,A,h,m,w,B,E,U,D,V,W,te,ae,oe,me,Be,ke,Ze,je,Xe,At,mt,Kt,ir,qt,Ht,Dt,er)}emplace(r,A,h,m,w,B,E,U,D,V,W,te,ae,oe,me,Be,ke,Ze,je,Xe,At,mt,Kt,ir,qt,Ht,Dt,er,Ot){const St=32*r,yr=16*r;return this.int16[St+0]=A,this.int16[St+1]=h,this.int16[St+2]=m,this.int16[St+3]=w,this.int16[St+4]=B,this.int16[St+5]=E,this.int16[St+6]=U,this.int16[St+7]=D,this.uint16[St+8]=V,this.uint16[St+9]=W,this.uint16[St+10]=te,this.uint16[St+11]=ae,this.uint16[St+12]=oe,this.uint16[St+13]=me,this.uint16[St+14]=Be,this.uint16[St+15]=ke,this.uint16[St+16]=Ze,this.uint16[St+17]=je,this.uint16[St+18]=Xe,this.uint16[St+19]=At,this.uint16[St+20]=mt,this.uint16[St+21]=Kt,this.uint16[St+22]=ir,this.uint32[yr+12]=qt,this.float32[yr+13]=Ht,this.float32[yr+14]=Dt,this.uint16[St+30]=er,this.uint16[St+31]=Ot,r}}T.prototype.bytesPerElement=64,Zt("StructArrayLayout8i15ui1ul2f2ui64",T);class k extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const A=this.length;return this.resize(A+1),this.emplace(A,r)}emplace(r,A){return this.float32[1*r+0]=A,r}}k.prototype.bytesPerElement=4,Zt("StructArrayLayout1f4",k);class O extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,A,h)}emplace(r,A,h,m){const w=3*r;return this.uint16[6*r+0]=A,this.float32[w+1]=h,this.float32[w+2]=m,r}}O.prototype.bytesPerElement=12,Zt("StructArrayLayout1ui2f12",O);class H extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,A,h)}emplace(r,A,h,m){const w=4*r;return this.uint32[2*r+0]=A,this.uint16[w+2]=h,this.uint16[w+3]=m,r}}H.prototype.bytesPerElement=8,Zt("StructArrayLayout1ul2ui8",H);class K extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,A){const h=this.length;return this.resize(h+1),this.emplace(h,r,A)}emplace(r,A,h){const m=2*r;return this.uint16[m+0]=A,this.uint16[m+1]=h,r}}K.prototype.bytesPerElement=4,Zt("StructArrayLayout2ui4",K);class se extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const A=this.length;return this.resize(A+1),this.emplace(A,r)}emplace(r,A){return this.uint16[1*r+0]=A,r}}se.prototype.bytesPerElement=2,Zt("StructArrayLayout1ui2",se);class ge extends Ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,A,h,m){const w=this.length;return this.resize(w+1),this.emplace(w,r,A,h,m)}emplace(r,A,h,m,w){const B=4*r;return this.float32[B+0]=A,this.float32[B+1]=h,this.float32[B+2]=m,this.float32[B+3]=w,r}}ge.prototype.bytesPerElement=16,Zt("StructArrayLayout4f16",ge);class f extends es{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new M(this.anchorPointX,this.anchorPointY)}}f.prototype.size=20;class x extends n{get(r){return new f(this,r)}}Zt("CollisionBoxArray",x);class S extends es{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}S.prototype.size=48;class Q extends F{get(r){return new S(this,r)}}Zt("PlacedSymbolArray",Q);class R extends es{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}R.prototype.size=64;class N extends T{get(r){return new R(this,r)}}Zt("SymbolInstanceArray",N);class z extends k{getoffsetX(r){return this.float32[1*r+0]}}Zt("GlyphOffsetArray",z);class $ extends DA{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}Zt("SymbolLineVertexArray",$);class Z extends es{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Z.prototype.size=12;class re extends O{get(r){return new Z(this,r)}}Zt("TextAnchorOffsetArray",re);class de extends es{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}de.prototype.size=8;class we extends H{get(r){return new de(this,r)}}Zt("FeatureIndexArray",we);class Le extends kA{}class Qe extends kA{}class ut extends kA{}class He extends lc{}class Fe extends Yc{}class Ie extends Ra{}class dt extends NA{}class pt extends $o{}class at extends ni{}class _t extends v{}class Ft extends u{}class Wt extends y{}class kt extends b{}class Er extends K{}const Fr=Ui([{name:"a_pos",components:2,type:"Int16"}],4),{members:kr}=Fr;class pr{constructor(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.segments=r}prepareSegment(r,A,h,m){let w=this.segments[this.segments.length-1];return r>pr.MAX_VERTEX_ARRAY_LENGTH&&_e(`Max vertices per segment is ${pr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!w||w.vertexLength+r>pr.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==m)&&(w={vertexOffset:A.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(w.sortKey=m),this.segments.push(w)),w}get(){return this.segments}destroy(){for(const r of this.segments)for(const A in r.vaos)r.vaos[A].destroy()}static simpleSegment(r,A,h,m){return new pr([{vertexOffset:r,primitiveOffset:A,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function ei(o,r){return 256*(o=Pe(Math.floor(o),0,255))+Pe(Math.floor(r),0,255)}pr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Zt("SegmentVector",pr);const Xr=Ui([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ir={exports:{}},Bi={exports:{}};Bi.exports=function(o,r){var A,h,m,w,B,E,U,D;for(h=o.length-(A=3&o.length),m=r,B=3432918353,E=461845907,D=0;D<h;)U=255&o.charCodeAt(D)|(255&o.charCodeAt(++D))<<8|(255&o.charCodeAt(++D))<<16|(255&o.charCodeAt(++D))<<24,++D,m=27492+(65535&(w=5*(65535&(m=(m^=U=(65535&(U=(U=(65535&U)*B+(((U>>>16)*B&65535)<<16)&4294967295)<<15|U>>>17))*E+(((U>>>16)*E&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(U=0,A){case 3:U^=(255&o.charCodeAt(D+2))<<16;case 2:U^=(255&o.charCodeAt(D+1))<<8;case 1:m^=U=(65535&(U=(U=(65535&(U^=255&o.charCodeAt(D)))*B+(((U>>>16)*B&65535)<<16)&4294967295)<<15|U>>>17))*E+(((U>>>16)*E&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var Ji=Bi.exports,si={exports:{}};si.exports=function(o,r){for(var A,h=o.length,m=r^h,w=0;h>=4;)A=1540483477*(65535&(A=255&o.charCodeAt(w)|(255&o.charCodeAt(++w))<<8|(255&o.charCodeAt(++w))<<16|(255&o.charCodeAt(++w))<<24))+((1540483477*(A>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(A=1540483477*(65535&(A^=A>>>24))+((1540483477*(A>>>16)&65535)<<16)),h-=4,++w;switch(h){case 3:m^=(255&o.charCodeAt(w+2))<<16;case 2:m^=(255&o.charCodeAt(w+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(w)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var hi=Ji,zr=si.exports;Ir.exports=hi,Ir.exports.murmur3=hi,Ir.exports.murmur2=zr;var en=_(Ir.exports);class li{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,A,h,m){this.ids.push(ti(r)),this.positions.push(A,h,m)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=ti(r);let h=0,m=this.ids.length-1;for(;h<m;){const B=h+m>>1;this.ids[B]>=A?m=B:h=B+1}const w=[];for(;this.ids[h]===A;)w.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return w}static serialize(r,A){const h=new Float64Array(r.ids),m=new Uint32Array(r.positions);return pi(h,m,0,h.length-1),A&&A.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(r){const A=new li;return A.ids=r.ids,A.positions=r.positions,A.indexed=!0,A}}function ti(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:en(String(o))}function pi(o,r,A,h){for(;A<h;){const m=o[A+h>>1];let w=A-1,B=h+1;for(;;){do w++;while(o[w]<m);do B--;while(o[B]>m);if(w>=B)break;ri(o,w,B),ri(r,3*w,3*B),ri(r,3*w+1,3*B+1),ri(r,3*w+2,3*B+2)}B-A<h-B?(pi(o,r,A,B),A=B+1):(pi(o,r,B+1,h),h=B)}}function ri(o,r,A){const h=o[r];o[r]=o[A],o[A]=h}Zt("FeaturePositionMap",li);class on{constructor(r,A){this.gl=r.gl,this.location=A}}class us extends on{constructor(r,A){super(r,A),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class tn extends on{constructor(r,A){super(r,A),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Ba extends on{constructor(r,A){super(r,A),this.current=ii.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const Ko=new Float32Array(16);function oo(o){return[ei(255*o.r,255*o.g),ei(255*o.b,255*o.a)]}class _n{constructor(r,A,h){this.value=r,this.uniformNames=A.map(m=>`u_${m}`),this.type=h}setUniform(r,A,h){r.set(h.constantOr(this.value))}getBinding(r,A,h){return this.type==="color"?new Ba(r,A):new us(r,A)}}class gi{constructor(r,A){this.uniformNames=A.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=r.tlbr}setUniform(r,A,h,m){const w=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&r.set(w)}getBinding(r,A,h){return h.substr(0,9)==="u_pattern"?new tn(r,A):new us(r,A)}}class ks{constructor(r,A,h,m){this.expression=r,this.type=h,this.maxValue=0,this.paintVertexAttributes=A.map(w=>({name:`a_${w}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(r,A,h,m,w){const B=this.paintVertexArray.length,E=this.expression.evaluate(new xi(0),A,{},m,[],w);this.paintVertexArray.resize(r),this._setPaintValue(B,r,E)}updatePaintArray(r,A,h,m){const w=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(r,A,w)}_setPaintValue(r,A,h){if(this.type==="color"){const m=oo(h);for(let w=r;w<A;w++)this.paintVertexArray.emplace(w,m[0],m[1])}else{for(let m=r;m<A;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class hs{constructor(r,A,h,m,w,B){this.expression=r,this.uniformNames=A.map(E=>`u_${E}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=A.map(E=>({name:`a_${E}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new B}populatePaintArray(r,A,h,m,w){const B=this.expression.evaluate(new xi(this.zoom),A,{},m,[],w),E=this.expression.evaluate(new xi(this.zoom+1),A,{},m,[],w),U=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(U,r,B,E)}updatePaintArray(r,A,h,m){const w=this.expression.evaluate({zoom:this.zoom},h,m),B=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(r,A,w,B)}_setPaintValue(r,A,h,m){if(this.type==="color"){const w=oo(h),B=oo(m);for(let E=r;E<A;E++)this.paintVertexArray.emplace(E,w[0],w[1],B[0],B[1])}else{for(let w=r;w<A;w++)this.paintVertexArray.emplace(w,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,A){const h=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,m=Pe(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);r.set(m)}getBinding(r,A,h){return new us(r,A)}}class na{constructor(r,A,h,m,w,B){this.expression=r,this.type=A,this.useIntegerZoom=h,this.zoom=m,this.layerId=B,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(r,A,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(m,r,A.patterns&&A.patterns[this.layerId],h)}updatePaintArray(r,A,h,m,w){this._setPaintValues(r,A,h.patterns&&h.patterns[this.layerId],w)}_setPaintValues(r,A,h,m){if(!m||!h)return;const{min:w,mid:B,max:E}=h,U=m[w],D=m[B],V=m[E];if(U&&D&&V)for(let W=r;W<A;W++)this.zoomInPaintVertexArray.emplace(W,D.tl[0],D.tl[1],D.br[0],D.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1],D.pixelRatio,U.pixelRatio),this.zoomOutPaintVertexArray.emplace(W,D.tl[0],D.tl[1],D.br[0],D.br[1],V.tl[0],V.tl[1],V.br[0],V.br[1],D.pixelRatio,V.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Xr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Xr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class OA{constructor(r,A,h){this.binders={},this._buffers=[];const m=[];for(const w in r.paint._values){if(!h(w))continue;const B=r.paint.get(w);if(!(B instanceof zn&&J(B.property.specification)))continue;const E=Yu(w,r.type),U=B.value,D=B.property.specification.type,V=B.property.useIntegerZoom,W=B.property.specification["property-type"],te=W==="cross-faded"||W==="cross-faded-data-driven";if(U.kind==="constant")this.binders[w]=te?new gi(U.value,E):new _n(U.value,E,D),m.push(`/u_${w}`);else if(U.kind==="source"||te){const ae=Ca(w,D,"source");this.binders[w]=te?new na(U,D,V,A,ae,r.id):new ks(U,E,D,ae),m.push(`/a_${w}`)}else{const ae=Ca(w,D,"composite");this.binders[w]=new hs(U,E,D,V,A,ae),m.push(`/z_${w}`)}}this.cacheKey=m.sort().join("")}getMaxValue(r){const A=this.binders[r];return A instanceof ks||A instanceof hs?A.maxValue:0}populatePaintArrays(r,A,h,m,w){for(const B in this.binders){const E=this.binders[B];(E instanceof ks||E instanceof hs||E instanceof na)&&E.populatePaintArray(r,A,h,m,w)}}setConstantPatternPositions(r,A){for(const h in this.binders){const m=this.binders[h];m instanceof gi&&m.setConstantPatternPositions(r,A)}}updatePaintArrays(r,A,h,m,w){let B=!1;for(const E in r){const U=A.getPositions(E);for(const D of U){const V=h.feature(D.index);for(const W in this.binders){const te=this.binders[W];if((te instanceof ks||te instanceof hs||te instanceof na)&&te.expression.isStateDependent===!0){const ae=m.paint.get(W);te.expression=ae.value,te.updatePaintArray(D.start,D.end,V,r[E],w),B=!0}}}}return B}defines(){const r=[];for(const A in this.binders){const h=this.binders[A];(h instanceof _n||h instanceof gi)&&r.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return r}getBinderAttributes(){const r=[];for(const A in this.binders){const h=this.binders[A];if(h instanceof ks||h instanceof hs)for(let m=0;m<h.paintVertexAttributes.length;m++)r.push(h.paintVertexAttributes[m].name);else if(h instanceof na)for(let m=0;m<Xr.members.length;m++)r.push(Xr.members[m].name)}return r}getBinderUniforms(){const r=[];for(const A in this.binders){const h=this.binders[A];if(h instanceof _n||h instanceof gi||h instanceof hs)for(const m of h.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,A){const h=[];for(const m in this.binders){const w=this.binders[m];if(w instanceof _n||w instanceof gi||w instanceof hs){for(const B of w.uniformNames)if(A[B]){const E=w.getBinding(r,A[B],B);h.push({name:B,property:m,binding:E})}}}return h}setUniforms(r,A,h,m){for(const{name:w,property:B,binding:E}of A)this.binders[B].setUniform(E,m,h.get(B),w)}updatePaintBuffers(r){this._buffers=[];for(const A in this.binders){const h=this.binders[A];if(r&&h instanceof na){const m=r.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof ks||h instanceof hs)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(r){for(const A in this.binders){const h=this.binders[A];(h instanceof ks||h instanceof hs||h instanceof na)&&h.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const A=this.binders[r];(A instanceof ks||A instanceof hs||A instanceof na)&&A.destroy()}}}class ps{constructor(r,A){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:()=>!0;this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new OA(m,A,h);this.needsUpload=!1,this._featureMap=new li,this._bufferOffset=0}populatePaintArrays(r,A,h,m,w,B){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(r,A,m,w,B);A.id!==void 0&&this._featureMap.add(A.id,h,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,A,h,m){for(const w of h)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(r,this._featureMap,A,w,m)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function Yu(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function Ca(o,r,A){const h={color:{source:Ra,composite:ge},number:{source:k,composite:Ra}},m=function(w){return{"line-pattern":{source:dt,composite:dt},"fill-pattern":{source:dt,composite:dt},"fill-extrusion-pattern":{source:dt,composite:dt}}[w]}(o);return m&&m[A]||h[r][A]}Zt("ConstantBinder",_n),Zt("CrossFadedConstantBinder",gi),Zt("SourceExpressionBinder",ks),Zt("CrossFadedCompositeBinder",na),Zt("CompositeExpressionBinder",hs),Zt("ProgramConfiguration",OA,{omit:["_buffers"]}),Zt("ProgramConfigurationSet",ps);const Si=8192,RA=Math.pow(2,14)-1,fp=-RA-1;function Ao(o){const r=Si/o.extent,A=o.loadGeometry();for(let h=0;h<A.length;h++){const m=A[h];for(let w=0;w<m.length;w++){const B=m[w],E=Math.round(B.x*r),U=Math.round(B.y*r);B.x=Pe(E,fp,RA),B.y=Pe(U,fp,RA),(E<B.x||E>B.x+1||U<B.y||U>B.y+1)&&_e("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function zA(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?Ao(o):[]}}function wl(o,r,A,h,m){o.emplaceBack(2*r+(h+1)/2,2*A+(m+1)/2)}class Jc{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(A=>A.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Qe,this.indexArray=new kt,this.segments=new pr,this.programConfigurations=new ps(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(r,A,h){const m=this.layers[0],w=[];let B=null,E=!1;m.type==="circle"&&(B=m.layout.get("circle-sort-key"),E=!B.isConstant());for(const{feature:U,id:D,index:V,sourceLayerIndex:W}of r){const te=this.layers[0]._featureFilter.needGeometry,ae=zA(U,te);if(!this.layers[0]._featureFilter.filter(new xi(this.zoom),ae,h))continue;const oe=E?B.evaluate(ae,{},h):void 0,me={id:D,properties:U.properties,type:U.type,sourceLayerIndex:W,index:V,geometry:te?ae.geometry:Ao(U),patterns:{},sortKey:oe};w.push(me)}E&&w.sort((U,D)=>U.sortKey-D.sortKey);for(const U of w){const{geometry:D,index:V,sourceLayerIndex:W}=U,te=r[V].feature;this.addFeature(U,D,V,h),A.featureIndex.insert(te,D,V,W,this.index)}}update(r,A,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,kr),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,A,h,m){for(const w of A)for(const B of w){const E=B.x,U=B.y;if(E<0||E>=Si||U<0||U>=Si)continue;const D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),V=D.vertexLength;wl(this.layoutVertexArray,E,U,-1,-1),wl(this.layoutVertexArray,E,U,1,-1),wl(this.layoutVertexArray,E,U,1,1),wl(this.layoutVertexArray,E,U,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+3,V+2),D.vertexLength+=4,D.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,{},m)}}function eu(o,r){for(let A=0;A<o.length;A++)if(bl(r,o[A]))return!0;for(let A=0;A<r.length;A++)if(bl(o,r[A]))return!0;return!!ru(o,r)}function tu(o,r,A){return!!bl(o,r)||!!gp(r,o,A)}function Wf(o,r){if(o.length===1)return Xf(r,o[0]);for(let A=0;A<r.length;A++){const h=r[A];for(let m=0;m<h.length;m++)if(bl(o,h[m]))return!0}for(let A=0;A<o.length;A++)if(Xf(r,o[A]))return!0;for(let A=0;A<r.length;A++)if(ru(o,r[A]))return!0;return!1}function vy(o,r,A){if(o.length>1){if(ru(o,r))return!0;for(let h=0;h<r.length;h++)if(gp(r[h],o,A))return!0}for(let h=0;h<o.length;h++)if(gp(o[h],r,A))return!0;return!1}function ru(o,r){if(o.length===0||r.length===0)return!1;for(let A=0;A<o.length-1;A++){const h=o[A],m=o[A+1];for(let w=0;w<r.length-1;w++)if(HA(h,m,r[w],r[w+1]))return!0}return!1}function HA(o,r,A,h){return et(o,A,h)!==et(r,A,h)&&et(o,r,A)!==et(o,r,h)}function gp(o,r,A){const h=A*A;if(r.length===1)return o.distSqr(r[0])<h;for(let m=1;m<r.length;m++)if(Zf(o,r[m-1],r[m])<h)return!0;return!1}function Zf(o,r,A){const h=r.distSqr(A);if(h===0)return o.distSqr(r);const m=((o.x-r.x)*(A.x-r.x)+(o.y-r.y)*(A.y-r.y))/h;return o.distSqr(m<0?r:m>1?A:A.sub(r)._mult(m)._add(r))}function Xf(o,r){let A,h,m,w=!1;for(let B=0;B<o.length;B++){A=o[B];for(let E=0,U=A.length-1;E<A.length;U=E++)h=A[E],m=A[U],h.y>r.y!=m.y>r.y&&r.x<(m.x-h.x)*(r.y-h.y)/(m.y-h.y)+h.x&&(w=!w)}return w}function bl(o,r){let A=!1;for(let h=0,m=o.length-1;h<o.length;m=h++){const w=o[h],B=o[m];w.y>r.y!=B.y>r.y&&r.x<(B.x-w.x)*(r.y-w.y)/(B.y-w.y)+w.x&&(A=!A)}return A}function Ju(o,r,A){const h=A[0],m=A[2];if(o.x<h.x&&r.x<h.x||o.x>m.x&&r.x>m.x||o.y<h.y&&r.y<h.y||o.y>m.y&&r.y>m.y)return!1;const w=et(o,r,A[0]);return w!==et(o,r,A[1])||w!==et(o,r,A[2])||w!==et(o,r,A[3])}function cc(o,r,A){const h=r.paint.get(o).value;return h.kind==="constant"?h.value:A.programConfigurations.get(r.id).getMaxValue(o)}function iu(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function xl(o,r,A,h,m){if(!r[0]&&!r[1])return o;const w=M.convert(r)._mult(m);A==="viewport"&&w._rotate(-h);const B=[];for(let E=0;E<o.length;E++)B.push(o[E].sub(w));return B}let eh,uc;Zt("CircleBucket",Jc,{omit:["layers"]});var Yf={get paint(){return uc=uc||new ui({"circle-radius":new _r(ze.paint_circle["circle-radius"]),"circle-color":new _r(ze.paint_circle["circle-color"]),"circle-blur":new _r(ze.paint_circle["circle-blur"]),"circle-opacity":new _r(ze.paint_circle["circle-opacity"]),"circle-translate":new Ar(ze.paint_circle["circle-translate"]),"circle-translate-anchor":new Ar(ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ar(ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ar(ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _r(ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _r(ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _r(ze.paint_circle["circle-stroke-opacity"])})},get layout(){return eh=eh||new ui({"circle-sort-key":new _r(ze.layout_circle["circle-sort-key"])})}},ts=1e-6,Wo=typeof Float32Array<"u"?Float32Array:Array;function th(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function rh(o,r,A){var h=r[0],m=r[1],w=r[2],B=r[3],E=r[4],U=r[5],D=r[6],V=r[7],W=r[8],te=r[9],ae=r[10],oe=r[11],me=r[12],Be=r[13],ke=r[14],Ze=r[15],je=A[0],Xe=A[1],At=A[2],mt=A[3];return o[0]=je*h+Xe*E+At*W+mt*me,o[1]=je*m+Xe*U+At*te+mt*Be,o[2]=je*w+Xe*D+At*ae+mt*ke,o[3]=je*B+Xe*V+At*oe+mt*Ze,o[4]=(je=A[4])*h+(Xe=A[5])*E+(At=A[6])*W+(mt=A[7])*me,o[5]=je*m+Xe*U+At*te+mt*Be,o[6]=je*w+Xe*D+At*ae+mt*ke,o[7]=je*B+Xe*V+At*oe+mt*Ze,o[8]=(je=A[8])*h+(Xe=A[9])*E+(At=A[10])*W+(mt=A[11])*me,o[9]=je*m+Xe*U+At*te+mt*Be,o[10]=je*w+Xe*D+At*ae+mt*ke,o[11]=je*B+Xe*V+At*oe+mt*Ze,o[12]=(je=A[12])*h+(Xe=A[13])*E+(At=A[14])*W+(mt=A[15])*me,o[13]=je*m+Xe*U+At*te+mt*Be,o[14]=je*w+Xe*D+At*ae+mt*ke,o[15]=je*B+Xe*V+At*oe+mt*Ze,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var Sa,Jf=rh;function nu(o,r,A){var h=r[0],m=r[1],w=r[2],B=r[3];return o[0]=A[0]*h+A[4]*m+A[8]*w+A[12]*B,o[1]=A[1]*h+A[5]*m+A[9]*w+A[13]*B,o[2]=A[2]*h+A[6]*m+A[10]*w+A[14]*B,o[3]=A[3]*h+A[7]*m+A[11]*w+A[15]*B,o}Sa=new Wo(4),Wo!=Float32Array&&(Sa[0]=0,Sa[1]=0,Sa[2]=0,Sa[3]=0);class _y extends Qs{constructor(r){super(r,Yf)}createBucket(r){return new Jc(r)}queryRadius(r){const A=r;return cc("circle-radius",this,A)+cc("circle-stroke-width",this,A)+iu(this.paint.get("circle-translate"))}queryIntersectsFeature(r,A,h,m,w,B,E,U){const D=xl(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),B.angle,E),V=this.paint.get("circle-radius").evaluate(A,h)+this.paint.get("circle-stroke-width").evaluate(A,h),W=this.paint.get("circle-pitch-alignment")==="map",te=W?D:function(oe,me){return oe.map(Be=>mp(Be,me))}(D,U),ae=W?V*E:V;for(const oe of m)for(const me of oe){const Be=W?me:mp(me,U);let ke=ae;const Ze=nu([],[me.x,me.y,0,1],U);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ke*=Ze[3]/B.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ke*=B.cameraToCenterDistance/Ze[3]),tu(te,Be,ke))return!0}return!1}}function mp(o,r){const A=nu([],[o.x,o.y,0,1],r);return new M(A[0]/A[3],A[1]/A[3])}class Bl extends Jc{}let eg;Zt("HeatmapBucket",Bl,{omit:["layers"]});var tg={get paint(){return eg=eg||new ui({"heatmap-radius":new _r(ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _r(ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ar(ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xa(ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ar(ze.paint_heatmap["heatmap-opacity"])})}};function yp(o,r,A,h){let{width:m,height:w}=r;if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==m*w*A)throw new RangeError(`mismatched image size. expected: ${h.length} but got: ${m*w*A}`)}else h=new Uint8Array(m*w*A);return o.width=m,o.height=w,o.data=h,o}function vp(o,r,A){let{width:h,height:m}=r;if(h===o.width&&m===o.height)return;const w=yp({},{width:h,height:m},A);_p(o,w,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,h),height:Math.min(o.height,m)},A),o.width=h,o.height=m,o.data=w.data}function _p(o,r,A,h,m,w){if(m.width===0||m.height===0)return r;if(m.width>o.width||m.height>o.height||A.x>o.width-m.width||A.y>o.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||h.x>r.width-m.width||h.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const B=o.data,E=r.data;if(B===E)throw new Error("srcData equals dstData, so image is already copied");for(let U=0;U<m.height;U++){const D=((A.y+U)*o.width+A.x)*w,V=((h.y+U)*r.width+h.x)*w;for(let W=0;W<m.width*w;W++)E[V+W]=B[D+W]}return r}class Zo{constructor(r,A){yp(this,r,1,A)}resize(r){vp(this,r,1)}clone(){return new Zo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,A,h,m,w){_p(r,A,h,m,w,1)}}class ds{constructor(r,A){yp(this,r,4,A)}resize(r){vp(this,r,4)}replace(r,A){A?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new ds({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,A,h,m,w){_p(r,A,h,m,w,4)}}function su(o){const r={},A=o.resolution||256,h=o.clips?o.clips.length:1,m=o.image||new ds({width:A,height:h});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const w=(B,E,U)=>{r[o.evaluationKey]=U;const D=o.expression.evaluate(r);m.data[B+E+0]=Math.floor(255*D.r/D.a),m.data[B+E+1]=Math.floor(255*D.g/D.a),m.data[B+E+2]=Math.floor(255*D.b/D.a),m.data[B+E+3]=Math.floor(255*D.a)};if(o.clips)for(let B=0,E=0;B<h;++B,E+=4*A)for(let U=0,D=0;U<A;U++,D+=4){const V=U/(A-1),{start:W,end:te}=o.clips[B];w(E,D,W*(1-V)+te*V)}else for(let B=0,E=0;B<A;B++,E+=4)w(0,E,B/(A-1));return m}Zt("AlphaImage",Zo),Zt("RGBAImage",ds);class Xo extends Qs{createBucket(r){return new Bl(r)}constructor(r){super(r,tg),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=su({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Yo;var VA={get paint(){return Yo=Yo||new ui({"hillshade-illumination-direction":new Ar(ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ar(ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ar(ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ar(ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ar(ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ar(ze.paint_hillshade["hillshade-accent-color"])})}};class ih extends Qs{constructor(r){super(r,VA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const wp=Ui([{name:"a_pos",components:2,type:"Int16"}],4),{members:rg}=wp;var bp={exports:{}};function hc(o,r,A){A=A||2;var h,m,w,B,E,U,D,V=r&&r.length,W=V?r[0]*A:o.length,te=nh(o,0,W,A,!0),ae=[];if(!te||te.next===te.prev)return ae;if(V&&(te=function(me,Be,ke,Ze){var je,Xe,At,mt=[];for(je=0,Xe=Be.length;je<Xe;je++)(At=nh(me,Be[je]*Ze,je<Xe-1?Be[je+1]*Ze:me.length,Ze,!1))===At.next&&(At.steiner=!0),mt.push(zz(At));for(mt.sort(Nz),je=0;je<mt.length;je++)ke=Oz(mt[je],ke);return ke}(o,r,te,A)),o.length>80*A){h=w=o[0],m=B=o[1];for(var oe=A;oe<W;oe+=A)(E=o[oe])<h&&(h=E),(U=o[oe+1])<m&&(m=U),E>w&&(w=E),U>B&&(B=U);D=(D=Math.max(w-h,B-m))!==0?32767/D:0}return xp(te,ae,A,h,m,D,0),ae}function nh(o,r,A,h,m){var w,B;if(m===xy(o,r,A,h)>0)for(w=r;w<A;w+=h)B=sC(w,o[w],o[w+1],B);else for(w=A-h;w>=r;w-=h)B=sC(w,o[w],o[w+1],B);return B&&ig(B,B.next)&&(Cp(B),B=B.next),B}function au(o,r){if(!o)return o;r||(r=o);var A,h=o;do if(A=!1,h.steiner||!ig(h,h.next)&&rn(h.prev,h,h.next)!==0)h=h.next;else{if(Cp(h),(h=r=h.prev)===h.next)break;A=!0}while(A||h!==r);return r}function xp(o,r,A,h,m,w,B){if(o){!B&&w&&function(V,W,te,ae){var oe=V;do oe.z===0&&(oe.z=wy(oe.x,oe.y,W,te,ae)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==V);oe.prevZ.nextZ=null,oe.prevZ=null,function(me){var Be,ke,Ze,je,Xe,At,mt,Kt,ir=1;do{for(ke=me,me=null,Xe=null,At=0;ke;){for(At++,Ze=ke,mt=0,Be=0;Be<ir&&(mt++,Ze=Ze.nextZ);Be++);for(Kt=ir;mt>0||Kt>0&&Ze;)mt!==0&&(Kt===0||!Ze||ke.z<=Ze.z)?(je=ke,ke=ke.nextZ,mt--):(je=Ze,Ze=Ze.nextZ,Kt--),Xe?Xe.nextZ=je:me=je,je.prevZ=Xe,Xe=je;ke=Ze}Xe.nextZ=null,ir*=2}while(At>1)}(oe)}(o,h,m,w);for(var E,U,D=o;o.prev!==o.next;)if(E=o.prev,U=o.next,w?Qz(o,h,m,w):Mz(o))r.push(E.i/A|0),r.push(o.i/A|0),r.push(U.i/A|0),Cp(o),o=U.next,D=U.next;else if((o=U)===D){B?B===1?xp(o=kz(au(o),r,A),r,A,h,m,w,2):B===2&&Dz(o,r,A,h,m,w):xp(au(o),r,A,h,m,w,1);break}}}function Mz(o){var r=o.prev,A=o,h=o.next;if(rn(r,A,h)>=0)return!1;for(var m=r.x,w=A.x,B=h.x,E=r.y,U=A.y,D=h.y,V=m<w?m<B?m:B:w<B?w:B,W=E<U?E<D?E:D:U<D?U:D,te=m>w?m>B?m:B:w>B?w:B,ae=E>U?E>D?E:D:U>D?U:D,oe=h.next;oe!==r;){if(oe.x>=V&&oe.x<=te&&oe.y>=W&&oe.y<=ae&&sh(m,E,w,U,B,D,oe.x,oe.y)&&rn(oe.prev,oe,oe.next)>=0)return!1;oe=oe.next}return!0}function Qz(o,r,A,h){var m=o.prev,w=o,B=o.next;if(rn(m,w,B)>=0)return!1;for(var E=m.x,U=w.x,D=B.x,V=m.y,W=w.y,te=B.y,ae=E<U?E<D?E:D:U<D?U:D,oe=V<W?V<te?V:te:W<te?W:te,me=E>U?E>D?E:D:U>D?U:D,Be=V>W?V>te?V:te:W>te?W:te,ke=wy(ae,oe,r,A,h),Ze=wy(me,Be,r,A,h),je=o.prevZ,Xe=o.nextZ;je&&je.z>=ke&&Xe&&Xe.z<=Ze;){if(je.x>=ae&&je.x<=me&&je.y>=oe&&je.y<=Be&&je!==m&&je!==B&&sh(E,V,U,W,D,te,je.x,je.y)&&rn(je.prev,je,je.next)>=0||(je=je.prevZ,Xe.x>=ae&&Xe.x<=me&&Xe.y>=oe&&Xe.y<=Be&&Xe!==m&&Xe!==B&&sh(E,V,U,W,D,te,Xe.x,Xe.y)&&rn(Xe.prev,Xe,Xe.next)>=0))return!1;Xe=Xe.nextZ}for(;je&&je.z>=ke;){if(je.x>=ae&&je.x<=me&&je.y>=oe&&je.y<=Be&&je!==m&&je!==B&&sh(E,V,U,W,D,te,je.x,je.y)&&rn(je.prev,je,je.next)>=0)return!1;je=je.prevZ}for(;Xe&&Xe.z<=Ze;){if(Xe.x>=ae&&Xe.x<=me&&Xe.y>=oe&&Xe.y<=Be&&Xe!==m&&Xe!==B&&sh(E,V,U,W,D,te,Xe.x,Xe.y)&&rn(Xe.prev,Xe,Xe.next)>=0)return!1;Xe=Xe.nextZ}return!0}function kz(o,r,A){var h=o;do{var m=h.prev,w=h.next.next;!ig(m,w)&&iC(m,h,h.next,w)&&Bp(m,w)&&Bp(w,m)&&(r.push(m.i/A|0),r.push(h.i/A|0),r.push(w.i/A|0),Cp(h),Cp(h.next),h=o=w),h=h.next}while(h!==o);return au(h)}function Dz(o,r,A,h,m,w){var B=o;do{for(var E=B.next.next;E!==B.prev;){if(B.i!==E.i&&Hz(B,E)){var U=nC(B,E);return B=au(B,B.next),U=au(U,U.next),xp(B,r,A,h,m,w,0),void xp(U,r,A,h,m,w,0)}E=E.next}B=B.next}while(B!==o)}function Nz(o,r){return o.x-r.x}function Oz(o,r){var A=function(m,w){var B,E=w,U=m.x,D=m.y,V=-1/0;do{if(D<=E.y&&D>=E.next.y&&E.next.y!==E.y){var W=E.x+(D-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(W<=U&&W>V&&(V=W,B=E.x<E.next.x?E:E.next,W===U))return B}E=E.next}while(E!==w);if(!B)return null;var te,ae=B,oe=B.x,me=B.y,Be=1/0;E=B;do U>=E.x&&E.x>=oe&&U!==E.x&&sh(D<me?U:V,D,oe,me,D<me?V:U,D,E.x,E.y)&&(te=Math.abs(D-E.y)/(U-E.x),Bp(E,m)&&(te<Be||te===Be&&(E.x>B.x||E.x===B.x&&Rz(B,E)))&&(B=E,Be=te)),E=E.next;while(E!==ae);return B}(o,r);if(!A)return r;var h=nC(A,o);return au(h,h.next),au(A,A.next)}function Rz(o,r){return rn(o.prev,o,r.prev)<0&&rn(r.next,o,o.next)<0}function wy(o,r,A,h,m){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-A)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-h)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function zz(o){var r=o,A=o;do(r.x<A.x||r.x===A.x&&r.y<A.y)&&(A=r),r=r.next;while(r!==o);return A}function sh(o,r,A,h,m,w,B,E){return(m-B)*(r-E)>=(o-B)*(w-E)&&(o-B)*(h-E)>=(A-B)*(r-E)&&(A-B)*(w-E)>=(m-B)*(h-E)}function Hz(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(A,h){var m=A;do{if(m.i!==A.i&&m.next.i!==A.i&&m.i!==h.i&&m.next.i!==h.i&&iC(m,m.next,A,h))return!0;m=m.next}while(m!==A);return!1}(o,r)&&(Bp(o,r)&&Bp(r,o)&&function(A,h){var m=A,w=!1,B=(A.x+h.x)/2,E=(A.y+h.y)/2;do m.y>E!=m.next.y>E&&m.next.y!==m.y&&B<(m.next.x-m.x)*(E-m.y)/(m.next.y-m.y)+m.x&&(w=!w),m=m.next;while(m!==A);return w}(o,r)&&(rn(o.prev,o,r.prev)||rn(o,r.prev,r))||ig(o,r)&&rn(o.prev,o,o.next)>0&&rn(r.prev,r,r.next)>0)}function rn(o,r,A){return(r.y-o.y)*(A.x-r.x)-(r.x-o.x)*(A.y-r.y)}function ig(o,r){return o.x===r.x&&o.y===r.y}function iC(o,r,A,h){var m=sg(rn(o,r,A)),w=sg(rn(o,r,h)),B=sg(rn(A,h,o)),E=sg(rn(A,h,r));return m!==w&&B!==E||!(m!==0||!ng(o,A,r))||!(w!==0||!ng(o,h,r))||!(B!==0||!ng(A,o,h))||!(E!==0||!ng(A,r,h))}function ng(o,r,A){return r.x<=Math.max(o.x,A.x)&&r.x>=Math.min(o.x,A.x)&&r.y<=Math.max(o.y,A.y)&&r.y>=Math.min(o.y,A.y)}function sg(o){return o>0?1:o<0?-1:0}function Bp(o,r){return rn(o.prev,o,o.next)<0?rn(o,r,o.next)>=0&&rn(o,o.prev,r)>=0:rn(o,r,o.prev)<0||rn(o,o.next,r)<0}function nC(o,r){var A=new by(o.i,o.x,o.y),h=new by(r.i,r.x,r.y),m=o.next,w=r.prev;return o.next=r,r.prev=o,A.next=m,m.prev=A,h.next=A,A.prev=h,w.next=h,h.prev=w,h}function sC(o,r,A,h){var m=new by(o,r,A);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function Cp(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function by(o,r,A){this.i=o,this.x=r,this.y=A,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xy(o,r,A,h){for(var m=0,w=r,B=A-h;w<A;w+=h)m+=(o[B]-o[w])*(o[w+1]+o[B+1]),B=w;return m}bp.exports=hc,bp.exports.default=hc,hc.deviation=function(o,r,A,h){var m=r&&r.length,w=Math.abs(xy(o,0,m?r[0]*A:o.length,A));if(m)for(var B=0,E=r.length;B<E;B++)w-=Math.abs(xy(o,r[B]*A,B<E-1?r[B+1]*A:o.length,A));var U=0;for(B=0;B<h.length;B+=3){var D=h[B]*A,V=h[B+1]*A,W=h[B+2]*A;U+=Math.abs((o[D]-o[W])*(o[V+1]-o[D+1])-(o[D]-o[V])*(o[W+1]-o[D+1]))}return w===0&&U===0?0:Math.abs((U-w)/w)},hc.flatten=function(o){for(var r=o[0][0].length,A={vertices:[],holes:[],dimensions:r},h=0,m=0;m<o.length;m++){for(var w=0;w<o[m].length;w++)for(var B=0;B<r;B++)A.vertices.push(o[m][w][B]);m>0&&A.holes.push(h+=o[m-1].length)}return A};var aC=_(bp.exports);function Vz(o,r,A,h,m){oC(o,r,A||0,h||o.length-1,m||jz)}function oC(o,r,A,h,m){for(;h>A;){if(h-A>600){var w=h-A+1,B=r-A+1,E=Math.log(w),U=.5*Math.exp(2*E/3),D=.5*Math.sqrt(E*U*(w-U)/w)*(B-w/2<0?-1:1);oC(o,r,Math.max(A,Math.floor(r-B*U/w+D)),Math.min(h,Math.floor(r+(w-B)*U/w+D)),m)}var V=o[r],W=A,te=h;for(Sp(o,A,r),m(o[h],V)>0&&Sp(o,A,h);W<te;){for(Sp(o,W,te),W++,te--;m(o[W],V)<0;)W++;for(;m(o[te],V)>0;)te--}m(o[A],V)===0?Sp(o,A,te):Sp(o,++te,h),te<=r&&(A=te+1),r<=te&&(h=te-1)}}function Sp(o,r,A){var h=o[r];o[r]=o[A],o[A]=h}function jz(o,r){return o<r?-1:o>r?1:0}function By(o,r){const A=o.length;if(A<=1)return[o];const h=[];let m,w;for(let B=0;B<A;B++){const E=Je(o[B]);E!==0&&(o[B].area=Math.abs(E),w===void 0&&(w=E<0),w===E<0?(m&&h.push(m),m=[o[B]]):m.push(o[B]))}if(m&&h.push(m),r>1)for(let B=0;B<h.length;B++)h[B].length<=r||(Vz(h[B],r,1,h[B].length-1,Gz),h[B]=h[B].slice(0,r));return h}function Gz(o,r){return r.area-o.area}function Cy(o,r,A){const h=A.patternDependencies;let m=!1;for(const w of r){const B=w.paint.get(`${o}-pattern`);B.isConstant()||(m=!0);const E=B.constantOr(null);E&&(m=!0,h[E.to]=!0,h[E.from]=!0)}return m}function Sy(o,r,A,h,m){const w=m.patternDependencies;for(const B of r){const E=B.paint.get(`${o}-pattern`).value;if(E.kind!=="constant"){let U=E.evaluate({zoom:h-1},A,{},m.availableImages),D=E.evaluate({zoom:h},A,{},m.availableImages),V=E.evaluate({zoom:h+1},A,{},m.availableImages);U=U&&U.name?U.name:U,D=D&&D.name?D.name:D,V=V&&V.name?V.name:V,w[U]=!0,w[D]=!0,w[V]=!0,A.patterns[B.id]={min:U,mid:D,max:V}}}return A}class Ey{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(A=>A.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ut,this.indexArray=new kt,this.indexArray2=new Er,this.programConfigurations=new ps(r.layers,r.zoom),this.segments=new pr,this.segments2=new pr,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(r,A,h){this.hasPattern=Cy("fill",this.layers,A);const m=this.layers[0].layout.get("fill-sort-key"),w=!m.isConstant(),B=[];for(const{feature:E,id:U,index:D,sourceLayerIndex:V}of r){const W=this.layers[0]._featureFilter.needGeometry,te=zA(E,W);if(!this.layers[0]._featureFilter.filter(new xi(this.zoom),te,h))continue;const ae=w?m.evaluate(te,{},h,A.availableImages):void 0,oe={id:U,properties:E.properties,type:E.type,sourceLayerIndex:V,index:D,geometry:W?te.geometry:Ao(E),patterns:{},sortKey:ae};B.push(oe)}w&&B.sort((E,U)=>E.sortKey-U.sortKey);for(const E of B){const{geometry:U,index:D,sourceLayerIndex:V}=E;if(this.hasPattern){const W=Sy("fill",this.layers,E,this.zoom,A);this.patternFeatures.push(W)}else this.addFeature(E,U,D,h,{});A.featureIndex.insert(r[D].feature,U,D,V,this.index)}}update(r,A,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,h)}addFeatures(r,A,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,A,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,rg),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,A,h,m,w){for(const B of By(A,500)){let E=0;for(const ae of B)E+=ae.length;const U=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),D=U.vertexLength,V=[],W=[];for(const ae of B){if(ae.length===0)continue;ae!==B[0]&&W.push(V.length/2);const oe=this.segments2.prepareSegment(ae.length,this.layoutVertexArray,this.indexArray2),me=oe.vertexLength;this.layoutVertexArray.emplaceBack(ae[0].x,ae[0].y),this.indexArray2.emplaceBack(me+ae.length-1,me),V.push(ae[0].x),V.push(ae[0].y);for(let Be=1;Be<ae.length;Be++)this.layoutVertexArray.emplaceBack(ae[Be].x,ae[Be].y),this.indexArray2.emplaceBack(me+Be-1,me+Be),V.push(ae[Be].x),V.push(ae[Be].y);oe.vertexLength+=ae.length,oe.primitiveLength+=ae.length}const te=aC(V,W);for(let ae=0;ae<te.length;ae+=3)this.indexArray.emplaceBack(D+te[ae],D+te[ae+1],D+te[ae+2]);U.vertexLength+=E,U.primitiveLength+=te.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,w,m)}}let AC,lC;Zt("FillBucket",Ey,{omit:["layers","patternFeatures"]});var qz={get paint(){return lC=lC||new ui({"fill-antialias":new Ar(ze.paint_fill["fill-antialias"]),"fill-opacity":new _r(ze.paint_fill["fill-opacity"]),"fill-color":new _r(ze.paint_fill["fill-color"]),"fill-outline-color":new _r(ze.paint_fill["fill-outline-color"]),"fill-translate":new Ar(ze.paint_fill["fill-translate"]),"fill-translate-anchor":new Ar(ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new _l(ze.paint_fill["fill-pattern"])})},get layout(){return AC=AC||new ui({"fill-sort-key":new _r(ze.layout_fill["fill-sort-key"])})}};class $z extends Qs{constructor(r){super(r,qz)}recalculate(r,A){super.recalculate(r,A);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Ey(r)}queryRadius(){return iu(this.paint.get("fill-translate"))}queryIntersectsFeature(r,A,h,m,w,B,E){return Wf(xl(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),B.angle,E),m)}isTileClipped(){return!0}}const Kz=Ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Wz=Ui([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Zz}=Kz;var pc={},Xz=C,cC=ah;function ah(o,r,A,h,m){this.properties={},this.extent=A,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=m,o.readFields(Yz,this,r)}function Yz(o,r,A){o==1?r.id=A.readVarint():o==2?function(h,m){for(var w=h.readVarint()+h.pos;h.pos<w;){var B=m._keys[h.readVarint()],E=m._values[h.readVarint()];m.properties[B]=E}}(A,r):o==3?r.type=A.readVarint():o==4&&(r._geometry=A.pos)}function Jz(o){for(var r,A,h=0,m=0,w=o.length,B=w-1;m<w;B=m++)h+=((A=o[B]).x-(r=o[m]).x)*(r.y+A.y);return h}ah.types=["Unknown","Point","LineString","Polygon"],ah.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,A=o.readVarint()+o.pos,h=1,m=0,w=0,B=0,E=[];o.pos<A;){if(m<=0){var U=o.readVarint();h=7&U,m=U>>3}if(m--,h===1||h===2)w+=o.readSVarint(),B+=o.readSVarint(),h===1&&(r&&E.push(r),r=[]),r.push(new Xz(w,B));else{if(h!==7)throw new Error("unknown command "+h);r&&r.push(r[0].clone())}}return r&&E.push(r),E},ah.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,A=1,h=0,m=0,w=0,B=1/0,E=-1/0,U=1/0,D=-1/0;o.pos<r;){if(h<=0){var V=o.readVarint();A=7&V,h=V>>3}if(h--,A===1||A===2)(m+=o.readSVarint())<B&&(B=m),m>E&&(E=m),(w+=o.readSVarint())<U&&(U=w),w>D&&(D=w);else if(A!==7)throw new Error("unknown command "+A)}return[B,U,E,D]},ah.prototype.toGeoJSON=function(o,r,A){var h,m,w=this.extent*Math.pow(2,A),B=this.extent*o,E=this.extent*r,U=this.loadGeometry(),D=ah.types[this.type];function V(ae){for(var oe=0;oe<ae.length;oe++){var me=ae[oe];ae[oe]=[360*(me.x+B)/w-180,360/Math.PI*Math.atan(Math.exp((180-360*(me.y+E)/w)*Math.PI/180))-90]}}switch(this.type){case 1:var W=[];for(h=0;h<U.length;h++)W[h]=U[h][0];V(U=W);break;case 2:for(h=0;h<U.length;h++)V(U[h]);break;case 3:for(U=function(ae){var oe=ae.length;if(oe<=1)return[ae];for(var me,Be,ke=[],Ze=0;Ze<oe;Ze++){var je=Jz(ae[Ze]);je!==0&&(Be===void 0&&(Be=je<0),Be===je<0?(me&&ke.push(me),me=[ae[Ze]]):me.push(ae[Ze]))}return me&&ke.push(me),ke}(U),h=0;h<U.length;h++)for(m=0;m<U[h].length;m++)V(U[h][m])}U.length===1?U=U[0]:D="Multi"+D;var te={type:"Feature",geometry:{type:D,coordinates:U},properties:this.properties};return"id"in this&&(te.id=this.id),te};var eH=cC,uC=hC;function hC(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(tH,this,r),this.length=this._features.length}function tH(o,r,A){o===15?r.version=A.readVarint():o===1?r.name=A.readString():o===5?r.extent=A.readVarint():o===2?r._features.push(A.pos):o===3?r._keys.push(A.readString()):o===4&&r._values.push(function(h){for(var m=null,w=h.readVarint()+h.pos;h.pos<w;){var B=h.readVarint()>>3;m=B===1?h.readString():B===2?h.readFloat():B===3?h.readDouble():B===4?h.readVarint64():B===5?h.readVarint():B===6?h.readSVarint():B===7?h.readBoolean():null}return m}(A))}hC.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new eH(this._pbf,r,this.extent,this._keys,this._values)};var rH=uC;function iH(o,r,A){if(o===3){var h=new rH(A,A.readVarint()+A.pos);h.length&&(r[h.name]=h)}}pc.VectorTile=function(o,r){this.layers=o.readFields(iH,{},r)},pc.VectorTileFeature=cC,pc.VectorTileLayer=uC;const nH=pc.VectorTileFeature.types,Fy=Math.pow(2,13);function Ep(o,r,A,h,m,w,B,E){o.emplaceBack(r,A,2*Math.floor(h*Fy)+B,m*Fy*2,w*Fy*2,Math.round(E))}class Iy{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(A=>A.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new He,this.centroidVertexArray=new Le,this.indexArray=new kt,this.programConfigurations=new ps(r.layers,r.zoom),this.segments=new pr,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(r,A,h){this.features=[],this.hasPattern=Cy("fill-extrusion",this.layers,A);for(const{feature:m,id:w,index:B,sourceLayerIndex:E}of r){const U=this.layers[0]._featureFilter.needGeometry,D=zA(m,U);if(!this.layers[0]._featureFilter.filter(new xi(this.zoom),D,h))continue;const V={id:w,sourceLayerIndex:E,index:B,geometry:U?D.geometry:Ao(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Sy("fill-extrusion",this.layers,V,this.zoom,A)):this.addFeature(V,V.geometry,B,h,{}),A.featureIndex.insert(m,V.geometry,B,E,this.index,!0)}}addFeatures(r,A,h){for(const m of this.features){const{geometry:w}=m;this.addFeature(m,w,m.index,A,h)}}update(r,A,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Zz),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,Wz.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,A,h,m,w){const B={x:0,y:0,vertexCount:0};for(const E of By(A,500)){let U=0;for(const oe of E)U+=oe.length;let D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const oe of E){if(oe.length===0||aH(oe))continue;let me=0;for(let Be=0;Be<oe.length;Be++){const ke=oe[Be];if(Be>=1){const Ze=oe[Be-1];if(!sH(ke,Ze)){D.vertexLength+4>pr.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const je=ke.sub(Ze)._perp()._unit(),Xe=Ze.dist(ke);me+Xe>32768&&(me=0),Ep(this.layoutVertexArray,ke.x,ke.y,je.x,je.y,0,0,me),Ep(this.layoutVertexArray,ke.x,ke.y,je.x,je.y,0,1,me),B.x+=2*ke.x,B.y+=2*ke.y,B.vertexCount+=2,me+=Xe,Ep(this.layoutVertexArray,Ze.x,Ze.y,je.x,je.y,0,0,me),Ep(this.layoutVertexArray,Ze.x,Ze.y,je.x,je.y,0,1,me),B.x+=2*Ze.x,B.y+=2*Ze.y,B.vertexCount+=2;const At=D.vertexLength;this.indexArray.emplaceBack(At,At+2,At+1),this.indexArray.emplaceBack(At+1,At+2,At+3),D.vertexLength+=4,D.primitiveLength+=2}}}}if(D.vertexLength+U>pr.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(U,this.layoutVertexArray,this.indexArray)),nH[r.type]!=="Polygon")continue;const V=[],W=[],te=D.vertexLength;for(const oe of E)if(oe.length!==0){oe!==E[0]&&W.push(V.length/2);for(let me=0;me<oe.length;me++){const Be=oe[me];Ep(this.layoutVertexArray,Be.x,Be.y,0,0,1,1,0),B.x+=Be.x,B.y+=Be.y,B.vertexCount+=1,V.push(Be.x),V.push(Be.y)}}const ae=aC(V,W);for(let oe=0;oe<ae.length;oe+=3)this.indexArray.emplaceBack(te+ae[oe],te+ae[oe+2],te+ae[oe+1]);D.primitiveLength+=ae.length/3,D.vertexLength+=U}for(let E=0;E<B.vertexCount;E++)this.centroidVertexArray.emplaceBack(Math.floor(B.x/B.vertexCount),Math.floor(B.y/B.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,w,m)}}function sH(o,r){return o.x===r.x&&(o.x<0||o.x>Si)||o.y===r.y&&(o.y<0||o.y>Si)}function aH(o){return o.every(r=>r.x<0)||o.every(r=>r.x>Si)||o.every(r=>r.y<0)||o.every(r=>r.y>Si)}let pC;Zt("FillExtrusionBucket",Iy,{omit:["layers","features"]});var oH={get paint(){return pC=pC||new ui({"fill-extrusion-opacity":new Ar(ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _r(ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ar(ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ar(ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new _l(ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _r(ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _r(ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ar(ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class AH extends Qs{constructor(r){super(r,oH)}createBucket(r){return new Iy(r)}queryRadius(){return iu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,A,h,m,w,B,E,U){const D=xl(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),B.angle,E),V=this.paint.get("fill-extrusion-height").evaluate(A,h),W=this.paint.get("fill-extrusion-base").evaluate(A,h),te=function(oe,me,Be,ke){const Ze=[];for(const je of oe){const Xe=[je.x,je.y,0,1];nu(Xe,Xe,me),Ze.push(new M(Xe[0]/Xe[3],Xe[1]/Xe[3]))}return Ze}(D,U),ae=function(oe,me,Be,ke){const Ze=[],je=[],Xe=ke[8]*me,At=ke[9]*me,mt=ke[10]*me,Kt=ke[11]*me,ir=ke[8]*Be,qt=ke[9]*Be,Ht=ke[10]*Be,Dt=ke[11]*Be;for(const er of oe){const Ot=[],St=[];for(const yr of er){const lr=yr.x,jr=yr.y,Pi=ke[0]*lr+ke[4]*jr+ke[12],Ni=ke[1]*lr+ke[5]*jr+ke[13],bn=ke[2]*lr+ke[6]*jr+ke[14],Ea=ke[3]*lr+ke[7]*jr+ke[15],Ds=bn+mt,An=Ea+Kt,Hn=Pi+ir,is=Ni+qt,Ns=bn+Ht,Os=Ea+Dt,xn=new M((Pi+Xe)/An,(Ni+At)/An);xn.z=Ds/An,Ot.push(xn);const Bn=new M(Hn/Os,is/Os);Bn.z=Ns/Os,St.push(Bn)}Ze.push(Ot),je.push(St)}return[Ze,je]}(m,W,V,U);return function(oe,me,Be){let ke=1/0;Wf(Be,me)&&(ke=dC(Be,me[0]));for(let Ze=0;Ze<me.length;Ze++){const je=me[Ze],Xe=oe[Ze];for(let At=0;At<je.length-1;At++){const mt=je[At],Kt=[mt,je[At+1],Xe[At+1],Xe[At],mt];eu(Be,Kt)&&(ke=Math.min(ke,dC(Be,Kt)))}}return ke!==1/0&&ke}(ae[0],ae[1],te)}}function Fp(o,r){return o.x*r.x+o.y*r.y}function dC(o,r){if(o.length===1){let A=0;const h=r[A++];let m;for(;!m||h.equals(m);)if(m=r[A++],!m)return 1/0;for(;A<r.length;A++){const w=r[A],B=o[0],E=m.sub(h),U=w.sub(h),D=B.sub(h),V=Fp(E,E),W=Fp(E,U),te=Fp(U,U),ae=Fp(D,E),oe=Fp(D,U),me=V*te-W*W,Be=(te*ae-W*oe)/me,ke=(V*oe-W*ae)/me,Ze=h.z*(1-Be-ke)+m.z*Be+w.z*ke;if(isFinite(Ze))return Ze}return 1/0}{let A=1/0;for(const h of r)A=Math.min(A,h.z);return A}}const lH=Ui([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:cH}=lH,uH=Ui([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:hH}=uH,pH=pc.VectorTileFeature.types,dH=Math.cos(Math.PI/180*37.5),fC=Math.pow(2,14)/.5;class Ly{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(A=>A.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(A=>{this.gradients[A.id]={}}),this.layoutVertexArray=new Fe,this.layoutVertexArray2=new Ie,this.indexArray=new kt,this.programConfigurations=new ps(r.layers,r.zoom),this.segments=new pr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(r,A,h){this.hasPattern=Cy("line",this.layers,A);const m=this.layers[0].layout.get("line-sort-key"),w=!m.isConstant(),B=[];for(const{feature:E,id:U,index:D,sourceLayerIndex:V}of r){const W=this.layers[0]._featureFilter.needGeometry,te=zA(E,W);if(!this.layers[0]._featureFilter.filter(new xi(this.zoom),te,h))continue;const ae=w?m.evaluate(te,{},h):void 0,oe={id:U,properties:E.properties,type:E.type,sourceLayerIndex:V,index:D,geometry:W?te.geometry:Ao(E),patterns:{},sortKey:ae};B.push(oe)}w&&B.sort((E,U)=>E.sortKey-U.sortKey);for(const E of B){const{geometry:U,index:D,sourceLayerIndex:V}=E;if(this.hasPattern){const W=Sy("line",this.layers,E,this.zoom,A);this.patternFeatures.push(W)}else this.addFeature(E,U,D,h,{});A.featureIndex.insert(r[D].feature,U,D,V,this.index)}}update(r,A,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,h)}addFeatures(r,A,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,A,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,hH)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,cH),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,A,h,m,w){const B=this.layers[0].layout,E=B.get("line-join").evaluate(r,{}),U=B.get("line-cap"),D=B.get("line-miter-limit"),V=B.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const W of A)this.addLine(W,r,E,U,D,V);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,w,m)}addLine(r,A,h,m,w,B){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ke=0;ke<r.length-1;ke++)this.totalDistance+=r[ke].dist(r[ke+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E=pH[A.type]==="Polygon";let U=r.length;for(;U>=2&&r[U-1].equals(r[U-2]);)U--;let D=0;for(;D<U-1&&r[D].equals(r[D+1]);)D++;if(U<(E?3:2))return;h==="bevel"&&(w=1.05);const V=this.overscaling<=16?15*Si/(512*this.overscaling):0,W=this.segments.prepareSegment(10*U,this.layoutVertexArray,this.indexArray);let te,ae,oe,me,Be;this.e1=this.e2=-1,E&&(te=r[U-2],Be=r[D].sub(te)._unit()._perp());for(let ke=D;ke<U;ke++){if(oe=ke===U-1?E?r[D+1]:void 0:r[ke+1],oe&&r[ke].equals(oe))continue;Be&&(me=Be),te&&(ae=te),te=r[ke],Be=oe?oe.sub(te)._unit()._perp():me,me=me||Be;let Ze=me.add(Be);Ze.x===0&&Ze.y===0||Ze._unit();const je=me.x*Be.x+me.y*Be.y,Xe=Ze.x*Be.x+Ze.y*Be.y,At=Xe!==0?1/Xe:1/0,mt=2*Math.sqrt(2-2*Xe),Kt=Xe<dH&&ae&&oe,ir=me.x*Be.y-me.y*Be.x>0;if(Kt&&ke>D){const Dt=te.dist(ae);if(Dt>2*V){const er=te.sub(te.sub(ae)._mult(V/Dt)._round());this.updateDistance(ae,er),this.addCurrentVertex(er,me,0,0,W),ae=er}}const qt=ae&&oe;let Ht=qt?h:E?"butt":m;if(qt&&Ht==="round"&&(At<B?Ht="miter":At<=2&&(Ht="fakeround")),Ht==="miter"&&At>w&&(Ht="bevel"),Ht==="bevel"&&(At>2&&(Ht="flipbevel"),At<w&&(Ht="miter")),ae&&this.updateDistance(ae,te),Ht==="miter")Ze._mult(At),this.addCurrentVertex(te,Ze,0,0,W);else if(Ht==="flipbevel"){if(At>100)Ze=Be.mult(-1);else{const Dt=At*me.add(Be).mag()/me.sub(Be).mag();Ze._perp()._mult(Dt*(ir?-1:1))}this.addCurrentVertex(te,Ze,0,0,W),this.addCurrentVertex(te,Ze.mult(-1),0,0,W)}else if(Ht==="bevel"||Ht==="fakeround"){const Dt=-Math.sqrt(At*At-1),er=ir?Dt:0,Ot=ir?0:Dt;if(ae&&this.addCurrentVertex(te,me,er,Ot,W),Ht==="fakeround"){const St=Math.round(180*mt/Math.PI/20);for(let yr=1;yr<St;yr++){let lr=yr/St;if(lr!==.5){const Pi=lr-.5;lr+=lr*Pi*(lr-1)*((1.0904+je*(je*(3.55645-1.43519*je)-3.2452))*Pi*Pi+(.848013+je*(.215638*je-1.06021)))}const jr=Be.sub(me)._mult(lr)._add(me)._unit()._mult(ir?-1:1);this.addHalfVertex(te,jr.x,jr.y,!1,ir,0,W)}}oe&&this.addCurrentVertex(te,Be,-er,-Ot,W)}else if(Ht==="butt")this.addCurrentVertex(te,Ze,0,0,W);else if(Ht==="square"){const Dt=ae?1:-1;this.addCurrentVertex(te,Ze,Dt,Dt,W)}else Ht==="round"&&(ae&&(this.addCurrentVertex(te,me,0,0,W),this.addCurrentVertex(te,me,1,1,W,!0)),oe&&(this.addCurrentVertex(te,Be,-1,-1,W,!0),this.addCurrentVertex(te,Be,0,0,W)));if(Kt&&ke<U-1){const Dt=te.dist(oe);if(Dt>2*V){const er=te.add(oe.sub(te)._mult(V/Dt)._round());this.updateDistance(te,er),this.addCurrentVertex(er,Be,0,0,W),te=er}}}}addCurrentVertex(r,A,h,m,w){let B=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;const E=A.y*m-A.x,U=-A.y-A.x*m;this.addHalfVertex(r,A.x+A.y*h,A.y-A.x*h,B,!1,h,w),this.addHalfVertex(r,E,U,B,!0,-m,w),this.distance>fC/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,A,h,m,w,B))}addHalfVertex(r,A,h,m,w,B,E){let{x:U,y:D}=r;const V=.5*(this.lineClips?this.scaledDistance*(fC-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((U<<1)+(m?1:0),(D<<1)+(w?1:0),Math.round(63*A)+128,Math.round(63*h)+128,1+(B===0?0:B<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const W=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,W),E.primitiveLength++),w?this.e2=W:this.e1=W}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,A){this.distance+=r.dist(A),this.updateScaledDistance()}}let gC,mC;Zt("LineBucket",Ly,{omit:["layers","patternFeatures"]});var yC={get paint(){return mC=mC||new ui({"line-opacity":new _r(ze.paint_line["line-opacity"]),"line-color":new _r(ze.paint_line["line-color"]),"line-translate":new Ar(ze.paint_line["line-translate"]),"line-translate-anchor":new Ar(ze.paint_line["line-translate-anchor"]),"line-width":new _r(ze.paint_line["line-width"]),"line-gap-width":new _r(ze.paint_line["line-gap-width"]),"line-offset":new _r(ze.paint_line["line-offset"]),"line-blur":new _r(ze.paint_line["line-blur"]),"line-dasharray":new Zc(ze.paint_line["line-dasharray"]),"line-pattern":new _l(ze.paint_line["line-pattern"]),"line-gradient":new xa(ze.paint_line["line-gradient"])})},get layout(){return gC=gC||new ui({"line-cap":new Ar(ze.layout_line["line-cap"]),"line-join":new _r(ze.layout_line["line-join"]),"line-miter-limit":new Ar(ze.layout_line["line-miter-limit"]),"line-round-limit":new Ar(ze.layout_line["line-round-limit"]),"line-sort-key":new _r(ze.layout_line["line-sort-key"])})}};class fH extends _r{possiblyEvaluate(r,A){return A=new xi(Math.floor(A.zoom),{now:A.now,fadeDuration:A.fadeDuration,zoomHistory:A.zoomHistory,transition:A.transition}),super.possiblyEvaluate(r,A)}evaluate(r,A,h,m){return A=fe({},A,{zoom:Math.floor(A.zoom)}),super.evaluate(r,A,h,m)}}let ag;class gH extends Qs{constructor(r){super(r,yC),this.gradientVersion=0,ag||(ag=new fH(yC.paint.properties["line-width"].specification),ag.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const A=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(A)&&A._styleExpression.expression instanceof Kn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,A){super.recalculate(r,A),this.paint._values["line-floorwidth"]=ag.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Ly(r)}queryRadius(r){const A=r,h=vC(cc("line-width",this,A),cc("line-gap-width",this,A)),m=cc("line-offset",this,A);return h/2+Math.abs(m)+iu(this.paint.get("line-translate"))}queryIntersectsFeature(r,A,h,m,w,B,E){const U=xl(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),B.angle,E),D=E/2*vC(this.paint.get("line-width").evaluate(A,h),this.paint.get("line-gap-width").evaluate(A,h)),V=this.paint.get("line-offset").evaluate(A,h);return V&&(m=function(W,te){const ae=[];for(let oe=0;oe<W.length;oe++){const me=W[oe],Be=[];for(let ke=0;ke<me.length;ke++){const Ze=me[ke-1],je=me[ke],Xe=me[ke+1],At=ke===0?new M(0,0):je.sub(Ze)._unit()._perp(),mt=ke===me.length-1?new M(0,0):Xe.sub(je)._unit()._perp(),Kt=At._add(mt)._unit(),ir=Kt.x*mt.x+Kt.y*mt.y;ir!==0&&Kt._mult(1/ir),Be.push(Kt._mult(te)._add(je))}ae.push(Be)}return ae}(m,V*E)),function(W,te,ae){for(let oe=0;oe<te.length;oe++){const me=te[oe];if(W.length>=3){for(let Be=0;Be<me.length;Be++)if(bl(W,me[Be]))return!0}if(vy(W,me,ae))return!0}return!1}(U,m,D)}isTileClipped(){return!0}}function vC(o,r){return r>0?r+2*o:o}const mH=Ui([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),yH=Ui([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ui([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const vH=Ui([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Ui([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const _C=Ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),_H=Ui([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function wH(o,r,A){return o.sections.forEach(h=>{h.text=function(m,w,B){const E=w.layout.get("text-transform").evaluate(B,{});return E==="uppercase"?m=m.toLocaleUpperCase():E==="lowercase"&&(m=m.toLocaleLowerCase()),cs.applyArabicShaping&&(m=cs.applyArabicShaping(m)),m}(h.text,r,A)}),o}Ui([{name:"triangle",components:3,type:"Uint16"}]),Ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ui([{type:"Float32",name:"offsetX"}]),Ui([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ui([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ip={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var wn=24,wC=vi,bC=function(o,r,A,h,m){var w,B,E=8*m-h-1,U=(1<<E)-1,D=U>>1,V=-7,W=A?m-1:0,te=A?-1:1,ae=o[r+W];for(W+=te,w=ae&(1<<-V)-1,ae>>=-V,V+=E;V>0;w=256*w+o[r+W],W+=te,V-=8);for(B=w&(1<<-V)-1,w>>=-V,V+=h;V>0;B=256*B+o[r+W],W+=te,V-=8);if(w===0)w=1-D;else{if(w===U)return B?NaN:1/0*(ae?-1:1);B+=Math.pow(2,h),w-=D}return(ae?-1:1)*B*Math.pow(2,w-h)},xC=function(o,r,A,h,m,w){var B,E,U,D=8*w-m-1,V=(1<<D)-1,W=V>>1,te=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,ae=h?0:w-1,oe=h?1:-1,me=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(E=isNaN(r)?1:0,B=V):(B=Math.floor(Math.log(r)/Math.LN2),r*(U=Math.pow(2,-B))<1&&(B--,U*=2),(r+=B+W>=1?te/U:te*Math.pow(2,1-W))*U>=2&&(B++,U/=2),B+W>=V?(E=0,B=V):B+W>=1?(E=(r*U-1)*Math.pow(2,m),B+=W):(E=r*Math.pow(2,W-1)*Math.pow(2,m),B=0));m>=8;o[A+ae]=255&E,ae+=oe,E/=256,m-=8);for(B=B<<m|E,D+=m;D>0;o[A+ae]=255&B,ae+=oe,B/=256,D-=8);o[A+ae-oe]|=128*me};function vi(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}vi.Varint=0,vi.Fixed64=1,vi.Bytes=2,vi.Fixed32=5;var Ty=4294967296,BC=1/Ty,CC=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Cl(o){return o.type===vi.Bytes?o.readVarint()+o.pos:o.pos+1}function oh(o,r,A){return A?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function SC(o,r,A){var h=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));A.realloc(h);for(var m=A.pos-1;m>=o;m--)A.buf[m+h]=A.buf[m]}function bH(o,r){for(var A=0;A<o.length;A++)r.writeVarint(o[A])}function xH(o,r){for(var A=0;A<o.length;A++)r.writeSVarint(o[A])}function BH(o,r){for(var A=0;A<o.length;A++)r.writeFloat(o[A])}function CH(o,r){for(var A=0;A<o.length;A++)r.writeDouble(o[A])}function SH(o,r){for(var A=0;A<o.length;A++)r.writeBoolean(o[A])}function EH(o,r){for(var A=0;A<o.length;A++)r.writeFixed32(o[A])}function FH(o,r){for(var A=0;A<o.length;A++)r.writeSFixed32(o[A])}function IH(o,r){for(var A=0;A<o.length;A++)r.writeFixed64(o[A])}function LH(o,r){for(var A=0;A<o.length;A++)r.writeSFixed64(o[A])}function og(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function Ah(o,r,A){o[A]=r,o[A+1]=r>>>8,o[A+2]=r>>>16,o[A+3]=r>>>24}function EC(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}vi.prototype={destroy:function(){this.buf=null},readFields:function(o,r,A){for(A=A||this.length;this.pos<A;){var h=this.readVarint(),m=h>>3,w=this.pos;this.type=7&h,o(m,r,this),this.pos===w&&this.skip(h)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=og(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=EC(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=og(this.buf,this.pos)+og(this.buf,this.pos+4)*Ty;return this.pos+=8,o},readSFixed64:function(){var o=og(this.buf,this.pos)+EC(this.buf,this.pos+4)*Ty;return this.pos+=8,o},readFloat:function(){var o=bC(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=bC(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,A,h=this.buf;return r=127&(A=h[this.pos++]),A<128?r:(r|=(127&(A=h[this.pos++]))<<7,A<128?r:(r|=(127&(A=h[this.pos++]))<<14,A<128?r:(r|=(127&(A=h[this.pos++]))<<21,A<128?r:function(m,w,B){var E,U,D=B.buf;if(E=(112&(U=D[B.pos++]))>>4,U<128||(E|=(127&(U=D[B.pos++]))<<3,U<128)||(E|=(127&(U=D[B.pos++]))<<10,U<128)||(E|=(127&(U=D[B.pos++]))<<17,U<128)||(E|=(127&(U=D[B.pos++]))<<24,U<128)||(E|=(1&(U=D[B.pos++]))<<31,U<128))return oh(m,E,w);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(A=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&CC?function(A,h,m){return CC.decode(A.subarray(h,m))}(this.buf,r,o):function(A,h,m){for(var w="",B=h;B<m;){var E,U,D,V=A[B],W=null,te=V>239?4:V>223?3:V>191?2:1;if(B+te>m)break;te===1?V<128&&(W=V):te===2?(192&(E=A[B+1]))==128&&(W=(31&V)<<6|63&E)<=127&&(W=null):te===3?(U=A[B+2],(192&(E=A[B+1]))==128&&(192&U)==128&&((W=(15&V)<<12|(63&E)<<6|63&U)<=2047||W>=55296&&W<=57343)&&(W=null)):te===4&&(U=A[B+2],D=A[B+3],(192&(E=A[B+1]))==128&&(192&U)==128&&(192&D)==128&&((W=(15&V)<<18|(63&E)<<12|(63&U)<<6|63&D)<=65535||W>=1114112)&&(W=null)),W===null?(W=65533,te=1):W>65535&&(W-=65536,w+=String.fromCharCode(W>>>10&1023|55296),W=56320|1023&W),w+=String.fromCharCode(W),B+=te}return w}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==vi.Bytes)return o.push(this.readVarint(r));var A=Cl(this);for(o=o||[];this.pos<A;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==vi.Bytes)return o.push(this.readSVarint());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==vi.Bytes)return o.push(this.readBoolean());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==vi.Bytes)return o.push(this.readFloat());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==vi.Bytes)return o.push(this.readDouble());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==vi.Bytes)return o.push(this.readFixed32());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==vi.Bytes)return o.push(this.readSFixed32());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==vi.Bytes)return o.push(this.readFixed64());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==vi.Bytes)return o.push(this.readSFixed64());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===vi.Varint)for(;this.buf[this.pos++]>127;);else if(r===vi.Bytes)this.pos=this.readVarint()+this.pos;else if(r===vi.Fixed32)this.pos+=4;else{if(r!==vi.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var A=new Uint8Array(r);A.set(this.buf),this.buf=A,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Ah(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Ah(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Ah(this.buf,-1&o,this.pos),Ah(this.buf,Math.floor(o*BC),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Ah(this.buf,-1&o,this.pos),Ah(this.buf,Math.floor(o*BC),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,A){var h,m;if(r>=0?(h=r%4294967296|0,m=r/4294967296|0):(m=~(-r/4294967296),4294967295^(h=~(-r%4294967296))?h=h+1|0:(h=0,m=m+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");A.realloc(10),function(w,B,E){E.buf[E.pos++]=127&w|128,w>>>=7,E.buf[E.pos++]=127&w|128,w>>>=7,E.buf[E.pos++]=127&w|128,w>>>=7,E.buf[E.pos++]=127&w|128,E.buf[E.pos]=127&(w>>>=7)}(h,0,A),function(w,B){var E=(7&w)<<4;B.buf[B.pos++]|=E|((w>>>=3)?128:0),w&&(B.buf[B.pos++]=127&w|((w>>>=7)?128:0),w&&(B.buf[B.pos++]=127&w|((w>>>=7)?128:0),w&&(B.buf[B.pos++]=127&w|((w>>>=7)?128:0),w&&(B.buf[B.pos++]=127&w|((w>>>=7)?128:0),w&&(B.buf[B.pos++]=127&w)))))}(m,A)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(h,m,w){for(var B,E,U=0;U<m.length;U++){if((B=m.charCodeAt(U))>55295&&B<57344){if(!E){B>56319||U+1===m.length?(h[w++]=239,h[w++]=191,h[w++]=189):E=B;continue}if(B<56320){h[w++]=239,h[w++]=191,h[w++]=189,E=B;continue}B=E-55296<<10|B-56320|65536,E=null}else E&&(h[w++]=239,h[w++]=191,h[w++]=189,E=null);B<128?h[w++]=B:(B<2048?h[w++]=B>>6|192:(B<65536?h[w++]=B>>12|224:(h[w++]=B>>18|240,h[w++]=B>>12&63|128),h[w++]=B>>6&63|128),h[w++]=63&B|128)}return w}(this.buf,o,this.pos);var A=this.pos-r;A>=128&&SC(r,A,this),this.pos=r-1,this.writeVarint(A),this.pos+=A},writeFloat:function(o){this.realloc(4),xC(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),xC(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var A=0;A<r;A++)this.buf[this.pos++]=o[A]},writeRawMessage:function(o,r){this.pos++;var A=this.pos;o(r,this);var h=this.pos-A;h>=128&&SC(A,h,this),this.pos=A-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,r,A){this.writeTag(o,vi.Bytes),this.writeRawMessage(r,A)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,bH,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,xH,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,SH,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,BH,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,CH,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,EH,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,FH,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,IH,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,LH,r)},writeBytesField:function(o,r){this.writeTag(o,vi.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,vi.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,vi.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,vi.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,vi.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,vi.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,vi.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,vi.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,vi.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,vi.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var Uy=_(wC);const Py=3;function TH(o,r,A){o===1&&A.readMessage(UH,r)}function UH(o,r,A){if(o===3){const{id:h,bitmap:m,width:w,height:B,left:E,top:U,advance:D}=A.readMessage(PH,{});r.push({id:h,bitmap:new Zo({width:w+2*Py,height:B+2*Py},m),metrics:{width:w,height:B,left:E,top:U,advance:D}})}}function PH(o,r,A){o===1?r.id=A.readVarint():o===2?r.bitmap=A.readBytes():o===3?r.width=A.readVarint():o===4?r.height=A.readVarint():o===5?r.left=A.readSVarint():o===6?r.top=A.readSVarint():o===7&&(r.advance=A.readVarint())}const FC=Py;function IC(o){let r=0,A=0;for(const B of o)r+=B.w*B.h,A=Math.max(A,B.w);o.sort((B,E)=>E.h-B.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),A),h:1/0}];let m=0,w=0;for(const B of o)for(let E=h.length-1;E>=0;E--){const U=h[E];if(!(B.w>U.w||B.h>U.h)){if(B.x=U.x,B.y=U.y,w=Math.max(w,B.y+B.h),m=Math.max(m,B.x+B.w),B.w===U.w&&B.h===U.h){const D=h.pop();E<h.length&&(h[E]=D)}else B.h===U.h?(U.x+=B.w,U.w-=B.w):B.w===U.w?(U.y+=B.h,U.h-=B.h):(h.push({x:U.x+B.w,y:U.y,w:U.w-B.w,h:B.h}),U.y+=B.h,U.h-=B.h);break}}return{w:m,h:w,fill:r/(m*w)||0}}const sa=1;class My{constructor(r,A){let{pixelRatio:h,version:m,stretchX:w,stretchY:B,content:E}=A;this.paddedRect=r,this.pixelRatio=h,this.stretchX=w,this.stretchY=B,this.content=E,this.version=m}get tl(){return[this.paddedRect.x+sa,this.paddedRect.y+sa]}get br(){return[this.paddedRect.x+this.paddedRect.w-sa,this.paddedRect.y+this.paddedRect.h-sa]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*sa)/this.pixelRatio,(this.paddedRect.h-2*sa)/this.pixelRatio]}}class LC{constructor(r,A){const h={},m={};this.haveRenderCallbacks=[];const w=[];this.addImages(r,h,w),this.addImages(A,m,w);const{w:B,h:E}=IC(w),U=new ds({width:B||1,height:E||1});for(const D in r){const V=r[D],W=h[D].paddedRect;ds.copy(V.data,U,{x:0,y:0},{x:W.x+sa,y:W.y+sa},V.data)}for(const D in A){const V=A[D],W=m[D].paddedRect,te=W.x+sa,ae=W.y+sa,oe=V.data.width,me=V.data.height;ds.copy(V.data,U,{x:0,y:0},{x:te,y:ae},V.data),ds.copy(V.data,U,{x:0,y:me-1},{x:te,y:ae-1},{width:oe,height:1}),ds.copy(V.data,U,{x:0,y:0},{x:te,y:ae+me},{width:oe,height:1}),ds.copy(V.data,U,{x:oe-1,y:0},{x:te-1,y:ae},{width:1,height:me}),ds.copy(V.data,U,{x:0,y:0},{x:te+oe,y:ae},{width:1,height:me})}this.image=U,this.iconPositions=h,this.patternPositions=m}addImages(r,A,h){for(const m in r){const w=r[m],B={x:0,y:0,w:w.data.width+2*sa,h:w.data.height+2*sa};h.push(B),A[m]=new My(B,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(r,A){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in r.updatedImages)this.patchUpdatedImage(this.iconPositions[h],r.getImage(h),A),this.patchUpdatedImage(this.patternPositions[h],r.getImage(h),A)}patchUpdatedImage(r,A,h){if(!r||!A||r.version===A.version)return;r.version=A.version;const[m,w]=r.tl;h.update(A.data,void 0,{x:m,y:w})}}var dc;Zt("ImagePosition",My),Zt("ImageAtlas",LC),a.ai=void 0,(dc=a.ai||(a.ai={}))[dc.none=0]="none",dc[dc.horizontal=1]="horizontal",dc[dc.vertical=2]="vertical",dc[dc.horizontalOnly=3]="horizontalOnly";const Lp=-17;class Tp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,A){const h=new Tp;return h.scale=r||1,h.fontStack=A,h}static forImage(r){const A=new Tp;return A.imageName=r,A}}class lh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,A){const h=new lh;for(let m=0;m<r.sections.length;m++){const w=r.sections[m];w.image?h.addImageSection(w):h.addTextSection(w,A)}return h}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let A="";for(let h=0;h<r.length;h++){const m=r.charCodeAt(h+1)||null,w=r.charCodeAt(h-1)||null;A+=m&&dl(m)&&!Ip[r[h+1]]||w&&dl(w)&&!Ip[r[h-1]]||!Ip[r[h]]?r[h]:Ip[r[h]]}return A}(this.text)}trim(){let r=0;for(let h=0;h<this.text.length&&lg[this.text.charCodeAt(h)];h++)r++;let A=this.text.length;for(let h=this.text.length-1;h>=0&&h>=r&&lg[this.text.charCodeAt(h)];h--)A--;this.text=this.text.substring(r,A),this.sectionIndex=this.sectionIndex.slice(r,A)}substring(r,A){const h=new lh;return h.text=this.text.substring(r,A),h.sectionIndex=this.sectionIndex.slice(r,A),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,A)=>Math.max(r,this.sections[A].scale),0)}addTextSection(r,A){this.text+=r.text,this.sections.push(Tp.forText(r.scale,r.fontStack||A));const h=this.sections.length-1;for(let m=0;m<r.text.length;++m)this.sectionIndex.push(h)}addImageSection(r){const A=r.image?r.image.name:"";if(A.length===0)return void _e("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Tp.forImage(A)),this.sectionIndex.push(this.sections.length-1)):_e("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ag(o,r,A,h,m,w,B,E,U,D,V,W,te,ae,oe,me){const Be=lh.fromFeature(o,m);let ke;W===a.ai.vertical&&Be.verticalizePunctuation();const{processBidirectionalText:Ze,processStyledBidirectionalText:je}=cs;if(Ze&&Be.sections.length===1){ke=[];const mt=Ze(Be.toString(),Qy(Be,D,w,r,h,ae,oe));for(const Kt of mt){const ir=new lh;ir.text=Kt,ir.sections=Be.sections;for(let qt=0;qt<Kt.length;qt++)ir.sectionIndex.push(0);ke.push(ir)}}else if(je){ke=[];const mt=je(Be.text,Be.sectionIndex,Qy(Be,D,w,r,h,ae,oe));for(const Kt of mt){const ir=new lh;ir.text=Kt[0],ir.sectionIndex=Kt[1],ir.sections=Be.sections,ke.push(ir)}}else ke=function(mt,Kt){const ir=[],qt=mt.text;let Ht=0;for(const Dt of Kt)ir.push(mt.substring(Ht,Dt)),Ht=Dt;return Ht<qt.length&&ir.push(mt.substring(Ht,qt.length)),ir}(Be,Qy(Be,D,w,r,h,ae,oe));const Xe=[],At={positionedLines:Xe,text:Be.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:W,iconsInText:!1,verticalizable:!1};return function(mt,Kt,ir,qt,Ht,Dt,er,Ot,St,yr,lr,jr){let Pi=0,Ni=Lp,bn=0,Ea=0;const Ds=Ot==="right"?1:Ot==="left"?0:.5;let An=0;for(const xn of Ht){xn.trim();const Bn=xn.getMaxScale(),fs=(Bn-1)*wn,Rs={positionedGlyphs:[],lineOffset:0};mt.positionedLines[An]=Rs;const gs=Rs.positionedGlyphs;let aa=0;if(!xn.length()){Ni+=Dt,++An;continue}for(let Cn=0;Cn<xn.length();Cn++){const Yr=xn.getSection(Cn),ms=xn.getSectionIndex(Cn),ns=xn.getCharCode(Cn);let Sn=0,lo=null,Jo=null,eA=null,Sl=wn;const co=!(St===a.ai.horizontal||!lr&&!Jn(ns)||lr&&(lg[ns]||(Hn=ns,Gt.Arabic(Hn)||Gt["Arabic Supplement"](Hn)||Gt["Arabic Extended-A"](Hn)||Gt["Arabic Presentation Forms-A"](Hn)||Gt["Arabic Presentation Forms-B"](Hn))));if(Yr.imageName){const Ha=qt[Yr.imageName];if(!Ha)continue;eA=Yr.imageName,mt.iconsInText=mt.iconsInText||!0,Jo=Ha.paddedRect;const Aa=Ha.displaySize;Yr.scale=Yr.scale*wn/jr,lo={width:Aa[0],height:Aa[1],left:sa,top:-FC,advance:co?Aa[1]:Aa[0]},Sn=fs+(wn-Aa[1]*Yr.scale),Sl=lo.advance;const El=co?Aa[0]*Yr.scale-wn*Bn:Aa[1]*Yr.scale-wn*Bn;El>0&&El>aa&&(aa=El)}else{const Ha=ir[Yr.fontStack],Aa=Ha&&Ha[ns];if(Aa&&Aa.rect)Jo=Aa.rect,lo=Aa.metrics;else{const El=Kt[Yr.fontStack],kp=El&&El[ns];if(!kp)continue;lo=kp.metrics}Sn=(Bn-Yr.scale)*wn}co?(mt.verticalizable=!0,gs.push({glyph:ns,imageName:eA,x:Pi,y:Ni+Sn,vertical:co,scale:Yr.scale,fontStack:Yr.fontStack,sectionIndex:ms,metrics:lo,rect:Jo}),Pi+=Sl*Yr.scale+yr):(gs.push({glyph:ns,imageName:eA,x:Pi,y:Ni+Sn,vertical:co,scale:Yr.scale,fontStack:Yr.fontStack,sectionIndex:ms,metrics:lo,rect:Jo}),Pi+=lo.advance*Yr.scale+yr)}gs.length!==0&&(bn=Math.max(Pi-yr,bn),kH(gs,0,gs.length-1,Ds,aa)),Pi=0;const oa=Dt*Bn+aa;Rs.lineOffset=Math.max(aa,fs),Ni+=oa,Ea=Math.max(oa,Ea),++An}var Hn;const is=Ni-Lp,{horizontalAlign:Ns,verticalAlign:Os}=ky(er);(function(xn,Bn,fs,Rs,gs,aa,oa,Cn,Yr){const ms=(Bn-fs)*gs;let ns=0;ns=aa!==oa?-Cn*Rs-Lp:(-Rs*Yr+.5)*oa;for(const Sn of xn)for(const lo of Sn.positionedGlyphs)lo.x+=ms,lo.y+=ns})(mt.positionedLines,Ds,Ns,Os,bn,Ea,Dt,is,Ht.length),mt.top+=-Os*is,mt.bottom=mt.top+is,mt.left+=-Ns*bn,mt.right=mt.left+bn}(At,r,A,h,ke,B,E,U,W,D,te,me),!function(mt){for(const Kt of mt)if(Kt.positionedGlyphs.length!==0)return!1;return!0}(Xe)&&At}const lg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},MH={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function TC(o,r,A,h,m,w){if(r.imageName){const B=h[r.imageName];return B?B.displaySize[0]*r.scale*wn/w+m:0}{const B=A[r.fontStack],E=B&&B[o];return E?E.metrics.advance*r.scale+m:0}}function UC(o,r,A,h){const m=Math.pow(o-r,2);return h?o<r?m/2:2*m:m+Math.abs(A)*A}function QH(o,r,A){let h=0;return o===10&&(h-=1e4),A&&(h+=150),o!==40&&o!==65288||(h+=50),r!==41&&r!==65289||(h+=50),h}function PC(o,r,A,h,m,w){let B=null,E=UC(r,A,m,w);for(const U of h){const D=UC(r-U.x,A,m,w)+U.badness;D<=E&&(B=U,E=D)}return{index:o,x:r,priorBreak:B,badness:E}}function MC(o){return o?MC(o.priorBreak).concat(o.index):[]}function Qy(o,r,A,h,m,w,B){if(w!=="point")return[];if(!o)return[];const E=[],U=function(te,ae,oe,me,Be,ke){let Ze=0;for(let je=0;je<te.length();je++){const Xe=te.getSection(je);Ze+=TC(te.getCharCode(je),Xe,me,Be,ae,ke)}return Ze/Math.max(1,Math.ceil(Ze/oe))}(o,r,A,h,m,B),D=o.text.indexOf("")>=0;let V=0;for(let te=0;te<o.length();te++){const ae=o.getSection(te),oe=o.getCharCode(te);if(lg[oe]||(V+=TC(oe,ae,h,m,r,B)),te<o.length()-1){const me=!((W=oe)<11904||!(Gt["Bopomofo Extended"](W)||Gt.Bopomofo(W)||Gt["CJK Compatibility Forms"](W)||Gt["CJK Compatibility Ideographs"](W)||Gt["CJK Compatibility"](W)||Gt["CJK Radicals Supplement"](W)||Gt["CJK Strokes"](W)||Gt["CJK Symbols and Punctuation"](W)||Gt["CJK Unified Ideographs Extension A"](W)||Gt["CJK Unified Ideographs"](W)||Gt["Enclosed CJK Letters and Months"](W)||Gt["Halfwidth and Fullwidth Forms"](W)||Gt.Hiragana(W)||Gt["Ideographic Description Characters"](W)||Gt["Kangxi Radicals"](W)||Gt["Katakana Phonetic Extensions"](W)||Gt.Katakana(W)||Gt["Vertical Forms"](W)||Gt["Yi Radicals"](W)||Gt["Yi Syllables"](W)));(MH[oe]||me||ae.imageName)&&E.push(PC(te+1,V,U,E,QH(oe,o.getCharCode(te+1),me&&D),!1))}}var W;return MC(PC(o.length(),V,U,E,0,!0))}function ky(o){let r=.5,A=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:r,verticalAlign:A}}function kH(o,r,A,h,m){if(!h&&!m)return;const w=o[A],B=(o[A].x+w.metrics.advance*w.scale)*h;for(let E=r;E<=A;E++)o[E].x-=B,o[E].y+=m}function DH(o,r,A){const{horizontalAlign:h,verticalAlign:m}=ky(A),w=r[0]-o.displaySize[0]*h,B=r[1]-o.displaySize[1]*m;return{image:o,top:B,bottom:B+o.displaySize[1],left:w,right:w+o.displaySize[0]}}function QC(o,r,A,h,m,w){const B=o.image;let E;if(B.content){const Be=B.content,ke=B.pixelRatio||1;E=[Be[0]/ke,Be[1]/ke,B.displaySize[0]-Be[2]/ke,B.displaySize[1]-Be[3]/ke]}const U=r.left*w,D=r.right*w;let V,W,te,ae;A==="width"||A==="both"?(ae=m[0]+U-h[3],W=m[0]+D+h[1]):(ae=m[0]+(U+D-B.displaySize[0])/2,W=ae+B.displaySize[0]);const oe=r.top*w,me=r.bottom*w;return A==="height"||A==="both"?(V=m[1]+oe-h[0],te=m[1]+me+h[2]):(V=m[1]+(oe+me-B.displaySize[1])/2,te=V+B.displaySize[1]),{image:B,top:V,right:W,bottom:te,left:ae,collisionPadding:E}}const Up=255,jA=128,fc=Up*jA;function kC(o,r){const{expression:A}=r;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new xi(o+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=A;let w=0;for(;w<h.length&&h[w]<=o;)w++;w=Math.max(0,w-1);let B=w;for(;B<h.length&&h[B]<o+1;)B++;B=Math.min(h.length-1,B);const E=h[w],U=h[B];return A.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:U,interpolationType:m}:{kind:"camera",minZoom:E,maxZoom:U,minSize:A.evaluate(new xi(E)),maxSize:A.evaluate(new xi(U)),interpolationType:m}}}function Dy(o,r,A){let h="never";const m=o.get(r);return m?h=m:o.get(A)&&(h="always"),h}const NH=pc.VectorTileFeature.types,OH=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function cg(o,r,A,h,m,w,B,E,U,D,V,W,te){const ae=E?Math.min(fc,Math.round(E[0])):0,oe=E?Math.min(fc,Math.round(E[1])):0;o.emplaceBack(r,A,Math.round(32*h),Math.round(32*m),w,B,(ae<<1)+(U?1:0),oe,16*D,16*V,256*W,256*te)}function Ny(o,r,A){o.emplaceBack(r.x,r.y,A),o.emplaceBack(r.x,r.y,A),o.emplaceBack(r.x,r.y,A),o.emplaceBack(r.x,r.y,A)}function RH(o){for(const r of o.sections)if(ic(r.text))return!0;return!1}class Oy{constructor(r){this.layoutVertexArray=new pt,this.indexArray=new kt,this.programConfigurations=r,this.segments=new pr,this.dynamicLayoutVertexArray=new at,this.opacityVertexArray=new _t,this.hasVisibleVertices=!1,this.placedSymbolArray=new Q}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,A,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,mH.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,yH.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,OH,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Zt("SymbolBuffers",Oy);class Ry{constructor(r,A,h){this.layoutVertexArray=new r,this.layoutAttributes=A,this.indexArray=new h,this.segments=new pr,this.collisionVertexArray=new Wt}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,vH.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Zt("CollisionBuffers",Ry);class ch{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(B=>B.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=th([]),this.placementViewportMatrix=th([]);const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=kC(this.zoom,A["text-size"]),this.iconSizeData=kC(this.zoom,A["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),w=h.get("symbol-z-order");this.canOverlap=Dy(h,"text-overlap","text-allow-overlap")!=="never"||Dy(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(B=>a.ai[B])),this.stateDependentLayerIds=this.layers.filter(B=>B.isStateDependent()).map(B=>B.id),this.sourceID=r.sourceID}createArrays(){this.text=new Oy(new ps(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Oy(new ps(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new z,this.lineVertexArray=new $,this.symbolInstances=new N,this.textAnchorOffsets=new re}calculateGlyphDependencies(r,A,h,m,w){for(let B=0;B<r.length;B++)if(A[r.charCodeAt(B)]=!0,(h||m)&&w){const E=Ip[r.charAt(B)];E&&(A[E.charCodeAt(0)]=!0)}}populate(r,A,h){const m=this.layers[0],w=m.layout,B=w.get("text-font"),E=w.get("text-field"),U=w.get("icon-image"),D=(E.value.kind!=="constant"||E.value.value instanceof Zi&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(B.value.kind!=="constant"||B.value.value.length>0),V=U.value.kind!=="constant"||!!U.value.value||Object.keys(U.parameters).length>0,W=w.get("symbol-sort-key");if(this.features=[],!D&&!V)return;const te=A.iconDependencies,ae=A.glyphDependencies,oe=A.availableImages,me=new xi(this.zoom);for(const{feature:Be,id:ke,index:Ze,sourceLayerIndex:je}of r){const Xe=m._featureFilter.needGeometry,At=zA(Be,Xe);if(!m._featureFilter.filter(me,At,h))continue;let mt,Kt;if(Xe||(At.geometry=Ao(Be)),D){const qt=m.getValueAndResolveTokens("text-field",At,h,oe),Ht=Zi.factory(qt);RH(Ht)&&(this.hasRTLText=!0),(!this.hasRTLText||sc()==="unavailable"||this.hasRTLText&&cs.isParsed())&&(mt=wH(Ht,m,At))}if(V){const qt=m.getValueAndResolveTokens("icon-image",At,h,oe);Kt=qt instanceof Wr?qt:Wr.fromString(qt)}if(!mt&&!Kt)continue;const ir=this.sortFeaturesByKey?W.evaluate(At,{},h):void 0;if(this.features.push({id:ke,text:mt,icon:Kt,index:Ze,sourceLayerIndex:je,geometry:At.geometry,properties:Be.properties,type:NH[Be.type],sortKey:ir}),Kt&&(te[Kt.name]=!0),mt){const qt=B.evaluate(At,{},h).join(","),Ht=w.get("text-rotation-alignment")!=="viewport"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ai.vertical)>=0;for(const Dt of mt.sections)if(Dt.image)te[Dt.image.name]=!0;else{const er=pl(mt.toString()),Ot=Dt.fontStack||qt,St=ae[Ot]=ae[Ot]||{};this.calculateGlyphDependencies(Dt.text,St,Ht,this.allowVerticalPlacement,er)}}}w.get("symbol-placement")==="line"&&(this.features=function(Be){const ke={},Ze={},je=[];let Xe=0;function At(qt){je.push(Be[qt]),Xe++}function mt(qt,Ht,Dt){const er=Ze[qt];return delete Ze[qt],Ze[Ht]=er,je[er].geometry[0].pop(),je[er].geometry[0]=je[er].geometry[0].concat(Dt[0]),er}function Kt(qt,Ht,Dt){const er=ke[Ht];return delete ke[Ht],ke[qt]=er,je[er].geometry[0].shift(),je[er].geometry[0]=Dt[0].concat(je[er].geometry[0]),er}function ir(qt,Ht,Dt){const er=Dt?Ht[0][Ht[0].length-1]:Ht[0][0];return`${qt}:${er.x}:${er.y}`}for(let qt=0;qt<Be.length;qt++){const Ht=Be[qt],Dt=Ht.geometry,er=Ht.text?Ht.text.toString():null;if(!er){At(qt);continue}const Ot=ir(er,Dt),St=ir(er,Dt,!0);if(Ot in Ze&&St in ke&&Ze[Ot]!==ke[St]){const yr=Kt(Ot,St,Dt),lr=mt(Ot,St,je[yr].geometry);delete ke[Ot],delete Ze[St],Ze[ir(er,je[lr].geometry,!0)]=lr,je[yr].geometry=null}else Ot in Ze?mt(Ot,St,Dt):St in ke?Kt(Ot,St,Dt):(At(qt),ke[Ot]=Xe-1,Ze[St]=Xe-1)}return je.filter(qt=>qt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Be,ke)=>Be.sortKey-ke.sortKey)}update(r,A,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,A,this.layers,h),this.icon.programConfigurations.updatePaintArrays(r,A,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,A){const h=this.lineVertexArray.length;if(r.segment!==void 0){let m=r.dist(A[r.segment+1]),w=r.dist(A[r.segment]);const B={};for(let E=r.segment+1;E<A.length;E++)B[E]={x:A[E].x,y:A[E].y,tileUnitDistanceFromAnchor:m},E<A.length-1&&(m+=A[E+1].dist(A[E]));for(let E=r.segment||0;E>=0;E--)B[E]={x:A[E].x,y:A[E].y,tileUnitDistanceFromAnchor:w},E>0&&(w+=A[E-1].dist(A[E]));for(let E=0;E<A.length;E++){const U=B[E];this.lineVertexArray.emplaceBack(U.x,U.y,U.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(r,A,h,m,w,B,E,U,D,V,W,te){const ae=r.indexArray,oe=r.layoutVertexArray,me=r.segments.prepareSegment(4*A.length,oe,ae,this.canOverlap?B.sortKey:void 0),Be=this.glyphOffsetArray.length,ke=me.vertexLength,Ze=this.allowVerticalPlacement&&E===a.ai.vertical?Math.PI/2:0,je=B.text&&B.text.sections;for(let Xe=0;Xe<A.length;Xe++){const{tl:At,tr:mt,bl:Kt,br:ir,tex:qt,pixelOffsetTL:Ht,pixelOffsetBR:Dt,minFontScaleX:er,minFontScaleY:Ot,glyphOffset:St,isSDF:yr,sectionIndex:lr}=A[Xe],jr=me.vertexLength,Pi=St[1];cg(oe,U.x,U.y,At.x,Pi+At.y,qt.x,qt.y,h,yr,Ht.x,Ht.y,er,Ot),cg(oe,U.x,U.y,mt.x,Pi+mt.y,qt.x+qt.w,qt.y,h,yr,Dt.x,Ht.y,er,Ot),cg(oe,U.x,U.y,Kt.x,Pi+Kt.y,qt.x,qt.y+qt.h,h,yr,Ht.x,Dt.y,er,Ot),cg(oe,U.x,U.y,ir.x,Pi+ir.y,qt.x+qt.w,qt.y+qt.h,h,yr,Dt.x,Dt.y,er,Ot),Ny(r.dynamicLayoutVertexArray,U,Ze),ae.emplaceBack(jr,jr+1,jr+2),ae.emplaceBack(jr+1,jr+2,jr+3),me.vertexLength+=4,me.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(St[0]),Xe!==A.length-1&&lr===A[Xe+1].sectionIndex||r.programConfigurations.populatePaintArrays(oe.length,B,B.index,{},te,je&&je[lr])}r.placedSymbolArray.emplaceBack(U.x,U.y,Be,this.glyphOffsetArray.length-Be,ke,D,V,U.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],E,0,!1,0,W)}_addCollisionDebugVertex(r,A,h,m,w,B){return A.emplaceBack(0,0),r.emplaceBack(h.x,h.y,m,w,Math.round(B.x),Math.round(B.y))}addCollisionDebugVertices(r,A,h,m,w,B,E){const U=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),D=U.vertexLength,V=w.layoutVertexArray,W=w.collisionVertexArray,te=E.anchorX,ae=E.anchorY;this._addCollisionDebugVertex(V,W,B,te,ae,new M(r,A)),this._addCollisionDebugVertex(V,W,B,te,ae,new M(h,A)),this._addCollisionDebugVertex(V,W,B,te,ae,new M(h,m)),this._addCollisionDebugVertex(V,W,B,te,ae,new M(r,m)),U.vertexLength+=4;const oe=w.indexArray;oe.emplaceBack(D,D+1),oe.emplaceBack(D+1,D+2),oe.emplaceBack(D+2,D+3),oe.emplaceBack(D+3,D),U.primitiveLength+=4}addDebugCollisionBoxes(r,A,h,m){for(let w=r;w<A;w++){const B=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(B.x1,B.y1,B.x2,B.y2,m?this.textCollisionBox:this.iconCollisionBox,B.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ry(Ft,_C.members,Er),this.iconCollisionBox=new Ry(Ft,_C.members,Er);for(let r=0;r<this.symbolInstances.length;r++){const A=this.symbolInstances.get(r);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(r,A,h,m,w,B,E,U,D){const V={};for(let W=A;W<h;W++){const te=r.get(W);V.textBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},V.textFeatureIndex=te.featureIndex;break}for(let W=m;W<w;W++){const te=r.get(W);V.verticalTextBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},V.verticalTextFeatureIndex=te.featureIndex;break}for(let W=B;W<E;W++){const te=r.get(W);V.iconBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},V.iconFeatureIndex=te.featureIndex;break}for(let W=U;W<D;W++){const te=r.get(W);V.verticalIconBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},V.verticalIconFeatureIndex=te.featureIndex;break}return V}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const h=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,A){const h=r.placedSymbolArray.get(A),m=h.vertexStartIndex+4*h.numGlyphs;for(let w=h.vertexStartIndex;w<m;w+=4)r.indexArray.emplaceBack(w,w+1,w+2),r.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(r),h=Math.cos(r),m=[],w=[],B=[];for(let E=0;E<this.symbolInstances.length;++E){B.push(E);const U=this.symbolInstances.get(E);m.push(0|Math.round(A*U.anchorX+h*U.anchorY)),w.push(U.featureIndex)}return B.sort((E,U)=>m[E]-m[U]||w[U]-w[E]),B}addToSortKeyRanges(r,A){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===A?h.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const h=this.symbolInstances.get(A);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,w,B)=>{m>=0&&B.indexOf(m)===w&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let DC,NC;Zt("SymbolBucket",ch,{omit:["layers","collisionBoxArray","features","compareText"]}),ch.MAX_GLYPHS=65535,ch.addDynamicAttributes=Ny;var zy={get paint(){return NC=NC||new ui({"icon-opacity":new _r(ze.paint_symbol["icon-opacity"]),"icon-color":new _r(ze.paint_symbol["icon-color"]),"icon-halo-color":new _r(ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new _r(ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _r(ze.paint_symbol["icon-halo-blur"]),"icon-translate":new Ar(ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ar(ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new _r(ze.paint_symbol["text-opacity"]),"text-color":new _r(ze.paint_symbol["text-color"],{runtimeType:Or,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new _r(ze.paint_symbol["text-halo-color"]),"text-halo-width":new _r(ze.paint_symbol["text-halo-width"]),"text-halo-blur":new _r(ze.paint_symbol["text-halo-blur"]),"text-translate":new Ar(ze.paint_symbol["text-translate"]),"text-translate-anchor":new Ar(ze.paint_symbol["text-translate-anchor"])})},get layout(){return DC=DC||new ui({"symbol-placement":new Ar(ze.layout_symbol["symbol-placement"]),"symbol-spacing":new Ar(ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ar(ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _r(ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ar(ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ar(ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ar(ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ar(ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ar(ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ar(ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new _r(ze.layout_symbol["icon-size"]),"icon-text-fit":new Ar(ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ar(ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new _r(ze.layout_symbol["icon-image"]),"icon-rotate":new _r(ze.layout_symbol["icon-rotate"]),"icon-padding":new _r(ze.layout_symbol["icon-padding"]),"icon-keep-upright":new Ar(ze.layout_symbol["icon-keep-upright"]),"icon-offset":new _r(ze.layout_symbol["icon-offset"]),"icon-anchor":new _r(ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ar(ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ar(ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ar(ze.layout_symbol["text-rotation-alignment"]),"text-field":new _r(ze.layout_symbol["text-field"]),"text-font":new _r(ze.layout_symbol["text-font"]),"text-size":new _r(ze.layout_symbol["text-size"]),"text-max-width":new _r(ze.layout_symbol["text-max-width"]),"text-line-height":new Ar(ze.layout_symbol["text-line-height"]),"text-letter-spacing":new _r(ze.layout_symbol["text-letter-spacing"]),"text-justify":new _r(ze.layout_symbol["text-justify"]),"text-radial-offset":new _r(ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ar(ze.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new _r(ze.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new _r(ze.layout_symbol["text-anchor"]),"text-max-angle":new Ar(ze.layout_symbol["text-max-angle"]),"text-writing-mode":new Ar(ze.layout_symbol["text-writing-mode"]),"text-rotate":new _r(ze.layout_symbol["text-rotate"]),"text-padding":new Ar(ze.layout_symbol["text-padding"]),"text-keep-upright":new Ar(ze.layout_symbol["text-keep-upright"]),"text-transform":new _r(ze.layout_symbol["text-transform"]),"text-offset":new _r(ze.layout_symbol["text-offset"]),"text-allow-overlap":new Ar(ze.layout_symbol["text-allow-overlap"]),"text-overlap":new Ar(ze.layout_symbol["text-overlap"]),"text-ignore-placement":new Ar(ze.layout_symbol["text-ignore-placement"]),"text-optional":new Ar(ze.layout_symbol["text-optional"])})}};class OC{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Vr,this.defaultValue=r}evaluate(r){if(r.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(r.formattedSection))return A.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Zt("FormatSectionOverride",OC,{omit:["defaultValue"]});class ug extends Qs{constructor(r){super(r,zy)}recalculate(r,A){if(super.recalculate(r,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const w of h)m.indexOf(w)<0&&m.push(w);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,A,h,m){const w=this.layout.get(r).evaluate(A,{},h,m),B=this._unevaluatedLayout._values[r];return B.isDataDriven()||Di(B.value)||!w?w:function(E,U){return U.replace(/{([^{}]+)}/g,(D,V)=>E&&V in E?String(E[V]):"")}(A.properties,w)}createBucket(r){return new ch(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of zy.paint.overridableProperties){if(!ug.hasPaintOverride(this.layout,r))continue;const A=this.paint.get(r),h=new OC(A),m=new ki(h,A.property.specification);let w=null;w=A.value.kind==="constant"||A.value.kind==="source"?new qi("source",m):new Zn("composite",m,A.value.zoomStops),this.paint._values[r]=new zn(A.property,w,A.parameters)}}_handleOverridablePaintPropertyUpdate(r,A,h){return!(!this.layout||A.isDataDriven()||h.isDataDriven())&&ug.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,A){const h=r.get("text-field"),m=zy.paint.properties[A];let w=!1;const B=E=>{for(const U of E)if(m.overrides&&m.overrides.hasOverride(U))return void(w=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Zi)B(h.value.value.sections);else if(h.value.kind==="source"){const E=D=>{w||(D instanceof Ua&&mi(D.value)===ue?B(D.value.sections):D instanceof Ja?B(D.sections):D.eachChild(E))},U=h.value;U._styleExpression&&E(U._styleExpression.expression)}return w}}let RC;var zH={get paint(){return RC=RC||new ui({"background-color":new Ar(ze.paint_background["background-color"]),"background-pattern":new Zc(ze.paint_background["background-pattern"]),"background-opacity":new Ar(ze.paint_background["background-opacity"])})}};class HH extends Qs{constructor(r){super(r,zH)}}let zC;var VH={get paint(){return zC=zC||new ui({"raster-opacity":new Ar(ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ar(ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ar(ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ar(ze.paint_raster["raster-brightness-max"]),"raster-saturation":new Ar(ze.paint_raster["raster-saturation"]),"raster-contrast":new Ar(ze.paint_raster["raster-contrast"]),"raster-resampling":new Ar(ze.paint_raster["raster-resampling"]),"raster-fade-duration":new Ar(ze.paint_raster["raster-fade-duration"])})}};class jH extends Qs{constructor(r){super(r,VH)}}class GH extends Qs{constructor(r){super(r,{}),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class qH{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Hy=63710088e-1;class gc{constructor(r,A){if(isNaN(r)||isNaN(A))throw new Error(`Invalid LngLat object: (${r}, ${A})`);if(this.lng=+r,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new gc(Ee(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const A=Math.PI/180,h=this.lat*A,m=r.lat*A,w=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((r.lng-this.lng)*A);return Hy*Math.acos(Math.min(w,1))}static convert(r){if(r instanceof gc)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new gc(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new gc(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const HC=2*Math.PI*Hy;function VC(o){return HC*Math.cos(o*Math.PI/180)}function jC(o){return(180+o)/360}function GC(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function qC(o,r){return o/VC(r)}function $C(o){return 360*o-180}function Vy(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class hg{constructor(r,A){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;this.x=+r,this.y=+A,this.z=+h}static fromLngLat(r){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const h=gc.convert(r);return new hg(jC(h.lng),GC(h.lat),qC(A,h.lat))}toLngLat(){return new gc($C(this.x),Vy(this.y))}toAltitude(){return this.z*VC(Vy(this.y))}meterInMercatorCoordinateUnits(){return 1/HC*(r=Vy(this.y),1/Math.cos(r*Math.PI/180));var r}}function KC(o,r,A){var h=2*Math.PI*6378137/256/Math.pow(2,A);return[o*h-2*Math.PI*6378137/2,r*h-2*Math.PI*6378137/2]}class jy{constructor(r,A,h){if(r<0||r>25||h<0||h>=Math.pow(2,r)||A<0||A>=Math.pow(2,r))throw new Error(`x=${A}, y=${h}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=A,this.y=h,this.key=Pp(0,r,r,A,h)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,A,h){const m=(B=this.y,E=this.z,U=KC(256*(w=this.x),256*(B=Math.pow(2,E)-B-1),E),D=KC(256*(w+1),256*(B+1),E),U[0]+","+U[1]+","+D[0]+","+D[1]);var w,B,E,U,D;const V=function(W,te,ae){let oe,me="";for(let Be=W;Be>0;Be--)oe=1<<Be-1,me+=(te&oe?1:0)+(ae&oe?2:0);return me}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,V).replace(/{bbox-epsg-3857}/g,m)}isChildOf(r){const A=this.z-r.z;return A>0&&r.x===this.x>>A&&r.y===this.y>>A}getTilePoint(r){const A=Math.pow(2,this.z);return new M((r.x*A-this.x)*Si,(r.y*A-this.y)*Si)}toString(){return`${this.z}/${this.x}/${this.y}`}}class WC{constructor(r,A){this.wrap=r,this.canonical=A,this.key=Pp(r,A.z,A.z,A.x,A.y)}}class za{constructor(r,A,h,m,w){if(r<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${h}`);this.overscaledZ=r,this.wrap=A,this.canonical=new jy(h,+m,+w),this.key=Pp(A,r,h,m,w)}clone(){return new za(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-r;return r>this.canonical.z?new za(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new za(r,this.wrap,r,this.canonical.x>>A,this.canonical.y>>A)}calculateScaledKey(r,A){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-r;return r>this.canonical.z?Pp(this.wrap*+A,r,this.canonical.z,this.canonical.x,this.canonical.y):Pp(this.wrap*+A,r,r,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const A=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>A&&r.canonical.y===this.canonical.y>>A}children(r){if(this.overscaledZ>=r)return[new za(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new za(A,this.wrap,A,h,m),new za(A,this.wrap,A,h+1,m),new za(A,this.wrap,A,h,m+1),new za(A,this.wrap,A,h+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new za(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new za(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new WC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new hg(r.x-this.wrap,r.y))}}function Pp(o,r,A,h,m){(o*=2)<0&&(o=-1*o-1);const w=1<<A;return(w*w*o+w*m+h).toString(36)+A.toString(36)+r.toString(36)}Zt("CanonicalTileID",jy),Zt("OverscaledTileID",za,{omit:["posMatrix"]});class ZC{constructor(r,A,h){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,w=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,B=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1,E=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;if(this.uid=r,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void _e(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=A.height;const U=this.dim=A.height-2;switch(this.data=new Uint32Array(A.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=w,this.blueFactor=B,this.baseShift=E;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let D=0;D<U;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(U,D)]=this.data[this._idx(U-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,U)]=this.data[this._idx(D,U-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(U,-1)]=this.data[this._idx(U-1,0)],this.data[this._idx(-1,U)]=this.data[this._idx(0,U-1)],this.data[this._idx(U,U)]=this.data[this._idx(U-1,U-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<U;D++)for(let V=0;V<U;V++){const W=this.get(D,V);W>this.max&&(this.max=W),W<this.min&&(this.min=W)}}get(r,A){const h=new Uint8Array(this.data.buffer),m=4*this._idx(r,A);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,A){if(r<-1||r>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(r+1)}unpack(r,A,h){return r*this.redFactor+A*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new ds({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,A,h){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=A*this.dim,w=A*this.dim+this.dim,B=h*this.dim,E=h*this.dim+this.dim;switch(A){case-1:m=w-1;break;case 1:w=m+1}switch(h){case-1:B=E-1;break;case 1:E=B+1}const U=-A*this.dim,D=-h*this.dim;for(let V=B;V<E;V++)for(let W=m;W<w;W++)this.data[this._idx(W,V)]=r.data[this._idx(W+U,V+D)]}}Zt("DEMData",ZC);class XC{constructor(r){this._stringToNumber={},this._numberToString=[];for(let A=0;A<r.length;A++){const h=r[A];this._stringToNumber[h]=A,this._numberToString[A]=h}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class YC{constructor(r,A,h,m,w){this.type="Feature",this._vectorTileFeature=r,r._z=A,r._x=h,r._y=m,this.properties=r.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&(r[A]=this[A]);return r}}class JC{constructor(r,A){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new ta(Si,16,0),this.grid3D=new ta(Si,16,0),this.featureIndexArray=new we,this.promoteId=A}insert(r,A,h,m,w,B){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,w);const U=B?this.grid3D:this.grid;for(let D=0;D<A.length;D++){const V=A[D],W=[1/0,1/0,-1/0,-1/0];for(let te=0;te<V.length;te++){const ae=V[te];W[0]=Math.min(W[0],ae.x),W[1]=Math.min(W[1],ae.y),W[2]=Math.max(W[2],ae.x),W[3]=Math.max(W[3],ae.y)}W[0]<Si&&W[1]<Si&&W[2]>=0&&W[3]>=0&&U.insert(E,W[0],W[1],W[2],W[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new pc.VectorTile(new Uy(this.rawTileData)).layers,this.sourceLayerCoder=new XC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,A,h,m){this.loadVTLayers();const w=r.params||{},B=Si/r.tileSize/r.scale,E=io(w.filter),U=r.queryGeometry,D=r.queryPadding*B,V=t4(U),W=this.grid.query(V.minX-D,V.minY-D,V.maxX+D,V.maxY+D),te=t4(r.cameraQueryGeometry),ae=this.grid3D.query(te.minX-D,te.minY-D,te.maxX+D,te.maxY+D,(Be,ke,Ze,je)=>function(Xe,At,mt,Kt,ir){for(const Ht of Xe)if(At<=Ht.x&&mt<=Ht.y&&Kt>=Ht.x&&ir>=Ht.y)return!0;const qt=[new M(At,mt),new M(At,ir),new M(Kt,ir),new M(Kt,mt)];if(Xe.length>2){for(const Ht of qt)if(bl(Xe,Ht))return!0}for(let Ht=0;Ht<Xe.length-1;Ht++)if(Ju(Xe[Ht],Xe[Ht+1],qt))return!0;return!1}(r.cameraQueryGeometry,Be-D,ke-D,Ze+D,je+D));for(const Be of ae)W.push(Be);W.sort($H);const oe={};let me;for(let Be=0;Be<W.length;Be++){const ke=W[Be];if(ke===me)continue;me=ke;const Ze=this.featureIndexArray.get(ke);let je=null;this.loadMatchingFeature(oe,Ze.bucketIndex,Ze.sourceLayerIndex,Ze.featureIndex,E,w.layers,w.availableImages,A,h,m,(Xe,At,mt)=>(je||(je=Ao(Xe)),At.queryIntersectsFeature(U,Xe,mt,je,this.z,r.transform,B,r.pixelPosMatrix)))}return oe}loadMatchingFeature(r,A,h,m,w,B,E,U,D,V,W){const te=this.bucketLayerIDs[A];if(B&&!function(Be,ke){for(let Ze=0;Ze<Be.length;Ze++)if(ke.indexOf(Be[Ze])>=0)return!0;return!1}(B,te))return;const ae=this.sourceLayerCoder.decode(h),oe=this.vtLayers[ae].feature(m);if(w.needGeometry){const Be=zA(oe,!0);if(!w.filter(new xi(this.tileID.overscaledZ),Be,this.tileID.canonical))return}else if(!w.filter(new xi(this.tileID.overscaledZ),oe))return;const me=this.getId(oe,ae);for(let Be=0;Be<te.length;Be++){const ke=te[Be];if(B&&B.indexOf(ke)<0)continue;const Ze=U[ke];if(!Ze)continue;let je={};me&&V&&(je=V.getState(Ze.sourceLayer||"_geojsonTileLayer",me));const Xe=fe({},D[ke]);Xe.paint=e4(Xe.paint,Ze.paint,oe,je,E),Xe.layout=e4(Xe.layout,Ze.layout,oe,je,E);const At=!W||W(oe,Ze,je);if(!At)continue;const mt=new YC(oe,this.z,this.x,this.y,me);mt.layer=Xe;let Kt=r[ke];Kt===void 0&&(Kt=r[ke]=[]),Kt.push({featureIndex:m,feature:mt,intersectionZ:At})}}lookupSymbolFeatures(r,A,h,m,w,B,E,U){const D={};this.loadVTLayers();const V=io(w);for(const W of r)this.loadMatchingFeature(D,h,m,W,V,B,E,U,A);return D}hasLayer(r){for(const A of this.bucketLayerIDs)for(const h of A)if(r===h)return!0;return!1}getId(r,A){let h=r.id;return this.promoteId&&(h=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof h=="boolean"&&(h=Number(h))),h}}function e4(o,r,A,h,m){return Ke(o,(w,B)=>{const E=r instanceof vl?r.get(B):null;return E&&E.evaluate?E.evaluate(A,h,m):E})}function t4(o){let r=1/0,A=1/0,h=-1/0,m=-1/0;for(const w of o)r=Math.min(r,w.x),A=Math.min(A,w.y),h=Math.max(h,w.x),m=Math.max(m,w.y);return{minX:r,minY:A,maxX:h,maxY:m}}function $H(o,r){return r-o}function r4(o,r,A,h,m){const w=[];for(let B=0;B<o.length;B++){const E=o[B];let U;for(let D=0;D<E.length-1;D++){let V=E[D],W=E[D+1];V.x<r&&W.x<r||(V.x<r?V=new M(r,V.y+(r-V.x)/(W.x-V.x)*(W.y-V.y))._round():W.x<r&&(W=new M(r,V.y+(r-V.x)/(W.x-V.x)*(W.y-V.y))._round()),V.y<A&&W.y<A||(V.y<A?V=new M(V.x+(A-V.y)/(W.y-V.y)*(W.x-V.x),A)._round():W.y<A&&(W=new M(V.x+(A-V.y)/(W.y-V.y)*(W.x-V.x),A)._round()),V.x>=h&&W.x>=h||(V.x>=h?V=new M(h,V.y+(h-V.x)/(W.x-V.x)*(W.y-V.y))._round():W.x>=h&&(W=new M(h,V.y+(h-V.x)/(W.x-V.x)*(W.y-V.y))._round()),V.y>=m&&W.y>=m||(V.y>=m?V=new M(V.x+(m-V.y)/(W.y-V.y)*(W.x-V.x),m)._round():W.y>=m&&(W=new M(V.x+(m-V.y)/(W.y-V.y)*(W.x-V.x),m)._round()),U&&V.equals(U[U.length-1])||(U=[V],w.push(U)),U.push(W)))))}}return w}Zt("FeatureIndex",JC,{omit:["rawTileData","sourceLayerCoder"]});class mc extends M{constructor(r,A,h,m){super(r,A),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new mc(this.x,this.y,this.angle,this.segment)}}function i4(o,r,A,h,m){if(r.segment===void 0||A===0)return!0;let w=r,B=r.segment+1,E=0;for(;E>-A/2;){if(B--,B<0)return!1;E-=o[B].dist(w),w=o[B]}E+=o[B].dist(o[B+1]),B++;const U=[];let D=0;for(;E<A/2;){const V=o[B],W=o[B+1];if(!W)return!1;let te=o[B-1].angleTo(V)-V.angleTo(W);for(te=Math.abs((te+3*Math.PI)%(2*Math.PI)-Math.PI),U.push({distance:E,angleDelta:te}),D+=te;E-U[0].distance>h;)D-=U.shift().angleDelta;if(D>m)return!1;B++,E+=V.dist(W)}return!0}function n4(o){let r=0;for(let A=0;A<o.length-1;A++)r+=o[A].dist(o[A+1]);return r}function s4(o,r,A){return o?.6*r*A:0}function a4(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function KH(o,r,A,h,m,w){const B=s4(A,m,w),E=a4(A,h)*w;let U=0;const D=n4(o)/2;for(let V=0;V<o.length-1;V++){const W=o[V],te=o[V+1],ae=W.dist(te);if(U+ae>D){const oe=(D-U)/ae,me=Xi.number(W.x,te.x,oe),Be=Xi.number(W.y,te.y,oe),ke=new mc(me,Be,te.angleTo(W),V);return ke._round(),!B||i4(o,ke,E,B,r)?ke:void 0}U+=ae}}function WH(o,r,A,h,m,w,B,E,U){const D=s4(h,w,B),V=a4(h,m),W=V*B,te=o[0].x===0||o[0].x===U||o[0].y===0||o[0].y===U;return r-W<r/4&&(r=W+r/4),o4(o,te?r/2*E%r:(V/2+2*w)*B*E%r,r,D,A,W,te,!1,U)}function o4(o,r,A,h,m,w,B,E,U){const D=w/2,V=n4(o);let W=0,te=r-A,ae=[];for(let oe=0;oe<o.length-1;oe++){const me=o[oe],Be=o[oe+1],ke=me.dist(Be),Ze=Be.angleTo(me);for(;te+A<W+ke;){te+=A;const je=(te-W)/ke,Xe=Xi.number(me.x,Be.x,je),At=Xi.number(me.y,Be.y,je);if(Xe>=0&&Xe<U&&At>=0&&At<U&&te-D>=0&&te+D<=V){const mt=new mc(Xe,At,Ze,oe);mt._round(),h&&!i4(o,mt,w,h,m)||ae.push(mt)}}W+=ke}return E||ae.length||B||(ae=o4(o,W/2,A,h,m,w,B,!0,U)),ae}Zt("Anchor",mc);const uh=sa;function A4(o,r,A,h){const m=[],w=o.image,B=w.pixelRatio,E=w.paddedRect.w-2*uh,U=w.paddedRect.h-2*uh,D=o.right-o.left,V=o.bottom-o.top,W=w.stretchX||[[0,E]],te=w.stretchY||[[0,U]],ae=(Dt,er)=>Dt+er[1]-er[0],oe=W.reduce(ae,0),me=te.reduce(ae,0),Be=E-oe,ke=U-me;let Ze=0,je=oe,Xe=0,At=me,mt=0,Kt=Be,ir=0,qt=ke;if(w.content&&h){const Dt=w.content;Ze=pg(W,0,Dt[0]),Xe=pg(te,0,Dt[1]),je=pg(W,Dt[0],Dt[2]),At=pg(te,Dt[1],Dt[3]),mt=Dt[0]-Ze,ir=Dt[1]-Xe,Kt=Dt[2]-Dt[0]-je,qt=Dt[3]-Dt[1]-At}const Ht=(Dt,er,Ot,St)=>{const yr=dg(Dt.stretch-Ze,je,D,o.left),lr=fg(Dt.fixed-mt,Kt,Dt.stretch,oe),jr=dg(er.stretch-Xe,At,V,o.top),Pi=fg(er.fixed-ir,qt,er.stretch,me),Ni=dg(Ot.stretch-Ze,je,D,o.left),bn=fg(Ot.fixed-mt,Kt,Ot.stretch,oe),Ea=dg(St.stretch-Xe,At,V,o.top),Ds=fg(St.fixed-ir,qt,St.stretch,me),An=new M(yr,jr),Hn=new M(Ni,jr),is=new M(Ni,Ea),Ns=new M(yr,Ea),Os=new M(lr/B,Pi/B),xn=new M(bn/B,Ds/B),Bn=r*Math.PI/180;if(Bn){const gs=Math.sin(Bn),aa=Math.cos(Bn),oa=[aa,-gs,gs,aa];An._matMult(oa),Hn._matMult(oa),Ns._matMult(oa),is._matMult(oa)}const fs=Dt.stretch+Dt.fixed,Rs=er.stretch+er.fixed;return{tl:An,tr:Hn,bl:Ns,br:is,tex:{x:w.paddedRect.x+uh+fs,y:w.paddedRect.y+uh+Rs,w:Ot.stretch+Ot.fixed-fs,h:St.stretch+St.fixed-Rs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Os,pixelOffsetBR:xn,minFontScaleX:Kt/B/D,minFontScaleY:qt/B/V,isSDF:A}};if(h&&(w.stretchX||w.stretchY)){const Dt=l4(W,Be,oe),er=l4(te,ke,me);for(let Ot=0;Ot<Dt.length-1;Ot++){const St=Dt[Ot],yr=Dt[Ot+1];for(let lr=0;lr<er.length-1;lr++)m.push(Ht(St,er[lr],yr,er[lr+1]))}}else m.push(Ht({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:U+1}));return m}function pg(o,r,A){let h=0;for(const m of o)h+=Math.max(r,Math.min(A,m[1]))-Math.max(r,Math.min(A,m[0]));return h}function l4(o,r,A){const h=[{fixed:-uh,stretch:0}];for(const[m,w]of o){const B=h[h.length-1];h.push({fixed:m-B.stretch,stretch:B.stretch}),h.push({fixed:m-B.stretch,stretch:B.stretch+(w-m)})}return h.push({fixed:r+uh,stretch:A}),h}function dg(o,r,A,h){return o/r*A+h}function fg(o,r,A,h){return o-r*A/h}class gg{constructor(r,A,h,m,w,B,E,U,D,V){if(this.boxStartIndex=r.length,D){let W=B.top,te=B.bottom;const ae=B.collisionPadding;ae&&(W-=ae[1],te+=ae[3]);let oe=te-W;oe>0&&(oe=Math.max(10,oe),this.circleDiameter=oe)}else{let W=B.top*E-U[0],te=B.bottom*E+U[2],ae=B.left*E-U[3],oe=B.right*E+U[1];const me=B.collisionPadding;if(me&&(ae-=me[0]*E,W-=me[1]*E,oe+=me[2]*E,te+=me[3]*E),V){const Be=new M(ae,W),ke=new M(oe,W),Ze=new M(ae,te),je=new M(oe,te),Xe=V*Math.PI/180;Be._rotate(Xe),ke._rotate(Xe),Ze._rotate(Xe),je._rotate(Xe),ae=Math.min(Be.x,ke.x,Ze.x,je.x),oe=Math.max(Be.x,ke.x,Ze.x,je.x),W=Math.min(Be.y,ke.y,Ze.y,je.y),te=Math.max(Be.y,ke.y,Ze.y,je.y)}r.emplaceBack(A.x,A.y,ae,W,oe,te,h,m,w)}this.boxEndIndex=r.length}}class ZH{constructor(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:XH;if(this.data=r,this.length=this.data.length,this.compare=A,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],A=this.data.pop();return this.length--,this.length>0&&(this.data[0]=A,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:A,compare:h}=this,m=A[r];for(;r>0;){const w=r-1>>1,B=A[w];if(h(m,B)>=0)break;A[r]=B,r=w}A[r]=m}_down(r){const{data:A,compare:h}=this,m=this.length>>1,w=A[r];for(;r<m;){let B=1+(r<<1),E=A[B];const U=B+1;if(U<this.length&&h(A[U],E)<0&&(B=U,E=A[U]),h(E,w)>=0)break;A[r]=E,r=B}A[r]=w}}function XH(o,r){return o<r?-1:o>r?1:0}function YH(o){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=1/0,m=1/0,w=-1/0,B=-1/0;const E=o[0];for(let ae=0;ae<E.length;ae++){const oe=E[ae];(!ae||oe.x<h)&&(h=oe.x),(!ae||oe.y<m)&&(m=oe.y),(!ae||oe.x>w)&&(w=oe.x),(!ae||oe.y>B)&&(B=oe.y)}const U=Math.min(w-h,B-m);let D=U/2;const V=new ZH([],JH);if(U===0)return new M(h,m);for(let ae=h;ae<w;ae+=U)for(let oe=m;oe<B;oe+=U)V.push(new hh(ae+D,oe+D,D,o));let W=function(ae){let oe=0,me=0,Be=0;const ke=ae[0];for(let Ze=0,je=ke.length,Xe=je-1;Ze<je;Xe=Ze++){const At=ke[Ze],mt=ke[Xe],Kt=At.x*mt.y-mt.x*At.y;me+=(At.x+mt.x)*Kt,Be+=(At.y+mt.y)*Kt,oe+=3*Kt}return new hh(me/oe,Be/oe,0,ae)}(o),te=V.length;for(;V.length;){const ae=V.pop();(ae.d>W.d||!W.d)&&(W=ae,A&&console.log("found best %d after %d probes",Math.round(1e4*ae.d)/1e4,te)),ae.max-W.d<=r||(D=ae.h/2,V.push(new hh(ae.p.x-D,ae.p.y-D,D,o)),V.push(new hh(ae.p.x+D,ae.p.y-D,D,o)),V.push(new hh(ae.p.x-D,ae.p.y+D,D,o)),V.push(new hh(ae.p.x+D,ae.p.y+D,D,o)),te+=4)}return A&&(console.log(`num probes: ${te}`),console.log(`best distance: ${W.d}`)),W.p}function JH(o,r){return r.max-o.max}function hh(o,r,A,h){this.p=new M(o,r),this.h=A,this.d=function(m,w){let B=!1,E=1/0;for(let U=0;U<w.length;U++){const D=w[U];for(let V=0,W=D.length,te=W-1;V<W;te=V++){const ae=D[V],oe=D[te];ae.y>m.y!=oe.y>m.y&&m.x<(oe.x-ae.x)*(m.y-ae.y)/(oe.y-ae.y)+ae.x&&(B=!B),E=Math.min(E,Zf(m,ae,oe))}}return(B?1:-1)*Math.sqrt(E)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var rs;a.aq=void 0,(rs=a.aq||(a.aq={}))[rs.center=1]="center",rs[rs.left=2]="left",rs[rs.right=3]="right",rs[rs.top=4]="top",rs[rs.bottom=5]="bottom",rs[rs["top-left"]=6]="top-left",rs[rs["top-right"]=7]="top-right",rs[rs["bottom-left"]=8]="bottom-left",rs[rs["bottom-right"]=9]="bottom-right";const yc=7,Gy=Number.POSITIVE_INFINITY;function c4(o,r){return r[1]!==Gy?function(A,h,m){let w=0,B=0;switch(h=Math.abs(h),m=Math.abs(m),A){case"top-right":case"top-left":case"top":B=m-yc;break;case"bottom-right":case"bottom-left":case"bottom":B=-m+yc}switch(A){case"top-right":case"bottom-right":case"right":w=-h;break;case"top-left":case"bottom-left":case"left":w=h}return[w,B]}(o,r[0],r[1]):function(A,h){let m=0,w=0;h<0&&(h=0);const B=h/Math.SQRT2;switch(A){case"top-right":case"top-left":w=B-yc;break;case"bottom-right":case"bottom-left":w=-B+yc;break;case"bottom":w=-h+yc;break;case"top":w=h-yc}switch(A){case"top-right":case"bottom-right":m=-B;break;case"top-left":case"bottom-left":m=B;break;case"left":m=h;break;case"right":m=-h}return[m,w]}(o,r[0])}function u4(o,r,A){var h;const m=o.layout,w=(h=m.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(r,{},A);if(w){const E=w.values,U=[];for(let D=0;D<E.length;D+=2){const V=U[D]=E[D],W=E[D+1].map(te=>te*wn);V.startsWith("top")?W[1]-=yc:V.startsWith("bottom")&&(W[1]+=yc),U[D+1]=W}return new $n(U)}const B=m.get("text-variable-anchor");if(B){let E;E=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(r,{},A)*wn,Gy]:m.get("text-offset").evaluate(r,{},A).map(D=>D*wn);const U=[];for(const D of B)U.push(D,c4(D,E));return new $n(U)}return null}function qy(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function e9(o,r,A,h,m,w,B,E,U,D,V){let W=w.textMaxSize.evaluate(r,{});W===void 0&&(W=B);const te=o.layers[0].layout,ae=te.get("icon-offset").evaluate(r,{},V),oe=p4(A.horizontal),me=B/24,Be=o.tilePixelRatio*me,ke=o.tilePixelRatio*W/24,Ze=o.tilePixelRatio*E,je=o.tilePixelRatio*te.get("symbol-spacing"),Xe=te.get("text-padding")*o.tilePixelRatio,At=function(St,yr,lr){let jr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;const Pi=St.get("icon-padding").evaluate(yr,{},lr),Ni=Pi&&Pi.values;return[Ni[0]*jr,Ni[1]*jr,Ni[2]*jr,Ni[3]*jr]}(te,r,V,o.tilePixelRatio),mt=te.get("text-max-angle")/180*Math.PI,Kt=te.get("text-rotation-alignment")!=="viewport"&&te.get("symbol-placement")!=="point",ir=te.get("icon-rotation-alignment")==="map"&&te.get("symbol-placement")!=="point",qt=te.get("symbol-placement"),Ht=je/2,Dt=te.get("icon-text-fit");let er;h&&Dt!=="none"&&(o.allowVerticalPlacement&&A.vertical&&(er=QC(h,A.vertical,Dt,te.get("icon-text-fit-padding"),ae,me)),oe&&(h=QC(h,oe,Dt,te.get("icon-text-fit-padding"),ae,me)));const Ot=(St,yr)=>{yr.x<0||yr.x>=Si||yr.y<0||yr.y>=Si||function(lr,jr,Pi,Ni,bn,Ea,Ds,An,Hn,is,Ns,Os,xn,Bn,fs,Rs,gs,aa,oa,Cn,Yr,ms,ns,Sn,lo){const Jo=lr.addToLineVertexArray(jr,Pi);let eA,Sl,co,Ha,Aa=0,El=0,kp=0,m4=0,ev=-1,tv=-1;const Fl={};let y4=en("");if(lr.allowVerticalPlacement&&Ni.vertical){const ys=An.layout.get("text-rotate").evaluate(Yr,{},Sn)+90;co=new gg(Hn,jr,is,Ns,Os,Ni.vertical,xn,Bn,fs,ys),Ds&&(Ha=new gg(Hn,jr,is,Ns,Os,Ds,gs,aa,fs,ys))}if(bn){const ys=An.layout.get("icon-rotate").evaluate(Yr,{}),Va=An.layout.get("icon-text-fit")!=="none",ou=A4(bn,ys,ns,Va),rA=Ds?A4(Ds,ys,ns,Va):void 0;Sl=new gg(Hn,jr,is,Ns,Os,bn,gs,aa,!1,ys),Aa=4*ou.length;const Au=lr.iconSizeData;let GA=null;Au.kind==="source"?(GA=[jA*An.layout.get("icon-size").evaluate(Yr,{})],GA[0]>fc&&_e(`${lr.layerIds[0]}: Value for "icon-size" is >= ${Up}. Reduce your "icon-size".`)):Au.kind==="composite"&&(GA=[jA*ms.compositeIconSizes[0].evaluate(Yr,{},Sn),jA*ms.compositeIconSizes[1].evaluate(Yr,{},Sn)],(GA[0]>fc||GA[1]>fc)&&_e(`${lr.layerIds[0]}: Value for "icon-size" is >= ${Up}. Reduce your "icon-size".`)),lr.addSymbols(lr.icon,ou,GA,Cn,oa,Yr,a.ai.none,jr,Jo.lineStartIndex,Jo.lineLength,-1,Sn),ev=lr.icon.placedSymbolArray.length-1,rA&&(El=4*rA.length,lr.addSymbols(lr.icon,rA,GA,Cn,oa,Yr,a.ai.vertical,jr,Jo.lineStartIndex,Jo.lineLength,-1,Sn),tv=lr.icon.placedSymbolArray.length-1)}const v4=Object.keys(Ni.horizontal);for(const ys of v4){const Va=Ni.horizontal[ys];if(!eA){y4=en(Va.text);const rA=An.layout.get("text-rotate").evaluate(Yr,{},Sn);eA=new gg(Hn,jr,is,Ns,Os,Va,xn,Bn,fs,rA)}const ou=Va.positionedLines.length===1;if(kp+=h4(lr,jr,Va,Ea,An,fs,Yr,Rs,Jo,Ni.vertical?a.ai.horizontal:a.ai.horizontalOnly,ou?v4:[ys],Fl,ev,ms,Sn),ou)break}Ni.vertical&&(m4+=h4(lr,jr,Ni.vertical,Ea,An,fs,Yr,Rs,Jo,a.ai.vertical,["vertical"],Fl,tv,ms,Sn));const i9=eA?eA.boxStartIndex:lr.collisionBoxArray.length,n9=eA?eA.boxEndIndex:lr.collisionBoxArray.length,s9=co?co.boxStartIndex:lr.collisionBoxArray.length,a9=co?co.boxEndIndex:lr.collisionBoxArray.length,o9=Sl?Sl.boxStartIndex:lr.collisionBoxArray.length,A9=Sl?Sl.boxEndIndex:lr.collisionBoxArray.length,l9=Ha?Ha.boxStartIndex:lr.collisionBoxArray.length,c9=Ha?Ha.boxEndIndex:lr.collisionBoxArray.length;let tA=-1;const yg=(ys,Va)=>ys&&ys.circleDiameter?Math.max(ys.circleDiameter,Va):Va;tA=yg(eA,tA),tA=yg(co,tA),tA=yg(Sl,tA),tA=yg(Ha,tA);const _4=tA>-1?1:0;_4&&(tA*=lo/wn),lr.glyphOffsetArray.length>=ch.MAX_GLYPHS&&_e("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Yr.sortKey!==void 0&&lr.addToSortKeyRanges(lr.symbolInstances.length,Yr.sortKey);const u9=u4(An,Yr,Sn),[h9,p9]=function(ys,Va){const ou=ys.length,rA=Va==null?void 0:Va.values;if((rA==null?void 0:rA.length)>0)for(let Au=0;Au<rA.length;Au+=2){const GA=rA[Au+1];ys.emplaceBack(a.aq[rA[Au]],GA[0],GA[1])}return[ou,ys.length]}(lr.textAnchorOffsets,u9);lr.symbolInstances.emplaceBack(jr.x,jr.y,Fl.right>=0?Fl.right:-1,Fl.center>=0?Fl.center:-1,Fl.left>=0?Fl.left:-1,Fl.vertical||-1,ev,tv,y4,i9,n9,s9,a9,o9,A9,l9,c9,is,kp,m4,Aa,El,_4,0,xn,tA,h9,p9)}(o,yr,St,A,h,m,er,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,Be,[Xe,Xe,Xe,Xe],Kt,U,Ze,At,ir,ae,r,w,D,V,B)};if(qt==="line")for(const St of r4(r.geometry,0,0,Si,Si)){const yr=WH(St,je,mt,A.vertical||oe,h,24,ke,o.overscaling,Si);for(const lr of yr)oe&&t9(o,oe.text,Ht,lr)||Ot(St,lr)}else if(qt==="line-center"){for(const St of r.geometry)if(St.length>1){const yr=KH(St,mt,A.vertical||oe,h,24,ke);yr&&Ot(St,yr)}}else if(r.type==="Polygon")for(const St of By(r.geometry,0)){const yr=YH(St,16);Ot(St[0],new mc(yr.x,yr.y,0))}else if(r.type==="LineString")for(const St of r.geometry)Ot(St,new mc(St[0].x,St[0].y,0));else if(r.type==="Point")for(const St of r.geometry)for(const yr of St)Ot([yr],new mc(yr.x,yr.y,0))}function h4(o,r,A,h,m,w,B,E,U,D,V,W,te,ae,oe){const me=function(Ze,je,Xe,At,mt,Kt,ir,qt){const Ht=At.layout.get("text-rotate").evaluate(Kt,{})*Math.PI/180,Dt=[];for(const er of je.positionedLines)for(const Ot of er.positionedGlyphs){if(!Ot.rect)continue;const St=Ot.rect||{};let yr=FC+1,lr=!0,jr=1,Pi=0;const Ni=(mt||qt)&&Ot.vertical,bn=Ot.metrics.advance*Ot.scale/2;if(qt&&je.verticalizable&&(Pi=er.lineOffset/2-(Ot.imageName?-(wn-Ot.metrics.width*Ot.scale)/2:(Ot.scale-1)*wn)),Ot.imageName){const Cn=ir[Ot.imageName];lr=Cn.sdf,jr=Cn.pixelRatio,yr=sa/jr}const Ea=mt?[Ot.x+bn,Ot.y]:[0,0];let Ds=mt?[0,0]:[Ot.x+bn+Xe[0],Ot.y+Xe[1]-Pi],An=[0,0];Ni&&(An=Ds,Ds=[0,0]);const Hn=Ot.metrics.isDoubleResolution?2:1,is=(Ot.metrics.left-yr)*Ot.scale-bn+Ds[0],Ns=(-Ot.metrics.top-yr)*Ot.scale+Ds[1],Os=is+St.w/Hn*Ot.scale/jr,xn=Ns+St.h/Hn*Ot.scale/jr,Bn=new M(is,Ns),fs=new M(Os,Ns),Rs=new M(is,xn),gs=new M(Os,xn);if(Ni){const Cn=new M(-bn,bn-Lp),Yr=-Math.PI/2,ms=wn/2-bn,ns=new M(5-Lp-ms,-(Ot.imageName?ms:0)),Sn=new M(...An);Bn._rotateAround(Yr,Cn)._add(ns)._add(Sn),fs._rotateAround(Yr,Cn)._add(ns)._add(Sn),Rs._rotateAround(Yr,Cn)._add(ns)._add(Sn),gs._rotateAround(Yr,Cn)._add(ns)._add(Sn)}if(Ht){const Cn=Math.sin(Ht),Yr=Math.cos(Ht),ms=[Yr,-Cn,Cn,Yr];Bn._matMult(ms),fs._matMult(ms),Rs._matMult(ms),gs._matMult(ms)}const aa=new M(0,0),oa=new M(0,0);Dt.push({tl:Bn,tr:fs,bl:Rs,br:gs,tex:St,writingMode:je.writingMode,glyphOffset:Ea,sectionIndex:Ot.sectionIndex,isSDF:lr,pixelOffsetTL:aa,pixelOffsetBR:oa,minFontScaleX:0,minFontScaleY:0})}return Dt}(0,A,E,m,w,B,h,o.allowVerticalPlacement),Be=o.textSizeData;let ke=null;Be.kind==="source"?(ke=[jA*m.layout.get("text-size").evaluate(B,{})],ke[0]>fc&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Up}. Reduce your "text-size".`)):Be.kind==="composite"&&(ke=[jA*ae.compositeTextSizes[0].evaluate(B,{},oe),jA*ae.compositeTextSizes[1].evaluate(B,{},oe)],(ke[0]>fc||ke[1]>fc)&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Up}. Reduce your "text-size".`)),o.addSymbols(o.text,me,ke,E,w,B,D,r,U.lineStartIndex,U.lineLength,te,oe);for(const Ze of V)W[Ze]=o.text.placedSymbolArray.length-1;return 4*me.length}function p4(o){for(const r in o)return o[r];return null}function t9(o,r,A,h){const m=o.compareText;if(r in m){const w=m[r];for(let B=w.length-1;B>=0;B--)if(h.dist(w[B])<A)return!0}else m[r]=[];return m[r].push(h),!1}const d4=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class $y{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[A,h]=new Uint8Array(r,0,2);if(A!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const w=d4[15&h];if(!w)throw new Error("Unrecognized array type.");const[B]=new Uint16Array(r,2,1),[E]=new Uint32Array(r,4,1);return new $y(E,B,w,r)}constructor(r){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,m=arguments.length>3?arguments[3]:void 0;if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+A,2),65535),this.ArrayType=h,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const w=d4.indexOf(this.ArrayType),B=2*r*this.ArrayType.BYTES_PER_ELEMENT,E=r*this.IndexArrayType.BYTES_PER_ELEMENT,U=(8-E%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+E+U,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+B+E+U),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+E+U,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=A,new Uint32Array(this.data,4,1)[0]=r)}add(r,A){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=r,this.coords[this._pos++]=A,h}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Ky(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,A,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:B,nodeSize:E}=this,U=[0,w.length-1,0],D=[];for(;U.length;){const V=U.pop()||0,W=U.pop()||0,te=U.pop()||0;if(W-te<=E){for(let Be=te;Be<=W;Be++){const ke=B[2*Be],Ze=B[2*Be+1];ke>=r&&ke<=h&&Ze>=A&&Ze<=m&&D.push(w[Be])}continue}const ae=te+W>>1,oe=B[2*ae],me=B[2*ae+1];oe>=r&&oe<=h&&me>=A&&me<=m&&D.push(w[ae]),(V===0?r<=oe:A<=me)&&(U.push(te),U.push(ae-1),U.push(1-V)),(V===0?h>=oe:m>=me)&&(U.push(ae+1),U.push(W),U.push(1-V))}return D}within(r,A,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:w,nodeSize:B}=this,E=[0,m.length-1,0],U=[],D=h*h;for(;E.length;){const V=E.pop()||0,W=E.pop()||0,te=E.pop()||0;if(W-te<=B){for(let Be=te;Be<=W;Be++)g4(w[2*Be],w[2*Be+1],r,A)<=D&&U.push(m[Be]);continue}const ae=te+W>>1,oe=w[2*ae],me=w[2*ae+1];g4(oe,me,r,A)<=D&&U.push(m[ae]),(V===0?r-h<=oe:A-h<=me)&&(E.push(te),E.push(ae-1),E.push(1-V)),(V===0?r+h>=oe:A+h>=me)&&(E.push(ae+1),E.push(W),E.push(1-V))}return U}}function Ky(o,r,A,h,m,w){if(m-h<=A)return;const B=h+m>>1;f4(o,r,B,h,m,w),Ky(o,r,A,h,B-1,1-w),Ky(o,r,A,B+1,m,1-w)}function f4(o,r,A,h,m,w){for(;m>h;){if(m-h>600){const D=m-h+1,V=A-h+1,W=Math.log(D),te=.5*Math.exp(2*W/3),ae=.5*Math.sqrt(W*te*(D-te)/D)*(V-D/2<0?-1:1);f4(o,r,A,Math.max(h,Math.floor(A-V*te/D+ae)),Math.min(m,Math.floor(A+(D-V)*te/D+ae)),w)}const B=r[2*A+w];let E=h,U=m;for(Mp(o,r,h,A),r[2*m+w]>B&&Mp(o,r,h,m);E<U;){for(Mp(o,r,E,U),E++,U--;r[2*E+w]<B;)E++;for(;r[2*U+w]>B;)U--}r[2*h+w]===B?Mp(o,r,h,U):(U++,Mp(o,r,U,m)),U<=A&&(h=U+1),A<=U&&(m=U-1)}}function Mp(o,r,A,h){Wy(o,A,h),Wy(r,2*A,2*h),Wy(r,2*A+1,2*h+1)}function Wy(o,r,A){const h=o[r];o[r]=o[A],o[A]=h}function g4(o,r,A,h){const m=o-A,w=r-h;return m*m+w*w}var Zy;a.bh=void 0,(Zy=a.bh||(a.bh={})).create="create",Zy.load="load",Zy.fullLoad="fullLoad";let mg=null,Qp=[];const Xy=1e3/60,Yy="loadTime",Jy="fullLoadTime",r9={mark(o){performance.mark(o)},frame(o){const r=o;mg!=null&&Qp.push(r-mg),mg=r},clearMetrics(){mg=null,Qp=[],performance.clearMeasures(Yy),performance.clearMeasures(Jy);for(const o in a.bh)performance.clearMarks(a.bh[o])},getPerformanceMetrics(){performance.measure(Yy,a.bh.create,a.bh.load),performance.measure(Jy,a.bh.create,a.bh.fullLoad);const o=performance.getEntriesByName(Yy)[0].duration,r=performance.getEntriesByName(Jy)[0].duration,A=Qp.length,h=1/(Qp.reduce((w,B)=>w+B,0)/A/1e3),m=Qp.filter(w=>w>Xy).reduce((w,B)=>w+(B-Xy)/Xy,0);return{loadTime:o,fullLoadTime:r,fps:h,percentDroppedFrames:m/(A+m)*100,totalFrames:A}}};a.$=function(o,r,A){var h,m,w,B,E,U,D,V,W,te,ae,oe,me=A[0],Be=A[1],ke=A[2];return r===o?(o[12]=r[0]*me+r[4]*Be+r[8]*ke+r[12],o[13]=r[1]*me+r[5]*Be+r[9]*ke+r[13],o[14]=r[2]*me+r[6]*Be+r[10]*ke+r[14],o[15]=r[3]*me+r[7]*Be+r[11]*ke+r[15]):(m=r[1],w=r[2],B=r[3],E=r[4],U=r[5],D=r[6],V=r[7],W=r[8],te=r[9],ae=r[10],oe=r[11],o[0]=h=r[0],o[1]=m,o[2]=w,o[3]=B,o[4]=E,o[5]=U,o[6]=D,o[7]=V,o[8]=W,o[9]=te,o[10]=ae,o[11]=oe,o[12]=h*me+E*Be+W*ke+r[12],o[13]=m*me+U*Be+te*ke+r[13],o[14]=w*me+D*Be+ae*ke+r[14],o[15]=B*me+V*Be+oe*ke+r[15]),o},a.A=Wo,a.B=Xi,a.C=class{constructor(o,r,A){this.receive=h=>{const m=h.data,w=m.id;if(w&&(!m.targetMapId||this.mapId===m.targetMapId))if(m.type==="<cancel>"){delete this.tasks[w];const B=this.cancelCallbacks[w];delete this.cancelCallbacks[w],B&&B()}else rt()||m.mustQueue?(this.tasks[w]=m,this.taskQueue.push(w),this.invoker.trigger()):this.processTask(w,m)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),m=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),m&&this.processTask(h,m)},this.target=o,this.parent=r,this.mapId=A,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new qH(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=rt()?o:window}send(o,r,A,h){let m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);A&&(this.callbacks[w]=A);const B=[],E={id:w,type:o,hasCallback:!!A,targetMapId:h,mustQueue:m,sourceMapId:this.mapId,data:Oa(r,B)};return this.target.postMessage(E,{transfer:B}),{cancel:()=>{A&&delete this.callbacks[w],this.target.postMessage({id:w,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(o,r){if(r.type==="<response>"){const A=this.callbacks[o];delete this.callbacks[o],A&&(r.error?A(Go(r.error)):A(null,Go(r.data)))}else{let A=!1;const h=[],m=r.hasCallback?(E,U)=>{A=!0,delete this.cancelCallbacks[o];const D={id:o,type:"<response>",sourceMapId:this.mapId,error:E?Oa(E):null,data:Oa(U,h)};this.target.postMessage(D,{transfer:h})}:E=>{A=!0};let w=null;const B=Go(r.data);if(this.parent[r.type])w=this.parent[r.type](r.sourceMapId,B,m);else if("getWorkerSource"in this.parent){const E=r.type.split(".");w=this.parent.getWorkerSource(r.sourceMapId,E[0],B.source)[E[1]](B,m)}else m(new Error(`Could not find function ${r.type}`));!A&&w&&w.cancel&&(this.cancelCallbacks[o]=w.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.D=Ar,a.E=bt,a.F=function(o,r){const A={};for(let h=0;h<r.length;h++){const m=r[h];m in o&&(A[m]=o[m])}return A},a.G=jC,a.H=GC,a.I=My,a.J=ne,a.K=he,a.L=gc,a.M=Bt,a.N=Si,a.O=za,a.P=M,a.Q=Ui,a.R=ds,a.S=pr,a.T=oc,a.U=hg,a.V=class extends ao{},a.W=jy,a.X=function(o,r){const A=window.document.createElement("video");A.muted=!0,A.onloadstart=function(){r(null,A)};for(let h=0;h<o.length;h++){const m=window.document.createElement("source");Jt(o[h])||(A.crossOrigin="Anonymous"),m.src=o[h],A.appendChild(m)}return{cancel:()=>{}}},a.Y=vt,a.Z=function(){var o=new Wo(16);return Wo!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},a._=g,a.a=it,a.a$=class extends se{},a.a0=function(o,r,A){var h=A[0],m=A[1],w=A[2];return o[0]=r[0]*h,o[1]=r[1]*h,o[2]=r[2]*h,o[3]=r[3]*h,o[4]=r[4]*m,o[5]=r[5]*m,o[6]=r[6]*m,o[7]=r[7]*m,o[8]=r[8]*w,o[9]=r[9]*w,o[10]=r[10]*w,o[11]=r[11]*w,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},a.a1=rh,a.a2=function(){return We++},a.a3=x,a.a4=ch,a.a5=function(){cs.isLoading()||cs.isLoaded()||sc()!=="deferred"||Xu()},a.a6=io,a.a7=zA,a.a8=xi,a.a9=YC,a.aA=qo,a.aB=function(o){o=o.slice();const r=Object.create(null);for(let A=0;A<o.length;A++)r[o[A].id]=o[A];for(let A=0;A<o.length;A++)"ref"in o[A]&&(o[A]=Pt(o[A],r[o[A].ref]));return o},a.aC=function(o){if(o.type==="custom")return new GH(o);switch(o.type){case"background":return new HH(o);case"circle":return new _y(o);case"fill":return new $z(o);case"fill-extrusion":return new AH(o);case"heatmap":return new Xo(o);case"hillshade":return new ih(o);case"line":return new gH(o);case"raster":return new jH(o);case"symbol":return new ug(o)}},a.aD=Ae,a.aE=function(o,r){if(!o)return[{command:Lt.setStyle,args:[r]}];let A=[];try{if(!Mt(o.version,r.version))return[{command:Lt.setStyle,args:[r]}];Mt(o.center,r.center)||A.push({command:Lt.setCenter,args:[r.center]}),Mt(o.zoom,r.zoom)||A.push({command:Lt.setZoom,args:[r.zoom]}),Mt(o.bearing,r.bearing)||A.push({command:Lt.setBearing,args:[r.bearing]}),Mt(o.pitch,r.pitch)||A.push({command:Lt.setPitch,args:[r.pitch]}),Mt(o.sprite,r.sprite)||A.push({command:Lt.setSprite,args:[r.sprite]}),Mt(o.glyphs,r.glyphs)||A.push({command:Lt.setGlyphs,args:[r.glyphs]}),Mt(o.transition,r.transition)||A.push({command:Lt.setTransition,args:[r.transition]}),Mt(o.light,r.light)||A.push({command:Lt.setLight,args:[r.light]});const h={},m=[];(function(B,E,U,D){let V;for(V in E=E||{},B=B||{})Object.prototype.hasOwnProperty.call(B,V)&&(Object.prototype.hasOwnProperty.call(E,V)||wr(V,U,D));for(V in E)Object.prototype.hasOwnProperty.call(E,V)&&(Object.prototype.hasOwnProperty.call(B,V)?Mt(B[V],E[V])||(B[V].type==="geojson"&&E[V].type==="geojson"&&qr(B,E,V)?U.push({command:Lt.setGeoJSONSourceData,args:[V,E[V].data]}):Lr(V,E,U,D)):hr(V,E,U))})(o.sources,r.sources,m,h);const w=[];o.layers&&o.layers.forEach(B=>{h[B.source]?A.push({command:Lt.removeLayer,args:[B.id]}):w.push(B)}),A=A.concat(m),function(B,E,U){E=E||[];const D=(B=B||[]).map(br),V=E.map(br),W=B.reduce(Rt,{}),te=E.reduce(Rt,{}),ae=D.slice(),oe=Object.create(null);let me,Be,ke,Ze,je,Xe,At;for(me=0,Be=0;me<D.length;me++)ke=D[me],Object.prototype.hasOwnProperty.call(te,ke)?Be++:(U.push({command:Lt.removeLayer,args:[ke]}),ae.splice(ae.indexOf(ke,Be),1));for(me=0,Be=0;me<V.length;me++)ke=V[V.length-1-me],ae[ae.length-1-me]!==ke&&(Object.prototype.hasOwnProperty.call(W,ke)?(U.push({command:Lt.removeLayer,args:[ke]}),ae.splice(ae.lastIndexOf(ke,ae.length-Be),1)):Be++,Xe=ae[ae.length-me],U.push({command:Lt.addLayer,args:[te[ke],Xe]}),ae.splice(ae.length-me,0,ke),oe[ke]=!0);for(me=0;me<V.length;me++)if(ke=V[me],Ze=W[ke],je=te[ke],!oe[ke]&&!Mt(Ze,je))if(Mt(Ze.source,je.source)&&Mt(Ze["source-layer"],je["source-layer"])&&Mt(Ze.type,je.type)){for(At in gr(Ze.layout,je.layout,U,ke,null,Lt.setLayoutProperty),gr(Ze.paint,je.paint,U,ke,null,Lt.setPaintProperty),Mt(Ze.filter,je.filter)||U.push({command:Lt.setFilter,args:[ke,je.filter]}),Mt(Ze.minzoom,je.minzoom)&&Mt(Ze.maxzoom,je.maxzoom)||U.push({command:Lt.setLayerZoomRange,args:[ke,je.minzoom,je.maxzoom]}),Ze)Object.prototype.hasOwnProperty.call(Ze,At)&&At!=="layout"&&At!=="paint"&&At!=="filter"&&At!=="metadata"&&At!=="minzoom"&&At!=="maxzoom"&&(At.indexOf("paint.")===0?gr(Ze[At],je[At],U,ke,At.slice(6),Lt.setPaintProperty):Mt(Ze[At],je[At])||U.push({command:Lt.setLayerProperty,args:[ke,At,je[At]]}));for(At in je)Object.prototype.hasOwnProperty.call(je,At)&&!Object.prototype.hasOwnProperty.call(Ze,At)&&At!=="layout"&&At!=="paint"&&At!=="filter"&&At!=="metadata"&&At!=="minzoom"&&At!=="maxzoom"&&(At.indexOf("paint.")===0?gr(Ze[At],je[At],U,ke,At.slice(6),Lt.setPaintProperty):Mt(Ze[At],je[At])||U.push({command:Lt.setLayerProperty,args:[ke,At,je[At]]}))}else U.push({command:Lt.removeLayer,args:[ke]}),Xe=ae[ae.lastIndexOf(ke)+1],U.push({command:Lt.addLayer,args:[je,Xe]})}(w,r.layers,A)}catch(h){console.warn("Unable to compute style diff:",h),A=[{command:Lt.setStyle,args:[r]}]}return A},a.aF=function(o){const r=[],A=o.id;return A===void 0&&r.push({message:`layers.${A}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${A}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),r},a.aG=function o(r,A){if(Array.isArray(r)){if(!Array.isArray(A)||r.length!==A.length)return!1;for(let h=0;h<r.length;h++)if(!o(r[h],A[h]))return!1;return!0}if(typeof r=="object"&&r!==null&&A!==null){if(typeof A!="object"||Object.keys(r).length!==Object.keys(A).length)return!1;for(const h in r)if(!o(r[h],A[h]))return!1;return!0}return r===A},a.aH=Ke,a.aI=ce,a.aJ=yl,a.aK=function(o){return o({pluginStatus:Mn,pluginURL:ra}),yl.on("pluginStateChange",o),o},a.aL=class extends on{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},a.aM=us,a.aN=class extends on{constructor(o,r){super(o,r),this.current=Ko}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},a.aO=tn,a.aP=class extends on{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},a.aQ=class extends on{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},a.aR=Ba,a.aS=function(o,r,A,h,m,w,B){var E=1/(r-A),U=1/(h-m),D=1/(w-B);return o[0]=-2*E,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*U,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*D,o[11]=0,o[12]=(r+A)*E,o[13]=(m+h)*U,o[14]=(B+w)*D,o[15]=1,o},a.aT=ii,a.aU=Jf,a.aV=class extends d{},a.aW=_H,a.aX=class extends b{},a.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},a.aZ=su,a.a_=Le,a.aa=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(A,h,m,w)=>{const B=m||w;return r[h]=!B||B.toLowerCase(),""}),r["max-age"]){const A=parseInt(r["max-age"],10);isNaN(A)?delete r["max-age"]:r["max-age"]=A}return r},a.ab=function(o,r){const A=[];for(const h in o)h in r||A.push(h);return A},a.ac=function(o){if(Ye==null){const r=o.navigator?o.navigator.userAgent:null;Ye=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Ye},a.ad=Pe,a.ae=function(o,r,A){var h=Math.sin(A),m=Math.cos(A),w=r[0],B=r[1],E=r[2],U=r[3],D=r[4],V=r[5],W=r[6],te=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=w*m+D*h,o[1]=B*m+V*h,o[2]=E*m+W*h,o[3]=U*m+te*h,o[4]=D*m-w*h,o[5]=V*m-B*h,o[6]=W*m-E*h,o[7]=te*m-U*h,o},a.af=function(o){var r=new Wo(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},a.ag=nu,a.ah=function(o,r){let A=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:m,minZoom:w,maxZoom:B}=o,E=m?Pe(yn.interpolationFactor(m,r,w,B),0,1):0;o.kind==="camera"?h=Xi.number(o.minSize,o.maxSize,E):A=E}return{uSizeT:A,uSize:h}},a.aj=function(o,r,A){let{uSize:h,uSizeT:m}=r,{lowerSize:w,upperSize:B}=A;return o.kind==="source"?w/jA:o.kind==="composite"?Xi.number(w/jA,B/jA,m):h},a.ak=Ny,a.al=function(o,r,A,h){const m=r.y-o.y,w=r.x-o.x,B=h.y-A.y,E=h.x-A.x,U=B*w-E*m;if(U===0)return null;const D=(E*(o.y-A.y)-B*(o.x-A.x))/U;return new M(o.x+D*w,o.y+D*m)},a.am=r4,a.an=eu,a.ao=th,a.ap=wn,a.ar=Dy,a.as=function(o,r){var A=r[0],h=r[1],m=r[2],w=r[3],B=r[4],E=r[5],U=r[6],D=r[7],V=r[8],W=r[9],te=r[10],ae=r[11],oe=r[12],me=r[13],Be=r[14],ke=r[15],Ze=A*E-h*B,je=A*U-m*B,Xe=A*D-w*B,At=h*U-m*E,mt=h*D-w*E,Kt=m*D-w*U,ir=V*me-W*oe,qt=V*Be-te*oe,Ht=V*ke-ae*oe,Dt=W*Be-te*me,er=W*ke-ae*me,Ot=te*ke-ae*Be,St=Ze*Ot-je*er+Xe*Dt+At*Ht-mt*qt+Kt*ir;return St?(o[0]=(E*Ot-U*er+D*Dt)*(St=1/St),o[1]=(m*er-h*Ot-w*Dt)*St,o[2]=(me*Kt-Be*mt+ke*At)*St,o[3]=(te*mt-W*Kt-ae*At)*St,o[4]=(U*Ht-B*Ot-D*qt)*St,o[5]=(A*Ot-m*Ht+w*qt)*St,o[6]=(Be*Xe-oe*Kt-ke*je)*St,o[7]=(V*Kt-te*Xe+ae*je)*St,o[8]=(B*er-E*Ht+D*ir)*St,o[9]=(h*Ht-A*er-w*ir)*St,o[10]=(oe*mt-me*Xe+ke*Ze)*St,o[11]=(W*Xe-V*mt-ae*Ze)*St,o[12]=(E*qt-B*Dt-U*ir)*St,o[13]=(A*Dt-h*qt+m*ir)*St,o[14]=(me*je-oe*At-Be*Ze)*St,o[15]=(V*At-W*je+te*Ze)*St,o):null},a.at=qy,a.au=ky,a.av=$y,a.aw=function(){const o={},r=ze.$version;for(const A in ze.$root){const h=ze.$root[A];if(h.required){let m=null;m=A==="version"?r:h.type==="array"?[]:{},m!=null&&(o[A]=m)}}return o},a.ax=Lt,a.ay=qc,a.az=ot,a.b=function(o,r){const A=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(A).then(h=>{r(null,h)}).catch(h=>{r(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},a.b0=kt,a.b1=function(o,r){var A=o[0],h=o[1],m=o[2],w=o[3],B=o[4],E=o[5],U=o[6],D=o[7],V=o[8],W=o[9],te=o[10],ae=o[11],oe=o[12],me=o[13],Be=o[14],ke=o[15],Ze=r[0],je=r[1],Xe=r[2],At=r[3],mt=r[4],Kt=r[5],ir=r[6],qt=r[7],Ht=r[8],Dt=r[9],er=r[10],Ot=r[11],St=r[12],yr=r[13],lr=r[14],jr=r[15];return Math.abs(A-Ze)<=ts*Math.max(1,Math.abs(A),Math.abs(Ze))&&Math.abs(h-je)<=ts*Math.max(1,Math.abs(h),Math.abs(je))&&Math.abs(m-Xe)<=ts*Math.max(1,Math.abs(m),Math.abs(Xe))&&Math.abs(w-At)<=ts*Math.max(1,Math.abs(w),Math.abs(At))&&Math.abs(B-mt)<=ts*Math.max(1,Math.abs(B),Math.abs(mt))&&Math.abs(E-Kt)<=ts*Math.max(1,Math.abs(E),Math.abs(Kt))&&Math.abs(U-ir)<=ts*Math.max(1,Math.abs(U),Math.abs(ir))&&Math.abs(D-qt)<=ts*Math.max(1,Math.abs(D),Math.abs(qt))&&Math.abs(V-Ht)<=ts*Math.max(1,Math.abs(V),Math.abs(Ht))&&Math.abs(W-Dt)<=ts*Math.max(1,Math.abs(W),Math.abs(Dt))&&Math.abs(te-er)<=ts*Math.max(1,Math.abs(te),Math.abs(er))&&Math.abs(ae-Ot)<=ts*Math.max(1,Math.abs(ae),Math.abs(Ot))&&Math.abs(oe-St)<=ts*Math.max(1,Math.abs(oe),Math.abs(St))&&Math.abs(me-yr)<=ts*Math.max(1,Math.abs(me),Math.abs(yr))&&Math.abs(Be-lr)<=ts*Math.max(1,Math.abs(Be),Math.abs(lr))&&Math.abs(ke-jr)<=ts*Math.max(1,Math.abs(ke),Math.abs(jr))},a.b2=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},a.b3=function(o,r,A){return o[0]=r[0]*A[0],o[1]=r[1]*A[1],o[2]=r[2]*A[2],o[3]=r[3]*A[3],o},a.b4=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},a.b5=Ee,a.b6=WC,a.b7=qC,a.b8=function(o,r,A,h,m){var w,B=1/Math.tan(r/2);return o[0]=B/A,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=B,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,m!=null&&m!==1/0?(o[10]=(m+h)*(w=1/(h-m)),o[14]=2*m*h*w):(o[10]=-1,o[14]=-2*h),o},a.b9=function(o,r,A){var h=Math.sin(A),m=Math.cos(A),w=r[4],B=r[5],E=r[6],U=r[7],D=r[8],V=r[9],W=r[10],te=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=w*m+D*h,o[5]=B*m+V*h,o[6]=E*m+W*h,o[7]=U*m+te*h,o[8]=D*m-w*h,o[9]=V*m-B*h,o[10]=W*m-E*h,o[11]=te*m-U*h,o},a.bA=C,a.bB=wC,a.bC=Yi,a.bD=cs,a.ba=Se,a.bb=Ne,a.bc=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},a.bd=class extends DA{},a.be=Hy,a.bf=$C,a.bg=r9,a.bi=st,a.bj=function(o,r){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(Mn===PA||Mn===gl||Mn===nc)throw new Error("setRTLTextPlugin cannot be called multiple times.");ra=Ge.resolveURL(o),Mn=PA,ml=r,Kc(),A||Xu()},a.bk=sc,a.bl=function(o,r){const A={};for(let m=0;m<o.length;m++){const w=r&&r[o[m].id]||vn(o[m]);r&&(r[o[m].id]=w);let B=A[w];B||(B=A[w]=[]),B.push(o[m])}const h=[];for(const m in A)h.push(A[m]);return h},a.bm=Zt,a.bn=XC,a.bo=JC,a.bp=LC,a.bq=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Si/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],A=r.layout,h=r._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new xi(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new xi(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new xi(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:V}=o.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new xi(D),o.canonical),h["text-size"].possiblyEvaluate(new xi(V),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:V}=o.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new xi(D),o.canonical),h["icon-size"].possiblyEvaluate(new xi(V),o.canonical)]}const w=A.get("text-line-height")*wn,B=A.get("text-rotation-alignment")!=="viewport"&&A.get("symbol-placement")!=="point",E=A.get("text-keep-upright"),U=A.get("text-size");for(const D of o.bucket.features){const V=A.get("text-font").evaluate(D,{},o.canonical).join(","),W=U.evaluate(D,{},o.canonical),te=m.layoutTextSize.evaluate(D,{},o.canonical),ae=m.layoutIconSize.evaluate(D,{},o.canonical),oe={horizontal:{},vertical:void 0},me=D.text;let Be,ke=[0,0];if(me){const Xe=me.toString(),At=A.get("text-letter-spacing").evaluate(D,{},o.canonical)*wn,mt=UA(Xe)?At:0,Kt=A.get("text-anchor").evaluate(D,{},o.canonical),ir=u4(r,D,o.canonical);if(!ir){const Ot=A.get("text-radial-offset").evaluate(D,{},o.canonical);ke=Ot?c4(Kt,[Ot*wn,Gy]):A.get("text-offset").evaluate(D,{},o.canonical).map(St=>St*wn)}let qt=B?"center":A.get("text-justify").evaluate(D,{},o.canonical);const Ht=A.get("symbol-placement"),Dt=Ht==="point"?A.get("text-max-width").evaluate(D,{},o.canonical)*wn:0,er=()=>{o.bucket.allowVerticalPlacement&&pl(Xe)&&(oe.vertical=Ag(me,o.glyphMap,o.glyphPositions,o.imagePositions,V,Dt,w,Kt,"left",mt,ke,a.ai.vertical,!0,Ht,te,W))};if(!B&&ir){const Ot=new Set;if(qt==="auto")for(let yr=0;yr<ir.values.length;yr+=2)Ot.add(qy(ir.values[yr]));else Ot.add(qt);let St=!1;for(const yr of Ot)if(!oe.horizontal[yr])if(St)oe.horizontal[yr]=oe.horizontal[0];else{const lr=Ag(me,o.glyphMap,o.glyphPositions,o.imagePositions,V,Dt,w,"center",yr,mt,ke,a.ai.horizontal,!1,Ht,te,W);lr&&(oe.horizontal[yr]=lr,St=lr.positionedLines.length===1)}er()}else{qt==="auto"&&(qt=qy(Kt));const Ot=Ag(me,o.glyphMap,o.glyphPositions,o.imagePositions,V,Dt,w,Kt,qt,mt,ke,a.ai.horizontal,!1,Ht,te,W);Ot&&(oe.horizontal[qt]=Ot),er(),pl(Xe)&&B&&E&&(oe.vertical=Ag(me,o.glyphMap,o.glyphPositions,o.imagePositions,V,Dt,w,Kt,qt,mt,ke,a.ai.vertical,!1,Ht,te,W))}}let Ze=!1;if(D.icon&&D.icon.name){const Xe=o.imageMap[D.icon.name];Xe&&(Be=DH(o.imagePositions[D.icon.name],A.get("icon-offset").evaluate(D,{},o.canonical),A.get("icon-anchor").evaluate(D,{},o.canonical)),Ze=!!Xe.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Ze:o.bucket.sdfIcons!==Ze&&_e("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Xe.pixelRatio!==o.bucket.pixelRatio||A.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const je=p4(oe.horizontal)||oe.vertical;o.bucket.iconsInText=!!je&&je.iconsInText,(je||Be)&&e9(o.bucket,D,oe,Be,o.imageMap,m,te,ae,ke,Ze,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},a.br=Ly,a.bs=Ey,a.bt=Iy,a.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},a.bv=Uy,a.bw=pc,a.bx=function(o,r,A,h,m){return g(this,void 0,void 0,function*(){if(he())try{return yield Bt(o,r,A,h,m)}catch{}return function(w,B,E,U,D){const V=w.width,W=w.height;ee&&pe||(ee=new OffscreenCanvas(V,W),pe=ee.getContext("2d",{willReadFrequently:!0})),ee.width=V,ee.height=W,pe.drawImage(w,0,0,V,W);const te=pe.getImageData(B,E,U,D);return pe.clearRect(0,0,V,W),te.data}(o,r,A,h,m)})},a.by=ZC,a.bz=_,a.c=tt,a.d=function(o,r){const A=new Image;A.onload=()=>{r(null,A),URL.revokeObjectURL(A.src),A.onload=null,window.requestAnimationFrame(()=>{A.src=nt})},A.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(o)],{type:"image/png"});A.src=o.byteLength?URL.createObjectURL(h):nt},a.e=fe,a.f=function(o,r){return zt(fe(o,{type:"json"}),r)},a.g=Ct,a.h=Ge,a.i=rt,a.j=Xt,a.k=fr,a.l=Vt,a.m=zt,a.n=function(o){return new Uy(o).readFields(TH,[])},a.o=function(o,r,A){if(!o.length)return A(null,[]);let h=o.length;const m=new Array(o.length);let w=null;o.forEach((B,E)=>{r(B,(U,D)=>{U&&(w=U),m[E]=D,--h==0&&A(w,m)})})},a.p=IC,a.q=Zo,a.r=ui,a.s=Jt,a.t=Vi,a.u=Gt,a.v=ze,a.w=_e,a.x=ea,a.y=oi,a.z=function(o){let[r,A,h]=o;return A+=90,A*=Math.PI/180,h*=Math.PI/180,{x:r*Math.cos(A)*Math.sin(h),y:r*Math.sin(A)*Math.sin(h),z:r*Math.cos(h)}}}),c(["./shared"],function(a){class g{constructor(X){this.keyCache={},X&&this.replace(X)}replace(X){this._layerConfigs={},this._layers={},this.update(X,[])}update(X,ie){for(const ve of X){this._layerConfigs[ve.id]=ve;const be=this._layers[ve.id]=a.aC(ve);be._featureFilter=a.a6(be.filter),this.keyCache[ve.id]&&delete this.keyCache[ve.id]}for(const ve of ie)delete this.keyCache[ve],delete this._layerConfigs[ve],delete this._layers[ve];this.familiesBySource={};const le=a.bl(Object.values(this._layerConfigs),this.keyCache);for(const ve of le){const be=ve.map(ht=>this._layers[ht.id]),De=be[0];if(De.visibility==="none")continue;const Oe=De.source||"";let Ue=this.familiesBySource[Oe];Ue||(Ue=this.familiesBySource[Oe]={});const Ve=De.sourceLayer||"_geojsonTileLayer";let lt=Ue[Ve];lt||(lt=Ue[Ve]=[]),lt.push(be)}}}class _{constructor(X){const ie={},le=[];for(const Oe in X){const Ue=X[Oe],Ve=ie[Oe]={};for(const lt in Ue){const ht=Ue[+lt];if(!ht||ht.bitmap.width===0||ht.bitmap.height===0)continue;const gt={x:0,y:0,w:ht.bitmap.width+2,h:ht.bitmap.height+2};le.push(gt),Ve[lt]={rect:gt,metrics:ht.metrics}}}const{w:ve,h:be}=a.p(le),De=new a.q({width:ve||1,height:be||1});for(const Oe in X){const Ue=X[Oe];for(const Ve in Ue){const lt=Ue[+Ve];if(!lt||lt.bitmap.width===0||lt.bitmap.height===0)continue;const ht=ie[Oe][Ve].rect;a.q.copy(lt.bitmap,De,{x:0,y:0},{x:ht.x+1,y:ht.y+1},lt.bitmap)}}this.image=De,this.positions=ie}}a.bm("GlyphAtlas",_);class C{constructor(X){this.tileID=new a.O(X.tileID.overscaledZ,X.tileID.wrap,X.tileID.canonical.z,X.tileID.canonical.x,X.tileID.canonical.y),this.uid=X.uid,this.zoom=X.zoom,this.pixelRatio=X.pixelRatio,this.tileSize=X.tileSize,this.source=X.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=X.showCollisionBoxes,this.collectResourceTiming=!!X.collectResourceTiming,this.returnDependencies=!!X.returnDependencies,this.promoteId=X.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(X,ie,le,ve,be){this.status="parsing",this.data=X,this.collisionBoxArray=new a.a3;const De=new a.bn(Object.keys(X.layers).sort()),Oe=new a.bo(this.tileID,this.promoteId);Oe.bucketLayerIDs=[];const Ue={},Ve={featureIndex:Oe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:le},lt=ie.familiesBySource[this.source];for(const Sr in lt){const Te=X.layers[Sr];if(!Te)continue;Te.version===1&&a.w(`Vector tile source "${this.source}" layer "${Sr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Qt=De.encode(Sr),yt=[];for(let vr=0;vr<Te.length;vr++){const Nr=Te.feature(vr),di=Oe.getId(Nr,Sr);yt.push({feature:Nr,id:di,index:vr,sourceLayerIndex:Qt})}for(const vr of lt[Sr]){const Nr=vr[0];Nr.source!==this.source&&a.w(`layer.source = ${Nr.source} does not equal this.source = ${this.source}`),Nr.minzoom&&this.zoom<Math.floor(Nr.minzoom)||Nr.maxzoom&&this.zoom>=Nr.maxzoom||Nr.visibility!=="none"&&(L(vr,this.zoom,le),(Ue[Nr.id]=Nr.createBucket({index:Oe.bucketLayerIDs.length,layers:vr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Qt,sourceID:this.source})).populate(yt,Ve,this.tileID.canonical),Oe.bucketLayerIDs.push(vr.map(di=>di.id)))}}let ht,gt,nr,sr;const jt=a.aH(Ve.glyphDependencies,Sr=>Object.keys(Sr).map(Number));this.inFlightDependencies.forEach(Sr=>Sr==null?void 0:Sr.cancel()),this.inFlightDependencies=[];const Yt=++this.dependencySentinel;Object.keys(jt).length?this.inFlightDependencies.push(ve.send("getGlyphs",{uid:this.uid,stacks:jt,source:this.source,tileID:this.tileID,type:"glyphs"},(Sr,Te)=>{Yt===this.dependencySentinel&&(ht||(ht=Sr,gt=Te,Rr.call(this)))})):gt={};const ur=Object.keys(Ve.iconDependencies);ur.length?this.inFlightDependencies.push(ve.send("getImages",{icons:ur,source:this.source,tileID:this.tileID,type:"icons"},(Sr,Te)=>{Yt===this.dependencySentinel&&(ht||(ht=Sr,nr=Te,Rr.call(this)))})):nr={};const Br=Object.keys(Ve.patternDependencies);function Rr(){if(ht)return be(ht);if(gt&&nr&&sr){const Sr=new _(gt),Te=new a.bp(nr,sr);for(const Qt in Ue){const yt=Ue[Qt];yt instanceof a.a4?(L(yt.layers,this.zoom,le),a.bq({bucket:yt,glyphMap:gt,glyphPositions:Sr.positions,imageMap:nr,imagePositions:Te.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):yt.hasPattern&&(yt instanceof a.br||yt instanceof a.bs||yt instanceof a.bt)&&(L(yt.layers,this.zoom,le),yt.addFeatures(Ve,this.tileID.canonical,Te.patternPositions))}this.status="done",be(null,{buckets:Object.values(Ue).filter(Qt=>!Qt.isEmpty()),featureIndex:Oe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Sr.image,imageAtlas:Te,glyphMap:this.returnDependencies?gt:null,iconMap:this.returnDependencies?nr:null,glyphPositions:this.returnDependencies?Sr.positions:null})}}Br.length?this.inFlightDependencies.push(ve.send("getImages",{icons:Br,source:this.source,tileID:this.tileID,type:"patterns"},(Sr,Te)=>{Yt===this.dependencySentinel&&(ht||(ht=Sr,sr=Te,Rr.call(this)))})):sr={},Rr.call(this)}}function L(ue,X,ie){const le=new a.a8(X);for(const ve of ue)ve.recalculate(le,ie)}function M(ue,X){const ie=a.l(ue.request,(le,ve,be,De)=>{if(le)X(le);else if(ve)try{const Oe=new a.bw.VectorTile(new a.bv(ve));X(null,{vectorTile:Oe,rawData:ve,cacheControl:be,expires:De})}catch(Oe){const Ue=new Uint8Array(ve);let Ve=`Unable to parse the tile at ${ue.request.url}, `;Ve+=Ue[0]===31&&Ue[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Oe.messge}`,X(new Error(Ve))}});return()=>{ie.cancel(),X()}}class I{constructor(X,ie,le,ve){this.actor=X,this.layerIndex=ie,this.availableImages=le,this.loadVectorData=ve||M,this.fetching={},this.loading={},this.loaded={}}loadTile(X,ie){const le=X.uid;this.loading||(this.loading={});const ve=!!(X&&X.request&&X.request.collectResourceTiming)&&new a.bu(X.request),be=this.loading[le]=new C(X);be.abort=this.loadVectorData(X,(De,Oe)=>{if(delete this.loading[le],De||!Oe)return be.status="done",this.loaded[le]=be,ie(De);const Ue=Oe.rawData,Ve={};Oe.expires&&(Ve.expires=Oe.expires),Oe.cacheControl&&(Ve.cacheControl=Oe.cacheControl);const lt={};if(ve){const ht=ve.finish();ht&&(lt.resourceTiming=JSON.parse(JSON.stringify(ht)))}be.vectorTile=Oe.vectorTile,be.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor,(ht,gt)=>{if(delete this.fetching[le],ht||!gt)return ie(ht);ie(null,a.e({rawTileData:Ue.slice(0)},gt,Ve,lt))}),this.loaded=this.loaded||{},this.loaded[le]=be,this.fetching[le]={rawTileData:Ue,cacheControl:Ve,resourceTiming:lt}})}reloadTile(X,ie){const le=this.loaded,ve=X.uid;if(le&&le[ve]){const be=le[ve];be.showCollisionBoxes=X.showCollisionBoxes,be.status==="parsing"?be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,(De,Oe)=>{if(De||!Oe)return ie(De,Oe);let Ue;if(this.fetching[ve]){const{rawTileData:Ve,cacheControl:lt,resourceTiming:ht}=this.fetching[ve];delete this.fetching[ve],Ue=a.e({rawTileData:Ve.slice(0)},Oe,lt,ht)}else Ue=Oe;ie(null,Ue)}):be.status==="done"&&(be.vectorTile?be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,ie):ie())}}abortTile(X,ie){const le=this.loading,ve=X.uid;le&&le[ve]&&le[ve].abort&&(le[ve].abort(),delete le[ve]),ie()}removeTile(X,ie){const le=this.loaded,ve=X.uid;le&&le[ve]&&delete le[ve],ie()}}class G{constructor(){this.loaded={}}loadTile(X,ie){return a._(this,void 0,void 0,function*(){const{uid:le,encoding:ve,rawImageData:be,redFactor:De,greenFactor:Oe,blueFactor:Ue,baseShift:Ve}=X,lt=be.width+2,ht=be.height+2,gt=a.a(be)?new a.R({width:lt,height:ht},yield a.bx(be,-1,-1,lt,ht)):be,nr=new a.by(le,gt,ve,De,Oe,Ue,Ve);this.loaded=this.loaded||{},this.loaded[le]=nr,ie(null,nr)})}removeTile(X){const ie=this.loaded,le=X.uid;ie&&ie[le]&&delete ie[le]}}function j(ue,X){if(ue.length!==0){Y(ue[0],X);for(var ie=1;ie<ue.length;ie++)Y(ue[ie],!X)}}function Y(ue,X){for(var ie=0,le=0,ve=0,be=ue.length,De=be-1;ve<be;De=ve++){var Oe=(ue[ve][0]-ue[De][0])*(ue[De][1]+ue[ve][1]),Ue=ie+Oe;le+=Math.abs(ie)>=Math.abs(Oe)?ie-Ue+Oe:Oe-Ue+ie,ie=Ue}ie+le>=0!=!!X&&ue.reverse()}var q=a.bz(function ue(X,ie){var le,ve=X&&X.type;if(ve==="FeatureCollection")for(le=0;le<X.features.length;le++)ue(X.features[le],ie);else if(ve==="GeometryCollection")for(le=0;le<X.geometries.length;le++)ue(X.geometries[le],ie);else if(ve==="Feature")ue(X.geometry,ie);else if(ve==="Polygon")j(X.coordinates,ie);else if(ve==="MultiPolygon")for(le=0;le<X.coordinates.length;le++)j(X.coordinates[le],ie);return X});const ne=a.bw.VectorTileFeature.prototype.toGeoJSON;var he={exports:{}},Se=a.bA,Ne=a.bw.VectorTileFeature,Pe=Ee;function Ee(ue,X){this.options=X||{},this.features=ue,this.length=ue.length}function fe(ue,X){this.id=typeof ue.id=="number"?ue.id:void 0,this.type=ue.type,this.rawGeometry=ue.type===1?[ue.geometry]:ue.geometry,this.properties=ue.tags,this.extent=X||4096}Ee.prototype.feature=function(ue){return new fe(this.features[ue],this.options.extent)},fe.prototype.loadGeometry=function(){var ue=this.rawGeometry;this.geometry=[];for(var X=0;X<ue.length;X++){for(var ie=ue[X],le=[],ve=0;ve<ie.length;ve++)le.push(new Se(ie[ve][0],ie[ve][1]));this.geometry.push(le)}return this.geometry},fe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ue=this.geometry,X=1/0,ie=-1/0,le=1/0,ve=-1/0,be=0;be<ue.length;be++)for(var De=ue[be],Oe=0;Oe<De.length;Oe++){var Ue=De[Oe];X=Math.min(X,Ue.x),ie=Math.max(ie,Ue.x),le=Math.min(le,Ue.y),ve=Math.max(ve,Ue.y)}return[X,le,ie,ve]},fe.prototype.toGeoJSON=Ne.prototype.toGeoJSON;var We=a.bB,Ke=Pe;function ce(ue){var X=new We;return function(ie,le){for(var ve in ie.layers)le.writeMessage(3,Ae,ie.layers[ve])}(ue,X),X.finish()}function Ae(ue,X){var ie;X.writeVarintField(15,ue.version||1),X.writeStringField(1,ue.name||""),X.writeVarintField(5,ue.extent||4096);var le={keys:[],values:[],keycache:{},valuecache:{}};for(ie=0;ie<ue.length;ie++)le.feature=ue.feature(ie),X.writeMessage(2,xe,le);var ve=le.keys;for(ie=0;ie<ve.length;ie++)X.writeStringField(3,ve[ie]);var be=le.values;for(ie=0;ie<be.length;ie++)X.writeMessage(4,Ye,be[ie])}function xe(ue,X){var ie=ue.feature;ie.id!==void 0&&X.writeVarintField(1,ie.id),X.writeMessage(2,_e,ue),X.writeVarintField(3,ie.type),X.writeMessage(4,rt,ie)}function _e(ue,X){var ie=ue.feature,le=ue.keys,ve=ue.values,be=ue.keycache,De=ue.valuecache;for(var Oe in ie.properties){var Ue=ie.properties[Oe],Ve=be[Oe];if(Ue!==null){Ve===void 0&&(le.push(Oe),be[Oe]=Ve=le.length-1),X.writeVarint(Ve);var lt=typeof Ue;lt!=="string"&&lt!=="boolean"&&lt!=="number"&&(Ue=JSON.stringify(Ue));var ht=lt+":"+Ue,gt=De[ht];gt===void 0&&(ve.push(Ue),De[ht]=gt=ve.length-1),X.writeVarint(gt)}}}function et(ue,X){return(X<<3)+(7&ue)}function Je(ue){return ue<<1^ue>>31}function rt(ue,X){for(var ie=ue.loadGeometry(),le=ue.type,ve=0,be=0,De=ie.length,Oe=0;Oe<De;Oe++){var Ue=ie[Oe],Ve=1;le===1&&(Ve=Ue.length),X.writeVarint(et(1,Ve));for(var lt=le===3?Ue.length-1:Ue.length,ht=0;ht<lt;ht++){ht===1&&le!==1&&X.writeVarint(et(2,lt-1));var gt=Ue[ht].x-ve,nr=Ue[ht].y-be;X.writeVarint(Je(gt)),X.writeVarint(Je(nr)),ve+=gt,be+=nr}le===3&&X.writeVarint(et(7,1))}}function Ye(ue,X){var ie=typeof ue;ie==="string"?X.writeStringField(1,ue):ie==="boolean"?X.writeBooleanField(7,ue):ie==="number"&&(ue%1!=0?X.writeDoubleField(3,ue):ue<0?X.writeSVarintField(6,ue):X.writeVarintField(5,ue))}he.exports=ce,he.exports.fromVectorTileJs=ce,he.exports.fromGeojsonVt=function(ue,X){X=X||{};var ie={};for(var le in ue)ie[le]=new Ke(ue[le].features,X),ie[le].name=le,ie[le].version=X.version,ie[le].extent=X.extent;return ce({layers:ie})},he.exports.GeoJSONWrapper=Ke;var it=a.bz(he.exports);const nt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ue=>ue},Bt=Math.fround||(ee=new Float32Array(1),ue=>(ee[0]=+ue,ee[0]));var ee;const pe=3,ye=5,Re=6;class Ge{constructor(X){this.options=Object.assign(Object.create(nt),X),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(X){const{log:ie,minZoom:le,maxZoom:ve}=this.options;ie&&console.time("total time");const be=`prepare ${X.length} points`;ie&&console.time(be),this.points=X;const De=[];for(let Ue=0;Ue<X.length;Ue++){const Ve=X[Ue];if(!Ve.geometry)continue;const[lt,ht]=Ve.geometry.coordinates,gt=Bt(ot(lt)),nr=Bt(Ct(ht));De.push(gt,nr,1/0,Ue,-1,1),this.options.reduce&&De.push(0)}let Oe=this.trees[ve+1]=this._createTree(De);ie&&console.timeEnd(be);for(let Ue=ve;Ue>=le;Ue--){const Ve=+Date.now();Oe=this.trees[Ue]=this._createTree(this._cluster(Oe,Ue)),ie&&console.log("z%d: %d clusters in %dms",Ue,Oe.numItems,+Date.now()-Ve)}return ie&&console.timeEnd("total time"),this}getClusters(X,ie){let le=((X[0]+180)%360+360)%360-180;const ve=Math.max(-90,Math.min(90,X[1]));let be=X[2]===180?180:((X[2]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,X[3]));if(X[2]-X[0]>=360)le=-180,be=180;else if(le>be){const ht=this.getClusters([le,ve,180,De],ie),gt=this.getClusters([-180,ve,be,De],ie);return ht.concat(gt)}const Oe=this.trees[this._limitZoom(ie)],Ue=Oe.range(ot(le),Ct(De),ot(be),Ct(ve)),Ve=Oe.data,lt=[];for(const ht of Ue){const gt=this.stride*ht;lt.push(Ve[gt+ye]>1?tt(Ve,gt,this.clusterProps):this.points[Ve[gt+pe]])}return lt}getChildren(X){const ie=this._getOriginId(X),le=this._getOriginZoom(X),ve="No cluster with the specified id.",be=this.trees[le];if(!be)throw new Error(ve);const De=be.data;if(ie*this.stride>=De.length)throw new Error(ve);const Oe=this.options.radius/(this.options.extent*Math.pow(2,le-1)),Ue=be.within(De[ie*this.stride],De[ie*this.stride+1],Oe),Ve=[];for(const lt of Ue){const ht=lt*this.stride;De[ht+4]===X&&Ve.push(De[ht+ye]>1?tt(De,ht,this.clusterProps):this.points[De[ht+pe]])}if(Ve.length===0)throw new Error(ve);return Ve}getLeaves(X,ie,le){const ve=[];return this._appendLeaves(ve,X,ie=ie||10,le=le||0,0),ve}getTile(X,ie,le){const ve=this.trees[this._limitZoom(X)],be=Math.pow(2,X),{extent:De,radius:Oe}=this.options,Ue=Oe/De,Ve=(le-Ue)/be,lt=(le+1+Ue)/be,ht={features:[]};return this._addTileFeatures(ve.range((ie-Ue)/be,Ve,(ie+1+Ue)/be,lt),ve.data,ie,le,be,ht),ie===0&&this._addTileFeatures(ve.range(1-Ue/be,Ve,1,lt),ve.data,be,le,be,ht),ie===be-1&&this._addTileFeatures(ve.range(0,Ve,Ue/be,lt),ve.data,-1,le,be,ht),ht.features.length?ht:null}getClusterExpansionZoom(X){let ie=this._getOriginZoom(X)-1;for(;ie<=this.options.maxZoom;){const le=this.getChildren(X);if(ie++,le.length!==1)break;X=le[0].properties.cluster_id}return ie}_appendLeaves(X,ie,le,ve,be){const De=this.getChildren(ie);for(const Oe of De){const Ue=Oe.properties;if(Ue&&Ue.cluster?be+Ue.point_count<=ve?be+=Ue.point_count:be=this._appendLeaves(X,Ue.cluster_id,le,ve,be):be<ve?be++:X.push(Oe),X.length===le)break}return be}_createTree(X){const ie=new a.av(X.length/this.stride|0,this.options.nodeSize,Float32Array);for(let le=0;le<X.length;le+=this.stride)ie.add(X[le],X[le+1]);return ie.finish(),ie.data=X,ie}_addTileFeatures(X,ie,le,ve,be,De){for(const Oe of X){const Ue=Oe*this.stride,Ve=ie[Ue+ye]>1;let lt,ht,gt;if(Ve)lt=st(ie,Ue,this.clusterProps),ht=ie[Ue],gt=ie[Ue+1];else{const jt=this.points[ie[Ue+pe]];lt=jt.properties;const[Yt,ur]=jt.geometry.coordinates;ht=ot(Yt),gt=Ct(ur)}const nr={type:1,geometry:[[Math.round(this.options.extent*(ht*be-le)),Math.round(this.options.extent*(gt*be-ve))]],tags:lt};let sr;sr=Ve||this.options.generateId?ie[Ue+pe]:this.points[ie[Ue+pe]].id,sr!==void 0&&(nr.id=sr),De.features.push(nr)}}_limitZoom(X){return Math.max(this.options.minZoom,Math.min(Math.floor(+X),this.options.maxZoom+1))}_cluster(X,ie){const{radius:le,extent:ve,reduce:be,minPoints:De}=this.options,Oe=le/(ve*Math.pow(2,ie)),Ue=X.data,Ve=[],lt=this.stride;for(let ht=0;ht<Ue.length;ht+=lt){if(Ue[ht+2]<=ie)continue;Ue[ht+2]=ie;const gt=Ue[ht],nr=Ue[ht+1],sr=X.within(Ue[ht],Ue[ht+1],Oe),jt=Ue[ht+ye];let Yt=jt;for(const ur of sr){const Br=ur*lt;Ue[Br+2]>ie&&(Yt+=Ue[Br+ye])}if(Yt>jt&&Yt>=De){let ur,Br=gt*jt,Rr=nr*jt,Sr=-1;const Te=((ht/lt|0)<<5)+(ie+1)+this.points.length;for(const Qt of sr){const yt=Qt*lt;if(Ue[yt+2]<=ie)continue;Ue[yt+2]=ie;const vr=Ue[yt+ye];Br+=Ue[yt]*vr,Rr+=Ue[yt+1]*vr,Ue[yt+4]=Te,be&&(ur||(ur=this._map(Ue,ht,!0),Sr=this.clusterProps.length,this.clusterProps.push(ur)),be(ur,this._map(Ue,yt)))}Ue[ht+4]=Te,Ve.push(Br/Yt,Rr/Yt,1/0,Te,-1,Yt),be&&Ve.push(Sr)}else{for(let ur=0;ur<lt;ur++)Ve.push(Ue[ht+ur]);if(Yt>1)for(const ur of sr){const Br=ur*lt;if(!(Ue[Br+2]<=ie)){Ue[Br+2]=ie;for(let Rr=0;Rr<lt;Rr++)Ve.push(Ue[Br+Rr])}}}}return Ve}_getOriginId(X){return X-this.points.length>>5}_getOriginZoom(X){return(X-this.points.length)%32}_map(X,ie,le){if(X[ie+ye]>1){const De=this.clusterProps[X[ie+Re]];return le?Object.assign({},De):De}const ve=this.points[X[ie+pe]].properties,be=this.options.map(ve);return le&&be===ve?Object.assign({},be):be}}function tt(ue,X,ie){return{type:"Feature",id:ue[X+pe],properties:st(ue,X,ie),geometry:{type:"Point",coordinates:[(le=ue[X],360*(le-.5)),Et(ue[X+1])]}};var le}function st(ue,X,ie){const le=ue[X+ye],ve=le>=1e4?`${Math.round(le/1e3)}k`:le>=1e3?Math.round(le/100)/10+"k":le,be=ue[X+Re],De=be===-1?{}:Object.assign({},ie[be]);return Object.assign(De,{cluster:!0,cluster_id:ue[X+pe],point_count:le,point_count_abbreviated:ve})}function ot(ue){return ue/360+.5}function Ct(ue){const X=Math.sin(ue*Math.PI/180),ie=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return ie<0?0:ie>1?1:ie}function Et(ue){const X=(180-360*ue)*Math.PI/180;return 360*Math.atan(Math.exp(X))/Math.PI-90}function zt(ue,X,ie,le){for(var ve,be=le,De=ie-X>>1,Oe=ie-X,Ue=ue[X],Ve=ue[X+1],lt=ue[ie],ht=ue[ie+1],gt=X+3;gt<ie;gt+=3){var nr=Vt(ue[gt],ue[gt+1],Ue,Ve,lt,ht);if(nr>be)ve=gt,be=nr;else if(nr===be){var sr=Math.abs(gt-De);sr<Oe&&(ve=gt,Oe=sr)}}be>le&&(ve-X>3&&zt(ue,X,ve,le),ue[ve+2]=be,ie-ve>3&&zt(ue,ve,ie,le))}function Vt(ue,X,ie,le,ve,be){var De=ve-ie,Oe=be-le;if(De!==0||Oe!==0){var Ue=((ue-ie)*De+(X-le)*Oe)/(De*De+Oe*Oe);Ue>1?(ie=ve,le=be):Ue>0&&(ie+=De*Ue,le+=Oe*Ue)}return(De=ue-ie)*De+(Oe=X-le)*Oe}function Jt(ue,X,ie,le){var ve={id:ue===void 0?null:ue,type:X,geometry:ie,tags:le,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(be){var De=be.geometry,Oe=be.type;if(Oe==="Point"||Oe==="MultiPoint"||Oe==="LineString")ft(be,De);else if(Oe==="Polygon"||Oe==="MultiLineString")for(var Ue=0;Ue<De.length;Ue++)ft(be,De[Ue]);else if(Oe==="MultiPolygon")for(Ue=0;Ue<De.length;Ue++)for(var Ve=0;Ve<De[Ue].length;Ve++)ft(be,De[Ue][Ve])}(ve),ve}function ft(ue,X){for(var ie=0;ie<X.length;ie+=3)ue.minX=Math.min(ue.minX,X[ie]),ue.minY=Math.min(ue.minY,X[ie+1]),ue.maxX=Math.max(ue.maxX,X[ie]),ue.maxY=Math.max(ue.maxY,X[ie+1])}function Me(ue,X,ie,le){if(X.geometry){var ve=X.geometry.coordinates,be=X.geometry.type,De=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2),Oe=[],Ue=X.id;if(ie.promoteId?Ue=X.properties[ie.promoteId]:ie.generateId&&(Ue=le||0),be==="Point")fr(ve,Oe);else if(be==="MultiPoint")for(var Ve=0;Ve<ve.length;Ve++)fr(ve[Ve],Oe);else if(be==="LineString")Xt(ve,Oe,De,!1);else if(be==="MultiLineString"){if(ie.lineMetrics){for(Ve=0;Ve<ve.length;Ve++)Xt(ve[Ve],Oe=[],De,!1),ue.push(Jt(Ue,"LineString",Oe,X.properties));return}bt(ve,Oe,De,!1)}else if(be==="Polygon")bt(ve,Oe,De,!0);else{if(be!=="MultiPolygon"){if(be==="GeometryCollection"){for(Ve=0;Ve<X.geometry.geometries.length;Ve++)Me(ue,{id:Ue,geometry:X.geometry.geometries[Ve],properties:X.properties},ie,le);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ve=0;Ve<ve.length;Ve++){var lt=[];bt(ve[Ve],lt,De,!0),Oe.push(lt)}}ue.push(Jt(Ue,be,Oe,X.properties))}}function fr(ue,X){X.push(ze(ue[0])),X.push(Ut(ue[1])),X.push(0)}function Xt(ue,X,ie,le){for(var ve,be,De=0,Oe=0;Oe<ue.length;Oe++){var Ue=ze(ue[Oe][0]),Ve=Ut(ue[Oe][1]);X.push(Ue),X.push(Ve),X.push(0),Oe>0&&(De+=le?(ve*Ve-Ue*be)/2:Math.sqrt(Math.pow(Ue-ve,2)+Math.pow(Ve-be,2))),ve=Ue,be=Ve}var lt=X.length-3;X[2]=1,zt(X,0,lt,ie),X[lt+2]=1,X.size=Math.abs(De),X.start=0,X.end=X.size}function bt(ue,X,ie,le){for(var ve=0;ve<ue.length;ve++){var be=[];Xt(ue[ve],be,ie,le),X.push(be)}}function ze(ue){return ue/360+.5}function Ut(ue){var X=Math.sin(ue*Math.PI/180),ie=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return ie<0?0:ie>1?1:ie}function Pt(ue,X,ie,le,ve,be,De,Oe){if(le/=X,be>=(ie/=X)&&De<le)return ue;if(De<ie||be>=le)return null;for(var Ue=[],Ve=0;Ve<ue.length;Ve++){var lt=ue[Ve],ht=lt.geometry,gt=lt.type,nr=ve===0?lt.minX:lt.minY,sr=ve===0?lt.maxX:lt.maxY;if(nr>=ie&&sr<le)Ue.push(lt);else if(!(sr<ie||nr>=le)){var jt=[];if(gt==="Point"||gt==="MultiPoint")Mt(ht,jt,ie,le,ve);else if(gt==="LineString")Lt(ht,jt,ie,le,ve,!1,Oe.lineMetrics);else if(gt==="MultiLineString")wr(ht,jt,ie,le,ve,!1);else if(gt==="Polygon")wr(ht,jt,ie,le,ve,!0);else if(gt==="MultiPolygon")for(var Yt=0;Yt<ht.length;Yt++){var ur=[];wr(ht[Yt],ur,ie,le,ve,!0),ur.length&&jt.push(ur)}if(jt.length){if(Oe.lineMetrics&&gt==="LineString"){for(Yt=0;Yt<jt.length;Yt++)Ue.push(Jt(lt.id,gt,jt[Yt],lt.tags));continue}gt!=="LineString"&&gt!=="MultiLineString"||(jt.length===1?(gt="LineString",jt=jt[0]):gt="MultiLineString"),gt!=="Point"&&gt!=="MultiPoint"||(gt=jt.length===3?"Point":"MultiPoint"),Ue.push(Jt(lt.id,gt,jt,lt.tags))}}}return Ue.length?Ue:null}function Mt(ue,X,ie,le,ve){for(var be=0;be<ue.length;be+=3){var De=ue[be+ve];De>=ie&&De<=le&&(X.push(ue[be]),X.push(ue[be+1]),X.push(ue[be+2]))}}function Lt(ue,X,ie,le,ve,be,De){for(var Oe,Ue,Ve=hr(ue),lt=ve===0?qr:gr,ht=ue.start,gt=0;gt<ue.length-3;gt+=3){var nr=ue[gt],sr=ue[gt+1],jt=ue[gt+2],Yt=ue[gt+3],ur=ue[gt+4],Br=ve===0?nr:sr,Rr=ve===0?Yt:ur,Sr=!1;De&&(Oe=Math.sqrt(Math.pow(nr-Yt,2)+Math.pow(sr-ur,2))),Br<ie?Rr>ie&&(Ue=lt(Ve,nr,sr,Yt,ur,ie),De&&(Ve.start=ht+Oe*Ue)):Br>le?Rr<le&&(Ue=lt(Ve,nr,sr,Yt,ur,le),De&&(Ve.start=ht+Oe*Ue)):Lr(Ve,nr,sr,jt),Rr<ie&&Br>=ie&&(Ue=lt(Ve,nr,sr,Yt,ur,ie),Sr=!0),Rr>le&&Br<=le&&(Ue=lt(Ve,nr,sr,Yt,ur,le),Sr=!0),!be&&Sr&&(De&&(Ve.end=ht+Oe*Ue),X.push(Ve),Ve=hr(ue)),De&&(ht+=Oe)}var Te=ue.length-3;nr=ue[Te],sr=ue[Te+1],jt=ue[Te+2],(Br=ve===0?nr:sr)>=ie&&Br<=le&&Lr(Ve,nr,sr,jt),Te=Ve.length-3,be&&Te>=3&&(Ve[Te]!==Ve[0]||Ve[Te+1]!==Ve[1])&&Lr(Ve,Ve[0],Ve[1],Ve[2]),Ve.length&&X.push(Ve)}function hr(ue){var X=[];return X.size=ue.size,X.start=ue.start,X.end=ue.end,X}function wr(ue,X,ie,le,ve,be){for(var De=0;De<ue.length;De++)Lt(ue[De],X,ie,le,ve,be,!1)}function Lr(ue,X,ie,le){ue.push(X),ue.push(ie),ue.push(le)}function qr(ue,X,ie,le,ve,be){var De=(be-X)/(le-X);return ue.push(be),ue.push(ie+(ve-ie)*De),ue.push(1),De}function gr(ue,X,ie,le,ve,be){var De=(be-ie)/(ve-ie);return ue.push(X+(le-X)*De),ue.push(be),ue.push(1),De}function br(ue,X){for(var ie=[],le=0;le<ue.length;le++){var ve,be=ue[le],De=be.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")ve=Rt(be.geometry,X);else if(De==="MultiLineString"||De==="Polygon"){ve=[];for(var Oe=0;Oe<be.geometry.length;Oe++)ve.push(Rt(be.geometry[Oe],X))}else if(De==="MultiPolygon")for(ve=[],Oe=0;Oe<be.geometry.length;Oe++){for(var Ue=[],Ve=0;Ve<be.geometry[Oe].length;Ve++)Ue.push(Rt(be.geometry[Oe][Ve],X));ve.push(Ue)}ie.push(Jt(be.id,De,ve,be.tags))}return ie}function Rt(ue,X){var ie=[];ie.size=ue.size,ue.start!==void 0&&(ie.start=ue.start,ie.end=ue.end);for(var le=0;le<ue.length;le+=3)ie.push(ue[le]+X,ue[le+1],ue[le+2]);return ie}function vt(ue,X){if(ue.transformed)return ue;var ie,le,ve,be=1<<ue.z,De=ue.x,Oe=ue.y;for(ie=0;ie<ue.features.length;ie++){var Ue=ue.features[ie],Ve=Ue.geometry,lt=Ue.type;if(Ue.geometry=[],lt===1)for(le=0;le<Ve.length;le+=2)Ue.geometry.push(Cr(Ve[le],Ve[le+1],X,be,De,Oe));else for(le=0;le<Ve.length;le++){var ht=[];for(ve=0;ve<Ve[le].length;ve+=2)ht.push(Cr(Ve[le][ve],Ve[le][ve+1],X,be,De,Oe));Ue.geometry.push(ht)}}return ue.transformed=!0,ue}function Cr(ue,X,ie,le,ve,be){return[Math.round(ie*(ue*le-ve)),Math.round(ie*(X*le-be))]}function Tr(ue,X,ie,le,ve){for(var be=X===ve.maxZoom?0:ve.tolerance/((1<<X)*ve.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ie,y:le,z:X,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Oe=0;Oe<ue.length;Oe++){De.numFeatures++,Dr(De,ue[Oe],be,ve);var Ue=ue[Oe].minX,Ve=ue[Oe].minY,lt=ue[Oe].maxX,ht=ue[Oe].maxY;Ue<De.minX&&(De.minX=Ue),Ve<De.minY&&(De.minY=Ve),lt>De.maxX&&(De.maxX=lt),ht>De.maxY&&(De.maxY=ht)}return De}function Dr(ue,X,ie,le){var ve=X.geometry,be=X.type,De=[];if(be==="Point"||be==="MultiPoint")for(var Oe=0;Oe<ve.length;Oe+=3)De.push(ve[Oe]),De.push(ve[Oe+1]),ue.numPoints++,ue.numSimplified++;else if(be==="LineString")Vr(De,ve,ue,ie,!1,!1);else if(be==="MultiLineString"||be==="Polygon")for(Oe=0;Oe<ve.length;Oe++)Vr(De,ve[Oe],ue,ie,be==="Polygon",Oe===0);else if(be==="MultiPolygon")for(var Ue=0;Ue<ve.length;Ue++){var Ve=ve[Ue];for(Oe=0;Oe<Ve.length;Oe++)Vr(De,Ve[Oe],ue,ie,!0,Oe===0)}if(De.length){var lt=X.tags||null;if(be==="LineString"&&le.lineMetrics){for(var ht in lt={},X.tags)lt[ht]=X.tags[ht];lt.mapbox_clip_start=ve.start/ve.size,lt.mapbox_clip_end=ve.end/ve.size}var gt={geometry:De,type:be==="Polygon"||be==="MultiPolygon"?3:be==="LineString"||be==="MultiLineString"?2:1,tags:lt};X.id!==null&&(gt.id=X.id),ue.features.push(gt)}}function Vr(ue,X,ie,le,ve,be){var De=le*le;if(le>0&&X.size<(ve?De:le))ie.numPoints+=X.length/3;else{for(var Oe=[],Ue=0;Ue<X.length;Ue+=3)(le===0||X[Ue+2]>De)&&(ie.numSimplified++,Oe.push(X[Ue]),Oe.push(X[Ue+1])),ie.numPoints++;ve&&function(Ve,lt){for(var ht=0,gt=0,nr=Ve.length,sr=nr-2;gt<nr;sr=gt,gt+=2)ht+=(Ve[gt]-Ve[sr])*(Ve[gt+1]+Ve[sr+1]);if(ht>0===lt)for(gt=0,nr=Ve.length;gt<nr/2;gt+=2){var jt=Ve[gt],Yt=Ve[gt+1];Ve[gt]=Ve[nr-2-gt],Ve[gt+1]=Ve[nr-1-gt],Ve[nr-2-gt]=jt,Ve[nr-1-gt]=Yt}}(Oe,be),ue.push(Oe)}}function xt(ue,X){var ie=(X=this.options=function(ve,be){for(var De in be)ve[De]=be[De];return ve}(Object.create(this.options),X)).debug;if(ie&&console.time("preprocess data"),X.maxZoom<0||X.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(X.promoteId&&X.generateId)throw new Error("promoteId and generateId cannot be used together.");var le=function(ve,be){var De=[];if(ve.type==="FeatureCollection")for(var Oe=0;Oe<ve.features.length;Oe++)Me(De,ve.features[Oe],be,Oe);else Me(De,ve.type==="Feature"?ve:{geometry:ve},be);return De}(ue,X);this.tiles={},this.tileCoords=[],ie&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",X.indexMaxZoom,X.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),le=function(ve,be){var De=be.buffer/be.extent,Oe=ve,Ue=Pt(ve,1,-1-De,De,0,-1,2,be),Ve=Pt(ve,1,1-De,2+De,0,-1,2,be);return(Ue||Ve)&&(Oe=Pt(ve,1,-De,1+De,0,-1,2,be)||[],Ue&&(Oe=br(Ue,1).concat(Oe)),Ve&&(Oe=Oe.concat(br(Ve,-1)))),Oe}(le,X),le.length&&this.splitTile(le,0,0,0),ie&&(le.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function $t(ue,X,ie){return 32*((1<<ue)*ie+X)+ue}function rr(ue,X){return X?ue.properties[X]:ue.id}function Or(ue,X){if(ue==null)return!0;if(ue.type==="Feature")return rr(ue,X)!=null;if(ue.type==="FeatureCollection"){const ie=new Set;for(const le of ue.features){const ve=rr(le,X);if(ve==null||ie.has(ve))return!1;ie.add(ve)}return!0}return!1}function bi(ue,X){const ie=new Map;if(ue!=null)if(ue.type==="Feature")ie.set(rr(ue,X),ue);else for(const le of ue.features)ie.set(rr(le,X),le);return ie}xt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},xt.prototype.splitTile=function(ue,X,ie,le,ve,be,De){for(var Oe=[ue,X,ie,le],Ue=this.options,Ve=Ue.debug;Oe.length;){le=Oe.pop(),ie=Oe.pop(),X=Oe.pop(),ue=Oe.pop();var lt=1<<X,ht=$t(X,ie,le),gt=this.tiles[ht];if(!gt&&(Ve>1&&console.time("creation"),gt=this.tiles[ht]=Tr(ue,X,ie,le,Ue),this.tileCoords.push({z:X,x:ie,y:le}),Ve)){Ve>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",X,ie,le,gt.numFeatures,gt.numPoints,gt.numSimplified),console.timeEnd("creation"));var nr="z"+X;this.stats[nr]=(this.stats[nr]||0)+1,this.total++}if(gt.source=ue,ve){if(X===Ue.maxZoom||X===ve)continue;var sr=1<<ve-X;if(ie!==Math.floor(be/sr)||le!==Math.floor(De/sr))continue}else if(X===Ue.indexMaxZoom||gt.numPoints<=Ue.indexMaxPoints)continue;if(gt.source=null,ue.length!==0){Ve>1&&console.time("clipping");var jt,Yt,ur,Br,Rr,Sr,Te=.5*Ue.buffer/Ue.extent,Qt=.5-Te,yt=.5+Te,vr=1+Te;jt=Yt=ur=Br=null,Rr=Pt(ue,lt,ie-Te,ie+yt,0,gt.minX,gt.maxX,Ue),Sr=Pt(ue,lt,ie+Qt,ie+vr,0,gt.minX,gt.maxX,Ue),ue=null,Rr&&(jt=Pt(Rr,lt,le-Te,le+yt,1,gt.minY,gt.maxY,Ue),Yt=Pt(Rr,lt,le+Qt,le+vr,1,gt.minY,gt.maxY,Ue),Rr=null),Sr&&(ur=Pt(Sr,lt,le-Te,le+yt,1,gt.minY,gt.maxY,Ue),Br=Pt(Sr,lt,le+Qt,le+vr,1,gt.minY,gt.maxY,Ue),Sr=null),Ve>1&&console.timeEnd("clipping"),Oe.push(jt||[],X+1,2*ie,2*le),Oe.push(Yt||[],X+1,2*ie,2*le+1),Oe.push(ur||[],X+1,2*ie+1,2*le),Oe.push(Br||[],X+1,2*ie+1,2*le+1)}}},xt.prototype.getTile=function(ue,X,ie){var le=this.options,ve=le.extent,be=le.debug;if(ue<0||ue>24)return null;var De=1<<ue,Oe=$t(ue,X=(X%De+De)%De,ie);if(this.tiles[Oe])return vt(this.tiles[Oe],ve);be>1&&console.log("drilling down to z%d-%d-%d",ue,X,ie);for(var Ue,Ve=ue,lt=X,ht=ie;!Ue&&Ve>0;)Ve--,lt=Math.floor(lt/2),ht=Math.floor(ht/2),Ue=this.tiles[$t(Ve,lt,ht)];return Ue&&Ue.source?(be>1&&console.log("found parent tile z%d-%d-%d",Ve,lt,ht),be>1&&console.time("drilling down"),this.splitTile(Ue.source,Ve,lt,ht,ue,X,ie),be>1&&console.timeEnd("drilling down"),this.tiles[Oe]?vt(this.tiles[Oe],ve):null):null};class Nt extends I{constructor(X,ie,le,ve){super(X,ie,le),this._dataUpdateable=new Map,this.loadGeoJSON=(be,De)=>{const{promoteId:Oe}=be;if(be.request)return a.f(be.request,(Ue,Ve,lt,ht)=>{this._dataUpdateable=Or(Ve,Oe)?bi(Ve,Oe):void 0,De(Ue,Ve,lt,ht)});if(typeof be.data=="string")try{const Ue=JSON.parse(be.data);this._dataUpdateable=Or(Ue,Oe)?bi(Ue,Oe):void 0,De(null,Ue)}catch{De(new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`))}else be.dataDiff?this._dataUpdateable?(function(Ue,Ve,lt){var ht,gt,nr,sr;if(Ve.removeAll&&Ue.clear(),Ve.remove)for(const jt of Ve.remove)Ue.delete(jt);if(Ve.add)for(const jt of Ve.add){const Yt=rr(jt,lt);Yt!=null&&Ue.set(Yt,jt)}if(Ve.update)for(const jt of Ve.update){let Yt=Ue.get(jt.id);if(Yt==null)continue;const ur=!jt.removeAllProperties&&(((ht=jt.removeProperties)===null||ht===void 0?void 0:ht.length)>0||((gt=jt.addOrUpdateProperties)===null||gt===void 0?void 0:gt.length)>0);if((jt.newGeometry||jt.removeAllProperties||ur)&&(Yt=Object.assign({},Yt),Ue.set(jt.id,Yt),ur&&(Yt.properties=Object.assign({},Yt.properties))),jt.newGeometry&&(Yt.geometry=jt.newGeometry),jt.removeAllProperties)Yt.properties={};else if(((nr=jt.removeProperties)===null||nr===void 0?void 0:nr.length)>0)for(const Br of jt.removeProperties)Object.prototype.hasOwnProperty.call(Yt.properties,Br)&&delete Yt.properties[Br];if(((sr=jt.addOrUpdateProperties)===null||sr===void 0?void 0:sr.length)>0)for(const{key:Br,value:Rr}of jt.addOrUpdateProperties)Yt.properties[Br]=Rr}}(this._dataUpdateable,be.dataDiff,Oe),De(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):De(new Error(`Cannot update existing geojson data in ${be.source}`)):De(new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,ve&&(this.loadGeoJSON=ve)}loadGeoJSONTile(X,ie){const le=X.tileID.canonical;if(!this._geoJSONIndex)return ie(null,null);const ve=this._geoJSONIndex.getTile(le.z,le.x,le.y);if(!ve)return ie(null,null);const be=new class{constructor(Oe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.N,this.length=Oe.length,this._features=Oe}feature(Oe){return new class{constructor(Ue){this._feature=Ue,this.extent=a.N,this.type=Ue.type,this.properties=Ue.tags,"id"in Ue&&!isNaN(Ue.id)&&(this.id=parseInt(Ue.id,10))}loadGeometry(){if(this._feature.type===1){const Ue=[];for(const Ve of this._feature.geometry)Ue.push([new a.P(Ve[0],Ve[1])]);return Ue}{const Ue=[];for(const Ve of this._feature.geometry){const lt=[];for(const ht of Ve)lt.push(new a.P(ht[0],ht[1]));Ue.push(lt)}return Ue}}toGeoJSON(Ue,Ve,lt){return ne.call(this,Ue,Ve,lt)}}(this._features[Oe])}}(ve.features);let De=it(be);De.byteOffset===0&&De.byteLength===De.buffer.byteLength||(De=new Uint8Array(De)),ie(null,{vectorTile:be,rawData:De.buffer})}loadData(X,ie){var le;(le=this._pendingRequest)===null||le===void 0||le.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ve=!!(X&&X.request&&X.request.collectResourceTiming)&&new a.bu(X.request);this._pendingCallback=ie,this._pendingRequest=this.loadGeoJSON(X,(be,De)=>{if(delete this._pendingCallback,delete this._pendingRequest,be||!De)return ie(be);if(typeof De!="object")return ie(new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`));{q(De,!0);try{if(X.filter){const Ue=a.bC(X.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ue.result==="error")throw new Error(Ue.value.map(lt=>`${lt.key}: ${lt.message}`).join(", "));De={type:"FeatureCollection",features:De.features.filter(lt=>Ue.value.evaluate({zoom:0},lt))}}this._geoJSONIndex=X.cluster?new Ge(function(Ue){let{superclusterOptions:Ve,clusterProperties:lt}=Ue;if(!lt||!Ve)return Ve;const ht={},gt={},nr={accumulated:null,zoom:0},sr={properties:null},jt=Object.keys(lt);for(const Yt of jt){const[ur,Br]=lt[Yt],Rr=a.bC(Br),Sr=a.bC(typeof ur=="string"?[ur,["accumulated"],["get",Yt]]:ur);ht[Yt]=Rr.value,gt[Yt]=Sr.value}return Ve.map=Yt=>{sr.properties=Yt;const ur={};for(const Br of jt)ur[Br]=ht[Br].evaluate(nr,sr);return ur},Ve.reduce=(Yt,ur)=>{sr.properties=ur;for(const Br of jt)nr.accumulated=Yt[Br],Yt[Br]=gt[Br].evaluate(nr,sr)},Ve}(X)).load(De.features):function(Ue,Ve){return new xt(Ue,Ve)}(De,X.geojsonVtOptions)}catch(Ue){return ie(Ue)}this.loaded={};const Oe={};if(ve){const Ue=ve.finish();Ue&&(Oe.resourceTiming={},Oe.resourceTiming[X.source]=JSON.parse(JSON.stringify(Ue)))}ie(null,Oe)}})}reloadTile(X,ie){const le=this.loaded;return le&&le[X.uid]?super.reloadTile(X,ie):this.loadTile(X,ie)}removeSource(X,ie){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ie()}getClusterExpansionZoom(X,ie){try{ie(null,this._geoJSONIndex.getClusterExpansionZoom(X.clusterId))}catch(le){ie(le)}}getClusterChildren(X,ie){try{ie(null,this._geoJSONIndex.getChildren(X.clusterId))}catch(le){ie(le)}}getClusterLeaves(X,ie){try{ie(null,this._geoJSONIndex.getLeaves(X.clusterId,X.limit,X.offset))}catch(le){ie(le)}}}class Kr{constructor(X){this.self=X,this.actor=new a.C(X,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:I,geojson:Nt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ie,le)=>{if(this.workerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.workerSourceTypes[ie]=le},this.self.registerRTLTextPlugin=ie=>{if(a.bD.isParsed())throw new Error("RTL text plugin already registered.");a.bD.applyArabicShaping=ie.applyArabicShaping,a.bD.processBidirectionalText=ie.processBidirectionalText,a.bD.processStyledBidirectionalText=ie.processStyledBidirectionalText}}setReferrer(X,ie){this.referrer=ie}setImages(X,ie,le){this.availableImages[X]=ie;for(const ve in this.workerSources[X]){const be=this.workerSources[X][ve];for(const De in be)be[De].availableImages=ie}le()}setLayers(X,ie,le){this.getLayerIndex(X).replace(ie),le()}updateLayers(X,ie,le){this.getLayerIndex(X).update(ie.layers,ie.removedIds),le()}loadTile(X,ie,le){this.getWorkerSource(X,ie.type,ie.source).loadTile(ie,le)}loadDEMTile(X,ie,le){this.getDEMWorkerSource(X,ie.source).loadTile(ie,le)}reloadTile(X,ie,le){this.getWorkerSource(X,ie.type,ie.source).reloadTile(ie,le)}abortTile(X,ie,le){this.getWorkerSource(X,ie.type,ie.source).abortTile(ie,le)}removeTile(X,ie,le){this.getWorkerSource(X,ie.type,ie.source).removeTile(ie,le)}removeDEMTile(X,ie){this.getDEMWorkerSource(X,ie.source).removeTile(ie)}removeSource(X,ie,le){if(!this.workerSources[X]||!this.workerSources[X][ie.type]||!this.workerSources[X][ie.type][ie.source])return;const ve=this.workerSources[X][ie.type][ie.source];delete this.workerSources[X][ie.type][ie.source],ve.removeSource!==void 0?ve.removeSource(ie,le):le()}loadWorkerSource(X,ie,le){try{this.self.importScripts(ie.url),le()}catch(ve){le(ve.toString())}}syncRTLPluginState(X,ie,le){try{a.bD.setState(ie);const ve=a.bD.getPluginURL();if(a.bD.isLoaded()&&!a.bD.isParsed()&&ve!=null){this.self.importScripts(ve);const be=a.bD.isParsed();le(be?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ve}`),be)}}catch(ve){le(ve.toString())}}getAvailableImages(X){let ie=this.availableImages[X];return ie||(ie=[]),ie}getLayerIndex(X){let ie=this.layerIndexes[X];return ie||(ie=this.layerIndexes[X]=new g),ie}getWorkerSource(X,ie,le){return this.workerSources[X]||(this.workerSources[X]={}),this.workerSources[X][ie]||(this.workerSources[X][ie]={}),this.workerSources[X][ie][le]||(this.workerSources[X][ie][le]=new this.workerSourceTypes[ie]({send:(ve,be,De)=>{this.actor.send(ve,be,De,X)}},this.getLayerIndex(X),this.getAvailableImages(X))),this.workerSources[X][ie][le]}getDEMWorkerSource(X,ie){return this.demWorkerSources[X]||(this.demWorkerSources[X]={}),this.demWorkerSources[X][ie]||(this.demWorkerSources[X][ie]=new G),this.demWorkerSources[X][ie]}}return a.i()&&(self.worker=new Kr(self)),Kr}),c(["./shared"],function(a){var g="3.6.2";class _{static testProp(n){if(!_.docStyle)return n[0];for(let u=0;u<n.length;u++)if(n[u]in _.docStyle)return n[u];return n[0]}static create(n,u,d){const y=window.document.createElement(n);return u!==void 0&&(y.className=u),d&&d.appendChild(y),y}static createNS(n,u){return window.document.createElementNS(n,u)}static disableDrag(){_.docStyle&&_.selectProp&&(_.userSelect=_.docStyle[_.selectProp],_.docStyle[_.selectProp]="none")}static enableDrag(){_.docStyle&&_.selectProp&&(_.docStyle[_.selectProp]=_.userSelect)}static setTransform(n,u){n.style[_.transformProp]=u}static addEventListener(n,u,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};n.addEventListener(u,d,"passive"in y?y:y.capture)}static removeEventListener(n,u,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};n.removeEventListener(u,d,"passive"in y?y:y.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",_.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",_.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",_.suppressClickInternal,!0)},0)}static mousePos(n,u){const d=n.getBoundingClientRect();return new a.P(u.clientX-d.left-n.clientLeft,u.clientY-d.top-n.clientTop)}static touchPos(n,u){const d=n.getBoundingClientRect(),y=[];for(let b=0;b<u.length;b++)y.push(new a.P(u[b].clientX-d.left-n.clientLeft,u[b].clientY-d.top-n.clientTop));return y}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}_.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,_.selectProp=_.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),_.transformProp=_.testProp(["transform","WebkitTransform"]);const C={supported:!1,testSupport:function(v){!I&&M&&(G?j(v):L=v)}};let L,M,I=!1,G=!1;function j(v){const n=v.createTexture();v.bindTexture(v.TEXTURE_2D,n);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,M),v.isContextLost())return;C.supported=!0}catch{}v.deleteTexture(n),I=!0}var Y,q;typeof document<"u"&&(M=document.createElement("img"),M.onload=function(){L&&j(L),L=null,G=!0},M.onerror=function(){I=!0,L=null},M.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let n,u,d,y;v.resetRequestQueue=()=>{n=[],u=0,d=0,y={}},v.addThrottleControl=O=>{const H=d++;return y[H]=O,H},v.removeThrottleControl=O=>{delete y[O],T()},v.getImage=function(O,H){let K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;C.supported&&(O.headers||(O.headers={}),O.headers.accept="image/webp,*/*");const se={requestParameters:O,supportImageRefresh:K,callback:H,cancelled:!1,completed:!1,cancel:()=>{se.completed||se.cancelled||(se.cancelled=!0,se.innerRequest&&(se.innerRequest.cancel(),u--),T())}};return n.push(se),T(),se};const b=O=>{const{requestParameters:H,supportImageRefresh:K,callback:se}=O;return a.e(H,{type:"image"}),(K!==!1||a.i()||a.g(H.url)||H.headers&&!Object.keys(H.headers).reduce((ge,f)=>ge&&f==="accept",!0)?a.m:k)(H,(ge,f,x,S)=>{F(O,se,ge,f,x,S)})},F=(O,H,K,se,ge,f)=>{K?H(K):se instanceof HTMLImageElement||a.a(se)?H(null,se):se&&((x,S)=>{typeof createImageBitmap=="function"?a.b(x,S):a.d(x,S)})(se,(x,S)=>{x!=null?H(x):S!=null&&H(null,S,{cacheControl:ge,expires:f})}),O.cancelled||(O.completed=!0,u--,T())},T=()=>{const O=(()=>{const H=Object.keys(y);let K=!1;if(H.length>0){for(const se of H)if(K=y[se](),K)break}return K})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let H=u;H<O&&n.length>0;H++){const K=n.shift();if(K.cancelled){H--;continue}const se=b(K);u++,K.innerRequest=se}},k=(O,H)=>{const K=new Image,se=O.url;let ge=!1;const f=O.credentials;return f&&f==="include"?K.crossOrigin="use-credentials":(f&&f==="same-origin"||!a.s(se))&&(K.crossOrigin="anonymous"),K.fetchPriority="high",K.onload=()=>{H(null,K),K.onerror=K.onload=null},K.onerror=()=>{ge||H(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),K.onerror=K.onload=null},K.src=se,{cancel:()=>{ge=!0,K.src=""}}}}(Y||(Y={})),Y.resetRequestQueue(),function(v){v.Glyphs="Glyphs",v.Image="Image",v.Source="Source",v.SpriteImage="SpriteImage",v.SpriteJSON="SpriteJSON",v.Style="Style",v.Tile="Tile",v.Unknown="Unknown"}(q||(q={}));class ne{constructor(n){this._transformRequestFn=n}transformRequest(n,u){return this._transformRequestFn&&this._transformRequestFn(n,u)||{url:n}}normalizeSpriteURL(n,u,d){const y=function(b){const F=b.match(he);if(!F)throw new Error(`Unable to parse URL "${b}"`);return{protocol:F[1],authority:F[2],path:F[3]||"/",params:F[4]?F[4].split("&"):[]}}(n);return y.path+=`${u}${d}`,function(b){const F=b.params.length?`?${b.params.join("&")}`:"";return`${b.protocol}://${b.authority}${b.path}${F}`}(y)}setTransformRequest(n){this._transformRequestFn=n}}const he=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Se(v){var n=new a.A(3);return n[0]=v[0],n[1]=v[1],n[2]=v[2],n}var Ne,Pe=function(v,n,u){return v[0]=n[0]-u[0],v[1]=n[1]-u[1],v[2]=n[2]-u[2],v};Ne=new a.A(3),a.A!=Float32Array&&(Ne[0]=0,Ne[1]=0,Ne[2]=0);var Ee=function(v){var n=v[0],u=v[1];return n*n+u*u};function fe(v){const n=[];if(typeof v=="string")n.push({id:"default",url:v});else if(v&&v.length>0){const u=[];for(const{id:d,url:y}of v){const b=`${d}${y}`;u.indexOf(b)===-1&&(u.push(b),n.push({id:d,url:y}))}}return n}function We(v,n,u,d,y){if(d)return void v(d);if(y!==Object.values(n).length||y!==Object.values(u).length)return;const b={};for(const F in n){b[F]={};const T=a.h.getImageCanvasContext(u[F]),k=n[F];for(const O in k){const{width:H,height:K,x:se,y:ge,sdf:f,pixelRatio:x,stretchX:S,stretchY:Q,content:R}=k[O];b[F][O]={data:null,pixelRatio:x,sdf:f,stretchX:S,stretchY:Q,content:R,spriteData:{width:H,height:K,x:se,y:ge,context:T}}}}v(null,b)}(function(){var v=new a.A(2);a.A!=Float32Array&&(v[0]=0,v[1]=0)})();class Ke{constructor(n,u,d,y){this.context=n,this.format=d,this.texture=n.gl.createTexture(),this.update(u,y)}update(n,u,d){const{width:y,height:b}=n,F=!(this.size&&this.size[0]===y&&this.size[1]===b||d),{context:T}=this,{gl:k}=T;if(this.useMipmap=!!(u&&u.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!u||u.premultiply!==!1)),F)this.size=[y,b],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||a.a(n)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,n):k.texImage2D(k.TEXTURE_2D,0,this.format,y,b,0,this.format,k.UNSIGNED_BYTE,n.data);else{const{x:O,y:H}=d||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||a.a(n)?k.texSubImage2D(k.TEXTURE_2D,0,O,H,k.RGBA,k.UNSIGNED_BYTE,n):k.texSubImage2D(k.TEXTURE_2D,0,O,H,y,b,k.RGBA,k.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)}bind(n,u,d){const{context:y}=this,{gl:b}=y;b.bindTexture(b.TEXTURE_2D,this.texture),d!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=b.LINEAR),n!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,n),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,d||n),this.filter=n),u!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,u),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function ce(v){const{userImage:n}=v;return!!(n&&n.render&&n.render())&&(v.data.replace(new Uint8Array(n.data.buffer)),!0)}class Ae extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:u,callback:d}of this.requestors)this._notify(u,d);this.requestors=[]}}getImage(n){const u=this.images[n];if(u&&!u.data&&u.spriteData){const d=u.spriteData;u.data=new a.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),u.spriteData=null}return u}addImage(n,u){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,u)&&(this.images[n]=u)}_validate(n,u){let d=!0;const y=u.data||u.spriteData;return this._validateStretch(u.stretchX,y&&y.width)||(this.fire(new a.j(new Error(`Image "${n}" has invalid "stretchX" value`))),d=!1),this._validateStretch(u.stretchY,y&&y.height)||(this.fire(new a.j(new Error(`Image "${n}" has invalid "stretchY" value`))),d=!1),this._validateContent(u.content,u)||(this.fire(new a.j(new Error(`Image "${n}" has invalid "content" value`))),d=!1),d}_validateStretch(n,u){if(!n)return!0;let d=0;for(const y of n){if(y[0]<d||y[1]<y[0]||u<y[1])return!1;d=y[1]}return!0}_validateContent(n,u){if(!n)return!0;if(n.length!==4)return!1;const d=u.spriteData,y=d&&d.width||u.data.width,b=d&&d.height||u.data.height;return!(n[0]<0||y<n[0]||n[1]<0||b<n[1]||n[2]<0||y<n[2]||n[3]<0||b<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,u){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const y=this.getImage(n);if(d&&(y.data.width!==u.data.width||y.data.height!==u.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=y.version+1,this.images[n]=u,this.updatedImages[n]=!0}removeImage(n){const u=this.images[n];delete this.images[n],delete this.patterns[n],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n,u){let d=!0;if(!this.isLoaded())for(const y of n)this.images[y]||(d=!1);this.isLoaded()||d?this._notify(n,u):this.requestors.push({ids:n,callback:u})}_notify(n,u){const d={};for(const y of n){let b=this.getImage(y);b||(this.fire(new a.k("styleimagemissing",{id:y})),b=this.getImage(y)),b?d[y]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:a.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,d)}getPixelSize(){const{width:n,height:u}=this.atlasImage;return{width:n,height:u}}getPattern(n){const u=this.patterns[n],d=this.getImage(n);if(!d)return null;if(u&&u.position.version===d.version)return u.position;if(u)u.position.version=d.version;else{const y={w:d.data.width+2,h:d.data.height+2,x:0,y:0},b=new a.I(y,d);this.patterns[n]={bin:y,position:b}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const u=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ke(n,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const b in this.patterns)n.push(this.patterns[b].bin);const{w:u,h:d}=a.p(n),y=this.atlasImage;y.resize({width:u||1,height:d||1});for(const b in this.patterns){const{bin:F}=this.patterns[b],T=F.x+1,k=F.y+1,O=this.getImage(b).data,H=O.width,K=O.height;a.R.copy(O,y,{x:0,y:0},{x:T,y:k},{width:H,height:K}),a.R.copy(O,y,{x:0,y:K-1},{x:T,y:k-1},{width:H,height:1}),a.R.copy(O,y,{x:0,y:0},{x:T,y:k+K},{width:H,height:1}),a.R.copy(O,y,{x:H-1,y:0},{x:T-1,y:k},{width:1,height:K}),a.R.copy(O,y,{x:0,y:0},{x:T+H,y:k},{width:1,height:K})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const u of n){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const d=this.getImage(u);d||a.w(`Image with ID: "${u}" was not found`),ce(d)&&this.updateImage(u,d)}}}const xe=1e20;function _e(v,n,u,d,y,b,F,T,k){for(let O=n;O<n+d;O++)et(v,u*b+O,b,y,F,T,k);for(let O=u;O<u+y;O++)et(v,O*b+n,1,d,F,T,k)}function et(v,n,u,d,y,b,F){b[0]=0,F[0]=-xe,F[1]=xe,y[0]=v[n];for(let T=1,k=0,O=0;T<d;T++){y[T]=v[n+T*u];const H=T*T;do{const K=b[k];O=(y[T]-y[K]+H-K*K)/(T-K)/2}while(O<=F[k]&&--k>-1);k++,b[k]=T,F[k]=O,F[k+1]=xe}for(let T=0,k=0;T<d;T++){for(;F[k+1]<T;)k++;const O=b[k],H=T-O;v[n+T*u]=y[O]+H*H}}class Je{constructor(n,u){this.requestManager=n,this.localIdeographFontFamily=u,this.entries={}}setURL(n){this.url=n}getGlyphs(n,u){const d=[];for(const y in n)for(const b of n[y])d.push({stack:y,id:b});a.o(d,(y,b)=>{let{stack:F,id:T}=y,k=this.entries[F];k||(k=this.entries[F]={glyphs:{},requests:{},ranges:{}});let O=k.glyphs[T];if(O!==void 0)return void b(null,{stack:F,id:T,glyph:O});if(O=this._tinySDF(k,F,T),O)return k.glyphs[T]=O,void b(null,{stack:F,id:T,glyph:O});const H=Math.floor(T/256);if(256*H>65535)return void b(new Error("glyphs > 65535 not supported"));if(k.ranges[H])return void b(null,{stack:F,id:T,glyph:O});if(!this.url)return void b(new Error("glyphsUrl is not set"));let K=k.requests[H];K||(K=k.requests[H]=[],Je.loadGlyphRange(F,H,this.url,this.requestManager,(se,ge)=>{if(ge){for(const f in ge)this._doesCharSupportLocalGlyph(+f)||(k.glyphs[+f]=ge[+f]);k.ranges[H]=!0}for(const f of K)f(se,ge);delete k.requests[H]})),K.push((se,ge)=>{se?b(se):ge&&b(null,{stack:F,id:T,glyph:ge[T]||null})})},(y,b)=>{if(y)u(y);else if(b){const F={};for(const{stack:T,id:k,glyph:O}of b)(F[T]||(F[T]={}))[k]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};u(null,F)}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(a.u["CJK Unified Ideographs"](n)||a.u["Hangul Syllables"](n)||a.u.Hiragana(n)||a.u.Katakana(n))}_tinySDF(n,u,d){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(d))return;let b=n.tinySDF;if(!b){let T="400";/bold/i.test(u)?T="900":/medium/i.test(u)?T="500":/light/i.test(u)&&(T="200"),b=n.tinySDF=new Je.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:T})}const F=b.draw(String.fromCharCode(d));return{id:d,bitmap:new a.q({width:F.width||60,height:F.height||60},F.data),metrics:{width:F.glyphWidth/2||24,height:F.glyphHeight/2||24,left:F.glyphLeft/2+.5||0,top:F.glyphTop/2-27.5||-8,advance:F.glyphAdvance/2||24,isDoubleResolution:!0}}}}Je.loadGlyphRange=function(v,n,u,d,y){const b=256*n,F=b+255,T=d.transformRequest(u.replace("{fontstack}",v).replace("{range}",`${b}-${F}`),q.Glyphs);a.l(T,(k,O)=>{if(k)y(k);else if(O){const H={};for(const K of a.n(O))H[K.id]=K;y(null,H)}})},Je.TinySDF=class{constructor(){let{fontSize:v=24,buffer:n=3,radius:u=8,cutoff:d=.25,fontFamily:y="sans-serif",fontWeight:b="normal",fontStyle:F="normal"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.buffer=n,this.cutoff=d,this.radius=u;const T=this.size=v+4*n,k=this._createCanvas(T),O=this.ctx=k.getContext("2d",{willReadFrequently:!0});O.font=`${F} ${b} ${v}px ${y}`,O.textBaseline="alphabetic",O.textAlign="left",O.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(v){const n=document.createElement("canvas");return n.width=n.height=v,n}draw(v){const{width:n,actualBoundingBoxAscent:u,actualBoundingBoxDescent:d,actualBoundingBoxLeft:y,actualBoundingBoxRight:b}=this.ctx.measureText(v),F=Math.ceil(u),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-y))),k=Math.min(this.size-this.buffer,F+Math.ceil(d)),O=T+2*this.buffer,H=k+2*this.buffer,K=Math.max(O*H,0),se=new Uint8ClampedArray(K),ge={data:se,width:O,height:H,glyphWidth:T,glyphHeight:k,glyphTop:F,glyphLeft:0,glyphAdvance:n};if(T===0||k===0)return ge;const{ctx:f,buffer:x,gridInner:S,gridOuter:Q}=this;f.clearRect(x,x,T,k),f.fillText(v,x,x+F);const R=f.getImageData(x,x,T,k);Q.fill(xe,0,K),S.fill(0,0,K);for(let N=0;N<k;N++)for(let z=0;z<T;z++){const $=R.data[4*(N*T+z)+3]/255;if($===0)continue;const Z=(N+x)*O+z+x;if($===1)Q[Z]=0,S[Z]=xe;else{const re=.5-$;Q[Z]=re>0?re*re:0,S[Z]=re<0?re*re:0}}_e(Q,0,0,O,H,O,this.f,this.v,this.z),_e(S,x,x,T,k,O,this.f,this.v,this.z);for(let N=0;N<K;N++){const z=Math.sqrt(Q[N])-Math.sqrt(S[N]);se[N]=Math.round(255-255*(z/this.radius+this.cutoff))}return ge}};class rt{constructor(){this.specification=a.v.light.position}possiblyEvaluate(n,u){return a.z(n.expression.evaluate(u))}interpolate(n,u,d){return{x:a.B.number(n.x,u.x,d),y:a.B.number(n.y,u.y,d),z:a.B.number(n.z,u.z,d)}}}let Ye;class it extends a.E{constructor(n){super(),Ye=Ye||new a.r({anchor:new a.D(a.v.light.anchor),position:new rt,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(Ye),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this._validate(a.t,n,u))for(const d in n){const y=n[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),y):this._transitionable.setValue(d,y)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,u,d){return(!d||d.validate!==!1)&&a.x(this,n.call(a.y,a.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}}class nt{constructor(n,u){this.width=n,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,u){const d=n.join(",")+String(u);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(n,u)),this.dashEntry[d]}getDashRanges(n,u,d){const y=[];let b=n.length%2==1?-n[n.length-1]*d:0,F=n[0]*d,T=!0;y.push({left:b,right:F,isDash:T,zeroLength:n[0]===0});let k=n[0];for(let O=1;O<n.length;O++){T=!T;const H=n[O];b=k*d,k+=H,F=k*d,y.push({left:b,right:F,isDash:T,zeroLength:H===0})}return y}addRoundDash(n,u,d){const y=u/2;for(let b=-d;b<=d;b++){const F=this.width*(this.nextRow+d+b);let T=0,k=n[T];for(let O=0;O<this.width;O++){O/k.right>1&&(k=n[++T]);const H=Math.abs(O-k.left),K=Math.abs(O-k.right),se=Math.min(H,K);let ge;const f=b/d*(y+1);if(k.isDash){const x=y-Math.abs(f);ge=Math.sqrt(se*se+x*x)}else ge=y-Math.sqrt(se*se+f*f);this.data[F+O]=Math.max(0,Math.min(255,ge+128))}}}addRegularDash(n){for(let T=n.length-1;T>=0;--T){const k=n[T],O=n[T+1];k.zeroLength?n.splice(T,1):O&&O.isDash===k.isDash&&(O.left=k.left,n.splice(T,1))}const u=n[0],d=n[n.length-1];u.isDash===d.isDash&&(u.left=d.left-this.width,d.right=u.right+this.width);const y=this.width*this.nextRow;let b=0,F=n[b];for(let T=0;T<this.width;T++){T/F.right>1&&(F=n[++b]);const k=Math.abs(T-F.left),O=Math.abs(T-F.right),H=Math.min(k,O);this.data[y+T]=Math.max(0,Math.min(255,(F.isDash?H:-H)+128))}}addDash(n,u){const d=u?7:0,y=2*d+1;if(this.nextRow+y>this.height)return a.w("LineAtlas out of space"),null;let b=0;for(let T=0;T<n.length;T++)b+=n[T];if(b!==0){const T=this.width/b,k=this.getDashRanges(n,this.width,T);u?this.addRoundDash(k,T,d):this.addRegularDash(k)}const F={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:b};return this.nextRow+=y,this.dirty=!0,F}bind(n){const u=n.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class Bt{constructor(n,u,d){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=d;const y=this.workerPool.acquire(d);for(let b=0;b<y.length;b++){const F=new a.C(y[b],u,d);F.name=`Worker ${b}`,this.actors.push(F)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,u,d){a.o(this.actors,(y,b)=>{y.send(n,u,b)},d=d||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.actors.forEach(u=>{u.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}}function ee(v,n,u){const d=function(y,b){if(y)return u(y);if(b){const F=a.F(a.e(b,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(F.vectorLayers=b.vector_layers,F.vectorLayerIds=F.vectorLayers.map(T=>T.id)),u(null,F)}};return v.url?a.f(n.transformRequest(v.url,q.Source),d):a.h.frame(()=>d(null,v))}class pe{constructor(n,u){n&&(u?this.setSouthWest(n).setNorthEast(u):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof a.L?new a.L(n.lng,n.lat):a.L.convert(n),this}setSouthWest(n){return this._sw=n instanceof a.L?new a.L(n.lng,n.lat):a.L.convert(n),this}extend(n){const u=this._sw,d=this._ne;let y,b;if(n instanceof a.L)y=n,b=n;else{if(!(n instanceof pe))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(pe.convert(n)):this.extend(a.L.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(a.L.convert(n)):this;if(y=n._sw,b=n._ne,!y||!b)return this}return u||d?(u.lng=Math.min(y.lng,u.lng),u.lat=Math.min(y.lat,u.lat),d.lng=Math.max(b.lng,d.lng),d.lat=Math.max(b.lat,d.lat)):(this._sw=new a.L(y.lng,y.lat),this._ne=new a.L(b.lng,b.lat)),this}getCenter(){return new a.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.L(this.getWest(),this.getNorth())}getSouthEast(){return new a.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:u,lat:d}=a.L.convert(n);let y=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&y}static convert(n){return n instanceof pe?n:n&&new pe(n)}static fromLngLat(n){const d=360*(arguments.length>1&&arguments[1]!==void 0?arguments[1]:0)/40075017,y=d/Math.cos(Math.PI/180*n.lat);return new pe(new a.L(n.lng-y,n.lat-d),new a.L(n.lng+y,n.lat+d))}}class ye{constructor(n,u,d){this.bounds=pe.convert(this.validateBounds(n)),this.minzoom=u||0,this.maxzoom=d||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const u=Math.pow(2,n.z),d=Math.floor(a.G(this.bounds.getWest())*u),y=Math.floor(a.H(this.bounds.getNorth())*u),b=Math.ceil(a.G(this.bounds.getEast())*u),F=Math.ceil(a.H(this.bounds.getSouth())*u);return n.x>=d&&n.x<b&&n.y>=y&&n.y<F}}class Re extends a.E{constructor(n,u,d,y){if(super(),this.load=()=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ee(this._options,this.map._requestManager,(b,F)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),b?this.fire(new a.j(b)):F&&(a.e(this,F),F.bounds&&(this.tileBounds=new ye(F.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>a.e({},this._options),this.id=n,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.F(u,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.cancel(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(n,u){const d=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(d,q.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(F,T){return delete n.request,n.aborted?u(null):F&&F.status!==404?u(F):(T&&T.resourceTiming&&(n.resourceTiming=T.resourceTiming),this.map._refreshExpiredTiles&&T&&n.setExpiryData(T),n.loadVectorData(T,this.map.painter),u(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}y.request.collectResourceTiming=this._collectResourceTiming,n.actor&&n.state!=="expired"?n.state==="loading"?n.reloadCallback=u:n.request=n.actor.send("reloadTile",y,b.bind(this)):(n.actor=this.dispatcher.getActor(),n.request=n.actor.send("loadTile",y,b.bind(this)))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.actor&&n.actor.send("abortTile",{uid:n.uid,type:this.type,source:this.id},void 0)}unloadTile(n){n.unloadVectorData(),n.actor&&n.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ge extends a.E{constructor(n,u,d,y){super(),this.id=n,this.dispatcher=d,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},u),a.e(this,a.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ee(this._options,this.map._requestManager,(n,u)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new a.j(n)):u&&(a.e(this,u),u.bounds&&(this.tileBounds=new ye(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.cancel(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}serialize(){return a.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n,u){const d=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.request=Y.getImage(this.map._requestManager.transformRequest(d,q.Tile),(y,b,F)=>{if(delete n.request,n.aborted)n.state="unloaded",u(null);else if(y)n.state="errored",u(y);else if(b){this.map._refreshExpiredTiles&&F&&n.setExpiryData(F);const T=this.map.painter.context,k=T.gl;n.texture=this.map.painter.getTileTexture(b.width),n.texture?n.texture.update(b,{useMipmap:!0}):(n.texture=new Ke(T,b,k.RGBA,{useMipmap:!0}),n.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),T.extTextureFilterAnisotropic&&k.texParameterf(k.TEXTURE_2D,T.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T.extTextureFilterAnisotropicMax)),n.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(n,u){n.request&&(n.request.cancel(),delete n.request),u()}unloadTile(n,u){n.texture&&this.map.painter.saveTileTexture(n.texture),u()}hasTransition(){return!1}}class tt extends Ge{constructor(n,u,d,y){super(n,u,d,y),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(n,u){const d=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(d,q.Tile);function b(F,T){F&&(n.state="errored",u(F)),T&&(n.dem=T,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded",u(null))}n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.request=Y.getImage(y,(F,T,k)=>a._(this,void 0,void 0,function*(){if(delete n.request,n.aborted)n.state="unloaded",u(null);else if(F)n.state="errored",u(F);else if(T){this.map._refreshExpiredTiles&&n.setExpiryData(k);const O=a.a(T)&&a.J()?T:yield function(K){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.K()){const se=K.width+2,ge=K.height+2;try{return new a.R({width:se,height:ge},yield a.M(K,-1,-1,se,ge))}catch{}}return a.h.getImageData(K,1)})}(T),H={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:O,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};n.actor&&n.state!=="expired"||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",H,b))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(n){const u=n.canonical,d=Math.pow(2,u.z),y=(u.x-1+d)%d,b=u.x===0?n.wrap-1:n.wrap,F=(u.x+1+d)%d,T=u.x+1===d?n.wrap+1:n.wrap,k={};return k[new a.O(n.overscaledZ,b,u.z,y,u.y).key]={backfilled:!1},k[new a.O(n.overscaledZ,T,u.z,F,u.y).key]={backfilled:!1},u.y>0&&(k[new a.O(n.overscaledZ,b,u.z,y,u.y-1).key]={backfilled:!1},k[new a.O(n.overscaledZ,n.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},k[new a.O(n.overscaledZ,T,u.z,F,u.y-1).key]={backfilled:!1}),u.y+1<d&&(k[new a.O(n.overscaledZ,b,u.z,y,u.y+1).key]={backfilled:!1},k[new a.O(n.overscaledZ,n.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},k[new a.O(n.overscaledZ,T,u.z,F,u.y+1).key]={backfilled:!1}),k}unloadTile(n){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&n.actor.send("removeDEMTile",{uid:n.uid,source:this.id})}}class st extends a.E{constructor(n,u,d,y){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>a.e({},this._options,{type:this.type,data:this._data}),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(y),this._data=u.data,this._options=a.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const b=a.N/this.tileSize;this.workerOptions=a.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*b,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*b,extent:a.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:a.N,radius:(u.clusterRadius||50)*b,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=n.clusterRadius),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=n.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(n,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:n,source:this.id},u),this}getClusterChildren(n,u){return this.actor.send("geojson.getClusterChildren",{clusterId:n,source:this.id},u),this}getClusterLeaves(n,u,d,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:n,limit:u,offset:d},y),this}_updateWorkerData(n){const u=a.e({},this.workerOptions);n?u.dataDiff=n:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(a.h.resolveURL(this._data),q.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(d,y)=>{if(this._pendingLoads--,this._removed||y&&y.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let b=null;if(y&&y.resourceTiming&&y.resourceTiming[this.id]&&(b=y.resourceTiming[this.id].slice(0)),d)return void this.fire(new a.j(d));const F={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&a.e(F,{resourceTiming:b}),this.fire(new a.k("data",Object.assign(Object.assign({},F),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},F),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(n,u){const d=n.actor?"reloadTile":"loadTile";n.actor=this.actor;const y={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request=this.actor.send(d,y,(b,F)=>(delete n.request,n.unloadVectorData(),n.aborted?u(null):b?u(b):(n.loadVectorData(F,this.map.painter,d==="reloadTile"),u(null))))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.aborted=!0}unloadTile(n){n.unloadVectorData(),this.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var ot=a.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ct extends a.E{constructor(n,u,d,y){super(),this.load=(b,F)=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=Y.getImage(this.map._requestManager.transformRequest(this.url,q.Image),(T,k)=>{this._request=null,this._loaded=!0,T?this.fire(new a.j(T)):k&&(this.image=k,b&&(this.coordinates=b),F&&F(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const b=this.map.painter.context,F=b.gl;this.boundsBuffer||(this.boundsBuffer=b.createVertexBuffer(this._boundsArray,ot.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ke(b,this.image,F.RGBA),this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE));let T=!1;for(const k in this.tiles){const O=this.tiles[k];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture,T=!0)}T&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=n,this.dispatcher=d,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=u}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=n.url,this.load(n.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(n){this.coordinates=n;const u=n.map(a.U.fromLngLat);this.tileID=function(y){let b=1/0,F=1/0,T=-1/0,k=-1/0;for(const se of y)b=Math.min(b,se.x),F=Math.min(F,se.y),T=Math.max(T,se.x),k=Math.max(k,se.y);const O=Math.max(T-b,k-F),H=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),K=Math.pow(2,H);return new a.W(H,Math.floor((b+T)/2*K),Math.floor((F+k)/2*K))}(u),this.minzoom=this.maxzoom=this.tileID.z;const d=u.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new a.V,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,a.N,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,a.N),this._boundsArray.emplaceBack(d[2].x,d[2].y,a.N,a.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(n,u){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={},u(null)):(n.state="errored",u(null))}hasTransition(){return!1}}class Et extends Ct{constructor(n,u,d,y){super(n,u,d,y),this.load=()=>{this._loaded=!1;const b=this.options;this.urls=[];for(const F of b.urls)this.urls.push(this.map._requestManager.transformRequest(F,q.Source).url);a.X(this.urls,(F,T)=>{this._loaded=!0,F?this.fire(new a.j(F)):T&&(this.video=T,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const b=this.map.painter.context,F=b.gl;this.boundsBuffer||(this.boundsBuffer=b.createVertexBuffer(this._boundsArray,ot.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE),F.texSubImage2D(F.TEXTURE_2D,0,0,0,F.RGBA,F.UNSIGNED_BYTE,this.video)):(this.texture=new Ke(b,this.video,F.RGBA),this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE));let T=!1;for(const k in this.tiles){const O=this.tiles[k];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture,T=!0)}T&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const u=this.video.seekable;n<u.start(0)||n>u.end(0)?this.fire(new a.j(new a.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class zt extends Ct{constructor(n,u,d,y){super(n,u,d,y),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let b=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,b=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,b=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const F=this.map.painter.context,T=F.gl;this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,ot.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?(b||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ke(F,this.canvas,T.RGBA,{premultiply:!0});let k=!1;for(const O in this.tiles){const H=this.tiles[O];H.state!=="loaded"&&(H.state="loaded",H.texture=this.texture,k=!0)}k&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(F=>typeof F!="number"))||this.fire(new a.j(new a.Y(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.Y(`sources.${n}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new a.j(new a.Y(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.Y(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.Y(`sources.${n}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const Vt={},Jt=v=>{switch(v){case"geojson":return st;case"image":return Ct;case"raster":return Ge;case"raster-dem":return tt;case"vector":return Re;case"video":return Et;case"canvas":return zt}return Vt[v]};function ft(v,n){const u=a.Z();return a.$(u,u,[1,1,0]),a.a0(u,u,[.5*v.width,.5*v.height,1]),a.a1(u,u,v.calculatePosMatrix(n.toUnwrapped()))}function Me(v,n,u,d,y,b){const F=function(K,se,ge){if(K)for(const f of K){const x=se[f];if(x&&x.source===ge&&x.type==="fill-extrusion")return!0}else for(const f in se){const x=se[f];if(x.source===ge&&x.type==="fill-extrusion")return!0}return!1}(y&&y.layers,n,v.id),T=b.maxPitchScaleFactor(),k=v.tilesIn(d,T,F);k.sort(fr);const O=[];for(const K of k)O.push({wrappedTileID:K.tileID.wrapped().key,queryResults:K.tile.queryRenderedFeatures(n,u,v._state,K.queryGeometry,K.cameraQueryGeometry,K.scale,y,b,T,ft(v.transform,K.tileID))});const H=function(K){const se={},ge={};for(const f of K){const x=f.queryResults,S=f.wrappedTileID,Q=ge[S]=ge[S]||{};for(const R in x){const N=x[R],z=Q[R]=Q[R]||{},$=se[R]=se[R]||[];for(const Z of N)z[Z.featureIndex]||(z[Z.featureIndex]=!0,$.push(Z))}}return se}(O);for(const K in H)H[K].forEach(se=>{const ge=se.feature,f=v.getFeatureState(ge.layer["source-layer"],ge.id);ge.source=ge.layer.source,ge.layer["source-layer"]&&(ge.sourceLayer=ge.layer["source-layer"]),ge.state=f});return H}function fr(v,n){const u=v.tileID,d=n.tileID;return u.overscaledZ-d.overscaledZ||u.canonical.y-d.canonical.y||u.wrap-d.wrap||u.canonical.x-d.canonical.x}class Xt{constructor(n,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=a.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const u=n+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,u,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(y,b){const F={};if(!b)return F;for(const T of y){const k=T.layerIds.map(O=>b.getLayer(O)).filter(Boolean);if(k.length!==0){T.layers=k,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(O=>k.filter(H=>H.id===O)[0]));for(const O of k)F[O.id]=T}}return F}(n.buckets,u.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const b=this.buckets[y];if(b instanceof a.a4){if(this.hasSymbolBuckets=!0,!d)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const b=this.buckets[y];if(b instanceof a.a4&&b.hasRTLText){this.hasRTLText=!0,a.a5();break}}this.queryPadding=0;for(const y in this.buckets){const b=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(y).queryRadius(b))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new a.a3}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const d in this.buckets){const y=this.buckets[d];y.uploadPending()&&y.upload(n)}const u=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ke(n,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ke(n,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,u,d,y,b,F,T,k,O,H){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:b,scale:F,tileSize:this.tileSize,pixelPosMatrix:H,transform:k,params:T,queryPadding:this.queryPadding*O},n,u,d):{}}querySourceFeatures(n,u){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const y=d.loadVTLayers(),b=u&&u.sourceLayer?u.sourceLayer:"",F=y._geojsonTileLayer||y[b];if(!F)return;const T=a.a6(u&&u.filter),{z:k,x:O,y:H}=this.tileID.canonical,K={z:k,x:O,y:H};for(let se=0;se<F.length;se++){const ge=F.feature(se);if(T.needGeometry){const S=a.a7(ge,!0);if(!T.filter(new a.a8(this.tileID.overscaledZ),S,this.tileID.canonical))continue}else if(!T.filter(new a.a8(this.tileID.overscaledZ),ge))continue;const f=d.getId(ge,b),x=new a.a9(ge,k,O,H,f);x.tile=K,n.push(x)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const u=this.expirationTime;if(n.cacheControl){const d=a.aa(n.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const d=Date.now();let y=!1;if(this.expirationTime>d)y=!1;else if(u)if(this.expirationTime<u)y=!0;else{const b=this.expirationTime-u;b?this.expirationTime=d+Math.max(b,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!u.style.hasLayer(y))continue;const b=this.buckets[y],F=b.layers[0].sourceLayer||"_geojsonTileLayer",T=d[F],k=n[F];if(!T||!k||Object.keys(k).length===0)continue;b.update(k,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const O=u&&u.style&&u.style.getLayer(y);O&&(this.queryPadding=Math.max(this.queryPadding,O.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=a.h.now()+n}setDependencies(n,u){const d={};for(const y of u)d[y]=!0;this.dependencies[n]=d}hasDependency(n,u){for(const d of n){const y=this.dependencies[d];if(y){for(const b of u)if(y[b])return!0}}return!1}}class bt{constructor(n,u){this.max=n,this.onRemove=u,this.reset()}reset(){for(const n in this.data)for(const u of this.data[n])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(n,u,d){const y=n.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const b={value:u,timeout:void 0};if(d!==void 0&&(b.timeout=setTimeout(()=>{this.remove(n,b)},d)),this.data[y].push(b),this.order.push(y),this.order.length>this.max){const F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const u=this.data[n].shift();return u.timeout&&clearTimeout(u.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),u.value}getByKey(n){const u=this.data[n];return u?u[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,u){if(!this.has(n))return this;const d=n.wrapped().key,y=u===void 0?0:this.data[d].indexOf(u),b=this.data[d][y];return this.data[d].splice(y,1),b.timeout&&clearTimeout(b.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(b.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(n){const u=[];for(const d in this.data)for(const y of this.data[d])n(y.value)||u.push(y);for(const d of u)this.remove(d.value.tileID,d)}}class ze{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,u,d){const y=String(u);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][y]=this.stateChanges[n][y]||{},a.e(this.stateChanges[n][y],d),this.deletedStates[n]===null){this.deletedStates[n]={};for(const b in this.state[n])b!==y&&(this.deletedStates[n][b]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][y]===null){this.deletedStates[n][y]={};for(const b in this.state[n][y])d[b]||(this.deletedStates[n][y][b]=null)}else for(const b in d)this.deletedStates[n]&&this.deletedStates[n][y]&&this.deletedStates[n][y][b]===null&&delete this.deletedStates[n][y][b]}removeFeatureState(n,u,d){if(this.deletedStates[n]===null)return;const y=String(u);if(this.deletedStates[n]=this.deletedStates[n]||{},d&&u!==void 0)this.deletedStates[n][y]!==null&&(this.deletedStates[n][y]=this.deletedStates[n][y]||{},this.deletedStates[n][y][d]=null);else if(u!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][y])for(d in this.deletedStates[n][y]={},this.stateChanges[n][y])this.deletedStates[n][y][d]=null;else this.deletedStates[n][y]=null;else this.deletedStates[n]=null}getState(n,u){const d=String(u),y=a.e({},(this.state[n]||{})[d],(this.stateChanges[n]||{})[d]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const b=this.deletedStates[n][u];if(b===null)return{};for(const F in b)delete y[F]}return y}initializeTileState(n,u){n.setFeatureState(this.state,u)}coalesceChanges(n,u){const d={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const b={};for(const F in this.stateChanges[y])this.state[y][F]||(this.state[y][F]={}),a.e(this.state[y][F],this.stateChanges[y][F]),b[F]=this.state[y][F];d[y]=b}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const b={};if(this.deletedStates[y]===null)for(const F in this.state[y])b[F]={},this.state[y][F]={};else for(const F in this.deletedStates[y]){if(this.deletedStates[y][F]===null)this.state[y][F]={};else for(const T of Object.keys(this.deletedStates[y][F]))delete this.state[y][F][T];b[F]=this.state[y][F]}d[y]=d[y]||{},a.e(d[y],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const y in n)n[y].setFeatureState(d,u)}}class Ut extends a.E{constructor(n,u,d){super(),this.id=n,this.dispatcher=d,this.on("data",y=>{y.dataType==="source"&&y.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&y.dataType==="source"&&y.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,b,F,T)=>{const k=new(Jt(b.type))(y,b,F,T);if(k.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${k.id}`);return k})(n,u,d,this),this._tiles={},this._cache=new bt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ze,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const u=this._tiles[n];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,u){return this._source.loadTile(n,u)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){this._source.abortTile&&this._source.abortTile(n,()=>{}),this._source.fire(new a.k("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const d=this._tiles[u];d.upload(n),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(Pt).map(n=>n.key)}getRenderableIds(n){const u=[];for(const d in this._tiles)this._isIdRenderable(d,n)&&u.push(this._tiles[d]);return n?u.sort((d,y)=>{const b=d.tileID,F=y.tileID,T=new a.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),k=new a.P(F.canonical.x,F.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-F.overscaledZ||k.y-T.y||k.x-T.x}).map(d=>d.tileID.key):u.map(d=>d.tileID).sort(Pt).map(d=>d.key)}hasRenderableParent(n){const u=this.findLoadedParent(n,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(n,u){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(u||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,u){const d=this._tiles[n];d&&(d.state!=="loading"&&(d.state=u),this._loadTile(d,this._tileLoaded.bind(this,d,n,u)))}_tileLoaded(n,u,d,y){if(y)return n.state="errored",void(y.status!==404?this._source.fire(new a.j(y,{tile:n})):this.update(this.transform,this.terrain));n.timeAdded=a.h.now(),d==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(u,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const u=this.getRenderableIds();for(let y=0;y<u.length;y++){const b=u[y];if(n.neighboringTiles&&n.neighboringTiles[b]){const F=this.getTileByID(b);d(n,F),d(F,n)}}function d(y,b){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let F=b.tileID.canonical.x-y.tileID.canonical.x;const T=b.tileID.canonical.y-y.tileID.canonical.y,k=Math.pow(2,y.tileID.canonical.z),O=b.tileID.key;F===0&&T===0||Math.abs(T)>1||(Math.abs(F)>1&&(Math.abs(F+k)===1?F+=k:Math.abs(F-k)===1&&(F-=k)),b.dem&&y.dem&&(y.dem.backfillBorder(b.dem,F,T),y.neighboringTiles&&y.neighboringTiles[O]&&(y.neighboringTiles[O].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,u,d,y){for(const b in this._tiles){let F=this._tiles[b];if(y[b]||!F.hasData()||F.tileID.overscaledZ<=u||F.tileID.overscaledZ>d)continue;let T=F.tileID;for(;F&&F.tileID.overscaledZ>u+1;){const O=F.tileID.scaledTo(F.tileID.overscaledZ-1);F=this._tiles[O.key],F&&F.hasData()&&(T=O)}let k=T;for(;k.overscaledZ>u;)if(k=k.scaledTo(k.overscaledZ-1),n[k.key]){y[T.key]=T;break}}}findLoadedParent(n,u){if(n.key in this._loadedParentTiles){const d=this._loadedParentTiles[n.key];return d&&d.tileID.overscaledZ>=u?d:null}for(let d=n.overscaledZ-1;d>=u;d--){const y=n.scaledTo(d),b=this._getLoadedTile(y);if(b)return b}}_getLoadedTile(n){const u=this._tiles[n.key];return u&&u.hasData()?u:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const u=Math.ceil(n.width/this._source.tileSize)+1,d=Math.ceil(n.height/this._source.tileSize)+1,y=Math.floor(u*d*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(b)}handleWrapJump(n){const u=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,u){const d={};for(const y in this._tiles){const b=this._tiles[y];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+u),d[b.tileID.key]=b}this._tiles=d;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}update(n,u){if(this.transform=n,this.terrain=u,!this._sourceLoaded||this._paused)return;let d;this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(H=>new a.O(H.canonical.z,H.wrap,H.canonical.z,H.canonical.x,H.canonical.y)):(d=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(d=d.filter(H=>this._source.hasTile(H)))):d=[];const y=n.coveringZoomLevel(this._source),b=Math.max(y-Ut.maxOverzooming,this._source.minzoom),F=Math.max(y+Ut.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const H={};for(const K of d)if(K.canonical.z>this._source.minzoom){const se=K.scaledTo(K.canonical.z-1);H[se.key]=se;const ge=K.scaledTo(Math.max(this._source.minzoom,Math.min(K.canonical.z,5)));H[ge.key]=ge}d=d.concat(Object.values(H))}const T=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const k=this._updateRetainedTiles(d,y);if(Mt(this._source.type)){const H={},K={},se=Object.keys(k),ge=a.h.now();for(const f of se){const x=k[f],S=this._tiles[f];if(!S||S.fadeEndTime!==0&&S.fadeEndTime<=ge)continue;const Q=this.findLoadedParent(x,b);Q&&(this._addTile(Q.tileID),H[Q.tileID.key]=Q.tileID),K[f]=x}this._retainLoadedChildren(K,y,F,k);for(const f in H)k[f]||(this._coveredTiles[f]=!0,k[f]=H[f]);if(u){const f={},x={};for(const S of d)this._tiles[S.key].hasData()?f[S.key]=S:x[S.key]=S;for(const S in x){const Q=x[S].children(this._source.maxzoom);this._tiles[Q[0].key]&&this._tiles[Q[1].key]&&this._tiles[Q[2].key]&&this._tiles[Q[3].key]&&(f[Q[0].key]=k[Q[0].key]=Q[0],f[Q[1].key]=k[Q[1].key]=Q[1],f[Q[2].key]=k[Q[2].key]=Q[2],f[Q[3].key]=k[Q[3].key]=Q[3],delete x[S])}for(const S in x){const Q=this.findLoadedParent(x[S],this._source.minzoom);if(Q){f[Q.tileID.key]=k[Q.tileID.key]=Q.tileID;for(const R in f)f[R].isChildOf(Q.tileID)&&delete f[R]}}for(const S in this._tiles)f[S]||(this._coveredTiles[S]=!0)}}for(const H in k)this._tiles[H].clearFadeHold();const O=a.ab(this._tiles,k);for(const H of O){const K=this._tiles[H];K.hasSymbolBuckets&&!K.holdingForFade()?K.setHoldDuration(this.map._fadeDuration):K.hasSymbolBuckets&&!K.symbolFadeFinished()||this._removeTile(H)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,u){const d={},y={},b=Math.max(u-Ut.maxOverzooming,this._source.minzoom),F=Math.max(u+Ut.maxUnderzooming,this._source.minzoom),T={};for(const k of n){const O=this._addTile(k);d[k.key]=k,O.hasData()||u<this._source.maxzoom&&(T[k.key]=k)}this._retainLoadedChildren(T,u,F,d);for(const k of n){let O=this._tiles[k.key];if(O.hasData())continue;if(u+1>this._source.maxzoom){const K=k.children(this._source.maxzoom)[0],se=this.getTile(K);if(se&&se.hasData()){d[K.key]=K;continue}}else{const K=k.children(this._source.maxzoom);if(d[K[0].key]&&d[K[1].key]&&d[K[2].key]&&d[K[3].key])continue}let H=O.wasRequested();for(let K=k.overscaledZ-1;K>=b;--K){const se=k.scaledTo(K);if(y[se.key])break;if(y[se.key]=!0,O=this.getTile(se),!O&&H&&(O=this._addTile(se)),O){const ge=O.hasData();if((H||ge)&&(d[se.key]=se),H=O.wasRequested(),ge)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const u=[];let d,y=this._tiles[n].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){d=this._loadedParentTiles[y.key];break}u.push(y.key);const b=y.scaledTo(y.overscaledZ-1);if(d=this._getLoadedTile(b),d)break;y=b}for(const b of u)this._loadedParentTiles[b]=d}}_addTile(n){let u=this._tiles[n.key];if(u)return u;u=this._cache.getAndRemove(n),u&&(this._setTileReloadTimer(n.key,u),u.tileID=n,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,u)));const d=u;return u||(u=new Xt(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,n.key,u.state))),u.uses++,this._tiles[n.key]=u,d||this._source.fire(new a.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(n,u){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const d=u.getExpiryTimeout();d&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},d))}_removeTile(n){const u=this._tiles[n];u&&(u.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,u,d){const y=[],b=this.transform;if(!b)return y;const F=d?b.getCameraQueryGeometry(n):n,T=n.map(f=>b.pointCoordinate(f,this.terrain)),k=F.map(f=>b.pointCoordinate(f,this.terrain)),O=this.getIds();let H=1/0,K=1/0,se=-1/0,ge=-1/0;for(const f of k)H=Math.min(H,f.x),K=Math.min(K,f.y),se=Math.max(se,f.x),ge=Math.max(ge,f.y);for(let f=0;f<O.length;f++){const x=this._tiles[O[f]];if(x.holdingForFade())continue;const S=x.tileID,Q=Math.pow(2,b.zoom-x.tileID.overscaledZ),R=u*x.queryPadding*a.N/x.tileSize/Q,N=[S.getTilePoint(new a.U(H,K)),S.getTilePoint(new a.U(se,ge))];if(N[0].x-R<a.N&&N[0].y-R<a.N&&N[1].x+R>=0&&N[1].y+R>=0){const z=T.map(Z=>S.getTilePoint(Z)),$=k.map(Z=>S.getTilePoint(Z));y.push({tile:x,tileID:S,queryGeometry:z,cameraQueryGeometry:$,scale:Q})}}return y}getVisibleCoordinates(n){const u=this.getRenderableIds(n).map(d=>this._tiles[d].tileID);for(const d of u)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Mt(this._source.type)){const n=a.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=n)return!0}return!1}setFeatureState(n,u,d){this._state.updateState(n=n||"_geojsonTileLayer",u,d)}removeFeatureState(n,u,d){this._state.removeFeatureState(n=n||"_geojsonTileLayer",u,d)}getFeatureState(n,u){return this._state.getState(n=n||"_geojsonTileLayer",u)}setDependencies(n,u,d){const y=this._tiles[n];y&&y.setDependencies(u,d)}reloadTilesForDependencies(n,u){for(const d in this._tiles)this._tiles[d].hasDependency(n,u)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(n,u))}}function Pt(v,n){const u=Math.abs(2*v.wrap)-+(v.wrap<0),d=Math.abs(2*n.wrap)-+(n.wrap<0);return v.overscaledZ-n.overscaledZ||d-u||n.canonical.y-v.canonical.y||n.canonical.x-v.canonical.x}function Mt(v){return v==="raster"||v==="image"||v==="video"}Ut.maxOverzooming=10,Ut.maxUnderzooming=3;const Lt="mapboxgl_preloaded_worker_pool";class hr{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<hr.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Lt]}numActive(){return Object.keys(this.active).length}}const wr=Math.floor(a.h.hardwareConcurrency/2);let Lr;function qr(){return Lr||(Lr=new hr),Lr}hr.workerCount=a.ac(globalThis)?Math.max(Math.min(wr,3),1):1;class gr{constructor(n,u){this.reset(n,u)}reset(n,u){this.points=n||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=a.ad(n,0,1);let u=1,d=this._distances[u];const y=n*this.paddedLength+this.padding;for(;d<y&&u<this._distances.length;)d=this._distances[++u];const b=u-1,F=this._distances[b],T=d-F,k=T>0?(y-F)/T:0;return this.points[b].mult(1-k).add(this.points[u].mult(k))}}function br(v,n){let u=!0;return v==="always"||v!=="never"&&n!=="never"||(u=!1),u}class Rt{constructor(n,u,d){const y=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(n/d),this.yCellCount=Math.ceil(u/d);for(let F=0;F<this.xCellCount*this.yCellCount;F++)y.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=u,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,u,d,y,b){this._forEachCell(u,d,y,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(u),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(b)}insertCircle(n,u,d,y){this._forEachCell(u-y,d-y,u+y,d+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(u),this.circles.push(d),this.circles.push(y)}_insertBoxCell(n,u,d,y,b,F){this.boxCells[b].push(F)}_insertCircleCell(n,u,d,y,b,F){this.circleCells[b].push(F)}_query(n,u,d,y,b,F,T){if(d<0||n>this.width||y<0||u>this.height)return[];const k=[];if(n<=0&&u<=0&&this.width<=d&&this.height<=y){if(b)return[{key:null,x1:n,y1:u,x2:d,y2:y}];for(let O=0;O<this.boxKeys.length;O++)k.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){const H=this.circles[3*O],K=this.circles[3*O+1],se=this.circles[3*O+2];k.push({key:this.circleKeys[O],x1:H-se,y1:K-se,x2:H+se,y2:K+se})}}else this._forEachCell(n,u,d,y,this._queryCell,k,{hitTest:b,overlapMode:F,seenUids:{box:{},circle:{}}},T);return k}query(n,u,d,y){return this._query(n,u,d,y,!1,null)}hitTest(n,u,d,y,b,F){return this._query(n,u,d,y,!0,b,F).length>0}hitTestCircle(n,u,d,y,b){const F=n-d,T=n+d,k=u-d,O=u+d;if(T<0||F>this.width||O<0||k>this.height)return!1;const H=[];return this._forEachCell(F,k,T,O,this._queryCellCircle,H,{hitTest:!0,overlapMode:y,circle:{x:n,y:u,radius:d},seenUids:{box:{},circle:{}}},b),H.length>0}_queryCell(n,u,d,y,b,F,T,k){const{seenUids:O,hitTest:H,overlapMode:K}=T,se=this.boxCells[b];if(se!==null){const f=this.bboxes;for(const x of se)if(!O.box[x]){O.box[x]=!0;const S=4*x,Q=this.boxKeys[x];if(n<=f[S+2]&&u<=f[S+3]&&d>=f[S+0]&&y>=f[S+1]&&(!k||k(Q))&&(!H||!br(K,Q.overlapMode))&&(F.push({key:Q,x1:f[S],y1:f[S+1],x2:f[S+2],y2:f[S+3]}),H))return!0}}const ge=this.circleCells[b];if(ge!==null){const f=this.circles;for(const x of ge)if(!O.circle[x]){O.circle[x]=!0;const S=3*x,Q=this.circleKeys[x];if(this._circleAndRectCollide(f[S],f[S+1],f[S+2],n,u,d,y)&&(!k||k(Q))&&(!H||!br(K,Q.overlapMode))){const R=f[S],N=f[S+1],z=f[S+2];if(F.push({key:Q,x1:R-z,y1:N-z,x2:R+z,y2:N+z}),H)return!0}}}return!1}_queryCellCircle(n,u,d,y,b,F,T,k){const{circle:O,seenUids:H,overlapMode:K}=T,se=this.boxCells[b];if(se!==null){const f=this.bboxes;for(const x of se)if(!H.box[x]){H.box[x]=!0;const S=4*x,Q=this.boxKeys[x];if(this._circleAndRectCollide(O.x,O.y,O.radius,f[S+0],f[S+1],f[S+2],f[S+3])&&(!k||k(Q))&&!br(K,Q.overlapMode))return F.push(!0),!0}}const ge=this.circleCells[b];if(ge!==null){const f=this.circles;for(const x of ge)if(!H.circle[x]){H.circle[x]=!0;const S=3*x,Q=this.circleKeys[x];if(this._circlesCollide(f[S],f[S+1],f[S+2],O.x,O.y,O.radius)&&(!k||k(Q))&&!br(K,Q.overlapMode))return F.push(!0),!0}}}_forEachCell(n,u,d,y,b,F,T,k){const O=this._convertToXCellCoord(n),H=this._convertToYCellCoord(u),K=this._convertToXCellCoord(d),se=this._convertToYCellCoord(y);for(let ge=O;ge<=K;ge++)for(let f=H;f<=se;f++)if(b.call(this,n,u,d,y,this.xCellCount*f+ge,F,T,k))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,u,d,y,b,F){const T=y-n,k=b-u,O=d+F;return O*O>T*T+k*k}_circleAndRectCollide(n,u,d,y,b,F,T){const k=(F-y)/2,O=Math.abs(n-(y+k));if(O>k+d)return!1;const H=(T-b)/2,K=Math.abs(u-(b+H));if(K>H+d)return!1;if(O<=k||K<=H)return!0;const se=O-k,ge=K-H;return se*se+ge*ge<=d*d}}function vt(v,n,u,d,y){const b=a.Z();return n?(a.a0(b,b,[1/y,1/y,1]),u||a.ae(b,b,d.angle)):a.a1(b,d.labelPlaneMatrix,v),b}function Cr(v,n,u,d,y){if(n){const b=a.af(v);return a.a0(b,b,[y,y,1]),u||a.ae(b,b,-d.angle),b}return d.glCoordMatrix}function Tr(v,n,u){let d;u?(d=[v.x,v.y,u(v.x,v.y),1],a.ag(d,d,n)):(d=[v.x,v.y,0,1],ve(d,d,n));const y=d[3];return{point:new a.P(d[0]/y,d[1]/y),signedDistanceFromCamera:y}}function Dr(v,n){return .5+v/n*.5}function Vr(v,n){const u=v[0]/v[3],d=v[1]/v[3];return u>=-n[0]&&u<=n[0]&&d>=-n[1]&&d<=n[1]}function xt(v,n,u,d,y,b,F,T,k,O){const H=d?v.textSizeData:v.iconSizeData,K=a.ah(H,u.transform.zoom),se=[256/u.width*2+1,256/u.height*2+1],ge=d?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;ge.clear();const f=v.lineVertexArray,x=d?v.text.placedSymbolArray:v.icon.placedSymbolArray,S=u.transform.width/u.transform.height;let Q=!1;for(let R=0;R<x.length;R++){const N=x.get(R);if(N.hidden||N.writingMode===a.ai.vertical&&!Q){le(N.numGlyphs,ge);continue}let z;if(Q=!1,O?(z=[N.anchorX,N.anchorY,O(N.anchorX,N.anchorY),1],a.ag(z,z,n)):(z=[N.anchorX,N.anchorY,0,1],ve(z,z,n)),!Vr(z,se)){le(N.numGlyphs,ge);continue}const $=Dr(u.transform.cameraToCenterDistance,z[3]),Z=a.aj(H,K,N),re=F?Z/$:Z*$,de=new a.P(N.anchorX,N.anchorY),we=Tr(de,y,O).point,Le={projections:{},offsets:{}},Qe=Or(N,re,!1,T,n,y,b,v.glyphOffsetArray,f,ge,we,de,Le,S,k,O);Q=Qe.useVertical,(Qe.notEnoughRoom||Q||Qe.needsFlipping&&Or(N,re,!0,T,n,y,b,v.glyphOffsetArray,f,ge,we,de,Le,S,k,O).notEnoughRoom)&&le(N.numGlyphs,ge)}d?v.text.dynamicLayoutVertexBuffer.updateData(ge):v.icon.dynamicLayoutVertexBuffer.updateData(ge)}function $t(v,n,u,d,y,b,F,T,k,O,H,K,se){const ge=T.glyphStartIndex+T.numGlyphs,f=T.lineStartIndex,x=T.lineStartIndex+T.lineLength,S=n.getoffsetX(T.glyphStartIndex),Q=n.getoffsetX(ge-1),R=X(v*S,u,d,y,b,F,T.segment,f,x,k,O,H,K,se);if(!R)return null;const N=X(v*Q,u,d,y,b,F,T.segment,f,x,k,O,H,K,se);return N?{first:R,last:N}:null}function rr(v,n,u,d){return v===a.ai.horizontal&&Math.abs(u.y-n.y)>Math.abs(u.x-n.x)*d?{useVertical:!0}:(v===a.ai.vertical?n.y<u.y:n.x>u.x)?{needsFlipping:!0}:null}function Or(v,n,u,d,y,b,F,T,k,O,H,K,se,ge,f,x){const S=n/24,Q=v.lineOffsetX*S,R=v.lineOffsetY*S;let N;if(v.numGlyphs>1){const z=v.glyphStartIndex+v.numGlyphs,$=v.lineStartIndex,Z=v.lineStartIndex+v.lineLength,re=$t(S,T,Q,R,u,H,K,v,k,b,se,f,x);if(!re)return{notEnoughRoom:!0};const de=Tr(re.first.point,F,x).point,we=Tr(re.last.point,F,x).point;if(d&&!u){const Le=rr(v.writingMode,de,we,ge);if(Le)return Le}N=[re.first];for(let Le=v.glyphStartIndex+1;Le<z-1;Le++)N.push(X(S*T.getoffsetX(Le),Q,R,u,H,K,v.segment,$,Z,k,b,se,f,x));N.push(re.last)}else{if(d&&!u){const $=Tr(K,y,x).point,Z=v.lineStartIndex+v.segment+1,re=new a.P(k.getx(Z),k.gety(Z)),de=Tr(re,y,x),we=de.signedDistanceFromCamera>0?de.point:bi(K,re,$,1,y,x),Le=rr(v.writingMode,$,we,ge);if(Le)return Le}const z=X(S*T.getoffsetX(v.glyphStartIndex),Q,R,u,H,K,v.segment,v.lineStartIndex,v.lineStartIndex+v.lineLength,k,b,se,f,x);if(!z)return{notEnoughRoom:!0};N=[z]}for(const z of N)a.ak(O,z.point,z.angle);return{}}function bi(v,n,u,d,y,b){const F=Tr(v.add(v.sub(n)._unit()),y,b).point,T=u.sub(F);return u.add(T._mult(d/T.mag()))}function Nt(v,n){const{projectionCache:u,lineVertexArray:d,labelPlaneMatrix:y,tileAnchorPoint:b,distanceFromAnchor:F,getElevation:T,previousVertex:k,direction:O,absOffsetX:H}=n;if(u.projections[v])return u.projections[v];const K=new a.P(d.getx(v),d.gety(v)),se=Tr(K,y,T);if(se.signedDistanceFromCamera>0)return u.projections[v]=se.point,se.point;const ge=v-O;return bi(F===0?b:new a.P(d.getx(ge),d.gety(ge)),K,k,H-F+1,y,T)}function Kr(v,n,u){return v._unit()._perp()._mult(n*u)}function ue(v,n,u,d,y,b,F,T){const{projectionCache:k,direction:O}=T;if(k.offsets[v])return k.offsets[v];const H=u.add(n);if(v+O<d||v+O>=y)return k.offsets[v]=H,H;const K=Nt(v+O,T),se=Kr(K.sub(u),F,O),ge=u.add(se),f=K.add(se);return k.offsets[v]=a.al(b,H,ge,f)||H,k.offsets[v]}function X(v,n,u,d,y,b,F,T,k,O,H,K,se,ge){const f=d?v-n:v+n;let x=f>0?1:-1,S=0;d&&(x*=-1,S=Math.PI),x<0&&(S+=Math.PI);let Q,R,N=x>0?T+F:T+F+1,z=y,$=y,Z=0,re=0;const de=Math.abs(f),we=[];let Le;for(;Z+re<=de;){if(N+=x,N<T||N>=k)return null;Z+=re,$=z,R=Q;const He={projectionCache:K,lineVertexArray:O,labelPlaneMatrix:H,tileAnchorPoint:b,distanceFromAnchor:Z,getElevation:ge,previousVertex:$,direction:x,absOffsetX:de};if(z=Nt(N,He),u===0)we.push($),Le=z.sub($);else{let Fe;const Ie=z.sub($);Fe=Ie.mag()===0?Kr(Nt(N+x,He).sub(z),u,x):Kr(Ie,u,x),R||(R=$.add(Fe)),Q=ue(N,Fe,z,T,k,R,u,He),we.push(R),Le=Q.sub(R)}re=Le.mag()}const Qe=Le._mult((de-Z)/re)._add(R||$),ut=S+Math.atan2(z.y-$.y,z.x-$.x);return we.push(Qe),{point:Qe,angle:se?ut:0,path:we}}const ie=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function le(v,n){for(let u=0;u<v;u++){const d=n.length;n.resize(d+4),n.float32.set(ie,3*d)}}function ve(v,n,u){const d=n[0],y=n[1];return v[0]=u[0]*d+u[4]*y+u[12],v[1]=u[1]*d+u[5]*y+u[13],v[3]=u[3]*d+u[7]*y+u[15],v}const be=100;class De{constructor(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Rt(n.width+200,n.height+200,25),d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Rt(n.width+200,n.height+200,25);this.transform=n,this.grid=u,this.ignoredGrid=d,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+be,this.screenBottomBoundary=n.height+be,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,u,d,y,b,F){const T=this.projectAndGetPerspectiveRatio(y,n.anchorPointX,n.anchorPointY,F),k=d*T.perspectiveRatio,O=n.x1*k+T.point.x,H=n.y1*k+T.point.y,K=n.x2*k+T.point.x,se=n.y2*k+T.point.y;return!this.isInsideGrid(O,H,K,se)||u!=="always"&&this.grid.hitTest(O,H,K,se,u,b)||T.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[O,H,K,se],offscreen:this.isOffscreen(O,H,K,se)}}placeCollisionCircles(n,u,d,y,b,F,T,k,O,H,K,se,ge,f){const x=[],S=new a.P(u.anchorX,u.anchorY),Q=Tr(S,F,f),R=Dr(this.transform.cameraToCenterDistance,Q.signedDistanceFromCamera),N=(H?b/R:b*R)/a.ap,z=Tr(S,T,f).point,$=$t(N,y,u.lineOffsetX*N,u.lineOffsetY*N,!1,z,S,u,d,T,{projections:{},offsets:{}},!1,f);let Z=!1,re=!1,de=!0;if($){const we=.5*se*R+ge,Le=new a.P(-100,-100),Qe=new a.P(this.screenRightBoundary,this.screenBottomBoundary),ut=new gr,He=$.first,Fe=$.last;let Ie=[];for(let at=He.path.length-1;at>=1;at--)Ie.push(He.path[at]);for(let at=1;at<Fe.path.length;at++)Ie.push(Fe.path[at]);const dt=2.5*we;if(k){const at=Ie.map(_t=>Tr(_t,k,f));Ie=at.some(_t=>_t.signedDistanceFromCamera<=0)?[]:at.map(_t=>_t.point)}let pt=[];if(Ie.length>0){const at=Ie[0].clone(),_t=Ie[0].clone();for(let Ft=1;Ft<Ie.length;Ft++)at.x=Math.min(at.x,Ie[Ft].x),at.y=Math.min(at.y,Ie[Ft].y),_t.x=Math.max(_t.x,Ie[Ft].x),_t.y=Math.max(_t.y,Ie[Ft].y);pt=at.x>=Le.x&&_t.x<=Qe.x&&at.y>=Le.y&&_t.y<=Qe.y?[Ie]:_t.x<Le.x||at.x>Qe.x||_t.y<Le.y||at.y>Qe.y?[]:a.am([Ie],Le.x,Le.y,Qe.x,Qe.y)}for(const at of pt){ut.reset(at,.25*we);let _t=0;_t=ut.length<=.5*we?1:Math.ceil(ut.paddedLength/dt)+1;for(let Ft=0;Ft<_t;Ft++){const Wt=Ft/Math.max(_t-1,1),kt=ut.lerp(Wt),Er=kt.x+be,Fr=kt.y+be;x.push(Er,Fr,we,0);const kr=Er-we,pr=Fr-we,ei=Er+we,Xr=Fr+we;if(de=de&&this.isOffscreen(kr,pr,ei,Xr),re=re||this.isInsideGrid(kr,pr,ei,Xr),n!=="always"&&this.grid.hitTestCircle(Er,Fr,we,n,K)&&(Z=!0,!O))return{circles:[],offscreen:!1,collisionDetected:Z}}}}return{circles:!O&&Z||!re||R<this.perspectiveRatioCutoff?[]:x,offscreen:de,collisionDetected:Z}}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let d=1/0,y=1/0,b=-1/0,F=-1/0;for(const H of n){const K=new a.P(H.x+be,H.y+be);d=Math.min(d,K.x),y=Math.min(y,K.y),b=Math.max(b,K.x),F=Math.max(F,K.y),u.push(K)}const T=this.grid.query(d,y,b,F).concat(this.ignoredGrid.query(d,y,b,F)),k={},O={};for(const H of T){const K=H.key;if(k[K.bucketInstanceId]===void 0&&(k[K.bucketInstanceId]={}),k[K.bucketInstanceId][K.featureIndex])continue;const se=[new a.P(H.x1,H.y1),new a.P(H.x2,H.y1),new a.P(H.x2,H.y2),new a.P(H.x1,H.y2)];a.an(u,se)&&(k[K.bucketInstanceId][K.featureIndex]=!0,O[K.bucketInstanceId]===void 0&&(O[K.bucketInstanceId]=[]),O[K.bucketInstanceId].push(K.featureIndex))}return O}insertCollisionBox(n,u,d,y,b,F){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:b,collisionGroupID:F,overlapMode:u},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,u,d,y,b,F){const T=d?this.ignoredGrid:this.grid,k={bucketInstanceId:y,featureIndex:b,collisionGroupID:F,overlapMode:u};for(let O=0;O<n.length;O+=4)T.insertCircle(k,n[O],n[O+1],n[O+2])}projectAndGetPerspectiveRatio(n,u,d,y){let b;return y?(b=[u,d,y(u,d),1],a.ag(b,b,n)):(b=[u,d,0,1],ve(b,b,n)),{point:new a.P((b[0]/b[3]+1)/2*this.transform.width+be,(-b[1]/b[3]+1)/2*this.transform.height+be),perspectiveRatio:.5+this.transform.cameraToCenterDistance/b[3]*.5}}isOffscreen(n,u,d,y){return d<be||n>=this.screenRightBoundary||y<be||u>this.screenBottomBoundary}isInsideGrid(n,u,d,y){return d>=0&&n<this.gridRightBoundary&&y>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const n=a.ao([]);return a.$(n,n,[-100,-100,0]),n}}function Oe(v,n,u){return n*(a.N/(v.tileSize*Math.pow(2,u-v.tileID.overscaledZ)))}class Ue{constructor(n,u,d,y){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?u:-u))):y&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Ve{constructor(n,u,d,y,b){this.text=new Ue(n?n.text:null,u,d,b),this.icon=new Ue(n?n.icon:null,u,y,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class lt{constructor(n,u,d){this.text=n,this.icon=u,this.skipFade=d}}class ht{constructor(){this.invProjMatrix=a.Z(),this.viewportMatrix=a.Z(),this.circles=[]}}class gt{constructor(n,u,d,y,b){this.bucketInstanceId=n,this.featureIndex=u,this.sourceLayerIndex=d,this.bucketIndex=y,this.tileID=b}}class nr{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const u=++this.maxGroupID;this.collisionGroups[n]={ID:u,predicate:d=>d.collisionGroupID===u}}return this.collisionGroups[n]}}function sr(v,n,u,d,y){const{horizontalAlign:b,verticalAlign:F}=a.au(v);return new a.P(-(b-.5)*n+d[0]*y,-(F-.5)*u+d[1]*y)}function jt(v,n,u,d,y,b){const{x1:F,x2:T,y1:k,y2:O,anchorPointX:H,anchorPointY:K}=v,se=new a.P(n,u);return d&&se._rotate(y?b:-b),{x1:F+se.x,y1:k+se.y,x2:T+se.x,y2:O+se.y,anchorPointX:H,anchorPointY:K}}class Yt{constructor(n,u,d,y,b){this.transform=n.clone(),this.terrain=u,this.collisionIndex=new De(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new nr(y),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(n,u,d,y){const b=d.getBucket(u),F=d.latestFeatureIndex;if(!b||!F||u.id!==b.layerIds[0])return;const T=d.collisionBoxArray,k=b.layers[0].layout,O=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),H=d.tileSize/a.N,K=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),se=k.get("text-pitch-alignment")==="map",ge=k.get("text-rotation-alignment")==="map",f=Oe(d,1,this.transform.zoom),x=vt(K,se,ge,this.transform,f);let S=null;if(se){const R=Cr(K,se,ge,this.transform,f);S=a.a1([],this.transform.labelPlaneMatrix,R)}this.retainedQueryData[b.bucketInstanceId]=new gt(b.bucketInstanceId,F,b.sourceLayerIndex,b.index,d.tileID);const Q={bucket:b,layout:k,posMatrix:K,textLabelPlaneMatrix:x,labelToScreenMatrix:S,scale:O,textPixelRatio:H,holdingForFade:d.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:a.ah(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(y)for(const R of b.sortKeyRanges){const{sortKey:N,symbolInstanceStart:z,symbolInstanceEnd:$}=R;n.push({sortKey:N,symbolInstanceStart:z,symbolInstanceEnd:$,parameters:Q})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Q})}attemptAnchorPlacement(n,u,d,y,b,F,T,k,O,H,K,se,ge,f,x,S){const Q=a.aq[n.textAnchor],R=[n.textOffset0,n.textOffset1],N=sr(Q,d,y,R,b),z=this.collisionIndex.placeCollisionBox(jt(u,N.x,N.y,F,T,this.transform.angle),K,k,O,H.predicate,S);if((!x||this.collisionIndex.placeCollisionBox(jt(x,N.x,N.y,F,T,this.transform.angle),K,k,O,H.predicate,S).box.length!==0)&&z.box.length>0){let $;if(this.prevPlacement&&this.prevPlacement.variableOffsets[se.crossTileID]&&this.prevPlacement.placements[se.crossTileID]&&this.prevPlacement.placements[se.crossTileID].text&&($=this.prevPlacement.variableOffsets[se.crossTileID].anchor),se.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[se.crossTileID]={textOffset:R,width:d,height:y,anchor:Q,textBoxScale:b,prevAnchor:$},this.markUsedJustification(ge,Q,se,f),ge.allowVerticalPlacement&&(this.markUsedOrientation(ge,f,se),this.placedOrientations[se.crossTileID]=f),{shift:N,placedGlyphBoxes:z}}}placeLayerBucketPart(n,u,d){const{bucket:y,layout:b,posMatrix:F,textLabelPlaneMatrix:T,labelToScreenMatrix:k,textPixelRatio:O,holdingForFade:H,collisionBoxArray:K,partiallyEvaluatedTextSize:se,collisionGroup:ge}=n.parameters,f=b.get("text-optional"),x=b.get("icon-optional"),S=a.ar(b,"text-overlap","text-allow-overlap"),Q=S==="always",R=a.ar(b,"icon-overlap","icon-allow-overlap"),N=R==="always",z=b.get("text-rotation-alignment")==="map",$=b.get("text-pitch-alignment")==="map",Z=b.get("icon-text-fit")!=="none",re=b.get("symbol-z-order")==="viewport-y",de=Q&&(N||!y.hasIconData()||x),we=N&&(Q||!y.hasTextData()||f);!y.collisionArrays&&K&&y.deserializeCollisionBoxes(K);const Le=this.retainedQueryData[y.bucketInstanceId].tileID,Qe=this.terrain?(He,Fe)=>this.terrain.getElevation(Le,He,Fe):null,ut=(He,Fe)=>{var Ie,dt;if(u[He.crossTileID])return;if(H)return void(this.placements[He.crossTileID]=new lt(!1,!1,!1));let pt=!1,at=!1,_t=!0,Ft=null,Wt={box:null,offscreen:null},kt={box:null,offscreen:null},Er=null,Fr=null,kr=null,pr=0,ei=0,Xr=0;Fe.textFeatureIndex?pr=Fe.textFeatureIndex:He.useRuntimeCollisionCircles&&(pr=He.featureIndex),Fe.verticalTextFeatureIndex&&(ei=Fe.verticalTextFeatureIndex);const Ir=Fe.textBox;if(Ir){const si=li=>{let ti=a.ai.horizontal;if(y.allowVerticalPlacement&&!li&&this.prevPlacement){const pi=this.prevPlacement.placedOrientations[He.crossTileID];pi&&(this.placedOrientations[He.crossTileID]=pi,ti=pi,this.markUsedOrientation(y,ti,He))}return ti},hi=(li,ti)=>{if(y.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&Fe.verticalTextBox){for(const pi of y.writingModes)if(pi===a.ai.vertical?(Wt=ti(),kt=Wt):Wt=li(),Wt&&Wt.box&&Wt.box.length)break}else Wt=li()},zr=He.textAnchorOffsetStartIndex,en=He.textAnchorOffsetEndIndex;if(en===zr){const li=(ti,pi)=>{const ri=this.collisionIndex.placeCollisionBox(ti,S,O,F,ge.predicate,Qe);return ri&&ri.box&&ri.box.length&&(this.markUsedOrientation(y,pi,He),this.placedOrientations[He.crossTileID]=pi),ri};hi(()=>li(Ir,a.ai.horizontal),()=>{const ti=Fe.verticalTextBox;return y.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&ti?li(ti,a.ai.vertical):{box:null,offscreen:null}}),si(Wt&&Wt.box&&Wt.box.length)}else{let li=a.aq[(dt=(Ie=this.prevPlacement)===null||Ie===void 0?void 0:Ie.variableOffsets[He.crossTileID])===null||dt===void 0?void 0:dt.anchor];const ti=(ri,on,us)=>{const tn=ri.x2-ri.x1,Ba=ri.y2-ri.y1,Ko=He.textBoxScale,oo=Z&&R==="never"?on:null;let _n={box:[],offscreen:!1},gi=S==="never"?1:2,ks="never";li&&gi++;for(let hs=0;hs<gi;hs++){for(let na=zr;na<en;na++){const OA=y.textAnchorOffsets.get(na);if(li&&OA.textAnchor!==li)continue;const ps=this.attemptAnchorPlacement(OA,ri,tn,Ba,Ko,z,$,O,F,ge,ks,He,y,us,oo,Qe);if(ps&&(_n=ps.placedGlyphBoxes,_n&&_n.box&&_n.box.length))return pt=!0,Ft=ps.shift,_n}li?li=null:ks=S}return _n};hi(()=>ti(Ir,Fe.iconBox,a.ai.horizontal),()=>{const ri=Fe.verticalTextBox;return y.allowVerticalPlacement&&!(Wt&&Wt.box&&Wt.box.length)&&He.numVerticalGlyphVertices>0&&ri?ti(ri,Fe.verticalIconBox,a.ai.vertical):{box:null,offscreen:null}}),Wt&&(pt=Wt.box,_t=Wt.offscreen);const pi=si(Wt&&Wt.box);if(!pt&&this.prevPlacement){const ri=this.prevPlacement.variableOffsets[He.crossTileID];ri&&(this.variableOffsets[He.crossTileID]=ri,this.markUsedJustification(y,ri.anchor,He,pi))}}}if(Er=Wt,pt=Er&&Er.box&&Er.box.length>0,_t=Er&&Er.offscreen,He.useRuntimeCollisionCircles){const si=y.text.placedSymbolArray.get(He.centerJustifiedTextSymbolIndex),hi=a.aj(y.textSizeData,se,si),zr=b.get("text-padding");Fr=this.collisionIndex.placeCollisionCircles(S,si,y.lineVertexArray,y.glyphOffsetArray,hi,F,T,k,d,$,ge.predicate,He.collisionCircleDiameter,zr,Qe),Fr.circles.length&&Fr.collisionDetected&&!d&&a.w("Collisions detected, but collision boxes are not shown"),pt=Q||Fr.circles.length>0&&!Fr.collisionDetected,_t=_t&&Fr.offscreen}if(Fe.iconFeatureIndex&&(Xr=Fe.iconFeatureIndex),Fe.iconBox){const si=hi=>{const zr=Z&&Ft?jt(hi,Ft.x,Ft.y,z,$,this.transform.angle):hi;return this.collisionIndex.placeCollisionBox(zr,R,O,F,ge.predicate,Qe)};kt&&kt.box&&kt.box.length&&Fe.verticalIconBox?(kr=si(Fe.verticalIconBox),at=kr.box.length>0):(kr=si(Fe.iconBox),at=kr.box.length>0),_t=_t&&kr.offscreen}const Bi=f||He.numHorizontalGlyphVertices===0&&He.numVerticalGlyphVertices===0,Ji=x||He.numIconVertices===0;if(Bi||Ji?Ji?Bi||(at=at&&pt):pt=at&&pt:at=pt=at&&pt,pt&&Er&&Er.box&&this.collisionIndex.insertCollisionBox(Er.box,S,b.get("text-ignore-placement"),y.bucketInstanceId,kt&&kt.box&&ei?ei:pr,ge.ID),at&&kr&&this.collisionIndex.insertCollisionBox(kr.box,R,b.get("icon-ignore-placement"),y.bucketInstanceId,Xr,ge.ID),Fr&&(pt&&this.collisionIndex.insertCollisionCircles(Fr.circles,S,b.get("text-ignore-placement"),y.bucketInstanceId,pr,ge.ID),d)){const si=y.bucketInstanceId;let hi=this.collisionCircleArrays[si];hi===void 0&&(hi=this.collisionCircleArrays[si]=new ht);for(let zr=0;zr<Fr.circles.length;zr+=4)hi.circles.push(Fr.circles[zr+0]),hi.circles.push(Fr.circles[zr+1]),hi.circles.push(Fr.circles[zr+2]),hi.circles.push(Fr.collisionDetected?1:0)}if(He.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[He.crossTileID]=new lt(pt||de,at||we,_t||y.justReloaded),u[He.crossTileID]=!0};if(re){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const He=y.getSortedSymbolIndexes(this.transform.angle);for(let Fe=He.length-1;Fe>=0;--Fe){const Ie=He[Fe];ut(y.symbolInstances.get(Ie),y.collisionArrays[Ie])}}else for(let He=n.symbolInstanceStart;He<n.symbolInstanceEnd;He++)ut(y.symbolInstances.get(He),y.collisionArrays[He]);if(d&&y.bucketInstanceId in this.collisionCircleArrays){const He=this.collisionCircleArrays[y.bucketInstanceId];a.as(He.invProjMatrix,F),He.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}markUsedJustification(n,u,d,y){let b;b=y===a.ai.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[a.at(u)];const F=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const T of F)T>=0&&(n.text.placedSymbolArray.get(T).crossTileID=b>=0&&T!==b?0:d.crossTileID)}markUsedOrientation(n,u,d){const y=u===a.ai.horizontal||u===a.ai.horizontalOnly?u:0,b=u===a.ai.vertical?u:0,F=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const T of F)n.text.placedSymbolArray.get(T).placedOrientation=y;d.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let d=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const y=u?u.symbolFadeChange(n):1,b=u?u.opacities:{},F=u?u.variableOffsets:{},T=u?u.placedOrientations:{};for(const k in this.placements){const O=this.placements[k],H=b[k];H?(this.opacities[k]=new Ve(H,y,O.text,O.icon),d=d||O.text!==H.text.placed||O.icon!==H.icon.placed):(this.opacities[k]=new Ve(null,y,O.text,O.icon,O.skipFade),d=d||O.text||O.icon)}for(const k in b){const O=b[k];if(!this.opacities[k]){const H=new Ve(O,y,!1,!1);H.isHidden()||(this.opacities[k]=H,d=d||O.text.placed||O.icon.placed)}}for(const k in F)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=F[k]);for(const k in T)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=T[k]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:n)}updateLayerOpacities(n,u){const d={};for(const y of u){const b=y.getBucket(n);b&&y.latestFeatureIndex&&n.id===b.layerIds[0]&&this.updateBucketOpacities(b,d,y.collisionBoxArray)}}updateBucketOpacities(n,u,d){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const y=n.layers[0],b=y.layout,F=new Ve(null,0,!1,!1,!0),T=b.get("text-allow-overlap"),k=b.get("icon-allow-overlap"),O=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),H=b.get("text-rotation-alignment")==="map",K=b.get("text-pitch-alignment")==="map",se=b.get("icon-text-fit")!=="none",ge=new Ve(null,0,T&&(k||!n.hasIconData()||b.get("icon-optional")),k&&(T||!n.hasTextData()||b.get("text-optional")),!0);!n.collisionArrays&&d&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(d);const f=(x,S,Q)=>{for(let R=0;R<S/4;R++)x.opacityVertexArray.emplaceBack(Q);x.hasVisibleVertices=x.hasVisibleVertices||Q!==di};for(let x=0;x<n.symbolInstances.length;x++){const S=n.symbolInstances.get(x),{numHorizontalGlyphVertices:Q,numVerticalGlyphVertices:R,crossTileID:N}=S;let z=this.opacities[N];u[N]?z=F:z||(z=ge,this.opacities[N]=z),u[N]=!0;const $=S.numIconVertices>0,Z=this.placedOrientations[S.crossTileID],re=Z===a.ai.vertical,de=Z===a.ai.horizontal||Z===a.ai.horizontalOnly;if(Q>0||R>0){const we=Nr(z.text);f(n.text,Q,re?di:we),f(n.text,R,de?di:we);const Le=z.text.isHidden();[S.rightJustifiedTextSymbolIndex,S.centerJustifiedTextSymbolIndex,S.leftJustifiedTextSymbolIndex].forEach(He=>{He>=0&&(n.text.placedSymbolArray.get(He).hidden=Le||re?1:0)}),S.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(S.verticalPlacedTextSymbolIndex).hidden=Le||de?1:0);const Qe=this.variableOffsets[S.crossTileID];Qe&&this.markUsedJustification(n,Qe.anchor,S,Z);const ut=this.placedOrientations[S.crossTileID];ut&&(this.markUsedJustification(n,"left",S,ut),this.markUsedOrientation(n,ut,S))}if($){const we=Nr(z.icon),Le=!(se&&S.verticalPlacedIconSymbolIndex&&re);S.placedIconSymbolIndex>=0&&(f(n.icon,S.numIconVertices,Le?we:di),n.icon.placedSymbolArray.get(S.placedIconSymbolIndex).hidden=z.icon.isHidden()),S.verticalPlacedIconSymbolIndex>=0&&(f(n.icon,S.numVerticalIconVertices,Le?di:we),n.icon.placedSymbolArray.get(S.verticalPlacedIconSymbolIndex).hidden=z.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const we=n.collisionArrays[x];if(we){let Le=new a.P(0,0);if(we.textBox||we.verticalTextBox){let ut=!0;if(O){const He=this.variableOffsets[N];He?(Le=sr(He.anchor,He.width,He.height,He.textOffset,He.textBoxScale),H&&Le._rotate(K?this.transform.angle:-this.transform.angle)):ut=!1}we.textBox&&ur(n.textCollisionBox.collisionVertexArray,z.text.placed,!ut||re,Le.x,Le.y),we.verticalTextBox&&ur(n.textCollisionBox.collisionVertexArray,z.text.placed,!ut||de,Le.x,Le.y)}const Qe=!!(!de&&we.verticalIconBox);we.iconBox&&ur(n.iconCollisionBox.collisionVertexArray,z.icon.placed,Qe,se?Le.x:0,se?Le.y:0),we.verticalIconBox&&ur(n.iconCollisionBox.collisionVertexArray,z.icon.placed,!Qe,se?Le.x:0,se?Le.y:0)}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const x=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=x.invProjMatrix,n.placementViewportMatrix=x.viewportMatrix,n.collisionCircleArray=x.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,u){const d=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*d>n}setStale(){this.stale=!0}}function ur(v,n,u,d,y){v.emplaceBack(n?1:0,u?1:0,d||0,y||0),v.emplaceBack(n?1:0,u?1:0,d||0,y||0),v.emplaceBack(n?1:0,u?1:0,d||0,y||0),v.emplaceBack(n?1:0,u?1:0,d||0,y||0)}const Br=Math.pow(2,25),Rr=Math.pow(2,24),Sr=Math.pow(2,17),Te=Math.pow(2,16),Qt=Math.pow(2,9),yt=Math.pow(2,8),vr=Math.pow(2,1);function Nr(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const n=v.placed?1:0,u=Math.floor(127*v.opacity);return u*Br+n*Rr+u*Sr+n*Te+u*Qt+n*yt+u*vr+n}const di=0;class Ii{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,u,d,y,b){const F=this._bucketParts;for(;this._currentTileIndex<n.length;)if(u.getBucketParts(F,y,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort((T,k)=>T.sortKey-k.sortKey));this._currentPartIndex<F.length;)if(u.placeLayerBucketPart(F[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,b())return!0;return!1}}class qn{constructor(n,u,d,y,b,F,T,k){this.placement=new Yt(n,u,F,T,k),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(n,u,d){const y=a.h.now(),b=()=>!this._forceFullPlacement&&a.h.now()-y>2;for(;this._currentPlacementIndex>=0;){const F=u[n[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&(!F.minzoom||F.minzoom<=T)&&(!F.maxzoom||F.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new Ii(F)),this._inProgressLayer.continuePlacement(d[F.source],this.placement,this._showCollisionBoxes,F,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const Hi=512/a.N/2;class Wi{constructor(n,u,d){this.tileID=n,this.bucketInstanceId=d,this._symbolsByKey={};const y=new Map;for(let b=0;b<u.length;b++){const F=u.get(b),T=F.key,k=y.get(T);k?k.push(F):y.set(T,[F])}for(const[b,F]of y){const T={positions:F.map(k=>({x:Math.floor(k.anchorX*Hi),y:Math.floor(k.anchorY*Hi)})),crossTileIDs:F.map(k=>k.crossTileID)};if(T.positions.length>128){const k=new a.av(T.positions.length,16,Uint16Array);for(const{x:O,y:H}of T.positions)k.add(O,H);k.finish(),delete T.positions,T.index=k}this._symbolsByKey[b]=T}}getScaledCoordinates(n,u){const{x:d,y,z:b}=this.tileID.canonical,{x:F,y:T,z:k}=u.canonical,O=Hi/Math.pow(2,k-b),H=(T*a.N+n.anchorY)*O,K=y*a.N*Hi;return{x:Math.floor((F*a.N+n.anchorX)*O-d*a.N*Hi),y:Math.floor(H-K)}}findMatches(n,u,d){const y=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let b=0;b<n.length;b++){const F=n.get(b);if(F.crossTileID)continue;const T=this._symbolsByKey[F.key];if(!T)continue;const k=this.getScaledCoordinates(F,u);if(T.index){const O=T.index.range(k.x-y,k.y-y,k.x+y,k.y+y).sort();for(const H of O){const K=T.crossTileIDs[H];if(!d[K]){d[K]=!0,F.crossTileID=K;break}}}else if(T.positions)for(let O=0;O<T.positions.length;O++){const H=T.positions[O],K=T.crossTileIDs[O];if(Math.abs(H.x-k.x)<=y&&Math.abs(H.y-k.y)<=y&&!d[K]){d[K]=!0,F.crossTileID=K;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(n=>{let{crossTileIDs:u}=n;return u})}}class ii{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Co{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const u=Math.round((n-this.lng)/360);if(u!==0)for(const d in this.indexes){const y=this.indexes[d],b={};for(const F in y){const T=y[F];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+u),b[T.tileID.key]=T}this.indexes[d]=b}this.lng=n}addBucket(n,u,d){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let b=0;b<u.symbolInstances.length;b++)u.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const y=this.usedCrossTileIDs[n.overscaledZ];for(const b in this.indexes){const F=this.indexes[b];if(Number(b)>n.overscaledZ)for(const T in F){const k=F[T];k.tileID.isChildOf(n)&&k.findMatches(u.symbolInstances,n,y)}else{const T=F[n.scaledTo(Number(b)).key];T&&T.findMatches(u.symbolInstances,n,y)}}for(let b=0;b<u.symbolInstances.length;b++){const F=u.symbolInstances.get(b);F.crossTileID||(F.crossTileID=d.generate(),y[F.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Wi(n,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(n,u){for(const d of u.getCrossTileIDsLists())for(const y of d)delete this.usedCrossTileIDs[n][y]}removeStaleBuckets(n){let u=!1;for(const d in this.indexes){const y=this.indexes[d];for(const b in y)n[y[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,y[b]),delete y[b],u=!0)}return u}}class mA{constructor(){this.layerIndexes={},this.crossTileIDs=new ii,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,u,d){let y=this.layerIndexes[n.id];y===void 0&&(y=this.layerIndexes[n.id]=new Co);let b=!1;const F={};y.handleWrapJump(d);for(const T of u){const k=T.getBucket(n);k&&n.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(T.tileID,k,this.crossTileIDs)&&(b=!0),F[k.bucketInstanceId]=!0)}return y.removeStaleBuckets(F)&&(b=!0),b}pruneUnusedLayers(n){const u={};n.forEach(d=>{u[d]=!0});for(const d in this.layerIndexes)u[d]||delete this.layerIndexes[d]}}const Zi=(v,n)=>a.x(v,n&&n.filter(u=>u.identifier!=="source.canvas")),Dn=a.F(a.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),yA=a.F(a.ax,["setCenter","setZoom","setBearing","setPitch"]),$n=a.aw();class Wr extends a.E{constructor(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),this.map=n,this.dispatcher=new Bt(qr(),this,n._getMapId()),this.imageManager=new Ae,this.imageManager.setEventedParent(this),this.glyphManager=new Je(n._requestManager,u.localIdeographFontFamily),this.lineAtlas=new nt(256,512),this.crossTileSymbolIndex=new mA,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.az());const d=this;this._rtlTextPluginCallback=Wr.registerForPluginStateChange(y=>{d.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(b,F)=>{if(a.aA(b),F&&F.every(T=>T))for(const T in d.sourceCaches){const k=d.sourceCaches[T].getSource().type;k!=="vector"&&k!=="geojson"||d.sourceCaches[T].reload()}})}),this.on("data",y=>{if(y.dataType!=="source"||y.sourceDataType!=="metadata")return;const b=this.sourceCaches[y.sourceId];if(!b)return;const F=b.getSource();if(F&&F.vectorLayerIds)for(const T in this._layers){const k=this._layers[T];k.source===F.id&&this._validateLayer(k)}})}loadURL(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2?arguments[2]:void 0;this.fire(new a.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const y=this.map._requestManager.transformRequest(n,q.Style);this._request=a.f(y,(b,F)=>{this._request=null,b?this.fire(new a.j(b)):F&&this._load(F,u,d)})}loadJSON(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2?arguments[2]:void 0;this.fire(new a.k("dataloading",{dataType:"style"})),this._request=a.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(n,u,d)})}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load($n,{validate:!1})}_load(n,u,d){var y;const b=u.transformStyle?u.transformStyle(d,n):n;if(!u.validate||!Zi(this,a.y(b))){this._loaded=!0,this.stylesheet=b;for(const F in b.sources)this.addSource(F,b.sources[F],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new it(this.stylesheet.light),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const n=a.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",n),this._order=n.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of n){const d=a.aC(u);d.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=d}}_loadSprite(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.imageManager.setLoaded(!1),this._spriteRequest=function(y,b,F,T){const k=fe(y),O=k.length,H=F>1?"@2x":"",K={},se={},ge={};for(const{id:f,url:x}of k){const S=b.transformRequest(b.normalizeSpriteURL(x,H,".json"),q.SpriteJSON),Q=`${f}_${S.url}`;K[Q]=a.f(S,(z,$)=>{delete K[Q],se[f]=$,We(T,se,ge,z,O)});const R=b.transformRequest(b.normalizeSpriteURL(x,H,".png"),q.SpriteImage),N=`${f}_${R.url}`;K[N]=Y.getImage(R,(z,$)=>{delete K[N],ge[f]=$,We(T,se,ge,z,O)})}return{cancel(){for(const f of Object.values(K))f.cancel()}}}(n,this.map._requestManager,this.map.getPixelRatio(),(y,b)=>{if(this._spriteRequest=null,y)this.fire(new a.j(y));else if(b)for(const F in b){this._spritesImagesIds[F]=[];const T=this._spritesImagesIds[F]?this._spritesImagesIds[F].filter(k=>!(k in b)):[];for(const k of T)this.imageManager.removeImage(k),this._changedImages[k]=!0;for(const k in b[F]){const O=F==="default"?k:`${F}:${k}`;this._spritesImagesIds[F].push(O),O in this.imageManager.images?this.imageManager.updateImage(O,b[F][k],!1):this.imageManager.addImage(O,b[F][k]),u&&(this._changedImages[O]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),d&&d(y)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(n){const u=this.sourceCaches[n.source];if(!u)return;const d=n.sourceLayer;if(!d)return;const y=u.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(d)===-1)&&this.fire(new a.j(new Error(`Source layer "${d}" does not exist on source "${y.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n){const u=this._serializedAllLayers();if(!n||n.length===0)return Object.values(u);const d=[];for(const y of n)u[y]&&d.push(u[y]);return d}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const u=Object.keys(this._layers);for(const d of u){const y=this._layers[d];y.type!=="custom"&&(n[d]=y.serialize())}return n}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const u=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(y.length||b.length)&&this._updateWorkerLayers(y,b);for(const F in this._updatedSources){const T=this._updatedSources[F];if(T==="reload")this._reloadSource(F);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(F)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const F in this._updatedPaintProps)this._layers[F].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}const d={};for(const y in this.sourceCaches){const b=this.sourceCaches[y];d[y]=b.used,b.used=!1}for(const y of this._order){const b=this._layers[y];b.recalculate(n,this._availableImages),!b.isHidden(n.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const y in d){const b=this.sourceCaches[y];d[y]!==b.used&&b.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(n),this.z=n.zoom,u&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(n),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._checkLoaded();const d=this.serialize();if(n=u.transformStyle?u.transformStyle(d,n):n,Zi(this,a.y(n)))return!1;(n=a.aD(n)).layers=a.aB(n.layers);const y=a.aE(d,n).filter(F=>!(F.command in yA));if(y.length===0)return!1;const b=y.filter(F=>!(F.command in Dn));if(b.length>0)throw new Error(`Unimplemented: ${b.map(F=>F.command).join(", ")}.`);for(const F of y)F.command!=="setTransition"&&this[F.command].apply(this,F.args);return this.stylesheet=n,this._serializedLayers=null,!0}addImage(n,u){if(this.getImage(n))return this.fire(new a.j(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,u),this._afterImageUpdated(n)}updateImage(n,u){this.imageManager.updateImage(n,u)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new a.j(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,u){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(a.y.source,`sources.${n}`,u,null,d))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const y=this.sourceCaches[n]=new Ut(n,u,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:n})),y.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===n)return this.fire(new a.j(new Error(`Source "${n}" cannot be removed while layer "${d}" is using it.`)));const u=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],u.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,u){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const d=this.sourceCaches[n].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(u),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,u){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this._checkLoaded();const y=n.id;if(this.getLayer(y))return void this.fire(new a.j(new Error(`Layer "${y}" already exists on this map.`)));let b;if(n.type==="custom"){if(Zi(this,a.aF(n)))return;b=a.aC(n)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(y,n.source),n=a.aD(n),n=a.e(n,{source:y})),this._validate(a.y.layer,`layers.${y}`,n,{arrayIndex:-1},d))return;b=a.aC(n),this._validateLayer(b),b.setEventedParent(this,{layer:{id:y}})}const F=u?this._order.indexOf(u):this._order.length;if(u&&F===-1)this.fire(new a.j(new Error(`Cannot add layer "${y}" before non-existing layer "${u}".`)));else{if(this._order.splice(F,0,y),this._layerOrderChanged=!0,this._layers[y]=b,this._removedLayers[y]&&b.source&&b.type!=="custom"){const T=this._removedLayers[y];delete this._removedLayers[y],T.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(n,u){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new a.j(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===u)return;const d=this._order.indexOf(n);this._order.splice(d,1);const y=u?this._order.indexOf(u):this._order.length;u&&y===-1?this.fire(new a.j(new Error(`Cannot move layer "${n}" before non-existing layer "${u}".`))):(this._order.splice(y,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const u=this._layers[n];if(!u)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${n}".`)));u.setEventedParent(null);const d=this._order.indexOf(n);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=u,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],u.onRemove&&u.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,u,d){this._checkLoaded();const y=this.getLayer(n);y?y.minzoom===u&&y.maxzoom===d||(u!=null&&(y.minzoom=u),d!=null&&(y.maxzoom=d),this._updateLayer(y)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,u){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this._checkLoaded();const y=this.getLayer(n);if(y){if(!a.aG(y.filter,u))return u==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(a.y.filter,`layers.${y.id}.filter`,u,null,d)||(y.filter=a.aD(u),this._updateLayer(y)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return a.aD(this.getLayer(n).filter)}setLayoutProperty(n,u,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this._checkLoaded();const b=this.getLayer(n);b?a.aG(b.getLayoutProperty(u),d)||(b.setLayoutProperty(u,d,y),this._updateLayer(b)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,u){const d=this.getLayer(n);if(d)return d.getLayoutProperty(u);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,u,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this._checkLoaded();const b=this.getLayer(n);b?a.aG(b.getPaintProperty(u),d)||(b.setPaintProperty(u,d,y)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new a.j(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,u){return this.getLayer(n).getPaintProperty(u)}setFeatureState(n,u){this._checkLoaded();const d=n.source,y=n.sourceLayer,b=this.sourceCaches[d];if(b===void 0)return void this.fire(new a.j(new Error(`The source '${d}' does not exist in the map's style.`)));const F=b.getSource().type;F==="geojson"&&y?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):F!=="vector"||y?(n.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),b.setFeatureState(y,n.id,u)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,u){this._checkLoaded();const d=n.source,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new a.j(new Error(`The source '${d}' does not exist in the map's style.`)));const b=y.getSource().type,F=b==="vector"?n.sourceLayer:void 0;b!=="vector"||F?u&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(F,n.id,u):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const u=n.source,d=n.sourceLayer,y=this.sourceCaches[u];if(y!==void 0)return y.getSource().type!=="vector"||d?(n.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),y.getFeatureState(d,n.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=a.aH(this.sourceCaches,b=>b.serialize()),u=this._serializeByIds(this._order),d=this.map.getTerrain()||void 0,y=this.stylesheet;return a.aI({version:y.version,name:y.name,metadata:y.metadata,light:y.light,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,sources:n,layers:u,terrain:d},b=>b!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const u=F=>this._layers[F].type==="fill-extrusion",d={},y=[];for(let F=this._order.length-1;F>=0;F--){const T=this._order[F];if(u(T)){d[T]=F;for(const k of n){const O=k[T];if(O)for(const H of O)y.push(H)}}}y.sort((F,T)=>T.intersectionZ-F.intersectionZ);const b=[];for(let F=this._order.length-1;F>=0;F--){const T=this._order[F];if(u(T))for(let k=y.length-1;k>=0;k--){const O=y[k].feature;if(d[O.layer.id]<F)break;b.push(O),y.pop()}else for(const k of n){const O=k[T];if(O)for(const H of O)b.push(H.feature)}}return b}queryRenderedFeatures(n,u,d){u&&u.filter&&this._validate(a.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const y={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const T of u.layers){const k=this._layers[T];if(!k)return this.fire(new a.j(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];y[k.source]=!0}}const b=[];u.availableImages=this._availableImages;const F=this._serializedAllLayers();for(const T in this.sourceCaches)u.layers&&!y[T]||b.push(Me(this.sourceCaches[T],this._layers,F,n,u,d));return this.placement&&b.push(function(T,k,O,H,K,se,ge){const f={},x=se.queryRenderedSymbols(H),S=[];for(const Q of Object.keys(x).map(Number))S.push(ge[Q]);S.sort(fr);for(const Q of S){const R=Q.featureIndex.lookupSymbolFeatures(x[Q.bucketInstanceId],k,Q.bucketIndex,Q.sourceLayerIndex,K.filter,K.layers,K.availableImages,T);for(const N in R){const z=f[N]=f[N]||[],$=R[N];$.sort((Z,re)=>{const de=Q.featureSortOrder;if(de){const we=de.indexOf(Z.featureIndex);return de.indexOf(re.featureIndex)-we}return re.featureIndex-Z.featureIndex});for(const Z of $)z.push(Z)}}for(const Q in f)f[Q].forEach(R=>{const N=R.feature,z=O[T[Q].source].getFeatureState(N.layer["source-layer"],N.id);N.source=N.layer.source,N.layer["source-layer"]&&(N.sourceLayer=N.layer["source-layer"]),N.state=z});return f}(this._layers,F,this.sourceCaches,n,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(n,u){u&&u.filter&&this._validate(a.y.filter,"querySourceFeatures.filter",u.filter,null,u);const d=this.sourceCaches[n];return d?function(y,b){const F=y.getRenderableIds().map(O=>y.getTileByID(O)),T=[],k={};for(let O=0;O<F.length;O++){const H=F[O],K=H.tileID.canonical.key;k[K]||(k[K]=!0,H.querySourceFeatures(T,b))}return T}(d,u):[]}addSourceType(n,u,d){return Jt(n)?d(new Error(`A source type called "${n}" already exists.`)):(((y,b)=>{Vt[y]=b})(n,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:u.workerSourceURL},d):d(null,null))}getLight(){return this.light.getLight()}setLight(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._checkLoaded();const d=this.light.getLight();let y=!1;for(const F in n)if(!a.aG(n[F],d[F])){y=!0;break}if(!y)return;const b={now:a.h.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,u),this.light.updateTransitions(b)}_validate(n,u,d,y){let b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return(!b||b.validate!==!1)&&Zi(this,n.call(a.y,a.e({key:u,style:this.serialize(),value:d,styleSpec:a.v},y)))}_remove(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const d=this.sourceCaches[u];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const u in this.sourceCaches)this.sourceCaches[u].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,u,d,y){let b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,F=!1,T=!1;const k={};for(const O of this._order){const H=this._layers[O];if(H.type!=="symbol")continue;if(!k[H.source]){const se=this.sourceCaches[H.source];k[H.source]=se.getRenderableIds(!0).map(ge=>se.getTileByID(ge)).sort((ge,f)=>f.tileID.overscaledZ-ge.tileID.overscaledZ||(ge.tileID.isLessThan(f.tileID)?-1:1))}const K=this.crossTileSymbolIndex.addLayer(H,k[H.source],n.center.lng);F=F||K}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.h.now(),n.zoom))&&(this.pauseablePlacement=new qn(n,this.map.terrain,this._order,b,u,d,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.h.now()),T=!0),F&&this.pauseablePlacement.placement.setStale()),T||F)for(const O of this._order){const H=this._layers[O];H.type==="symbol"&&this.placement.updateLayerOpacities(H,k[H.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.h.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,u,d){this.imageManager.getImages(u.icons,d),this._updateTilesForChangedImages();const y=this.sourceCaches[u.source];y&&y.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(n,u,d){this.glyphManager.getGlyphs(u.stacks,d);const y=this.sourceCaches[u.source];y&&y.setDependencies(u.tileID.key,u.type,[""])}getResource(n,u,d){return a.m(u,d)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._checkLoaded(),n&&this._validate(a.y.glyphs,"glyphs",n,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,u){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},y=arguments.length>3?arguments[3]:void 0;this._checkLoaded();const b=[{id:n,url:u}],F=[...fe(this.stylesheet.sprite),...b];this._validate(a.y.sprite,"sprite",F,null,d)||(this.stylesheet.sprite=F,this._loadSprite(b,!0,y))}removeSprite(n){this._checkLoaded();const u=fe(this.stylesheet.sprite);if(u.find(d=>d.id===n)){if(this._spritesImagesIds[n])for(const d of this._spritesImagesIds[n])this.imageManager.removeImage(d),this._changedImages[d]=!0;u.splice(u.findIndex(d=>d.id===n),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return fe(this.stylesheet.sprite)}setSprite(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2?arguments[2]:void 0;this._checkLoaded(),n&&this._validate(a.y.sprite,"sprite",n,null,u)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,d):(this._unloadSprite(),d&&d(null)))}}Wr.registerForPluginStateChange=a.aK;var So=a.Q([{name:"a_pos",type:"Int16",components:2}]),Ta="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const mi={prelude:Zr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Zr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Zr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Zr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Zr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Zr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Zr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Zr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Zr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Zr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Zr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Zr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Zr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Zr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Zr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Zr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Zr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Zr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Zr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Zr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Zr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Zr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Zr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Zr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Zr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ta),terrainDepth:Zr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ta),terrainCoords:Zr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ta)};function Zr(v,n){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=n.match(/attribute ([\w]+) ([\w]+)/g),y=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=b?b.concat(y):y,T={};return{fragmentSource:v=v.replace(u,(k,O,H,K,se)=>(T[se]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${se}
varying ${H} ${K} ${se};
#else
uniform ${H} ${K} u_${se};
#endif
`:`
#ifdef HAS_UNIFORM_u_${se}
    ${H} ${K} ${se} = u_${se};
#endif
`)),vertexSource:n=n.replace(u,(k,O,H,K,se)=>{const ge=K==="float"?"vec2":"vec4",f=se.match(/color/)?"color":ge;return T[se]?O==="define"?`
#ifndef HAS_UNIFORM_u_${se}
uniform lowp float u_${se}_t;
attribute ${H} ${ge} a_${se};
varying ${H} ${K} ${se};
#else
uniform ${H} ${K} u_${se};
#endif
`:f==="vec4"?`
#ifndef HAS_UNIFORM_u_${se}
    ${se} = a_${se};
#else
    ${H} ${K} ${se} = u_${se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${se}
    ${se} = unpack_mix_${f}(a_${se}, u_${se}_t);
#else
    ${H} ${K} ${se} = u_${se};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${se}
uniform lowp float u_${se}_t;
attribute ${H} ${ge} a_${se};
#else
uniform ${H} ${K} u_${se};
#endif
`:f==="vec4"?`
#ifndef HAS_UNIFORM_u_${se}
    ${H} ${K} ${se} = a_${se};
#else
    ${H} ${K} ${se} = u_${se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${se}
    ${H} ${K} ${se} = unpack_mix_${f}(a_${se}, u_${se}_t);
#else
    ${H} ${K} ${se} = u_${se};
#endif
`}),staticAttributes:d,staticUniforms:F}}class Ua{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,u,d,y,b,F,T,k,O){this.context=n;let H=this.boundPaintVertexBuffers.length!==y.length;for(let K=0;!H&&K<y.length;K++)this.boundPaintVertexBuffers[K]!==y[K]&&(H=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==d||H||this.boundIndexBuffer!==b||this.boundVertexOffset!==F||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==k||this.boundDynamicVertexBuffer3!==O?this.freshBind(u,d,y,b,F,T,k,O):(n.bindVertexArray.set(this.vao),T&&T.bind(),b&&b.dynamicDraw&&b.bind(),k&&k.bind(),O&&O.bind())}freshBind(n,u,d,y,b,F,T,k){const O=n.numAttributes,H=this.context,K=H.gl;this.vao&&this.destroy(),this.vao=H.createVertexArray(),H.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=y,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=F,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=k,u.enableAttributes(K,n);for(const se of d)se.enableAttributes(K,n);F&&F.enableAttributes(K,n),T&&T.enableAttributes(K,n),k&&k.enableAttributes(K,n),u.bind(),u.setVertexAttribPointers(K,n,b);for(const se of d)se.bind(),se.setVertexAttribPointers(K,n,b);F&&(F.bind(),F.setVertexAttribPointers(K,n,b)),y&&y.bind(),T&&(T.bind(),T.setVertexAttribPointers(K,n,b)),k&&(k.bind(),k.setVertexAttribPointers(K,n,b)),H.currentNumAttributes=O}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function ci(v){const n=[];for(let u=0;u<v.length;u++){if(v[u]===null)continue;const d=v[u].split(" ");n.push(d.pop())}return n}class Pa{constructor(n,u,d,y,b,F){const T=n.gl;this.program=T.createProgram();const k=ci(u.staticAttributes),O=d?d.getBinderAttributes():[],H=k.concat(O),K=mi.prelude.staticUniforms?ci(mi.prelude.staticUniforms):[],se=u.staticUniforms?ci(u.staticUniforms):[],ge=d?d.getBinderUniforms():[],f=K.concat(se).concat(ge),x=[];for(const Z of f)x.indexOf(Z)<0&&x.push(Z);const S=d?d.defines():[];b&&S.push("#define OVERDRAW_INSPECTOR;"),F&&S.push("#define TERRAIN3D;");const Q=S.concat(mi.prelude.fragmentSource,u.fragmentSource).join(`
`),R=S.concat(mi.prelude.vertexSource,u.vertexSource).join(`
`),N=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(N,Q),T.compileShader(N),!T.getShaderParameter(N,T.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${T.getShaderInfoLog(N)}`);T.attachShader(this.program,N);const z=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(z,R),T.compileShader(z),!T.getShaderParameter(z,T.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${T.getShaderInfoLog(z)}`);T.attachShader(this.program,z),this.attributes={};const $={};this.numAttributes=H.length;for(let Z=0;Z<this.numAttributes;Z++)H[Z]&&(T.bindAttribLocation(this.program,Z,H[Z]),this.attributes[H[Z]]=Z);if(T.linkProgram(this.program),!T.getProgramParameter(this.program,T.LINK_STATUS))throw new Error(`Program failed to link: ${T.getProgramInfoLog(this.program)}`);T.deleteShader(z),T.deleteShader(N);for(let Z=0;Z<x.length;Z++){const re=x[Z];if(re&&!$[re]){const de=T.getUniformLocation(this.program,re);de&&($[re]=de)}}this.fixedUniforms=y(n,$),this.terrainUniforms=((Z,re)=>({u_depth:new a.aL(Z,re.u_depth),u_terrain:new a.aL(Z,re.u_terrain),u_terrain_dim:new a.aM(Z,re.u_terrain_dim),u_terrain_matrix:new a.aN(Z,re.u_terrain_matrix),u_terrain_unpack:new a.aO(Z,re.u_terrain_unpack),u_terrain_exaggeration:new a.aM(Z,re.u_terrain_exaggeration)}))(n,$),this.binderUniforms=d?d.getUniforms(n,$):[]}draw(n,u,d,y,b,F,T,k,O,H,K,se,ge,f,x,S,Q,R){const N=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(d),n.setStencilMode(y),n.setColorMode(b),n.setCullFace(F),k){n.activeTexture.set(N.TEXTURE2),N.bindTexture(N.TEXTURE_2D,k.depthTexture),n.activeTexture.set(N.TEXTURE3),N.bindTexture(N.TEXTURE_2D,k.texture);for(const $ in this.terrainUniforms)this.terrainUniforms[$].set(k[$])}for(const $ in this.fixedUniforms)this.fixedUniforms[$].set(T[$]);x&&x.setUniforms(n,this.binderUniforms,ge,{zoom:f});let z=0;switch(u){case N.LINES:z=2;break;case N.TRIANGLES:z=3;break;case N.LINE_STRIP:z=1}for(const $ of se.get()){const Z=$.vaos||($.vaos={});(Z[O]||(Z[O]=new Ua)).bind(n,this,H,x?x.getPaintVertexBuffers():[],K,$.vertexOffset,S,Q,R),N.drawElements(u,$.primitiveLength*z,N.UNSIGNED_SHORT,$.primitiveOffset*z*2)}}}function Ci(v,n,u){const d=1/Oe(u,1,n.transform.tileZoom),y=Math.pow(2,u.tileID.overscaledZ),b=u.tileSize*Math.pow(2,n.transform.tileZoom)/y,F=b*(u.tileID.canonical.x+u.tileID.wrap*y),T=b*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[d,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[F>>16,T>>16],u_pixel_coord_lower:[65535&F,65535&T]}}const Eo=(v,n,u,d)=>{const y=n.style.light,b=y.properties.get("position"),F=[b.x,b.y,b.z],T=function(){var O=new a.A(9);return a.A!=Float32Array&&(O[1]=0,O[2]=0,O[3]=0,O[5]=0,O[6]=0,O[7]=0),O[0]=1,O[4]=1,O[8]=1,O}();y.properties.get("anchor")==="viewport"&&function(O,H){var K=Math.sin(H),se=Math.cos(H);O[0]=se,O[1]=K,O[2]=0,O[3]=-K,O[4]=se,O[5]=0,O[6]=0,O[7]=0,O[8]=1}(T,-n.transform.angle),function(O,H,K){var se=H[0],ge=H[1],f=H[2];O[0]=se*K[0]+ge*K[3]+f*K[6],O[1]=se*K[1]+ge*K[4]+f*K[7],O[2]=se*K[2]+ge*K[5]+f*K[8]}(F,F,T);const k=y.properties.get("color");return{u_matrix:v,u_lightpos:F,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+u,u_opacity:d}},Zs=(v,n,u,d,y,b,F)=>a.e(Eo(v,n,u,d),Ci(b,n,F),{u_height_factor:-Math.pow(2,y.overscaledZ)/F.tileSize/8}),Zl=v=>({u_matrix:v}),vA=(v,n,u,d)=>a.e(Zl(v),Ci(u,n,d)),_A=(v,n)=>({u_matrix:v,u_world:n}),Fo=(v,n,u,d,y)=>a.e(vA(v,n,u,d),{u_world:y}),pa=(v,n,u,d)=>{const y=v.transform;let b,F;if(d.paint.get("circle-pitch-alignment")==="map"){const T=Oe(u,1,y.zoom);b=!0,F=[T,T]}else b=!1,F=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(n.posMatrix,u,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:F}},Io=(v,n,u)=>{const d=Oe(u,1,n.zoom),y=Math.pow(2,n.zoom-u.tileID.overscaledZ),b=u.tileID.overscaleFactor();return{u_matrix:v,u_camera_to_center_distance:n.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[n.pixelsToGLUnits[0]/(d*y),n.pixelsToGLUnits[1]/(d*y)],u_overscale_factor:b}},Lo=function(v,n){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return{u_matrix:v,u_color:n,u_overlay:0,u_overlay_scale:u}},Xl=v=>({u_matrix:v}),Vc=(v,n,u,d)=>({u_matrix:v,u_extrude_scale:Oe(n,1,u),u_intensity:d});function Xs(v,n){const u=Math.pow(2,n.canonical.z),d=n.canonical.y;return[new a.U(0,d/u).toLngLat().lat,new a.U(0,(d+1)/u).toLngLat().lat]}const Wa=(v,n,u,d)=>{const y=v.transform;return{u_matrix:Uo(v,n,u,d),u_ratio:1/Oe(n,1,y.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},To=(v,n,u,d,y)=>a.e(Wa(v,n,u,y),{u_image:0,u_image_height:d}),Yl=(v,n,u,d,y)=>{const b=v.transform,F=Jl(n,b);return{u_matrix:Uo(v,n,u,y),u_texsize:n.imageAtlasTexture.size,u_ratio:1/Oe(n,1,b.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[F,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},gn=(v,n,u,d,y,b)=>{const F=v.lineAtlas,T=Jl(n,v.transform),k=u.layout.get("line-cap")==="round",O=F.getDash(d.from,k),H=F.getDash(d.to,k),K=O.width*y.fromScale,se=H.width*y.toScale;return a.e(Wa(v,n,u,b),{u_patternscale_a:[T/K,-O.height/2],u_patternscale_b:[T/se,-H.height/2],u_sdfgamma:F.width/(256*Math.min(K,se)*v.pixelRatio)/2,u_image:0,u_tex_y_a:O.y,u_tex_y_b:H.y,u_mix:y.t})};function Jl(v,n){return 1/Oe(v,1,n.tileZoom)}function Uo(v,n,u,d){return v.translatePosMatrix(d?d.posMatrix:n.tileID.posMatrix,n,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Ur=(v,n,u,d,y)=>{return{u_matrix:v,u_tl_parent:n,u_scale_parent:u,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(F=y.paint.get("raster-saturation"),F>0?1-1/(1.001-F):-F),u_contrast_factor:(b=y.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:ec(y.paint.get("raster-hue-rotate"))};var b,F};function ec(v){v*=Math.PI/180;const n=Math.sin(v),u=Math.cos(v);return[(2*u+1)/3,(-Math.sqrt(3)*n-u+1)/3,(Math.sqrt(3)*n-u+1)/3]}const al=(v,n,u,d,y,b,F,T,k,O)=>{const H=y.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:H.cameraToCenterDistance,u_pitch:H.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:H.width/H.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:F,u_coord_matrix:T,u_is_text:+k,u_pitch_with_map:+d,u_texsize:O,u_texture:0}},Fs=(v,n,u,d,y,b,F,T,k,O,H)=>{const K=y.transform;return a.e(al(v,n,u,d,y,b,F,T,k,O),{u_gamma_scale:d?Math.cos(K._pitch)*K.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:+H})},da=(v,n,u,d,y,b,F,T,k,O)=>a.e(Fs(v,n,u,d,y,b,F,T,!0,k,!0),{u_texsize_icon:O,u_texture_icon:1}),Po=(v,n,u)=>({u_matrix:v,u_opacity:n,u_color:u}),mn=(v,n,u,d,y,b)=>a.e(function(F,T,k,O){const H=k.imageManager.getPattern(F.from.toString()),K=k.imageManager.getPattern(F.to.toString()),{width:se,height:ge}=k.imageManager.getPixelSize(),f=Math.pow(2,O.tileID.overscaledZ),x=O.tileSize*Math.pow(2,k.transform.tileZoom)/f,S=x*(O.tileID.canonical.x+O.tileID.wrap*f),Q=x*O.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:H.tl,u_pattern_br_a:H.br,u_pattern_tl_b:K.tl,u_pattern_br_b:K.br,u_texsize:[se,ge],u_mix:T.t,u_pattern_size_a:H.displaySize,u_pattern_size_b:K.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/Oe(O,1,k.transform.tileZoom),u_pixel_coord_upper:[S>>16,Q>>16],u_pixel_coord_lower:[65535&S,65535&Q]}}(d,b,u,y),{u_matrix:v,u_opacity:n}),Za={fillExtrusion:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_lightpos:new a.aP(v,n.u_lightpos),u_lightintensity:new a.aM(v,n.u_lightintensity),u_lightcolor:new a.aP(v,n.u_lightcolor),u_vertical_gradient:new a.aM(v,n.u_vertical_gradient),u_opacity:new a.aM(v,n.u_opacity)}),fillExtrusionPattern:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_lightpos:new a.aP(v,n.u_lightpos),u_lightintensity:new a.aM(v,n.u_lightintensity),u_lightcolor:new a.aP(v,n.u_lightcolor),u_vertical_gradient:new a.aM(v,n.u_vertical_gradient),u_height_factor:new a.aM(v,n.u_height_factor),u_image:new a.aL(v,n.u_image),u_texsize:new a.aQ(v,n.u_texsize),u_pixel_coord_upper:new a.aQ(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(v,n.u_pixel_coord_lower),u_scale:new a.aP(v,n.u_scale),u_fade:new a.aM(v,n.u_fade),u_opacity:new a.aM(v,n.u_opacity)}),fill:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix)}),fillPattern:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_image:new a.aL(v,n.u_image),u_texsize:new a.aQ(v,n.u_texsize),u_pixel_coord_upper:new a.aQ(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(v,n.u_pixel_coord_lower),u_scale:new a.aP(v,n.u_scale),u_fade:new a.aM(v,n.u_fade)}),fillOutline:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_world:new a.aQ(v,n.u_world)}),fillOutlinePattern:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_world:new a.aQ(v,n.u_world),u_image:new a.aL(v,n.u_image),u_texsize:new a.aQ(v,n.u_texsize),u_pixel_coord_upper:new a.aQ(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(v,n.u_pixel_coord_lower),u_scale:new a.aP(v,n.u_scale),u_fade:new a.aM(v,n.u_fade)}),circle:(v,n)=>({u_camera_to_center_distance:new a.aM(v,n.u_camera_to_center_distance),u_scale_with_map:new a.aL(v,n.u_scale_with_map),u_pitch_with_map:new a.aL(v,n.u_pitch_with_map),u_extrude_scale:new a.aQ(v,n.u_extrude_scale),u_device_pixel_ratio:new a.aM(v,n.u_device_pixel_ratio),u_matrix:new a.aN(v,n.u_matrix)}),collisionBox:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_camera_to_center_distance:new a.aM(v,n.u_camera_to_center_distance),u_pixels_to_tile_units:new a.aM(v,n.u_pixels_to_tile_units),u_extrude_scale:new a.aQ(v,n.u_extrude_scale),u_overscale_factor:new a.aM(v,n.u_overscale_factor)}),collisionCircle:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_inv_matrix:new a.aN(v,n.u_inv_matrix),u_camera_to_center_distance:new a.aM(v,n.u_camera_to_center_distance),u_viewport_size:new a.aQ(v,n.u_viewport_size)}),debug:(v,n)=>({u_color:new a.aR(v,n.u_color),u_matrix:new a.aN(v,n.u_matrix),u_overlay:new a.aL(v,n.u_overlay),u_overlay_scale:new a.aM(v,n.u_overlay_scale)}),clippingMask:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix)}),heatmap:(v,n)=>({u_extrude_scale:new a.aM(v,n.u_extrude_scale),u_intensity:new a.aM(v,n.u_intensity),u_matrix:new a.aN(v,n.u_matrix)}),heatmapTexture:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_world:new a.aQ(v,n.u_world),u_image:new a.aL(v,n.u_image),u_color_ramp:new a.aL(v,n.u_color_ramp),u_opacity:new a.aM(v,n.u_opacity)}),hillshade:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_image:new a.aL(v,n.u_image),u_latrange:new a.aQ(v,n.u_latrange),u_light:new a.aQ(v,n.u_light),u_shadow:new a.aR(v,n.u_shadow),u_highlight:new a.aR(v,n.u_highlight),u_accent:new a.aR(v,n.u_accent)}),hillshadePrepare:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_image:new a.aL(v,n.u_image),u_dimension:new a.aQ(v,n.u_dimension),u_zoom:new a.aM(v,n.u_zoom),u_unpack:new a.aO(v,n.u_unpack)}),line:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_ratio:new a.aM(v,n.u_ratio),u_device_pixel_ratio:new a.aM(v,n.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(v,n.u_units_to_pixels)}),lineGradient:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_ratio:new a.aM(v,n.u_ratio),u_device_pixel_ratio:new a.aM(v,n.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(v,n.u_units_to_pixels),u_image:new a.aL(v,n.u_image),u_image_height:new a.aM(v,n.u_image_height)}),linePattern:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_texsize:new a.aQ(v,n.u_texsize),u_ratio:new a.aM(v,n.u_ratio),u_device_pixel_ratio:new a.aM(v,n.u_device_pixel_ratio),u_image:new a.aL(v,n.u_image),u_units_to_pixels:new a.aQ(v,n.u_units_to_pixels),u_scale:new a.aP(v,n.u_scale),u_fade:new a.aM(v,n.u_fade)}),lineSDF:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_ratio:new a.aM(v,n.u_ratio),u_device_pixel_ratio:new a.aM(v,n.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(v,n.u_units_to_pixels),u_patternscale_a:new a.aQ(v,n.u_patternscale_a),u_patternscale_b:new a.aQ(v,n.u_patternscale_b),u_sdfgamma:new a.aM(v,n.u_sdfgamma),u_image:new a.aL(v,n.u_image),u_tex_y_a:new a.aM(v,n.u_tex_y_a),u_tex_y_b:new a.aM(v,n.u_tex_y_b),u_mix:new a.aM(v,n.u_mix)}),raster:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_tl_parent:new a.aQ(v,n.u_tl_parent),u_scale_parent:new a.aM(v,n.u_scale_parent),u_buffer_scale:new a.aM(v,n.u_buffer_scale),u_fade_t:new a.aM(v,n.u_fade_t),u_opacity:new a.aM(v,n.u_opacity),u_image0:new a.aL(v,n.u_image0),u_image1:new a.aL(v,n.u_image1),u_brightness_low:new a.aM(v,n.u_brightness_low),u_brightness_high:new a.aM(v,n.u_brightness_high),u_saturation_factor:new a.aM(v,n.u_saturation_factor),u_contrast_factor:new a.aM(v,n.u_contrast_factor),u_spin_weights:new a.aP(v,n.u_spin_weights)}),symbolIcon:(v,n)=>({u_is_size_zoom_constant:new a.aL(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(v,n.u_is_size_feature_constant),u_size_t:new a.aM(v,n.u_size_t),u_size:new a.aM(v,n.u_size),u_camera_to_center_distance:new a.aM(v,n.u_camera_to_center_distance),u_pitch:new a.aM(v,n.u_pitch),u_rotate_symbol:new a.aL(v,n.u_rotate_symbol),u_aspect_ratio:new a.aM(v,n.u_aspect_ratio),u_fade_change:new a.aM(v,n.u_fade_change),u_matrix:new a.aN(v,n.u_matrix),u_label_plane_matrix:new a.aN(v,n.u_label_plane_matrix),u_coord_matrix:new a.aN(v,n.u_coord_matrix),u_is_text:new a.aL(v,n.u_is_text),u_pitch_with_map:new a.aL(v,n.u_pitch_with_map),u_texsize:new a.aQ(v,n.u_texsize),u_texture:new a.aL(v,n.u_texture)}),symbolSDF:(v,n)=>({u_is_size_zoom_constant:new a.aL(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(v,n.u_is_size_feature_constant),u_size_t:new a.aM(v,n.u_size_t),u_size:new a.aM(v,n.u_size),u_camera_to_center_distance:new a.aM(v,n.u_camera_to_center_distance),u_pitch:new a.aM(v,n.u_pitch),u_rotate_symbol:new a.aL(v,n.u_rotate_symbol),u_aspect_ratio:new a.aM(v,n.u_aspect_ratio),u_fade_change:new a.aM(v,n.u_fade_change),u_matrix:new a.aN(v,n.u_matrix),u_label_plane_matrix:new a.aN(v,n.u_label_plane_matrix),u_coord_matrix:new a.aN(v,n.u_coord_matrix),u_is_text:new a.aL(v,n.u_is_text),u_pitch_with_map:new a.aL(v,n.u_pitch_with_map),u_texsize:new a.aQ(v,n.u_texsize),u_texture:new a.aL(v,n.u_texture),u_gamma_scale:new a.aM(v,n.u_gamma_scale),u_device_pixel_ratio:new a.aM(v,n.u_device_pixel_ratio),u_is_halo:new a.aL(v,n.u_is_halo)}),symbolTextAndIcon:(v,n)=>({u_is_size_zoom_constant:new a.aL(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(v,n.u_is_size_feature_constant),u_size_t:new a.aM(v,n.u_size_t),u_size:new a.aM(v,n.u_size),u_camera_to_center_distance:new a.aM(v,n.u_camera_to_center_distance),u_pitch:new a.aM(v,n.u_pitch),u_rotate_symbol:new a.aL(v,n.u_rotate_symbol),u_aspect_ratio:new a.aM(v,n.u_aspect_ratio),u_fade_change:new a.aM(v,n.u_fade_change),u_matrix:new a.aN(v,n.u_matrix),u_label_plane_matrix:new a.aN(v,n.u_label_plane_matrix),u_coord_matrix:new a.aN(v,n.u_coord_matrix),u_is_text:new a.aL(v,n.u_is_text),u_pitch_with_map:new a.aL(v,n.u_pitch_with_map),u_texsize:new a.aQ(v,n.u_texsize),u_texsize_icon:new a.aQ(v,n.u_texsize_icon),u_texture:new a.aL(v,n.u_texture),u_texture_icon:new a.aL(v,n.u_texture_icon),u_gamma_scale:new a.aM(v,n.u_gamma_scale),u_device_pixel_ratio:new a.aM(v,n.u_device_pixel_ratio),u_is_halo:new a.aL(v,n.u_is_halo)}),background:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_opacity:new a.aM(v,n.u_opacity),u_color:new a.aR(v,n.u_color)}),backgroundPattern:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_opacity:new a.aM(v,n.u_opacity),u_image:new a.aL(v,n.u_image),u_pattern_tl_a:new a.aQ(v,n.u_pattern_tl_a),u_pattern_br_a:new a.aQ(v,n.u_pattern_br_a),u_pattern_tl_b:new a.aQ(v,n.u_pattern_tl_b),u_pattern_br_b:new a.aQ(v,n.u_pattern_br_b),u_texsize:new a.aQ(v,n.u_texsize),u_mix:new a.aM(v,n.u_mix),u_pattern_size_a:new a.aQ(v,n.u_pattern_size_a),u_pattern_size_b:new a.aQ(v,n.u_pattern_size_b),u_scale_a:new a.aM(v,n.u_scale_a),u_scale_b:new a.aM(v,n.u_scale_b),u_pixel_coord_upper:new a.aQ(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(v,n.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aM(v,n.u_tile_units_to_pixels)}),terrain:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_texture:new a.aL(v,n.u_texture),u_ele_delta:new a.aM(v,n.u_ele_delta)}),terrainDepth:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_ele_delta:new a.aM(v,n.u_ele_delta)}),terrainCoords:(v,n)=>({u_matrix:new a.aN(v,n.u_matrix),u_texture:new a.aL(v,n.u_texture),u_terrain_coords_id:new a.aM(v,n.u_terrain_coords_id),u_ele_delta:new a.aM(v,n.u_ele_delta)})};class wA{constructor(n,u,d){this.context=n;const y=n.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Mo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class bA{constructor(n,u,d,y){this.length=u.length,this.attributes=d,this.itemSize=u.bytesPerElement,this.dynamicDraw=y,this.context=n;const b=n.gl;this.buffer=b.createBuffer(),n.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,u){for(let d=0;d<this.attributes.length;d++){const y=u.attributes[this.attributes[d].name];y!==void 0&&n.enableVertexAttribArray(y)}}setVertexAttribPointers(n,u,d){for(let y=0;y<this.attributes.length;y++){const b=this.attributes[y],F=u.attributes[b.name];F!==void 0&&n.vertexAttribPointer(F,b.components,n[Mo[b.type]],!1,this.itemSize,b.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const fa=new WeakMap;function Kn(v){var n;if(fa.has(v))return fa.get(v);{const u=(n=v.getParameter(v.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return fa.set(v,u),u}}class Qr{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class xA extends Qr{getDefault(){return a.aT.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Xi extends Qr{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class yn extends Qr{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Xa extends Qr{getDefault(){return[!0,!0,!0,!0]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Qo extends Qr{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class ko extends Qr{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class BA extends Qr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const u=this.current;(n.func!==u.func||n.ref!==u.ref||n.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class CA extends Qr{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Is extends Qr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=n,this.dirty=!1}}class ga extends Qr{getDefault(){return[0,1]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class ol extends Qr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=n,this.dirty=!1}}class Ys extends Qr{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Ls extends Qr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.BLEND):u.disable(u.BLEND),this.current=n,this.dirty=!1}}class SA extends Qr{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class Ts extends Qr{getDefault(){return a.aT.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class jc extends Qr{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class EA extends Qr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=n,this.dirty=!1}}class Gc extends Qr{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Al extends Qr{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class ll extends Qr{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class tc extends Qr{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class Ya extends Qr{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Ja extends Qr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Do extends Qr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class FA extends Qr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class eo extends Qr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class No extends Qr{getDefault(){return null}set(n){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class to extends Qr{getDefault(){return null}set(n){var u;if(n===this.current&&!this.dirty)return;const d=this.gl;Kn(d)?d.bindVertexArray(n):(u=d.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class Oo extends Qr{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Wn extends Qr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class IA extends Qr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class P extends Qr{constructor(n,u){super(n),this.context=n,this.parent=u}getDefault(){return null}}class J extends P{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Ce extends P{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class qe extends P{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class $e{constructor(n,u,d,y,b){this.context=n,this.width=u,this.height=d;const F=n.gl,T=this.framebuffer=F.createFramebuffer();if(this.colorAttachment=new J(n,T),y)this.depthAttachment=b?new qe(n,T):new Ce(n,T);else if(b)throw new Error("Stencil cannot be setted without depth");if(F.checkFramebufferStatus(F.FRAMEBUFFER)!==F.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,u=this.colorAttachment.get();if(u&&n.deleteTexture(u),this.depthAttachment){const d=this.depthAttachment.get();d&&n.deleteRenderbuffer(d)}n.deleteFramebuffer(this.framebuffer)}}class ct{constructor(n,u,d){this.blendFunction=n,this.blendColor=u,this.mask=d}}ct.Replace=[1,0],ct.disabled=new ct(ct.Replace,a.aT.transparent,[!1,!1,!1,!1]),ct.unblended=new ct(ct.Replace,a.aT.transparent,[!0,!0,!0,!0]),ct.alphaBlended=new ct([1,771],a.aT.transparent,[!0,!0,!0,!0]);class Tt{constructor(n){var u,d;if(this.gl=n,this.clearColor=new xA(this),this.clearDepth=new Xi(this),this.clearStencil=new yn(this),this.colorMask=new Xa(this),this.depthMask=new Qo(this),this.stencilMask=new ko(this),this.stencilFunc=new BA(this),this.stencilOp=new CA(this),this.stencilTest=new Is(this),this.depthRange=new ga(this),this.depthTest=new ol(this),this.depthFunc=new Ys(this),this.blend=new Ls(this),this.blendFunc=new SA(this),this.blendColor=new Ts(this),this.blendEquation=new jc(this),this.cullFace=new EA(this),this.cullFaceSide=new Gc(this),this.frontFace=new Al(this),this.program=new ll(this),this.activeTexture=new tc(this),this.viewport=new Ya(this),this.bindFramebuffer=new Ja(this),this.bindRenderbuffer=new Do(this),this.bindTexture=new FA(this),this.bindVertexBuffer=new eo(this),this.bindElementBuffer=new No(this),this.bindVertexArray=new to(this),this.pixelStoreUnpack=new Oo(this),this.pixelStoreUnpackPremultiplyAlpha=new Wn(this),this.pixelStoreUnpackFlipY=new IA(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),Kn(n)){this.HALF_FLOAT=n.HALF_FLOAT;const y=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=n.RGBA16F)!==null&&u!==void 0?u:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(d=n.RGB16F)!==null&&d!==void 0?d:y==null?void 0:y.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const y=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,u){return new wA(this,n,u)}createVertexBuffer(n,u,d){return new bA(this,n,u,d)}createRenderbuffer(n,u,d){const y=this.gl,b=y.createRenderbuffer();return this.bindRenderbuffer.set(b),y.renderbufferStorage(y.RENDERBUFFER,n,u,d),this.bindRenderbuffer.set(null),b}createFramebuffer(n,u,d,y){return new $e(this,n,u,d,y)}clear(n){let{color:u,depth:d,stencil:y}=n;const b=this.gl;let F=0;u&&(F|=b.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(F|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),y!==void 0&&(F|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),b.clear(F)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){a.aG(n.blendFunction,ct.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return Kn(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var u;return Kn(this.gl)?this.gl.deleteVertexArray(n):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}class wt{constructor(n,u,d){this.func=n,this.mask=u,this.range=d}}wt.ReadOnly=!1,wt.ReadWrite=!0,wt.disabled=new wt(519,wt.ReadOnly,[0,1]);const mr=7680;class ar{constructor(n,u,d,y,b,F){this.test=n,this.ref=u,this.mask=d,this.fail=y,this.depthFail=b,this.pass=F}}ar.disabled=new ar({func:519,mask:0},0,0,mr,mr,mr);class cr{constructor(n,u,d){this.enable=n,this.mode=u,this.frontFace=d}}let $r;function Li(v,n,u,d,y,b,F){const T=v.context,k=T.gl,O=v.useProgram("collisionBox"),H=[];let K=0,se=0;for(let N=0;N<d.length;N++){const z=d[N],$=n.getTile(z),Z=$.getBucket(u);if(!Z)continue;let re=z.posMatrix;y[0]===0&&y[1]===0||(re=v.translatePosMatrix(z.posMatrix,$,y,b));const de=F?Z.textCollisionBox:Z.iconCollisionBox,we=Z.collisionCircleArray;if(we.length>0){const Le=a.Z(),Qe=re;a.aU(Le,Z.placementInvProjMatrix,v.transform.glCoordMatrix),a.aU(Le,Le,Z.placementViewportMatrix),H.push({circleArray:we,circleOffset:se,transform:Qe,invTransform:Le,coord:z}),K+=we.length/4,se=K}de&&O.draw(T,k.LINES,wt.disabled,ar.disabled,v.colorModeForRenderPass(),cr.disabled,Io(re,v.transform,$),v.style.map.terrain&&v.style.map.terrain.getTerrainData(z),u.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,null,v.transform.zoom,null,null,de.collisionVertexBuffer)}if(!F||!H.length)return;const ge=v.useProgram("collisionCircle"),f=new a.aV;f.resize(4*K),f._trim();let x=0;for(const N of H)for(let z=0;z<N.circleArray.length/4;z++){const $=4*z,Z=N.circleArray[$+0],re=N.circleArray[$+1],de=N.circleArray[$+2],we=N.circleArray[$+3];f.emplace(x++,Z,re,de,we,0),f.emplace(x++,Z,re,de,we,1),f.emplace(x++,Z,re,de,we,2),f.emplace(x++,Z,re,de,we,3)}(!$r||$r.length<2*K)&&($r=function(N){const z=2*N,$=new a.aX;$.resize(z),$._trim();for(let Z=0;Z<z;Z++){const re=6*Z;$.uint16[re+0]=4*Z+0,$.uint16[re+1]=4*Z+1,$.uint16[re+2]=4*Z+2,$.uint16[re+3]=4*Z+2,$.uint16[re+4]=4*Z+3,$.uint16[re+5]=4*Z+0}return $}(K));const S=T.createIndexBuffer($r,!0),Q=T.createVertexBuffer(f,a.aW.members,!0);for(const N of H){const z={u_matrix:N.transform,u_inv_matrix:N.invTransform,u_camera_to_center_distance:(R=v.transform).cameraToCenterDistance,u_viewport_size:[R.width,R.height]};ge.draw(T,k.TRIANGLES,wt.disabled,ar.disabled,v.colorModeForRenderPass(),cr.disabled,z,v.style.map.terrain&&v.style.map.terrain.getTerrainData(N.coord),u.id,Q,S,a.S.simpleSegment(0,2*N.circleOffset,N.circleArray.length,N.circleArray.length/2),null,v.transform.zoom,null,null,null)}var R;Q.destroy(),S.destroy()}cr.disabled=new cr(!1,1029,2305),cr.backCCW=new cr(!0,1029,2305);const ki=a.ao(new Float32Array(16));function Di(v,n,u,d,y,b){const{horizontalAlign:F,verticalAlign:T}=a.au(v);return new a.P((-(F-.5)*n/y+d[0])*b,(-(T-.5)*u/y+d[1])*b)}function Yi(v,n,u,d,y,b,F,T,k,O,H){const K=v.text.placedSymbolArray,se=v.text.dynamicLayoutVertexArray,ge=v.icon.dynamicLayoutVertexArray,f={};se.clear();for(let x=0;x<K.length;x++){const S=K.get(x),Q=S.hidden||!S.crossTileID||v.allowVerticalPlacement&&!S.placedOrientation?null:d[S.crossTileID];if(Q){const R=new a.P(S.anchorX,S.anchorY),N=Tr(R,u?F:b,H),z=Dr(y.cameraToCenterDistance,N.signedDistanceFromCamera);let $=a.aj(v.textSizeData,k,S)*z/a.ap;u&&($*=v.tilePixelRatio/T);const{width:Z,height:re,anchor:de,textOffset:we,textBoxScale:Le}=Q,Qe=Di(de,Z,re,we,Le,$),ut=u?Tr(R.add(Qe),b,H).point:N.point.add(n?Qe.rotate(-y.angle):Qe),He=v.allowVerticalPlacement&&S.placedOrientation===a.ai.vertical?Math.PI/2:0;for(let Fe=0;Fe<S.numGlyphs;Fe++)a.ak(se,ut,He);O&&S.associatedIconIndex>=0&&(f[S.associatedIconIndex]={shiftedAnchor:ut,angle:He})}else le(S.numGlyphs,se)}if(O){ge.clear();const x=v.icon.placedSymbolArray;for(let S=0;S<x.length;S++){const Q=x.get(S);if(Q.hidden)le(Q.numGlyphs,ge);else{const R=f[S];if(R)for(let N=0;N<Q.numGlyphs;N++)a.ak(ge,R.shiftedAnchor,R.angle);else le(Q.numGlyphs,ge)}}v.icon.dynamicLayoutVertexBuffer.updateData(ge)}v.text.dynamicLayoutVertexBuffer.updateData(se)}function qi(v,n,u){return u.iconsInText&&n?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function Zn(v,n,u,d,y,b,F,T,k,O,H,K){const se=v.context,ge=se.gl,f=v.transform,x=T==="map",S=k==="map",Q=T!=="viewport"&&u.layout.get("symbol-placement")!=="point",R=x&&!S&&!Q,N=!u.layout.get("symbol-sort-key").isConstant();let z=!1;const $=v.depthModeForSublayer(0,wt.ReadOnly),Z=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),re=[];for(const de of d){const we=n.getTile(de),Le=we.getBucket(u);if(!Le)continue;const Qe=y?Le.text:Le.icon;if(!Qe||!Qe.segments.get().length||!Qe.hasVisibleVertices)continue;const ut=Qe.programConfigurations.get(u.id),He=y||Le.sdfIcons,Fe=y?Le.textSizeData:Le.iconSizeData,Ie=S||f.pitch!==0,dt=v.useProgram(qi(He,y,Le),ut),pt=a.ah(Fe,f.zoom),at=v.style.map.terrain&&v.style.map.terrain.getTerrainData(de);let _t,Ft,Wt,kt,Er=[0,0],Fr=null;if(y)Ft=we.glyphAtlasTexture,Wt=ge.LINEAR,_t=we.glyphAtlasTexture.size,Le.iconsInText&&(Er=we.imageAtlasTexture.size,Fr=we.imageAtlasTexture,kt=Ie||v.options.rotating||v.options.zooming||Fe.kind==="composite"||Fe.kind==="camera"?ge.LINEAR:ge.NEAREST);else{const li=u.layout.get("icon-size").constantOr(0)!==1||Le.iconsNeedLinear;Ft=we.imageAtlasTexture,Wt=He||v.options.rotating||v.options.zooming||li||Ie?ge.LINEAR:ge.NEAREST,_t=we.imageAtlasTexture.size}const kr=Oe(we,1,v.transform.zoom),pr=vt(de.posMatrix,S,x,v.transform,kr),ei=Cr(de.posMatrix,S,x,v.transform,kr),Xr=Z&&Le.hasTextData(),Ir=u.layout.get("icon-text-fit")!=="none"&&Xr&&Le.hasIconData();if(Q){const li=v.style.map.terrain?(pi,ri)=>v.style.map.terrain.getElevation(de,pi,ri):null,ti=u.layout.get("text-rotation-alignment")==="map";xt(Le,de.posMatrix,v,y,pr,ei,S,O,ti,li)}const Bi=v.translatePosMatrix(de.posMatrix,we,b,F),Ji=Q||y&&Z||Ir?ki:pr,si=v.translatePosMatrix(ei,we,b,F,!0),hi=He&&u.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let zr;zr=He?Le.iconsInText?da(Fe.kind,pt,R,S,v,Bi,Ji,si,_t,Er):Fs(Fe.kind,pt,R,S,v,Bi,Ji,si,y,_t,!0):al(Fe.kind,pt,R,S,v,Bi,Ji,si,y,_t);const en={program:dt,buffers:Qe,uniformValues:zr,atlasTexture:Ft,atlasTextureIcon:Fr,atlasInterpolation:Wt,atlasInterpolationIcon:kt,isSDF:He,hasHalo:hi};if(N&&Le.canOverlap){z=!0;const li=Qe.segments.get();for(const ti of li)re.push({segments:new a.S([ti]),sortKey:ti.sortKey,state:en,terrainData:at})}else re.push({segments:Qe.segments,sortKey:0,state:en,terrainData:at})}z&&re.sort((de,we)=>de.sortKey-we.sortKey);for(const de of re){const we=de.state;if(se.activeTexture.set(ge.TEXTURE0),we.atlasTexture.bind(we.atlasInterpolation,ge.CLAMP_TO_EDGE),we.atlasTextureIcon&&(se.activeTexture.set(ge.TEXTURE1),we.atlasTextureIcon&&we.atlasTextureIcon.bind(we.atlasInterpolationIcon,ge.CLAMP_TO_EDGE)),we.isSDF){const Le=we.uniformValues;we.hasHalo&&(Le.u_is_halo=1,Xn(we.buffers,de.segments,u,v,we.program,$,H,K,Le,de.terrainData)),Le.u_is_halo=0}Xn(we.buffers,de.segments,u,v,we.program,$,H,K,we.uniformValues,de.terrainData)}}function Xn(v,n,u,d,y,b,F,T,k,O){const H=d.context;y.draw(H,H.gl.TRIANGLES,b,F,T,cr.disabled,k,O,u.id,v.layoutVertexBuffer,v.indexBuffer,n,u.paint,d.transform.zoom,v.programConfigurations.get(u.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function As(v,n,u,d,y){if(!u||!d||!d.imageAtlas)return;const b=d.imageAtlas.patternPositions;let F=b[u.to.toString()],T=b[u.from.toString()];if(!F&&T&&(F=T),!T&&F&&(T=F),!F||!T){const k=y.getPaintProperty(n);F=b[k],T=b[k]}F&&T&&v.setConstantPatternPositions(F,T)}function ro(v,n,u,d,y,b,F){const T=v.context.gl,k="fill-pattern",O=u.paint.get(k),H=O&&O.constantOr(1),K=u.getCrossfadeParameters();let se,ge,f,x,S;F?(ge=H&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",se=T.LINES):(ge=H?"fillPattern":"fill",se=T.TRIANGLES);const Q=O.constantOr(null);for(const R of d){const N=n.getTile(R);if(H&&!N.patternsLoaded())continue;const z=N.getBucket(u);if(!z)continue;const $=z.programConfigurations.get(u.id),Z=v.useProgram(ge,$),re=v.style.map.terrain&&v.style.map.terrain.getTerrainData(R);H&&(v.context.activeTexture.set(T.TEXTURE0),N.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),$.updatePaintBuffers(K)),As($,k,Q,N,u);const de=re?R:null,we=v.translatePosMatrix(de?de.posMatrix:R.posMatrix,N,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(F){x=z.indexBuffer2,S=z.segments2;const Le=[T.drawingBufferWidth,T.drawingBufferHeight];f=ge==="fillOutlinePattern"&&H?Fo(we,v,K,N,Le):_A(we,Le)}else x=z.indexBuffer,S=z.segments,f=H?vA(we,v,K,N):Zl(we);Z.draw(v.context,se,y,v.stencilModeForClipping(R),b,cr.disabled,f,re,u.id,z.layoutVertexBuffer,x,S,u.paint,v.transform.zoom,$)}}function Ma(v,n,u,d,y,b,F){const T=v.context,k=T.gl,O="fill-extrusion-pattern",H=u.paint.get(O),K=H.constantOr(1),se=u.getCrossfadeParameters(),ge=u.paint.get("fill-extrusion-opacity"),f=H.constantOr(null);for(const x of d){const S=n.getTile(x),Q=S.getBucket(u);if(!Q)continue;const R=v.style.map.terrain&&v.style.map.terrain.getTerrainData(x),N=Q.programConfigurations.get(u.id),z=v.useProgram(K?"fillExtrusionPattern":"fillExtrusion",N);K&&(v.context.activeTexture.set(k.TEXTURE0),S.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),N.updatePaintBuffers(se)),As(N,O,f,S,u);const $=v.translatePosMatrix(x.posMatrix,S,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Z=u.paint.get("fill-extrusion-vertical-gradient"),re=K?Zs($,v,Z,ge,x,se,S):Eo($,v,Z,ge);z.draw(T,T.gl.TRIANGLES,y,b,F,cr.backCCW,re,R,u.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,u.paint,v.transform.zoom,N,v.style.map.terrain&&Q.centroidVertexBuffer)}}function cl(v,n,u,d,y,b,F){const T=v.context,k=T.gl,O=u.fbo;if(!O)return;const H=v.useProgram("hillshade"),K=v.style.map.terrain&&v.style.map.terrain.getTerrainData(n);T.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,O.colorAttachment.get()),H.draw(T,k.TRIANGLES,y,b,F,cr.disabled,((se,ge,f,x)=>{const S=f.paint.get("hillshade-shadow-color"),Q=f.paint.get("hillshade-highlight-color"),R=f.paint.get("hillshade-accent-color");let N=f.paint.get("hillshade-illumination-direction")*(Math.PI/180);f.paint.get("hillshade-illumination-anchor")==="viewport"&&(N-=se.transform.angle);const z=!se.options.moving;return{u_matrix:x?x.posMatrix:se.transform.calculatePosMatrix(ge.tileID.toUnwrapped(),z),u_image:0,u_latrange:Xs(0,ge.tileID),u_light:[f.paint.get("hillshade-exaggeration"),N],u_shadow:S,u_highlight:Q,u_accent:R}})(v,u,d,K?n:null),K,d.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function io(v,n,u,d,y,b){const F=v.context,T=F.gl,k=n.dem;if(k&&k.data){const O=k.dim,H=k.stride,K=k.getPixels();if(F.activeTexture.set(T.TEXTURE1),F.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||v.getTileTexture(H),n.demTexture){const ge=n.demTexture;ge.update(K,{premultiply:!1}),ge.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else n.demTexture=new Ke(F,K,T.RGBA,{premultiply:!1}),n.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);F.activeTexture.set(T.TEXTURE0);let se=n.fbo;if(!se){const ge=new Ke(F,{width:O,height:O,data:null},T.RGBA);ge.bind(T.LINEAR,T.CLAMP_TO_EDGE),se=n.fbo=F.createFramebuffer(O,O,!0,!1),se.colorAttachment.set(ge.texture)}F.bindFramebuffer.set(se.framebuffer),F.viewport.set([0,0,O,O]),v.useProgram("hillshadePrepare").draw(F,T.TRIANGLES,d,y,b,cr.disabled,((ge,f)=>{const x=f.stride,S=a.Z();return a.aS(S,0,a.N,-a.N,0,0,1),a.$(S,S,[0,-a.N,0]),{u_matrix:S,u_image:1,u_dimension:[x,x],u_zoom:ge.overscaledZ,u_unpack:f.getUnpackVector()}})(n.tileID,k),null,u.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function ul(v,n,u,d,y,b){const F=d.paint.get("raster-fade-duration");if(!b&&F>0){const T=a.h.now(),k=(T-v.timeAdded)/F,O=n?(T-n.timeAdded)/F:-1,H=u.getSource(),K=y.coveringZoomLevel({tileSize:H.tileSize,roundZoom:H.roundZoom}),se=!n||Math.abs(n.tileID.overscaledZ-K)>Math.abs(v.tileID.overscaledZ-K),ge=se&&v.refreshedUponExpiration?1:a.ad(se?k:1-O,0,1);return v.refreshedUponExpiration&&k>=1&&(v.refreshedUponExpiration=!1),n?{opacity:1,mix:1-ge}:{opacity:ge,mix:0}}return{opacity:1,mix:0}}const LA=new a.aT(1,0,0,1),Qa=new a.aT(0,1,0,1),Ln=new a.aT(0,0,1,1),Ro=new a.aT(1,0,1,1),zo=new a.aT(0,1,1,1);function ma(v,n,u,d){vn(v,0,n+u/2,v.transform.width,u,d)}function no(v,n,u,d){vn(v,n-u/2,0,u,v.transform.height,d)}function vn(v,n,u,d,y,b){const F=v.context,T=F.gl;T.enable(T.SCISSOR_TEST),T.scissor(n*v.pixelRatio,u*v.pixelRatio,d*v.pixelRatio,y*v.pixelRatio),F.clear({color:b}),T.disable(T.SCISSOR_TEST)}function rc(v,n,u){const d=v.context,y=d.gl,b=u.posMatrix,F=v.useProgram("debug"),T=wt.disabled,k=ar.disabled,O=v.colorModeForRenderPass(),H="$debug",K=v.style.map.terrain&&v.style.map.terrain.getTerrainData(u);d.activeTexture.set(y.TEXTURE0);const se=n.getTileByID(u.key).latestRawTileData,ge=Math.floor((se&&se.byteLength||0)/1024),f=n.getTile(u).tileSize,x=512/Math.min(f,512)*(u.overscaledZ/v.transform.zoom)*.5;let S=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(S+=` => ${u.overscaledZ}`),function(Q,R){Q.initDebugOverlayCanvas();const N=Q.debugOverlayCanvas,z=Q.context.gl,$=Q.debugOverlayCanvas.getContext("2d");$.clearRect(0,0,N.width,N.height),$.shadowColor="white",$.shadowBlur=2,$.lineWidth=1.5,$.strokeStyle="white",$.textBaseline="top",$.font="bold 36px Open Sans, sans-serif",$.fillText(R,5,5),$.strokeText(R,5,5),Q.debugOverlayTexture.update(N),Q.debugOverlayTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE)}(v,`${S} ${ge}kB`),F.draw(d,y.TRIANGLES,T,k,ct.alphaBlended,cr.disabled,Lo(b,a.aT.transparent,x),null,H,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),F.draw(d,y.LINE_STRIP,T,k,O,cr.disabled,Lo(b,a.aT.red),K,H,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function yi(v,n,u){const d=v.context,y=d.gl,b=v.colorModeForRenderPass(),F=new wt(y.LEQUAL,wt.ReadWrite,v.depthRangeFor3D),T=v.useProgram("terrain"),k=n.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,v.width,v.height]);for(const O of u){const H=v.renderToTexture.getTexture(O),K=n.getTerrainData(O.tileID);d.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,H.texture);const se={u_matrix:v.transform.calculatePosMatrix(O.tileID.toUnwrapped()),u_texture:0,u_ele_delta:n.getMeshFrameDelta(v.transform.zoom)};T.draw(d,y.TRIANGLES,F,ar.disabled,b,cr.backCCW,se,K,"terrain",k.vertexBuffer,k.indexBuffer,k.segments)}}class ya{constructor(n,u){this.context=new Tt(n),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.Z(),renderTime:0},this.setup(),this.numSublayers=Ut.maxUnderzooming+Ut.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new mA}resize(n,u,d){if(this.width=Math.floor(n*d),this.height=Math.floor(u*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const n=this.context,u=new a.a_;u.emplaceBack(0,0),u.emplaceBack(a.N,0),u.emplaceBack(0,a.N),u.emplaceBack(a.N,a.N),this.tileExtentBuffer=n.createVertexBuffer(u,So.members),this.tileExtentSegments=a.S.simpleSegment(0,0,4,2);const d=new a.a_;d.emplaceBack(0,0),d.emplaceBack(a.N,0),d.emplaceBack(0,a.N),d.emplaceBack(a.N,a.N),this.debugBuffer=n.createVertexBuffer(d,So.members),this.debugSegments=a.S.simpleSegment(0,0,4,5);const y=new a.V;y.emplaceBack(0,0,0,0),y.emplaceBack(a.N,0,a.N,0),y.emplaceBack(0,a.N,0,a.N),y.emplaceBack(a.N,a.N,a.N,a.N),this.rasterBoundsBuffer=n.createVertexBuffer(y,ot.members),this.rasterBoundsSegments=a.S.simpleSegment(0,0,4,2);const b=new a.a_;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(b,So.members),this.viewportSegments=a.S.simpleSegment(0,0,4,2);const F=new a.a$;F.emplaceBack(0),F.emplaceBack(1),F.emplaceBack(3),F.emplaceBack(2),F.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(F);const T=new a.b0;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(T);const k=this.context.gl;this.stencilClearMode=new ar({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)}clearStencil(){const n=this.context,u=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=a.Z();a.aS(d,0,this.width,this.height,0,0,1),a.a0(d,d,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,u.TRIANGLES,wt.disabled,this.stencilClearMode,ct.disabled,cr.disabled,Xl(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,u){if(this.currentStencilSource===n.source||!n.isTileClipped()||!u||!u.length)return;this.currentStencilSource=n.source;const d=this.context,y=d.gl;this.nextStencilID+u.length>256&&this.clearStencil(),d.setColorMode(ct.disabled),d.setDepthMode(wt.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const F of u){const T=this._tileClippingMaskIDs[F.key]=this.nextStencilID++,k=this.style.map.terrain&&this.style.map.terrain.getTerrainData(F);b.draw(d,y.TRIANGLES,wt.disabled,new ar({func:y.ALWAYS,mask:0},T,255,y.KEEP,y.KEEP,y.REPLACE),ct.disabled,cr.disabled,Xl(F.posMatrix),k,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,u=this.context.gl;return new ar({func:u.NOTEQUAL,mask:255},n,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(n){const u=this.context.gl;return new ar({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(n){const u=this.context.gl,d=n.sort((F,T)=>T.overscaledZ-F.overscaledZ),y=d[d.length-1].overscaledZ,b=d[0].overscaledZ-y+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const F={};for(let T=0;T<b;T++)F[T+y]=new ar({func:u.GEQUAL,mask:255},T+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=b,[F,d]}return[{[y]:ar.disabled},d]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new ct([n.CONSTANT_COLOR,n.ONE],new a.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ct.unblended:ct.alphaBlended}depthModeForSublayer(n,u,d){if(!this.opaquePassEnabledForLayer())return wt.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new wt(d||this.context.gl.LEQUAL,u,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,u){this.style=n,this.options=u,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(a.h.now()),this.imageManager.beginFrame();const d=this.style._order,y=this.style.sourceCaches,b={},F={},T={};for(const k in y){const O=y[k];O.used&&O.prepare(this.context),b[k]=O.getVisibleCoordinates(),F[k]=b[k].slice().reverse(),T[k]=O.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let k=0;k<d.length;k++)if(this.style._layers[d[k]].is3D()){this.opaquePassCutoff=k;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const k=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||k.length)&&(a.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(O,H){const K=O.context,se=K.gl,ge=ct.unblended,f=new wt(se.LEQUAL,wt.ReadWrite,[0,1]),x=H.getTerrainMesh(),S=H.sourceCache.getRenderableTiles(),Q=O.useProgram("terrainDepth");K.bindFramebuffer.set(H.getFramebuffer("depth").framebuffer),K.viewport.set([0,0,O.width/devicePixelRatio,O.height/devicePixelRatio]),K.clear({color:a.aT.transparent,depth:1});for(const R of S){const N=H.getTerrainData(R.tileID),z={u_matrix:O.transform.calculatePosMatrix(R.tileID.toUnwrapped()),u_ele_delta:H.getMeshFrameDelta(O.transform.zoom)};Q.draw(K,se.TRIANGLES,f,ar.disabled,ge,cr.backCCW,z,N,"terrain",x.vertexBuffer,x.indexBuffer,x.segments)}K.bindFramebuffer.set(null),K.viewport.set([0,0,O.width,O.height])}(this,this.style.map.terrain),function(O,H){const K=O.context,se=K.gl,ge=ct.unblended,f=new wt(se.LEQUAL,wt.ReadWrite,[0,1]),x=H.getTerrainMesh(),S=H.getCoordsTexture(),Q=H.sourceCache.getRenderableTiles(),R=O.useProgram("terrainCoords");K.bindFramebuffer.set(H.getFramebuffer("coords").framebuffer),K.viewport.set([0,0,O.width/devicePixelRatio,O.height/devicePixelRatio]),K.clear({color:a.aT.transparent,depth:1}),H.coordsIndex=[];for(const N of Q){const z=H.getTerrainData(N.tileID);K.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,S.texture);const $={u_matrix:O.transform.calculatePosMatrix(N.tileID.toUnwrapped()),u_terrain_coords_id:(255-H.coordsIndex.length)/255,u_texture:0,u_ele_delta:H.getMeshFrameDelta(O.transform.zoom)};R.draw(K,se.TRIANGLES,f,ar.disabled,ge,cr.backCCW,$,z,"terrain",x.vertexBuffer,x.indexBuffer,x.segments),H.coordsIndex.push(N.tileID.key)}K.bindFramebuffer.set(null),K.viewport.set([0,0,O.width,O.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const k of d){const O=this.style._layers[k];if(!O.hasOffscreenPass()||O.isHidden(this.transform.zoom))continue;const H=F[O.source];(O.type==="custom"||H.length)&&this.renderLayer(this,y[O.source],O,H)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?a.aT.black:a.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const k=this.style._layers[d[this.currentLayer]],O=y[k.source],H=b[k.source];this._renderTileClippingMasks(k,H),this.renderLayer(this,O,k,H)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const k=this.style._layers[d[this.currentLayer]],O=y[k.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(k))continue;const H=(k.type==="symbol"?T:F)[k.source];this._renderTileClippingMasks(k,b[k.source]),this.renderLayer(this,O,k,H)}if(this.options.showTileBoundaries){const k=function(O,H){let K=null;const se=Object.values(O._layers).flatMap(S=>S.source&&!S.isHidden(H)?[O.sourceCaches[S.source]]:[]),ge=se.filter(S=>S.getSource().type==="vector"),f=se.filter(S=>S.getSource().type!=="vector"),x=S=>{(!K||K.getSource().maxzoom<S.getSource().maxzoom)&&(K=S)};return ge.forEach(S=>x(S)),K||f.forEach(S=>x(S)),K}(this.style,this.transform.zoom);k&&function(O,H,K){for(let se=0;se<K.length;se++)rc(O,H,K[se])}(this,k,k.getVisibleCoordinates())}this.options.showPadding&&function(k){const O=k.transform.padding;ma(k,k.transform.height-(O.top||0),3,LA),ma(k,O.bottom||0,3,Qa),no(k,O.left||0,3,Ln),no(k,k.transform.width-(O.right||0),3,Ro);const H=k.transform.centerPoint;(function(K,se,ge,f){vn(K,se-1,ge-10,2,20,f),vn(K,se-10,ge-1,20,2,f)})(k,H.x,k.transform.height-H.y,zo)}(this),this.context.setDefault()}renderLayer(n,u,d,y){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(y||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(b,F,T,k,O){if(b.renderPass!=="translucent")return;const H=ar.disabled,K=b.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(se,ge,f,x,S,Q,R){const N=ge.transform,z=S==="map",$=Q==="map";for(const Z of se){const re=x.getTile(Z),de=re.getBucket(f);if(!de||!de.text||!de.text.segments.get().length)continue;const we=a.ah(de.textSizeData,N.zoom),Le=Oe(re,1,ge.transform.zoom),Qe=vt(Z.posMatrix,$,z,ge.transform,Le),ut=f.layout.get("icon-text-fit")!=="none"&&de.hasIconData();if(we){const He=Math.pow(2,N.zoom-re.tileID.overscaledZ);Yi(de,z,$,R,N,Qe,Z.posMatrix,He,we,ut,ge.style.map.terrain?(Fe,Ie)=>ge.style.map.terrain.getElevation(Z,Fe,Ie):null)}}}(k,b,T,F,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),O),T.paint.get("icon-opacity").constantOr(1)!==0&&Zn(b,F,T,k,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),H,K),T.paint.get("text-opacity").constantOr(1)!==0&&Zn(b,F,T,k,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),H,K),F.map.showCollisionBoxes&&(Li(b,F,T,k,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),!0),Li(b,F,T,k,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),!1))})(n,u,d,y,this.style.placement.variableOffsets);break;case"circle":(function(b,F,T,k){if(b.renderPass!=="translucent")return;const O=T.paint.get("circle-opacity"),H=T.paint.get("circle-stroke-width"),K=T.paint.get("circle-stroke-opacity"),se=!T.layout.get("circle-sort-key").isConstant();if(O.constantOr(1)===0&&(H.constantOr(1)===0||K.constantOr(1)===0))return;const ge=b.context,f=ge.gl,x=b.depthModeForSublayer(0,wt.ReadOnly),S=ar.disabled,Q=b.colorModeForRenderPass(),R=[];for(let N=0;N<k.length;N++){const z=k[N],$=F.getTile(z),Z=$.getBucket(T);if(!Z)continue;const re=Z.programConfigurations.get(T.id),de=b.useProgram("circle",re),we=Z.layoutVertexBuffer,Le=Z.indexBuffer,Qe=b.style.map.terrain&&b.style.map.terrain.getTerrainData(z),ut={programConfiguration:re,program:de,layoutVertexBuffer:we,indexBuffer:Le,uniformValues:pa(b,z,$,T),terrainData:Qe};if(se){const He=Z.segments.get();for(const Fe of He)R.push({segments:new a.S([Fe]),sortKey:Fe.sortKey,state:ut})}else R.push({segments:Z.segments,sortKey:0,state:ut})}se&&R.sort((N,z)=>N.sortKey-z.sortKey);for(const N of R){const{programConfiguration:z,program:$,layoutVertexBuffer:Z,indexBuffer:re,uniformValues:de,terrainData:we}=N.state;$.draw(ge,f.TRIANGLES,x,S,Q,cr.disabled,de,we,T.id,Z,re,N.segments,T.paint,b.transform.zoom,z)}})(n,u,d,y);break;case"heatmap":(function(b,F,T,k){if(T.paint.get("heatmap-opacity")!==0)if(b.renderPass==="offscreen"){const O=b.context,H=O.gl,K=ar.disabled,se=new ct([H.ONE,H.ONE],a.aT.transparent,[!0,!0,!0,!0]);(function(ge,f,x){const S=ge.gl;ge.activeTexture.set(S.TEXTURE1),ge.viewport.set([0,0,f.width/4,f.height/4]);let Q=x.heatmapFbo;if(Q)S.bindTexture(S.TEXTURE_2D,Q.colorAttachment.get()),ge.bindFramebuffer.set(Q.framebuffer);else{const R=S.createTexture();S.bindTexture(S.TEXTURE_2D,R),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR),Q=x.heatmapFbo=ge.createFramebuffer(f.width/4,f.height/4,!1,!1),function(N,z,$,Z){var re,de;const we=N.gl,Le=(re=N.HALF_FLOAT)!==null&&re!==void 0?re:we.UNSIGNED_BYTE,Qe=(de=N.RGBA16F)!==null&&de!==void 0?de:we.RGBA;we.texImage2D(we.TEXTURE_2D,0,Qe,z.width/4,z.height/4,0,we.RGBA,Le,null),Z.colorAttachment.set($)}(ge,f,R,Q)}})(O,b,T),O.clear({color:a.aT.transparent});for(let ge=0;ge<k.length;ge++){const f=k[ge];if(F.hasRenderableParent(f))continue;const x=F.getTile(f),S=x.getBucket(T);if(!S)continue;const Q=S.programConfigurations.get(T.id),R=b.useProgram("heatmap",Q),{zoom:N}=b.transform;R.draw(O,H.TRIANGLES,wt.disabled,K,se,cr.disabled,Vc(f.posMatrix,x,N,T.paint.get("heatmap-intensity")),null,T.id,S.layoutVertexBuffer,S.indexBuffer,S.segments,T.paint,b.transform.zoom,Q)}O.viewport.set([0,0,b.width,b.height])}else b.renderPass==="translucent"&&(b.context.setColorMode(b.colorModeForRenderPass()),function(O,H){const K=O.context,se=K.gl,ge=H.heatmapFbo;if(!ge)return;K.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,ge.colorAttachment.get()),K.activeTexture.set(se.TEXTURE1);let f=H.colorRampTexture;f||(f=H.colorRampTexture=new Ke(K,H.colorRamp,se.RGBA)),f.bind(se.LINEAR,se.CLAMP_TO_EDGE),O.useProgram("heatmapTexture").draw(K,se.TRIANGLES,wt.disabled,ar.disabled,O.colorModeForRenderPass(),cr.disabled,((x,S,Q,R)=>{const N=a.Z();a.aS(N,0,x.width,x.height,0,0,1);const z=x.context.gl;return{u_matrix:N,u_world:[z.drawingBufferWidth,z.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:S.paint.get("heatmap-opacity")}})(O,H),null,H.id,O.viewportBuffer,O.quadTriangleIndexBuffer,O.viewportSegments,H.paint,O.transform.zoom)}(b,T))})(n,u,d,y);break;case"line":(function(b,F,T,k){if(b.renderPass!=="translucent")return;const O=T.paint.get("line-opacity"),H=T.paint.get("line-width");if(O.constantOr(1)===0||H.constantOr(1)===0)return;const K=b.depthModeForSublayer(0,wt.ReadOnly),se=b.colorModeForRenderPass(),ge=T.paint.get("line-dasharray"),f=T.paint.get("line-pattern"),x=f.constantOr(1),S=T.paint.get("line-gradient"),Q=T.getCrossfadeParameters(),R=x?"linePattern":ge?"lineSDF":S?"lineGradient":"line",N=b.context,z=N.gl;let $=!0;for(const Z of k){const re=F.getTile(Z);if(x&&!re.patternsLoaded())continue;const de=re.getBucket(T);if(!de)continue;const we=de.programConfigurations.get(T.id),Le=b.context.program.get(),Qe=b.useProgram(R,we),ut=$||Qe.program!==Le,He=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Z),Fe=f.constantOr(null);if(Fe&&re.imageAtlas){const pt=re.imageAtlas,at=pt.patternPositions[Fe.to.toString()],_t=pt.patternPositions[Fe.from.toString()];at&&_t&&we.setConstantPatternPositions(at,_t)}const Ie=He?Z:null,dt=x?Yl(b,re,T,Q,Ie):ge?gn(b,re,T,ge,Q,Ie):S?To(b,re,T,de.lineClipsArray.length,Ie):Wa(b,re,T,Ie);if(x)N.activeTexture.set(z.TEXTURE0),re.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),we.updatePaintBuffers(Q);else if(ge&&(ut||b.lineAtlas.dirty))N.activeTexture.set(z.TEXTURE0),b.lineAtlas.bind(N);else if(S){const pt=de.gradients[T.id];let at=pt.texture;if(T.gradientVersion!==pt.version){let _t=256;if(T.stepInterpolant){const Ft=F.getSource().maxzoom,Wt=Z.canonical.z===Ft?Math.ceil(1<<b.transform.maxZoom-Z.canonical.z):1;_t=a.ad(a.aY(de.maxLineLength/a.N*1024*Wt),256,N.maxTextureSize)}pt.gradient=a.aZ({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:_t,image:pt.gradient||void 0,clips:de.lineClipsArray}),pt.texture?pt.texture.update(pt.gradient):pt.texture=new Ke(N,pt.gradient,z.RGBA),pt.version=T.gradientVersion,at=pt.texture}N.activeTexture.set(z.TEXTURE0),at.bind(T.stepInterpolant?z.NEAREST:z.LINEAR,z.CLAMP_TO_EDGE)}Qe.draw(N,z.TRIANGLES,K,b.stencilModeForClipping(Z),se,cr.disabled,dt,He,T.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,T.paint,b.transform.zoom,we,de.layoutVertexBuffer2),$=!1}})(n,u,d,y);break;case"fill":(function(b,F,T,k){const O=T.paint.get("fill-color"),H=T.paint.get("fill-opacity");if(H.constantOr(1)===0)return;const K=b.colorModeForRenderPass(),se=T.paint.get("fill-pattern"),ge=b.opaquePassEnabledForLayer()&&!se.constantOr(1)&&O.constantOr(a.aT.transparent).a===1&&H.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===ge){const f=b.depthModeForSublayer(1,b.renderPass==="opaque"?wt.ReadWrite:wt.ReadOnly);ro(b,F,T,k,f,K,!1)}if(b.renderPass==="translucent"&&T.paint.get("fill-antialias")){const f=b.depthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,wt.ReadOnly);ro(b,F,T,k,f,K,!0)}})(n,u,d,y);break;case"fill-extrusion":(function(b,F,T,k){const O=T.paint.get("fill-extrusion-opacity");if(O!==0&&b.renderPass==="translucent"){const H=new wt(b.context.gl.LEQUAL,wt.ReadWrite,b.depthRangeFor3D);if(O!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))Ma(b,F,T,k,H,ar.disabled,ct.disabled),Ma(b,F,T,k,H,b.stencilModeFor3D(),b.colorModeForRenderPass());else{const K=b.colorModeForRenderPass();Ma(b,F,T,k,H,ar.disabled,K)}}})(n,u,d,y);break;case"hillshade":(function(b,F,T,k){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;const O=b.context,H=b.depthModeForSublayer(0,wt.ReadOnly),K=b.colorModeForRenderPass(),[se,ge]=b.renderPass==="translucent"?b.stencilConfigForOverlap(k):[{},k];for(const f of ge){const x=F.getTile(f);x.needsHillshadePrepare!==void 0&&x.needsHillshadePrepare&&b.renderPass==="offscreen"?io(b,x,T,H,ar.disabled,K):b.renderPass==="translucent"&&cl(b,f,x,T,H,se[f.overscaledZ],K)}O.viewport.set([0,0,b.width,b.height])})(n,u,d,y);break;case"raster":(function(b,F,T,k){if(b.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!k.length)return;const O=b.context,H=O.gl,K=F.getSource(),se=b.useProgram("raster"),ge=b.colorModeForRenderPass(),[f,x]=K instanceof Ct?[{},k]:b.stencilConfigForOverlap(k),S=x[x.length-1].overscaledZ,Q=!b.options.moving;for(const R of x){const N=b.depthModeForSublayer(R.overscaledZ-S,T.paint.get("raster-opacity")===1?wt.ReadWrite:wt.ReadOnly,H.LESS),z=F.getTile(R);z.registerFadeDuration(T.paint.get("raster-fade-duration"));const $=F.findLoadedParent(R,0),Z=ul(z,$,F,T,b.transform,b.style.map.terrain);let re,de;const we=T.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;O.activeTexture.set(H.TEXTURE0),z.texture.bind(we,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),O.activeTexture.set(H.TEXTURE1),$?($.texture.bind(we,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),re=Math.pow(2,$.tileID.overscaledZ-z.tileID.overscaledZ),de=[z.tileID.canonical.x*re%1,z.tileID.canonical.y*re%1]):z.texture.bind(we,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST);const Le=b.style.map.terrain&&b.style.map.terrain.getTerrainData(R),Qe=Le?R:null,ut=Qe?Qe.posMatrix:b.transform.calculatePosMatrix(R.toUnwrapped(),Q),He=Ur(ut,de||[0,0],re||1,Z,T);K instanceof Ct?se.draw(O,H.TRIANGLES,N,ar.disabled,ge,cr.disabled,He,Le,T.id,K.boundsBuffer,b.quadTriangleIndexBuffer,K.boundsSegments):se.draw(O,H.TRIANGLES,N,f[R.overscaledZ],ge,cr.disabled,He,Le,T.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}})(n,u,d,y);break;case"background":(function(b,F,T,k){const O=T.paint.get("background-color"),H=T.paint.get("background-opacity");if(H===0)return;const K=b.context,se=K.gl,ge=b.transform,f=ge.tileSize,x=T.paint.get("background-pattern");if(b.isPatternMissing(x))return;const S=!x&&O.a===1&&H===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==S)return;const Q=ar.disabled,R=b.depthModeForSublayer(0,S==="opaque"?wt.ReadWrite:wt.ReadOnly),N=b.colorModeForRenderPass(),z=b.useProgram(x?"backgroundPattern":"background"),$=k||ge.coveringTiles({tileSize:f,terrain:b.style.map.terrain});x&&(K.activeTexture.set(se.TEXTURE0),b.imageManager.bind(b.context));const Z=T.getCrossfadeParameters();for(const re of $){const de=k?re.posMatrix:b.transform.calculatePosMatrix(re.toUnwrapped()),we=x?mn(de,H,b,x,{tileID:re,tileSize:f},Z):Po(de,H,O),Le=b.style.map.terrain&&b.style.map.terrain.getTerrainData(re);z.draw(K,se.TRIANGLES,R,Q,N,cr.disabled,we,Le,T.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}})(n,0,d,y);break;case"custom":(function(b,F,T){const k=b.context,O=T.implementation;if(b.renderPass==="offscreen"){const H=O.prerender;H&&(b.setCustomLayerDefaults(),k.setColorMode(b.colorModeForRenderPass()),H.call(O,k.gl,b.transform.customLayerMatrix()),k.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),k.setColorMode(b.colorModeForRenderPass()),k.setStencilMode(ar.disabled);const H=O.renderingMode==="3d"?new wt(b.context.gl.LEQUAL,wt.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,wt.ReadOnly);k.setDepthMode(H),O.render(k.gl,b.transform.customLayerMatrix()),k.setDirty(),b.setBaseState(),k.bindFramebuffer.set(null)}})(n,0,d)}}translatePosMatrix(n,u,d,y,b){if(!d[0]&&!d[1])return n;const F=b?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(F){const O=Math.sin(F),H=Math.cos(F);d=[d[0]*H-d[1]*O,d[0]*O+d[1]*H]}const T=[b?d[0]:Oe(u,d[0],this.transform.zoom),b?d[1]:Oe(u,d[1],this.transform.zoom),0],k=new Float32Array(16);return a.$(k,n,T),k}saveTileTexture(n){const u=this._tileTextures[n.size[0]];u?u.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const u=this._tileTextures[n];return u&&u.length>0?u.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const u=this.imageManager.getPattern(n.from.toString()),d=this.imageManager.getPattern(n.to.toString());return!u||!d}useProgram(n,u){this.cache=this.cache||{};const d=n+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new Pa(this.context,mi[n],u,Za[n],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ke(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:u}=this.context.gl;return this.width!==n||this.height!==u}}class Ti{constructor(n,u){this.points=n,this.planes=u}static fromInvProjectionMatrix(n,u,d){const y=Math.pow(2,d),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const k=1/(T=a.ag([],T,n))[3]/u*y;return a.b3(T,T,[k,k,1/T[3],k])}),F=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const k=function(se,ge){var f=ge[0],x=ge[1],S=ge[2],Q=f*f+x*x+S*S;return Q>0&&(Q=1/Math.sqrt(Q)),se[0]=ge[0]*Q,se[1]=ge[1]*Q,se[2]=ge[2]*Q,se}([],function(se,ge,f){var x=ge[0],S=ge[1],Q=ge[2],R=f[0],N=f[1],z=f[2];return se[0]=S*z-Q*N,se[1]=Q*R-x*z,se[2]=x*N-S*R,se}([],Pe([],b[T[0]],b[T[1]]),Pe([],b[T[2]],b[T[1]]))),O=-((H=k)[0]*(K=b[T[1]])[0]+H[1]*K[1]+H[2]*K[2]);var H,K;return k.concat(O)});return new Ti(b,F)}}class va{constructor(n,u){this.min=n,this.max=u,this.center=function(d,y,b){return d[0]=.5*y[0],d[1]=.5*y[1],d[2]=.5*y[2],d}([],function(d,y,b){return d[0]=y[0]+b[0],d[1]=y[1]+b[1],d[2]=y[2]+b[2],d}([],this.min,this.max))}quadrant(n){const u=[n%2==0,n<2],d=Se(this.min),y=Se(this.max);for(let b=0;b<u.length;b++)d[b]=u[b]?this.min[b]:this.center[b],y[b]=u[b]?this.center[b]:this.max[b];return y[2]=this.max[2],new va(d,y)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let y=0;y<n.planes.length;y++){const b=n.planes[y];let F=0;for(let T=0;T<u.length;T++)a.b4(b,u[T])>=0&&F++;if(F===0)return 0;F!==u.length&&(d=!1)}if(d)return 2;for(let y=0;y<3;y++){let b=Number.MAX_VALUE,F=-Number.MAX_VALUE;for(let T=0;T<n.points.length;T++){const k=n.points[T][y]-this.min[y];b=Math.min(b,k),F=Math.max(F,k)}if(F<0||b>this.max[y]-this.min[y])return 0}return 1}}class Ho{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(isNaN(n)||n<0||isNaN(u)||u<0||isNaN(d)||d<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=u,this.left=d,this.right=y}interpolate(n,u,d){return u.top!=null&&n.top!=null&&(this.top=a.B.number(n.top,u.top,d)),u.bottom!=null&&n.bottom!=null&&(this.bottom=a.B.number(n.bottom,u.bottom,d)),u.left!=null&&n.left!=null&&(this.left=a.B.number(n.left,u.left,d)),u.right!=null&&n.right!=null&&(this.right=a.B.number(n.right,u.right,d)),this}getCenter(n,u){const d=a.ad((this.left+n-this.right)/2,0,n),y=a.ad((this.top+u-this.bottom)/2,0,u);return new a.P(d,y)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Ho(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class TA{constructor(n,u,d,y,b){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=b===void 0||!!b,this._minZoom=n||0,this._maxZoom=u||22,this._minPitch=d??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ho,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const n=new TA(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.apply(this),n}apply(n){this.tileSize=n.tileSize,this.latRange=n.latRange,this.width=n.width,this.height=n.height,this._center=n._center,this._elevation=n._elevation,this._minEleveationForCurrentTile=n._minEleveationForCurrentTile,this.zoom=n.zoom,this.angle=n.angle,this._fov=n._fov,this._pitch=n._pitch,this._unmodified=n._unmodified,this._edgeInsets=n._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const u=-a.b5(n,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var d=new a.A(4);return a.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,y,b){var F=y[0],T=y[1],k=y[2],O=y[3],H=Math.sin(b),K=Math.cos(b);d[0]=F*K+k*H,d[1]=T*K+O*H,d[2]=F*-H+k*K,d[3]=T*-H+O*K}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const u=a.ad(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const u=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,u,d){this._unmodified=!1,this._edgeInsets.interpolate(n,u,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const u=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(n){const u=[new a.b6(0,n)];if(this._renderWorldCopies){const d=this.pointCoordinate(new a.P(0,0)),y=this.pointCoordinate(new a.P(this.width,0)),b=this.pointCoordinate(new a.P(this.width,this.height)),F=this.pointCoordinate(new a.P(0,this.height)),T=Math.floor(Math.min(d.x,y.x,b.x,F.x)),k=Math.floor(Math.max(d.x,y.x,b.x,F.x)),O=1;for(let H=T-O;H<=k+O;H++)H!==0&&u.push(new a.b6(H,n))}return u}coveringTiles(n){var u,d;let y=this.coveringZoomLevel(n);const b=y;if(n.minzoom!==void 0&&y<n.minzoom)return[];n.maxzoom!==void 0&&y>n.maxzoom&&(y=n.maxzoom);const F=this.pointCoordinate(this.getCameraPoint()),T=a.U.fromLngLat(this.center),k=Math.pow(2,y),O=[k*F.x,k*F.y,0],H=[k*T.x,k*T.y,0],K=Ti.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y);let se=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(se=y);const ge=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,f=N=>({aabb:new va([N*k,0,0],[(N+1)*k,k,0]),zoom:0,x:0,y:0,wrap:N,fullyVisible:!1}),x=[],S=[],Q=y,R=n.reparseOverscaled?b:y;if(this._renderWorldCopies)for(let N=1;N<=3;N++)x.push(f(-N)),x.push(f(N));for(x.push(f(0));x.length>0;){const N=x.pop(),z=N.x,$=N.y;let Z=N.fullyVisible;if(!Z){const Qe=N.aabb.intersects(K);if(Qe===0)continue;Z=Qe===2}const re=n.terrain?O:H,de=N.aabb.distanceX(re),we=N.aabb.distanceY(re),Le=Math.max(Math.abs(de),Math.abs(we));if(N.zoom===Q||Le>ge+(1<<Q-N.zoom)-2&&N.zoom>=se){const Qe=Q-N.zoom,ut=O[0]-.5-(z<<Qe),He=O[1]-.5-($<<Qe);S.push({tileID:new a.O(N.zoom===Q?R:N.zoom,N.wrap,N.zoom,z,$),distanceSq:Ee([H[0]-.5-z,H[1]-.5-$]),tileDistanceToCamera:Math.sqrt(ut*ut+He*He)})}else for(let Qe=0;Qe<4;Qe++){const ut=(z<<1)+Qe%2,He=($<<1)+(Qe>>1),Fe=N.zoom+1;let Ie=N.aabb.quadrant(Qe);if(n.terrain){const dt=new a.O(Fe,N.wrap,Fe,ut,He),pt=n.terrain.getMinMaxElevation(dt),at=(u=pt.minElevation)!==null&&u!==void 0?u:this.elevation,_t=(d=pt.maxElevation)!==null&&d!==void 0?d:this.elevation;Ie=new va([Ie.min[0],Ie.min[1],at],[Ie.max[0],Ie.max[1],_t])}x.push({aabb:Ie,zoom:Fe,x:ut,y:He,wrap:N.wrap,fullyVisible:Z})}}return S.sort((N,z)=>N.distanceSq-z.distanceSq).map(N=>N.tileID)}resize(n,u){this.width=n,this.height=u,this.pixelsToGLUnits=[2/n,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const u=a.ad(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.P(a.G(n.lng)*this.worldSize,a.H(u)*this.worldSize)}unproject(n){return new a.U(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const u=this.pointLocation(this.centerPoint,n),d=n.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-d))return;const y=this.getCameraPosition(),b=a.U.fromLngLat(y.lngLat,y.altitude),F=a.U.fromLngLat(u,d),T=b.x-F.x,k=b.y-F.y,O=b.z-F.z,H=Math.sqrt(T*T+k*k+O*O),K=this.scaleZoom(this.cameraToCenterDistance/H/this.tileSize);this._elevation=d,this._center=u,this.zoom=K}setLocationAtPoint(n,u){const d=this.pointCoordinate(u),y=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(n),F=new a.U(b.x-(d.x-y.x),b.y-(d.y-y.y));this.center=this.coordinateLocation(F),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,u){return u?this.coordinatePoint(this.locationCoordinate(n),u.getElevationForLngLatZoom(n,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,u){return this.coordinateLocation(this.pointCoordinate(n,u))}locationCoordinate(n){return a.U.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,u){if(u){const se=u.pointCoordinate(n);if(se!=null)return se}const d=[n.x,n.y,0,1],y=[n.x,n.y,1,1];a.ag(d,d,this.pixelMatrixInverse),a.ag(y,y,this.pixelMatrixInverse);const b=d[3],F=y[3],T=d[1]/b,k=y[1]/F,O=d[2]/b,H=y[2]/F,K=O===H?0:(0-O)/(H-O);return new a.U(a.B.number(d[0]/b,y[0]/F,K)/this.worldSize,a.B.number(T,k,K)/this.worldSize)}coordinatePoint(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.pixelMatrix;const y=[n.x*this.worldSize,n.y*this.worldSize,u,1];return a.ag(y,y,d),new a.P(y[0]/y[3],y[1]/y[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return new pe().extend(this.pointLocation(new a.P(0,n))).extend(this.pointLocation(new a.P(this.width,n))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new pe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const d=n.key,y=u?this._alignedPosMatrixCache:this._posMatrixCache;if(y[d])return y[d];const b=n.canonical,F=this.worldSize/this.zoomScale(b.z),T=b.x+Math.pow(2,b.z)*n.wrap,k=a.ao(new Float64Array(16));return a.$(k,k,[T*F,b.y*F,0]),a.a0(k,k,[F/a.N,F/a.N,1]),a.a1(k,u?this.alignedProjMatrix:this.projMatrix,k),y[d]=new Float32Array(k),y[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let n,u,d,y,b=-90,F=90,T=-180,k=180;const O=this.size,H=this._unmodified;if(this.latRange){const ge=this.latRange;b=a.H(ge[1])*this.worldSize,F=a.H(ge[0])*this.worldSize,n=F-b<O.y?O.y/(F-b):0}if(this.lngRange){const ge=this.lngRange;T=a.b5(a.G(ge[0])*this.worldSize,0,this.worldSize),k=a.b5(a.G(ge[1])*this.worldSize,0,this.worldSize),k<T&&(k+=this.worldSize),u=k-T<O.x?O.x/(k-T):0}const K=this.point,se=Math.max(u||0,n||0);if(se)return this.center=this.unproject(new a.P(u?(k+T)/2:K.x,n?(F+b)/2:K.y)),this.zoom+=this.scaleZoom(se),this._unmodified=H,void(this._constraining=!1);if(this.latRange){const ge=K.y,f=O.y/2;ge-f<b&&(y=b+f),ge+f>F&&(y=F-f)}if(this.lngRange){const ge=(T+k)/2,f=a.b5(K.x,ge-this.worldSize/2,ge+this.worldSize/2),x=O.x/2;f-x<T&&(d=T+x),f+x>k&&(d=k-x)}d===void 0&&y===void 0||(this.center=this.unproject(new a.P(d!==void 0?d:K.x,y!==void 0?y:K.y)).wrap()),this._unmodified=H,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,u=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b7(1,this.center.lat)*this.worldSize;let y=a.ao(new Float64Array(16));a.a0(y,y,[this.width/2,-this.height/2,1]),a.$(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=a.ao(new Float64Array(16)),a.a0(y,y,[1,-1,1]),a.$(y,y,[-1,-1,0]),a.a0(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y;const b=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),F=Math.min(this.elevation,this._minEleveationForCurrentTile),T=b-F*this._pixelPerMeter/Math.cos(this._pitch),k=F<0?T:b,O=Math.PI/2+this._pitch,H=this._fov*(.5+n.y/this.height),K=Math.sin(H)*k/Math.sin(a.ad(Math.PI-O-H,.01,Math.PI-.01)),se=this.getHorizon(),ge=2*Math.atan(se/this.cameraToCenterDistance)*(.5+n.y/(2*se)),f=Math.sin(ge)*k/Math.sin(a.ad(Math.PI-O-ge,.01,Math.PI-.01)),x=Math.min(K,f),S=1.01*(Math.cos(Math.PI/2-this._pitch)*x+k),Q=this.height/50;y=new Float64Array(16),a.b8(y,this._fov,this.width/this.height,Q,S),y[8]=2*-n.x/this.width,y[9]=2*n.y/this.height,a.a0(y,y,[1,-1,1]),a.$(y,y,[0,0,-this.cameraToCenterDistance]),a.b9(y,y,this._pitch),a.ae(y,y,this.angle),a.$(y,y,[-u,-d,0]),this.mercatorMatrix=a.a0([],y,[this.worldSize,this.worldSize,this.worldSize]),a.a0(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.a1(new Float64Array(16),this.labelPlaneMatrix,y),a.$(y,y,[0,0,-this.elevation]),this.projMatrix=y,this.invProjMatrix=a.as([],y),this.pixelMatrix3D=a.a1(new Float64Array(16),this.labelPlaneMatrix,y);const R=this.width%2/2,N=this.height%2/2,z=Math.cos(this.angle),$=Math.sin(this.angle),Z=u-Math.round(u)+z*R+$*N,re=d-Math.round(d)+z*N+$*R,de=new Float64Array(y);if(a.$(de,de,[Z>.5?Z-1:Z,re>.5?re-1:re,0]),this.alignedProjMatrix=de,y=a.as(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new a.P(0,0)),u=[n.x*this.worldSize,n.y*this.worldSize,0,1];return a.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,n))}getCameraQueryGeometry(n){const u=this.getCameraPoint();if(n.length===1)return[n[0],u];{let d=u.x,y=u.y,b=u.x,F=u.y;for(const T of n)d=Math.min(d,T.x),y=Math.min(y,T.y),b=Math.max(b,T.x),F=Math.max(F,T.y);return[new a.P(d,y),new a.P(b,y),new a.P(b,F),new a.P(d,F),new a.P(d,y)]}}}function Yn(v,n){var u=this;let d,y=!1,b=null,F=null;const T=()=>{b=null,y&&(v.apply(F,d),b=setTimeout(T,n),y=!1)};return function(){for(var k=arguments.length,O=new Array(k),H=0;H<k;H++)O[H]=arguments[H];return y=!0,F=u,d=O,b||T(),b}}class Tn{constructor(n){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let d;return u.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(d=y)}),(d&&d[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:d,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=Yn(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const u=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,y=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,y),F=Math.round(u.lng*b)/b,T=Math.round(u.lat*b)/b,k=this._map.getBearing(),O=this._map.getPitch();let H="";if(H+=n?`/${F}/${T}/${d}`:`${d}/${T}/${F}`,(k||O)&&(H+="/"+Math.round(10*k)/10),O&&(H+=`/${Math.round(O)}`),this._hashName){const K=this._hashName;let se=!1;const ge=window.location.hash.slice(1).split("&").map(f=>{const x=f.split("=")[0];return x===K?(se=!0,`${x}=${H}`):f}).filter(f=>f);return se||ge.push(`${K}=${H}`),`#${ge.join("&")}`}return`#${H}`}}const Un={linearity:.3,easing:a.ba(0,0,.3,1)},ka=a.e({deceleration:2500,maxSpeed:1400},Un),Js=a.e({deceleration:20,maxSpeed:1400},Un),_a=a.e({deceleration:1e3,maxSpeed:360},Un),Vo=a.e({deceleration:1e3,maxSpeed:90},Un);class Us{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.h.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,u=a.h.now();for(;n.length>0&&u-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)u.zoom+=b.zoomDelta||0,u.bearing+=b.bearingDelta||0,u.pitch+=b.pitchDelta||0,b.panDelta&&u.pan._add(b.panDelta),b.around&&(u.around=b.around),b.pinchAround&&(u.pinchAround=b.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(u.pan.mag()){const b=Da(u.pan.mag(),d,a.e({},ka,n||{}));y.offset=u.pan.mult(b.amount/u.pan.mag()),y.center=this._map.transform.center,Nn(y,b)}if(u.zoom){const b=Da(u.zoom,d,Js);y.zoom=this._map.transform.zoom+b.amount,Nn(y,b)}if(u.bearing){const b=Da(u.bearing,d,_a);y.bearing=this._map.transform.bearing+a.ad(b.amount,-179,179),Nn(y,b)}if(u.pitch){const b=Da(u.pitch,d,Vo);y.pitch=this._map.transform.pitch+b.amount,Nn(y,b)}if(y.zoom||y.bearing){const b=u.pinchAround===void 0?u.around:u.pinchAround;y.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),a.e(y,{noMoveStart:!0})}}function Nn(v,n){(!v.duration||v.duration<n.duration)&&(v.duration=n.duration,v.easing=n.easing)}function Da(v,n,u){const{maxSpeed:d,linearity:y,deceleration:b}=u,F=a.ad(v*y/(n/1e3),-d,d),T=Math.abs(F)/(b*y);return{easing:u.easing,duration:1e3*T,amount:F*(T/2)}}class $i extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const b=_.mousePos(u.getCanvasContainer(),d),F=u.unproject(b);super(n,a.e({point:b,lngLat:F,originalEvent:d},y)),this._defaultPrevented=!1,this.target=u}}class On extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,d){const y=n==="touchend"?d.changedTouches:d.touches,b=_.touchPos(u.getCanvasContainer(),y),F=b.map(k=>u.unproject(k)),T=b.reduce((k,O,H,K)=>k.add(O.div(K.length)),new a.P(0,0));super(n,{points:b,point:T,lngLats:F,lngLat:u.unproject(T),originalEvent:d}),this._defaultPrevented=!1}}class wa extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,d){super(n,{originalEvent:d}),this._defaultPrevented=!1}}class so{constructor(n,u){this._map=n,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new wa(n.type,this._map,n))}mousedown(n,u){return this._mousedownPos=u,this._firePreventable(new $i(n.type,this._map,n))}mouseup(n){this._map.fire(new $i(n.type,this._map,n))}click(n,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new $i(n.type,this._map,n))}dblclick(n){return this._firePreventable(new $i(n.type,this._map,n))}mouseover(n){this._map.fire(new $i(n.type,this._map,n))}mouseout(n){this._map.fire(new $i(n.type,this._map,n))}touchstart(n){return this._firePreventable(new On(n.type,this._map,n))}touchmove(n){this._map.fire(new On(n.type,this._map,n))}touchend(n){this._map.fire(new On(n.type,this._map,n))}touchcancel(n){this._map.fire(new On(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class jo{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new $i(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new $i("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new $i(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Rn{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.pointLocation(a.P.convert(n),this._map.terrain)}}class Na{constructor(n,u){this._map=n,this._tr=new Rn(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,u){this.isEnabled()&&n.shiftKey&&n.button===0&&(_.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(n,u){if(!this._active)return;const d=u;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=d,this._box||(this._box=_.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const b=Math.min(y.x,d.x),F=Math.max(y.x,d.x),T=Math.min(y.y,d.y),k=Math.max(y.y,d.y);_.setTransform(this._box,`translate(${b}px,${T}px)`),this._box.style.width=F-b+"px",this._box.style.height=k-T+"px"}mouseupWindow(n,u){if(!this._active||n.button!==0)return;const d=this._startPos,y=u;if(this.reset(),_.suppressClick(),d.x!==y.x||d.y!==y.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:n})),{cameraAnimation:b=>b.fitScreenCoordinates(d,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,u){return this._map.fire(new a.k(n,{originalEvent:u}))}}function Pn(v,n){if(v.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${n.length}`);const u={};for(let d=0;d<v.length;d++)u[v[d].identifier]=n[d];return u}class Ki{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,u,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),d.length===this.numTouches&&(this.centroid=function(y){const b=new a.P(0,0);for(const F of y)b._add(F);return b.div(y.length)}(u),this.touches=Pn(d,u)))}touchmove(n,u,d){if(this.aborted||!this.centroid)return;const y=Pn(d,u);for(const b in this.touches){const F=y[b];(!F||F.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(n,u,d){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Ps{constructor(n){this.singleTap=new Ki(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,u,d){this.singleTap.touchstart(n,u,d)}touchmove(n,u,d){this.singleTap.touchmove(n,u,d)}touchend(n,u,d){const y=this.singleTap.touchend(n,u,d);if(y){const b=n.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(y)<30;if(b&&F||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class ai{constructor(n){this._tr=new Rn(n),this._zoomIn=new Ps({numTouches:1,numTaps:2}),this._zoomOut=new Ps({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,u,d){this._zoomIn.touchstart(n,u,d),this._zoomOut.touchstart(n,u,d)}touchmove(n,u,d){this._zoomIn.touchmove(n,u,d),this._zoomOut.touchmove(n,u,d)}touchend(n,u,d){const y=this._zoomIn.touchend(n,u,d),b=this._zoomOut.touchend(n,u,d),F=this._tr;return y?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:F.zoom+1,around:F.unproject(y)},{originalEvent:n})}):b?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:F.zoom-1,around:F.unproject(b)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oi{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(){const n=this._moveFunction(...arguments);if(n.bearingDelta||n.pitchDelta||n.around||n.panDelta)return this._active=!0,n}dragStart(n,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,u){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const y=u.length?u[0]:u;return!this._moved&&y.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(d,y))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&_.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Vi={0:1,2:2};class ji{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const u=_.mouseButton(n);this._eventButton=u}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(u,d){const y=Vi[d];return u.buttons===void 0||(u.buttons&y)!==y}(n,this._eventButton)}isValidEndEvent(n){return _.mouseButton(n)===this._eventButton}}class ba{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}const ea=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=function(n){n.preventDefault()}},ta=v=>{let{enable:n,clickTolerance:u,bearingDegreesPerPixelMoved:d=.8}=v;const y=new ji({checkCorrectEvent:b=>_.mouseButton(b)===0&&b.ctrlKey||_.mouseButton(b)===2});return new oi({clickTolerance:u,move:(b,F)=>({bearingDelta:(F.x-b.x)*d}),moveStateManager:y,enable:n,assignEvents:ea})},Ms=v=>{let{enable:n,clickTolerance:u,pitchDegreesPerPixelMoved:d=-.5}=v;const y=new ji({checkCorrectEvent:b=>_.mouseButton(b)===0&&b.ctrlKey||_.mouseButton(b)===2});return new oi({clickTolerance:u,move:(b,F)=>({pitchDelta:(F.y-b.y)*d}),moveStateManager:y,enable:n,assignEvents:ea})};class Zt{constructor(n,u){this._minTouches=n.cooperativeGestures?2:1,this._clickTolerance=n.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(n,u,d){return this._calculateTransform(n,u,d)}touchmove(n,u,d){if(this._map._cooperativeGestures&&(this._minTouches===2&&d.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(n,!1,d.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(d.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,u,d)}touchend(n,u,d){this._calculateTransform(n,u,d),this._active&&d.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,u,d){d.length>0&&(this._active=!0);const y=Pn(d,u),b=new a.P(0,0),F=new a.P(0,0);let T=0;for(const O in y){const H=y[O],K=this._touches[O];K&&(b._add(H),F._add(H.sub(K)),T++,y[O]=H)}if(this._touches=y,T<this._minTouches||!F.mag())return;const k=F.div(T);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(T),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,u,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([u[0],u[1]]))}touchmove(n,u,d){if(!this._firstTwoTouches)return;n.preventDefault();const[y,b]=this._firstTwoTouches,F=Oa(d,u,y),T=Oa(d,u,b);if(!F||!T)return;const k=this._aroundCenter?null:F.add(T).div(2);return this._move([F,T],k,n)}touchend(n,u,d){if(!this._firstTwoTouches)return;const[y,b]=this._firstTwoTouches,F=Oa(d,u,y),T=Oa(d,u,b);F&&T||(this._active&&_.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Oa(v,n,u){for(let d=0;d<v.length;d++)if(v[d].identifier===u)return n[d]}function Go(v,n){return Math.log(v/n)/Math.LN2}class qc extends hl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,u){const d=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(Go(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Go(this._distance,d),pinchAround:u}}}function Gt(v,n){return 180*v.angleWith(n)/Math.PI}class pl extends hl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,u){const d=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Gt(this._vector,d),pinchAround:u}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const u=25/(Math.PI*this._minDiameter)*360,d=Gt(n,this._startVector);return Math.abs(d)<u}}function UA(v){return Math.abs(v.y)>Math.abs(v.x)}class ls extends hl{constructor(n){super(),this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,u,d){super.touchstart(n,u,d),this._currentTouchCount=d.length}_start(n){this._lastPoints=n,UA(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,u,d){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const y=n[0].sub(this._lastPoints[0]),b=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,b,d.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(y.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(n,u,d){if(this._valid!==void 0)return this._valid;const y=n.mag()>=2,b=u.mag()>=2;if(!y&&!b)return;if(!y||!b)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const F=n.y>0==u.y>0;return UA(n)&&UA(u)&&F}}const Jn={panStep:100,bearingStep:15,pitchStep:10};class dl{constructor(n){this._tr=new Rn(n);const u=Jn;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let u=0,d=0,y=0,b=0,F=0;switch(n.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:n.shiftKey?d=-1:(n.preventDefault(),b=-1);break;case 39:n.shiftKey?d=1:(n.preventDefault(),b=1);break;case 38:n.shiftKey?y=1:(n.preventDefault(),F=-1);break;case 40:n.shiftKey?y=-1:(n.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(d=0,y=0),{cameraAnimation:T=>{const k=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:fl,zoom:u?Math.round(k.zoom)+u*(n.shiftKey?2:1):k.zoom,bearing:k.bearing+d*this._bearingStep,pitch:k.pitch+y*this._pitchStep,offset:[-b*this._panStep,-F*this._panStep],center:k.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function fl(v){return v*(2-v)}const $c=4.000244140625;class ic{constructor(n,u){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=n,this._tr=new Rn(n),this._el=n.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!n[this._map._metaKey])return;n.preventDefault()}let u=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const d=a.h.now(),y=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,u!==0&&u%$c==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(y*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),n.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=n,this._delta-=u,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=_.mousePos(this._el,n),d=this._tr;this._around=a.L.convert(this._aroundCenter?d.center:d.unproject(u)),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(this._delta!==0){const T=this._type==="wheel"&&Math.abs(this._delta)>$c?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&k!==0&&(k=1/k);const O=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(O*k))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,d=this._startZoom,y=this._easing;let b,F=!1;if(this._type==="wheel"&&d&&y){const T=Math.min((a.h.now()-this._lastWheelEventTime)/200,1),k=y(T);b=a.B.number(d,u,k),T<1?this._frameId||(this._frameId=!0):F=!0}else b=u,F=!0;return this._active=!0,F&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!F,zoomDelta:b-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let u=a.bb;if(this._prevEase){const d=this._prevEase,y=(a.h.now()-d.start)/d.duration,b=d.easing(y+.01)-d.easing(y),F=.27/Math.sqrt(b*b+1e-4)*.01,T=Math.sqrt(.0729-F*F);u=a.ba(F,T,.25,1)}return this._prevEase={start:a.h.now(),duration:n,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class PA{constructor(n,u){this._clickZoom=n,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class gl{constructor(n){this._tr=new Rn(n),this.reset()}reset(){this._active=!1}dblclick(n,u){return n.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nc{constructor(){this._tap=new Ps({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,u,d){if(!this._swipePoint)if(this._tapTime){const y=u[0],b=n.timeStamp-this._tapTime<500,F=this._tapPoint.dist(y)<30;b&&F?d.length>0&&(this._swipePoint=y,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(n,u,d)}touchmove(n,u,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const y=u[0],b=y.y-this._swipePoint.y;return this._swipePoint=y,n.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(n,u,d)}touchend(n,u,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const y=this._tap.touchend(n,u,d);y&&(this._tapTime=n.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ml{constructor(n,u,d){this._el=n,this._mousePan=u,this._touchPan=d}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Mn{constructor(n,u,d){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=u,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ra{constructor(n,u,d,y){this._el=n,this._touchZoom=u,this._touchRotate=d,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const qo=v=>v.zoom||v.drag||v.pitch||v.rotate;class Kc extends a.k{}function yl(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class sc{constructor(n,u){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,b)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const F=y.type==="renderFrame"?void 0:y,T={needsRenderFrame:!1},k={},O={},H=y.touches,K=H?this._getMapTouches(H):void 0,se=K?_.touchPos(this._el,K):_.mousePos(this._el,y);for(const{handlerName:x,handler:S,allowed:Q}of this._handlers){if(!S.isEnabled())continue;let R;this._blockedByActive(O,Q,x)?S.reset():S[b||y.type]&&(R=S[b||y.type](y,se,K),this.mergeHandlerResult(T,k,R,x,F),R&&R.needsRenderFrame&&this._triggerRenderFrame()),(R||S.isActive())&&(O[x]=S)}const ge={};for(const x in this._previousActiveHandlers)O[x]||(ge[x]=F);this._previousActiveHandlers=O,(Object.keys(ge).length||yl(T))&&(this._changes.push([T,k,ge]),this._triggerRenderFrame()),(Object.keys(O).length||yl(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:f}=T;f&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],f(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Us(n),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,b,F]of this._listeners)_.addEventListener(y,b,y===document?this.handleWindowEvent:this.handleEvent,F)}destroy(){for(const[n,u,d]of this._listeners)_.removeEventListener(n,u,n===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(n){const u=this._map,d=u.getCanvasContainer();this._add("mapEvent",new so(u,n));const y=u.boxZoom=new Na(u,n);this._add("boxZoom",y),n.interactive&&n.boxZoom&&y.enable();const b=new ai(u),F=new gl(u);u.doubleClickZoom=new PA(F,b),this._add("tapZoom",b),this._add("clickZoom",F),n.interactive&&n.doubleClickZoom&&u.doubleClickZoom.enable();const T=new nc;this._add("tapDragZoom",T);const k=u.touchPitch=new ls(u);this._add("touchPitch",k),n.interactive&&n.touchPitch&&u.touchPitch.enable(n.touchPitch);const O=ta(n),H=Ms(n);u.dragRotate=new Mn(n,O,H),this._add("mouseRotate",O,["mousePitch"]),this._add("mousePitch",H,["mouseRotate"]),n.interactive&&n.dragRotate&&u.dragRotate.enable();const K=(Q=>{let{enable:R,clickTolerance:N}=Q;const z=new ji({checkCorrectEvent:$=>_.mouseButton($)===0&&!$.ctrlKey});return new oi({clickTolerance:N,move:($,Z)=>({around:Z,panDelta:Z.sub($)}),activateOnStart:!0,moveStateManager:z,enable:R,assignEvents:ea})})(n),se=new Zt(n,u);u.dragPan=new ml(d,K,se),this._add("mousePan",K),this._add("touchPan",se,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&u.dragPan.enable(n.dragPan);const ge=new pl,f=new qc;u.touchZoomRotate=new ra(d,f,ge,T),this._add("touchRotate",ge,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&u.touchZoomRotate.enable(n.touchZoomRotate);const x=u.scrollZoom=new ic(u,()=>this._triggerRenderFrame());this._add("scrollZoom",x,["mousePan"]),n.interactive&&n.scrollZoom&&u.scrollZoom.enable(n.scrollZoom);const S=u.keyboard=new dl(u);this._add("keyboard",S),n.interactive&&n.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new jo(u))}_add(n,u,d){this._handlers.push({handlerName:n,handler:u,allowed:d}),this._handlersById[n]=u}stop(n){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!qo(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,u,d){for(const y in n)if(y!==d&&(!u||u.indexOf(y)<0))return!0;return!1}_getMapTouches(n){const u=[];for(const d of n)this._el.contains(d.target)&&u.push(d);return u}mergeHandlerResult(n,u,d,y,b){if(!d)return;a.e(n,d);const F={handlerName:y,originalEvent:d.originalEvent||b};d.zoomDelta!==void 0&&(u.zoom=F),d.panDelta!==void 0&&(u.drag=F),d.pitchDelta!==void 0&&(u.pitch=F),d.bearingDelta!==void 0&&(u.rotate=F)}_applyChanges(){const n={},u={},d={};for(const[y,b,F]of this._changes)y.panDelta&&(n.panDelta=(n.panDelta||new a.P(0,0))._add(y.panDelta)),y.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(n.around=y.around),y.pinchAround!==void 0&&(n.pinchAround=y.pinchAround),y.noInertia&&(n.noInertia=y.noInertia),a.e(u,b),a.e(d,F);this._updateMapTransform(n,u,d),this._changes=[]}_updateMapTransform(n,u,d){const y=this._map,b=y._getTransformForUpdate(),F=y.terrain;if(!(yl(n)||F&&this._terrainMovement))return this._fireEvents(u,d,!0);let{panDelta:T,zoomDelta:k,bearingDelta:O,pitchDelta:H,around:K,pinchAround:se}=n;se!==void 0&&(K=se),y._stop(!0),K=K||y.transform.centerPoint;const ge=b.pointLocation(T?K.sub(T):K);O&&(b.bearing+=O),H&&(b.pitch+=H),k&&(b.zoom+=k),F?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?b.center=b.pointLocation(b.centerPoint.sub(T)):b.setLocationAtPoint(ge,K):(this._terrainMovement=!0,this._map._elevationFreeze=!0,b.setLocationAtPoint(ge,K),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,b.recalculateZoom(y.terrain)})):b.setLocationAtPoint(ge,K),y._applyUpdatedTransform(b),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(u,d,!0)}_fireEvents(n,u,d){const y=qo(this._eventsInProgress),b=qo(n),F={};for(const H in n){const{originalEvent:K}=n[H];this._eventsInProgress[H]||(F[`${H}start`]=K),this._eventsInProgress[H]=n[H]}!y&&b&&this._fireEvent("movestart",b.originalEvent);for(const H in F)this._fireEvent(H,F[H]);b&&this._fireEvent("move",b.originalEvent);for(const H in n){const{originalEvent:K}=n[H];this._fireEvent(H,K)}const T={};let k;for(const H in this._eventsInProgress){const{handlerName:K,originalEvent:se}=this._eventsInProgress[H];this._handlersById[K].isActive()||(delete this._eventsInProgress[H],k=u[K]||se,T[`${H}end`]=k)}for(const H in T)this._fireEvent(H,T[H]);const O=qo(this._eventsInProgress);if(d&&(y||b)&&!O){this._updatingCamera=!0;const H=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),K=se=>se!==0&&-this._bearingSnap<se&&se<this._bearingSnap;!H||!H.essential&&a.h.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:k})),K(this._map.getBearing())&&this._map.resetNorth()):(K(H.bearing||this._map.getBearing())&&(H.bearing=0),H.freezeElevation=!0,this._map.easeTo(H,{originalEvent:k})),this._updatingCamera=!1}}_fireEvent(n,u){this._map.fire(new a.k(n,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new Kc("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Xu extends a.E{constructor(n,u){super(),this._renderFrameCallback=()=>{const d=Math.min((a.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.L(this.transform.center.lng,this.transform.center.lat)}setCenter(n,u){return this.jumpTo({center:n},u)}panBy(n,u,d){return n=a.P.convert(n).mult(-1),this.panTo(this.transform.center,a.e({offset:n},u),d)}panTo(n,u,d){return this.easeTo(a.e({center:n},u),d)}getZoom(){return this.transform.zoom}setZoom(n,u){return this.jumpTo({zoom:n},u),this}zoomTo(n,u,d){return this.easeTo(a.e({zoom:n},u),d)}zoomIn(n,u){return this.zoomTo(this.getZoom()+1,n,u),this}zoomOut(n,u){return this.zoomTo(this.getZoom()-1,n,u),this}getBearing(){return this.transform.bearing}setBearing(n,u){return this.jumpTo({bearing:n},u),this}getPadding(){return this.transform.padding}setPadding(n,u){return this.jumpTo({padding:n},u),this}rotateTo(n,u,d){return this.easeTo(a.e({bearing:n},u),d)}resetNorth(n,u){return this.rotateTo(0,a.e({duration:1e3},n),u),this}resetNorthPitch(n,u){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},n),u),this}snapToNorth(n,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,u):this}getPitch(){return this.transform.pitch}setPitch(n,u){return this.jumpTo({pitch:n},u),this}cameraForBounds(n,u){n=pe.convert(n);const d=u&&u.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),d,u)}_cameraForBoxAndBearing(n,u,d,y){const b={top:0,bottom:0,right:0,left:0};if(typeof(y=a.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const $=y.padding;y.padding={top:$,bottom:$,right:$,left:$}}y.padding=a.e(b,y.padding);const F=this.transform,T=F.padding,k=F.project(a.L.convert(n)),O=F.project(a.L.convert(u)),H=k.rotate(-d*Math.PI/180),K=O.rotate(-d*Math.PI/180),se=new a.P(Math.max(H.x,K.x),Math.max(H.y,K.y)),ge=new a.P(Math.min(H.x,K.x),Math.min(H.y,K.y)),f=se.sub(ge),x=(F.width-(T.left+T.right+y.padding.left+y.padding.right))/f.x,S=(F.height-(T.top+T.bottom+y.padding.top+y.padding.bottom))/f.y;if(S<0||x<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Q=Math.min(F.scaleZoom(F.scale*Math.min(x,S)),y.maxZoom),R=a.P.convert(y.offset),N=new a.P((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(d*Math.PI/180),z=R.add(N).mult(F.scale/F.zoomScale(Q));return{center:F.unproject(k.add(O).div(2).sub(z)),zoom:Q,bearing:d}}fitBounds(n,u,d){return this._fitInternal(this.cameraForBounds(n,u),u,d)}fitScreenCoordinates(n,u,d,y,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(n)),this.transform.pointLocation(a.P.convert(u)),d,y),y,b)}_fitInternal(n,u,d){return n?(delete(u=a.e(n,u)).padding,u.linear?this.easeTo(u,d):this.flyTo(u,d)):this}jumpTo(n,u){this.stop();const d=this._getTransformForUpdate();let y=!1,b=!1,F=!1;return"zoom"in n&&d.zoom!==+n.zoom&&(y=!0,d.zoom=+n.zoom),n.center!==void 0&&(d.center=a.L.convert(n.center)),"bearing"in n&&d.bearing!==+n.bearing&&(b=!0,d.bearing=+n.bearing),"pitch"in n&&d.pitch!==+n.pitch&&(F=!0,d.pitch=+n.pitch),n.padding==null||d.isPaddingEqual(n.padding)||(d.padding=n.padding),this._applyUpdatedTransform(d),this.fire(new a.k("movestart",u)).fire(new a.k("move",u)),y&&this.fire(new a.k("zoomstart",u)).fire(new a.k("zoom",u)).fire(new a.k("zoomend",u)),b&&this.fire(new a.k("rotatestart",u)).fire(new a.k("rotate",u)).fire(new a.k("rotateend",u)),F&&this.fire(new a.k("pitchstart",u)).fire(new a.k("pitch",u)).fire(new a.k("pitchend",u)),this.fire(new a.k("moveend",u))}calculateCameraOptionsFromTo(n,u,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const b=a.U.fromLngLat(n,u),F=a.U.fromLngLat(d,y),T=F.x-b.x,k=F.y-b.y,O=F.z-b.z,H=Math.hypot(T,k,O);if(H===0)throw new Error("Can't calculate camera options with same From and To");const K=Math.hypot(T,k),se=this.transform.scaleZoom(this.transform.cameraToCenterDistance/H/this.transform.tileSize),ge=180*Math.atan2(T,-k)/Math.PI;let f=180*Math.acos(K/H)/Math.PI;return f=O<0?90-f:90+f,{center:F.toLngLat(),zoom:se,pitch:f,bearing:ge}}easeTo(n,u){this._stop(!1,n.easeId),((n=a.e({offset:[0,0],duration:500,easing:a.bb},n)).animate===!1||!n.essential&&a.h.prefersReducedMotion)&&(n.duration=0);const d=this._getTransformForUpdate(),y=this.getZoom(),b=this.getBearing(),F=this.getPitch(),T=this.getPadding(),k="zoom"in n?+n.zoom:y,O="bearing"in n?this._normalizeBearing(n.bearing,b):b,H="pitch"in n?+n.pitch:F,K="padding"in n?n.padding:d.padding,se=a.P.convert(n.offset);let ge=d.centerPoint.add(se);const f=d.pointLocation(ge),x=a.L.convert(n.center||f);this._normalizeCenter(x);const S=d.project(f),Q=d.project(x).sub(S),R=d.zoomScale(k-y);let N,z;n.around&&(N=a.L.convert(n.around),z=d.locationPoint(N));const $={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||k!==y,this._rotating=this._rotating||b!==O,this._pitching=this._pitching||H!==F,this._padding=!d.isPaddingEqual(K),this._easeId=n.easeId,this._prepareEase(u,n.noMoveStart,$),this.terrain&&this._prepareElevation(x),this._ease(Z=>{if(this._zooming&&(d.zoom=a.B.number(y,k,Z)),this._rotating&&(d.bearing=a.B.number(b,O,Z)),this._pitching&&(d.pitch=a.B.number(F,H,Z)),this._padding&&(d.interpolatePadding(T,K,Z),ge=d.centerPoint.add(se)),this.terrain&&!n.freezeElevation&&this._updateElevation(Z),N)d.setLocationAtPoint(N,z);else{const re=d.zoomScale(d.zoom-y),de=k>y?Math.min(2,R):Math.max(.5,R),we=Math.pow(de,1-Z),Le=d.unproject(S.add(Q.mult(Z*we)).mult(re));d.setLocationAtPoint(d.renderWorldCopies?Le.wrap():Le,ge)}this._applyUpdatedTransform(d),this._fireMoveEvents(u)},Z=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,Z)},n),this}_prepareEase(n,u){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this._moving=!0,u||d.moving||this.fire(new a.k("movestart",n)),this._zooming&&!d.zooming&&this.fire(new a.k("zoomstart",n)),this._rotating&&!d.rotating&&this.fire(new a.k("rotatestart",n)),this._pitching&&!d.pitching&&this.fire(new a.k("pitchstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&u!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(d-(u-(d*n+this._elevationStart))/(1-n)),this._elevationTarget=u}this.transform.elevation=a.B.number(this._elevationStart,this._elevationTarget,n)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(n){if(!this.transformCameraUpdate)return;const u=n.clone(),{center:d,zoom:y,pitch:b,bearing:F,elevation:T}=this.transformCameraUpdate(u);d&&(u.center=d),y!==void 0&&(u.zoom=y),b!==void 0&&(u.pitch=b),F!==void 0&&(u.bearing=F),T!==void 0&&(u.elevation=T),this.transform.apply(u)}_fireMoveEvents(n){this.fire(new a.k("move",n)),this._zooming&&this.fire(new a.k("zoom",n)),this._rotating&&this.fire(new a.k("rotate",n)),this._pitching&&this.fire(new a.k("pitch",n))}_afterEase(n,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const d=this._zooming,y=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new a.k("zoomend",n)),y&&this.fire(new a.k("rotateend",n)),b&&this.fire(new a.k("pitchend",n)),this.fire(new a.k("moveend",n))}flyTo(n,u){if(!n.essential&&a.h.prefersReducedMotion){const Ie=a.F(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ie,u)}this.stop(),n=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.bb},n);const d=this._getTransformForUpdate(),y=this.getZoom(),b=this.getBearing(),F=this.getPitch(),T=this.getPadding(),k="zoom"in n?a.ad(+n.zoom,d.minZoom,d.maxZoom):y,O="bearing"in n?this._normalizeBearing(n.bearing,b):b,H="pitch"in n?+n.pitch:F,K="padding"in n?n.padding:d.padding,se=d.zoomScale(k-y),ge=a.P.convert(n.offset);let f=d.centerPoint.add(ge);const x=d.pointLocation(f),S=a.L.convert(n.center||x);this._normalizeCenter(S);const Q=d.project(x),R=d.project(S).sub(Q);let N=n.curve;const z=Math.max(d.width,d.height),$=z/se,Z=R.mag();if("minZoom"in n){const Ie=a.ad(Math.min(n.minZoom,y,k),d.minZoom,d.maxZoom),dt=z/d.zoomScale(Ie-y);N=Math.sqrt(dt/Z*2)}const re=N*N;function de(Ie){const dt=($*$-z*z+(Ie?-1:1)*re*re*Z*Z)/(2*(Ie?$:z)*re*Z);return Math.log(Math.sqrt(dt*dt+1)-dt)}function we(Ie){return(Math.exp(Ie)-Math.exp(-Ie))/2}function Le(Ie){return(Math.exp(Ie)+Math.exp(-Ie))/2}const Qe=de(!1);let ut=function(Ie){return Le(Qe)/Le(Qe+N*Ie)},He=function(Ie){return z*((Le(Qe)*(we(dt=Qe+N*Ie)/Le(dt))-we(Qe))/re)/Z;var dt},Fe=(de(!0)-Qe)/N;if(Math.abs(Z)<1e-6||!isFinite(Fe)){if(Math.abs(z-$)<1e-6)return this.easeTo(n,u);const Ie=$<z?-1:1;Fe=Math.abs(Math.log($/z))/N,He=function(){return 0},ut=function(dt){return Math.exp(Ie*N*dt)}}return n.duration="duration"in n?+n.duration:1e3*Fe/("screenSpeed"in n?+n.screenSpeed/N:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=b!==O,this._pitching=H!==F,this._padding=!d.isPaddingEqual(K),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(S),this._ease(Ie=>{const dt=Ie*Fe,pt=1/ut(dt);d.zoom=Ie===1?k:y+d.scaleZoom(pt),this._rotating&&(d.bearing=a.B.number(b,O,Ie)),this._pitching&&(d.pitch=a.B.number(F,H,Ie)),this._padding&&(d.interpolatePadding(T,K,Ie),f=d.centerPoint.add(ge)),this.terrain&&!n.freezeElevation&&this._updateElevation(Ie);const at=Ie===1?S:d.unproject(Q.add(R.mult(He(dt))).mult(pt));d.setLocationAtPoint(d.renderWorldCopies?at.wrap():at,f),this._applyUpdatedTransform(d),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,u)}if(!n){const d=this.handlers;d&&d.stop(!1)}return this}_ease(n,u,d){d.animate===!1||d.duration===0?(n(1),u()):(this._easeStart=a.h.now(),this._easeOptions=d,this._onEaseFrame=n,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,u){n=a.b5(n,-180,180);const d=Math.abs(n-u);return Math.abs(n-360-u)<d&&(n-=360),Math.abs(n+360-u)<d&&(n+=360),n}_normalizeCenter(n){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const d=n.lng-u.center.lng;n.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(a.L.convert(n),this.transform.tileZoom)-this.transform.elevation:null}}class cs{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options&&this.options.compact,this._container=_.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=_.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,u){const d=this._map._getUIString(`AttributionControl.${u}`);n.title=d,n.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const u=this._map.style.sourceCaches;for(const y in u){const b=u[y];if(b.used||b.usedForTerrain){const F=b.getSource();F.attribution&&n.indexOf(F.attribution)<0&&n.push(F.attribution)}}n=n.filter(y=>String(y).trim()),n.sort((y,b)=>y.length-b.length),n=n.filter((y,b)=>{for(let F=b+1;F<n.length;F++)if(n[F].indexOf(y)>=0)return!1;return!0});const d=n.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,n.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class xi{constructor(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._updateCompact=()=>{const u=this._container.children;if(u.length){const d=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=_.create("div","maplibregl-ctrl");const u=_.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){_.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ac{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const u=++this._id;return this._queue.push({callback:n,id:u,cancelled:!1}),u}remove(n){const u=this._currentlyRunning,d=u?this._queue.concat(u):this._queue;for(const y of d)if(y.id===n)return void(y.cancelled=!0)}run(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const d of u)if(!d.cancelled&&(d.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Wc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var oc=a.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Ac extends a.E{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,u){this.sourceCache.update(n,u),this._renderableTilesKeys=[];const d={};for(const y of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))d[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),a.aS(y.posMatrix,0,a.N,0,a.N,0,1),this._tiles[y.key]=new Xt(y,this.tileSize));for(const y in this._tiles)d[y]||delete this._tiles[y]}freeRtt(n){for(const u in this._tiles){const d=this._tiles[u];(!n||d.tileID.equals(n)||d.tileID.isChildOf(n)||n.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const u={};for(const d of this._renderableTilesKeys){const y=this._tiles[d].tileID;if(y.canonical.equals(n.canonical)){const b=n.clone();b.posMatrix=new Float64Array(16),a.aS(b.posMatrix,0,a.N,0,a.N,0,1),u[d]=b}else if(y.canonical.isChildOf(n.canonical)){const b=n.clone();b.posMatrix=new Float64Array(16);const F=y.canonical.z-n.canonical.z,T=y.canonical.x-(y.canonical.x>>F<<F),k=y.canonical.y-(y.canonical.y>>F<<F),O=a.N>>F;a.aS(b.posMatrix,0,O,0,O,0,1),a.$(b.posMatrix,b.posMatrix,[-T*O,-k*O,0]),u[d]=b}else if(n.canonical.isChildOf(y.canonical)){const b=n.clone();b.posMatrix=new Float64Array(16);const F=n.canonical.z-y.canonical.z,T=n.canonical.x-(n.canonical.x>>F<<F),k=n.canonical.y-(n.canonical.y>>F<<F),O=a.N>>F;a.aS(b.posMatrix,0,a.N,0,a.N,0,1),a.$(b.posMatrix,b.posMatrix,[T*O,k*O,0]),a.a0(b.posMatrix,b.posMatrix,[1/2**F,1/2**F,0]),u[d]=b}}return u}getSourceTile(n,u){const d=this.sourceCache._source;let y=n.overscaledZ-this.deltaZoom;if(y>d.maxzoom&&(y=d.maxzoom),y<d.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(y).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!b||!b.dem)&&u)for(;y>=d.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(n.scaledTo(y--).key);return b}tilesAfterTime(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Date.now();return Object.values(this._tiles).filter(u=>u.timeAdded>=n)}}class MA{constructor(n,u,d){this.painter=n,this.sourceCache=new Ac(u),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,u,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:a.N;var b;if(!(u>=0&&u<y&&d>=0&&d<y))return 0;const F=this.getTerrainData(n),T=(b=F.tile)===null||b===void 0?void 0:b.dem;if(!T)return 0;const k=function(f,x,S){var Q=x[0],R=x[1];return f[0]=S[0]*Q+S[4]*R+S[12],f[1]=S[1]*Q+S[5]*R+S[13],f}([],[u/y*a.N,d/y*a.N],F.u_terrain_matrix),O=[k[0]*T.dim,k[1]*T.dim],H=Math.floor(O[0]),K=Math.floor(O[1]),se=O[0]-H,ge=O[1]-K;return T.get(H,K)*(1-se)*(1-ge)+T.get(H+1,K)*se*(1-ge)+T.get(H,K+1)*(1-se)*ge+T.get(H+1,K+1)*se*ge}getElevationForLngLatZoom(n,u){const{tileID:d,mercatorX:y,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(n,u);return this.getElevation(d,y%a.N,b%a.N,a.N)}getElevation(n,u,d){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:a.N;return this.getDEMElevation(n,u,d,y)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const y=this.painter.context,b=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ke(y,b,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ke(y,new a.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ao([])}const u=this.sourceCache.getSourceTile(n,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const y=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new Ke(y,u.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),u.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const d=u&&u+u.tileID.key+n.key;if(d&&!this._demMatrixCache[d]){const y=this.sourceCache.sourceCache._source.maxzoom;let b=n.canonical.z-u.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=y?b=n.canonical.z-y:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const F=n.canonical.x-(n.canonical.x>>b<<b),T=n.canonical.y-(n.canonical.y>>b<<b),k=a.bc(new Float64Array(16),[1/(a.N<<b),1/(a.N<<b),0]);a.$(k,k,[F*a.N,T*a.N,0]),this._demMatrixCache[n.key]={matrix:k,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(n){const u=this.painter,d=u.width/devicePixelRatio,y=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ke(u.context,{width:d,height:y,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ke(u.context,{width:d,height:y,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(d,y,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,d,y))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,F=0;b<this._coordsTextureSize;b++)for(let T=0;T<this._coordsTextureSize;T++,F+=4)u[F+0]=255&T,u[F+1]=255&b,u[F+2]=T>>8<<4|b>>8,u[F+3]=0;const d=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),y=new Ke(n,d,n.gl.RGBA,{premultiply:!1});return y.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(n){const u=new Uint8Array(4),d=this.painter.context,y=d.gl;d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,u),d.bindFramebuffer.set(null);const b=u[0]+(u[2]>>4<<8),F=u[1]+((15&u[2])<<8),T=this.coordsIndex[255-u[3]],k=T&&this.sourceCache.getTileByID(T);if(!k)return null;const O=this._coordsTextureSize,H=(1<<k.tileID.canonical.z)*O;return new a.U(this._allowMercatorOverflow(n,(k.tileID.canonical.x*O+b)/H),(k.tileID.canonical.y*O+F)/H,this.getElevation(k.tileID,b,F,O))}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.painter.context,u=new a.bd,d=new a.b0,y=this.meshSize,b=a.N/y,F=y*y;for(let K=0;K<=y;K++)for(let se=0;se<=y;se++)u.emplaceBack(se*b,K*b,0);for(let K=0;K<F;K+=y+1)for(let se=0;se<y;se++)d.emplaceBack(se+K,y+se+K+1,y+se+K+2),d.emplaceBack(se+K,y+se+K+2,se+K+1);const T=u.length,k=T+2*(y+1);for(const K of[0,1])for(let se=0;se<=y;se++)for(const ge of[0,1])u.emplaceBack(se*b,K*a.N,ge);for(let K=0;K<2*y;K+=2)d.emplaceBack(k+K,k+K+1,k+K+3),d.emplaceBack(k+K,k+K+3,k+K+2),d.emplaceBack(T+K,T+K+3,T+K+1),d.emplaceBack(T+K,T+K+2,T+K+3);const O=u.length,H=O+2*(y+1);for(const K of[0,1])for(let se=0;se<=y;se++)for(const ge of[0,1])u.emplaceBack(K*a.N,se*b,ge);for(let K=0;K<2*y;K+=2)d.emplaceBack(O+K,O+K+1,O+K+3),d.emplaceBack(O+K,O+K+3,O+K+2),d.emplaceBack(H+K,H+K+3,H+K+1),d.emplaceBack(H+K,H+K+2,H+K+3);return this._mesh={indexBuffer:n.createIndexBuffer(d),vertexBuffer:n.createVertexBuffer(u,oc.members),segments:a.S.simpleSegment(0,0,u.length,d.length)},this._mesh}getMeshFrameDelta(n){return 2*Math.PI*a.be/Math.pow(2,n)/5}getMinTileElevationForLngLatZoom(n,u){var d;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(n,u);return(d=this.getMinMaxElevation(y).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(n){const u=this.getTerrainData(n).tile,d={minElevation:null,maxElevation:null};return u&&u.dem&&(d.minElevation=u.dem.min*this.exaggeration,d.maxElevation=u.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(n,u){const d=a.U.fromLngLat(n.wrap()),y=(1<<u)*a.N,b=d.x*y,F=d.y*y,T=Math.floor(b/a.N),k=Math.floor(F/a.N);return{tileID:new a.O(u,0,u,T,k),mercatorX:b,mercatorY:F}}_allowMercatorOverflow(n,u){const d=n.x<this.painter.width/2;let y=a.bf(u);const b=this.painter.transform.center.lng;return d&&Math.sign(y)>0&&Math.sign(b)<0||!d&&Math.sign(y)<0&&Math.sign(b)>0?(y=360*Math.sign(b)+y,a.G(y)):u}}class dp{constructor(n,u,d){this._context=n,this._size=u,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new Ke(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(d.texture),{id:n,fbo:u,texture:d,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>n.id!==u),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const zn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class vl{constructor(n,u){this.painter=n,this.terrain=u,this.pool=new dp(n.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(d=>!n._layers[d].isHidden(u)),this._coordsDescendingInv={};for(const d in n.sourceCaches){this._coordsDescendingInv[d]={};const y=n.sourceCaches[d].getVisibleCoordinates();for(const b of y){const F=this.terrain.sourceCache.getTerrainCoords(b);for(const T in F)this._coordsDescendingInv[d][T]||(this._coordsDescendingInv[d][T]=[]),this._coordsDescendingInv[d][T].push(F[T])}}this._coordsDescendingInvStr={};for(const d of n._order){const y=n._layers[d],b=y.source;if(zn[y.type]&&!this._coordsDescendingInvStr[b]){this._coordsDescendingInvStr[b]={};for(const F in this._coordsDescendingInv[b])this._coordsDescendingInvStr[b][F]=this._coordsDescendingInv[b][F].map(T=>T.key).sort().join()}}for(const d of this._renderableTiles)for(const y in this._coordsDescendingInvStr){const b=this._coordsDescendingInvStr[y][d.tileID.key];b&&b!==d.rttCoords[y]&&(d.rtt=[])}}renderLayer(n){if(n.isHidden(this.painter.transform.zoom))return!1;const u=n.type,d=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(zn[u]&&(this._prevType&&zn[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(n.id),!y))return!0;if(zn[this._prevType]||zn[u]&&y){this._prevType=u;const b=this._stacks.length-1,F=this._stacks[b]||[];for(const T of this._renderableTiles){if(this.pool.isFull()&&(yi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(T),T.rtt[b]){const O=this.pool.getObjectForId(T.rtt[b].id);if(O.stamp===T.rtt[b].stamp){this.pool.useObject(O);continue}}const k=this.pool.getOrCreateFreeObject();this.pool.useObject(k),this.pool.stampObject(k),T.rtt[b]={id:k.id,stamp:k.stamp},d.context.bindFramebuffer.set(k.fbo.framebuffer),d.context.clear({color:a.aT.transparent,stencil:0}),d.currentStencilSource=void 0;for(let O=0;O<F.length;O++){const H=d.style._layers[F[O]],K=H.source?this._coordsDescendingInv[H.source][T.tileID.key]:[T.tileID];d.context.viewport.set([0,0,k.fbo.width,k.fbo.height]),d._renderTileClippingMasks(H,K),d.renderLayer(d,d.style.sourceCaches[H.source],H,K),H.source&&(T.rttCoords[H.source]=this._coordsDescendingInvStr[H.source][T.tileID.key])}}return yi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),zn[u]}return!1}}const Ar=g,_r={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},_l=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},Zc={showCompass:!0,showZoom:!0,visualizePitch:!1};class xa{constructor(n,u){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.mousedown=F=>{this.startMouse(a.e({},F,{ctrlKey:!0,preventDefault:()=>F.preventDefault()}),_.mousePos(this.element,F)),_.addEventListener(window,"mousemove",this.mousemove),_.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=F=>{this.moveMouse(F,_.mousePos(this.element,F))},this.mouseup=F=>{this.mouseRotate.dragEnd(F),this.mousePitch&&this.mousePitch.dragEnd(F),this.offTemp()},this.touchstart=F=>{F.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,F.targetTouches)[0],this.startTouch(F,this._startPos),_.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.addEventListener(window,"touchend",this.touchend))},this.touchmove=F=>{F.targetTouches.length!==1?this.reset():(this._lastPos=_.touchPos(this.element,F.targetTouches)[0],this.moveTouch(F,this._lastPos))},this.touchend=F=>{F.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const y=n.dragRotate._mouseRotate.getClickTolerance(),b=n.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=ta({clickTolerance:y,enable:!0}),this.touchRotate=(F=>{let{enable:T,clickTolerance:k,bearingDegreesPerPixelMoved:O=.8}=F;const H=new ba;return new oi({clickTolerance:k,move:(K,se)=>({bearingDelta:(se.x-K.x)*O}),moveStateManager:H,enable:T,assignEvents:_l})})({clickTolerance:y,enable:!0}),this.map=n,d&&(this.mousePitch=Ms({clickTolerance:b,enable:!0}),this.touchPitch=(F=>{let{enable:T,clickTolerance:k,pitchDegreesPerPixelMoved:O=-.5}=F;const H=new ba;return new oi({clickTolerance:k,move:(K,se)=>({pitchDelta:(se.y-K.y)*O}),moveStateManager:H,enable:T,assignEvents:_l})})({clickTolerance:b,enable:!0})),_.addEventListener(u,"mousedown",this.mousedown),_.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(u,"touchcancel",this.reset)}startMouse(n,u){this.mouseRotate.dragStart(n,u),this.mousePitch&&this.mousePitch.dragStart(n,u),_.disableDrag()}startTouch(n,u){this.touchRotate.dragStart(n,u),this.touchPitch&&this.touchPitch.dragStart(n,u),_.disableDrag()}moveMouse(n,u){const d=this.map,{bearingDelta:y}=this.mouseRotate.dragMove(n,u)||{};if(y&&d.setBearing(d.getBearing()+y),this.mousePitch){const{pitchDelta:b}=this.mousePitch.dragMove(n,u)||{};b&&d.setPitch(d.getPitch()+b)}}moveTouch(n,u){const d=this.map,{bearingDelta:y}=this.touchRotate.dragMove(n,u)||{};if(y&&d.setBearing(d.getBearing()+y),this.touchPitch){const{pitchDelta:b}=this.touchPitch.dragMove(n,u)||{};b&&d.setPitch(d.getPitch()+b)}}off(){const n=this.element;_.removeEventListener(n,"mousedown",this.mousedown),_.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend),_.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){_.enableDrag(),_.removeEventListener(window,"mousemove",this.mousemove),_.removeEventListener(window,"mouseup",this.mouseup),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend)}}let ui;function ia(v,n,u){if(v=new a.L(v.lng,v.lat),n){const d=new a.L(v.lng-360,v.lat),y=new a.L(v.lng+360,v.lat),b=u.locationPoint(v).distSqr(n);u.locationPoint(d).distSqr(n)<b?v=d:u.locationPoint(y).distSqr(n)<b&&(v=y)}for(;Math.abs(v.lng-u.center.lng)>180;){const d=u.locationPoint(v);if(d.x>=0&&d.y>=0&&d.x<=u.width&&d.y<=u.height)break;v.lng>u.center.lng?v.lng-=360:v.lng+=360}return v}const Qs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Xc(v,n,u){const d=v.classList;for(const y in Qs)d.remove(`maplibregl-${u}-anchor-${y}`);d.add(`maplibregl-${u}-anchor-${n}`)}class es extends a.E{constructor(n){if(super(),this._onKeyPress=u=>{const d=u.code,y=u.charCode||u.keyCode;d!=="Space"&&d!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=u=>{const d=u.originalEvent.target,y=this._element;this._popup&&(d===y||y.contains(d))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!d)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=ia(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),_.setTransform(this._element,`${Qs[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${y}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const F=this._map.unproject(this._pos),T=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=F.distanceTo(this._lngLat)>20*T?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=a.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div"),this._element.setAttribute("aria-label","Map marker");const u=_.createNS("http://www.w3.org/2000/svg","svg"),d=41,y=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${d}px`),u.setAttributeNS(null,"width",`${y}px`),u.setAttributeNS(null,"viewBox",`0 0 ${y} ${d}`);const b=_.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const F=_.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill-rule","nonzero");const T=_.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Q of k){const R=_.createNS("http://www.w3.org/2000/svg","ellipse");R.setAttributeNS(null,"opacity","0.04"),R.setAttributeNS(null,"cx","10.5"),R.setAttributeNS(null,"cy","5.80029008"),R.setAttributeNS(null,"rx",Q.rx),R.setAttributeNS(null,"ry",Q.ry),T.appendChild(R)}const O=_.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill",this._color);const H=_.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),O.appendChild(H);const K=_.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");const se=_.createNS("http://www.w3.org/2000/svg","path");se.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(se);const ge=_.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ge.setAttributeNS(null,"fill","#FFFFFF");const f=_.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(8.0, 8.0)");const x=_.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#000000"),x.setAttributeNS(null,"opacity","0.25"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962");const S=_.createNS("http://www.w3.org/2000/svg","circle");S.setAttributeNS(null,"fill","#FFFFFF"),S.setAttributeNS(null,"cx","5.5"),S.setAttributeNS(null,"cy","5.5"),S.setAttributeNS(null,"r","5.4999962"),f.appendChild(x),f.appendChild(S),F.appendChild(T),F.appendChild(O),F.appendChild(K),F.appendChild(ge),F.appendChild(f),u.appendChild(F),u.setAttributeNS(null,"height",d*this._scale+"px"),u.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(u),this._offset=a.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Xc(this._element,this._anchor,"marker"),n&&n.className)for(const u of n.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(n){return this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=a.L.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const y=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return n?(n.isOpen()?n.remove():n.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(n){return this._offset=a.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Ai={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ui=0,QA=!1;const kA={maxWidth:100,unit:"metric"};function DA(v,n,u){const d=u&&u.maxWidth||100,y=v._container.clientHeight/2,b=v.unproject([0,y]),F=v.unproject([d,y]),T=b.distanceTo(F);if(u&&u.unit==="imperial"){const k=3.2808*T;k>5280?ao(n,d,k/5280,v._getUIString("ScaleControl.Miles")):ao(n,d,k,v._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?ao(n,d,T/1852,v._getUIString("ScaleControl.NauticalMiles")):T>=1e3?ao(n,d,T/1e3,v._getUIString("ScaleControl.Kilometers")):ao(n,d,T,v._getUIString("ScaleControl.Meters"))}function ao(v,n,u,d){const y=function(b){const F=Math.pow(10,`${Math.floor(b)}`.length-1);let T=b/F;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(k){const O=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*O)/O}(T),F*T}(u);v.style.width=n*(y/u)+"px",v.innerHTML=`${y}&nbsp;${d}`}const lc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Yc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ra(v){if(v){if(typeof v=="number"){const n=Math.round(Math.abs(v)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,v),"top-left":new a.P(n,n),"top-right":new a.P(-n,n),bottom:new a.P(0,-v),"bottom-left":new a.P(n,-n),"bottom-right":new a.P(-n,-n),left:new a.P(v,0),right:new a.P(-v,0)}}if(v instanceof a.P||Array.isArray(v)){const n=a.P.convert(v);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:a.P.convert(v.center||[0,0]),top:a.P.convert(v.top||[0,0]),"top-left":a.P.convert(v["top-left"]||[0,0]),"top-right":a.P.convert(v["top-right"]||[0,0]),bottom:a.P.convert(v.bottom||[0,0]),"bottom-left":a.P.convert(v["bottom-left"]||[0,0]),"bottom-right":a.P.convert(v["bottom-right"]||[0,0]),left:a.P.convert(v.left||[0,0]),right:a.P.convert(v.right||[0,0])}}return Ra(new a.P(0,0))}const NA={extend:function(v){for(var n=arguments.length,u=new Array(n>1?n-1:0),d=1;d<n;d++)u[d-1]=arguments[d];return a.e(v,...u)},run(v){v()},logToElement(v){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"log";const d=window.document.getElementById(u);d&&(n&&(d.innerHTML=""),d.innerHTML+=`<br>${v}`)}},$o=g;class ni{static get version(){return $o}static get workerCount(){return hr.workerCount}static set workerCount(n){hr.workerCount=n}static get maxParallelImageRequests(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(n){a.c.MAX_PARALLEL_IMAGE_REQUESTS=n}static get workerUrl(){return a.c.WORKER_URL}static set workerUrl(n){a.c.WORKER_URL=n}static addProtocol(n,u){a.c.REGISTERED_PROTOCOLS[n]=u}static removeProtocol(n){delete a.c.REGISTERED_PROTOCOLS[n]}}return ni.Map=class extends Xu{constructor(v){if(a.bg.mark(a.bh.create),(v=a.e({},_r,v)).minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new TA(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),{bearingSnap:v.bearingSnap}),this._cooperativeGesturesOnWheel=n=>{this._onCooperativeGesture(n,n[this._metaKey],1)},this._contextLost=n=>{n.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.k("webglcontextlost",{originalEvent:n}))},this._contextRestored=n=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:n}))},this._onMapScroll=n=>{if(n.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=v.interactive,this._cooperativeGestures=v.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=v.maxTileCacheSize,this._maxTileCacheZoomLevels=v.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=v.collectResourceTiming,this._renderTaskQueue=new ac,this._controls=[],this._mapId=a.a2(),this._locale=a.e({},Wc,v.locale),this._clickTolerance=v.clickTolerance,this._overridePixelRatio=v.pixelRatio,this._maxCanvasSize=v.maxCanvasSize,this.transformCameraUpdate=v.transformCameraUpdate,this._imageQueueHandle=Y.addThrottleControl(()=>this.isMoving()),this._requestManager=new ne(v.transformRequest),typeof v.container=="string"){if(this._container=document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let n=!1;const u=Yn(d=>{this._trackResize&&!this._removed&&this.resize(d)._update()},50);this._resizeObserver=new ResizeObserver(d=>{n?u(d):n=!0}),this._resizeObserver.observe(this._container)}this.handlers=new sc(this,v),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=v.hash&&new Tn(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,a.e({},v.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=v.localIdeographFontFamily,this._validateStyle=v.validateStyle,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new cs({customAttribution:v.customAttribution})),v.maplibreLogo&&this.addControl(new xi,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",n=>{this._update(n.dataType==="style"),this.fire(new a.k(`${n.dataType}data`,n))}),this.on("dataloading",n=>{this.fire(new a.k(`${n.dataType}dataloading`,n))}),this.on("dataabort",n=>{this.fire(new a.k("sourcedataabort",n))})}_getMapId(){return this._mapId}addControl(v,n){if(n===void 0&&(n=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=v.onAdd(this);this._controls.push(v);const d=this._controlPositions[n];return n.indexOf("bottom")!==-1?d.insertBefore(u,d.firstChild):d.appendChild(u),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(v);return n>-1&&this._controls.splice(n,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,n,u,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,n,u,d)}resize(v){var n;const u=this._containerDimensions(),d=u[0],y=u[1],b=this._getClampedPixelRatio(d,y);if(this._resizeCanvas(d,y,b),this.painter.resize(d,y,b),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const k=this._getClampedPixelRatio(d,y);this._resizeCanvas(d,y,k),this.painter.resize(d,y,k)}this.transform.resize(d,y),(n=this._requestedCameraState)===null||n===void 0||n.resize(d,y);const F=!this._moving;return F&&(this.stop(),this.fire(new a.k("movestart",v)).fire(new a.k("move",v))),this.fire(new a.k("resize",v)),F&&this.fire(new a.k("moveend",v)),this}_getClampedPixelRatio(v,n){const{0:u,1:d}=this._maxCanvasSize,y=this.getPixelRatio(),b=v*y,F=n*y;return Math.min(b>u?u/b:1,F>d?d/F:1)*y}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(pe.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(v){return this._cooperativeGestures=v,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(v){return this.transform.locationPoint(a.L.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(a.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,n,u){if(v==="mouseenter"||v==="mouseover"){let d=!1;return{layer:n,listener:u,delegates:{mousemove:b=>{const F=this.getLayer(n)?this.queryRenderedFeatures(b.point,{layers:[n]}):[];F.length?d||(d=!0,u.call(this,new $i(v,this,b.originalEvent,{features:F}))):d=!1},mouseout:()=>{d=!1}}}}if(v==="mouseleave"||v==="mouseout"){let d=!1;return{layer:n,listener:u,delegates:{mousemove:F=>{(this.getLayer(n)?this.queryRenderedFeatures(F.point,{layers:[n]}):[]).length?d=!0:d&&(d=!1,u.call(this,new $i(v,this,F.originalEvent)))},mouseout:F=>{d&&(d=!1,u.call(this,new $i(v,this,F.originalEvent)))}}}}{const d=y=>{const b=this.getLayer(n)?this.queryRenderedFeatures(y.point,{layers:[n]}):[];b.length&&(y.features=b,u.call(this,y),delete y.features)};return{layer:n,listener:u,delegates:{[v]:d}}}}on(v,n,u){if(u===void 0)return super.on(v,n);const d=this._createDelegatedListener(v,n,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(d);for(const y in d.delegates)this.on(y,d.delegates[y]);return this}once(v,n,u){if(u===void 0)return super.once(v,n);const d=this._createDelegatedListener(v,n,u);for(const y in d.delegates)this.once(y,d.delegates[y]);return this}off(v,n,u){return u===void 0?super.off(v,n):(this._delegatedListeners&&this._delegatedListeners[v]&&(d=>{const y=this._delegatedListeners[v];for(let b=0;b<y.length;b++){const F=y[b];if(F.layer===n&&F.listener===u){for(const T in F.delegates)this.off(T,F.delegates[T]);return y.splice(b,1),this}}})(),this)}queryRenderedFeatures(v,n){if(!this.style)return[];let u;const d=v instanceof a.P||Array.isArray(v),y=d?v:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(d?{}:v)||{},y instanceof a.P||typeof y[0]=="number")u=[a.P.convert(y)];else{const b=a.P.convert(y[0]),F=a.P.convert(y[1]);u=[b,new a.P(F.x,b.y),F,new a.P(b.x,F.y),b]}return this.style.queryRenderedFeatures(u,n,this.transform)}querySourceFeatures(v,n){return this.style.querySourceFeatures(v,n)}setStyle(v,n){return(n=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(v,n))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const n=this._locale[v];if(n==null)throw new Error(`Missing UI string '${v}'`);return n}_updateStyle(v,n){if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,n));const u=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new Wr(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,n,u):this.style.loadJSON(v,n,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Wr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,n){if(typeof v=="string"){const u=this._requestManager.transformRequest(v,q.Style);a.f(u,(d,y)=>{d?this.fire(new a.j(d)):y&&this._updateDiff(y,n)})}else typeof v=="object"&&this._updateDiff(v,n)}_updateDiff(v,n){try{this.style.setState(v,n)&&this._update(!0)}catch(u){a.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(v,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(v,n){return this._lazyInitEmptyStyle(),this.style.addSource(v,n),this._update(!0)}isSourceLoaded(v){const n=this.style&&this.style.sourceCaches[v];if(n!==void 0)return n.loaded();this.fire(new a.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const n=this.style.sourceCaches[v.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);for(const u in this.style._layers){const d=this.style._layers[u];d.type==="hillshade"&&d.source===v.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new MA(this.painter,n,v),this.painter.renderToTexture=new vl(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==v.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:v})),this}getTerrain(){var v,n;return(n=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const n in v){const u=v[n]._tiles;for(const d in u){const y=u[d];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}addSourceType(v,n,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(v,n,u)}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,n){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{pixelRatio:d=1,sdf:y=!1,stretchX:b,stretchY:F,content:T}=u;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||a.a(n))){if(n.width===void 0||n.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:k,height:O,data:H}=n,K=n;return this.style.addImage(v,{data:new a.R({width:k,height:O},new Uint8Array(H)),pixelRatio:d,stretchX:b,stretchY:F,content:T,sdf:y,version:0,userImage:K}),K.onAdd&&K.onAdd(this,v),this}}{const{width:k,height:O,data:H}=a.h.getImageData(n);this.style.addImage(v,{data:new a.R({width:k,height:O},H),pixelRatio:d,stretchX:b,stretchY:F,content:T,sdf:y,version:0})}}updateImage(v,n){const u=this.style.getImage(v);if(!u)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=n instanceof HTMLImageElement||a.a(n)?a.h.getImageData(n):n,{width:y,height:b,data:F}=d;if(y===void 0||b===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==u.data.width||b!==u.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(n instanceof HTMLImageElement||a.a(n));return u.data.replace(F,T),this.style.updateImage(v,u),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,n){Y.getImage(this._requestManager.transformRequest(v,q.Image),n)}listImages(){return this.style.listImages()}addLayer(v,n){return this._lazyInitEmptyStyle(),this.style.addLayer(v,n),this._update(!0)}moveLayer(v,n){return this.style.moveLayer(v,n),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,n,u){return this.style.setLayerZoomRange(v,n,u),this._update(!0)}setFilter(v,n){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.style.setFilter(v,n,u),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,n,u){let d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.style.setPaintProperty(v,n,u,d),this._update(!0)}getPaintProperty(v,n){return this.style.getPaintProperty(v,n)}setLayoutProperty(v,n,u){let d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.style.setLayoutProperty(v,n,u,d),this._update(!0)}getLayoutProperty(v,n){return this.style.getLayoutProperty(v,n)}setGlyphs(v){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,n){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._lazyInitEmptyStyle(),this.style.addSprite(v,n,u,d=>{d||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setSprite(v,n,u=>{u||this._update(!0)}),this}setLight(v){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(v,n),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(v,n){return this.style.setFeatureState(v,n),this._update()}removeFeatureState(v,n){return this.style.removeFeatureState(v,n),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,n=0;return this._container&&(v=this._container.clientWidth||400,n=this._container.clientHeight||300),[v,n]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const n=this._canvasContainer=_.create("div","maplibregl-canvas-container",v);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=_.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),d=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],d);const y=this._controlContainer=_.create("div","maplibregl-control-container",v),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(F=>{b[F]=_.create("div",`maplibregl-ctrl-${F} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=_.create("div","maplibregl-cooperative-gesture-screen",this._container);let v=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(v=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${v}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){_.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(v,n,u){this._canvas.width=Math.floor(u*v),this._canvas.height=Math.floor(u*n),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let n=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{n={requestedAttributes:v},d&&(n.statusMessage=d.statusMessage,n.type=d.type)},{once:!0});const u=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!u){const d="Failed to initialize WebGL";throw n?(n.message=d,new Error(JSON.stringify(n))):new Error(d)}this.painter=new ya(u,this.transform),C.testSupport(u)}_onCooperativeGesture(v,n,u){return!n&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const y=this.transform.zoom,b=a.h.now();this.style.zoomHistory.update(y,b);const F=new a.a8(y,{now:b,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),T=F.crossFadingFactor();T===1&&T===this._crossFadingFactor||(u=!0,this._crossFadingFactor=T),this.style.update(F)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bg.mark(a.bh.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,a.bg.mark(a.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Y.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),_.remove(this._canvasContainer),_.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),a.bg.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.h.frame(v=>{a.bg.frame(v),this._frame=null,this._render(v)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return Ar}getCameraTargetElevation(){return this.transform.elevation}},ni.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const n=this._map.getZoom(),u=n===this._map.getMaxZoom(),d=n===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const n=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=n},this._setButtonTitle=(n,u)=>{const d=this._map._getUIString(`NavigationControl.${u}`);n.title=d,n.setAttribute("aria-label",d)},this.options=a.e({},Zc,v),this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),_.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),_.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=_.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new xa(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,n){const u=_.create("button",v,this._container);return u.type="button",u.addEventListener("click",n),u}},ni.GeolocateControl=class extends a.E{constructor(v){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",n)),this._finish()}},this._updateCamera=n=>{const u=new a.L(n.coords.longitude,n.coords.latitude),d=n.coords.accuracy,y=this._map.getBearing(),b=a.e({bearing:y},this.options.fitBoundsOptions),F=pe.fromLngLat(u,d);this._map.fitBounds(F,b,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const u=new a.L(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=n=>{if(this._map){if(this.options.trackUserLocation)if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&QA)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=n=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=_.create("button","maplibregl-ctrl-geolocate",this._container),_.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",n===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new es({element:this._dotElement}),this._circleElement=_.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new es({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")))})}},this.options=a.e({},Ai,v)}onAdd(v){return this._map=v,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;ui===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(d=>{ui=d.state!=="denied",n(ui)}).catch(()=>{ui=!!window.navigator.geolocation,n(ui)}):(ui=!!window.navigator.geolocation,n(ui)):n(ui)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ui=0,QA=!1}_isOutOfMapMaxBounds(v){const n=this._map.getMaxBounds(),u=v.coords;return n&&(u.longitude<n.getWest()||u.longitude>n.getEast()||u.latitude<n.getSouth()||u.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),n=v.getSouthEast(),u=v.getNorthEast(),d=n.distanceTo(u),y=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ui--,QA=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ui++,Ui>1?(v={maximumAge:6e5,timeout:0},QA=!0):(v=this.options.positionOptions,QA=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},ni.AttributionControl=cs,ni.LogoControl=xi,ni.ScaleControl=class{constructor(v){this._onMove=()=>{DA(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,DA(this._map,this._container,this.options)},this.options=a.e({},kA,v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},ni.FullscreenControl=class extends a.E{constructor(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){_.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=_.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);_.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},ni.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=v}onAdd(v){return this._map=v,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=_.create("button","maplibregl-ctrl-terrain",this._container),_.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){_.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},ni.Popup=class extends a.E{constructor(v){super(),this.remove=()=>(this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.k("close")),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=_.create("div","maplibregl-popup",this._map.getContainer()),this._tip=_.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const F of this.options.className.split(" "))this._container.classList.add(F);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ia(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!n)return;const u=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);let d=this.options.anchor;const y=Ra(this.options.offset);if(!d){const F=this._container.offsetWidth,T=this._container.offsetHeight;let k;k=u.y+y.bottom.y<T?["top"]:u.y>this._map.transform.height-T?["bottom"]:[],u.x<F/2?k.push("left"):u.x>this._map.transform.width-F/2&&k.push("right"),d=k.length===0?"bottom":k.join("-")}const b=u.add(y[d]).round();_.setTransform(this._container,`${Qs[d]} translate(${b.x}px,${b.y}px)`),Xc(this._container,d,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(lc),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=a.L.convert(v),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const n=document.createDocumentFragment(),u=document.createElement("body");let d;for(u.innerHTML=v;d=u.firstChild,d;)n.appendChild(d);return this.setDOMContent(n)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){this._container&&this._container.classList.add(v)}removeClassName(v){this._container&&this._container.classList.remove(v)}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}_createCloseButton(){this.options.closeButton&&(this._closeButton=_.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Yc);v&&v.focus()}},ni.Marker=es,ni.Style=Wr,ni.LngLat=a.L,ni.LngLatBounds=pe,ni.Point=a.P,ni.MercatorCoordinate=a.U,ni.Evented=a.E,ni.AJAXError=a.bi,ni.config=a.c,ni.CanvasSource=zt,ni.GeoJSONSource=st,ni.ImageSource=Ct,ni.RasterDEMTileSource=tt,ni.RasterTileSource=Ge,ni.VectorTileSource=Re,ni.VideoSource=Et,ni.setRTLTextPlugin=a.bj,ni.getRTLTextPluginStatus=a.bk,ni.prewarm=function(){qr().acquire(Lt)},ni.clearPrewarmedResources=function(){const v=Lr;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(Lt),Lr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},NA.extend(ni,{isSafari:a.ac,getPerformanceMetrics:a.bg.getPerformanceMetrics}),ni});var p=l;return p})})(rv);var iv=rv.exports;const zs=vg(iv);class b4{constructor(){this._bearing=0,this._pitch=60,this._minpitchzoom=null}onAdd(e){this._map=e;let t=this;return this._btn=document.createElement("button"),this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-pitchtoggle-3d",this._btn.id="bt3D",this._btn.type="button",this._btn["aria-label"]="Vista 3D",this._btn.onclick=function(){if(t._btn.className.indexOf("3d")!=-1){let _={pitch:t._pitch,bearing:t._bearing};t._minpitchzoom&&e.getZoom()>t._minpitchzoom&&(_.zoom=t._minpitchzoom);var s=0,l=38.5,c=6,p=62.33,{longitude:a,latitude:g}=e.getCenter();e.getZoom()<10?e.setTerrain({source:"terrainMapZen",exaggeration:1.5}):a>=s&&a<=c&&g>=l&&g<=p?e.setTerrain({source:"terrainICGC",exaggeration:1.2}):e.setTerrain({source:"terrainMapZen",exaggeration:1.5}),e.easeTo(_),t._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-pitchtoggle-2d"}else e.setTerrain(null),e.easeTo({pitch:0,bearing:0}),t._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-pitchtoggle-3d"},this._container=document.createElement("div"),this._container.className="maplibregl-ctrl maplibregl-ctrl-group",this._container.title="Vista 3D",this._container.appendChild(this._btn),this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}}var x4=Object.defineProperty,B4=(i,e,t)=>e in i?x4(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Mi=(i,e,t)=>(B4(i,typeof e!="symbol"?e+"":e,t),t);let C4=class{constructor(e){Mi(this,"map"),Mi(this,"width"),Mi(this,"height"),Mi(this,"svgCanvas"),Mi(this,"xLine"),Mi(this,"yLine"),Mi(this,"color","#535353"),this.map=e,this.mapResize=this.mapResize.bind(this)}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var e,t;this.width=(e=this.map)==null?void 0:e.getCanvas().clientWidth,this.height=(t=this.map)==null?void 0:t.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const e=this.width/2,t=this.height/2;this.yLine.setAttribute("x1",`${e}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${e}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${t}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${t}px`)}else console.error("element value is null")}createCanvas(e){if(this.width!==void 0&&this.height!==void 0){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.style.position="relative",t.setAttribute("width",`${this.width}px`),t.setAttribute("height",`${this.height}px`);const s=this.width/2,l=this.height/2;this.yLine=t.appendChild(this.createLine(s,0,s,this.height,this.color,"2px")),this.xLine=t.appendChild(this.createLine(0,l,this.width,l,this.color,"2px")),e==null||e.appendChild(t),this.svgCanvas=t}}createLine(e,t,s,l,c,p){const a=document.createElementNS("http://www.w3.org/2000/svg","line");return a.setAttribute("x1",e),a.setAttribute("y1",t),a.setAttribute("x2",s),a.setAttribute("y2",l),a.setAttribute("stroke-dasharray","5,5"),a.setAttribute("stroke",c),a.setAttribute("stroke-width",p),a}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}};function fi(i){"@babel/helpers - typeof";return fi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fi(i)}var Hs=Uint8Array,Vs=Uint16Array,ph=Uint32Array,Dp=new Hs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Np=new Hs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_g=new Hs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nv=function(i,e){for(var t=new Vs(31),s=0;s<31;++s)t[s]=e+=1<<i[s-1];for(var l=new ph(t[30]),s=1;s<30;++s)for(var c=t[s];c<t[s+1];++c)l[c]=c-t[s]<<5|s;return[t,l]},sv=nv(Dp,2),av=sv[0],wg=sv[1];av[28]=258,wg[258]=28;for(var ov=nv(Np,0),S4=ov[0],Av=ov[1],bg=new Vs(32768),zi=0;zi<32768;++zi){var Il=(zi&43690)>>>1|(zi&21845)<<1;Il=(Il&52428)>>>2|(Il&13107)<<2,Il=(Il&61680)>>>4|(Il&3855)<<4,bg[zi]=((Il&65280)>>>8|(Il&255)<<8)>>>1}for(var sA=function(i,e,t){for(var s=i.length,l=0,c=new Vs(e);l<s;++l)++c[i[l]-1];var p=new Vs(e);for(l=0;l<e;++l)p[l]=p[l-1]+c[l-1]<<1;var a;if(t){a=new Vs(1<<e);var g=15-e;for(l=0;l<s;++l)if(i[l])for(var _=l<<4|i[l],C=e-i[l],L=p[i[l]-1]++<<C,M=L|(1<<C)-1;L<=M;++L)a[bg[L]>>>g]=_}else for(a=new Vs(s),l=0;l<s;++l)a[l]=bg[p[i[l]-1]++]>>>15-i[l];return a},Ll=new Hs(288),zi=0;zi<144;++zi)Ll[zi]=8;for(var zi=144;zi<256;++zi)Ll[zi]=9;for(var zi=256;zi<280;++zi)Ll[zi]=7;for(var zi=280;zi<288;++zi)Ll[zi]=8;for(var dh=new Hs(32),zi=0;zi<32;++zi)dh[zi]=5;var E4=sA(Ll,9,0),F4=sA(Ll,9,1),I4=sA(dh,5,0),L4=sA(dh,5,1),xg=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},uo=function(i,e,t){var s=e/8>>0;return(i[s]|i[s+1]<<8)>>>(e&7)&t},Bg=function(i,e){var t=e/8>>0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>>(e&7)},Cg=function(i){return(i/8>>0)+(i&7&&1)},lv=function(i,e,t){(e==null||e<0)&&(e=0),(t==null||t>i.length)&&(t=i.length);var s=new(i instanceof Vs?Vs:i instanceof ph?ph:Hs)(t-e);return s.set(i.subarray(e,t)),s},T4=function(i,e,t){var s=i.length,l=!e||t,c=!t||t.i;t||(t={}),e||(e=new Hs(s*3));var p=function(Ge){var tt=e.length;if(Ge>tt){var st=new Hs(Math.max(tt*2,Ge));st.set(e),e=st}},a=t.f||0,g=t.p||0,_=t.b||0,C=t.l,L=t.d,M=t.m,I=t.n,G=s*8;do{if(!C){t.f=a=uo(i,g,1);var j=uo(i,g+1,3);if(g+=3,j)if(j==1)C=F4,L=L4,M=9,I=5;else if(j==2){var Y=uo(i,g,31)+257,q=uo(i,g+10,15)+4,ne=Y+uo(i,g+5,31)+1;g+=14;for(var he=new Hs(ne),Se=new Hs(19),Ne=0;Ne<q;++Ne)Se[_g[Ne]]=uo(i,g+Ne*3,7);g+=q*3;var Pe=xg(Se),Ee=(1<<Pe)-1;if(!c&&g+ne*(Pe+7)>G)break;for(var fe=sA(Se,Pe,1),Ne=0;Ne<ne;){var We=fe[uo(i,g,Ee)];g+=We&15;var Ke=We>>>4;if(Ke<16)he[Ne++]=Ke;else{var ce=0,Ae=0;for(Ke==16?(Ae=3+uo(i,g,3),g+=2,ce=he[Ne-1]):Ke==17?(Ae=3+uo(i,g,7),g+=3):Ke==18&&(Ae=11+uo(i,g,127),g+=7);Ae--;)he[Ne++]=ce}}var xe=he.subarray(0,Y),_e=he.subarray(Y);M=xg(xe),I=xg(_e),C=sA(xe,M,1),L=sA(_e,I,1)}else throw"invalid block type";else{var Ke=Cg(g)+4,et=i[Ke-4]|i[Ke-3]<<8,Je=Ke+et;if(Je>s){if(c)throw"unexpected EOF";break}l&&p(_+et),e.set(i.subarray(Ke,Je),_),t.b=_+=et,t.p=g=Je*8;continue}if(g>G)throw"unexpected EOF"}l&&p(_+131072);for(var rt=(1<<M)-1,Ye=(1<<I)-1,it=M+I+18;c||g+it<G;){var ce=C[Bg(i,g)&rt],nt=ce>>>4;if(g+=ce&15,g>G)throw"unexpected EOF";if(!ce)throw"invalid length/literal";if(nt<256)e[_++]=nt;else if(nt==256){C=null;break}else{var Bt=nt-254;if(nt>264){var Ne=nt-257,ee=Dp[Ne];Bt=uo(i,g,(1<<ee)-1)+av[Ne],g+=ee}var pe=L[Bg(i,g)&Ye],ye=pe>>>4;if(!pe)throw"invalid distance";g+=pe&15;var _e=S4[ye];if(ye>3){var ee=Np[ye];_e+=Bg(i,g)&(1<<ee)-1,g+=ee}if(g>G)throw"unexpected EOF";l&&p(_+131072);for(var Re=_+Bt;_<Re;_+=4)e[_]=e[_-_e],e[_+1]=e[_+1-_e],e[_+2]=e[_+2-_e],e[_+3]=e[_+3-_e];_=Re}}t.l=C,t.p=g,t.b=_,C&&(a=1,t.m=M,t.d=L,t.n=I)}while(!a);return _==e.length?e:lv(e,0,_)},qA=function(i,e,t){t<<=e&7;var s=e/8>>0;i[s]|=t,i[s+1]|=t>>>8},fh=function(i,e,t){t<<=e&7;var s=e/8>>0;i[s]|=t,i[s+1]|=t>>>8,i[s+2]|=t>>>16},Sg=function(i,e){for(var t=[],s=0;s<i.length;++s)i[s]&&t.push({s,f:i[s]});var l=t.length,c=t.slice();if(!l)return[new Hs(0),0];if(l==1){var p=new Hs(t[0].s+1);return p[t[0].s]=1,[p,1]}t.sort(function(Ne,Pe){return Ne.f-Pe.f}),t.push({s:-1,f:25001});var a=t[0],g=t[1],_=0,C=1,L=2;for(t[0]={s:-1,f:a.f+g.f,l:a,r:g};C!=l-1;)a=t[t[_].f<t[L].f?_++:L++],g=t[_!=C&&t[_].f<t[L].f?_++:L++],t[C++]={s:-1,f:a.f+g.f,l:a,r:g};for(var M=c[0].s,s=1;s<l;++s)c[s].s>M&&(M=c[s].s);var I=new Vs(M+1),G=Eg(t[C-1],I,0);if(G>e){var s=0,j=0,Y=G-e,q=1<<Y;for(c.sort(function(Pe,Ee){return I[Ee.s]-I[Pe.s]||Pe.f-Ee.f});s<l;++s){var ne=c[s].s;if(I[ne]>e)j+=q-(1<<G-I[ne]),I[ne]=e;else break}for(j>>>=Y;j>0;){var he=c[s].s;I[he]<e?j-=1<<e-I[he]++-1:++s}for(;s>=0&&j;--s){var Se=c[s].s;I[Se]==e&&(--I[Se],++j)}G=e}return[new Hs(I),G]},Eg=function(i,e,t){return i.s==-1?Math.max(Eg(i.l,e,t+1),Eg(i.r,e,t+1)):e[i.s]=t},cv=function(i){for(var e=i.length;e&&!i[--e];);for(var t=new Vs(++e),s=0,l=i[0],c=1,p=function(g){t[s++]=g},a=1;a<=e;++a)if(i[a]==l&&a!=e)++c;else{if(!l&&c>2){for(;c>138;c-=138)p(32754);c>2&&(p(c>10?c-11<<5|28690:c-3<<5|12305),c=0)}else if(c>3){for(p(l),--c;c>6;c-=6)p(8304);c>2&&(p(c-3<<5|8208),c=0)}for(;c--;)p(l);c=1,l=i[a]}return[t.subarray(0,s),e]},gh=function(i,e){for(var t=0,s=0;s<e.length;++s)t+=i[s]*e[s];return t},Op=function(i,e,t){var s=t.length,l=Cg(e+2);i[l]=s&255,i[l+1]=s>>>8,i[l+2]=i[l]^255,i[l+3]=i[l+1]^255;for(var c=0;c<s;++c)i[l+c+4]=t[c];return(l+4+s)*8},uv=function(i,e,t,s,l,c,p,a,g,_,C){qA(e,C++,t),++l[256];for(var L=Sg(l,15),M=L[0],I=L[1],G=Sg(c,15),j=G[0],Y=G[1],q=cv(M),ne=q[0],he=q[1],Se=cv(j),Ne=Se[0],Pe=Se[1],Ee=new Vs(19),fe=0;fe<ne.length;++fe)Ee[ne[fe]&31]++;for(var fe=0;fe<Ne.length;++fe)Ee[Ne[fe]&31]++;for(var We=Sg(Ee,7),Ke=We[0],ce=We[1],Ae=19;Ae>4&&!Ke[_g[Ae-1]];--Ae);var xe=_+5<<3,_e=gh(l,Ll)+gh(c,dh)+p,et=gh(l,M)+gh(c,j)+p+14+3*Ae+gh(Ee,Ke)+(2*Ee[16]+3*Ee[17]+7*Ee[18]);if(xe<=_e&&xe<=et)return Op(e,C,i.subarray(g,g+_));var Je,rt,Ye,it;if(qA(e,C,1+(et<_e)),C+=2,et<_e){Je=sA(M,I,0),rt=M,Ye=sA(j,Y,0),it=j;var nt=sA(Ke,ce,0);qA(e,C,he-257),qA(e,C+5,Pe-1),qA(e,C+10,Ae-4),C+=14;for(var fe=0;fe<Ae;++fe)qA(e,C+3*fe,Ke[_g[fe]]);C+=3*Ae;for(var Bt=[ne,Ne],ee=0;ee<2;++ee)for(var pe=Bt[ee],fe=0;fe<pe.length;++fe){var ye=pe[fe]&31;qA(e,C,nt[ye]),C+=Ke[ye],ye>15&&(qA(e,C,pe[fe]>>>5&127),C+=pe[fe]>>>12)}}else Je=E4,rt=Ll,Ye=I4,it=dh;for(var fe=0;fe<a;++fe)if(s[fe]>255){var ye=s[fe]>>>18&31;fh(e,C,Je[ye+257]),C+=rt[ye+257],ye>7&&(qA(e,C,s[fe]>>>23&31),C+=Dp[ye]);var Re=s[fe]&31;fh(e,C,Ye[Re]),C+=it[Re],Re>3&&(fh(e,C,s[fe]>>>5&8191),C+=Np[Re])}else fh(e,C,Je[s[fe]]),C+=rt[s[fe]];return fh(e,C,Je[256]),C+rt[256]},U4=new ph([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),P4=new Hs(0),M4=function(i,e,t,s,l,c){var p=i.length,a=new Hs(s+p+5*(1+Math.floor(p/7e3))+l),g=a.subarray(s,a.length-l),_=0;if(!e||p<8)for(var C=0;C<=p;C+=65535){var L=C+65535;L<p?_=Op(g,_,i.subarray(C,L)):(g[C]=c,_=Op(g,_,i.subarray(C,p)))}else{for(var M=U4[e-1],I=M>>>13,G=M&8191,j=(1<<t)-1,Y=new Vs(32768),q=new Vs(j+1),ne=Math.ceil(t/3),he=2*ne,Se=function(Jt){return(i[Jt]^i[Jt+1]<<ne^i[Jt+2]<<he)&j},Ne=new ph(25e3),Pe=new Vs(288),Ee=new Vs(32),fe=0,We=0,C=0,Ke=0,ce=0,Ae=0;C<p;++C){var xe=Se(C),_e=C&32767,et=q[xe];if(Y[_e]=et,q[xe]=_e,ce<=C){var Je=p-C;if((fe>7e3||Ke>24576)&&Je>423){_=uv(i,g,0,Ne,Pe,Ee,We,Ke,Ae,C-Ae,_),Ke=fe=We=0,Ae=C;for(var rt=0;rt<286;++rt)Pe[rt]=0;for(var rt=0;rt<30;++rt)Ee[rt]=0}var Ye=2,it=0,nt=G,Bt=_e-et&32767;if(Je>2&&xe==Se(C-Bt))for(var ee=Math.min(I,Je)-1,pe=Math.min(32767,C),ye=Math.min(258,Je);Bt<=pe&&--nt&&_e!=et;){if(i[C+Ye]==i[C+Ye-Bt]){for(var Re=0;Re<ye&&i[C+Re]==i[C+Re-Bt];++Re);if(Re>Ye){if(Ye=Re,it=Bt,Re>ee)break;for(var Ge=Math.min(Bt,Re-2),tt=0,rt=0;rt<Ge;++rt){var st=C-Bt+rt+32768&32767,ot=Y[st],Ct=st-ot+32768&32767;Ct>tt&&(tt=Ct,et=st)}}}_e=et,et=Y[_e],Bt+=_e-et+32768&32767}if(it){Ne[Ke++]=268435456|wg[Ye]<<18|Av[it];var Et=wg[Ye]&31,zt=Av[it]&31;We+=Dp[Et]+Np[zt],++Pe[257+Et],++Ee[zt],ce=C+Ye,++fe}else Ne[Ke++]=i[C],++Pe[i[C]]}}_=uv(i,g,c,Ne,Pe,Ee,We,Ke,Ae,C-Ae,_),c||(_=Op(g,_,P4))}return lv(a,0,s+Cg(_)+l)},Q4=function(){var i=1,e=0;return{p:function(t){for(var s=i,l=e,c=t.length,p=0;p!=c;){for(var a=Math.min(p+5552,c);p<a;++p)s+=t[p],l+=s;s%=65521,l%=65521}i=s,e=l},d:function(){return(i>>>8<<16|(e&255)<<8|e>>>8)+((i&255)<<23)*2}}},k4=function(i,e,t,s,l){return M4(i,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):12+e.mem,t,s,!l)},D4=function(i,e,t){for(;t;++e)i[e]=t,t>>>=8},N4=function(i,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;i[0]=120,i[1]=s<<6|(s?32-2*s:1)},O4=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Fg(i,e){e===void 0&&(e={});var t=Q4();t.p(i);var s=k4(i,e,2,4);return N4(s,e),D4(s,s.length-4,t.d()),s}function R4(i,e){return T4((O4(i),i.subarray(2,-4)),e)}/** @license
*
* jsPDF - PDF Document creation from JavaScript
* Version 2.5.1 Built on 2022-01-28T15:37:57.791Z
*                      CommitID 00000000
*
* Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
*               2015-2021 yWorks GmbH, http://www.yworks.com
*               2015-2021 Lukas Hollnder <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
*               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
*               2010 Aaron Spike, https://github.com/acspike
*               2012 Willow Systems Corporation, https://github.com/willowsystems
*               2012 Pablo Hess, https://github.com/pablohess
*               2012 Florian Jenett, https://github.com/fjenett
*               2013 Warren Weckesser, https://github.com/warrenweckesser
*               2013 Youssef Beddad, https://github.com/lifof
*               2013 Lee Driscoll, https://github.com/lsdriscoll
*               2013 Stefan Slonevskiy, https://github.com/stefslon
*               2013 Jeremy Morel, https://github.com/jmorel
*               2013 Christoph Hartmann, https://github.com/chris-rock
*               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
*               2014 James Makes, https://github.com/dollaruw
*               2014 Diego Casorran, https://github.com/diegocr
*               2014 Steven Spungin, https://github.com/Flamenco
*               2014 Kenneth Glassey, https://github.com/Gavvers
*
* Permission is hereby granted, free of charge, to any person obtaining
* a copy of this software and associated documentation files (the
* "Software"), to deal in the Software without restriction, including
* without limitation the rights to use, copy, modify, merge, publish,
* distribute, sublicense, and/or sell copies of the Software, and to
* permit persons to whom the Software is furnished to do so, subject to
* the following conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
* MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
* LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
* OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
* WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*
* Contributor(s):
*    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
*    kim3er, mfo, alnorth, Flamenco
*/var Pr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Ig(){Pr.console&&typeof Pr.console.log=="function"&&Pr.console.log.apply(Pr.console,arguments)}var Qi={log:Ig,warn:function(i){Pr.console&&(typeof Pr.console.warn=="function"?Pr.console.warn.apply(Pr.console,arguments):Ig.call(null,arguments))},error:function(i){Pr.console&&(typeof Pr.console.error=="function"?Pr.console.error.apply(Pr.console,arguments):Ig(i))}};function Lg(i,e,t){var s=new XMLHttpRequest;s.open("GET",i),s.responseType="blob",s.onload=function(){vc(s.response,e,t)},s.onerror=function(){Qi.error("could not download file")},s.send()}function hv(i){var e=new XMLHttpRequest;e.open("HEAD",i,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Rp(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(e)}}var mh,Tg,vc=Pr.saveAs||((typeof window>"u"?"undefined":fi(window))!=="object"||window!==Pr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,e,t){var s=Pr.URL||Pr.webkitURL,l=document.createElement("a");e=e||i.name||"download",l.download=e,l.rel="noopener",typeof i=="string"?(l.href=i,l.origin!==location.origin?hv(l.href)?Lg(i,e,t):Rp(l,l.target="_blank"):Rp(l)):(l.href=s.createObjectURL(i),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){Rp(l)},0))}:"msSaveOrOpenBlob"in navigator?function(i,e,t){if(e=e||i.name||"download",typeof i=="string")if(hv(i))Lg(i,e,t);else{var s=document.createElement("a");s.href=i,s.target="_blank",setTimeout(function(){Rp(s)})}else navigator.msSaveOrOpenBlob(function(l,c){return c===void 0?c={autoBom:!1}:fi(c)!=="object"&&(Qi.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}(i,t),e)}:function(i,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof i=="string")return Lg(i,e,t);var l=i.type==="application/octet-stream",c=/constructor/i.test(Pr.HTMLElement)||Pr.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||l&&c)&&(typeof FileReader>"u"?"undefined":fi(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var C=a.result;C=p?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=C:location=C,s=null},a.readAsDataURL(i)}else{var g=Pr.URL||Pr.webkitURL,_=g.createObjectURL(i);s?s.location=_:location.href=_,s=null,setTimeout(function(){g.revokeObjectURL(_)},4e4)}});/**
* A class to parse color values
* @author Stoyan Stefanov <sstoo@gmail.com>
* {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
* @license Use it if you like it
*/function pv(i){var e;i=i||"",this.ok=!1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],s=0;s<t.length;s++){var l=t[s].re,c=t[s].process,p=l.exec(i);p&&(e=c(p),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),g=this.g.toString(16),_=this.b.toString(16);return a.length==1&&(a="0"+a),g.length==1&&(g="0"+g),_.length==1&&(_="0"+_),"#"+a+g+_}}/**
* @license
* Joseph Myers does not specify a particular license for his work.
*
* Author: Joseph Myers
* Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
*
* Modified by: Owen Leong
*/function Ug(i,e){var t=i[0],s=i[1],l=i[2],c=i[3];t=vs(t,s,l,c,e[0],7,-680876936),c=vs(c,t,s,l,e[1],12,-389564586),l=vs(l,c,t,s,e[2],17,606105819),s=vs(s,l,c,t,e[3],22,-1044525330),t=vs(t,s,l,c,e[4],7,-176418897),c=vs(c,t,s,l,e[5],12,1200080426),l=vs(l,c,t,s,e[6],17,-1473231341),s=vs(s,l,c,t,e[7],22,-45705983),t=vs(t,s,l,c,e[8],7,1770035416),c=vs(c,t,s,l,e[9],12,-1958414417),l=vs(l,c,t,s,e[10],17,-42063),s=vs(s,l,c,t,e[11],22,-1990404162),t=vs(t,s,l,c,e[12],7,1804603682),c=vs(c,t,s,l,e[13],12,-40341101),l=vs(l,c,t,s,e[14],17,-1502002290),t=_s(t,s=vs(s,l,c,t,e[15],22,1236535329),l,c,e[1],5,-165796510),c=_s(c,t,s,l,e[6],9,-1069501632),l=_s(l,c,t,s,e[11],14,643717713),s=_s(s,l,c,t,e[0],20,-373897302),t=_s(t,s,l,c,e[5],5,-701558691),c=_s(c,t,s,l,e[10],9,38016083),l=_s(l,c,t,s,e[15],14,-660478335),s=_s(s,l,c,t,e[4],20,-405537848),t=_s(t,s,l,c,e[9],5,568446438),c=_s(c,t,s,l,e[14],9,-1019803690),l=_s(l,c,t,s,e[3],14,-187363961),s=_s(s,l,c,t,e[8],20,1163531501),t=_s(t,s,l,c,e[13],5,-1444681467),c=_s(c,t,s,l,e[2],9,-51403784),l=_s(l,c,t,s,e[7],14,1735328473),t=ws(t,s=_s(s,l,c,t,e[12],20,-1926607734),l,c,e[5],4,-378558),c=ws(c,t,s,l,e[8],11,-2022574463),l=ws(l,c,t,s,e[11],16,1839030562),s=ws(s,l,c,t,e[14],23,-35309556),t=ws(t,s,l,c,e[1],4,-1530992060),c=ws(c,t,s,l,e[4],11,1272893353),l=ws(l,c,t,s,e[7],16,-155497632),s=ws(s,l,c,t,e[10],23,-1094730640),t=ws(t,s,l,c,e[13],4,681279174),c=ws(c,t,s,l,e[0],11,-358537222),l=ws(l,c,t,s,e[3],16,-722521979),s=ws(s,l,c,t,e[6],23,76029189),t=ws(t,s,l,c,e[9],4,-640364487),c=ws(c,t,s,l,e[12],11,-421815835),l=ws(l,c,t,s,e[15],16,530742520),t=bs(t,s=ws(s,l,c,t,e[2],23,-995338651),l,c,e[0],6,-198630844),c=bs(c,t,s,l,e[7],10,1126891415),l=bs(l,c,t,s,e[14],15,-1416354905),s=bs(s,l,c,t,e[5],21,-57434055),t=bs(t,s,l,c,e[12],6,1700485571),c=bs(c,t,s,l,e[3],10,-1894986606),l=bs(l,c,t,s,e[10],15,-1051523),s=bs(s,l,c,t,e[1],21,-2054922799),t=bs(t,s,l,c,e[8],6,1873313359),c=bs(c,t,s,l,e[15],10,-30611744),l=bs(l,c,t,s,e[6],15,-1560198380),s=bs(s,l,c,t,e[13],21,1309151649),t=bs(t,s,l,c,e[4],6,-145523070),c=bs(c,t,s,l,e[11],10,-1120210379),l=bs(l,c,t,s,e[2],15,718787259),s=bs(s,l,c,t,e[9],21,-343485551),i[0]=Tl(t,i[0]),i[1]=Tl(s,i[1]),i[2]=Tl(l,i[2]),i[3]=Tl(c,i[3])}function zp(i,e,t,s,l,c){return e=Tl(Tl(e,i),Tl(s,c)),Tl(e<<l|e>>>32-l,t)}function vs(i,e,t,s,l,c,p){return zp(e&t|~e&s,i,e,l,c,p)}function _s(i,e,t,s,l,c,p){return zp(e&s|t&~s,i,e,l,c,p)}function ws(i,e,t,s,l,c,p){return zp(e^t^s,i,e,l,c,p)}function bs(i,e,t,s,l,c,p){return zp(t^(e|~s),i,e,l,c,p)}function dv(i){var e,t=i.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=i.length;e+=64)Ug(s,z4(i.substring(e-64,e)));i=i.substring(e-64);var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i.length;e++)l[e>>2]|=i.charCodeAt(e)<<(e%4<<3);if(l[e>>2]|=128<<(e%4<<3),e>55)for(Ug(s,l),e=0;e<16;e++)l[e]=0;return l[14]=8*t,Ug(s,l),s}function z4(i){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=i.charCodeAt(e)+(i.charCodeAt(e+1)<<8)+(i.charCodeAt(e+2)<<16)+(i.charCodeAt(e+3)<<24);return t}mh=Pr.atob.bind(Pr),Tg=Pr.btoa.bind(Pr);var fv="0123456789abcdef".split("");function H4(i){for(var e="",t=0;t<4;t++)e+=fv[i>>8*t+4&15]+fv[i>>8*t&15];return e}function V4(i){return String.fromCharCode((255&i)>>0,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function Pg(i){return dv(i).map(V4).join("")}var j4=function(i){for(var e=0;e<i.length;e++)i[e]=H4(i[e]);return i.join("")}(dv("hello"))!="5d41402abc4b2a76b9719d911017c592";function Tl(i,e){if(j4){var t=(65535&i)+(65535&e);return(i>>16)+(e>>16)+(t>>16)<<16|65535&t}return i+e&4294967295}/**
* @license
* FPDF is released under a permissive license: there is no usage restriction.
* You may embed it freely in your application (commercial or not), with or
* without modifications.
*
* Reference: http://www.fpdf.org/en/script/script37.php
*/function Mg(i,e){var t,s,l,c;if(i!==t){for(var p=(l=i,c=1+(256/i.length>>0),new Array(c+1).join(l)),a=[],g=0;g<256;g++)a[g]=g;var _=0;for(g=0;g<256;g++){var C=a[g];_=(_+C+p.charCodeAt(g))%256,a[g]=a[_],a[_]=C}t=i,s=a}else a=s;var L=e.length,M=0,I=0,G="";for(g=0;g<L;g++)I=(I+(C=a[M=(M+1)%256]))%256,a[M]=a[I],a[I]=C,p=a[(a[M]+a[I])%256],G+=String.fromCharCode(e.charCodeAt(g)^p);return G}/**
* @license
* Licensed under the MIT License.
* http://opensource.org/licenses/mit-license
* Author: Owen Leong (@owenl131)
* Date: 15 Oct 2020
* References:
* https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
* https://github.com/foliojs/pdfkit/blob/master/lib/security.js
* http://www.fpdf.org/en/script/script37.php
*/var gv={print:4,modify:8,copy:16,"annot-forms":32};function lu(i,e,t,s){this.v=1,this.r=2;var l=192;i.forEach(function(a){if(gv.perm!==void 0)throw new Error("Invalid permission: "+a);l+=gv[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var c=(e+this.padding).substr(0,32),p=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(c,p),this.P=-(1+(255^l)),this.encryptionKey=Pg(c+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Mg(this.encryptionKey,this.padding)}function cu(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var e="",t=i.length,s=0;s<t;s++){var l=i.charCodeAt(s);l<33||l===35||l===37||l===40||l===41||l===47||l===60||l===62||l===91||l===93||l===123||l===125||l>126?e+="#"+("0"+l.toString(16)).slice(-2):e+=i[s]}return e}function mv(i){if(fi(i)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,l){if(l=l||!1,typeof t!="string"||typeof s!="function"||typeof l!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var c=Math.random().toString(35);return e[t][c]=[s,!!l],c},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),l=[];for(var c in e[t]){var p=e[t][c];try{p[0].apply(i,s)}catch(a){Pr.console&&Qi.error("jsPDF PubSub Error",a.message,a)}p[1]&&l.push(c)}l.length&&l.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Hp(i){if(!(this instanceof Hp))return new Hp(i);var e="opacity,stroke-opacity".split(",");for(var t in i)i.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=i[t]);this.id="",this.objectNumber=-1}function yv(i,e){this.gState=i,this.matrix=e,this.id="",this.objectNumber=-1}function _c(i,e,t,s,l){if(!(this instanceof _c))return new _c(i,e,t,s,l);this.type=i==="axial"?2:3,this.coords=e,this.colors=t,yv.call(this,s,l)}function uu(i,e,t,s,l){if(!(this instanceof uu))return new uu(i,e,t,s,l);this.boundingBox=i,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,yv.call(this,s,l)}function Mr(i){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],l=arguments[2],c=arguments[3],p=[],a=1,g=16,_="S",C=null;fi(i=i||{})==="object"&&(t=i.orientation,s=i.unit||s,l=i.format||l,c=i.compress||i.compressPdf||c,(C=i.encryption||null)!==null&&(C.userPassword=C.userPassword||"",C.ownerPassword=C.ownerPassword||"",C.userPermissions=C.userPermissions||[]),a=typeof i.userUnit=="number"?Math.abs(i.userUnit):1,i.precision!==void 0&&(e=i.precision),i.floatPrecision!==void 0&&(g=i.floatPrecision),_=i.defaultPathOperation||"S"),p=i.filters||(c===!0?["FlateEncode"]:p),s=s||"mm",t=(""+(t||"P")).toLowerCase();var L=i.putOnlyUsedFonts||!1,M={},I={internal:{},__private__:{}};I.__private__.PubSub=mv;var G="1.3",j=I.__private__.getPdfVersion=function(){return G};I.__private__.setPdfVersion=function(P){G=P};var Y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};I.__private__.getPageFormats=function(){return Y};var q=I.__private__.getPageFormat=function(P){return Y[P]};l=l||"a4";var ne={COMPAT:"compat",ADVANCED:"advanced"},he=ne.COMPAT;function Se(){this.saveGraphicsState(),Me(new De(Rt,0,0,-Rt,0,Wn()*Rt).toString()+" cm"),this.setFontSize(this.getFontSize()/Rt),_="n",he=ne.ADVANCED}function Ne(){this.restoreGraphicsState(),_="S",he=ne.COMPAT}var Pe=I.__private__.combineFontStyleAndFontWeight=function(P,J){if(P=="bold"&&J=="normal"||P=="bold"&&J==400||P=="normal"&&J=="italic"||P=="bold"&&J=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return J&&(P=J==400||J==="normal"?P==="italic"?"italic":"normal":J!=700&&J!=="bold"||P!=="normal"?(J==700?"bold":J)+""+P:"bold"),P};I.advancedAPI=function(P){var J=he===ne.COMPAT;return J&&Se.call(this),typeof P!="function"||(P(this),J&&Ne.call(this)),this},I.compatAPI=function(P){var J=he===ne.ADVANCED;return J&&Ne.call(this),typeof P!="function"||(P(this),J&&Se.call(this)),this},I.isAdvancedAPI=function(){return he===ne.ADVANCED};var Ee,fe=function(P){if(he!==ne.ADVANCED)throw new Error(P+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},We=I.roundToPrecision=I.__private__.roundToPrecision=function(P,J){var Ce=e||J;if(isNaN(P)||isNaN(Ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return P.toFixed(Ce).replace(/0+$/,"")};Ee=I.hpf=I.__private__.hpf=typeof g=="number"?function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return We(P,g)}:g==="smart"?function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return We(P,P>-1&&P<1?16:5)}:function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return We(P,16)};var Ke=I.f2=I.__private__.f2=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.f2");return We(P,2)},ce=I.__private__.f3=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.f3");return We(P,3)},Ae=I.scale=I.__private__.scale=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.scale");return he===ne.COMPAT?P*Rt:he===ne.ADVANCED?P:void 0},xe=function(P){return he===ne.COMPAT?Wn()-P:he===ne.ADVANCED?P:void 0},_e=function(P){return Ae(xe(P))};I.__private__.setPrecision=I.setPrecision=function(P){typeof parseInt(P,10)=="number"&&(e=parseInt(P,10))};var et,Je="00000000000000000000000000000000",rt=I.__private__.getFileId=function(){return Je},Ye=I.__private__.setFileId=function(P){return Je=P!==void 0&&/^[a-fA-F0-9]{32}$/.test(P)?P.toUpperCase():Je.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),C!==null&&(gn=new lu(C.userPermissions,C.userPassword,C.ownerPassword,Je)),Je};I.setFileId=function(P){return Ye(P),this},I.getFileId=function(){return rt()};var it=I.__private__.convertDateToPDFDate=function(P){var J=P.getTimezoneOffset(),Ce=J<0?"+":"-",qe=Math.floor(Math.abs(J/60)),$e=Math.abs(J%60),ct=[Ce,ye(qe),"'",ye($e),"'"].join("");return["D:",P.getFullYear(),ye(P.getMonth()+1),ye(P.getDate()),ye(P.getHours()),ye(P.getMinutes()),ye(P.getSeconds()),ct].join("")},nt=I.__private__.convertPDFDateToDate=function(P){var J=parseInt(P.substr(2,4),10),Ce=parseInt(P.substr(6,2),10)-1,qe=parseInt(P.substr(8,2),10),$e=parseInt(P.substr(10,2),10),ct=parseInt(P.substr(12,2),10),Tt=parseInt(P.substr(14,2),10);return new Date(J,Ce,qe,$e,ct,Tt,0)},Bt=I.__private__.setCreationDate=function(P){var J;if(P===void 0&&(P=new Date),P instanceof Date)J=it(P);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(P))throw new Error("Invalid argument passed to jsPDF.setCreationDate");J=P}return et=J},ee=I.__private__.getCreationDate=function(P){var J=et;return P==="jsDate"&&(J=nt(et)),J};I.setCreationDate=function(P){return Bt(P),this},I.getCreationDate=function(P){return ee(P)};var pe,ye=I.__private__.padd2=function(P){return("0"+parseInt(P)).slice(-2)},Re=I.__private__.padd2Hex=function(P){return("00"+(P=P.toString())).substr(P.length)},Ge=0,tt=[],st=[],ot=0,Ct=[],Et=[],zt=!1,Vt=st,Jt=function(){Ge=0,ot=0,st=[],tt=[],Ct=[],sr=ht(),jt=ht()};I.__private__.setCustomOutputDestination=function(P){zt=!0,Vt=P};var ft=function(P){zt||(Vt=P)};I.__private__.resetCustomOutputDestination=function(){zt=!1,Vt=st};var Me=I.__private__.out=function(P){return P=P.toString(),ot+=P.length+1,Vt.push(P),Vt},fr=I.__private__.write=function(P){return Me(arguments.length===1?P.toString():Array.prototype.join.call(arguments," "))},Xt=I.__private__.getArrayBuffer=function(P){for(var J=P.length,Ce=new ArrayBuffer(J),qe=new Uint8Array(Ce);J--;)qe[J]=P.charCodeAt(J);return Ce},bt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];I.__private__.getStandardFonts=function(){return bt};var ze=i.fontSize||16;I.__private__.setFontSize=I.setFontSize=function(P){return ze=he===ne.ADVANCED?P/Rt:P,this};var Ut,Pt=I.__private__.getFontSize=I.getFontSize=function(){return he===ne.COMPAT?ze:ze*Rt},Mt=i.R2L||!1;I.__private__.setR2L=I.setR2L=function(P){return Mt=P,this},I.__private__.getR2L=I.getR2L=function(){return Mt};var Lt,hr=I.__private__.setZoomMode=function(P){var J=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(P))Ut=P;else if(isNaN(P)){if(J.indexOf(P)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+P+'" is not recognized.');Ut=P}else Ut=parseInt(P,10)};I.__private__.getZoomMode=function(){return Ut};var wr,Lr=I.__private__.setPageMode=function(P){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(P)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+P+'" is not recognized.');Lt=P};I.__private__.getPageMode=function(){return Lt};var qr=I.__private__.setLayoutMode=function(P){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(P)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+P+'" is not recognized.');wr=P};I.__private__.getLayoutMode=function(){return wr},I.__private__.setDisplayMode=I.setDisplayMode=function(P,J,Ce){return hr(P),qr(J),Lr(Ce),this};var gr={title:"",subject:"",author:"",keywords:"",creator:""};I.__private__.getDocumentProperty=function(P){if(Object.keys(gr).indexOf(P)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return gr[P]},I.__private__.getDocumentProperties=function(){return gr},I.__private__.setDocumentProperties=I.setProperties=I.setDocumentProperties=function(P){for(var J in gr)gr.hasOwnProperty(J)&&P[J]&&(gr[J]=P[J]);return this},I.__private__.setDocumentProperty=function(P,J){if(Object.keys(gr).indexOf(P)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return gr[P]=J};var br,Rt,vt,Cr,Tr,Dr={},Vr={},xt=[],$t={},rr={},Or={},bi={},Nt=null,Kr=0,ue=[],X=new mv(I),ie=i.hotfixes||[],le={},ve={},be=[],De=function P(J,Ce,qe,$e,ct,Tt){if(!(this instanceof P))return new P(J,Ce,qe,$e,ct,Tt);isNaN(J)&&(J=1),isNaN(Ce)&&(Ce=0),isNaN(qe)&&(qe=0),isNaN($e)&&($e=1),isNaN(ct)&&(ct=0),isNaN(Tt)&&(Tt=0),this._matrix=[J,Ce,qe,$e,ct,Tt]};Object.defineProperty(De.prototype,"sx",{get:function(){return this._matrix[0]},set:function(P){this._matrix[0]=P}}),Object.defineProperty(De.prototype,"shy",{get:function(){return this._matrix[1]},set:function(P){this._matrix[1]=P}}),Object.defineProperty(De.prototype,"shx",{get:function(){return this._matrix[2]},set:function(P){this._matrix[2]=P}}),Object.defineProperty(De.prototype,"sy",{get:function(){return this._matrix[3]},set:function(P){this._matrix[3]=P}}),Object.defineProperty(De.prototype,"tx",{get:function(){return this._matrix[4]},set:function(P){this._matrix[4]=P}}),Object.defineProperty(De.prototype,"ty",{get:function(){return this._matrix[5]},set:function(P){this._matrix[5]=P}}),Object.defineProperty(De.prototype,"a",{get:function(){return this._matrix[0]},set:function(P){this._matrix[0]=P}}),Object.defineProperty(De.prototype,"b",{get:function(){return this._matrix[1]},set:function(P){this._matrix[1]=P}}),Object.defineProperty(De.prototype,"c",{get:function(){return this._matrix[2]},set:function(P){this._matrix[2]=P}}),Object.defineProperty(De.prototype,"d",{get:function(){return this._matrix[3]},set:function(P){this._matrix[3]=P}}),Object.defineProperty(De.prototype,"e",{get:function(){return this._matrix[4]},set:function(P){this._matrix[4]=P}}),Object.defineProperty(De.prototype,"f",{get:function(){return this._matrix[5]},set:function(P){this._matrix[5]=P}}),Object.defineProperty(De.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(De.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(De.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(De.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),De.prototype.join=function(P){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Ee).join(P)},De.prototype.multiply=function(P){var J=P.sx*this.sx+P.shy*this.shx,Ce=P.sx*this.shy+P.shy*this.sy,qe=P.shx*this.sx+P.sy*this.shx,$e=P.shx*this.shy+P.sy*this.sy,ct=P.tx*this.sx+P.ty*this.shx+this.tx,Tt=P.tx*this.shy+P.ty*this.sy+this.ty;return new De(J,Ce,qe,$e,ct,Tt)},De.prototype.decompose=function(){var P=this.sx,J=this.shy,Ce=this.shx,qe=this.sy,$e=this.tx,ct=this.ty,Tt=Math.sqrt(P*P+J*J),wt=(P/=Tt)*Ce+(J/=Tt)*qe;Ce-=P*wt,qe-=J*wt;var mr=Math.sqrt(Ce*Ce+qe*qe);return wt/=mr,P*(qe/=mr)<J*(Ce/=mr)&&(P=-P,J=-J,wt=-wt,Tt=-Tt),{scale:new De(Tt,0,0,mr,0,0),translate:new De(1,0,0,1,$e,ct),rotate:new De(P,J,-J,P,0,0),skew:new De(1,0,wt,1,0,0)}},De.prototype.toString=function(P){return this.join(" ")},De.prototype.inversed=function(){var P=this.sx,J=this.shy,Ce=this.shx,qe=this.sy,$e=this.tx,ct=this.ty,Tt=1/(P*qe-J*Ce),wt=qe*Tt,mr=-J*Tt,ar=-Ce*Tt,cr=P*Tt;return new De(wt,mr,ar,cr,-wt*$e-ar*ct,-mr*$e-cr*ct)},De.prototype.applyToPoint=function(P){var J=P.x*this.sx+P.y*this.shx+this.tx,Ce=P.x*this.shy+P.y*this.sy+this.ty;return new Ya(J,Ce)},De.prototype.applyToRectangle=function(P){var J=this.applyToPoint(P),Ce=this.applyToPoint(new Ya(P.x+P.w,P.y+P.h));return new Ja(J.x,J.y,Ce.x-J.x,Ce.y-J.y)},De.prototype.clone=function(){var P=this.sx,J=this.shy,Ce=this.shx,qe=this.sy,$e=this.tx,ct=this.ty;return new De(P,J,Ce,qe,$e,ct)},I.Matrix=De;var Oe=I.matrixMult=function(P,J){return J.multiply(P)},Ue=new De(1,0,0,1,0,0);I.unitMatrix=I.identityMatrix=Ue;var Ve=function(P,J){if(!rr[P]){var Ce=(J instanceof _c?"Sh":"P")+(Object.keys($t).length+1).toString(10);J.id=Ce,rr[P]=Ce,$t[Ce]=J,X.publish("addPattern",J)}};I.ShadingPattern=_c,I.TilingPattern=uu,I.addShadingPattern=function(P,J){return fe("addShadingPattern()"),Ve(P,J),this},I.beginTilingPattern=function(P){fe("beginTilingPattern()"),FA(P.boundingBox[0],P.boundingBox[1],P.boundingBox[2]-P.boundingBox[0],P.boundingBox[3]-P.boundingBox[1],P.matrix)},I.endTilingPattern=function(P,J){fe("endTilingPattern()"),J.stream=Et[pe].join(`
`),Ve(P,J),X.publish("endTilingPattern",J),be.pop().restore()};var lt=I.__private__.newObject=function(){var P=ht();return gt(P,!0),P},ht=I.__private__.newObjectDeferred=function(){return Ge++,tt[Ge]=function(){return ot},Ge},gt=function(P,J){return J=typeof J=="boolean"&&J,tt[P]=ot,J&&Me(P+" 0 obj"),P},nr=I.__private__.newAdditionalObject=function(){var P={objId:ht(),content:""};return Ct.push(P),P},sr=ht(),jt=ht(),Yt=I.__private__.decodeColorString=function(P){var J=P.split(" ");if(J.length!==2||J[1]!=="g"&&J[1]!=="G")J.length===5&&(J[4]==="k"||J[4]==="K")&&(J=[(1-J[0])*(1-J[3]),(1-J[1])*(1-J[3]),(1-J[2])*(1-J[3]),"r"]);else{var Ce=parseFloat(J[0]);J=[Ce,Ce,Ce,"r"]}for(var qe="#",$e=0;$e<3;$e++)qe+=("0"+Math.floor(255*parseFloat(J[$e])).toString(16)).slice(-2);return qe},ur=I.__private__.encodeColorString=function(P){var J;typeof P=="string"&&(P={ch1:P});var Ce=P.ch1,qe=P.ch2,$e=P.ch3,ct=P.ch4,Tt=P.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ce=="string"&&Ce.charAt(0)!=="#"){var wt=new pv(Ce);if(wt.ok)Ce=wt.toHex();else if(!/^\d*\.?\d*$/.test(Ce))throw new Error('Invalid color "'+Ce+'" passed to jsPDF.encodeColorString.')}if(typeof Ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ce)&&(Ce="#"+Ce[1]+Ce[1]+Ce[2]+Ce[2]+Ce[3]+Ce[3]),typeof Ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ce)){var mr=parseInt(Ce.substr(1),16);Ce=mr>>16&255,qe=mr>>8&255,$e=255&mr}if(qe===void 0||ct===void 0&&Ce===qe&&qe===$e)if(typeof Ce=="string")J=Ce+" "+Tt[0];else switch(P.precision){case 2:J=Ke(Ce/255)+" "+Tt[0];break;case 3:default:J=ce(Ce/255)+" "+Tt[0]}else if(ct===void 0||fi(ct)==="object"){if(ct&&!isNaN(ct.a)&&ct.a===0)return J=["1.","1.","1.",Tt[1]].join(" ");if(typeof Ce=="string")J=[Ce,qe,$e,Tt[1]].join(" ");else switch(P.precision){case 2:J=[Ke(Ce/255),Ke(qe/255),Ke($e/255),Tt[1]].join(" ");break;default:case 3:J=[ce(Ce/255),ce(qe/255),ce($e/255),Tt[1]].join(" ")}}else if(typeof Ce=="string")J=[Ce,qe,$e,ct,Tt[2]].join(" ");else switch(P.precision){case 2:J=[Ke(Ce),Ke(qe),Ke($e),Ke(ct),Tt[2]].join(" ");break;case 3:default:J=[ce(Ce),ce(qe),ce($e),ce(ct),Tt[2]].join(" ")}return J},Br=I.__private__.getFilters=function(){return p},Rr=I.__private__.putStream=function(P){var J=(P=P||{}).data||"",Ce=P.filters||Br(),qe=P.alreadyAppliedFilters||[],$e=P.addLength1||!1,ct=J.length,Tt=P.objectId,wt=function(Yi){return Yi};if(C!==null&&Tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");C!==null&&(wt=gn.encryptor(Tt,0));var mr={};Ce===!0&&(Ce=["FlateEncode"]);var ar=P.additionalKeyValues||[],cr=(mr=Mr.API.processDataByFilters!==void 0?Mr.API.processDataByFilters(J,Ce):{data:J,reverseChain:[]}).reverseChain+(Array.isArray(qe)?qe.join(" "):qe.toString());if(mr.data.length!==0&&(ar.push({key:"Length",value:mr.data.length}),$e===!0&&ar.push({key:"Length1",value:ct})),cr.length!=0)if(cr.split("/").length-1==1)ar.push({key:"Filter",value:cr});else{ar.push({key:"Filter",value:"["+cr+"]"});for(var $r=0;$r<ar.length;$r+=1)if(ar[$r].key==="DecodeParms"){for(var Li=[],ki=0;ki<mr.reverseChain.split("/").length-1;ki+=1)Li.push("null");Li.push(ar[$r].value),ar[$r].value="["+Li.join(" ")+"]"}}Me("<<");for(var Di=0;Di<ar.length;Di++)Me("/"+ar[Di].key+" "+ar[Di].value);Me(">>"),mr.data.length!==0&&(Me("stream"),Me(wt(mr.data)),Me("endstream"))},Sr=I.__private__.putPage=function(P){var J=P.number,Ce=P.data,qe=P.objId,$e=P.contentsObjId;gt(qe,!0),Me("<</Type /Page"),Me("/Parent "+P.rootDictionaryObjId+" 0 R"),Me("/Resources "+P.resourceDictionaryObjId+" 0 R"),Me("/MediaBox ["+parseFloat(Ee(P.mediaBox.bottomLeftX))+" "+parseFloat(Ee(P.mediaBox.bottomLeftY))+" "+Ee(P.mediaBox.topRightX)+" "+Ee(P.mediaBox.topRightY)+"]"),P.cropBox!==null&&Me("/CropBox ["+Ee(P.cropBox.bottomLeftX)+" "+Ee(P.cropBox.bottomLeftY)+" "+Ee(P.cropBox.topRightX)+" "+Ee(P.cropBox.topRightY)+"]"),P.bleedBox!==null&&Me("/BleedBox ["+Ee(P.bleedBox.bottomLeftX)+" "+Ee(P.bleedBox.bottomLeftY)+" "+Ee(P.bleedBox.topRightX)+" "+Ee(P.bleedBox.topRightY)+"]"),P.trimBox!==null&&Me("/TrimBox ["+Ee(P.trimBox.bottomLeftX)+" "+Ee(P.trimBox.bottomLeftY)+" "+Ee(P.trimBox.topRightX)+" "+Ee(P.trimBox.topRightY)+"]"),P.artBox!==null&&Me("/ArtBox ["+Ee(P.artBox.bottomLeftX)+" "+Ee(P.artBox.bottomLeftY)+" "+Ee(P.artBox.topRightX)+" "+Ee(P.artBox.topRightY)+"]"),typeof P.userUnit=="number"&&P.userUnit!==1&&Me("/UserUnit "+P.userUnit),X.publish("putPage",{objId:qe,pageContext:ue[J],pageNumber:J,page:Ce}),Me("/Contents "+$e+" 0 R"),Me(">>"),Me("endobj");var ct=Ce.join(`
`);return he===ne.ADVANCED&&(ct+=`
Q`),gt($e,!0),Rr({data:ct,filters:Br(),objectId:$e}),Me("endobj"),qe},Te=I.__private__.putPages=function(){var P,J,Ce=[];for(P=1;P<=Kr;P++)ue[P].objId=ht(),ue[P].contentsObjId=ht();for(P=1;P<=Kr;P++)Ce.push(Sr({number:P,data:Et[P],objId:ue[P].objId,contentsObjId:ue[P].contentsObjId,mediaBox:ue[P].mediaBox,cropBox:ue[P].cropBox,bleedBox:ue[P].bleedBox,trimBox:ue[P].trimBox,artBox:ue[P].artBox,userUnit:ue[P].userUnit,rootDictionaryObjId:sr,resourceDictionaryObjId:jt}));gt(sr,!0),Me("<</Type /Pages");var qe="/Kids [";for(J=0;J<Kr;J++)qe+=Ce[J]+" 0 R ";Me(qe+"]"),Me("/Count "+Kr),Me(">>"),Me("endobj"),X.publish("postPutPages")},Qt=function(P){X.publish("putFont",{font:P,out:Me,newObject:lt,putStream:Rr}),P.isAlreadyPutted!==!0&&(P.objectNumber=lt(),Me("<<"),Me("/Type /Font"),Me("/BaseFont /"+cu(P.postScriptName)),Me("/Subtype /Type1"),typeof P.encoding=="string"&&Me("/Encoding /"+P.encoding),Me("/FirstChar 32"),Me("/LastChar 255"),Me(">>"),Me("endobj"))},yt=function(){for(var P in Dr)Dr.hasOwnProperty(P)&&(L===!1||L===!0&&M.hasOwnProperty(P))&&Qt(Dr[P])},vr=function(P){P.objectNumber=lt();var J=[];J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Form"}),J.push({key:"BBox",value:"["+[Ee(P.x),Ee(P.y),Ee(P.x+P.width),Ee(P.y+P.height)].join(" ")+"]"}),J.push({key:"Matrix",value:"["+P.matrix.toString()+"]"});var Ce=P.pages[1].join(`
`);Rr({data:Ce,additionalKeyValues:J,objectId:P.objectNumber}),Me("endobj")},Nr=function(){for(var P in le)le.hasOwnProperty(P)&&vr(le[P])},di=function(P,J){var Ce,qe=[],$e=1/(J-1);for(Ce=0;Ce<1;Ce+=$e)qe.push(Ce);if(qe.push(1),P[0].offset!=0){var ct={offset:0,color:P[0].color};P.unshift(ct)}if(P[P.length-1].offset!=1){var Tt={offset:1,color:P[P.length-1].color};P.push(Tt)}for(var wt="",mr=0,ar=0;ar<qe.length;ar++){for(Ce=qe[ar];Ce>P[mr+1].offset;)mr++;var cr=P[mr].offset,$r=(Ce-cr)/(P[mr+1].offset-cr),Li=P[mr].color,ki=P[mr+1].color;wt+=Re(Math.round((1-$r)*Li[0]+$r*ki[0]).toString(16))+Re(Math.round((1-$r)*Li[1]+$r*ki[1]).toString(16))+Re(Math.round((1-$r)*Li[2]+$r*ki[2]).toString(16))}return wt.trim()},Ii=function(P,J){J||(J=21);var Ce=lt(),qe=di(P.colors,J),$e=[];$e.push({key:"FunctionType",value:"0"}),$e.push({key:"Domain",value:"[0.0 1.0]"}),$e.push({key:"Size",value:"["+J+"]"}),$e.push({key:"BitsPerSample",value:"8"}),$e.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$e.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Rr({data:qe,additionalKeyValues:$e,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ce}),Me("endobj"),P.objectNumber=lt(),Me("<< /ShadingType "+P.type),Me("/ColorSpace /DeviceRGB");var ct="/Coords ["+Ee(parseFloat(P.coords[0]))+" "+Ee(parseFloat(P.coords[1]))+" ";P.type===2?ct+=Ee(parseFloat(P.coords[2]))+" "+Ee(parseFloat(P.coords[3])):ct+=Ee(parseFloat(P.coords[2]))+" "+Ee(parseFloat(P.coords[3]))+" "+Ee(parseFloat(P.coords[4]))+" "+Ee(parseFloat(P.coords[5])),Me(ct+="]"),P.matrix&&Me("/Matrix ["+P.matrix.toString()+"]"),Me("/Function "+Ce+" 0 R"),Me("/Extend [true true]"),Me(">>"),Me("endobj")},qn=function(P,J){var Ce=ht(),qe=lt();J.push({resourcesOid:Ce,objectOid:qe}),P.objectNumber=qe;var $e=[];$e.push({key:"Type",value:"/Pattern"}),$e.push({key:"PatternType",value:"1"}),$e.push({key:"PaintType",value:"1"}),$e.push({key:"TilingType",value:"1"}),$e.push({key:"BBox",value:"["+P.boundingBox.map(Ee).join(" ")+"]"}),$e.push({key:"XStep",value:Ee(P.xStep)}),$e.push({key:"YStep",value:Ee(P.yStep)}),$e.push({key:"Resources",value:Ce+" 0 R"}),P.matrix&&$e.push({key:"Matrix",value:"["+P.matrix.toString()+"]"}),Rr({data:P.stream,additionalKeyValues:$e,objectId:P.objectNumber}),Me("endobj")},Hi=function(P){var J;for(J in $t)$t.hasOwnProperty(J)&&($t[J]instanceof _c?Ii($t[J]):$t[J]instanceof uu&&qn($t[J],P))},Wi=function(P){for(var J in P.objectNumber=lt(),Me("<<"),P)switch(J){case"opacity":Me("/ca "+Ke(P[J]));break;case"stroke-opacity":Me("/CA "+Ke(P[J]))}Me(">>"),Me("endobj")},ii=function(){var P;for(P in Or)Or.hasOwnProperty(P)&&Wi(Or[P])},Co=function(){for(var P in Me("/XObject <<"),le)le.hasOwnProperty(P)&&le[P].objectNumber>=0&&Me("/"+P+" "+le[P].objectNumber+" 0 R");X.publish("putXobjectDict"),Me(">>")},mA=function(){gn.oid=lt(),Me("<<"),Me("/Filter /Standard"),Me("/V "+gn.v),Me("/R "+gn.r),Me("/U <"+gn.toHexString(gn.U)+">"),Me("/O <"+gn.toHexString(gn.O)+">"),Me("/P "+gn.P),Me(">>"),Me("endobj")},Zi=function(){for(var P in Me("/Font <<"),Dr)Dr.hasOwnProperty(P)&&(L===!1||L===!0&&M.hasOwnProperty(P))&&Me("/"+P+" "+Dr[P].objectNumber+" 0 R");Me(">>")},Dn=function(){if(Object.keys($t).length>0){for(var P in Me("/Shading <<"),$t)$t.hasOwnProperty(P)&&$t[P]instanceof _c&&$t[P].objectNumber>=0&&Me("/"+P+" "+$t[P].objectNumber+" 0 R");X.publish("putShadingPatternDict"),Me(">>")}},yA=function(P){if(Object.keys($t).length>0){for(var J in Me("/Pattern <<"),$t)$t.hasOwnProperty(J)&&$t[J]instanceof I.TilingPattern&&$t[J].objectNumber>=0&&$t[J].objectNumber<P&&Me("/"+J+" "+$t[J].objectNumber+" 0 R");X.publish("putTilingPatternDict"),Me(">>")}},$n=function(){if(Object.keys(Or).length>0){var P;for(P in Me("/ExtGState <<"),Or)Or.hasOwnProperty(P)&&Or[P].objectNumber>=0&&Me("/"+P+" "+Or[P].objectNumber+" 0 R");X.publish("putGStateDict"),Me(">>")}},Wr=function(P){gt(P.resourcesOid,!0),Me("<<"),Me("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Zi(),Dn(),yA(P.objectOid),$n(),Co(),Me(">>"),Me("endobj")},So=function(){var P=[];yt(),ii(),Nr(),Hi(P),X.publish("putResources"),P.forEach(Wr),Wr({resourcesOid:jt,objectOid:Number.MAX_SAFE_INTEGER}),X.publish("postPutResources")},Ta=function(){X.publish("putAdditionalObjects");for(var P=0;P<Ct.length;P++){var J=Ct[P];gt(J.objId,!0),Me(J.content),Me("endobj")}X.publish("postPutAdditionalObjects")},mi=function(P){Vr[P.fontName]=Vr[P.fontName]||{},Vr[P.fontName][P.fontStyle]=P.id},Zr=function(P,J,Ce,qe,$e){var ct={id:"F"+(Object.keys(Dr).length+1).toString(10),postScriptName:P,fontName:J,fontStyle:Ce,encoding:qe,isStandardFont:$e||!1,metadata:{}};return X.publish("addFont",{font:ct,instance:this}),Dr[ct.id]=ct,mi(ct),ct.id},Ua=function(P){for(var J=0,Ce=bt.length;J<Ce;J++){var qe=Zr.call(this,P[J][0],P[J][1],P[J][2],bt[J][3],!0);L===!1&&(M[qe]=!0);var $e=P[J][0].split("-");mi({id:qe,fontName:$e[0],fontStyle:$e[1]||""})}X.publish("addFonts",{fonts:Dr,dictionary:Vr})},ci=function(P){return P.foo=function(){try{return P.apply(this,arguments)}catch(qe){var J=qe.stack||"";~J.indexOf(" at ")&&(J=J.split(" at ")[1]);var Ce="Error in function "+J.split(`
`)[0].split("<")[0]+": "+qe.message;if(!Pr.console)throw new Error(Ce);Pr.console.error(Ce,qe),Pr.alert&&alert(Ce)}},P.foo.bar=P,P.foo},Pa=function(P,J){var Ce,qe,$e,ct,Tt,wt,mr,ar,cr;if($e=(J=J||{}).sourceEncoding||"Unicode",Tt=J.outputEncoding,(J.autoencode||Tt)&&Dr[br].metadata&&Dr[br].metadata[$e]&&Dr[br].metadata[$e].encoding&&(ct=Dr[br].metadata[$e].encoding,!Tt&&Dr[br].encoding&&(Tt=Dr[br].encoding),!Tt&&ct.codePages&&(Tt=ct.codePages[0]),typeof Tt=="string"&&(Tt=ct[Tt]),Tt)){for(mr=!1,wt=[],Ce=0,qe=P.length;Ce<qe;Ce++)(ar=Tt[P.charCodeAt(Ce)])?wt.push(String.fromCharCode(ar)):wt.push(P[Ce]),wt[Ce].charCodeAt(0)>>8&&(mr=!0);P=wt.join("")}for(Ce=P.length;mr===void 0&&Ce!==0;)P.charCodeAt(Ce-1)>>8&&(mr=!0),Ce--;if(!mr)return P;for(wt=J.noBOM?[]:[254,255],Ce=0,qe=P.length;Ce<qe;Ce++){if((cr=(ar=P.charCodeAt(Ce))>>8)>>8)throw new Error("Character at position "+Ce+" of string '"+P+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");wt.push(cr),wt.push(ar-(cr<<8))}return String.fromCharCode.apply(void 0,wt)},Ci=I.__private__.pdfEscape=I.pdfEscape=function(P,J){return Pa(P,J).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Eo=I.__private__.beginPage=function(P){Et[++Kr]=[],ue[Kr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(P[0]),topRightY:Number(P[1])}},vA(Kr),ft(Et[pe])},Zs=function(P,J){var Ce,qe,$e;switch(t=J||t,typeof P=="string"&&(Ce=q(P.toLowerCase()),Array.isArray(Ce)&&(qe=Ce[0],$e=Ce[1])),Array.isArray(P)&&(qe=P[0]*Rt,$e=P[1]*Rt),isNaN(qe)&&(qe=l[0],$e=l[1]),(qe>14400||$e>14400)&&(Qi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),qe=Math.min(14400,qe),$e=Math.min(14400,$e)),l=[qe,$e],t.substr(0,1)){case"l":$e>qe&&(l=[$e,qe]);break;case"p":qe>$e&&(l=[$e,qe])}Eo(l),Qo(yn),Me(Ls),Al!==0&&Me(Al+" J"),ll!==0&&Me(ll+" j"),X.publish("addPage",{pageNumber:Kr})},Zl=function(P){P>0&&P<=Kr&&(Et.splice(P,1),ue.splice(P,1),Kr--,pe>Kr&&(pe=Kr),this.setPage(pe))},vA=function(P){P>0&&P<=Kr&&(pe=P)},_A=I.__private__.getNumberOfPages=I.getNumberOfPages=function(){return Et.length-1},Fo=function(P,J,Ce){var qe,$e=void 0;return Ce=Ce||{},P=P!==void 0?P:Dr[br].fontName,J=J!==void 0?J:Dr[br].fontStyle,qe=P.toLowerCase(),Vr[qe]!==void 0&&Vr[qe][J]!==void 0?$e=Vr[qe][J]:Vr[P]!==void 0&&Vr[P][J]!==void 0?$e=Vr[P][J]:Ce.disableWarning===!1&&Qi.warn("Unable to look up font label for font '"+P+"', '"+J+"'. Refer to getFontList() for available fonts."),$e||Ce.noFallback||($e=Vr.times[J])==null&&($e=Vr.times.normal),$e},pa=I.__private__.putInfo=function(){var P=lt(),J=function(qe){return qe};for(var Ce in C!==null&&(J=gn.encryptor(P,0)),Me("<<"),Me("/Producer ("+Ci(J("jsPDF "+Mr.version))+")"),gr)gr.hasOwnProperty(Ce)&&gr[Ce]&&Me("/"+Ce.substr(0,1).toUpperCase()+Ce.substr(1)+" ("+Ci(J(gr[Ce]))+")");Me("/CreationDate ("+Ci(J(et))+")"),Me(">>"),Me("endobj")},Io=I.__private__.putCatalog=function(P){var J=(P=P||{}).rootDictionaryObjId||sr;switch(lt(),Me("<<"),Me("/Type /Catalog"),Me("/Pages "+J+" 0 R"),Ut||(Ut="fullwidth"),Ut){case"fullwidth":Me("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Me("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Me("/OpenAction [3 0 R /Fit]");break;case"original":Me("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ce=""+Ut;Ce.substr(Ce.length-1)==="%"&&(Ut=parseInt(Ut)/100),typeof Ut=="number"&&Me("/OpenAction [3 0 R /XYZ null null "+Ke(Ut)+"]")}switch(wr||(wr="continuous"),wr){case"continuous":Me("/PageLayout /OneColumn");break;case"single":Me("/PageLayout /SinglePage");break;case"two":case"twoleft":Me("/PageLayout /TwoColumnLeft");break;case"tworight":Me("/PageLayout /TwoColumnRight")}Lt&&Me("/PageMode /"+Lt),X.publish("putCatalog"),Me(">>"),Me("endobj")},Lo=I.__private__.putTrailer=function(){Me("trailer"),Me("<<"),Me("/Size "+(Ge+1)),Me("/Root "+Ge+" 0 R"),Me("/Info "+(Ge-1)+" 0 R"),C!==null&&Me("/Encrypt "+gn.oid+" 0 R"),Me("/ID [ <"+Je+"> <"+Je+"> ]"),Me(">>")},Xl=I.__private__.putHeader=function(){Me("%PDF-"+G),Me("%")},Vc=I.__private__.putXRef=function(){var P="0000000000";Me("xref"),Me("0 "+(Ge+1)),Me("0000000000 65535 f ");for(var J=1;J<=Ge;J++)typeof tt[J]=="function"?Me((P+tt[J]()).slice(-10)+" 00000 n "):tt[J]!==void 0?Me((P+tt[J]).slice(-10)+" 00000 n "):Me("0000000000 00000 n ")},Xs=I.__private__.buildDocument=function(){Jt(),ft(st),X.publish("buildDocument"),Xl(),Te(),Ta(),So(),C!==null&&mA(),pa(),Io();var P=ot;return Vc(),Lo(),Me("startxref"),Me(""+P),Me("%%EOF"),ft(Et[pe]),st.join(`
`)},Wa=I.__private__.getBlob=function(P){return new Blob([Xt(P)],{type:"application/pdf"})},To=I.output=I.__private__.output=ci(function(P,J){switch(typeof(J=J||{})=="string"?J={filename:J}:J.filename=J.filename||"generated.pdf",P){case void 0:return Xs();case"save":I.save(J.filename);break;case"arraybuffer":return Xt(Xs());case"blob":return Wa(Xs());case"bloburi":case"bloburl":if(Pr.URL!==void 0&&typeof Pr.URL.createObjectURL=="function")return Pr.URL&&Pr.URL.createObjectURL(Wa(Xs()))||void 0;Qi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ce="",qe=Xs();try{Ce=Tg(qe)}catch{Ce=Tg(unescape(encodeURIComponent(qe)))}return"data:application/pdf;filename="+J.filename+";base64,"+Ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Pr)==="[object Window]"){var $e="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ct=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';J.pdfObjectUrl&&($e=J.pdfObjectUrl,ct="");var Tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+$e+'"'+ct+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(J)+");<\/script></body></html>",wt=Pr.open();return wt!==null&&wt.document.write(Tt),wt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Pr)==="[object Window]"){var mr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(J.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+J.filename+'" width="500px" height="400px" /></body></html>',ar=Pr.open();if(ar!==null){ar.document.write(mr);var cr=this;ar.document.documentElement.querySelector("#pdfViewer").onload=function(){ar.document.title=J.filename,ar.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(cr.output("bloburl"))}}return ar}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Pr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var $r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",J)+'"></iframe></body></html>',Li=Pr.open();if(Li!==null&&(Li.document.write($r),Li.document.title=J.filename),Li||typeof safari>"u")return Li;break;case"datauri":case"dataurl":return Pr.document.location.href=this.output("datauristring",J);default:return null}}),Yl=function(P){return Array.isArray(ie)===!0&&ie.indexOf(P)>-1};switch(s){case"pt":Rt=1;break;case"mm":Rt=72/25.4;break;case"cm":Rt=72/2.54;break;case"in":Rt=72;break;case"px":Rt=Yl("px_scaling")==1?.75:96/72;break;case"pc":case"em":Rt=12;break;case"ex":Rt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Rt=s}var gn=null;Bt(),Ye();var Jl=function(P){return C!==null?gn.encryptor(P,0):function(J){return J}},Uo=I.__private__.getPageInfo=I.getPageInfo=function(P){if(isNaN(P)||P%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ue[P].objId,pageNumber:P,pageContext:ue[P]}},Ur=I.__private__.getPageInfoByObjId=function(P){if(isNaN(P)||P%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var J in ue)if(ue[J].objId===P)break;return Uo(J)},ec=I.__private__.getCurrentPageInfo=I.getCurrentPageInfo=function(){return{objId:ue[pe].objId,pageNumber:pe,pageContext:ue[pe]}};I.addPage=function(){return Zs.apply(this,arguments),this},I.setPage=function(){return vA.apply(this,arguments),ft.call(this,Et[pe]),this},I.insertPage=function(P){return this.addPage(),this.movePage(pe,P),this},I.movePage=function(P,J){var Ce,qe;if(P>J){Ce=Et[P],qe=ue[P];for(var $e=P;$e>J;$e--)Et[$e]=Et[$e-1],ue[$e]=ue[$e-1];Et[J]=Ce,ue[J]=qe,this.setPage(J)}else if(P<J){Ce=Et[P],qe=ue[P];for(var ct=P;ct<J;ct++)Et[ct]=Et[ct+1],ue[ct]=ue[ct+1];Et[J]=Ce,ue[J]=qe,this.setPage(J)}return this},I.deletePage=function(){return Zl.apply(this,arguments),this},I.__private__.text=I.text=function(P,J,Ce,qe,$e){var ct,Tt,wt,mr,ar,cr,$r,Li,ki,Di=(qe=qe||{}).scope||this;if(typeof P=="number"&&typeof J=="number"&&(typeof Ce=="string"||Array.isArray(Ce))){var Yi=Ce;Ce=J,J=P,P=Yi}if(arguments[3]instanceof De?(fe("The transform parameter of text() with a Matrix value"),ki=$e):(wt=arguments[4],mr=arguments[5],fi($r=arguments[3])==="object"&&$r!==null||(typeof wt=="string"&&(mr=wt,wt=null),typeof $r=="string"&&(mr=$r,$r=null),typeof $r=="number"&&(wt=$r,$r=null),qe={flags:$r,angle:wt,align:mr})),isNaN(J)||isNaN(Ce)||P==null)throw new Error("Invalid arguments passed to jsPDF.text");if(P.length===0)return Di;var qi="",Zn=!1,Xn=typeof qe.lineHeightFactor=="number"?qe.lineHeightFactor:Xi,As=Di.internal.scaleFactor;function ro(ai){return ai=ai.split("	").join(Array(qe.TabLen||9).join(" ")),Ci(ai,$r)}function Ma(ai){for(var oi,Vi=ai.concat(),ji=[],ba=Vi.length;ba--;)typeof(oi=Vi.shift())=="string"?ji.push(oi):Array.isArray(ai)&&(oi.length===1||oi[1]===void 0&&oi[2]===void 0)?ji.push(oi[0]):ji.push([oi[0],oi[1],oi[2]]);return ji}function cl(ai,oi){var Vi;if(typeof ai=="string")Vi=oi(ai)[0];else if(Array.isArray(ai)){for(var ji,ba,ea=ai.concat(),ta=[],Ms=ea.length;Ms--;)typeof(ji=ea.shift())=="string"?ta.push(oi(ji)[0]):Array.isArray(ji)&&typeof ji[0]=="string"&&(ba=oi(ji[0],ji[1],ji[2]),ta.push([ba[0],ba[1],ba[2]]));Vi=ta}return Vi}var io=!1,ul=!0;if(typeof P=="string")io=!0;else if(Array.isArray(P)){var LA=P.concat();Tt=[];for(var Qa,Ln=LA.length;Ln--;)(typeof(Qa=LA.shift())!="string"||Array.isArray(Qa)&&typeof Qa[0]!="string")&&(ul=!1);io=ul}if(io===!1)throw new Error('Type of text must be string or Array. "'+P+'" is not recognized.');typeof P=="string"&&(P=P.match(/[\r?\n]/)?P.split(/\r\n|\r|\n/g):[P]);var Ro=ze/Di.internal.scaleFactor,zo=Ro*(Xn-1);switch(qe.baseline){case"bottom":Ce-=zo;break;case"top":Ce+=Ro-zo;break;case"hanging":Ce+=Ro-2*zo;break;case"middle":Ce+=Ro/2-zo}if((cr=qe.maxWidth||0)>0&&(typeof P=="string"?P=Di.splitTextToSize(P,cr):Object.prototype.toString.call(P)==="[object Array]"&&(P=P.reduce(function(ai,oi){return ai.concat(Di.splitTextToSize(oi,cr))},[]))),ct={text:P,x:J,y:Ce,options:qe,mutex:{pdfEscape:Ci,activeFontKey:br,fonts:Dr,activeFontSize:ze}},X.publish("preProcessText",ct),P=ct.text,wt=(qe=ct.options).angle,!(ki instanceof De)&&wt&&typeof wt=="number"){wt*=Math.PI/180,qe.rotationDirection===0&&(wt=-wt),he===ne.ADVANCED&&(wt=-wt);var ma=Math.cos(wt),no=Math.sin(wt);ki=new De(ma,no,-no,ma,0,0)}else wt&&wt instanceof De&&(ki=wt);he!==ne.ADVANCED||ki||(ki=Ue),(ar=qe.charSpace||EA)!==void 0&&(qi+=Ee(Ae(ar))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Li=qe.horizontalScale)!==void 0&&(qi+=Ee(100*Li)+` Tz
`),qe.lang;var vn=-1,rc=qe.renderingMode!==void 0?qe.renderingMode:qe.stroke,yi=Di.internal.getCurrentPageInfo().pageContext;switch(rc){case 0:case!1:case"fill":vn=0;break;case 1:case!0:case"stroke":vn=1;break;case 2:case"fillThenStroke":vn=2;break;case 3:case"invisible":vn=3;break;case 4:case"fillAndAddForClipping":vn=4;break;case 5:case"strokeAndAddPathForClipping":vn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":vn=6;break;case 7:case"addToPathForClipping":vn=7}var ya=yi.usedRenderingMode!==void 0?yi.usedRenderingMode:-1;vn!==-1?qi+=vn+` Tr
`:ya!==-1&&(qi+=`0 Tr
`),vn!==-1&&(yi.usedRenderingMode=vn),mr=qe.align||"left";var Ti,va=ze*Xn,Ho=Di.internal.pageSize.getWidth(),TA=Dr[br];ar=qe.charSpace||EA,cr=qe.maxWidth||0,$r=Object.assign({autoencode:!0,noBOM:!0},qe.flags);var Yn=[];if(Object.prototype.toString.call(P)==="[object Array]"){var Tn;Tt=Ma(P),mr!=="left"&&(Ti=Tt.map(function(ai){return Di.getStringUnitWidth(ai,{font:TA,charSpace:ar,fontSize:ze,doKerning:!1})*ze/As}));var Un,ka=0;if(mr==="right"){J-=Ti[0],P=[],Ln=Tt.length;for(var Js=0;Js<Ln;Js++)Js===0?(Un=Is(J),Tn=ga(Ce)):(Un=Ae(ka-Ti[Js]),Tn=-va),P.push([Tt[Js],Un,Tn]),ka=Ti[Js]}else if(mr==="center"){J-=Ti[0]/2,P=[],Ln=Tt.length;for(var _a=0;_a<Ln;_a++)_a===0?(Un=Is(J),Tn=ga(Ce)):(Un=Ae((ka-Ti[_a])/2),Tn=-va),P.push([Tt[_a],Un,Tn]),ka=Ti[_a]}else if(mr==="left"){P=[],Ln=Tt.length;for(var Vo=0;Vo<Ln;Vo++)P.push(Tt[Vo])}else{if(mr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');P=[],Ln=Tt.length,cr=cr!==0?cr:Ho;for(var Us=0;Us<Ln;Us++)Tn=Us===0?ga(Ce):-va,Un=Us===0?Is(J):0,Us<Ln-1?Yn.push(Ee(Ae((cr-Ti[Us])/(Tt[Us].split(" ").length-1)))):Yn.push(0),P.push([Tt[Us],Un,Tn])}}var Nn=typeof qe.R2L=="boolean"?qe.R2L:Mt;Nn===!0&&(P=cl(P,function(ai,oi,Vi){return[ai.split("").reverse().join(""),oi,Vi]})),ct={text:P,x:J,y:Ce,options:qe,mutex:{pdfEscape:Ci,activeFontKey:br,fonts:Dr,activeFontSize:ze}},X.publish("postProcessText",ct),P=ct.text,Zn=ct.mutex.isHex||!1;var Da=Dr[br].encoding;Da!=="WinAnsiEncoding"&&Da!=="StandardEncoding"||(P=cl(P,function(ai,oi,Vi){return[ro(ai),oi,Vi]})),Tt=Ma(P),P=[];for(var $i,On,wa,so=0,jo=1,Rn=Array.isArray(Tt[0])?jo:so,Na="",Pn=function(ai,oi,Vi){var ji="";return Vi instanceof De?(Vi=typeof qe.angle=="number"?Oe(Vi,new De(1,0,0,1,ai,oi)):Oe(new De(1,0,0,1,ai,oi),Vi),he===ne.ADVANCED&&(Vi=Oe(new De(1,0,0,-1,0,0),Vi)),ji=Vi.join(" ")+` Tm
`):ji=Ee(ai)+" "+Ee(oi)+` Td
`,ji},Ki=0;Ki<Tt.length;Ki++){switch(Na="",Rn){case jo:wa=(Zn?"<":"(")+Tt[Ki][0]+(Zn?">":")"),$i=parseFloat(Tt[Ki][1]),On=parseFloat(Tt[Ki][2]);break;case so:wa=(Zn?"<":"(")+Tt[Ki]+(Zn?">":")"),$i=Is(J),On=ga(Ce)}Yn!==void 0&&Yn[Ki]!==void 0&&(Na=Yn[Ki]+` Tw
`),Ki===0?P.push(Na+Pn($i,On,ki)+wa):Rn===so?P.push(Na+wa):Rn===jo&&P.push(Na+Pn($i,On,ki)+wa)}P=Rn===so?P.join(` Tj
T* `):P.join(` Tj
`),P+=` Tj
`;var Ps=`BT
/`;return Ps+=br+" "+ze+` Tf
`,Ps+=Ee(ze*Xn)+` TL
`,Ps+=Ts+`
`,Ps+=qi,Ps+=P,Me(Ps+="ET"),M[br]=!0,Di};var al=I.__private__.clip=I.clip=function(P){return Me(P==="evenodd"?"W*":"W"),this};I.clipEvenOdd=function(){return al("evenodd")},I.__private__.discardPath=I.discardPath=function(){return Me("n"),this};var Fs=I.__private__.isValidStyle=function(P){var J=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(P)!==-1&&(J=!0),J};I.__private__.setDefaultPathOperation=I.setDefaultPathOperation=function(P){return Fs(P)&&(_=P),this};var da=I.__private__.getStyle=I.getStyle=function(P){var J=_;switch(P){case"D":case"S":J="S";break;case"F":J="f";break;case"FD":case"DF":J="B";break;case"f":case"f*":case"B":case"B*":J=P}return J},Po=I.close=function(){return Me("h"),this};I.stroke=function(){return Me("S"),this},I.fill=function(P){return mn("f",P),this},I.fillEvenOdd=function(P){return mn("f*",P),this},I.fillStroke=function(P){return mn("B",P),this},I.fillStrokeEvenOdd=function(P){return mn("B*",P),this};var mn=function(P,J){fi(J)==="object"?Mo(J,P):Me(P)},Za=function(P){P===null||he===ne.ADVANCED&&P===void 0||(P=da(P),Me(P))};function wA(P,J,Ce,qe,$e){var ct=new uu(J||this.boundingBox,Ce||this.xStep,qe||this.yStep,this.gState,$e||this.matrix);ct.stream=this.stream;var Tt=P+"$$"+this.cloneIndex+++"$$";return Ve(Tt,ct),ct}var Mo=function(P,J){var Ce=rr[P.key],qe=$t[Ce];if(qe instanceof _c)Me("q"),Me(bA(J)),qe.gState&&I.setGState(qe.gState),Me(P.matrix.toString()+" cm"),Me("/"+Ce+" sh"),Me("Q");else if(qe instanceof uu){var $e=new De(1,0,0,-1,0,Wn());P.matrix&&($e=$e.multiply(P.matrix||Ue),Ce=wA.call(qe,P.key,P.boundingBox,P.xStep,P.yStep,$e).id),Me("q"),Me("/Pattern cs"),Me("/"+Ce+" scn"),qe.gState&&I.setGState(qe.gState),Me(J),Me("Q")}},bA=function(P){switch(P){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},fa=I.moveTo=function(P,J){return Me(Ee(Ae(P))+" "+Ee(_e(J))+" m"),this},Kn=I.lineTo=function(P,J){return Me(Ee(Ae(P))+" "+Ee(_e(J))+" l"),this},Qr=I.curveTo=function(P,J,Ce,qe,$e,ct){return Me([Ee(Ae(P)),Ee(_e(J)),Ee(Ae(Ce)),Ee(_e(qe)),Ee(Ae($e)),Ee(_e(ct)),"c"].join(" ")),this};I.__private__.line=I.line=function(P,J,Ce,qe,$e){if(isNaN(P)||isNaN(J)||isNaN(Ce)||isNaN(qe)||!Fs($e))throw new Error("Invalid arguments passed to jsPDF.line");return he===ne.COMPAT?this.lines([[Ce-P,qe-J]],P,J,[1,1],$e||"S"):this.lines([[Ce-P,qe-J]],P,J,[1,1]).stroke()},I.__private__.lines=I.lines=function(P,J,Ce,qe,$e,ct){var Tt,wt,mr,ar,cr,$r,Li,ki,Di,Yi,qi,Zn;if(typeof P=="number"&&(Zn=Ce,Ce=J,J=P,P=Zn),qe=qe||[1,1],ct=ct||!1,isNaN(J)||isNaN(Ce)||!Array.isArray(P)||!Array.isArray(qe)||!Fs($e)||typeof ct!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(fa(J,Ce),Tt=qe[0],wt=qe[1],ar=P.length,Yi=J,qi=Ce,mr=0;mr<ar;mr++)(cr=P[mr]).length===2?(Yi=cr[0]*Tt+Yi,qi=cr[1]*wt+qi,Kn(Yi,qi)):($r=cr[0]*Tt+Yi,Li=cr[1]*wt+qi,ki=cr[2]*Tt+Yi,Di=cr[3]*wt+qi,Yi=cr[4]*Tt+Yi,qi=cr[5]*wt+qi,Qr($r,Li,ki,Di,Yi,qi));return ct&&Po(),Za($e),this},I.path=function(P){for(var J=0;J<P.length;J++){var Ce=P[J],qe=Ce.c;switch(Ce.op){case"m":fa(qe[0],qe[1]);break;case"l":Kn(qe[0],qe[1]);break;case"c":Qr.apply(this,qe);break;case"h":Po()}}return this},I.__private__.rect=I.rect=function(P,J,Ce,qe,$e){if(isNaN(P)||isNaN(J)||isNaN(Ce)||isNaN(qe)||!Fs($e))throw new Error("Invalid arguments passed to jsPDF.rect");return he===ne.COMPAT&&(qe=-qe),Me([Ee(Ae(P)),Ee(_e(J)),Ee(Ae(Ce)),Ee(Ae(qe)),"re"].join(" ")),Za($e),this},I.__private__.triangle=I.triangle=function(P,J,Ce,qe,$e,ct,Tt){if(isNaN(P)||isNaN(J)||isNaN(Ce)||isNaN(qe)||isNaN($e)||isNaN(ct)||!Fs(Tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ce-P,qe-J],[$e-Ce,ct-qe],[P-$e,J-ct]],P,J,[1,1],Tt,!0),this},I.__private__.roundedRect=I.roundedRect=function(P,J,Ce,qe,$e,ct,Tt){if(isNaN(P)||isNaN(J)||isNaN(Ce)||isNaN(qe)||isNaN($e)||isNaN(ct)||!Fs(Tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var wt=4/3*(Math.SQRT2-1);return $e=Math.min($e,.5*Ce),ct=Math.min(ct,.5*qe),this.lines([[Ce-2*$e,0],[$e*wt,0,$e,ct-ct*wt,$e,ct],[0,qe-2*ct],[0,ct*wt,-$e*wt,ct,-$e,ct],[2*$e-Ce,0],[-$e*wt,0,-$e,-ct*wt,-$e,-ct],[0,2*ct-qe],[0,-ct*wt,$e*wt,-ct,$e,-ct]],P+$e,J,[1,1],Tt,!0),this},I.__private__.ellipse=I.ellipse=function(P,J,Ce,qe,$e){if(isNaN(P)||isNaN(J)||isNaN(Ce)||isNaN(qe)||!Fs($e))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ct=4/3*(Math.SQRT2-1)*Ce,Tt=4/3*(Math.SQRT2-1)*qe;return fa(P+Ce,J),Qr(P+Ce,J-Tt,P+ct,J-qe,P,J-qe),Qr(P-ct,J-qe,P-Ce,J-Tt,P-Ce,J),Qr(P-Ce,J+Tt,P-ct,J+qe,P,J+qe),Qr(P+ct,J+qe,P+Ce,J+Tt,P+Ce,J),Za($e),this},I.__private__.circle=I.circle=function(P,J,Ce,qe){if(isNaN(P)||isNaN(J)||isNaN(Ce)||!Fs(qe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(P,J,Ce,Ce,qe)},I.setFont=function(P,J,Ce){return Ce&&(J=Pe(J,Ce)),br=Fo(P,J,{disableWarning:!1}),this};var xA=I.__private__.getFont=I.getFont=function(){return Dr[Fo.apply(I,arguments)]};I.__private__.getFontList=I.getFontList=function(){var P,J,Ce={};for(P in Vr)if(Vr.hasOwnProperty(P))for(J in Ce[P]=[],Vr[P])Vr[P].hasOwnProperty(J)&&Ce[P].push(J);return Ce},I.addFont=function(P,J,Ce,qe,$e){var ct=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ct.indexOf(arguments[3])!==-1?$e=arguments[3]:arguments[3]&&ct.indexOf(arguments[3])==-1&&(Ce=Pe(Ce,qe)),$e=$e||"Identity-H",Zr.call(this,P,J,Ce,$e)};var Xi,yn=i.lineWidth||.200025,Xa=I.__private__.getLineWidth=I.getLineWidth=function(){return yn},Qo=I.__private__.setLineWidth=I.setLineWidth=function(P){return yn=P,Me(Ee(Ae(P))+" w"),this};I.__private__.setLineDash=Mr.API.setLineDash=Mr.API.setLineDashPattern=function(P,J){if(P=P||[],J=J||0,isNaN(J)||!Array.isArray(P))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return P=P.map(function(Ce){return Ee(Ae(Ce))}).join(" "),J=Ee(Ae(J)),Me("["+P+"] "+J+" d"),this};var ko=I.__private__.getLineHeight=I.getLineHeight=function(){return ze*Xi};I.__private__.getLineHeight=I.getLineHeight=function(){return ze*Xi};var BA=I.__private__.setLineHeightFactor=I.setLineHeightFactor=function(P){return typeof(P=P||1.15)=="number"&&(Xi=P),this},CA=I.__private__.getLineHeightFactor=I.getLineHeightFactor=function(){return Xi};BA(i.lineHeight);var Is=I.__private__.getHorizontalCoordinate=function(P){return Ae(P)},ga=I.__private__.getVerticalCoordinate=function(P){return he===ne.ADVANCED?P:ue[pe].mediaBox.topRightY-ue[pe].mediaBox.bottomLeftY-Ae(P)},ol=I.__private__.getHorizontalCoordinateString=I.getHorizontalCoordinateString=function(P){return Ee(Is(P))},Ys=I.__private__.getVerticalCoordinateString=I.getVerticalCoordinateString=function(P){return Ee(ga(P))},Ls=i.strokeColor||"0 G";I.__private__.getStrokeColor=I.getDrawColor=function(){return Yt(Ls)},I.__private__.setStrokeColor=I.setDrawColor=function(P,J,Ce,qe){return Ls=ur({ch1:P,ch2:J,ch3:Ce,ch4:qe,pdfColorType:"draw",precision:2}),Me(Ls),this};var SA=i.fillColor||"0 g";I.__private__.getFillColor=I.getFillColor=function(){return Yt(SA)},I.__private__.setFillColor=I.setFillColor=function(P,J,Ce,qe){return SA=ur({ch1:P,ch2:J,ch3:Ce,ch4:qe,pdfColorType:"fill",precision:2}),Me(SA),this};var Ts=i.textColor||"0 g",jc=I.__private__.getTextColor=I.getTextColor=function(){return Yt(Ts)};I.__private__.setTextColor=I.setTextColor=function(P,J,Ce,qe){return Ts=ur({ch1:P,ch2:J,ch3:Ce,ch4:qe,pdfColorType:"text",precision:3}),this};var EA=i.charSpace,Gc=I.__private__.getCharSpace=I.getCharSpace=function(){return parseFloat(EA||0)};I.__private__.setCharSpace=I.setCharSpace=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return EA=P,this};var Al=0;I.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},I.__private__.setLineCap=I.setLineCap=function(P){var J=I.CapJoinStyles[P];if(J===void 0)throw new Error("Line cap style of '"+P+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Al=J,Me(J+" J"),this};var ll=0;I.__private__.setLineJoin=I.setLineJoin=function(P){var J=I.CapJoinStyles[P];if(J===void 0)throw new Error("Line join style of '"+P+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ll=J,Me(J+" j"),this},I.__private__.setLineMiterLimit=I.__private__.setMiterLimit=I.setLineMiterLimit=I.setMiterLimit=function(P){if(P=P||0,isNaN(P))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Me(Ee(Ae(P))+" M"),this},I.GState=Hp,I.setGState=function(P){(P=typeof P=="string"?Or[bi[P]]:tc(null,P)).equals(Nt)||(Me("/"+P.id+" gs"),Nt=P)};var tc=function(P,J){if(!P||!bi[P]){var Ce=!1;for(var qe in Or)if(Or.hasOwnProperty(qe)&&Or[qe].equals(J)){Ce=!0;break}if(Ce)J=Or[qe];else{var $e="GS"+(Object.keys(Or).length+1).toString(10);Or[$e]=J,J.id=$e}return P&&(bi[P]=J.id),X.publish("addGState",J),J}};I.addGState=function(P,J){return tc(P,J),this},I.saveGraphicsState=function(){return Me("q"),xt.push({key:br,size:ze,color:Ts}),this},I.restoreGraphicsState=function(){Me("Q");var P=xt.pop();return br=P.key,ze=P.size,Ts=P.color,Nt=null,this},I.setCurrentTransformationMatrix=function(P){return Me(P.toString()+" cm"),this},I.comment=function(P){return Me("#"+P),this};var Ya=function(P,J){var Ce=P||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ce},set:function(ct){isNaN(ct)||(Ce=parseFloat(ct))}});var qe=J||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return qe},set:function(ct){isNaN(ct)||(qe=parseFloat(ct))}});var $e="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return $e},set:function(ct){$e=ct.toString()}}),this},Ja=function(P,J,Ce,qe){Ya.call(this,P,J),this.type="rect";var $e=Ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return $e},set:function(Tt){isNaN(Tt)||($e=parseFloat(Tt))}});var ct=qe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ct},set:function(Tt){isNaN(Tt)||(ct=parseFloat(Tt))}}),this},Do=function(){this.page=Kr,this.currentPage=pe,this.pages=Et.slice(0),this.pagesContext=ue.slice(0),this.x=vt,this.y=Cr,this.matrix=Tr,this.width=to(pe),this.height=Wn(pe),this.outputDestination=Vt,this.id="",this.objectNumber=-1};Do.prototype.restore=function(){Kr=this.page,pe=this.currentPage,ue=this.pagesContext,Et=this.pages,vt=this.x,Cr=this.y,Tr=this.matrix,Oo(pe,this.width),IA(pe,this.height),Vt=this.outputDestination};var FA=function(P,J,Ce,qe,$e){be.push(new Do),Kr=pe=0,Et=[],vt=P,Cr=J,Tr=$e,Eo([Ce,qe])},eo=function(P){if(ve[P])be.pop().restore();else{var J=new Do,Ce="Xo"+(Object.keys(le).length+1).toString(10);J.id=Ce,ve[P]=Ce,le[Ce]=J,X.publish("addFormObject",J),be.pop().restore()}};for(var No in I.beginFormObject=function(P,J,Ce,qe,$e){return FA(P,J,Ce,qe,$e),this},I.endFormObject=function(P){return eo(P),this},I.doFormObject=function(P,J){var Ce=le[ve[P]];return Me("q"),Me(J.toString()+" cm"),Me("/"+Ce.id+" Do"),Me("Q"),this},I.getFormObject=function(P){var J=le[ve[P]];return{x:J.x,y:J.y,width:J.width,height:J.height,matrix:J.matrix}},I.save=function(P,J){return P=P||"generated.pdf",(J=J||{}).returnPromise=J.returnPromise||!1,J.returnPromise===!1?(vc(Wa(Xs()),P),typeof vc.unload=="function"&&Pr.setTimeout&&setTimeout(vc.unload,911),this):new Promise(function(Ce,qe){try{var $e=vc(Wa(Xs()),P);typeof vc.unload=="function"&&Pr.setTimeout&&setTimeout(vc.unload,911),Ce($e)}catch(ct){qe(ct.message)}})},Mr.API)Mr.API.hasOwnProperty(No)&&(No==="events"&&Mr.API.events.length?function(P,J){var Ce,qe,$e;for($e=J.length-1;$e!==-1;$e--)Ce=J[$e][0],qe=J[$e][1],P.subscribe.apply(P,[Ce].concat(typeof qe=="function"?[qe]:qe))}(X,Mr.API.events):I[No]=Mr.API[No]);var to=I.getPageWidth=function(P){return(ue[P=P||pe].mediaBox.topRightX-ue[P].mediaBox.bottomLeftX)/Rt},Oo=I.setPageWidth=function(P,J){ue[P].mediaBox.topRightX=J*Rt+ue[P].mediaBox.bottomLeftX},Wn=I.getPageHeight=function(P){return(ue[P=P||pe].mediaBox.topRightY-ue[P].mediaBox.bottomLeftY)/Rt},IA=I.setPageHeight=function(P,J){ue[P].mediaBox.topRightY=J*Rt+ue[P].mediaBox.bottomLeftY};return I.internal={pdfEscape:Ci,getStyle:da,getFont:xA,getFontSize:Pt,getCharSpace:Gc,getTextColor:jc,getLineHeight:ko,getLineHeightFactor:CA,getLineWidth:Xa,write:fr,getHorizontalCoordinate:Is,getVerticalCoordinate:ga,getCoordinateString:ol,getVerticalCoordinateString:Ys,collections:{},newObject:lt,newAdditionalObject:nr,newObjectDeferred:ht,newObjectDeferredBegin:gt,getFilters:Br,putStream:Rr,events:X,scaleFactor:Rt,pageSize:{getWidth:function(){return to(pe)},setWidth:function(P){Oo(pe,P)},getHeight:function(){return Wn(pe)},setHeight:function(P){IA(pe,P)}},encryptionOptions:C,encryption:gn,getEncryptor:Jl,output:To,getNumberOfPages:_A,pages:Et,out:Me,f2:Ke,f3:ce,getPageInfo:Uo,getPageInfoByObjId:Ur,getCurrentPageInfo:ec,getPDFVersion:j,Point:Ya,Rectangle:Ja,Matrix:De,hasHotfix:Yl},Object.defineProperty(I.internal.pageSize,"width",{get:function(){return to(pe)},set:function(P){Oo(pe,P)},enumerable:!0,configurable:!0}),Object.defineProperty(I.internal.pageSize,"height",{get:function(){return Wn(pe)},set:function(P){IA(pe,P)},enumerable:!0,configurable:!0}),Ua.call(I,bt),br="F1",Zs(l,t),X.publish("initialized"),I}lu.prototype.lsbFirstWord=function(i){return String.fromCharCode(i>>0&255,i>>8&255,i>>16&255,i>>24&255)},lu.prototype.toHexString=function(i){return i.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},lu.prototype.hexToBytes=function(i){for(var e=[],t=0;t<i.length;t+=2)e.push(String.fromCharCode(parseInt(i.substr(t,2),16)));return e.join("")},lu.prototype.processOwnerPassword=function(i,e){return Mg(Pg(e).substr(0,5),i)},lu.prototype.encryptor=function(i,e){var t=Pg(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return Mg(t,s)}},Hp.prototype.equals=function(i){var e,t="id,objectNumber,equals";if(!i||fi(i)!==fi(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!i.hasOwnProperty(e)||this[e]!==i[e])return!1;s++}for(e in i)i.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},Mr.API={events:[]},Mr.version="2.5.1";var nn=Mr.API,Qg=1,wc=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hu=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Hr=function(i){return i.toFixed(2)},Ul=function(i){return i.toFixed(5)};nn.__acroform__={};var la=function(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i},vv=function(i){return i*Qg},aA=function(i){var e=new wv,t=dr.internal.getHeight(i)||0,s=dr.internal.getWidth(i)||0;return e.BBox=[0,0,Number(Hr(s)),Number(Hr(t))],e},G4=nn.__acroform__.setBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|=1<<e},q4=nn.__acroform__.clearBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&=~(1<<e)},$4=nn.__acroform__.getBit=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return i&1<<e?1:0},ln=nn.__acroform__.getBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return $4(i,e-1)},cn=nn.__acroform__.setBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G4(i,e-1)},un=nn.__acroform__.clearBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return q4(i,e-1)},K4=nn.__acroform__.calculateCoordinates=function(i,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,l=i[0],c=i[1],p=i[2],a=i[3],g={};return g.lowerLeft_X=t(l)||0,g.lowerLeft_Y=s(c+a)||0,g.upperRight_X=t(l+p)||0,g.upperRight_Y=s(c)||0,[Number(Hr(g.lowerLeft_X)),Number(Hr(g.lowerLeft_Y)),Number(Hr(g.upperRight_X)),Number(Hr(g.upperRight_Y))]},W4=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var e=[],t=i._V||i.DV,s=kg(i,t),l=i.scope.internal.getFont(i.fontName,i.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(i.scope.__private__.encodeColorString(i.color)),e.push("/"+l+" "+Hr(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var c=aA(i);return c.scope=i.scope,c.stream=e.join(`
`),c}},kg=function(i,e){var t=i.fontSize===0?i.maxFontSize:i.fontSize,s={text:"",fontSize:""},l=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");l=i.multiline?l.map(function(ce){return ce.split(`
`)}):l.map(function(ce){return[ce]});var c=t,p=dr.internal.getHeight(i)||0;p=p<0?-p:p;var a=dr.internal.getWidth(i)||0;a=a<0?-a:a;var g=function(ce,Ae,xe){if(ce+1<l.length){var _e=Ae+" "+l[ce+1][0];return Vp(_e,i,xe).width<=a-4}return!1};c++;e:for(;c>0;){e="",c--;var _,C,L=Vp("3",i,c).height,M=i.multiline?p-c:(p-L)/2,I=M+=2,G=0,j=0,Y=0;if(c<=0){e=`(...) Tj
`,e+="% Width of Text: "+Vp(e,i,c=12).width+", FieldWidth:"+a+`
`;break}for(var q="",ne=0,he=0;he<l.length;he++)if(l.hasOwnProperty(he)){var Se=!1;if(l[he].length!==1&&Y!==l[he].length-1){if((L+2)*(ne+2)+2>p)continue e;q+=l[he][Y],Se=!0,j=he,he--}else{q=(q+=l[he][Y]+" ").substr(q.length-1)==" "?q.substr(0,q.length-1):q;var Ne=parseInt(he),Pe=g(Ne,q,c),Ee=he>=l.length-1;if(Pe&&!Ee){q+=" ",Y=0;continue}if(Pe||Ee){if(Ee)j=Ne;else if(i.multiline&&(L+2)*(ne+2)+2>p)continue e}else{if(!i.multiline||(L+2)*(ne+2)+2>p)continue e;j=Ne}}for(var fe="",We=G;We<=j;We++){var Ke=l[We];if(i.multiline){if(We===j){fe+=Ke[Y]+" ",Y=(Y+1)%Ke.length;continue}if(We===G){fe+=Ke[Ke.length-1]+" ";continue}}fe+=Ke[0]+" "}switch(fe=fe.substr(fe.length-1)==" "?fe.substr(0,fe.length-1):fe,C=Vp(fe,i,c).width,i.textAlign){case"right":_=a-C-2;break;case"center":_=(a-C)/2;break;case"left":default:_=2}e+=Hr(_)+" "+Hr(I)+` Td
`,e+="("+wc(fe)+`) Tj
`,e+=-Hr(_)+` 0 Td
`,I=-(c+2),C=0,G=Se?j:j+1,ne++,q=""}break}return s.text=e,s.fontSize=c,s},Vp=function(i,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),l=e.scope.getStringUnitWidth(i,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:l}},Z4={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},X4=function(i,e){var t={type:"reference",object:i};e.internal.getPageInfo(i.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(i.page).pageContext.annotations.push(t)},Y4=function(i,e){for(var t in i)if(i.hasOwnProperty(t)){var s=t,l=i[t];e.internal.newObjectDeferredBegin(l.objId,!0),fi(l)==="object"&&typeof l.putStream=="function"&&l.putStream(),delete i[s]}},J4=function(i,e){if(e.scope=i,i.internal!==void 0&&(i.internal.acroformPlugin===void 0||i.internal.acroformPlugin.isInitialized===!1)){if(ho.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(Z4)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Qg=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new bv,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(i)}),i.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var l in s)if(s.hasOwnProperty(l)){var c=s[l];c.objId=void 0,c.hasAnnotation&&X4(c,t)}})(i)}),i.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(i)}),i.internal.events.subscribe("postPutPages",function(t){(function(s,l){var c=!s;for(var p in s||(l.internal.newObjectDeferredBegin(l.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),l.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||l.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(p)){var a=s[p],g=[],_=a.Rect;if(a.Rect&&(a.Rect=K4(a.Rect,l)),l.internal.newObjectDeferredBegin(a.objId,!0),a.DA=dr.createDefaultAppearanceStream(a),fi(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(g=a.getKeyValueListForStream()),a.Rect=_,a.hasAppearanceStream&&!a.appearanceStreamContent){var C=W4(a);g.push({key:"AP",value:"<</N "+C+">>"}),l.internal.acroformPlugin.xForms.push(C)}if(a.appearanceStreamContent){var L="";for(var M in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(M)){var I=a.appearanceStreamContent[M];if(L+="/"+M+" ",L+="<<",Object.keys(I).length>=1||Array.isArray(I)){for(var p in I)if(I.hasOwnProperty(p)){var G=I[p];typeof G=="function"&&(G=G.call(l,a)),L+="/"+p+" "+G+" ",l.internal.acroformPlugin.xForms.indexOf(G)>=0||l.internal.acroformPlugin.xForms.push(G)}}else typeof(G=I)=="function"&&(G=G.call(l,a)),L+="/"+p+" "+G,l.internal.acroformPlugin.xForms.indexOf(G)>=0||l.internal.acroformPlugin.xForms.push(G);L+=">>"}g.push({key:"AP",value:`<<
`+L+">>"})}l.internal.putStream({additionalKeyValues:g,objectId:a.objId}),l.internal.out("endobj")}c&&Y4(l.internal.acroformPlugin.xForms,l)})(t,i)}),i.internal.acroformPlugin.isInitialized=!0}},_v=nn.__acroform__.arrayToPdfArray=function(i,e,t){var s=function(p){return p};if(Array.isArray(i)){for(var l="[",c=0;c<i.length;c++)switch(c!==0&&(l+=" "),fi(i[c])){case"boolean":case"number":case"object":l+=i[c].toString();break;case"string":i[c].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),l+="("+wc(s(i[c].toString()))+")"):l+=i[c].toString()}return l+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Dg=function(i,e,t){var s=function(l){return l};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(i=i||"").toString(),i="("+wc(s(i))+")"},oA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};oA.prototype.toString=function(){return this.objId+" 0 R"},oA.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},oA.prototype.getKeyValueListForStream=function(){var i=[],e=Object.getOwnPropertyNames(this).filter(function(c){return c!="content"&&c!="appearanceStreamContent"&&c!="scope"&&c!="objId"&&c.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],l=this[s];l&&(Array.isArray(l)?i.push({key:s,value:_v(l,this.objId,this.scope)}):l instanceof oA?(l.scope=this.scope,i.push({key:s,value:l.objId+" 0 R"})):typeof l!="function"&&i.push({key:s,value:l}))}return i};var wv=function(){oA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){i=t.trim()},get:function(){return i||null}})};la(wv,oA);var bv=function(){oA.call(this);var i,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+wc(t(i))+")"}},set:function(t){i=t}})};la(bv,oA);var ho=function i(){oA.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(q){if(isNaN(q))throw new Error('Invalid value "'+q+'" for attribute F supplied.');e=q}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ln(e,3)},set:function(q){q?this.F=cn(e,3):this.F=un(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(q){if(isNaN(q))throw new Error('Invalid value "'+q+'" for attribute Ff supplied.');t=q}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(q){s=q!==void 0?q:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(q){s[0]=q}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(q){s[1]=q}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(q){s[2]=q}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(q){s[3]=q}});var l="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return l},set:function(q){switch(q){case"/Btn":case"/Tx":case"/Ch":case"/Sig":l=q;break;default:throw new Error('Invalid value "'+q+'" for attribute FT supplied.')}}});var c=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!c||c.length<1){if(this instanceof qp)return;c="FieldObject"+i.FieldNum++}var q=function(ne){return ne};return this.scope&&(q=this.scope.internal.getEncryptor(this.objId)),"("+wc(q(c))+")"},set:function(q){c=q.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return c},set:function(q){c=q}});var p="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return p},set:function(q){p=q}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(q){a=q}});var g=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return g},set:function(q){g=q}});var _=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return _===void 0?50/Qg:_},set:function(q){_=q}});var C="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return C},set:function(q){C=q}});var L="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!L||this instanceof qp||this instanceof bc))return Dg(L,this.objId,this.scope)},set:function(q){q=q.toString(),L=q}});var M=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(M)return this instanceof Vn?M:Dg(M,this.objId,this.scope)},set:function(q){q=q.toString(),M=this instanceof Vn?q:q.substr(0,1)==="("?hu(q.substr(1,q.length-2)):hu(q)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vn?hu(M.substr(1,M.length-1)):M},set:function(q){q=q.toString(),M=this instanceof Vn?"/"+q:q}});var I=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(I)return I},set:function(q){this.V=q}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(I)return this instanceof Vn?I:Dg(I,this.objId,this.scope)},set:function(q){q=q.toString(),I=this instanceof Vn?q:q.substr(0,1)==="("?hu(q.substr(1,q.length-2)):hu(q)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vn?hu(I.substr(1,I.length-1)):I},set:function(q){q=q.toString(),I=this instanceof Vn?"/"+q:q}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var G,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(q){q=!!q,j=q}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(G)return G},set:function(q){G=q}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,1)},set:function(q){q?this.Ff=cn(this.Ff,1):this.Ff=un(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,2)},set:function(q){q?this.Ff=cn(this.Ff,2):this.Ff=un(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,3)},set:function(q){q?this.Ff=cn(this.Ff,3):this.Ff=un(this.Ff,3)}});var Y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Y!==null)return Y},set:function(q){if([0,1,2].indexOf(q)===-1)throw new Error('Invalid value "'+q+'" for attribute Q supplied.');Y=q}}),Object.defineProperty(this,"textAlign",{get:function(){var q;switch(Y){case 0:default:q="left";break;case 1:q="center";break;case 2:q="right"}return q},configurable:!0,enumerable:!0,set:function(q){switch(q){case"right":case 2:Y=2;break;case"center":case 1:Y=1;break;case"left":case 0:default:Y=0}}})};la(ho,oA);var pu=function(){ho.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(t){i=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return _v(e,this.objId,this.scope)},set:function(t){var s,l;l=[],typeof(s=t)=="string"&&(l=function(c,p,a){a||(a=1);for(var g,_=[];g=p.exec(c);)_.push(g[a]);return _}(s,/\((.*?)\)/g)),e=l}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,18)},set:function(t){t?this.Ff=cn(this.Ff,18):this.Ff=un(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=cn(this.Ff,19):this.Ff=un(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,20)},set:function(t){t?(this.Ff=cn(this.Ff,20),e.sort()):this.Ff=un(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,22)},set:function(t){t?this.Ff=cn(this.Ff,22):this.Ff=un(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,23)},set:function(t){t?this.Ff=cn(this.Ff,23):this.Ff=un(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,27)},set:function(t){t?this.Ff=cn(this.Ff,27):this.Ff=un(this.Ff,27)}}),this.hasAppearanceStream=!1};la(pu,ho);var du=function(){pu.call(this),this.fontName="helvetica",this.combo=!1};la(du,pu);var fu=function(){du.call(this),this.combo=!0};la(fu,du);var jp=function(){fu.call(this),this.edit=!0};la(jp,fu);var Vn=function(){ho.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,15)},set:function(t){t?this.Ff=cn(this.Ff,15):this.Ff=un(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,16)},set:function(t){t?this.Ff=cn(this.Ff,16):this.Ff=un(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,17)},set:function(t){t?this.Ff=cn(this.Ff,17):this.Ff=un(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,26)},set:function(t){t?this.Ff=cn(this.Ff,26):this.Ff=un(this.Ff,26)}});var i,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(c){return c};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,l=[];for(s in l.push("<<"),e)l.push("/"+s+" ("+wc(t(e[s]))+")");return l.push(">>"),l.join(`
`)}},set:function(t){fi(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(t){i="/"+t}})};la(Vn,ho);var Gp=function(){Vn.call(this),this.pushButton=!0};la(Gp,Vn);var gu=function(){Vn.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e!==void 0?e:[]}})};la(gu,Vn);var qp=function(){var i,e;ho.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(l){i=l}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(l){e=l}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var l=function(a){return a};this.scope&&(l=this.scope.internal.getEncryptor(this.objId));var c,p=[];for(c in p.push("<<"),s)p.push("/"+c+" ("+wc(l(s[c]))+")");return p.push(">>"),p.join(`
`)},set:function(l){fi(l)==="object"&&(s=l)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(l){typeof l=="string"&&(s.CA=l)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(l){t=l}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(l){t="/"+l}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=dr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};la(qp,ho),gu.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=i.createAppearanceStream(t.optionName),t.caption=i.getCA()}},gu.prototype.createOption=function(i){var e=new qp;return e.Parent=this,e.optionName=i,this.Kids.push(e),e3.call(this.scope,e),e};var $p=function(){Vn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=dr.CheckBox.createAppearanceStream()};la($p,Vn);var bc=function(){ho.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,13)},set:function(e){e?this.Ff=cn(this.Ff,13):this.Ff=un(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,21)},set:function(e){e?this.Ff=cn(this.Ff,21):this.Ff=un(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,23)},set:function(e){e?this.Ff=cn(this.Ff,23):this.Ff=un(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,24)},set:function(e){e?this.Ff=cn(this.Ff,24):this.Ff=un(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,25)},set:function(e){e?this.Ff=cn(this.Ff,25):this.Ff=un(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,26)},set:function(e){e?this.Ff=cn(this.Ff,26):this.Ff=un(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){Number.isInteger(e)&&(i=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};la(bc,ho);var Kp=function(){bc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,14)},set:function(i){i?this.Ff=cn(this.Ff,14):this.Ff=un(this.Ff,14)}}),this.password=!0};la(Kp,bc);var dr={CheckBox:{createAppearanceStream:function(){return{N:{On:dr.CheckBox.YesNormal},D:{On:dr.CheckBox.YesPushDown,Off:dr.CheckBox.OffPushDown}}},YesPushDown:function(i){var e=aA(i);e.scope=i.scope;var t=[],s=i.scope.internal.getFont(i.fontName,i.fontStyle).id,l=i.scope.__private__.encodeColorString(i.color),c=kg(i,i.caption);return t.push("0.749023 g"),t.push("0 0 "+Hr(dr.internal.getWidth(i))+" "+Hr(dr.internal.getHeight(i))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+Hr(c.fontSize)+" Tf "+l),t.push("BT"),t.push(c.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(i){var e=aA(i);e.scope=i.scope;var t=i.scope.internal.getFont(i.fontName,i.fontStyle).id,s=i.scope.__private__.encodeColorString(i.color),l=[],c=dr.internal.getHeight(i),p=dr.internal.getWidth(i),a=kg(i,i.caption);return l.push("1 g"),l.push("0 0 "+Hr(p)+" "+Hr(c)+" re"),l.push("f"),l.push("q"),l.push("0 0 1 rg"),l.push("0 0 "+Hr(p-1)+" "+Hr(c-1)+" re"),l.push("W"),l.push("n"),l.push("0 g"),l.push("BT"),l.push("/"+t+" "+Hr(a.fontSize)+" Tf "+s),l.push(a.text),l.push("ET"),l.push("Q"),e.stream=l.join(`
`),e},OffPushDown:function(i){var e=aA(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Hr(dr.internal.getWidth(i))+" "+Hr(dr.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(i){var e={D:{Off:dr.RadioButton.Circle.OffPushDown},N:{}};return e.N[i]=dr.RadioButton.Circle.YesNormal,e.D[i]=dr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(i){var e=aA(i);e.scope=i.scope;var t=[],s=dr.internal.getWidth(i)<=dr.internal.getHeight(i)?dr.internal.getWidth(i)/4:dr.internal.getHeight(i)/4;s=Number((.9*s).toFixed(5));var l=dr.internal.Bezier_C,c=Number((s*l).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ul(dr.internal.getWidth(i)/2)+" "+Ul(dr.internal.getHeight(i)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+c+" "+c+" "+s+" 0 "+s+" c"),t.push("-"+c+" "+s+" -"+s+" "+c+" -"+s+" 0 c"),t.push("-"+s+" -"+c+" -"+c+" -"+s+" 0 -"+s+" c"),t.push(c+" -"+s+" "+s+" -"+c+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=aA(i);e.scope=i.scope;var t=[],s=dr.internal.getWidth(i)<=dr.internal.getHeight(i)?dr.internal.getWidth(i)/4:dr.internal.getHeight(i)/4;s=Number((.9*s).toFixed(5));var l=Number((2*s).toFixed(5)),c=Number((l*dr.internal.Bezier_C).toFixed(5)),p=Number((s*dr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ul(dr.internal.getWidth(i)/2)+" "+Ul(dr.internal.getHeight(i)/2)+" cm"),t.push(l+" 0 m"),t.push(l+" "+c+" "+c+" "+l+" 0 "+l+" c"),t.push("-"+c+" "+l+" -"+l+" "+c+" -"+l+" 0 c"),t.push("-"+l+" -"+c+" -"+c+" -"+l+" 0 -"+l+" c"),t.push(c+" -"+l+" "+l+" -"+c+" "+l+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ul(dr.internal.getWidth(i)/2)+" "+Ul(dr.internal.getHeight(i)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+p+" "+p+" "+s+" 0 "+s+" c"),t.push("-"+p+" "+s+" -"+s+" "+p+" -"+s+" 0 c"),t.push("-"+s+" -"+p+" -"+p+" -"+s+" 0 -"+s+" c"),t.push(p+" -"+s+" "+s+" -"+p+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(i){var e=aA(i);e.scope=i.scope;var t=[],s=dr.internal.getWidth(i)<=dr.internal.getHeight(i)?dr.internal.getWidth(i)/4:dr.internal.getHeight(i)/4;s=Number((.9*s).toFixed(5));var l=Number((2*s).toFixed(5)),c=Number((l*dr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ul(dr.internal.getWidth(i)/2)+" "+Ul(dr.internal.getHeight(i)/2)+" cm"),t.push(l+" 0 m"),t.push(l+" "+c+" "+c+" "+l+" 0 "+l+" c"),t.push("-"+c+" "+l+" -"+l+" "+c+" -"+l+" 0 c"),t.push("-"+l+" -"+c+" -"+c+" -"+l+" 0 -"+l+" c"),t.push(c+" -"+l+" "+l+" -"+c+" "+l+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(i){var e={D:{Off:dr.RadioButton.Cross.OffPushDown},N:{}};return e.N[i]=dr.RadioButton.Cross.YesNormal,e.D[i]=dr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(i){var e=aA(i);e.scope=i.scope;var t=[],s=dr.internal.calculateCross(i);return t.push("q"),t.push("1 1 "+Hr(dr.internal.getWidth(i)-2)+" "+Hr(dr.internal.getHeight(i)-2)+" re"),t.push("W"),t.push("n"),t.push(Hr(s.x1.x)+" "+Hr(s.x1.y)+" m"),t.push(Hr(s.x2.x)+" "+Hr(s.x2.y)+" l"),t.push(Hr(s.x4.x)+" "+Hr(s.x4.y)+" m"),t.push(Hr(s.x3.x)+" "+Hr(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=aA(i);e.scope=i.scope;var t=dr.internal.calculateCross(i),s=[];return s.push("0.749023 g"),s.push("0 0 "+Hr(dr.internal.getWidth(i))+" "+Hr(dr.internal.getHeight(i))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Hr(dr.internal.getWidth(i)-2)+" "+Hr(dr.internal.getHeight(i)-2)+" re"),s.push("W"),s.push("n"),s.push(Hr(t.x1.x)+" "+Hr(t.x1.y)+" m"),s.push(Hr(t.x2.x)+" "+Hr(t.x2.y)+" l"),s.push(Hr(t.x4.x)+" "+Hr(t.x4.y)+" m"),s.push(Hr(t.x3.x)+" "+Hr(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(i){var e=aA(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Hr(dr.internal.getWidth(i))+" "+Hr(dr.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(i){var e=i.scope.internal.getFont(i.fontName,i.fontStyle).id,t=i.scope.__private__.encodeColorString(i.color);return"/"+e+" "+i.fontSize+" Tf "+t}};dr.internal={Bezier_C:.551915024494,calculateCross:function(i){var e=dr.internal.getWidth(i),t=dr.internal.getHeight(i),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},dr.internal.getWidth=function(i){var e=0;return fi(i)==="object"&&(e=vv(i.Rect[2])),e},dr.internal.getHeight=function(i){var e=0;return fi(i)==="object"&&(e=vv(i.Rect[3])),e};var e3=nn.addField=function(i){if(J4(this,i),!(i instanceof ho))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=i).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};nn.AcroFormChoiceField=pu,nn.AcroFormListBox=du,nn.AcroFormComboBox=fu,nn.AcroFormEditBox=jp,nn.AcroFormButton=Vn,nn.AcroFormPushButton=Gp,nn.AcroFormRadioButton=gu,nn.AcroFormCheckBox=$p,nn.AcroFormTextField=bc,nn.AcroFormPasswordField=Kp,nn.AcroFormAppearance=dr,nn.AcroForm={ChoiceField:pu,ListBox:du,ComboBox:fu,EditBox:jp,Button:Vn,PushButton:Gp,RadioButton:gu,CheckBox:$p,TextField:bc,PasswordField:Kp,Appearance:dr},Mr.AcroForm={ChoiceField:pu,ListBox:du,ComboBox:fu,EditBox:jp,Button:Vn,PushButton:Gp,RadioButton:gu,CheckBox:$p,TextField:bc,PasswordField:Kp,Appearance:dr};function xv(i){return i.reduce(function(e,t,s){return e[t]=s,e},{})}(function(i){i.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=i.__addimage__.getImageFileTypeByImageData=function(ce,Ae){var xe,_e,et,Je,rt,Ye=e;if((Ae=Ae||e)==="RGBA"||ce.data!==void 0&&ce.data instanceof Uint8ClampedArray&&"height"in ce&&"width"in ce)return"RGBA";if(Pe(ce))for(rt in t)for(et=t[rt],xe=0;xe<et.length;xe+=1){for(Je=!0,_e=0;_e<et[xe].length;_e+=1)if(et[xe][_e]!==void 0&&et[xe][_e]!==ce[_e]){Je=!1;break}if(Je===!0){Ye=rt;break}}else for(rt in t)for(et=t[rt],xe=0;xe<et.length;xe+=1){for(Je=!0,_e=0;_e<et[xe].length;_e+=1)if(et[xe][_e]!==void 0&&et[xe][_e]!==ce.charCodeAt(_e)){Je=!1;break}if(Je===!0){Ye=rt;break}}return Ye===e&&Ae!==e&&(Ye=Ae),Ye},l=function ce(Ae){for(var xe=this.internal.write,_e=this.internal.putStream,et=(0,this.internal.getFilters)();et.indexOf("FlateEncode")!==-1;)et.splice(et.indexOf("FlateEncode"),1);Ae.objectId=this.internal.newObject();var Je=[];if(Je.push({key:"Type",value:"/XObject"}),Je.push({key:"Subtype",value:"/Image"}),Je.push({key:"Width",value:Ae.width}),Je.push({key:"Height",value:Ae.height}),Ae.colorSpace===Y.INDEXED?Je.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Ae.palette.length/3-1)+" "+("sMask"in Ae&&Ae.sMask!==void 0?Ae.objectId+2:Ae.objectId+1)+" 0 R]"}):(Je.push({key:"ColorSpace",value:"/"+Ae.colorSpace}),Ae.colorSpace===Y.DEVICE_CMYK&&Je.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Je.push({key:"BitsPerComponent",value:Ae.bitsPerComponent}),"decodeParameters"in Ae&&Ae.decodeParameters!==void 0&&Je.push({key:"DecodeParms",value:"<<"+Ae.decodeParameters+">>"}),"transparency"in Ae&&Array.isArray(Ae.transparency)){for(var rt="",Ye=0,it=Ae.transparency.length;Ye<it;Ye++)rt+=Ae.transparency[Ye]+" "+Ae.transparency[Ye]+" ";Je.push({key:"Mask",value:"["+rt+"]"})}Ae.sMask!==void 0&&Je.push({key:"SMask",value:Ae.objectId+1+" 0 R"});var nt=Ae.filter!==void 0?["/"+Ae.filter]:void 0;if(_e({data:Ae.data,additionalKeyValues:Je,alreadyAppliedFilters:nt,objectId:Ae.objectId}),xe("endobj"),"sMask"in Ae&&Ae.sMask!==void 0){var Bt="/Predictor "+Ae.predictor+" /Colors 1 /BitsPerComponent "+Ae.bitsPerComponent+" /Columns "+Ae.width,ee={width:Ae.width,height:Ae.height,colorSpace:"DeviceGray",bitsPerComponent:Ae.bitsPerComponent,decodeParameters:Bt,data:Ae.sMask};"filter"in Ae&&(ee.filter=Ae.filter),ce.call(this,ee)}if(Ae.colorSpace===Y.INDEXED){var pe=this.internal.newObject();_e({data:fe(new Uint8Array(Ae.palette)),objectId:pe}),xe("endobj")}},c=function(){var ce=this.internal.collections.addImage_images;for(var Ae in ce)l.call(this,ce[Ae])},p=function(){var ce,Ae=this.internal.collections.addImage_images,xe=this.internal.write;for(var _e in Ae)xe("/I"+(ce=Ae[_e]).index,ce.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",p))},g=function(){var ce=this.internal.collections.addImage_images;return a.call(this),ce},_=function(){return Object.keys(this.internal.collections.addImage_images).length},C=function(ce){return typeof i["process"+ce.toUpperCase()]=="function"},L=function(ce){return fi(ce)==="object"&&ce.nodeType===1},M=function(ce,Ae){if(ce.nodeName==="IMG"&&ce.hasAttribute("src")){var xe=""+ce.getAttribute("src");if(xe.indexOf("data:image/")===0)return mh(unescape(xe).split("base64,").pop());var _e=i.loadFile(xe,!0);if(_e!==void 0)return _e}if(ce.nodeName==="CANVAS"){if(ce.width===0||ce.height===0)throw new Error("Given canvas must have data. Canvas width: "+ce.width+", height: "+ce.height);var et;switch(Ae){case"PNG":et="image/png";break;case"WEBP":et="image/webp";break;case"JPEG":case"JPG":default:et="image/jpeg"}return mh(ce.toDataURL(et,1).split("base64,").pop())}},I=function(ce){var Ae=this.internal.collections.addImage_images;if(Ae){for(var xe in Ae)if(ce===Ae[xe].alias)return Ae[xe]}},G=function(ce,Ae,xe){return ce||Ae||(ce=-96,Ae=-96),ce<0&&(ce=-1*xe.width*72/ce/this.internal.scaleFactor),Ae<0&&(Ae=-1*xe.height*72/Ae/this.internal.scaleFactor),ce===0&&(ce=Ae*xe.width/xe.height),Ae===0&&(Ae=ce*xe.height/xe.width),[ce,Ae]},j=function(ce,Ae,xe,_e,et,Je){var rt=G.call(this,xe,_e,et),Ye=this.internal.getCoordinateString,it=this.internal.getVerticalCoordinateString,nt=g.call(this);if(xe=rt[0],_e=rt[1],nt[et.index]=et,Je){Je*=Math.PI/180;var Bt=Math.cos(Je),ee=Math.sin(Je),pe=function(Re){return Re.toFixed(4)},ye=[pe(Bt),pe(ee),pe(-1*ee),pe(Bt),0,0,"cm"]}this.internal.write("q"),Je?(this.internal.write([1,"0","0",1,Ye(ce),it(Ae+_e),"cm"].join(" ")),this.internal.write(ye.join(" ")),this.internal.write([Ye(xe),"0","0",Ye(_e),"0","0","cm"].join(" "))):this.internal.write([Ye(xe),"0","0",Ye(_e),Ye(ce),it(Ae+_e),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+et.index+" Do"),this.internal.write("Q")},Y=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var q=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ne=i.__addimage__.sHashCode=function(ce){var Ae,xe,_e=0;if(typeof ce=="string")for(xe=ce.length,Ae=0;Ae<xe;Ae++)_e=(_e<<5)-_e+ce.charCodeAt(Ae),_e|=0;else if(Pe(ce))for(xe=ce.byteLength/2,Ae=0;Ae<xe;Ae++)_e=(_e<<5)-_e+ce[Ae],_e|=0;return _e},he=i.__addimage__.validateStringAsBase64=function(ce){(ce=ce||"").toString().trim();var Ae=!0;return ce.length===0&&(Ae=!1),ce.length%4!=0&&(Ae=!1),/^[A-Za-z0-9+/]+$/.test(ce.substr(0,ce.length-2))===!1&&(Ae=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ce.substr(-2))===!1&&(Ae=!1),Ae},Se=i.__addimage__.extractImageFromDataUrl=function(ce){var Ae=(ce=ce||"").split("base64,"),xe=null;if(Ae.length===2){var _e=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Ae[0]);Array.isArray(_e)&&(xe={mimeType:_e[1],charset:_e[2],data:Ae[1]})}return xe},Ne=i.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};i.__addimage__.isArrayBuffer=function(ce){return Ne()&&ce instanceof ArrayBuffer};var Pe=i.__addimage__.isArrayBufferView=function(ce){return Ne()&&typeof Uint32Array<"u"&&(ce instanceof Int8Array||ce instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ce instanceof Uint8ClampedArray||ce instanceof Int16Array||ce instanceof Uint16Array||ce instanceof Int32Array||ce instanceof Uint32Array||ce instanceof Float32Array||ce instanceof Float64Array)},Ee=i.__addimage__.binaryStringToUint8Array=function(ce){for(var Ae=ce.length,xe=new Uint8Array(Ae),_e=0;_e<Ae;_e++)xe[_e]=ce.charCodeAt(_e);return xe},fe=i.__addimage__.arrayBufferToBinaryString=function(ce){for(var Ae="",xe=Pe(ce)?ce:new Uint8Array(ce),_e=0;_e<xe.length;_e+=8192)Ae+=String.fromCharCode.apply(null,xe.subarray(_e,_e+8192));return Ae};i.addImage=function(){var ce,Ae,xe,_e,et,Je,rt,Ye,it;if(typeof arguments[1]=="number"?(Ae=e,xe=arguments[1],_e=arguments[2],et=arguments[3],Je=arguments[4],rt=arguments[5],Ye=arguments[6],it=arguments[7]):(Ae=arguments[1],xe=arguments[2],_e=arguments[3],et=arguments[4],Je=arguments[5],rt=arguments[6],Ye=arguments[7],it=arguments[8]),fi(ce=arguments[0])==="object"&&!L(ce)&&"imageData"in ce){var nt=ce;ce=nt.imageData,Ae=nt.format||Ae||e,xe=nt.x||xe||0,_e=nt.y||_e||0,et=nt.w||nt.width||et,Je=nt.h||nt.height||Je,rt=nt.alias||rt,Ye=nt.compression||Ye,it=nt.rotation||nt.angle||it}var Bt=this.internal.getFilters();if(Ye===void 0&&Bt.indexOf("FlateEncode")!==-1&&(Ye="SLOW"),isNaN(xe)||isNaN(_e))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var ee=We.call(this,ce,Ae,rt,Ye);return j.call(this,xe,_e,et,Je,ee,it),this};var We=function(ce,Ae,xe,_e){var et,Je,rt;if(typeof ce=="string"&&s(ce)===e){ce=unescape(ce);var Ye=Ke(ce,!1);(Ye!==""||(Ye=i.loadFile(ce,!0))!==void 0)&&(ce=Ye)}if(L(ce)&&(ce=M(ce,Ae)),Ae=s(ce,Ae),!C(Ae))throw new Error("addImage does not support files of type '"+Ae+"', please ensure that a plugin for '"+Ae+"' support is added.");if(((rt=xe)==null||rt.length===0)&&(xe=function(it){return typeof it=="string"||Pe(it)?ne(it):Pe(it.data)?ne(it.data):null}(ce)),(et=I.call(this,xe))||(Ne()&&(ce instanceof Uint8Array||Ae==="RGBA"||(Je=ce,ce=Ee(ce))),et=this["process"+Ae.toUpperCase()](ce,_.call(this),xe,function(it){return it&&typeof it=="string"&&(it=it.toUpperCase()),it in i.image_compression?it:q.NONE}(_e),Je)),!et)throw new Error("An unknown error occurred whilst processing the image.");return et},Ke=i.__addimage__.convertBase64ToBinaryString=function(ce,Ae){var xe;Ae=typeof Ae!="boolean"||Ae;var _e,et="";if(typeof ce=="string"){_e=(xe=Se(ce))!==null?xe.data:ce;try{et=mh(_e)}catch(Je){if(Ae)throw he(_e)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Je.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return et};i.getImageProperties=function(ce){var Ae,xe,_e="";if(L(ce)&&(ce=M(ce)),typeof ce=="string"&&s(ce)===e&&((_e=Ke(ce,!1))===""&&(_e=i.loadFile(ce)||""),ce=_e),xe=s(ce),!C(xe))throw new Error("addImage does not support files of type '"+xe+"', please ensure that a plugin for '"+xe+"' support is added.");if(!Ne()||ce instanceof Uint8Array||(ce=Ee(ce)),!(Ae=this["process"+xe.toUpperCase()](ce)))throw new Error("An unknown error occurred whilst processing the image");return Ae.fileType=xe,Ae}})(Mr.API),function(i){var e=function(t){if(t!==void 0&&t!="")return!0};Mr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(t){for(var s,l,c,p=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,g=this.internal.getPageInfoByObjId(t.objId),_=t.pageContext.annotations,C=!1,L=0;L<_.length&&!C;L++)switch((s=_[L]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(C=!0);break;case"reference":case"text":case"freetext":C=!0}if(C!=0){this.internal.write("/Annots [");for(var M=0;M<_.length;M++){s=_[M];var I=this.internal.pdfEscape,G=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),Y=this.internal.newAdditionalObject(),q=this.internal.getEncryptor(j.objId),ne=s.title||"Note";c="<</Type /Annot /Subtype /Text "+(l="/Rect ["+p(s.bounds.x)+" "+a(s.bounds.y+s.bounds.h)+" "+p(s.bounds.x+s.bounds.w)+" "+a(s.bounds.y)+"] ")+"/Contents ("+I(q(s.contents))+")",c+=" /Popup "+Y.objId+" 0 R",c+=" /P "+g.objId+" 0 R",c+=" /T ("+I(q(ne))+") >>",j.content=c;var he=j.objId+" 0 R";c="<</Type /Annot /Subtype /Popup "+(l="/Rect ["+p(s.bounds.x+30)+" "+a(s.bounds.y+s.bounds.h)+" "+p(s.bounds.x+s.bounds.w+30)+" "+a(s.bounds.y)+"] ")+" /Parent "+he,s.open&&(c+=" /Open true"),c+=" >>",Y.content=c,this.internal.write(j.objId,"0 R",Y.objId,"0 R");break;case"freetext":l="/Rect ["+p(s.bounds.x)+" "+a(s.bounds.y)+" "+p(s.bounds.x+s.bounds.w)+" "+a(s.bounds.y+s.bounds.h)+"] ";var Se=s.color||"#000000";c="<</Type /Annot /Subtype /FreeText "+l+"/Contents ("+I(G(s.contents))+")",c+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Se+")",c+=" /Border [0 0 0]",c+=" >>",this.internal.write(c);break;case"link":if(s.options.name){var Ne=this.annotations._nameMap[s.options.name];s.options.pageNumber=Ne.page,s.options.top=Ne.y}else s.options.top||(s.options.top=0);if(l="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",c="",s.options.url)c="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /A <</S /URI /URI ("+I(G(s.options.url))+") >>";else if(s.options.pageNumber)switch(c="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":c+=" /Fit]";break;case"FitH":c+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,c+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var Pe=a(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),c+=" /XYZ "+s.options.left+" "+Pe+" "+s.options.zoom+"]"}c!=""&&(c+=" >>",this.internal.write(c))}}this.internal.write("]")}}]),i.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},i.link=function(t,s,l,c,p){var a=this.internal.getCurrentPageInfo(),g=this.internal.getCoordinateString,_=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:g(t),y:_(s),w:g(t+l),h:_(s+c)},options:p,type:"link"})},i.textWithLink=function(t,s,l,c){var p,a,g=this.getTextWidth(t),_=this.internal.getLineHeight()/this.internal.scaleFactor;if(c.maxWidth!==void 0){a=c.maxWidth;var C=this.splitTextToSize(t,a).length;p=Math.ceil(_*C)}else a=g,p=_;return this.text(t,s,l,c),l+=.2*_,c.align==="center"&&(s-=g/2),c.align==="right"&&(s-=g),this.link(s,l-_,a,p,c),g},i.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}}(Mr.API),function(i){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},l=[1570,1571,1573,1575];i.__arabicParser__={};var c=i.__arabicParser__.isInArabicSubstitutionA=function(j){return e[j.charCodeAt(0)]!==void 0},p=i.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},a=i.__arabicParser__.isArabicEndLetter=function(j){return p(j)&&c(j)&&e[j.charCodeAt(0)].length<=2},g=i.__arabicParser__.isArabicAlfLetter=function(j){return p(j)&&l.indexOf(j.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return p(j)&&c(j)&&e[j.charCodeAt(0)].length>=1};var _=i.__arabicParser__.arabicLetterHasFinalForm=function(j){return p(j)&&c(j)&&e[j.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(j){return p(j)&&c(j)&&e[j.charCodeAt(0)].length>=3};var C=i.__arabicParser__.arabicLetterHasMedialForm=function(j){return p(j)&&c(j)&&e[j.charCodeAt(0)].length==4},L=i.__arabicParser__.resolveLigatures=function(j){var Y=0,q=t,ne="",he=0;for(Y=0;Y<j.length;Y+=1)q[j.charCodeAt(Y)]!==void 0?(he++,typeof(q=q[j.charCodeAt(Y)])=="number"&&(ne+=String.fromCharCode(q),q=t,he=0),Y===j.length-1&&(q=t,ne+=j.charAt(Y-(he-1)),Y-=he-1,he=0)):(q=t,ne+=j.charAt(Y-he),Y-=he,he=0);return ne};i.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&s[j.charCodeAt(0)]!==void 0};var M=i.__arabicParser__.getCorrectForm=function(j,Y,q){return p(j)?c(j)===!1?-1:!_(j)||!p(Y)&&!p(q)||!p(q)&&a(Y)||a(j)&&!p(Y)||a(j)&&g(Y)||a(j)&&a(Y)?0:C(j)&&p(Y)&&!a(Y)&&p(q)&&_(q)?3:a(j)||!p(q)?1:2:-1},I=function(j){var Y=0,q=0,ne=0,he="",Se="",Ne="",Pe=(j=j||"").split("\\s+"),Ee=[];for(Y=0;Y<Pe.length;Y+=1){for(Ee.push(""),q=0;q<Pe[Y].length;q+=1)he=Pe[Y][q],Se=Pe[Y][q-1],Ne=Pe[Y][q+1],p(he)?(ne=M(he,Se,Ne),Ee[Y]+=ne!==-1?String.fromCharCode(e[he.charCodeAt(0)][ne]):he):Ee[Y]+=he;Ee[Y]=L(Ee[Y])}return Ee.join(" ")},G=i.__arabicParser__.processArabic=i.processArabic=function(){var j,Y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,q=[];if(Array.isArray(Y)){var ne=0;for(q=[],ne=0;ne<Y.length;ne+=1)Array.isArray(Y[ne])?q.push([I(Y[ne][0]),Y[ne][1],Y[ne][2]]):q.push([I(Y[ne])]);j=q}else j=I(Y);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};i.events.push(["preProcessText",G])}(Mr.API),Mr.API.autoPrint=function(i){var e;switch((i=i||{}).variant=i.variant||"non-conform",i.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(i){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(a){s=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var l=300;Object.defineProperty(this,"height",{get:function(){return l},set:function(a){l=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=l+1)}});var c=[];Object.defineProperty(this,"childNodes",{get:function(){return c},set:function(a){c=a}});var p={};Object.defineProperty(this,"style",{get:function(){return p},set:function(a){p=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var l;if((t=t||"2d")!=="2d")return null;for(l in s)this.pdf.context2d.hasOwnProperty(l)&&(this.pdf.context2d[l]=s[l]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Mr.API),function(i){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),l.call(this))},l=function(){this.internal.__cell__.lastCell=new c,this.internal.__cell__.pages=1},c=function(){var g=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return g},set:function(j){g=j}});var _=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return _},set:function(j){_=j}});var C=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return C},set:function(j){C=j}});var L=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return L},set:function(j){L=j}});var M=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return M},set:function(j){M=j}});var I=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return I},set:function(j){I=j}});var G=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return G},set:function(j){G=j}}),this};c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},c.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(g){return s.call(this),this.internal.__cell__.headerFunction=typeof g=="function"?g:void 0,this},i.getTextDimensions=function(g,_){s.call(this);var C=(_=_||{}).fontSize||this.getFontSize(),L=_.font||this.getFont(),M=_.scaleFactor||this.internal.scaleFactor,I=0,G=0,j=0,Y=this;if(!Array.isArray(g)&&typeof g!="string"){if(typeof g!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");g=String(g)}var q=_.maxWidth;q>0?typeof g=="string"?g=this.splitTextToSize(g,q):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(he,Se){return he.concat(Y.splitTextToSize(Se,q))},[])):g=Array.isArray(g)?g:[g];for(var ne=0;ne<g.length;ne++)I<(j=this.getStringUnitWidth(g[ne],{font:L})*C)&&(I=j);return I!==0&&(G=g.length),{w:I/=M,h:Math.max((G*C*this.getLineHeightFactor()-C*(this.getLineHeightFactor()-1))/M,0)}},i.cellAddPage=function(){s.call(this),this.addPage();var g=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new c(g.left,g.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var p=i.cell=function(){var g;g=arguments[0]instanceof c?arguments[0]:new c(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var _=this.internal.__cell__.lastCell,C=this.internal.__cell__.padding,L=this.internal.__cell__.margins||e,M=this.internal.__cell__.tableHeaderRow,I=this.internal.__cell__.printHeaders;return _.lineNumber!==void 0&&(_.lineNumber===g.lineNumber?(g.x=(_.x||0)+(_.width||0),g.y=_.y||0):_.y+_.height+g.height+L.bottom>this.getPageHeight()?(this.cellAddPage(),g.y=L.top,I&&M&&(this.printHeaderRow(g.lineNumber,!0),g.y+=M[0].height)):g.y=_.y+_.height||g.y),g.text[0]!==void 0&&(this.rect(g.x,g.y,g.width,g.height,t===!0?"FD":void 0),g.align==="right"?this.text(g.text,g.x+g.width-C,g.y+C,{align:"right",baseline:"top"}):g.align==="center"?this.text(g.text,g.x+g.width/2,g.y+C,{align:"center",baseline:"top",maxWidth:g.width-C-C}):this.text(g.text,g.x+C,g.y+C,{align:"left",baseline:"top",maxWidth:g.width-C-C})),this.internal.__cell__.lastCell=g,this};i.table=function(g,_,C,L,M){if(s.call(this),!C)throw new Error("No data for PDF table.");var I,G,j,Y,q=[],ne=[],he=[],Se={},Ne={},Pe=[],Ee=[],fe=(M=M||{}).autoSize||!1,We=M.printHeaders!==!1,Ke=M.css&&M.css["font-size"]!==void 0?16*M.css["font-size"]:M.fontSize||12,ce=M.margins||Object.assign({width:this.getPageWidth()},e),Ae=typeof M.padding=="number"?M.padding:3,xe=M.headerBackgroundColor||"#c8c8c8",_e=M.headerTextColor||"#000";if(l.call(this),this.internal.__cell__.printHeaders=We,this.internal.__cell__.margins=ce,this.internal.__cell__.table_font_size=Ke,this.internal.__cell__.padding=Ae,this.internal.__cell__.headerBackgroundColor=xe,this.internal.__cell__.headerTextColor=_e,this.setFontSize(Ke),L==null)ne=q=Object.keys(C[0]),he=q.map(function(){return"left"});else if(Array.isArray(L)&&fi(L[0])==="object")for(q=L.map(function(nt){return nt.name}),ne=L.map(function(nt){return nt.prompt||nt.name||""}),he=L.map(function(nt){return nt.align||"left"}),I=0;I<L.length;I+=1)Ne[L[I].name]=L[I].width*(19.049976/25.4);else Array.isArray(L)&&typeof L[0]=="string"&&(ne=q=L,he=q.map(function(){return"left"}));if(fe||Array.isArray(L)&&typeof L[0]=="string")for(I=0;I<q.length;I+=1){for(Se[Y=q[I]]=C.map(function(nt){return nt[Y]}),this.setFont(void 0,"bold"),Pe.push(this.getTextDimensions(ne[I],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),G=Se[Y],this.setFont(void 0,"normal"),j=0;j<G.length;j+=1)Pe.push(this.getTextDimensions(G[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Ne[Y]=Math.max.apply(null,Pe)+Ae+Ae,Pe=[]}if(We){var et={};for(I=0;I<q.length;I+=1)et[q[I]]={},et[q[I]].text=ne[I],et[q[I]].align=he[I];var Je=a.call(this,et,Ne);Ee=q.map(function(nt){return new c(g,_,Ne[nt],Je,et[nt].text,void 0,et[nt].align)}),this.setTableHeaderRow(Ee),this.printHeaderRow(1,!1)}var rt=L.reduce(function(nt,Bt){return nt[Bt.name]=Bt.align,nt},{});for(I=0;I<C.length;I+=1){"rowStart"in M&&M.rowStart instanceof Function&&M.rowStart({row:I,data:C[I]},this);var Ye=a.call(this,C[I],Ne);for(j=0;j<q.length;j+=1){var it=C[I][q[j]];"cellStart"in M&&M.cellStart instanceof Function&&M.cellStart({row:I,col:j,data:it},this),p.call(this,new c(g,_,Ne[q[j]],Ye,it,I+2,rt[q[j]]))}}return this.internal.__cell__.table_x=g,this.internal.__cell__.table_y=_,this};var a=function(g,_){var C=this.internal.__cell__.padding,L=this.internal.__cell__.table_font_size,M=this.internal.scaleFactor;return Object.keys(g).map(function(I){var G=g[I];return this.splitTextToSize(G.hasOwnProperty("text")?G.text:G,_[I]-C-C)},this).map(function(I){return this.getLineHeightFactor()*I.length*L/M+C+C},this).reduce(function(I,G){return Math.max(I,G)},0)};i.setTableHeaderRow=function(g){s.call(this),this.internal.__cell__.tableHeaderRow=g},i.printHeaderRow=function(g,_){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var C;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var L=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new c(L[0],L[1],L[2],L[3],void 0,-1)}this.setFont(void 0,"bold");for(var M=[],I=0;I<this.internal.__cell__.tableHeaderRow.length;I+=1){C=this.internal.__cell__.tableHeaderRow[I].clone(),_&&(C.y=this.internal.__cell__.margins.top||0,M.push(C)),C.lineNumber=g;var G=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),p.call(this,C),this.setTextColor(G)}M.length>0&&this.setTableHeaderRow(M),this.setFont(void 0,"normal"),t=!1}}(Mr.API);var Bv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Cv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ng=xv(Cv),Sv=[100,200,300,400,500,600,700,800,900],t3=xv(Sv);function Og(i){var e=i.family.replace(/"|'/g,"").toLowerCase(),t=function(c){return Bv[c=c||"normal"]?c:"normal"}(i.style),s=function(c){if(!c)return 400;if(typeof c=="number")return c>=100&&c<=900&&c%100==0?c:400;if(/^\d00$/.test(c))return parseInt(c);switch(c){case"bold":return 700;case"normal":default:return 400}}(i.weight),l=function(c){return typeof Ng[c=c||"normal"]=="number"?c:"normal"}(i.stretch);return{family:e,style:t,weight:s,stretch:l,src:i.src||[],ref:i.ref||{name:e,style:[l,t,s].join(" ")}}}function Ev(i,e,t,s){var l;for(l=t;l>=0&&l<e.length;l+=s)if(i[e[l]])return i[e[l]];for(l=t;l>=0&&l<e.length;l-=s)if(i[e[l]])return i[e[l]]}var r3={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Fv={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Iv(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function i3(i,e,t){for(var s=(t=t||{}).defaultFontFamily||"times",l=Object.assign({},r3,t.genericFontFamilies||{}),c=null,p=null,a=0;a<e.length;++a)if(l[(c=Og(e[a])).family]&&(c.family=l[c.family]),i.hasOwnProperty(c.family)){p=i[c.family];break}if(!(p=p||i[s]))throw new Error("Could not find a font-family for the rule '"+Iv(c)+"' and default family '"+s+"'.");if(p=function(g,_){if(_[g])return _[g];var C=Ng[g],L=C<=Ng.normal?-1:1,M=Ev(_,Cv,C,L);if(!M)throw new Error("Could not find a matching font-stretch value for "+g);return M}(c.stretch,p),p=function(g,_){if(_[g])return _[g];for(var C=Bv[g],L=0;L<C.length;++L)if(_[C[L]])return _[C[L]];throw new Error("Could not find a matching font-style for "+g)}(c.style,p),!(p=function(g,_){if(_[g])return _[g];if(g===400&&_[500])return _[500];if(g===500&&_[400])return _[400];var C=t3[g],L=Ev(_,Sv,C,g<400?-1:1);if(!L)throw new Error("Could not find a matching font-weight for value "+g);return L}(c.weight,p)))throw new Error("Failed to resolve a font for the rule '"+Iv(c)+"'.");return p}function Lv(i){return i.trimLeft()}function n3(i,e){for(var t=0;t<i.length;){if(i.charAt(t)===e)return[i.substring(0,t),i.substring(t+1)];t+=1}return null}function s3(i){var e=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],i.substring(e[0].length)]}var Wp,Tv,Uv,Pv=["times"];(function(i){var e,t,s,l,c,p,a,g,_,C=function(ee){return ee=ee||{},this.isStrokeTransparent=ee.isStrokeTransparent||!1,this.strokeOpacity=ee.strokeOpacity||1,this.strokeStyle=ee.strokeStyle||"#000000",this.fillStyle=ee.fillStyle||"#000000",this.isFillTransparent=ee.isFillTransparent||!1,this.fillOpacity=ee.fillOpacity||1,this.font=ee.font||"10px sans-serif",this.textBaseline=ee.textBaseline||"alphabetic",this.textAlign=ee.textAlign||"left",this.lineWidth=ee.lineWidth||1,this.lineJoin=ee.lineJoin||"miter",this.lineCap=ee.lineCap||"butt",this.path=ee.path||[],this.transform=ee.transform!==void 0?ee.transform.clone():new g,this.globalCompositeOperation=ee.globalCompositeOperation||"normal",this.globalAlpha=ee.globalAlpha||1,this.clip_path=ee.clip_path||[],this.currentPoint=ee.currentPoint||new p,this.miterLimit=ee.miterLimit||10,this.lastPoint=ee.lastPoint||new p,this.lineDashOffset=ee.lineDashOffset||0,this.lineDash=ee.lineDash||[],this.margin=ee.margin||[0,0,0,0],this.prevPageLastElemOffset=ee.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ee.ignoreClearRect!="boolean"||ee.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new L(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getHorizontalCoordinate,c=this.internal.getVerticalCoordinate,p=this.internal.Point,a=this.internal.Rectangle,g=this.internal.Matrix,_=new C}]);var L=function(ee){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var pe=ee;Object.defineProperty(this,"pdf",{get:function(){return pe}});var ye=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ye},set:function(ft){ye=!!ft}});var Re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Re},set:function(ft){Re=!!ft}});var Ge=0;Object.defineProperty(this,"posX",{get:function(){return Ge},set:function(ft){isNaN(ft)||(Ge=ft)}});var tt=0;Object.defineProperty(this,"posY",{get:function(){return tt},set:function(ft){isNaN(ft)||(tt=ft)}}),Object.defineProperty(this,"margin",{get:function(){return _.margin},set:function(ft){var Me;typeof ft=="number"?Me=[ft,ft,ft,ft]:((Me=new Array(4))[0]=ft[0],Me[1]=ft.length>=2?ft[1]:Me[0],Me[2]=ft.length>=3?ft[2]:Me[0],Me[3]=ft.length>=4?ft[3]:Me[1]),_.margin=Me}});var st=!1;Object.defineProperty(this,"autoPaging",{get:function(){return st},set:function(ft){st=ft}});var ot=0;Object.defineProperty(this,"lastBreak",{get:function(){return ot},set:function(ft){ot=ft}});var Ct=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ct},set:function(ft){Ct=ft}}),Object.defineProperty(this,"ctx",{get:function(){return _},set:function(ft){ft instanceof C&&(_=ft)}}),Object.defineProperty(this,"path",{get:function(){return _.path},set:function(ft){_.path=ft}});var Et=[];Object.defineProperty(this,"ctxStack",{get:function(){return Et},set:function(ft){Et=ft}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ft){var Me;Me=M(ft),this.ctx.fillStyle=Me.style,this.ctx.isFillTransparent=Me.a===0,this.ctx.fillOpacity=Me.a,this.pdf.setFillColor(Me.r,Me.g,Me.b,{a:Me.a}),this.pdf.setTextColor(Me.r,Me.g,Me.b,{a:Me.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ft){var Me=M(ft);this.ctx.strokeStyle=Me.style,this.ctx.isStrokeTransparent=Me.a===0,this.ctx.strokeOpacity=Me.a,Me.a===0?this.pdf.setDrawColor(255,255,255):(Me.a,this.pdf.setDrawColor(Me.r,Me.g,Me.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ft){["butt","round","square"].indexOf(ft)!==-1&&(this.ctx.lineCap=ft,this.pdf.setLineCap(ft))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ft){isNaN(ft)||(this.ctx.lineWidth=ft,this.pdf.setLineWidth(ft))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ft){["bevel","round","miter"].indexOf(ft)!==-1&&(this.ctx.lineJoin=ft,this.pdf.setLineJoin(ft))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ft){isNaN(ft)||(this.ctx.miterLimit=ft,this.pdf.setMiterLimit(ft))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ft){this.ctx.textBaseline=ft}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ft){["right","end","center","left","start"].indexOf(ft)!==-1&&(this.ctx.textAlign=ft)}});var zt=null;function Vt(ft,Me){if(zt===null){var fr=function(Xt){var bt=[];return Object.keys(Xt).forEach(function(ze){Xt[ze].forEach(function(Ut){var Pt=null;switch(Ut){case"bold":Pt={family:ze,weight:"bold"};break;case"italic":Pt={family:ze,style:"italic"};break;case"bolditalic":Pt={family:ze,weight:"bold",style:"italic"};break;case"":case"normal":Pt={family:ze}}Pt!==null&&(Pt.ref={name:ze,style:Ut},bt.push(Pt))})}),bt}(ft.getFontList());zt=function(Xt){for(var bt={},ze=0;ze<Xt.length;++ze){var Ut=Og(Xt[ze]),Pt=Ut.family,Mt=Ut.stretch,Lt=Ut.style,hr=Ut.weight;bt[Pt]=bt[Pt]||{},bt[Pt][Mt]=bt[Pt][Mt]||{},bt[Pt][Mt][Lt]=bt[Pt][Mt][Lt]||{},bt[Pt][Mt][Lt][hr]=Ut}return bt}(fr.concat(Me))}return zt}var Jt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Jt},set:function(ft){zt=null,Jt=ft}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ft){var Me;if(this.ctx.font=ft,(Me=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ft))!==null){var fr=Me[1],Xt=(Me[2],Me[3]),bt=Me[4],ze=(Me[5],Me[6]),Ut=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(bt)[2];bt=Math.floor(Ut==="px"?parseFloat(bt)*this.pdf.internal.scaleFactor:Ut==="em"?parseFloat(bt)*this.pdf.getFontSize():parseFloat(bt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(bt);var Pt=function(gr){var br,Rt,vt=[],Cr=gr.trim();if(Cr==="")return Pv;if(Cr in Fv)return[Fv[Cr]];for(;Cr!=="";){switch(Rt=null,br=(Cr=Lv(Cr)).charAt(0)){case'"':case"'":Rt=n3(Cr.substring(1),br);break;default:Rt=s3(Cr)}if(Rt===null||(vt.push(Rt[0]),(Cr=Lv(Rt[1]))!==""&&Cr.charAt(0)!==","))return Pv;Cr=Cr.replace(/^,/,"")}return vt}(ze);if(this.fontFaces){var Mt=i3(Vt(this.pdf,this.fontFaces),Pt.map(function(gr){return{family:gr,stretch:"normal",weight:Xt,style:fr}}));this.pdf.setFont(Mt.ref.name,Mt.ref.style)}else{var Lt="";(Xt==="bold"||parseInt(Xt,10)>=700||fr==="bold")&&(Lt="bold"),fr==="italic"&&(Lt+="italic"),Lt.length===0&&(Lt="normal");for(var hr="",wr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Lr=0;Lr<Pt.length;Lr++){if(this.pdf.internal.getFont(Pt[Lr],Lt,{noFallback:!0,disableWarning:!0})!==void 0){hr=Pt[Lr];break}if(Lt==="bolditalic"&&this.pdf.internal.getFont(Pt[Lr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)hr=Pt[Lr],Lt="bold";else if(this.pdf.internal.getFont(Pt[Lr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){hr=Pt[Lr],Lt="normal";break}}if(hr===""){for(var qr=0;qr<Pt.length;qr++)if(wr[Pt[qr]]){hr=wr[Pt[qr]];break}}hr=hr===""?"Times":hr,this.pdf.setFont(hr,Lt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ft){this.ctx.globalCompositeOperation=ft}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ft){this.ctx.globalAlpha=ft}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ft){this.ctx.lineDashOffset=ft,Bt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ft){this.ctx.lineDash=ft,Bt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ft){this.ctx.ignoreClearRect=!!ft}})};L.prototype.setLineDash=function(ee){this.lineDash=ee},L.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},L.prototype.fill=function(){Se.call(this,"fill",!1)},L.prototype.stroke=function(){Se.call(this,"stroke",!1)},L.prototype.beginPath=function(){this.path=[{type:"begin"}]},L.prototype.moveTo=function(ee,pe){if(isNaN(ee)||isNaN(pe))throw Qi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ye=this.ctx.transform.applyToPoint(new p(ee,pe));this.path.push({type:"mt",x:ye.x,y:ye.y}),this.ctx.lastPoint=new p(ee,pe)},L.prototype.closePath=function(){var ee=new p(0,0),pe=0;for(pe=this.path.length-1;pe!==-1;pe--)if(this.path[pe].type==="begin"&&fi(this.path[pe+1])==="object"&&typeof this.path[pe+1].x=="number"){ee=new p(this.path[pe+1].x,this.path[pe+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new p(ee.x,ee.y)},L.prototype.lineTo=function(ee,pe){if(isNaN(ee)||isNaN(pe))throw Qi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ye=this.ctx.transform.applyToPoint(new p(ee,pe));this.path.push({type:"lt",x:ye.x,y:ye.y}),this.ctx.lastPoint=new p(ye.x,ye.y)},L.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Se.call(this,null,!0)},L.prototype.quadraticCurveTo=function(ee,pe,ye,Re){if(isNaN(ye)||isNaN(Re)||isNaN(ee)||isNaN(pe))throw Qi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ge=this.ctx.transform.applyToPoint(new p(ye,Re)),tt=this.ctx.transform.applyToPoint(new p(ee,pe));this.path.push({type:"qct",x1:tt.x,y1:tt.y,x:Ge.x,y:Ge.y}),this.ctx.lastPoint=new p(Ge.x,Ge.y)},L.prototype.bezierCurveTo=function(ee,pe,ye,Re,Ge,tt){if(isNaN(Ge)||isNaN(tt)||isNaN(ee)||isNaN(pe)||isNaN(ye)||isNaN(Re))throw Qi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var st=this.ctx.transform.applyToPoint(new p(Ge,tt)),ot=this.ctx.transform.applyToPoint(new p(ee,pe)),Ct=this.ctx.transform.applyToPoint(new p(ye,Re));this.path.push({type:"bct",x1:ot.x,y1:ot.y,x2:Ct.x,y2:Ct.y,x:st.x,y:st.y}),this.ctx.lastPoint=new p(st.x,st.y)},L.prototype.arc=function(ee,pe,ye,Re,Ge,tt){if(isNaN(ee)||isNaN(pe)||isNaN(ye)||isNaN(Re)||isNaN(Ge))throw Qi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(tt=!!tt,!this.ctx.transform.isIdentity){var st=this.ctx.transform.applyToPoint(new p(ee,pe));ee=st.x,pe=st.y;var ot=this.ctx.transform.applyToPoint(new p(0,ye)),Ct=this.ctx.transform.applyToPoint(new p(0,0));ye=Math.sqrt(Math.pow(ot.x-Ct.x,2)+Math.pow(ot.y-Ct.y,2))}Math.abs(Ge-Re)>=2*Math.PI&&(Re=0,Ge=2*Math.PI),this.path.push({type:"arc",x:ee,y:pe,radius:ye,startAngle:Re,endAngle:Ge,counterclockwise:tt})},L.prototype.arcTo=function(ee,pe,ye,Re,Ge){throw new Error("arcTo not implemented.")},L.prototype.rect=function(ee,pe,ye,Re){if(isNaN(ee)||isNaN(pe)||isNaN(ye)||isNaN(Re))throw Qi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ee,pe),this.lineTo(ee+ye,pe),this.lineTo(ee+ye,pe+Re),this.lineTo(ee,pe+Re),this.lineTo(ee,pe),this.lineTo(ee+ye,pe),this.lineTo(ee,pe)},L.prototype.fillRect=function(ee,pe,ye,Re){if(isNaN(ee)||isNaN(pe)||isNaN(ye)||isNaN(Re))throw Qi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!I.call(this)){var Ge={};this.lineCap!=="butt"&&(Ge.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ge.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ee,pe,ye,Re),this.fill(),Ge.hasOwnProperty("lineCap")&&(this.lineCap=Ge.lineCap),Ge.hasOwnProperty("lineJoin")&&(this.lineJoin=Ge.lineJoin)}},L.prototype.strokeRect=function(ee,pe,ye,Re){if(isNaN(ee)||isNaN(pe)||isNaN(ye)||isNaN(Re))throw Qi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");G.call(this)||(this.beginPath(),this.rect(ee,pe,ye,Re),this.stroke())},L.prototype.clearRect=function(ee,pe,ye,Re){if(isNaN(ee)||isNaN(pe)||isNaN(ye)||isNaN(Re))throw Qi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ee,pe,ye,Re))},L.prototype.save=function(ee){ee=typeof ee!="boolean"||ee;for(var pe=this.pdf.internal.getCurrentPageInfo().pageNumber,ye=0;ye<this.pdf.internal.getNumberOfPages();ye++)this.pdf.setPage(ye+1),this.pdf.internal.out("q");if(this.pdf.setPage(pe),ee){this.ctx.fontSize=this.pdf.internal.getFontSize();var Re=new C(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Re}},L.prototype.restore=function(ee){ee=typeof ee!="boolean"||ee;for(var pe=this.pdf.internal.getCurrentPageInfo().pageNumber,ye=0;ye<this.pdf.internal.getNumberOfPages();ye++)this.pdf.setPage(ye+1),this.pdf.internal.out("Q");this.pdf.setPage(pe),ee&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},L.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var M=function(ee){var pe,ye,Re,Ge;if(ee.isCanvasGradient===!0&&(ee=ee.getColor()),!ee)return{r:0,g:0,b:0,a:0,style:ee};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ee))pe=0,ye=0,Re=0,Ge=0;else{var tt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ee);if(tt!==null)pe=parseInt(tt[1]),ye=parseInt(tt[2]),Re=parseInt(tt[3]),Ge=1;else if((tt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ee))!==null)pe=parseInt(tt[1]),ye=parseInt(tt[2]),Re=parseInt(tt[3]),Ge=parseFloat(tt[4]);else{if(Ge=1,typeof ee=="string"&&ee.charAt(0)!=="#"){var st=new pv(ee);ee=st.ok?st.toHex():"#000000"}ee.length===4?(pe=ee.substring(1,2),pe+=pe,ye=ee.substring(2,3),ye+=ye,Re=ee.substring(3,4),Re+=Re):(pe=ee.substring(1,3),ye=ee.substring(3,5),Re=ee.substring(5,7)),pe=parseInt(pe,16),ye=parseInt(ye,16),Re=parseInt(Re,16)}}return{r:pe,g:ye,b:Re,a:Ge,style:ee}},I=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},G=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};L.prototype.fillText=function(ee,pe,ye,Re){if(isNaN(pe)||isNaN(ye)||typeof ee!="string")throw Qi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Re=isNaN(Re)?void 0:Re,!I.call(this)){var Ge=Ye(this.ctx.transform.rotation),tt=this.ctx.transform.scaleX;Ae.call(this,{text:ee,x:pe,y:ye,scale:tt,angle:Ge,align:this.textAlign,maxWidth:Re})}},L.prototype.strokeText=function(ee,pe,ye,Re){if(isNaN(pe)||isNaN(ye)||typeof ee!="string")throw Qi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!G.call(this)){Re=isNaN(Re)?void 0:Re;var Ge=Ye(this.ctx.transform.rotation),tt=this.ctx.transform.scaleX;Ae.call(this,{text:ee,x:pe,y:ye,scale:tt,renderingMode:"stroke",angle:Ge,align:this.textAlign,maxWidth:Re})}},L.prototype.measureText=function(ee){if(typeof ee!="string")throw Qi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var pe=this.pdf,ye=this.pdf.internal.scaleFactor,Re=pe.internal.getFontSize(),Ge=pe.getStringUnitWidth(ee)*Re/pe.internal.scaleFactor,tt=function(st){var ot=(st=st||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ot}}),this};return new tt({width:Ge*=Math.round(96*ye/72*1e4)/1e4})},L.prototype.scale=function(ee,pe){if(isNaN(ee)||isNaN(pe))throw Qi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ye=new g(ee,0,0,pe,0,0);this.ctx.transform=this.ctx.transform.multiply(ye)},L.prototype.rotate=function(ee){if(isNaN(ee))throw Qi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var pe=new g(Math.cos(ee),Math.sin(ee),-Math.sin(ee),Math.cos(ee),0,0);this.ctx.transform=this.ctx.transform.multiply(pe)},L.prototype.translate=function(ee,pe){if(isNaN(ee)||isNaN(pe))throw Qi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ye=new g(1,0,0,1,ee,pe);this.ctx.transform=this.ctx.transform.multiply(ye)},L.prototype.transform=function(ee,pe,ye,Re,Ge,tt){if(isNaN(ee)||isNaN(pe)||isNaN(ye)||isNaN(Re)||isNaN(Ge)||isNaN(tt))throw Qi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var st=new g(ee,pe,ye,Re,Ge,tt);this.ctx.transform=this.ctx.transform.multiply(st)},L.prototype.setTransform=function(ee,pe,ye,Re,Ge,tt){ee=isNaN(ee)?1:ee,pe=isNaN(pe)?0:pe,ye=isNaN(ye)?0:ye,Re=isNaN(Re)?1:Re,Ge=isNaN(Ge)?0:Ge,tt=isNaN(tt)?0:tt,this.ctx.transform=new g(ee,pe,ye,Re,Ge,tt)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};L.prototype.drawImage=function(ee,pe,ye,Re,Ge,tt,st,ot,Ct){var Et=this.pdf.getImageProperties(ee),zt=1,Vt=1,Jt=1,ft=1;Re!==void 0&&ot!==void 0&&(Jt=ot/Re,ft=Ct/Ge,zt=Et.width/Re*ot/Re,Vt=Et.height/Ge*Ct/Ge),tt===void 0&&(tt=pe,st=ye,pe=0,ye=0),Re!==void 0&&ot===void 0&&(ot=Re,Ct=Ge),Re===void 0&&ot===void 0&&(ot=Et.width,Ct=Et.height);for(var Me,fr=this.ctx.transform.decompose(),Xt=Ye(fr.rotate.shx),bt=new g,ze=(bt=(bt=(bt=bt.multiply(fr.translate)).multiply(fr.skew)).multiply(fr.scale)).applyToRectangle(new a(tt-pe*Jt,st-ye*ft,Re*zt,Ge*Vt)),Ut=Y.call(this,ze),Pt=[],Mt=0;Mt<Ut.length;Mt+=1)Pt.indexOf(Ut[Mt])===-1&&Pt.push(Ut[Mt]);if(he(Pt),this.autoPaging)for(var Lt=Pt[0],hr=Pt[Pt.length-1],wr=Lt;wr<hr+1;wr++){this.pdf.setPage(wr);var Lr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qr=wr===1?this.posY+this.margin[0]:this.margin[0],gr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],br=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Rt=wr===1?0:gr+(wr-2)*br;if(this.ctx.clip_path.length!==0){var vt=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(Me,this.posX+this.margin[3],-Rt+qr+this.ctx.prevPageLastElemOffset),Ne.call(this,"fill",!0),this.path=vt}var Cr=JSON.parse(JSON.stringify(ze));Cr=ne([Cr],this.posX+this.margin[3],-Rt+qr+this.ctx.prevPageLastElemOffset)[0];var Tr=(wr>Lt||wr<hr)&&j.call(this);Tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lr,br,null).clip().discardPath()),this.pdf.addImage(ee,"JPEG",Cr.x,Cr.y,Cr.w,Cr.h,null,null,Xt),Tr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ee,"JPEG",ze.x,ze.y,ze.w,ze.h,null,null,Xt)};var Y=function(ee,pe,ye){var Re=[];pe=pe||this.pdf.internal.pageSize.width,ye=ye||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ge=this.posY+this.ctx.prevPageLastElemOffset;switch(ee.type){default:case"mt":case"lt":Re.push(Math.floor((ee.y+Ge)/ye)+1);break;case"arc":Re.push(Math.floor((ee.y+Ge-ee.radius)/ye)+1),Re.push(Math.floor((ee.y+Ge+ee.radius)/ye)+1);break;case"qct":var tt=it(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ee.x1,ee.y1,ee.x,ee.y);Re.push(Math.floor((tt.y+Ge)/ye)+1),Re.push(Math.floor((tt.y+tt.h+Ge)/ye)+1);break;case"bct":var st=nt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ee.x1,ee.y1,ee.x2,ee.y2,ee.x,ee.y);Re.push(Math.floor((st.y+Ge)/ye)+1),Re.push(Math.floor((st.y+st.h+Ge)/ye)+1);break;case"rect":Re.push(Math.floor((ee.y+Ge)/ye)+1),Re.push(Math.floor((ee.y+ee.h+Ge)/ye)+1)}for(var ot=0;ot<Re.length;ot+=1)for(;this.pdf.internal.getNumberOfPages()<Re[ot];)q.call(this);return Re},q=function(){var ee=this.fillStyle,pe=this.strokeStyle,ye=this.font,Re=this.lineCap,Ge=this.lineWidth,tt=this.lineJoin;this.pdf.addPage(),this.fillStyle=ee,this.strokeStyle=pe,this.font=ye,this.lineCap=Re,this.lineWidth=Ge,this.lineJoin=tt},ne=function(ee,pe,ye){for(var Re=0;Re<ee.length;Re++)switch(ee[Re].type){case"bct":ee[Re].x2+=pe,ee[Re].y2+=ye;case"qct":ee[Re].x1+=pe,ee[Re].y1+=ye;case"mt":case"lt":case"arc":default:ee[Re].x+=pe,ee[Re].y+=ye}return ee},he=function(ee){return ee.sort(function(pe,ye){return pe-ye})},Se=function(ee,pe){for(var ye,Re,Ge=this.fillStyle,tt=this.strokeStyle,st=this.lineCap,ot=this.lineWidth,Ct=Math.abs(ot*this.ctx.transform.scaleX),Et=this.lineJoin,zt=JSON.parse(JSON.stringify(this.path)),Vt=JSON.parse(JSON.stringify(this.path)),Jt=[],ft=0;ft<Vt.length;ft++)if(Vt[ft].x!==void 0)for(var Me=Y.call(this,Vt[ft]),fr=0;fr<Me.length;fr+=1)Jt.indexOf(Me[fr])===-1&&Jt.push(Me[fr]);for(var Xt=0;Xt<Jt.length;Xt++)for(;this.pdf.internal.getNumberOfPages()<Jt[Xt];)q.call(this);if(he(Jt),this.autoPaging)for(var bt=Jt[0],ze=Jt[Jt.length-1],Ut=bt;Ut<ze+1;Ut++){this.pdf.setPage(Ut),this.fillStyle=Ge,this.strokeStyle=tt,this.lineCap=st,this.lineWidth=Ct,this.lineJoin=Et;var Pt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=Ut===1?this.posY+this.margin[0]:this.margin[0],Lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],hr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wr=Ut===1?0:Lt+(Ut-2)*hr;if(this.ctx.clip_path.length!==0){var Lr=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(ye,this.posX+this.margin[3],-wr+Mt+this.ctx.prevPageLastElemOffset),Ne.call(this,ee,!0),this.path=Lr}if(Re=JSON.parse(JSON.stringify(zt)),this.path=ne(Re,this.posX+this.margin[3],-wr+Mt+this.ctx.prevPageLastElemOffset),pe===!1||Ut===0){var qr=(Ut>bt||Ut<ze)&&j.call(this);qr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pt,hr,null).clip().discardPath()),Ne.call(this,ee,pe),qr&&this.pdf.restoreGraphicsState()}this.lineWidth=ot}else this.lineWidth=Ct,Ne.call(this,ee,pe),this.lineWidth=ot;this.path=zt},Ne=function(ee,pe){if((ee!=="stroke"||pe||!G.call(this))&&(ee==="stroke"||pe||!I.call(this))){for(var ye,Re,Ge=[],tt=this.path,st=0;st<tt.length;st++){var ot=tt[st];switch(ot.type){case"begin":Ge.push({begin:!0});break;case"close":Ge.push({close:!0});break;case"mt":Ge.push({start:ot,deltas:[],abs:[]});break;case"lt":var Ct=Ge.length;if(tt[st-1]&&!isNaN(tt[st-1].x)&&(ye=[ot.x-tt[st-1].x,ot.y-tt[st-1].y],Ct>0)){for(;Ct>=0;Ct--)if(Ge[Ct-1].close!==!0&&Ge[Ct-1].begin!==!0){Ge[Ct-1].deltas.push(ye),Ge[Ct-1].abs.push(ot);break}}break;case"bct":ye=[ot.x1-tt[st-1].x,ot.y1-tt[st-1].y,ot.x2-tt[st-1].x,ot.y2-tt[st-1].y,ot.x-tt[st-1].x,ot.y-tt[st-1].y],Ge[Ge.length-1].deltas.push(ye);break;case"qct":var Et=tt[st-1].x+2/3*(ot.x1-tt[st-1].x),zt=tt[st-1].y+2/3*(ot.y1-tt[st-1].y),Vt=ot.x+2/3*(ot.x1-ot.x),Jt=ot.y+2/3*(ot.y1-ot.y),ft=ot.x,Me=ot.y;ye=[Et-tt[st-1].x,zt-tt[st-1].y,Vt-tt[st-1].x,Jt-tt[st-1].y,ft-tt[st-1].x,Me-tt[st-1].y],Ge[Ge.length-1].deltas.push(ye);break;case"arc":Ge.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ge[Ge.length-1].abs)&&Ge[Ge.length-1].abs.push(ot)}}Re=pe?null:ee==="stroke"?"stroke":"fill";for(var fr=!1,Xt=0;Xt<Ge.length;Xt++)if(Ge[Xt].arc)for(var bt=Ge[Xt].abs,ze=0;ze<bt.length;ze++){var Ut=bt[ze];Ut.type==="arc"?fe.call(this,Ut.x,Ut.y,Ut.radius,Ut.startAngle,Ut.endAngle,Ut.counterclockwise,void 0,pe,!fr):xe.call(this,Ut.x,Ut.y),fr=!0}else if(Ge[Xt].close===!0)this.pdf.internal.out("h"),fr=!1;else if(Ge[Xt].begin!==!0){var Pt=Ge[Xt].start.x,Mt=Ge[Xt].start.y;_e.call(this,Ge[Xt].deltas,Pt,Mt),fr=!0}Re&&We.call(this,Re),pe&&Ke.call(this)}},Pe=function(ee){var pe=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ye=pe*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ee-ye;case"top":return ee+pe-ye;case"hanging":return ee+pe-2*ye;case"middle":return ee+pe/2-ye;case"ideographic":return ee;case"alphabetic":default:return ee}},Ee=function(ee){return ee+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};L.prototype.createLinearGradient=function(){var ee=function(){};return ee.colorStops=[],ee.addColorStop=function(pe,ye){this.colorStops.push([pe,ye])},ee.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ee.isCanvasGradient=!0,ee},L.prototype.createPattern=function(){return this.createLinearGradient()},L.prototype.createRadialGradient=function(){return this.createLinearGradient()};var fe=function(ee,pe,ye,Re,Ge,tt,st,ot,Ct){for(var Et=Je.call(this,ye,Re,Ge,tt),zt=0;zt<Et.length;zt++){var Vt=Et[zt];zt===0&&(Ct?ce.call(this,Vt.x1+ee,Vt.y1+pe):xe.call(this,Vt.x1+ee,Vt.y1+pe)),et.call(this,ee,pe,Vt.x2,Vt.y2,Vt.x3,Vt.y3,Vt.x4,Vt.y4)}ot?Ke.call(this):We.call(this,st)},We=function(ee){switch(ee){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Ke=function(){this.pdf.clip(),this.pdf.discardPath()},ce=function(ee,pe){this.pdf.internal.out(t(ee)+" "+s(pe)+" m")},Ae=function(ee){var pe;switch(ee.align){case"right":case"end":pe="right";break;case"center":pe="center";break;case"left":case"start":default:pe="left"}var ye=this.pdf.getTextDimensions(ee.text),Re=Pe.call(this,ee.y),Ge=Ee.call(this,Re)-ye.h,tt=this.ctx.transform.applyToPoint(new p(ee.x,Re)),st=this.ctx.transform.decompose(),ot=new g;ot=(ot=(ot=ot.multiply(st.translate)).multiply(st.skew)).multiply(st.scale);for(var Ct,Et,zt,Vt=this.ctx.transform.applyToRectangle(new a(ee.x,Re,ye.w,ye.h)),Jt=ot.applyToRectangle(new a(ee.x,Ge,ye.w,ye.h)),ft=Y.call(this,Jt),Me=[],fr=0;fr<ft.length;fr+=1)Me.indexOf(ft[fr])===-1&&Me.push(ft[fr]);if(he(Me),this.autoPaging)for(var Xt=Me[0],bt=Me[Me.length-1],ze=Xt;ze<bt+1;ze++){this.pdf.setPage(ze);var Ut=ze===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Mt=this.pdf.internal.pageSize.height-this.margin[2],Lt=Mt-this.margin[0],hr=this.pdf.internal.pageSize.width-this.margin[1],wr=hr-this.margin[3],Lr=ze===1?0:Pt+(ze-2)*Lt;if(this.ctx.clip_path.length!==0){var qr=this.path;Ct=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(Ct,this.posX+this.margin[3],-1*Lr+Ut),Ne.call(this,"fill",!0),this.path=qr}var gr=ne([JSON.parse(JSON.stringify(Jt))],this.posX+this.margin[3],-Lr+Ut+this.ctx.prevPageLastElemOffset)[0];ee.scale>=.01&&(Et=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Et*ee.scale),zt=this.lineWidth,this.lineWidth=zt*ee.scale);var br=this.autoPaging!=="text";if(br||gr.y+gr.h<=Mt){if(br||gr.y>=Ut&&gr.x<=hr){var Rt=br?ee.text:this.pdf.splitTextToSize(ee.text,ee.maxWidth||hr-gr.x)[0],vt=ne([JSON.parse(JSON.stringify(Vt))],this.posX+this.margin[3],-Lr+Ut+this.ctx.prevPageLastElemOffset)[0],Cr=br&&(ze>Xt||ze<bt)&&j.call(this);Cr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wr,Lt,null).clip().discardPath()),this.pdf.text(Rt,vt.x,vt.y,{angle:ee.angle,align:pe,renderingMode:ee.renderingMode}),Cr&&this.pdf.restoreGraphicsState()}}else gr.y<Mt&&(this.ctx.prevPageLastElemOffset+=Mt-gr.y);ee.scale>=.01&&(this.pdf.setFontSize(Et),this.lineWidth=zt)}else ee.scale>=.01&&(Et=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Et*ee.scale),zt=this.lineWidth,this.lineWidth=zt*ee.scale),this.pdf.text(ee.text,tt.x+this.posX,tt.y+this.posY,{angle:ee.angle,align:pe,renderingMode:ee.renderingMode,maxWidth:ee.maxWidth}),ee.scale>=.01&&(this.pdf.setFontSize(Et),this.lineWidth=zt)},xe=function(ee,pe,ye,Re){ye=ye||0,Re=Re||0,this.pdf.internal.out(t(ee+ye)+" "+s(pe+Re)+" l")},_e=function(ee,pe,ye){return this.pdf.lines(ee,pe,ye,null,null)},et=function(ee,pe,ye,Re,Ge,tt,st,ot){this.pdf.internal.out([e(l(ye+ee)),e(c(Re+pe)),e(l(Ge+ee)),e(c(tt+pe)),e(l(st+ee)),e(c(ot+pe)),"c"].join(" "))},Je=function(ee,pe,ye,Re){for(var Ge=2*Math.PI,tt=Math.PI/2;pe>ye;)pe-=Ge;var st=Math.abs(ye-pe);st<Ge&&Re&&(st=Ge-st);for(var ot=[],Ct=Re?-1:1,Et=pe;st>1e-5;){var zt=Et+Ct*Math.min(st,tt);ot.push(rt.call(this,ee,Et,zt)),st-=Math.abs(zt-Et),Et=zt}return ot},rt=function(ee,pe,ye){var Re=(ye-pe)/2,Ge=ee*Math.cos(Re),tt=ee*Math.sin(Re),st=Ge,ot=-tt,Ct=st*st+ot*ot,Et=Ct+st*Ge+ot*tt,zt=4/3*(Math.sqrt(2*Ct*Et)-Et)/(st*tt-ot*Ge),Vt=st-zt*ot,Jt=ot+zt*st,ft=Vt,Me=-Jt,fr=Re+pe,Xt=Math.cos(fr),bt=Math.sin(fr);return{x1:ee*Math.cos(pe),y1:ee*Math.sin(pe),x2:Vt*Xt-Jt*bt,y2:Vt*bt+Jt*Xt,x3:ft*Xt-Me*bt,y3:ft*bt+Me*Xt,x4:ee*Math.cos(ye),y4:ee*Math.sin(ye)}},Ye=function(ee){return 180*ee/Math.PI},it=function(ee,pe,ye,Re,Ge,tt){var st=ee+.5*(ye-ee),ot=pe+.5*(Re-pe),Ct=Ge+.5*(ye-Ge),Et=tt+.5*(Re-tt),zt=Math.min(ee,Ge,st,Ct),Vt=Math.max(ee,Ge,st,Ct),Jt=Math.min(pe,tt,ot,Et),ft=Math.max(pe,tt,ot,Et);return new a(zt,Jt,Vt-zt,ft-Jt)},nt=function(ee,pe,ye,Re,Ge,tt,st,ot){var Ct,Et,zt,Vt,Jt,ft,Me,fr,Xt,bt,ze,Ut,Pt,Mt,Lt=ye-ee,hr=Re-pe,wr=Ge-ye,Lr=tt-Re,qr=st-Ge,gr=ot-tt;for(Et=0;Et<41;Et++)Xt=(Me=(zt=ee+(Ct=Et/40)*Lt)+Ct*((Jt=ye+Ct*wr)-zt))+Ct*(Jt+Ct*(Ge+Ct*qr-Jt)-Me),bt=(fr=(Vt=pe+Ct*hr)+Ct*((ft=Re+Ct*Lr)-Vt))+Ct*(ft+Ct*(tt+Ct*gr-ft)-fr),Et==0?(ze=Xt,Ut=bt,Pt=Xt,Mt=bt):(ze=Math.min(ze,Xt),Ut=Math.min(Ut,bt),Pt=Math.max(Pt,Xt),Mt=Math.max(Mt,bt));return new a(Math.round(ze),Math.round(Ut),Math.round(Pt-ze),Math.round(Mt-Ut))},Bt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ee,pe,ye=(ee=this.ctx.lineDash,pe=this.ctx.lineDashOffset,JSON.stringify({lineDash:ee,lineDashOffset:pe}));this.prevLineDash!==ye&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ye)}}})(Mr.API),function(i){var e=function(c){var p,a,g,_,C,L,M,I,G,j;for(a=[],g=0,_=(c+=p="\0\0\0\0".slice(c.length%4||4)).length;_>g;g+=4)(C=(c.charCodeAt(g)<<24)+(c.charCodeAt(g+1)<<16)+(c.charCodeAt(g+2)<<8)+c.charCodeAt(g+3))!==0?(L=(C=((C=((C=((C=(C-(j=C%85))/85)-(G=C%85))/85)-(I=C%85))/85)-(M=C%85))/85)%85,a.push(L+33,M+33,I+33,G+33,j+33)):a.push(122);return function(Y,q){for(var ne=q;ne>0;ne--)Y.pop()}(a,p.length),String.fromCharCode.apply(String,a)+"~>"},t=function(c){var p,a,g,_,C,L=String,M="length",I=255,G="charCodeAt",j="slice",Y="replace";for(c[j](-2),c=c[j](0,-2)[Y](/\s/g,"")[Y]("z","!!!!!"),g=[],_=0,C=(c+=p="uuuuu"[j](c[M]%5||5))[M];C>_;_+=5)a=52200625*(c[G](_)-33)+614125*(c[G](_+1)-33)+7225*(c[G](_+2)-33)+85*(c[G](_+3)-33)+(c[G](_+4)-33),g.push(I&a>>24,I&a>>16,I&a>>8,I&a);return function(q,ne){for(var he=ne;he>0;he--)q.pop()}(g,p[M]),L.fromCharCode.apply(L,g)},s=function(c){var p=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),p.test(c)===!1)return"";for(var a="",g=0;g<c.length;g+=2)a+=String.fromCharCode("0x"+(c[g]+c[g+1]));return a},l=function(c){for(var p=new Uint8Array(c.length),a=c.length;a--;)p[a]=c.charCodeAt(a);return c=(p=Fg(p)).reduce(function(g,_){return g+String.fromCharCode(_)},"")};i.processDataByFilters=function(c,p){var a=0,g=c||"",_=[];for(typeof(p=p||[])=="string"&&(p=[p]),a=0;a<p.length;a+=1)switch(p[a]){case"ASCII85Decode":case"/ASCII85Decode":g=t(g),_.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":g=e(g),_.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":g=s(g),_.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":g=g.split("").map(function(C){return("0"+C.charCodeAt().toString(16)).slice(-2)}).join("")+">",_.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":g=l(g),_.push("/FlateDecode");break;default:throw new Error('The filter: "'+p[a]+'" is not implemented')}return{data:g,reverseChain:_.reverse().join(" ")}}}(Mr.API),function(i){i.loadFile=function(e,t,s){return function(l,c,p){c=c!==!1,p=typeof p=="function"?p:function(){};var a=void 0;try{a=function(g,_,C){var L=new XMLHttpRequest,M=0,I=function(G){var j=G.length,Y=[],q=String.fromCharCode;for(M=0;M<j;M+=1)Y.push(q(255&G.charCodeAt(M)));return Y.join("")};if(L.open("GET",g,!_),L.overrideMimeType("text/plain; charset=x-user-defined"),_===!1&&(L.onload=function(){L.status===200?C(I(this.responseText)):C(void 0)}),L.send(null),_&&L.status===200)return I(L.responseText)}(l,c,p)}catch{}return a}(e,t,s)},i.loadImageFile=i.loadFile}(Mr.API),function(i){function e(){return(Pr.html2canvas?Promise.resolve(Pr.html2canvas):Promise.resolve().then(()=>n6)).catch(function(p){return Promise.reject(new Error("Could not load html2canvas: "+p))}).then(function(p){return p.default?p.default:p})}function t(){return(Pr.DOMPurify?Promise.resolve(Pr.DOMPurify):Promise.resolve().then(()=>M6)).catch(function(p){return Promise.reject(new Error("Could not load dompurify: "+p))}).then(function(p){return p.default?p.default:p})}var s=function(p){var a=fi(p);return a==="undefined"?"undefined":a==="string"||p instanceof String?"string":a==="number"||p instanceof Number?"number":a==="function"||p instanceof Function?"function":p&&p.constructor===Array?"array":p&&p.nodeType===1?"element":a==="object"?"object":"unknown"},l=function(p,a){var g=document.createElement(p);for(var _ in a.className&&(g.className=a.className),a.innerHTML&&a.dompurify&&(g.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)g.style[_]=a.style[_];return g},c=function p(a){var g=Object.assign(p.convert(Promise.resolve()),JSON.parse(JSON.stringify(p.template))),_=p.convert(Promise.resolve(),g);return _=(_=_.setProgress(1,p,1,[p])).set(a)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(p,a){return p.__proto__=a||c.prototype,p},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(p,a){return this.then(function(){switch(a=a||function(g){switch(s(g)){case"string":return"string";case"element":return g.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(p)){case"string":return this.then(t).then(function(g){return this.set({src:l("div",{innerHTML:p,dompurify:g})})});case"element":return this.set({src:p});case"canvas":return this.set({canvas:p});case"img":return this.set({img:p});default:return this.error("Unknown source type.")}})},c.prototype.to=function(p){switch(p){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var p={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function g(_,C){for(var L=_.nodeType===3?document.createTextNode(_.nodeValue):_.cloneNode(!1),M=_.firstChild;M;M=M.nextSibling)C!==!0&&M.nodeType===1&&M.nodeName==="SCRIPT"||L.appendChild(g(M,C));return _.nodeType===1&&(_.nodeName==="CANVAS"?(L.width=_.width,L.height=_.height,L.getContext("2d").drawImage(_,0,0)):_.nodeName!=="TEXTAREA"&&_.nodeName!=="SELECT"||(L.value=_.value),L.addEventListener("load",function(){L.scrollTop=_.scrollTop,L.scrollLeft=_.scrollLeft},!0)),L}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(p.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=l("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=l("div",{className:"html2pdf__container",style:p}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(l("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(e).then(function(a){var g=Object.assign({},this.opt.html2canvas);return delete g.onrendered,a(this.prop.container,g)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(e).then(function(a){var g=this.opt.jsPDF,_=this.opt.fontFaces,C=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,L=Object.assign({async:!0,allowTaint:!0,scale:C,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete L.onrendered,g.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,g.context2d.posX=this.opt.x,g.context2d.posY=this.opt.y,g.context2d.margin=this.opt.margin,g.context2d.fontFaces=_,_)for(var M=0;M<_.length;++M){var I=_[M],G=I.src.find(function(j){return j.format==="truetype"});G&&g.addFont(G.url,I.ref.name,I.ref.style)}return L.windowHeight=L.windowHeight||0,L.windowHeight=L.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):L.windowHeight,g.context2d.save(!0),a(this.prop.container,L)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var p=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=p})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(p,a,g){return(g=g||"pdf").toLowerCase()==="img"||g.toLowerCase()==="image"?this.outputImg(p,a):this.outputPdf(p,a)},c.prototype.outputPdf=function(p,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(p,a)})},c.prototype.outputImg=function(p){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(p){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+p+'" is not supported.'}})},c.prototype.save=function(p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(p?{filename:p}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(p){if(s(p)!=="object")return this;var a=Object.keys(p||{}).map(function(g){if(g in c.template.prop)return function(){this.prop[g]=p[g]};switch(g){case"margin":return this.setMargin.bind(this,p.margin);case"jsPDF":return function(){return this.opt.jsPDF=p.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,p.pageSize);default:return function(){this.opt[g]=p[g]}}},this);return this.then(function(){return this.thenList(a)})},c.prototype.get=function(p,a){return this.then(function(){var g=p in c.template.prop?this.prop[p]:this.opt[p];return a?a(g):g})},c.prototype.setMargin=function(p){return this.then(function(){switch(s(p)){case"number":p=[p,p,p,p];case"array":if(p.length===2&&(p=[p[0],p[1],p[0],p[1]]),p.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=p}).then(this.setPageSize)},c.prototype.setPageSize=function(p){function a(g,_){return Math.floor(g*_/72*96)}return this.then(function(){(p=p||Mr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(p.inner={width:p.width-this.opt.margin[1]-this.opt.margin[3],height:p.height-this.opt.margin[0]-this.opt.margin[2]},p.inner.px={width:a(p.inner.width,p.k),height:a(p.inner.height,p.k)},p.inner.ratio=p.inner.height/p.inner.width),this.prop.pageSize=p})},c.prototype.setProgress=function(p,a,g,_){return p!=null&&(this.progress.val=p),a!=null&&(this.progress.state=a),g!=null&&(this.progress.n=g),_!=null&&(this.progress.stack=_),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(p,a,g,_){return this.setProgress(p?this.progress.val+p:null,a||null,g?this.progress.n+g:null,_?this.progress.stack.concat(_):null)},c.prototype.then=function(p,a){var g=this;return this.thenCore(p,a,function(_,C){return g.updateProgress(null,null,1,[_]),Promise.prototype.then.call(this,function(L){return g.updateProgress(null,_),L}).then(_,C).then(function(L){return g.updateProgress(1),L})})},c.prototype.thenCore=function(p,a,g){g=g||Promise.prototype.then,p&&(p=p.bind(this)),a&&(a=a.bind(this));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:c.convert(Object.assign({},this),Promise.prototype),C=g.call(_,p,a);return c.convert(C,this.__proto__)},c.prototype.thenExternal=function(p,a){return Promise.prototype.then.call(this,p,a)},c.prototype.thenList=function(p){var a=this;return p.forEach(function(g){a=a.thenCore(g)}),a},c.prototype.catch=function(p){p&&(p=p.bind(this));var a=Promise.prototype.catch.call(this,p);return c.convert(a,this)},c.prototype.catchExternal=function(p){return Promise.prototype.catch.call(this,p)},c.prototype.error=function(p){return this.then(function(){throw new Error(p)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,Mr.getPageSize=function(p,a,g){if(fi(p)==="object"){var _=p;p=_.orientation,a=_.unit||a,g=_.format||g}a=a||"mm",g=g||"a4",p=(""+(p||"P")).toLowerCase();var C,L=(""+g).toLowerCase(),M={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":C=1;break;case"mm":C=72/25.4;break;case"cm":C=72/2.54;break;case"in":C=72;break;case"px":C=.75;break;case"pc":case"em":C=12;break;case"ex":C=6;break;default:throw"Invalid unit: "+a}var I,G=0,j=0;if(M.hasOwnProperty(L))G=M[L][1]/C,j=M[L][0]/C;else try{G=g[1],j=g[0]}catch{throw new Error("Invalid format: "+g)}if(p==="p"||p==="portrait")p="p",j>G&&(I=j,j=G,G=I);else{if(p!=="l"&&p!=="landscape")throw"Invalid orientation: "+p;p="l",G>j&&(I=j,j=G,G=I)}return{width:j,height:G,unit:a,k:C,orientation:p}},i.html=function(p,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Og):null;var g=new c(a);return a.worker?g:g.from(p).doCallback()}}(Mr.API),Mr.API.addJS=function(i){return Uv=i,this.internal.events.subscribe("postPutResources",function(){Wp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Wp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Tv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Uv+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Wp!==void 0&&Tv!==void 0&&this.internal.out("/Names <</JavaScript "+Wp+" 0 R>>")}),this},function(i){var e;i.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var l=t.outline.render().split(/\r\n/),c=0;c<l.length;c++){var p=l[c],a=s.exec(p);if(a!=null){var g=a[1];t.internal.newObjectDeferredBegin(g,!1)}t.internal.write(p)}if(this.outline.createNamedDestinations){var _=this.internal.pages.length,C=[];for(c=0;c<_;c++){var L=t.internal.newObject();C.push(L);var M=t.internal.getPageInfo(c+1);t.internal.write("<< /D["+M.objId+" 0 R /XYZ null null null]>> endobj")}var I=t.internal.newObject();for(t.internal.write("<< /Names [ "),c=0;c<C.length;c++)t.internal.write("(page_"+(c+1)+")"+C[c]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+I+" 0 R"),t.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),i.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,l,c){var p={title:l,options:c,children:[]};return s==null&&(s=this.root),s.children.push(p),p},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var l=0;l<s.children.length;l++)this.genIds_r(s.children[l])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var l=this.ctx.pdf.internal.getVerticalCoordinateString,c=0;c<s.children.length;c++){var p=s.children[c];this.objStart(p),this.line("/Title "+this.makeString(p.title)),this.line("/Parent "+this.makeRef(s)),c>0&&this.line("/Prev "+this.makeRef(s.children[c-1])),c<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[c+1])),p.children.length>0&&(this.line("/First "+this.makeRef(p.children[0])),this.line("/Last "+this.makeRef(p.children[p.children.length-1])));var a=this.count=this.count_r({count:0},p);if(a>0&&this.line("/Count "+a),p.options&&p.options.pageNumber){var g=t.internal.getPageInfo(p.options.pageNumber);this.line("/Dest ["+g.objId+" 0 R /XYZ 0 "+l(0)+" 0]")}this.objEnd()}for(var _=0;_<s.children.length;_++)this.renderItems(s.children[_])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,l){for(var c=0;c<l.children.length;c++)s.count++,this.count_r(s,l.children[c]);return s.count}}])}(Mr.API),function(i){var e=[192,193,194,195,196,197,198,199];i.processJPEG=function(t,s,l,c,p,a){var g,_=this.decode.DCT_DECODE,C=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=p||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(g=function(L){for(var M,I=256*L.charCodeAt(4)+L.charCodeAt(5),G=L.length,j={width:0,height:0,numcomponents:1},Y=4;Y<G;Y+=2){if(Y+=I,e.indexOf(L.charCodeAt(Y+1))!==-1){M=256*L.charCodeAt(Y+5)+L.charCodeAt(Y+6),j={width:256*L.charCodeAt(Y+7)+L.charCodeAt(Y+8),height:M,numcomponents:L.charCodeAt(Y+9)};break}I=256*L.charCodeAt(Y+2)+L.charCodeAt(Y+3)}return j}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}C={data:t,width:g.width,height:g.height,colorSpace:a,bitsPerComponent:8,filter:_,index:s,alias:l}}return C}}(Mr.API);var mu,Zp,Mv,Qv,kv,a3=function(){var i,e,t;function s(c){var p,a,g,_,C,L,M,I,G,j,Y,q,ne,he;for(this.data=c,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},L=null;;){switch(p=this.readUInt32(),G=(function(){var Se,Ne;for(Ne=[],Se=0;Se<4;++Se)Ne.push(String.fromCharCode(this.data[this.pos++]));return Ne}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(p);break;case"fcTL":L&&this.animation.frames.push(L),this.pos+=4,L={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},C=this.readUInt16(),_=this.readUInt16()||100,L.delay=1e3*C/_,L.disposeOp=this.data[this.pos++],L.blendOp=this.data[this.pos++],L.data=[];break;case"IDAT":case"fdAT":for(G==="fdAT"&&(this.pos+=4,p-=4),c=(L!=null?L.data:void 0)||this.imgData,q=0;0<=p?q<p:q>p;0<=p?++q:--q)c.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(g=this.palette.length/3,this.transparency.indexed=this.read(p),this.transparency.indexed.length>g)throw new Error("More transparent colors than palette size");if((j=g-this.transparency.indexed.length)>0)for(ne=0;0<=j?ne<j:ne>j;0<=j?++ne:--ne)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(p)[0];break;case 2:this.transparency.rgb=this.read(p)}break;case"tEXt":M=(Y=this.read(p)).indexOf(0),I=String.fromCharCode.apply(String,Y.slice(0,M)),this.text[I]=String.fromCharCode.apply(String,Y.slice(M+1));break;case"IEND":return L&&this.animation.frames.push(L),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(he=this.colorType)===4||he===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=p}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(c){var p,a;for(a=[],p=0;0<=c?p<c:p>c;0<=c?++p:--p)a.push(this.data[this.pos++]);return a},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(c){var p=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*p),g=0,_=this;if(c==null&&(c=this.imgData),c.length===0)return new Uint8Array(0);function C(L,M,I,G){var j,Y,q,ne,he,Se,Ne,Pe,Ee,fe,We,Ke,ce,Ae,xe,_e,et,Je,rt,Ye,it,nt=Math.ceil((_.width-L)/I),Bt=Math.ceil((_.height-M)/G),ee=_.width==nt&&_.height==Bt;for(Ae=p*nt,Ke=ee?a:new Uint8Array(Ae*Bt),Se=c.length,ce=0,Y=0;ce<Bt&&g<Se;){switch(c[g++]){case 0:for(ne=et=0;et<Ae;ne=et+=1)Ke[Y++]=c[g++];break;case 1:for(ne=Je=0;Je<Ae;ne=Je+=1)j=c[g++],he=ne<p?0:Ke[Y-p],Ke[Y++]=(j+he)%256;break;case 2:for(ne=rt=0;rt<Ae;ne=rt+=1)j=c[g++],q=(ne-ne%p)/p,xe=ce&&Ke[(ce-1)*Ae+q*p+ne%p],Ke[Y++]=(xe+j)%256;break;case 3:for(ne=Ye=0;Ye<Ae;ne=Ye+=1)j=c[g++],q=(ne-ne%p)/p,he=ne<p?0:Ke[Y-p],xe=ce&&Ke[(ce-1)*Ae+q*p+ne%p],Ke[Y++]=(j+Math.floor((he+xe)/2))%256;break;case 4:for(ne=it=0;it<Ae;ne=it+=1)j=c[g++],q=(ne-ne%p)/p,he=ne<p?0:Ke[Y-p],ce===0?xe=_e=0:(xe=Ke[(ce-1)*Ae+q*p+ne%p],_e=q&&Ke[(ce-1)*Ae+(q-1)*p+ne%p]),Ne=he+xe-_e,Pe=Math.abs(Ne-he),fe=Math.abs(Ne-xe),We=Math.abs(Ne-_e),Ee=Pe<=fe&&Pe<=We?he:fe<=We?xe:_e,Ke[Y++]=(j+Ee)%256;break;default:throw new Error("Invalid filter algorithm: "+c[g-1])}if(!ee){var pe=((M+ce*G)*_.width+L)*p,ye=ce*Ae;for(ne=0;ne<nt;ne+=1){for(var Re=0;Re<p;Re+=1)a[pe++]=Ke[ye++];pe+=(I-1)*p}}ce++}}return c=R4(c),_.interlaceMethod==1?(C(0,0,8,8),C(4,0,8,8),C(0,4,4,8),C(2,0,4,4),C(0,2,2,4),C(1,0,2,2),C(0,1,1,2)):C(0,0,1,1),a},s.prototype.decodePalette=function(){var c,p,a,g,_,C,L,M,I;for(a=this.palette,C=this.transparency.indexed||[],_=new Uint8Array((C.length||0)+a.length),g=0,c=0,p=L=0,M=a.length;L<M;p=L+=3)_[g++]=a[p],_[g++]=a[p+1],_[g++]=a[p+2],_[g++]=(I=C[c++])!=null?I:255;return _},s.prototype.copyToImageData=function(c,p){var a,g,_,C,L,M,I,G,j,Y,q;if(g=this.colors,j=null,a=this.hasAlphaChannel,this.palette.length&&(j=(q=this._decodedPalette)!=null?q:this._decodedPalette=this.decodePalette(),g=4,a=!0),G=(_=c.data||c).length,L=j||p,C=M=0,g===1)for(;C<G;)I=j?4*p[C/4]:M,Y=L[I++],_[C++]=Y,_[C++]=Y,_[C++]=Y,_[C++]=a?L[I++]:255,M=I;else for(;C<G;)I=j?4*p[C/4]:M,_[C++]=L[I++],_[C++]=L[I++],_[C++]=L[I++],_[C++]=a?L[I++]:255,M=I},s.prototype.decode=function(){var c;return c=new Uint8Array(this.width*this.height*4),this.copyToImageData(c,this.decodePixels()),c};var l=function(){if(Object.prototype.toString.call(Pr)==="[object Window]"){try{e=Pr.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return l(),i=function(c){var p;if(l()===!0)return t.width=c.width,t.height=c.height,t.clearRect(0,0,c.width,c.height),t.putImageData(c,0,0),(p=new Image).src=e.toDataURL(),p;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(c){var p,a,g,_,C,L,M,I;if(this.animation){for(I=[],a=C=0,L=(M=this.animation.frames).length;C<L;a=++C)p=M[a],g=c.createImageData(p.width,p.height),_=this.decodePixels(new Uint8Array(p.data)),this.copyToImageData(g,_),p.imageData=g,I.push(p.image=i(g));return I}},s.prototype.renderFrame=function(c,p){var a,g,_;return a=(g=this.animation.frames)[p],_=g[p-1],p===0&&c.clearRect(0,0,this.width,this.height),(_!=null?_.disposeOp:void 0)===1?c.clearRect(_.xOffset,_.yOffset,_.width,_.height):(_!=null?_.disposeOp:void 0)===2&&c.putImageData(_.imageData,_.xOffset,_.yOffset),a.blendOp===0&&c.clearRect(a.xOffset,a.yOffset,a.width,a.height),c.drawImage(a.image,a.xOffset,a.yOffset)},s.prototype.animate=function(c){var p,a,g,_,C,L,M=this;return a=0,L=this.animation,_=L.numFrames,g=L.frames,C=L.numPlays,(p=function(){var I,G;if(I=a++%_,G=g[I],M.renderFrame(c,I),_>1&&a/_<C)return M.animation._timeout=setTimeout(p,G.delay)})()},s.prototype.stopAnimation=function(){var c;return clearTimeout((c=this.animation)!=null?c._timeout:void 0)},s.prototype.render=function(c){var p,a;return c._png&&c._png.stopAnimation(),c._png=this,c.width=this.width,c.height=this.height,p=c.getContext("2d"),this.animation?(this.decodeFrames(p),this.animate(p)):(a=p.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),p.putImageData(a,0,0))},s}();/**
* @license
*
* Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
*
* Permission is hereby granted, free of charge, to any person obtaining
* a copy of this software and associated documentation files (the
* "Software"), to deal in the Software without restriction, including
* without limitation the rights to use, copy, modify, merge, publish,
* distribute, sublicense, and/or sell copies of the Software, and to
* permit persons to whom the Software is furnished to do so, subject to
* the following conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
* MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
* LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
* OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
* WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
* ====================================================================
*//**
* @license
* (c) Dean McNamee <dean@gmail.com>, 2013.
*
* https://github.com/deanm/omggif
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to
* deal in the Software without restriction, including without limitation the
* rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
* sell copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
* IN THE SOFTWARE.
*
* omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
* including animation and compression.  It does not rely on any specific
* underlying system, so should run in the browser, Node, or Plask.
*/function o3(i){var e=0;if(i[e++]!==71||i[e++]!==73||i[e++]!==70||i[e++]!==56||(i[e++]+1&253)!=56||i[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=i[e++]|i[e++]<<8,s=i[e++]|i[e++]<<8,l=i[e++],c=l>>7,p=1<<(7&l)+1;i[e++],i[e++];var a=null,g=null;c&&(a=e,g=p,e+=3*p);var _=!0,C=[],L=0,M=null,I=0,G=null;for(this.width=t,this.height=s;_&&e<i.length;)switch(i[e++]){case 33:switch(i[e++]){case 255:if(i[e]!==11||i[e+1]==78&&i[e+2]==69&&i[e+3]==84&&i[e+4]==83&&i[e+5]==67&&i[e+6]==65&&i[e+7]==80&&i[e+8]==69&&i[e+9]==50&&i[e+10]==46&&i[e+11]==48&&i[e+12]==3&&i[e+13]==1&&i[e+16]==0)e+=14,G=i[e++]|i[e++]<<8,e++;else for(e+=12;;){if(!((ce=i[e++])>=0))throw Error("Invalid block size");if(ce===0)break;e+=ce}break;case 249:if(i[e++]!==4||i[e+4]!==0)throw new Error("Invalid graphics extension block.");var j=i[e++];L=i[e++]|i[e++]<<8,M=i[e++],!(1&j)&&(M=null),I=j>>2&7,e++;break;case 254:for(;;){if(!((ce=i[e++])>=0))throw Error("Invalid block size");if(ce===0)break;e+=ce}break;default:throw new Error("Unknown graphic control label: 0x"+i[e-1].toString(16))}break;case 44:var Y=i[e++]|i[e++]<<8,q=i[e++]|i[e++]<<8,ne=i[e++]|i[e++]<<8,he=i[e++]|i[e++]<<8,Se=i[e++],Ne=Se>>6&1,Pe=1<<(7&Se)+1,Ee=a,fe=g,We=!1;Se>>7&&(We=!0,Ee=e,fe=Pe,e+=3*Pe);var Ke=e;for(e++;;){var ce;if(!((ce=i[e++])>=0))throw Error("Invalid block size");if(ce===0)break;e+=ce}C.push({x:Y,y:q,width:ne,height:he,has_local_palette:We,palette_offset:Ee,palette_size:fe,data_offset:Ke,data_length:e-Ke,transparent_index:M,interlaced:!!Ne,delay:L,disposal:I});break;case 59:_=!1;break;default:throw new Error("Unknown gif block: 0x"+i[e-1].toString(16))}this.numFrames=function(){return C.length},this.loopCount=function(){return G},this.frameInfo=function(Ae){if(Ae<0||Ae>=C.length)throw new Error("Frame index out of range.");return C[Ae]},this.decodeAndBlitFrameBGRA=function(Ae,xe){var _e=this.frameInfo(Ae),et=_e.width*_e.height,Je=new Uint8Array(et);Dv(i,_e.data_offset,Je,et);var rt=_e.palette_offset,Ye=_e.transparent_index;Ye===null&&(Ye=256);var it=_e.width,nt=t-it,Bt=it,ee=4*(_e.y*t+_e.x),pe=4*((_e.y+_e.height)*t+_e.x),ye=ee,Re=4*nt;_e.interlaced===!0&&(Re+=4*t*7);for(var Ge=8,tt=0,st=Je.length;tt<st;++tt){var ot=Je[tt];if(Bt===0&&(Bt=it,(ye+=Re)>=pe&&(Re=4*nt+4*t*(Ge-1),ye=ee+(it+nt)*(Ge<<1),Ge>>=1)),ot===Ye)ye+=4;else{var Ct=i[rt+3*ot],Et=i[rt+3*ot+1],zt=i[rt+3*ot+2];xe[ye++]=zt,xe[ye++]=Et,xe[ye++]=Ct,xe[ye++]=255}--Bt}},this.decodeAndBlitFrameRGBA=function(Ae,xe){var _e=this.frameInfo(Ae),et=_e.width*_e.height,Je=new Uint8Array(et);Dv(i,_e.data_offset,Je,et);var rt=_e.palette_offset,Ye=_e.transparent_index;Ye===null&&(Ye=256);var it=_e.width,nt=t-it,Bt=it,ee=4*(_e.y*t+_e.x),pe=4*((_e.y+_e.height)*t+_e.x),ye=ee,Re=4*nt;_e.interlaced===!0&&(Re+=4*t*7);for(var Ge=8,tt=0,st=Je.length;tt<st;++tt){var ot=Je[tt];if(Bt===0&&(Bt=it,(ye+=Re)>=pe&&(Re=4*nt+4*t*(Ge-1),ye=ee+(it+nt)*(Ge<<1),Ge>>=1)),ot===Ye)ye+=4;else{var Ct=i[rt+3*ot],Et=i[rt+3*ot+1],zt=i[rt+3*ot+2];xe[ye++]=Ct,xe[ye++]=Et,xe[ye++]=zt,xe[ye++]=255}--Bt}}}function Dv(i,e,t,s){for(var l=i[e++],c=1<<l,p=c+1,a=p+1,g=l+1,_=(1<<g)-1,C=0,L=0,M=0,I=i[e++],G=new Int32Array(4096),j=null;;){for(;C<16&&I!==0;)L|=i[e++]<<C,C+=8,I===1?I=i[e++]:--I;if(C<g)break;var Y=L&_;if(L>>=g,C-=g,Y!==c){if(Y===p)break;for(var q=Y<a?Y:j,ne=0,he=q;he>c;)he=G[he]>>8,++ne;var Se=he;if(M+ne+(q!==Y?1:0)>s)return void Qi.log("Warning, gif stream longer than expected.");t[M++]=Se;var Ne=M+=ne;for(q!==Y&&(t[M++]=Se),he=q;ne--;)he=G[he],t[--Ne]=255&he,he>>=8;j!==null&&a<4096&&(G[a++]=j<<8|Se,a>=_+1&&g<12&&(++g,_=_<<1|1)),j=Y}else a=p+1,_=(1<<(g=l+1))-1,j=null}return M!==s&&Qi.log("Warning, gif stream shorter than expected."),t}/**
	 * @license
	  Copyright (c) 2008, Adobe Systems Incorporated
	  All rights reserved.

	  Redistribution and use in source and binary forms, with or without 
	  modification, are permitted provided that the following conditions are
	  met:

	  * Redistributions of source code must retain the above copyright notice, 
	    this list of conditions and the following disclaimer.
	  
	  * Redistributions in binary form must reproduce the above copyright
	    notice, this list of conditions and the following disclaimer in the 
	    documentation and/or other materials provided with the distribution.
	  
	  * Neither the name of Adobe Systems Incorporated nor the names of its 
	    contributors may be used to endorse or promote products derived from 
	    this software without specific prior written permission.

	  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
	  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
	  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
	  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
	  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
	  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
	  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
	  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
	  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
	  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
	  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/function Rg(i){var e,t,s,l,c,p=Math.floor,a=new Array(64),g=new Array(64),_=new Array(64),C=new Array(64),L=new Array(65535),M=new Array(65535),I=new Array(64),G=new Array(64),j=[],Y=0,q=7,ne=new Array(64),he=new Array(64),Se=new Array(64),Ne=new Array(256),Pe=new Array(2048),Ee=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],fe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],We=[0,1,2,3,4,5,6,7,8,9,10,11],Ke=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ce=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Ae=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],xe=[0,1,2,3,4,5,6,7,8,9,10,11],_e=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],et=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Je(ee,pe){for(var ye=0,Re=0,Ge=new Array,tt=1;tt<=16;tt++){for(var st=1;st<=ee[tt];st++)Ge[pe[Re]]=[],Ge[pe[Re]][0]=ye,Ge[pe[Re]][1]=tt,Re++,ye++;ye*=2}return Ge}function rt(ee){for(var pe=ee[0],ye=ee[1]-1;ye>=0;)pe&1<<ye&&(Y|=1<<q),ye--,--q<0&&(Y==255?(Ye(255),Ye(0)):Ye(Y),q=7,Y=0)}function Ye(ee){j.push(ee)}function it(ee){Ye(ee>>8&255),Ye(255&ee)}function nt(ee,pe,ye,Re,Ge){for(var tt,st=Ge[0],ot=Ge[240],Ct=function(bt,ze){var Ut,Pt,Mt,Lt,hr,wr,Lr,qr,gr,br,Rt=0;for(gr=0;gr<8;++gr){Ut=bt[Rt],Pt=bt[Rt+1],Mt=bt[Rt+2],Lt=bt[Rt+3],hr=bt[Rt+4],wr=bt[Rt+5],Lr=bt[Rt+6];var vt=Ut+(qr=bt[Rt+7]),Cr=Ut-qr,Tr=Pt+Lr,Dr=Pt-Lr,Vr=Mt+wr,xt=Mt-wr,$t=Lt+hr,rr=Lt-hr,Or=vt+$t,bi=vt-$t,Nt=Tr+Vr,Kr=Tr-Vr;bt[Rt]=Or+Nt,bt[Rt+4]=Or-Nt;var ue=.707106781*(Kr+bi);bt[Rt+2]=bi+ue,bt[Rt+6]=bi-ue;var X=.382683433*((Or=rr+xt)-(Kr=Dr+Cr)),ie=.5411961*Or+X,le=1.306562965*Kr+X,ve=.707106781*(Nt=xt+Dr),be=Cr+ve,De=Cr-ve;bt[Rt+5]=De+ie,bt[Rt+3]=De-ie,bt[Rt+1]=be+le,bt[Rt+7]=be-le,Rt+=8}for(Rt=0,gr=0;gr<8;++gr){Ut=bt[Rt],Pt=bt[Rt+8],Mt=bt[Rt+16],Lt=bt[Rt+24],hr=bt[Rt+32],wr=bt[Rt+40],Lr=bt[Rt+48];var Oe=Ut+(qr=bt[Rt+56]),Ue=Ut-qr,Ve=Pt+Lr,lt=Pt-Lr,ht=Mt+wr,gt=Mt-wr,nr=Lt+hr,sr=Lt-hr,jt=Oe+nr,Yt=Oe-nr,ur=Ve+ht,Br=Ve-ht;bt[Rt]=jt+ur,bt[Rt+32]=jt-ur;var Rr=.707106781*(Br+Yt);bt[Rt+16]=Yt+Rr,bt[Rt+48]=Yt-Rr;var Sr=.382683433*((jt=sr+gt)-(Br=lt+Ue)),Te=.5411961*jt+Sr,Qt=1.306562965*Br+Sr,yt=.707106781*(ur=gt+lt),vr=Ue+yt,Nr=Ue-yt;bt[Rt+40]=Nr+Te,bt[Rt+24]=Nr-Te,bt[Rt+8]=vr+Qt,bt[Rt+56]=vr-Qt,Rt++}for(gr=0;gr<64;++gr)br=bt[gr]*ze[gr],I[gr]=br>0?br+.5|0:br-.5|0;return I}(ee,pe),Et=0;Et<64;++Et)G[Ee[Et]]=Ct[Et];var zt=G[0]-ye;ye=G[0],zt==0?rt(Re[0]):(rt(Re[M[tt=32767+zt]]),rt(L[tt]));for(var Vt=63;Vt>0&&G[Vt]==0;)Vt--;if(Vt==0)return rt(st),ye;for(var Jt,ft=1;ft<=Vt;){for(var Me=ft;G[ft]==0&&ft<=Vt;)++ft;var fr=ft-Me;if(fr>=16){Jt=fr>>4;for(var Xt=1;Xt<=Jt;++Xt)rt(ot);fr&=15}tt=32767+G[ft],rt(Ge[(fr<<4)+M[tt]]),rt(L[tt]),ft++}return Vt!=63&&rt(st),ye}function Bt(ee){ee=Math.min(Math.max(ee,1),100),c!=ee&&(function(pe){for(var ye=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Re=0;Re<64;Re++){var Ge=p((ye[Re]*pe+50)/100);Ge=Math.min(Math.max(Ge,1),255),a[Ee[Re]]=Ge}for(var tt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],st=0;st<64;st++){var ot=p((tt[st]*pe+50)/100);ot=Math.min(Math.max(ot,1),255),g[Ee[st]]=ot}for(var Ct=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Et=0,zt=0;zt<8;zt++)for(var Vt=0;Vt<8;Vt++)_[Et]=1/(a[Ee[Et]]*Ct[zt]*Ct[Vt]*8),C[Et]=1/(g[Ee[Et]]*Ct[zt]*Ct[Vt]*8),Et++}(ee<50?Math.floor(5e3/ee):Math.floor(200-2*ee)),c=ee)}this.encode=function(ee,pe){pe&&Bt(pe),j=new Array,Y=0,q=7,it(65496),it(65504),it(16),Ye(74),Ye(70),Ye(73),Ye(70),Ye(0),Ye(1),Ye(1),Ye(0),it(1),it(1),Ye(0),Ye(0),function(){it(65499),it(132),Ye(0);for(var Pt=0;Pt<64;Pt++)Ye(a[Pt]);Ye(1);for(var Mt=0;Mt<64;Mt++)Ye(g[Mt])}(),function(Pt,Mt){it(65472),it(17),Ye(8),it(Mt),it(Pt),Ye(3),Ye(1),Ye(17),Ye(0),Ye(2),Ye(17),Ye(1),Ye(3),Ye(17),Ye(1)}(ee.width,ee.height),function(){it(65476),it(418),Ye(0);for(var Pt=0;Pt<16;Pt++)Ye(fe[Pt+1]);for(var Mt=0;Mt<=11;Mt++)Ye(We[Mt]);Ye(16);for(var Lt=0;Lt<16;Lt++)Ye(Ke[Lt+1]);for(var hr=0;hr<=161;hr++)Ye(ce[hr]);Ye(1);for(var wr=0;wr<16;wr++)Ye(Ae[wr+1]);for(var Lr=0;Lr<=11;Lr++)Ye(xe[Lr]);Ye(17);for(var qr=0;qr<16;qr++)Ye(_e[qr+1]);for(var gr=0;gr<=161;gr++)Ye(et[gr])}(),it(65498),it(12),Ye(3),Ye(1),Ye(0),Ye(2),Ye(17),Ye(3),Ye(17),Ye(0),Ye(63),Ye(0);var ye=0,Re=0,Ge=0;Y=0,q=7,this.encode.displayName="_encode_";for(var tt,st,ot,Ct,Et,zt,Vt,Jt,ft,Me=ee.data,fr=ee.width,Xt=ee.height,bt=4*fr,ze=0;ze<Xt;){for(tt=0;tt<bt;){for(Et=bt*ze+tt,Vt=-1,Jt=0,ft=0;ft<64;ft++)zt=Et+(Jt=ft>>3)*bt+(Vt=4*(7&ft)),ze+Jt>=Xt&&(zt-=bt*(ze+1+Jt-Xt)),tt+Vt>=bt&&(zt-=tt+Vt-bt+4),st=Me[zt++],ot=Me[zt++],Ct=Me[zt++],ne[ft]=(Pe[st]+Pe[ot+256>>0]+Pe[Ct+512>>0]>>16)-128,he[ft]=(Pe[st+768>>0]+Pe[ot+1024>>0]+Pe[Ct+1280>>0]>>16)-128,Se[ft]=(Pe[st+1280>>0]+Pe[ot+1536>>0]+Pe[Ct+1792>>0]>>16)-128;ye=nt(ne,_,ye,e,s),Re=nt(he,C,Re,t,l),Ge=nt(Se,C,Ge,t,l),tt+=32}ze+=8}if(q>=0){var Ut=[];Ut[1]=q+1,Ut[0]=(1<<q+1)-1,rt(Ut)}return it(65497),new Uint8Array(j)},i=i||50,function(){for(var ee=String.fromCharCode,pe=0;pe<256;pe++)Ne[pe]=ee(pe)}(),e=Je(fe,We),t=Je(Ae,xe),s=Je(Ke,ce),l=Je(_e,et),function(){for(var ee=1,pe=2,ye=1;ye<=15;ye++){for(var Re=ee;Re<pe;Re++)M[32767+Re]=ye,L[32767+Re]=[],L[32767+Re][1]=ye,L[32767+Re][0]=Re;for(var Ge=-(pe-1);Ge<=-ee;Ge++)M[32767+Ge]=ye,L[32767+Ge]=[],L[32767+Ge][1]=ye,L[32767+Ge][0]=pe-1+Ge;ee<<=1,pe<<=1}}(),function(){for(var ee=0;ee<256;ee++)Pe[ee]=19595*ee,Pe[ee+256>>0]=38470*ee,Pe[ee+512>>0]=7471*ee+32768,Pe[ee+768>>0]=-11059*ee,Pe[ee+1024>>0]=-21709*ee,Pe[ee+1280>>0]=32768*ee+8421375,Pe[ee+1536>>0]=-27439*ee,Pe[ee+1792>>0]=-5329*ee}(),Bt(i)}/**
* @license
* Copyright (c) 2017 Aras Abbasi
*
* Licensed under the MIT License.
* http://opensource.org/licenses/mit-license
*/function po(i,e){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Nv(i){function e(fe){if(!fe)throw Error("assert :P")}function t(fe,We,Ke){for(var ce=0;4>ce;ce++)if(fe[We+ce]!=Ke.charCodeAt(ce))return!0;return!1}function s(fe,We,Ke,ce,Ae){for(var xe=0;xe<Ae;xe++)fe[We+xe]=Ke[ce+xe]}function l(fe,We,Ke,ce){for(var Ae=0;Ae<ce;Ae++)fe[We+Ae]=Ke}function c(fe){return new Int32Array(fe)}function p(fe,We){for(var Ke=[],ce=0;ce<fe;ce++)Ke.push(new We);return Ke}function a(fe,We){var Ke=[];return function ce(Ae,xe,_e){for(var et=_e[xe],Je=0;Je<et&&(Ae.push(_e.length>xe+1?[]:new We),!(_e.length<xe+1));Je++)ce(Ae[Je],xe+1,_e)}(Ke,0,fe),Ke}var g=function(){var fe=this;function We(f,x){for(var S=1<<x-1>>>0;f&S;)S>>>=1;return S?(f&S-1)+S:f}function Ke(f,x,S,Q,R){e(!(Q%S));do f[x+(Q-=S)]=R;while(0<Q)}function ce(f,x,S,Q,R){if(e(2328>=R),512>=R)var N=c(512);else if((N=c(R))==null)return 0;return function(z,$,Z,re,de,we){var Le,Qe,ut=$,He=1<<Z,Fe=c(16),Ie=c(16);for(e(de!=0),e(re!=null),e(z!=null),e(0<Z),Qe=0;Qe<de;++Qe){if(15<re[Qe])return 0;++Fe[re[Qe]]}if(Fe[0]==de)return 0;for(Ie[1]=0,Le=1;15>Le;++Le){if(Fe[Le]>1<<Le)return 0;Ie[Le+1]=Ie[Le]+Fe[Le]}for(Qe=0;Qe<de;++Qe)Le=re[Qe],0<re[Qe]&&(we[Ie[Le]++]=Qe);if(Ie[15]==1)return(re=new Ae).g=0,re.value=we[0],Ke(z,ut,1,He,re),He;var dt,pt=-1,at=He-1,_t=0,Ft=1,Wt=1,kt=1<<Z;for(Qe=0,Le=1,de=2;Le<=Z;++Le,de<<=1){if(Ft+=Wt<<=1,0>(Wt-=Fe[Le]))return 0;for(;0<Fe[Le];--Fe[Le])(re=new Ae).g=Le,re.value=we[Qe++],Ke(z,ut+_t,de,kt,re),_t=We(_t,Le)}for(Le=Z+1,de=2;15>=Le;++Le,de<<=1){if(Ft+=Wt<<=1,0>(Wt-=Fe[Le]))return 0;for(;0<Fe[Le];--Fe[Le]){if(re=new Ae,(_t&at)!=pt){for(ut+=kt,dt=1<<(pt=Le)-Z;15>pt&&!(0>=(dt-=Fe[pt]));)++pt,dt<<=1;He+=kt=1<<(dt=pt-Z),z[$+(pt=_t&at)].g=dt+Z,z[$+pt].value=ut-$-pt}re.g=Le-Z,re.value=we[Qe++],Ke(z,ut+(_t>>Z),de,kt,re),_t=We(_t,Le)}}return Ft!=2*Ie[15]-1?0:He}(f,x,S,Q,R,N)}function Ae(){this.value=this.g=0}function xe(){this.value=this.g=0}function _e(){this.G=p(5,Ae),this.H=c(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=p(Ln,xe)}function et(f,x,S,Q){e(f!=null),e(x!=null),e(2147483648>Q),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=x,f.pa=S,f.Jd=x,f.Yc=S+Q,f.Zc=4<=Q?S+Q-4+1:S,tt(f)}function Je(f,x){for(var S=0;0<x--;)S|=ot(f,128)<<x;return S}function rt(f,x){var S=Je(f,x);return st(f)?-S:S}function Ye(f,x,S,Q){var R,N=0;for(e(f!=null),e(x!=null),e(4294967288>Q),f.Sb=Q,f.Ra=0,f.u=0,f.h=0,4<Q&&(Q=4),R=0;R<Q;++R)N+=x[S+R]<<8*R;f.Ra=N,f.bb=Q,f.oa=x,f.pa=S}function it(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<ma-8>>>0,++f.bb,f.u-=8;ye(f)&&(f.h=1,f.u=0)}function nt(f,x){if(e(0<=x),!f.h&&x<=zo){var S=pe(f)&Ro[x];return f.u+=x,it(f),S}return f.h=1,f.u=0}function Bt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function pe(f){return f.Ra>>>(f.u&ma-1)>>>0}function ye(f){return e(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>ma}function Re(f,x){f.u=x,f.h=ye(f)}function Ge(f){f.u>=no&&(e(f.u>=no),it(f))}function tt(f){e(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(e(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function st(f){return Je(f,1)}function ot(f,x){var S=f.Ca;0>f.b&&tt(f);var Q=f.b,R=S*x>>>8,N=(f.I>>>Q>R)+0;for(N?(S-=R,f.I-=R+1<<Q>>>0):S=R+1,Q=S,R=0;256<=Q;)R+=8,Q>>=8;return Q=7^R+vn[Q],f.b-=Q,f.Ca=(S<<Q)-1,N}function Ct(f,x,S){f[x+0]=S>>24&255,f[x+1]=S>>16&255,f[x+2]=S>>8&255,f[x+3]=S>>0&255}function Et(f,x){return f[x+0]<<0|f[x+1]<<8}function zt(f,x){return Et(f,x)|f[x+2]<<16}function Vt(f,x){return Et(f,x)|Et(f,x+2)<<16}function Jt(f,x){var S=1<<x;return e(f!=null),e(0<x),f.X=c(S),f.X==null?0:(f.Mb=32-x,f.Xa=x,1)}function ft(f,x){e(f!=null),e(x!=null),e(f.Xa==x.Xa),s(x.X,0,f.X,0,1<<x.Xa)}function Me(){this.X=[],this.Xa=this.Mb=0}function fr(f,x,S,Q){e(S!=null),e(Q!=null);var R=S[0],N=Q[0];return R==0&&(R=(f*N+x/2)/x),N==0&&(N=(x*R+f/2)/f),0>=R||0>=N?0:(S[0]=R,Q[0]=N,1)}function Xt(f,x){return f+(1<<x)-1>>>x}function bt(f,x){return((4278255360&f)+(4278255360&x)>>>0&4278255360)+((16711935&f)+(16711935&x)>>>0&16711935)>>>0}function ze(f,x){fe[x]=function(S,Q,R,N,z,$,Z){var re;for(re=0;re<z;++re){var de=fe[f]($[Z+re-1],R,N+re);$[Z+re]=bt(S[Q+re],de)}}}function Ut(){this.ud=this.hd=this.jd=0}function Pt(f,x){return((4278124286&(f^x))>>>1)+(f&x)>>>0}function Mt(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function Lt(f,x){return Mt(f+(f-x+.5>>1))}function hr(f,x,S){return Math.abs(x-S)-Math.abs(f-S)}function wr(f,x,S,Q,R,N,z){for(Q=N[z-1],S=0;S<R;++S)N[z+S]=Q=bt(f[x+S],Q)}function Lr(f,x,S,Q,R){var N;for(N=0;N<S;++N){var z=f[x+N],$=z>>8&255,Z=16711935&(Z=(Z=16711935&z)+(($<<16)+$));Q[R+N]=(4278255360&z)+Z>>>0}}function qr(f,x){x.jd=f>>0&255,x.hd=f>>8&255,x.ud=f>>16&255}function gr(f,x,S,Q,R,N){var z;for(z=0;z<Q;++z){var $=x[S+z],Z=$>>>8,re=$,de=255&(de=(de=$>>>16)+((f.jd<<24>>24)*(Z<<24>>24)>>>5));re=255&(re=(re=re+((f.hd<<24>>24)*(Z<<24>>24)>>>5))+((f.ud<<24>>24)*(de<<24>>24)>>>5)),R[N+z]=(4278255360&$)+(de<<16)+re}}function br(f,x,S,Q,R){fe[x]=function(N,z,$,Z,re,de,we,Le,Qe){for(Z=we;Z<Le;++Z)for(we=0;we<Qe;++we)re[de++]=R($[Q(N[z++])])},fe[f]=function(N,z,$,Z,re,de,we){var Le=8>>N.b,Qe=N.Ea,ut=N.K[0],He=N.w;if(8>Le)for(N=(1<<N.b)-1,He=(1<<Le)-1;z<$;++z){var Fe,Ie=0;for(Fe=0;Fe<Qe;++Fe)Fe&N||(Ie=Q(Z[re++])),de[we++]=R(ut[Ie&He]),Ie>>=Le}else fe["VP8LMapColor"+S](Z,re,ut,He,de,we,z,$,Qe)}}function Rt(f,x,S,Q,R){for(S=x+S;x<S;){var N=f[x++];Q[R++]=N>>16&255,Q[R++]=N>>8&255,Q[R++]=N>>0&255}}function vt(f,x,S,Q,R){for(S=x+S;x<S;){var N=f[x++];Q[R++]=N>>16&255,Q[R++]=N>>8&255,Q[R++]=N>>0&255,Q[R++]=N>>24&255}}function Cr(f,x,S,Q,R){for(S=x+S;x<S;){var N=(z=f[x++])>>16&240|z>>12&15,z=z>>0&240|z>>28&15;Q[R++]=N,Q[R++]=z}}function Tr(f,x,S,Q,R){for(S=x+S;x<S;){var N=(z=f[x++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;Q[R++]=N,Q[R++]=z}}function Dr(f,x,S,Q,R){for(S=x+S;x<S;){var N=f[x++];Q[R++]=N>>0&255,Q[R++]=N>>8&255,Q[R++]=N>>16&255}}function Vr(f,x,S,Q,R,N){if(N==0)for(S=x+S;x<S;)Ct(Q,((N=f[x++])[0]>>24|N[1]>>8&65280|N[2]<<8&16711680|N[3]<<24)>>>0),R+=32;else s(Q,R,f,x,S)}function xt(f,x){fe[x][0]=fe[f+"0"],fe[x][1]=fe[f+"1"],fe[x][2]=fe[f+"2"],fe[x][3]=fe[f+"3"],fe[x][4]=fe[f+"4"],fe[x][5]=fe[f+"5"],fe[x][6]=fe[f+"6"],fe[x][7]=fe[f+"7"],fe[x][8]=fe[f+"8"],fe[x][9]=fe[f+"9"],fe[x][10]=fe[f+"10"],fe[x][11]=fe[f+"11"],fe[x][12]=fe[f+"12"],fe[x][13]=fe[f+"13"],fe[x][14]=fe[f+"0"],fe[x][15]=fe[f+"0"]}function $t(f){return f==ml||f==Mn||f==ra||f==qo}function rr(){this.eb=[],this.size=this.A=this.fb=0}function Or(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function bi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rr,this.f.kb=new Or,this.sd=null}function Nt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Kr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ue(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function X(f,x){var S=f.T,Q=x.ba.f.RGBA,R=Q.eb,N=Q.fb+f.ka*Q.A,z=Ai[x.ba.S],$=f.y,Z=f.O,re=f.f,de=f.N,we=f.ea,Le=f.W,Qe=x.cc,ut=x.dc,He=x.Mc,Fe=x.Nc,Ie=f.ka,dt=f.ka+f.T,pt=f.U,at=pt+1>>1;for(Ie==0?z($,Z,null,null,re,de,we,Le,re,de,we,Le,R,N,null,null,pt):(z(x.ec,x.fc,$,Z,Qe,ut,He,Fe,re,de,we,Le,R,N-Q.A,R,N,pt),++S);Ie+2<dt;Ie+=2)Qe=re,ut=de,He=we,Fe=Le,de+=f.Rc,Le+=f.Rc,N+=2*Q.A,z($,(Z+=2*f.fa)-f.fa,$,Z,Qe,ut,He,Fe,re,de,we,Le,R,N-Q.A,R,N,pt);return Z+=f.fa,f.j+dt<f.o?(s(x.ec,x.fc,$,Z,pt),s(x.cc,x.dc,re,de,at),s(x.Mc,x.Nc,we,Le,at),S--):1&dt||z($,Z,null,null,re,de,we,Le,re,de,we,Le,R,N+Q.A,null,null,pt),S}function ie(f,x,S){var Q=f.F,R=[f.J];if(Q!=null){var N=f.U,z=x.ba.S,$=z==PA||z==ra;x=x.ba.f.RGBA;var Z=[0],re=f.ka;Z[0]=f.T,f.Kb&&(re==0?--Z[0]:(--re,R[0]-=f.width),f.j+f.ka+f.T==f.o&&(Z[0]=f.o-f.j-re));var de=x.eb;re=x.fb+re*x.A,f=Ms(Q,R[0],f.width,N,Z,de,re+($?0:3),x.A),e(S==Z),f&&$t(z)&&ea(de,re,$,N,Z,x.A)}return 0}function le(f){var x=f.ma,S=x.ba.S,Q=11>S,R=S==fl||S==ic||S==PA||S==gl||S==12||$t(S);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!ul(x.Oa,f,R?11:12))return 0;if(R&&$t(S)&&Tt(),f.da)alert("todo:use_scaling");else{if(Q){if(x.Ib=ue,f.Kb){if(S=f.U+1>>1,x.memory=c(f.U+2*S),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+f.U,x.Mc=x.cc,x.Nc=x.dc+S,x.Ib=X,Tt()}}else alert("todo:EmitYUV");R&&(x.Jb=ie,Q&&$e())}if(Q&&!u){for(f=0;256>f;++f)d[f]=89858*(f-128)+NA>>Ra,F[f]=-22014*(f-128)+NA,b[f]=-45773*(f-128),y[f]=113618*(f-128)+NA>>Ra;for(f=$o;f<ni;++f)x=76283*(f-16)+NA>>Ra,T[f-$o]=Xn(x,255),k[f-$o]=Xn(x+8>>4,15);u=1}return 1}function ve(f){var x=f.ma,S=f.U,Q=f.T;return e(!(1&f.ka)),0>=S||0>=Q?0:(S=x.Ib(f,x),x.Jb!=null&&x.Jb(f,x,S),x.Dc+=S,1)}function be(f){f.ma.memory=null}function De(f,x,S,Q){return nt(f,8)!=47?0:(x[0]=nt(f,14)+1,S[0]=nt(f,14)+1,Q[0]=nt(f,1),nt(f,3)!=0?0:!f.h)}function Oe(f,x){if(4>f)return f+1;var S=f-2>>1;return(2+(1&f)<<S)+nt(x,S)+1}function Ue(f,x){return 120<x?x-120:1<=(S=((S=xi[x-1])>>4)*f+(8-(15&S)))?S:1;var S}function Ve(f,x,S){var Q=pe(S),R=f[x+=255&Q].g-8;return 0<R&&(Re(S,S.u+8),Q=pe(S),x+=f[x].value,x+=Q&(1<<R)-1),Re(S,S.u+f[x].g),f[x].value}function lt(f,x,S){return S.g+=f.g,S.value+=f.value<<x>>>0,e(8>=S.g),f.g}function ht(f,x,S){var Q=f.xc;return e((x=Q==0?0:f.vc[f.md*(S>>Q)+(x>>Q)])<f.Wb),f.Ya[x]}function gt(f,x,S,Q){var R=f.ab,N=f.c*x,z=f.C;x=z+x;var $=S,Z=Q;for(Q=f.Ta,S=f.Ua;0<R--;){var re=f.gc[R],de=z,we=x,Le=$,Qe=Z,ut=(Z=Q,$=S,re.Ea);switch(e(de<we),e(we<=re.nc),re.hc){case 2:ya(Le,Qe,(we-de)*ut,Z,$);break;case 0:var He=de,Fe=we,Ie=Z,dt=$,pt=(kt=re).Ea;He==0&&(rc(Le,Qe,null,null,1,Ie,dt),wr(Le,Qe+1,0,0,pt-1,Ie,dt+1),Qe+=pt,dt+=pt,++He);for(var at=1<<kt.b,_t=at-1,Ft=Xt(pt,kt.b),Wt=kt.K,kt=kt.w+(He>>kt.b)*Ft;He<Fe;){var Er=Wt,Fr=kt,kr=1;for(yi(Le,Qe,Ie,dt-pt,1,Ie,dt);kr<pt;){var pr=(kr&~_t)+at;pr>pt&&(pr=pt),(0,Yn[Er[Fr++]>>8&15])(Le,Qe+ +kr,Ie,dt+kr-pt,pr-kr,Ie,dt+kr),kr=pr}Qe+=pt,dt+=pt,++He&_t||(kt+=Ft)}we!=re.nc&&s(Z,$-ut,Z,$+(we-de-1)*ut,ut);break;case 1:for(ut=Le,Fe=Qe,pt=(Le=re.Ea)-(dt=Le&~(Ie=(Qe=1<<re.b)-1)),He=Xt(Le,re.b),at=re.K,re=re.w+(de>>re.b)*He;de<we;){for(_t=at,Ft=re,Wt=new Ut,kt=Fe+dt,Er=Fe+Le;Fe<kt;)qr(_t[Ft++],Wt),Tn(Wt,ut,Fe,Qe,Z,$),Fe+=Qe,$+=Qe;Fe<Er&&(qr(_t[Ft++],Wt),Tn(Wt,ut,Fe,pt,Z,$),Fe+=pt,$+=pt),++de&Ie||(re+=He)}break;case 3:if(Le==Z&&Qe==$&&0<re.b){for(Fe=Z,Le=ut=$+(we-de)*ut-(dt=(we-de)*Xt(re.Ea,re.b)),Qe=Z,Ie=$,He=[],dt=(pt=dt)-1;0<=dt;--dt)He[dt]=Qe[Ie+dt];for(dt=pt-1;0<=dt;--dt)Fe[Le+dt]=He[dt];Ti(re,de,we,Z,ut,Z,$)}else Ti(re,de,we,Le,Qe,Z,$)}$=Q,Z=S}Z!=S&&s(Q,S,$,Z,N)}function nr(f,x){var S=f.V,Q=f.Ba+f.c*f.C,R=x-f.C;if(e(x<=f.l.o),e(16>=R),0<R){var N=f.l,z=f.Ta,$=f.Ua,Z=N.width;if(gt(f,R,S,Q),R=$=[$],e((S=f.C)<(Q=x)),e(N.v<N.va),Q>N.o&&(Q=N.o),S<N.j){var re=N.j-S;S=N.j,R[0]+=re*Z}if(S>=Q?S=0:(R[0]+=4*N.v,N.ka=S-N.j,N.U=N.va-N.v,N.T=Q-S,S=1),S){if($=$[0],11>(S=f.ca).S){var de=S.f.RGBA,we=(Q=S.S,R=N.U,N=N.T,re=de.eb,de.A),Le=N;for(de=de.fb+f.Ma*de.A;0<Le--;){var Qe=z,ut=$,He=R,Fe=re,Ie=de;switch(Q){case dl:Un(Qe,ut,He,Fe,Ie);break;case fl:ka(Qe,ut,He,Fe,Ie);break;case ml:ka(Qe,ut,He,Fe,Ie),ea(Fe,Ie,0,He,1,0);break;case $c:Vo(Qe,ut,He,Fe,Ie);break;case ic:Vr(Qe,ut,He,Fe,Ie,1);break;case Mn:Vr(Qe,ut,He,Fe,Ie,1),ea(Fe,Ie,0,He,1,0);break;case PA:Vr(Qe,ut,He,Fe,Ie,0);break;case ra:Vr(Qe,ut,He,Fe,Ie,0),ea(Fe,Ie,1,He,1,0);break;case gl:Js(Qe,ut,He,Fe,Ie);break;case qo:Js(Qe,ut,He,Fe,Ie),ta(Fe,Ie,He,1,0);break;case nc:_a(Qe,ut,He,Fe,Ie);break;default:e(0)}$+=Z,de+=we}f.Ma+=N}else alert("todo:EmitRescaledRowsYUVA");e(f.Ma<=S.height)}}f.C=x,e(f.C<=f.i)}function sr(f){var x;if(0<f.ua)return 0;for(x=0;x<f.Wb;++x){var S=f.Ya[x].G,Q=f.Ya[x].H;if(0<S[1][Q[1]+0].g||0<S[2][Q[2]+0].g||0<S[3][Q[3]+0].g)return 0}return 1}function jt(f,x,S,Q,R,N){if(f.Z!=0){var z=f.qd,$=f.rd;for(e(es[f.Z]!=null);x<S;++x)es[f.Z](z,$,Q,R,Q,R,N),z=Q,$=R,R+=N;f.qd=z,f.rd=$}}function Yt(f,x){var S=f.l.ma,Q=S.Z==0||S.Z==1?f.l.j:f.C;if(Q=f.C<Q?Q:f.C,e(x<=f.l.o),x>Q){var R=f.l.width,N=S.ca,z=S.tb+R*Q,$=f.V,Z=f.Ba+f.c*Q,re=f.gc;e(f.ab==1),e(re[0].hc==3),Ho(re[0],Q,x,$,Z,N,z),jt(S,Q,x,N,z,R)}f.C=f.Ma=x}function ur(f,x,S,Q,R,N,z){var $=f.$/Q,Z=f.$%Q,re=f.m,de=f.s,we=S+f.$,Le=we;R=S+Q*R;var Qe=S+Q*N,ut=280+de.ua,He=f.Pb?$:16777216,Fe=0<de.ua?de.Wa:null,Ie=de.wc,dt=we<Qe?ht(de,Z,$):null;e(f.C<N),e(Qe<=R);var pt=!1;e:for(;;){for(;pt||we<Qe;){var at=0;if($>=He){var _t=we-S;e((He=f).Pb),He.wd=He.m,He.xd=_t,0<He.s.ua&&ft(He.s.Wa,He.s.vb),He=$+Wc}if(Z&Ie||(dt=ht(de,Z,$)),e(dt!=null),dt.Qb&&(x[we]=dt.qb,pt=!0),!pt)if(Ge(re),dt.jc){at=re,_t=x;var Ft=we,Wt=dt.pd[pe(at)&Ln-1];e(dt.jc),256>Wt.g?(Re(at,at.u+Wt.g),_t[Ft]=Wt.value,at=0):(Re(at,at.u+Wt.g-256),e(256<=Wt.value),at=Wt.value),at==0&&(pt=!0)}else at=Ve(dt.G[0],dt.H[0],re);if(re.h)break;if(pt||256>at){if(!pt)if(dt.nd)x[we]=(dt.qb|at<<8)>>>0;else{if(Ge(re),pt=Ve(dt.G[1],dt.H[1],re),Ge(re),_t=Ve(dt.G[2],dt.H[2],re),Ft=Ve(dt.G[3],dt.H[3],re),re.h)break;x[we]=(Ft<<24|pt<<16|at<<8|_t)>>>0}if(pt=!1,++we,++Z>=Q&&(Z=0,++$,z!=null&&$<=N&&!($%16)&&z(f,$),Fe!=null))for(;Le<we;)at=x[Le++],Fe.X[(506832829*at&4294967295)>>>Fe.Mb]=at}else if(280>at){if(at=Oe(at-256,re),_t=Ve(dt.G[4],dt.H[4],re),Ge(re),_t=Ue(Q,_t=Oe(_t,re)),re.h)break;if(we-S<_t||R-we<at)break e;for(Ft=0;Ft<at;++Ft)x[we+Ft]=x[we+Ft-_t];for(we+=at,Z+=at;Z>=Q;)Z-=Q,++$,z!=null&&$<=N&&!($%16)&&z(f,$);if(e(we<=R),Z&Ie&&(dt=ht(de,Z,$)),Fe!=null)for(;Le<we;)at=x[Le++],Fe.X[(506832829*at&4294967295)>>>Fe.Mb]=at}else{if(!(at<ut))break e;for(pt=at-280,e(Fe!=null);Le<we;)at=x[Le++],Fe.X[(506832829*at&4294967295)>>>Fe.Mb]=at;at=we,e(!(pt>>>(_t=Fe).Xa)),x[at]=_t.X[pt],pt=!0}pt||e(re.h==ye(re))}if(f.Pb&&re.h&&we<R)e(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&ft(f.s.vb,f.s.Wa);else{if(re.h)break e;z!=null&&z(f,$>N?N:$),f.a=0,f.$=we-S}return 1}return f.a=3,0}function Br(f){e(f!=null),f.vc=null,f.yc=null,f.Ya=null;var x=f.Wa;x!=null&&(x.X=null),f.vb=null,e(f!=null)}function Rr(){var f=new eo;return f==null?null:(f.a=0,f.xb=Xc,xt("Predictor","VP8LPredictors"),xt("Predictor","VP8LPredictors_C"),xt("PredictorAdd","VP8LPredictorsAdd"),xt("PredictorAdd","VP8LPredictorsAdd_C"),ya=Lr,Tn=gr,Un=Rt,ka=vt,Js=Cr,_a=Tr,Vo=Dr,fe.VP8LMapColor32b=va,fe.VP8LMapColor8b=TA,f)}function Sr(f,x,S,Q,R){var N=1,z=[f],$=[x],Z=Q.m,re=Q.s,de=null,we=0;e:for(;;){if(S)for(;N&&nt(Z,1);){var Le=z,Qe=$,ut=Q,He=1,Fe=ut.m,Ie=ut.gc[ut.ab],dt=nt(Fe,2);if(ut.Oc&1<<dt)N=0;else{switch(ut.Oc|=1<<dt,Ie.hc=dt,Ie.Ea=Le[0],Ie.nc=Qe[0],Ie.K=[null],++ut.ab,e(4>=ut.ab),dt){case 0:case 1:Ie.b=nt(Fe,3)+2,He=Sr(Xt(Ie.Ea,Ie.b),Xt(Ie.nc,Ie.b),0,ut,Ie.K),Ie.K=Ie.K[0];break;case 3:var pt,at=nt(Fe,8)+1,_t=16<at?0:4<at?1:2<at?2:3;if(Le[0]=Xt(Ie.Ea,_t),Ie.b=_t,pt=He=Sr(at,1,0,ut,Ie.K)){var Ft,Wt=at,kt=Ie,Er=1<<(8>>kt.b),Fr=c(Er);if(Fr==null)pt=0;else{var kr=kt.K[0],pr=kt.w;for(Fr[0]=kt.K[0][0],Ft=1;Ft<1*Wt;++Ft)Fr[Ft]=bt(kr[pr+Ft],Fr[Ft-1]);for(;Ft<4*Er;++Ft)Fr[Ft]=0;kt.K[0]=null,kt.K[0]=Fr,pt=1}}He=pt;break;case 2:break;default:e(0)}N=He}}if(z=z[0],$=$[0],N&&nt(Z,1)&&!(N=1<=(we=nt(Z,4))&&11>=we)){Q.a=3;break e}var ei;if(ei=N)t:{var Xr,Ir,Bi,Ji=Q,si=z,hi=$,zr=we,en=S,li=Ji.m,ti=Ji.s,pi=[null],ri=1,on=0,us=ac[zr];r:for(;;){if(en&&nt(li,1)){var tn=nt(li,3)+2,Ba=Xt(si,tn),Ko=Xt(hi,tn),oo=Ba*Ko;if(!Sr(Ba,Ko,0,Ji,pi))break r;for(pi=pi[0],ti.xc=tn,Xr=0;Xr<oo;++Xr){var _n=pi[Xr]>>8&65535;pi[Xr]=_n,_n>=ri&&(ri=_n+1)}}if(li.h)break r;for(Ir=0;5>Ir;++Ir){var gi=sc[Ir];!Ir&&0<zr&&(gi+=1<<zr),on<gi&&(on=gi)}var ks=p(ri*us,Ae),hs=ri,na=p(hs,_e);if(na==null)var OA=null;else e(65536>=hs),OA=na;var ps=c(on);if(OA==null||ps==null||ks==null){Ji.a=1;break r}var Yu=ks;for(Xr=Bi=0;Xr<ri;++Xr){var Ca=OA[Xr],Si=Ca.G,RA=Ca.H,fp=0,Ao=1,zA=0;for(Ir=0;5>Ir;++Ir){gi=sc[Ir],Si[Ir]=Yu,RA[Ir]=Bi,!Ir&&0<zr&&(gi+=1<<zr);n:{var wl,Jc=gi,eu=Ji,tu=ps,Wf=Yu,vy=Bi,ru=0,HA=eu.m,gp=nt(HA,1);if(l(tu,0,0,Jc),gp){var Zf=nt(HA,1)+1,Xf=nt(HA,1),bl=nt(HA,Xf==0?1:8);tu[bl]=1,Zf==2&&(tu[bl=nt(HA,8)]=1);var Ju=1}else{var cc=c(19),iu=nt(HA,4)+4;if(19<iu){eu.a=3;var xl=0;break n}for(wl=0;wl<iu;++wl)cc[cs[wl]]=nt(HA,3);var eh=void 0,uc=void 0,Yf=eu,ts=cc,Wo=Jc,th=tu,rh=0,Sa=Yf.m,Jf=8,nu=p(128,Ae);i:for(;ce(nu,0,7,ts,19);){if(nt(Sa,1)){var _y=2+2*nt(Sa,3);if((eh=2+nt(Sa,_y))>Wo)break i}else eh=Wo;for(uc=0;uc<Wo&&eh--;){Ge(Sa);var mp=nu[0+(127&pe(Sa))];Re(Sa,Sa.u+mp.g);var Bl=mp.value;if(16>Bl)th[uc++]=Bl,Bl!=0&&(Jf=Bl);else{var eg=Bl==16,tg=Bl-16,yp=yl[tg],vp=nt(Sa,Kc[tg])+yp;if(uc+vp>Wo)break i;for(var _p=eg?Jf:0;0<vp--;)th[uc++]=_p}}rh=1;break i}rh||(Yf.a=3),Ju=rh}(Ju=Ju&&!HA.h)&&(ru=ce(Wf,vy,8,tu,Jc)),Ju&&ru!=0?xl=ru:(eu.a=3,xl=0)}if(xl==0)break r;if(Ao&&Xu[Ir]==1&&(Ao=Yu[Bi].g==0),fp+=Yu[Bi].g,Bi+=xl,3>=Ir){var Zo,ds=ps[0];for(Zo=1;Zo<gi;++Zo)ps[Zo]>ds&&(ds=ps[Zo]);zA+=ds}}if(Ca.nd=Ao,Ca.Qb=0,Ao&&(Ca.qb=(Si[3][RA[3]+0].value<<24|Si[1][RA[1]+0].value<<16|Si[2][RA[2]+0].value)>>>0,fp==0&&256>Si[0][RA[0]+0].value&&(Ca.Qb=1,Ca.qb+=Si[0][RA[0]+0].value<<8)),Ca.jc=!Ca.Qb&&6>zA,Ca.jc){var su,Xo=Ca;for(su=0;su<Ln;++su){var Yo=su,VA=Xo.pd[Yo],ih=Xo.G[0][Xo.H[0]+Yo];256<=ih.value?(VA.g=ih.g+256,VA.value=ih.value):(VA.g=0,VA.value=0,Yo>>=lt(ih,8,VA),Yo>>=lt(Xo.G[1][Xo.H[1]+Yo],16,VA),Yo>>=lt(Xo.G[2][Xo.H[2]+Yo],0,VA),lt(Xo.G[3][Xo.H[3]+Yo],24,VA))}}}ti.vc=pi,ti.Wb=ri,ti.Ya=OA,ti.yc=ks,ei=1;break t}ei=0}if(!(N=ei)){Q.a=3;break e}if(0<we){if(re.ua=1<<we,!Jt(re.Wa,we)){Q.a=1,N=0;break e}}else re.ua=0;var wp=Q,rg=z,bp=$,hc=wp.s,nh=hc.xc;if(wp.c=rg,wp.i=bp,hc.md=Xt(rg,nh),hc.wc=nh==0?-1:(1<<nh)-1,S){Q.xb=Qs;break e}if((de=c(z*$))==null){Q.a=1,N=0;break e}N=(N=ur(Q,de,0,z,$,$,null))&&!Z.h;break e}return N?(R!=null?R[0]=de:(e(de==null),e(S)),Q.$=0,S||Br(re)):Br(re),N}function Te(f,x){var S=f.c*f.i,Q=S+x+16*x;return e(f.c<=x),f.V=c(Q),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+S+x,1)}function Qt(f,x){var S=f.C,Q=x-S,R=f.V,N=f.Ba+f.c*S;for(e(x<=f.l.o);0<Q;){var z=16<Q?16:Q,$=f.l.ma,Z=f.l.width,re=Z*z,de=$.ca,we=$.tb+Z*S,Le=f.Ta,Qe=f.Ua;gt(f,z,R,N),Zt(Le,Qe,de,we,re),jt($,S,S+z,de,we,Z),Q-=z,R+=z*f.c,S+=z}e(S==x),f.C=f.Ma=x}function yt(){this.ub=this.yd=this.td=this.Rb=0}function vr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Nr(){this.Fb=this.Bb=this.Cb=0,this.Zb=c(4),this.Lb=c(4)}function di(){this.Yb=function(){var f=[];return function x(S,Q,R){for(var N=R[Q],z=0;z<N&&(S.push(R.length>Q+1?[]:0),!(R.length<Q+1));z++)x(S[z],Q+1,R)}(f,0,[3,11]),f}()}function Ii(){this.jb=c(3),this.Wc=a([4,8],di),this.Xc=a([4,17],di)}function qn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new c(4),this.od=new c(4)}function Hi(){this.ld=this.La=this.dd=this.tc=0}function Wi(){this.Na=this.la=0}function ii(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Co(){this.ad=c(384),this.Za=0,this.Ob=c(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function mA(){this.uc=this.M=this.Nb=0,this.wa=Array(new Hi),this.Y=0,this.ya=Array(new Co),this.aa=0,this.l=new yA}function Zi(){this.y=c(16),this.f=c(8),this.ea=c(8)}function Dn(){this.cb=this.a=0,this.sc="",this.m=new Bt,this.Od=new yt,this.Kc=new vr,this.ed=new qn,this.Qa=new Nr,this.Ic=this.$c=this.Aa=0,this.D=new mA,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=p(8,Bt),this.ia=0,this.pb=p(4,ii),this.Pa=new Ii,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Zi),this.Hd=0,this.rb=Array(new Wi),this.sb=0,this.wa=Array(new Hi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Co),this.L=this.aa=0,this.gd=a([4,2],Hi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function yA(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function $n(){var f=new Dn;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,MA||(MA=mi)),f}function Wr(f,x,S){return f.a==0&&(f.a=x,f.sc=S,f.cb=0),0}function So(f,x,S){return 3<=S&&f[x+0]==157&&f[x+1]==1&&f[x+2]==42}function Ta(f,x){if(f==null)return 0;if(f.a=0,f.sc="OK",x==null)return Wr(f,2,"null VP8Io passed to VP8GetHeaders()");var S=x.data,Q=x.w,R=x.ha;if(4>R)return Wr(f,7,"Truncated header.");var N=S[Q+0]|S[Q+1]<<8|S[Q+2]<<16,z=f.Od;if(z.Rb=!(1&N),z.td=N>>1&7,z.yd=N>>4&1,z.ub=N>>5,3<z.td)return Wr(f,3,"Incorrect keyframe parameters.");if(!z.yd)return Wr(f,4,"Frame not displayable.");Q+=3,R-=3;var $=f.Kc;if(z.Rb){if(7>R)return Wr(f,7,"cannot parse picture header");if(!So(S,Q,R))return Wr(f,3,"Bad code word");$.c=16383&(S[Q+4]<<8|S[Q+3]),$.Td=S[Q+4]>>6,$.i=16383&(S[Q+6]<<8|S[Q+5]),$.Ud=S[Q+6]>>6,Q+=7,R-=7,f.za=$.c+15>>4,f.Ub=$.i+15>>4,x.width=$.c,x.height=$.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,l((N=f.Pa).jb,0,255,N.jb.length),e((N=f.Qa)!=null),N.Cb=0,N.Bb=0,N.Fb=1,l(N.Zb,0,0,N.Zb.length),l(N.Lb,0,0,N.Lb)}if(z.ub>R)return Wr(f,7,"bad partition length");et(N=f.m,S,Q,z.ub),Q+=z.ub,R-=z.ub,z.Rb&&($.Ld=st(N),$.Kd=st(N)),$=f.Qa;var Z,re=f.Pa;if(e(N!=null),e($!=null),$.Cb=st(N),$.Cb){if($.Bb=st(N),st(N)){for($.Fb=st(N),Z=0;4>Z;++Z)$.Zb[Z]=st(N)?rt(N,7):0;for(Z=0;4>Z;++Z)$.Lb[Z]=st(N)?rt(N,6):0}if($.Bb)for(Z=0;3>Z;++Z)re.jb[Z]=st(N)?Je(N,8):255}else $.Bb=0;if(N.Ka)return Wr(f,3,"cannot parse segment header");if(($=f.ed).zd=st(N),$.Tb=Je(N,6),$.wb=Je(N,3),$.Pc=st(N),$.Pc&&st(N)){for(re=0;4>re;++re)st(N)&&($.vd[re]=rt(N,6));for(re=0;4>re;++re)st(N)&&($.od[re]=rt(N,6))}if(f.L=$.Tb==0?0:$.zd?1:2,N.Ka)return Wr(f,3,"cannot parse filter header");var de=R;if(R=Z=Q,Q=Z+de,$=de,f.Xb=(1<<Je(f.m,2))-1,de<3*(re=f.Xb))S=7;else{for(Z+=3*re,$-=3*re,de=0;de<re;++de){var we=S[R+0]|S[R+1]<<8|S[R+2]<<16;we>$&&(we=$),et(f.Jc[+de],S,Z,we),Z+=we,$-=we,R+=3}et(f.Jc[+re],S,Z,$),S=Z<Q?0:5}if(S!=0)return Wr(f,S,"cannot parse partitions");for(S=Je(Z=f.m,7),R=st(Z)?rt(Z,4):0,Q=st(Z)?rt(Z,4):0,$=st(Z)?rt(Z,4):0,re=st(Z)?rt(Z,4):0,Z=st(Z)?rt(Z,4):0,de=f.Qa,we=0;4>we;++we){if(de.Cb){var Le=de.Zb[we];de.Fb||(Le+=S)}else{if(0<we){f.pb[we]=f.pb[0];continue}Le=S}var Qe=f.pb[we];Qe.Sc[0]=oc[Xn(Le+R,127)],Qe.Sc[1]=Ac[Xn(Le+0,127)],Qe.Eb[0]=2*oc[Xn(Le+Q,127)],Qe.Eb[1]=101581*Ac[Xn(Le+$,127)]>>16,8>Qe.Eb[1]&&(Qe.Eb[1]=8),Qe.Qc[0]=oc[Xn(Le+re,117)],Qe.Qc[1]=Ac[Xn(Le+Z,127)],Qe.lc=Le+Z}if(!z.Rb)return Wr(f,4,"Not a key frame.");for(st(N),z=f.Pa,S=0;4>S;++S){for(R=0;8>R;++R)for(Q=0;3>Q;++Q)for($=0;11>$;++$)re=ot(N,_l[S][R][Q][$])?Je(N,8):Ar[S][R][Q][$],z.Wc[S][R].Yb[Q][$]=re;for(R=0;17>R;++R)z.Xc[S][R]=z.Wc[S][Zc[R]]}return f.kc=st(N),f.kc&&(f.Bd=Je(N,8)),f.cb=1}function mi(f,x,S,Q,R,N,z){var $=x[R].Yb[S];for(S=0;16>R;++R){if(!ot(f,$[S+0]))return R;for(;!ot(f,$[S+1]);)if($=x[++R].Yb[0],S=0,R==16)return 16;var Z=x[R+1].Yb;if(ot(f,$[S+2])){var re=f,de=0;if(ot(re,(Le=$)[(we=S)+3]))if(ot(re,Le[we+6])){for($=0,we=2*(de=ot(re,Le[we+8]))+(Le=ot(re,Le[we+9+de])),de=0,Le=dp[we];Le[$];++$)de+=de+ot(re,Le[$]);de+=3+(8<<we)}else ot(re,Le[we+7])?(de=7+2*ot(re,165),de+=ot(re,145)):de=5+ot(re,159);else de=ot(re,Le[we+4])?3+ot(re,Le[we+5]):2;$=Z[2]}else de=1,$=Z[1];Z=z+zn[R],0>(re=f).b&&tt(re);var we,Le=re.b,Qe=(we=re.Ca>>1)-(re.I>>Le)>>31;--re.b,re.Ca+=Qe,re.Ca|=1,re.I-=(we+1&Qe)<<Le,N[Z]=((de^Qe)-Qe)*Q[(0<R)+0]}return 16}function Zr(f){var x=f.rb[f.sb-1];x.la=0,x.Na=0,l(f.zc,0,0,f.zc.length),f.ja=0}function Ua(f,x){if(f==null)return 0;if(x==null)return Wr(f,2,"NULL VP8Io parameter in VP8Decode().");if(!f.cb&&!Ta(f,x))return 0;if(e(f.cb),x.ac==null||x.ac(x)){x.ob&&(f.L=0);var S=H[f.L];if(f.L==2?(f.yb=0,f.zb=0):(f.yb=x.v-S>>4,f.zb=x.j-S>>4,0>f.yb&&(f.yb=0),0>f.zb&&(f.zb=0)),f.Va=x.o+15+S>>4,f.Hb=x.va+15+S>>4,f.Hb>f.za&&(f.Hb=f.za),f.Va>f.Ub&&(f.Va=f.Ub),0<f.L){var Q=f.ed;for(S=0;4>S;++S){var R;if(f.Qa.Cb){var N=f.Qa.Lb[S];f.Qa.Fb||(N+=Q.Tb)}else N=Q.Tb;for(R=0;1>=R;++R){var z=f.gd[S][R],$=N;if(Q.Pc&&($+=Q.vd[0],R&&($+=Q.od[0])),0<($=0>$?0:63<$?63:$)){var Z=$;0<Q.wb&&(Z=4<Q.wb?Z>>2:Z>>1)>9-Q.wb&&(Z=9-Q.wb),1>Z&&(Z=1),z.dd=Z,z.tc=2*$+Z,z.ld=40<=$?2:15<=$?1:0}else z.tc=0;z.La=R}}}S=0}else Wr(f,6,"Frame setup failed"),S=f.a;if(S=S==0){if(S){f.$c=0,0<f.Aa||(f.Ic=se);e:{S=f.Ic,Q=4*(Z=f.za);var re=32*Z,de=Z+1,we=0<f.L?Z*(0<f.Aa?2:1):0,Le=(f.Aa==2?2:1)*Z;if((z=Q+832+(R=3*(16*S+H[f.L])/2*re)+(N=f.Fa!=null&&0<f.Fa.length?f.Kc.c*f.Kc.i:0))!=z)S=0;else{if(z>f.Vb){if(f.Vb=0,f.Ec=c(z),f.Fc=0,f.Ec==null){S=Wr(f,1,"no memory during frame initialization.");break e}f.Vb=z}z=f.Ec,$=f.Fc,f.Ac=z,f.Bc=$,$+=Q,f.Gd=p(re,Zi),f.Hd=0,f.rb=p(de+1,Wi),f.sb=1,f.wa=we?p(we,Hi):null,f.Y=0,f.D.Nb=0,f.D.wa=f.wa,f.D.Y=f.Y,0<f.Aa&&(f.D.Y+=Z),e(!0),f.oc=z,f.pc=$,$+=832,f.ya=p(Le,Co),f.aa=0,f.D.ya=f.ya,f.D.aa=f.aa,f.Aa==2&&(f.D.aa+=Z),f.R=16*Z,f.B=8*Z,Z=(re=H[f.L])*f.R,re=re/2*f.B,f.sa=z,f.ta=$+Z,f.qa=f.sa,f.ra=f.ta+16*S*f.R+re,f.Ha=f.qa,f.Ia=f.ra+8*S*f.B+re,f.$c=0,$+=R,f.mb=N?z:null,f.nb=N?$:null,e($+N<=f.Fc+f.Vb),Zr(f),l(f.Ac,f.Bc,0,Q),S=1}}if(S){if(x.ka=0,x.y=f.sa,x.O=f.ta,x.f=f.qa,x.N=f.ra,x.ea=f.Ha,x.Vd=f.Ia,x.fa=f.R,x.Rc=f.B,x.F=null,x.J=0,!Gt){for(S=-255;255>=S;++S)hl[255+S]=0>S?-S:S;for(S=-1020;1020>=S;++S)Oa[1020+S]=-128>S?-128:127<S?127:S;for(S=-112;112>=S;++S)Go[112+S]=-16>S?-16:15<S?15:S;for(S=-255;510>=S;++S)qc[255+S]=0>S?0:255<S?255:S;Gt=1}Us=pa,Nn=Zl,$i=vA,On=_A,wa=Fo,Da=Zs,so=SA,jo=Ts,Rn=Gc,Na=Al,Pn=jc,Ki=EA,Ps=ll,ai=tc,oi=CA,Vi=Is,ji=ga,ba=ol,ui[0]=Fs,ui[1]=Lo,ui[2]=ec,ui[3]=al,ui[4]=da,ui[5]=mn,ui[6]=Po,ui[7]=Za,ui[8]=Mo,ui[9]=wA,xa[0]=Yl,xa[1]=Vc,xa[2]=Xs,xa[3]=Wa,xa[4]=gn,xa[5]=Jl,xa[6]=Uo,ia[0]=Qr,ia[1]=Xl,ia[2]=bA,ia[3]=fa,ia[4]=Xi,ia[5]=xA,ia[6]=yn,S=1}else S=0}S&&(S=function(Qe,ut){for(Qe.M=0;Qe.M<Qe.Va;++Qe.M){var He,Fe=Qe.Jc[Qe.M&Qe.Xb],Ie=Qe.m,dt=Qe;for(He=0;He<dt.za;++He){var pt=Ie,at=dt,_t=at.Ac,Ft=at.Bc+4*He,Wt=at.zc,kt=at.ya[at.aa+He];if(at.Qa.Bb?kt.$b=ot(pt,at.Pa.jb[0])?2+ot(pt,at.Pa.jb[2]):ot(pt,at.Pa.jb[1]):kt.$b=0,at.kc&&(kt.Ad=ot(pt,at.Bd)),kt.Za=!ot(pt,145)+0,kt.Za){var Er=kt.Ob,Fr=0;for(at=0;4>at;++at){var kr,pr=Wt[0+at];for(kr=0;4>kr;++kr){pr=_r[_t[Ft+kr]][pr];for(var ei=vl[ot(pt,pr[0])];0<ei;)ei=vl[2*ei+ot(pt,pr[ei])];pr=-ei,_t[Ft+kr]=pr}s(Er,Fr,_t,Ft,4),Fr+=4,Wt[0+at]=pr}}else pr=ot(pt,156)?ot(pt,128)?1:3:ot(pt,163)?2:0,kt.Ob[0]=pr,l(_t,Ft,pr,4),l(Wt,0,pr,4);kt.Dd=ot(pt,142)?ot(pt,114)?ot(pt,183)?1:3:2:0}if(dt.m.Ka)return Wr(Qe,7,"Premature end-of-partition0 encountered.");for(;Qe.ja<Qe.za;++Qe.ja){if(dt=Fe,pt=(Ie=Qe).rb[Ie.sb-1],_t=Ie.rb[Ie.sb+Ie.ja],He=Ie.ya[Ie.aa+Ie.ja],Ft=Ie.kc?He.Ad:0)pt.la=_t.la=0,He.Za||(pt.Na=_t.Na=0),He.Hc=0,He.Gc=0,He.ia=0;else{var Xr,Ir;if(pt=_t,_t=dt,Ft=Ie.Pa.Xc,Wt=Ie.ya[Ie.aa+Ie.ja],kt=Ie.pb[Wt.$b],at=Wt.ad,Er=0,Fr=Ie.rb[Ie.sb-1],pr=kr=0,l(at,Er,0,384),Wt.Za)var Bi=0,Ji=Ft[3];else{ei=c(16);var si=pt.Na+Fr.Na;if(si=MA(_t,Ft[1],si,kt.Eb,0,ei,0),pt.Na=Fr.Na=(0<si)+0,1<si)Us(ei,0,at,Er);else{var hi=ei[0]+3>>3;for(ei=0;256>ei;ei+=16)at[Er+ei]=hi}Bi=1,Ji=Ft[0]}var zr=15&pt.la,en=15&Fr.la;for(ei=0;4>ei;++ei){var li=1&en;for(hi=Ir=0;4>hi;++hi)zr=zr>>1|(li=(si=MA(_t,Ji,si=li+(1&zr),kt.Sc,Bi,at,Er))>Bi)<<7,Ir=Ir<<2|(3<si?3:1<si?2:at[Er+0]!=0),Er+=16;zr>>=4,en=en>>1|li<<7,kr=(kr<<8|Ir)>>>0}for(Ji=zr,Bi=en>>4,Xr=0;4>Xr;Xr+=2){for(Ir=0,zr=pt.la>>4+Xr,en=Fr.la>>4+Xr,ei=0;2>ei;++ei){for(li=1&en,hi=0;2>hi;++hi)si=li+(1&zr),zr=zr>>1|(li=0<(si=MA(_t,Ft[2],si,kt.Qc,0,at,Er)))<<3,Ir=Ir<<2|(3<si?3:1<si?2:at[Er+0]!=0),Er+=16;zr>>=2,en=en>>1|li<<5}pr|=Ir<<4*Xr,Ji|=zr<<4<<Xr,Bi|=(240&en)<<Xr}pt.la=Ji,Fr.la=Bi,Wt.Hc=kr,Wt.Gc=pr,Wt.ia=43690&pr?0:kt.ia,Ft=!(kr|pr)}if(0<Ie.L&&(Ie.wa[Ie.Y+Ie.ja]=Ie.gd[He.$b][He.Za],Ie.wa[Ie.Y+Ie.ja].La|=!Ft),dt.Ka)return Wr(Qe,7,"Premature end-of-file encountered.")}if(Zr(Qe),Ie=ut,dt=1,He=(Fe=Qe).D,pt=0<Fe.L&&Fe.M>=Fe.zb&&Fe.M<=Fe.Va,Fe.Aa==0)e:{if(He.M=Fe.M,He.uc=pt,cl(Fe,He),dt=1,He=(Ir=Fe.D).Nb,pt=(pr=H[Fe.L])*Fe.R,_t=pr/2*Fe.B,ei=16*He*Fe.R,hi=8*He*Fe.B,Ft=Fe.sa,Wt=Fe.ta-pt+ei,kt=Fe.qa,at=Fe.ra-_t+hi,Er=Fe.Ha,Fr=Fe.Ia-_t+hi,en=(zr=Ir.M)==0,kr=zr>=Fe.Va-1,Fe.Aa==2&&cl(Fe,Ir),Ir.uc)for(li=(si=Fe).D.M,e(si.D.uc),Ir=si.yb;Ir<si.Hb;++Ir){Bi=Ir,Ji=li;var ti=(pi=(gi=si).D).Nb;Xr=gi.R;var pi=pi.wa[pi.Y+Bi],ri=gi.sa,on=gi.ta+16*ti*Xr+16*Bi,us=pi.dd,tn=pi.tc;if(tn!=0)if(e(3<=tn),gi.L==1)0<Bi&&Vi(ri,on,Xr,tn+4),pi.La&&ba(ri,on,Xr,tn),0<Ji&&oi(ri,on,Xr,tn+4),pi.La&&ji(ri,on,Xr,tn);else{var Ba=gi.B,Ko=gi.qa,oo=gi.ra+8*ti*Ba+8*Bi,_n=gi.Ha,gi=gi.Ia+8*ti*Ba+8*Bi;ti=pi.ld,0<Bi&&(jo(ri,on,Xr,tn+4,us,ti),Na(Ko,oo,_n,gi,Ba,tn+4,us,ti)),pi.La&&(Ki(ri,on,Xr,tn,us,ti),ai(Ko,oo,_n,gi,Ba,tn,us,ti)),0<Ji&&(so(ri,on,Xr,tn+4,us,ti),Rn(Ko,oo,_n,gi,Ba,tn+4,us,ti)),pi.La&&(Pn(ri,on,Xr,tn,us,ti),Ps(Ko,oo,_n,gi,Ba,tn,us,ti))}}if(Fe.ia&&alert("todo:DitherRow"),Ie.put!=null){if(Ir=16*zr,zr=16*(zr+1),en?(Ie.y=Fe.sa,Ie.O=Fe.ta+ei,Ie.f=Fe.qa,Ie.N=Fe.ra+hi,Ie.ea=Fe.Ha,Ie.W=Fe.Ia+hi):(Ir-=pr,Ie.y=Ft,Ie.O=Wt,Ie.f=kt,Ie.N=at,Ie.ea=Er,Ie.W=Fr),kr||(zr-=pr),zr>Ie.o&&(zr=Ie.o),Ie.F=null,Ie.J=null,Fe.Fa!=null&&0<Fe.Fa.length&&Ir<zr&&(Ie.J=IA(Fe,Ie,Ir,zr-Ir),Ie.F=Fe.mb,Ie.F==null&&Ie.F.length==0)){dt=Wr(Fe,3,"Could not decode alpha data.");break e}Ir<Ie.j&&(pr=Ie.j-Ir,Ir=Ie.j,e(!(1&pr)),Ie.O+=Fe.R*pr,Ie.N+=Fe.B*(pr>>1),Ie.W+=Fe.B*(pr>>1),Ie.F!=null&&(Ie.J+=Ie.width*pr)),Ir<zr&&(Ie.O+=Ie.v,Ie.N+=Ie.v>>1,Ie.W+=Ie.v>>1,Ie.F!=null&&(Ie.J+=Ie.v),Ie.ka=Ir-Ie.j,Ie.U=Ie.va-Ie.v,Ie.T=zr-Ir,dt=Ie.put(Ie))}He+1!=Fe.Ic||kr||(s(Fe.sa,Fe.ta-pt,Ft,Wt+16*Fe.R,pt),s(Fe.qa,Fe.ra-_t,kt,at+8*Fe.B,_t),s(Fe.Ha,Fe.Ia-_t,Er,Fr+8*Fe.B,_t))}if(!dt)return Wr(Qe,6,"Output aborted.")}return 1}(f,x)),x.bc!=null&&x.bc(x),S&=1}return S?(f.cb=0,S):0}function ci(f,x,S,Q,R){R=f[x+S+32*Q]+(R>>3),f[x+S+32*Q]=-256&R?0>R?0:255:R}function Pa(f,x,S,Q,R,N){ci(f,x,0,S,Q+R),ci(f,x,1,S,Q+N),ci(f,x,2,S,Q-N),ci(f,x,3,S,Q-R)}function Ci(f){return(20091*f>>16)+f}function Eo(f,x,S,Q){var R,N=0,z=c(16);for(R=0;4>R;++R){var $=f[x+0]+f[x+8],Z=f[x+0]-f[x+8],re=(35468*f[x+4]>>16)-Ci(f[x+12]),de=Ci(f[x+4])+(35468*f[x+12]>>16);z[N+0]=$+de,z[N+1]=Z+re,z[N+2]=Z-re,z[N+3]=$-de,N+=4,x++}for(R=N=0;4>R;++R)$=(f=z[N+0]+4)+z[N+8],Z=f-z[N+8],re=(35468*z[N+4]>>16)-Ci(z[N+12]),ci(S,Q,0,0,$+(de=Ci(z[N+4])+(35468*z[N+12]>>16))),ci(S,Q,1,0,Z+re),ci(S,Q,2,0,Z-re),ci(S,Q,3,0,$-de),N++,Q+=32}function Zs(f,x,S,Q){var R=f[x+0]+4,N=35468*f[x+4]>>16,z=Ci(f[x+4]),$=35468*f[x+1]>>16;Pa(S,Q,0,R+z,f=Ci(f[x+1]),$),Pa(S,Q,1,R+N,f,$),Pa(S,Q,2,R-N,f,$),Pa(S,Q,3,R-z,f,$)}function Zl(f,x,S,Q,R){Eo(f,x,S,Q),R&&Eo(f,x+16,S,Q+4)}function vA(f,x,S,Q){Nn(f,x+0,S,Q,1),Nn(f,x+32,S,Q+128,1)}function _A(f,x,S,Q){var R;for(f=f[x+0]+4,R=0;4>R;++R)for(x=0;4>x;++x)ci(S,Q,x,R,f)}function Fo(f,x,S,Q){f[x+0]&&On(f,x+0,S,Q),f[x+16]&&On(f,x+16,S,Q+4),f[x+32]&&On(f,x+32,S,Q+128),f[x+48]&&On(f,x+48,S,Q+128+4)}function pa(f,x,S,Q){var R,N=c(16);for(R=0;4>R;++R){var z=f[x+0+R]+f[x+12+R],$=f[x+4+R]+f[x+8+R],Z=f[x+4+R]-f[x+8+R],re=f[x+0+R]-f[x+12+R];N[0+R]=z+$,N[8+R]=z-$,N[4+R]=re+Z,N[12+R]=re-Z}for(R=0;4>R;++R)z=(f=N[0+4*R]+3)+N[3+4*R],$=N[1+4*R]+N[2+4*R],Z=N[1+4*R]-N[2+4*R],re=f-N[3+4*R],S[Q+0]=z+$>>3,S[Q+16]=re+Z>>3,S[Q+32]=z-$>>3,S[Q+48]=re-Z>>3,Q+=64}function Io(f,x,S){var Q,R=x-32,N=ls,z=255-f[R-1];for(Q=0;Q<S;++Q){var $,Z=N,re=z+f[x-1];for($=0;$<S;++$)f[x+$]=Z[re+f[R+$]];x+=32}}function Lo(f,x){Io(f,x,4)}function Xl(f,x){Io(f,x,8)}function Vc(f,x){Io(f,x,16)}function Xs(f,x){var S;for(S=0;16>S;++S)s(f,x+32*S,f,x-32,16)}function Wa(f,x){var S;for(S=16;0<S;--S)l(f,x,f[x-1],16),x+=32}function To(f,x,S){var Q;for(Q=0;16>Q;++Q)l(x,S+32*Q,f,16)}function Yl(f,x){var S,Q=16;for(S=0;16>S;++S)Q+=f[x-1+32*S]+f[x+S-32];To(Q>>5,f,x)}function gn(f,x){var S,Q=8;for(S=0;16>S;++S)Q+=f[x-1+32*S];To(Q>>4,f,x)}function Jl(f,x){var S,Q=8;for(S=0;16>S;++S)Q+=f[x+S-32];To(Q>>4,f,x)}function Uo(f,x){To(128,f,x)}function Ur(f,x,S){return f+2*x+S+2>>2}function ec(f,x){var S,Q=x-32;for(Q=new Uint8Array([Ur(f[Q-1],f[Q+0],f[Q+1]),Ur(f[Q+0],f[Q+1],f[Q+2]),Ur(f[Q+1],f[Q+2],f[Q+3]),Ur(f[Q+2],f[Q+3],f[Q+4])]),S=0;4>S;++S)s(f,x+32*S,Q,0,Q.length)}function al(f,x){var S=f[x-1],Q=f[x-1+32],R=f[x-1+64],N=f[x-1+96];Ct(f,x+0,16843009*Ur(f[x-1-32],S,Q)),Ct(f,x+32,16843009*Ur(S,Q,R)),Ct(f,x+64,16843009*Ur(Q,R,N)),Ct(f,x+96,16843009*Ur(R,N,N))}function Fs(f,x){var S,Q=4;for(S=0;4>S;++S)Q+=f[x+S-32]+f[x-1+32*S];for(Q>>=3,S=0;4>S;++S)l(f,x+32*S,Q,4)}function da(f,x){var S=f[x-1+0],Q=f[x-1+32],R=f[x-1+64],N=f[x-1-32],z=f[x+0-32],$=f[x+1-32],Z=f[x+2-32],re=f[x+3-32];f[x+0+96]=Ur(Q,R,f[x-1+96]),f[x+1+96]=f[x+0+64]=Ur(S,Q,R),f[x+2+96]=f[x+1+64]=f[x+0+32]=Ur(N,S,Q),f[x+3+96]=f[x+2+64]=f[x+1+32]=f[x+0+0]=Ur(z,N,S),f[x+3+64]=f[x+2+32]=f[x+1+0]=Ur($,z,N),f[x+3+32]=f[x+2+0]=Ur(Z,$,z),f[x+3+0]=Ur(re,Z,$)}function Po(f,x){var S=f[x+1-32],Q=f[x+2-32],R=f[x+3-32],N=f[x+4-32],z=f[x+5-32],$=f[x+6-32],Z=f[x+7-32];f[x+0+0]=Ur(f[x+0-32],S,Q),f[x+1+0]=f[x+0+32]=Ur(S,Q,R),f[x+2+0]=f[x+1+32]=f[x+0+64]=Ur(Q,R,N),f[x+3+0]=f[x+2+32]=f[x+1+64]=f[x+0+96]=Ur(R,N,z),f[x+3+32]=f[x+2+64]=f[x+1+96]=Ur(N,z,$),f[x+3+64]=f[x+2+96]=Ur(z,$,Z),f[x+3+96]=Ur($,Z,Z)}function mn(f,x){var S=f[x-1+0],Q=f[x-1+32],R=f[x-1+64],N=f[x-1-32],z=f[x+0-32],$=f[x+1-32],Z=f[x+2-32],re=f[x+3-32];f[x+0+0]=f[x+1+64]=N+z+1>>1,f[x+1+0]=f[x+2+64]=z+$+1>>1,f[x+2+0]=f[x+3+64]=$+Z+1>>1,f[x+3+0]=Z+re+1>>1,f[x+0+96]=Ur(R,Q,S),f[x+0+64]=Ur(Q,S,N),f[x+0+32]=f[x+1+96]=Ur(S,N,z),f[x+1+32]=f[x+2+96]=Ur(N,z,$),f[x+2+32]=f[x+3+96]=Ur(z,$,Z),f[x+3+32]=Ur($,Z,re)}function Za(f,x){var S=f[x+0-32],Q=f[x+1-32],R=f[x+2-32],N=f[x+3-32],z=f[x+4-32],$=f[x+5-32],Z=f[x+6-32],re=f[x+7-32];f[x+0+0]=S+Q+1>>1,f[x+1+0]=f[x+0+64]=Q+R+1>>1,f[x+2+0]=f[x+1+64]=R+N+1>>1,f[x+3+0]=f[x+2+64]=N+z+1>>1,f[x+0+32]=Ur(S,Q,R),f[x+1+32]=f[x+0+96]=Ur(Q,R,N),f[x+2+32]=f[x+1+96]=Ur(R,N,z),f[x+3+32]=f[x+2+96]=Ur(N,z,$),f[x+3+64]=Ur(z,$,Z),f[x+3+96]=Ur($,Z,re)}function wA(f,x){var S=f[x-1+0],Q=f[x-1+32],R=f[x-1+64],N=f[x-1+96];f[x+0+0]=S+Q+1>>1,f[x+2+0]=f[x+0+32]=Q+R+1>>1,f[x+2+32]=f[x+0+64]=R+N+1>>1,f[x+1+0]=Ur(S,Q,R),f[x+3+0]=f[x+1+32]=Ur(Q,R,N),f[x+3+32]=f[x+1+64]=Ur(R,N,N),f[x+3+64]=f[x+2+64]=f[x+0+96]=f[x+1+96]=f[x+2+96]=f[x+3+96]=N}function Mo(f,x){var S=f[x-1+0],Q=f[x-1+32],R=f[x-1+64],N=f[x-1+96],z=f[x-1-32],$=f[x+0-32],Z=f[x+1-32],re=f[x+2-32];f[x+0+0]=f[x+2+32]=S+z+1>>1,f[x+0+32]=f[x+2+64]=Q+S+1>>1,f[x+0+64]=f[x+2+96]=R+Q+1>>1,f[x+0+96]=N+R+1>>1,f[x+3+0]=Ur($,Z,re),f[x+2+0]=Ur(z,$,Z),f[x+1+0]=f[x+3+32]=Ur(S,z,$),f[x+1+32]=f[x+3+64]=Ur(Q,S,z),f[x+1+64]=f[x+3+96]=Ur(R,Q,S),f[x+1+96]=Ur(N,R,Q)}function bA(f,x){var S;for(S=0;8>S;++S)s(f,x+32*S,f,x-32,8)}function fa(f,x){var S;for(S=0;8>S;++S)l(f,x,f[x-1],8),x+=32}function Kn(f,x,S){var Q;for(Q=0;8>Q;++Q)l(x,S+32*Q,f,8)}function Qr(f,x){var S,Q=8;for(S=0;8>S;++S)Q+=f[x+S-32]+f[x-1+32*S];Kn(Q>>4,f,x)}function xA(f,x){var S,Q=4;for(S=0;8>S;++S)Q+=f[x+S-32];Kn(Q>>3,f,x)}function Xi(f,x){var S,Q=4;for(S=0;8>S;++S)Q+=f[x-1+32*S];Kn(Q>>3,f,x)}function yn(f,x){Kn(128,f,x)}function Xa(f,x,S){var Q=f[x-S],R=f[x+0],N=3*(R-Q)+pl[1020+f[x-2*S]-f[x+S]],z=UA[112+(N+4>>3)];f[x-S]=ls[255+Q+UA[112+(N+3>>3)]],f[x+0]=ls[255+R-z]}function Qo(f,x,S,Q){var R=f[x+0],N=f[x+S];return Jn[255+f[x-2*S]-f[x-S]]>Q||Jn[255+N-R]>Q}function ko(f,x,S,Q){return 4*Jn[255+f[x-S]-f[x+0]]+Jn[255+f[x-2*S]-f[x+S]]<=Q}function BA(f,x,S,Q,R){var N=f[x-3*S],z=f[x-2*S],$=f[x-S],Z=f[x+0],re=f[x+S],de=f[x+2*S],we=f[x+3*S];return 4*Jn[255+$-Z]+Jn[255+z-re]>Q?0:Jn[255+f[x-4*S]-N]<=R&&Jn[255+N-z]<=R&&Jn[255+z-$]<=R&&Jn[255+we-de]<=R&&Jn[255+de-re]<=R&&Jn[255+re-Z]<=R}function CA(f,x,S,Q){var R=2*Q+1;for(Q=0;16>Q;++Q)ko(f,x+Q,S,R)&&Xa(f,x+Q,S)}function Is(f,x,S,Q){var R=2*Q+1;for(Q=0;16>Q;++Q)ko(f,x+Q*S,1,R)&&Xa(f,x+Q*S,1)}function ga(f,x,S,Q){var R;for(R=3;0<R;--R)CA(f,x+=4*S,S,Q)}function ol(f,x,S,Q){var R;for(R=3;0<R;--R)Is(f,x+=4,S,Q)}function Ys(f,x,S,Q,R,N,z,$){for(N=2*N+1;0<R--;){if(BA(f,x,S,N,z))if(Qo(f,x,S,$))Xa(f,x,S);else{var Z=f,re=x,de=S,we=Z[re-2*de],Le=Z[re-de],Qe=Z[re+0],ut=Z[re+de],He=Z[re+2*de],Fe=27*(dt=pl[1020+3*(Qe-Le)+pl[1020+we-ut]])+63>>7,Ie=18*dt+63>>7,dt=9*dt+63>>7;Z[re-3*de]=ls[255+Z[re-3*de]+dt],Z[re-2*de]=ls[255+we+Ie],Z[re-de]=ls[255+Le+Fe],Z[re+0]=ls[255+Qe-Fe],Z[re+de]=ls[255+ut-Ie],Z[re+2*de]=ls[255+He-dt]}x+=Q}}function Ls(f,x,S,Q,R,N,z,$){for(N=2*N+1;0<R--;){if(BA(f,x,S,N,z))if(Qo(f,x,S,$))Xa(f,x,S);else{var Z=f,re=x,de=S,we=Z[re-de],Le=Z[re+0],Qe=Z[re+de],ut=UA[112+((He=3*(Le-we))+4>>3)],He=UA[112+(He+3>>3)],Fe=ut+1>>1;Z[re-2*de]=ls[255+Z[re-2*de]+Fe],Z[re-de]=ls[255+we+He],Z[re+0]=ls[255+Le-ut],Z[re+de]=ls[255+Qe-Fe]}x+=Q}}function SA(f,x,S,Q,R,N){Ys(f,x,S,1,16,Q,R,N)}function Ts(f,x,S,Q,R,N){Ys(f,x,1,S,16,Q,R,N)}function jc(f,x,S,Q,R,N){var z;for(z=3;0<z;--z)Ls(f,x+=4*S,S,1,16,Q,R,N)}function EA(f,x,S,Q,R,N){var z;for(z=3;0<z;--z)Ls(f,x+=4,1,S,16,Q,R,N)}function Gc(f,x,S,Q,R,N,z,$){Ys(f,x,R,1,8,N,z,$),Ys(S,Q,R,1,8,N,z,$)}function Al(f,x,S,Q,R,N,z,$){Ys(f,x,1,R,8,N,z,$),Ys(S,Q,1,R,8,N,z,$)}function ll(f,x,S,Q,R,N,z,$){Ls(f,x+4*R,R,1,8,N,z,$),Ls(S,Q+4*R,R,1,8,N,z,$)}function tc(f,x,S,Q,R,N,z,$){Ls(f,x+4,1,R,8,N,z,$),Ls(S,Q+4,1,R,8,N,z,$)}function Ya(){this.ba=new bi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Kr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ja(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Do(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function FA(){this.ua=0,this.Wa=new Me,this.vb=new Me,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new _e,this.yc=new Ae}function eo(){this.xb=this.a=0,this.l=new yA,this.ca=new bi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ee,this.Pb=0,this.wd=new ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new FA,this.ab=0,this.gc=p(4,Do),this.Oc=0}function No(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new yA,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function to(f,x,S,Q,R,N,z){for(f=f==null?0:f[x+0],x=0;x<z;++x)R[N+x]=f+S[Q+x]&255,f=R[N+x]}function Oo(f,x,S,Q,R,N,z){var $;if(f==null)to(null,null,S,Q,R,N,z);else for($=0;$<z;++$)R[N+$]=f[x+$]+S[Q+$]&255}function Wn(f,x,S,Q,R,N,z){if(f==null)to(null,null,S,Q,R,N,z);else{var $,Z=f[x+0],re=Z,de=Z;for($=0;$<z;++$)re=de+(Z=f[x+$])-re,de=S[Q+$]+(-256&re?0>re?0:255:re)&255,re=Z,R[N+$]=de}}function IA(f,x,S,Q){var R=x.width,N=x.o;if(e(f!=null&&x!=null),0>S||0>=Q||S+Q>N)return null;if(!f.Cc){if(f.ga==null){var z;if(f.ga=new No,(z=f.ga==null)||(z=x.width*x.o,e(f.Gb.length==0),f.Gb=c(z),f.Uc=0,f.Gb==null?z=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,z=1),z=!z),!z){z=f.ga;var $=f.Fa,Z=f.P,re=f.qc,de=f.mb,we=f.nb,Le=Z+1,Qe=re-1,ut=z.l;if(e($!=null&&de!=null&&x!=null),es[0]=null,es[1]=to,es[2]=Oo,es[3]=Wn,z.ca=de,z.tb=we,z.c=x.width,z.i=x.height,e(0<z.c&&0<z.i),1>=re)x=0;else if(z.$a=$[Z+0]>>0&3,z.Z=$[Z+0]>>2&3,z.Lc=$[Z+0]>>4&3,Z=$[Z+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||Z)x=0;else if(ut.put=ve,ut.ac=le,ut.bc=be,ut.ma=z,ut.width=x.width,ut.height=x.height,ut.Da=x.Da,ut.v=x.v,ut.va=x.va,ut.j=x.j,ut.o=x.o,z.$a)e:{e(z.$a==1),x=Rr();t:for(;;){if(x==null){x=0;break e}if(e(z!=null),z.mc=x,x.c=z.c,x.i=z.i,x.l=z.l,x.l.ma=z,x.l.width=z.c,x.l.height=z.i,x.a=0,Ye(x.m,$,Le,Qe),!Sr(z.c,z.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&sr(x.s)?(z.ic=1,$=x.c*x.i,x.Ta=null,x.Ua=0,x.V=c($),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(z.ic=0,x=Te(x,z.c)),!x))break t;x=1;break e}z.mc=null,x=0}else x=Qe>=z.c*z.i;z=!x}if(z)return null;f.ga.Lc!=1?f.Ga=0:Q=N-S}e(f.ga!=null),e(S+Q<=N);e:{if(x=($=f.ga).c,N=$.l.o,$.$a==0){if(Le=f.rc,Qe=f.Vc,ut=f.Fa,Z=f.P+1+S*x,re=f.mb,de=f.nb+S*x,e(Z<=f.P+f.qc),$.Z!=0)for(e(es[$.Z]!=null),z=0;z<Q;++z)es[$.Z](Le,Qe,ut,Z,re,de,x),Le=re,Qe=de,de+=x,Z+=x;else for(z=0;z<Q;++z)s(re,de,ut,Z,x),Le=re,Qe=de,de+=x,Z+=x;f.rc=Le,f.Vc=Qe}else{if(e($.mc!=null),x=S+Q,e((z=$.mc)!=null),e(x<=z.i),z.C>=x)x=1;else if($.ic||$e(),$.ic){$=z.V,Le=z.Ba,Qe=z.c;var He=z.i,Fe=(ut=1,Z=z.$/Qe,re=z.$%Qe,de=z.m,we=z.s,z.$),Ie=Qe*He,dt=Qe*x,pt=we.wc,at=Fe<dt?ht(we,re,Z):null;e(Fe<=Ie),e(x<=He),e(sr(we));t:for(;;){for(;!de.h&&Fe<dt;){if(re&pt||(at=ht(we,re,Z)),e(at!=null),Ge(de),256>(He=Ve(at.G[0],at.H[0],de)))$[Le+Fe]=He,++Fe,++re>=Qe&&(re=0,++Z<=x&&!(Z%16)&&Yt(z,Z));else{if(!(280>He)){ut=0;break t}He=Oe(He-256,de);var _t,Ft=Ve(at.G[4],at.H[4],de);if(Ge(de),!(Fe>=(Ft=Ue(Qe,Ft=Oe(Ft,de)))&&Ie-Fe>=He)){ut=0;break t}for(_t=0;_t<He;++_t)$[Le+Fe+_t]=$[Le+Fe+_t-Ft];for(Fe+=He,re+=He;re>=Qe;)re-=Qe,++Z<=x&&!(Z%16)&&Yt(z,Z);Fe<dt&&re&pt&&(at=ht(we,re,Z))}e(de.h==ye(de))}Yt(z,Z>x?x:Z);break t}!ut||de.h&&Fe<Ie?(ut=0,z.a=de.h?5:3):z.$=Fe,x=ut}else x=ur(z,z.V,z.Ba,z.c,z.i,x,Qt);if(!x){Q=0;break e}}S+Q>=N&&(f.Cc=1),Q=1}if(!Q)return null;if(f.Cc&&((Q=f.ga)!=null&&(Q.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+S*R}function P(f,x,S,Q,R,N){for(;0<R--;){var z,$=f,Z=x+(S?1:0),re=f,de=x+(S?0:3);for(z=0;z<Q;++z){var we=re[de+4*z];we!=255&&(we*=32897,$[Z+4*z+0]=$[Z+4*z+0]*we>>23,$[Z+4*z+1]=$[Z+4*z+1]*we>>23,$[Z+4*z+2]=$[Z+4*z+2]*we>>23)}x+=N}}function J(f,x,S,Q,R){for(;0<Q--;){var N;for(N=0;N<S;++N){var z=f[x+2*N+0],$=15&(re=f[x+2*N+1]),Z=4369*$,re=(240&re|re>>4)*Z>>16;f[x+2*N+0]=(240&z|z>>4)*Z>>16&240|(15&z|z<<4)*Z>>16>>4&15,f[x+2*N+1]=240&re|$}x+=R}}function Ce(f,x,S,Q,R,N,z,$){var Z,re,de=255;for(re=0;re<R;++re){for(Z=0;Z<Q;++Z){var we=f[x+Z];N[z+4*Z]=we,de&=we}x+=S,z+=$}return de!=255}function qe(f,x,S,Q,R){var N;for(N=0;N<R;++N)S[Q+N]=f[x+N]>>8}function $e(){ea=P,ta=J,Ms=Ce,Zt=qe}function ct(f,x,S){fe[f]=function(Q,R,N,z,$,Z,re,de,we,Le,Qe,ut,He,Fe,Ie,dt,pt){var at,_t=pt-1>>1,Ft=$[Z+0]|re[de+0]<<16,Wt=we[Le+0]|Qe[ut+0]<<16;e(Q!=null);var kt=3*Ft+Wt+131074>>2;for(x(Q[R+0],255&kt,kt>>16,He,Fe),N!=null&&(kt=3*Wt+Ft+131074>>2,x(N[z+0],255&kt,kt>>16,Ie,dt)),at=1;at<=_t;++at){var Er=$[Z+at]|re[de+at]<<16,Fr=we[Le+at]|Qe[ut+at]<<16,kr=Ft+Er+Wt+Fr+524296,pr=kr+2*(Er+Wt)>>3;kt=pr+Ft>>1,Ft=(kr=kr+2*(Ft+Fr)>>3)+Er>>1,x(Q[R+2*at-1],255&kt,kt>>16,He,Fe+(2*at-1)*S),x(Q[R+2*at-0],255&Ft,Ft>>16,He,Fe+(2*at-0)*S),N!=null&&(kt=kr+Wt>>1,Ft=pr+Fr>>1,x(N[z+2*at-1],255&kt,kt>>16,Ie,dt+(2*at-1)*S),x(N[z+2*at+0],255&Ft,Ft>>16,Ie,dt+(2*at+0)*S)),Ft=Er,Wt=Fr}1&pt||(kt=3*Ft+Wt+131074>>2,x(Q[R+pt-1],255&kt,kt>>16,He,Fe+(pt-1)*S),N!=null&&(kt=3*Wt+Ft+131074>>2,x(N[z+pt-1],255&kt,kt>>16,Ie,dt+(pt-1)*S)))}}function Tt(){Ai[dl]=Ui,Ai[fl]=kA,Ai[$c]=QA,Ai[ic]=DA,Ai[PA]=ao,Ai[gl]=lc,Ai[nc]=Yc,Ai[ml]=kA,Ai[Mn]=DA,Ai[ra]=ao,Ai[qo]=lc}function wt(f){return f&~n?0>f?0:255:f>>v}function mr(f,x){return wt((19077*f>>8)+(26149*x>>8)-14234)}function ar(f,x,S){return wt((19077*f>>8)-(6419*x>>8)-(13320*S>>8)+8708)}function cr(f,x){return wt((19077*f>>8)+(33050*x>>8)-17685)}function $r(f,x,S,Q,R){Q[R+0]=mr(f,S),Q[R+1]=ar(f,x,S),Q[R+2]=cr(f,x)}function Li(f,x,S,Q,R){Q[R+0]=cr(f,x),Q[R+1]=ar(f,x,S),Q[R+2]=mr(f,S)}function ki(f,x,S,Q,R){var N=ar(f,x,S);x=N<<3&224|cr(f,x)>>3,Q[R+0]=248&mr(f,S)|N>>5,Q[R+1]=x}function Di(f,x,S,Q,R){var N=240&cr(f,x)|15;Q[R+0]=240&mr(f,S)|ar(f,x,S)>>4,Q[R+1]=N}function Yi(f,x,S,Q,R){Q[R+0]=255,$r(f,x,S,Q,R+1)}function qi(f,x,S,Q,R){Li(f,x,S,Q,R),Q[R+3]=255}function Zn(f,x,S,Q,R){$r(f,x,S,Q,R),Q[R+3]=255}function Xn(f,x){return 0>f?0:f>x?x:f}function As(f,x,S){fe[f]=function(Q,R,N,z,$,Z,re,de,we){for(var Le=de+(-2&we)*S;de!=Le;)x(Q[R+0],N[z+0],$[Z+0],re,de),x(Q[R+1],N[z+0],$[Z+0],re,de+S),R+=2,++z,++Z,de+=2*S;1&we&&x(Q[R+0],N[z+0],$[Z+0],re,de)}}function ro(f,x,S){return S==0?f==0?x==0?6:5:x==0?4:0:S}function Ma(f,x,S,Q,R){switch(f>>>30){case 3:Nn(x,S,Q,R,0);break;case 2:Da(x,S,Q,R);break;case 1:On(x,S,Q,R)}}function cl(f,x){var S,Q,R=x.M,N=x.Nb,z=f.oc,$=f.pc+40,Z=f.oc,re=f.pc+584,de=f.oc,we=f.pc+600;for(S=0;16>S;++S)z[$+32*S-1]=129;for(S=0;8>S;++S)Z[re+32*S-1]=129,de[we+32*S-1]=129;for(0<R?z[$-1-32]=Z[re-1-32]=de[we-1-32]=129:(l(z,$-32-1,127,21),l(Z,re-32-1,127,9),l(de,we-32-1,127,9)),Q=0;Q<f.za;++Q){var Le=x.ya[x.aa+Q];if(0<Q){for(S=-1;16>S;++S)s(z,$+32*S-4,z,$+32*S+12,4);for(S=-1;8>S;++S)s(Z,re+32*S-4,Z,re+32*S+4,4),s(de,we+32*S-4,de,we+32*S+4,4)}var Qe=f.Gd,ut=f.Hd+Q,He=Le.ad,Fe=Le.Hc;if(0<R&&(s(z,$-32,Qe[ut].y,0,16),s(Z,re-32,Qe[ut].f,0,8),s(de,we-32,Qe[ut].ea,0,8)),Le.Za){var Ie=z,dt=$-32+16;for(0<R&&(Q>=f.za-1?l(Ie,dt,Qe[ut].y[15],4):s(Ie,dt,Qe[ut+1].y,0,4)),S=0;4>S;S++)Ie[dt+128+S]=Ie[dt+256+S]=Ie[dt+384+S]=Ie[dt+0+S];for(S=0;16>S;++S,Fe<<=2)Ie=z,dt=$+O[S],ui[Le.Ob[S]](Ie,dt),Ma(Fe,He,16*+S,Ie,dt)}else if(Ie=ro(Q,R,Le.Ob[0]),xa[Ie](z,$),Fe!=0)for(S=0;16>S;++S,Fe<<=2)Ma(Fe,He,16*+S,z,$+O[S]);for(S=Le.Gc,Ie=ro(Q,R,Le.Dd),ia[Ie](Z,re),ia[Ie](de,we),Fe=He,Ie=Z,dt=re,255&(Le=S>>0)&&(170&Le?$i(Fe,256,Ie,dt):wa(Fe,256,Ie,dt)),Le=de,Fe=we,255&(S>>=8)&&(170&S?$i(He,320,Le,Fe):wa(He,320,Le,Fe)),R<f.Ub-1&&(s(Qe[ut].y,0,z,$+480,16),s(Qe[ut].f,0,Z,re+224,8),s(Qe[ut].ea,0,de,we+224,8)),S=8*N*f.B,Qe=f.sa,ut=f.ta+16*Q+16*N*f.R,He=f.qa,Le=f.ra+8*Q+S,Fe=f.Ha,Ie=f.Ia+8*Q+S,S=0;16>S;++S)s(Qe,ut+S*f.R,z,$+32*S,16);for(S=0;8>S;++S)s(He,Le+S*f.B,Z,re+32*S,8),s(Fe,Ie+S*f.B,de,we+32*S,8)}}function io(f,x,S,Q,R,N,z,$,Z){var re=[0],de=[0],we=0,Le=Z!=null?Z.kd:0,Qe=Z??new Ja;if(f==null||12>S)return 7;Qe.data=f,Qe.w=x,Qe.ha=S,x=[x],S=[S],Qe.gb=[Qe.gb];e:{var ut=x,He=S,Fe=Qe.gb;if(e(f!=null),e(He!=null),e(Fe!=null),Fe[0]=0,12<=He[0]&&!t(f,ut[0],"RIFF")){if(t(f,ut[0]+8,"WEBP")){Fe=3;break e}var Ie=Vt(f,ut[0]+4);if(12>Ie||4294967286<Ie){Fe=3;break e}if(Le&&Ie>He[0]-8){Fe=7;break e}Fe[0]=Ie,ut[0]+=12,He[0]-=12}Fe=0}if(Fe!=0)return Fe;for(Ie=0<Qe.gb[0],S=S[0];;){e:{var dt=f;He=x,Fe=S;var pt=re,at=de,_t=ut=[0];if((kt=we=[we])[0]=0,8>Fe[0])Fe=7;else{if(!t(dt,He[0],"VP8X")){if(Vt(dt,He[0]+4)!=10){Fe=3;break e}if(18>Fe[0]){Fe=7;break e}var Ft=Vt(dt,He[0]+8),Wt=1+zt(dt,He[0]+12);if(2147483648<=Wt*(dt=1+zt(dt,He[0]+15))){Fe=3;break e}_t!=null&&(_t[0]=Ft),pt!=null&&(pt[0]=Wt),at!=null&&(at[0]=dt),He[0]+=18,Fe[0]-=18,kt[0]=1}Fe=0}}if(we=we[0],ut=ut[0],Fe!=0)return Fe;if(He=!!(2&ut),!Ie&&we)return 3;if(N!=null&&(N[0]=!!(16&ut)),z!=null&&(z[0]=He),$!=null&&($[0]=0),z=re[0],ut=de[0],we&&He&&Z==null){Fe=0;break}if(4>S){Fe=7;break}if(Ie&&we||!Ie&&!we&&!t(f,x[0],"ALPH")){S=[S],Qe.na=[Qe.na],Qe.P=[Qe.P],Qe.Sa=[Qe.Sa];e:{Ft=f,Fe=x,Ie=S;var kt=Qe.gb;pt=Qe.na,at=Qe.P,_t=Qe.Sa,Wt=22,e(Ft!=null),e(Ie!=null),dt=Fe[0];var Er=Ie[0];for(e(pt!=null),e(_t!=null),pt[0]=null,at[0]=null,_t[0]=0;;){if(Fe[0]=dt,Ie[0]=Er,8>Er){Fe=7;break e}var Fr=Vt(Ft,dt+4);if(4294967286<Fr){Fe=3;break e}var kr=8+Fr+1&-2;if(Wt+=kr,0<kt&&Wt>kt){Fe=3;break e}if(!t(Ft,dt,"VP8 ")||!t(Ft,dt,"VP8L")){Fe=0;break e}if(Er[0]<kr){Fe=7;break e}t(Ft,dt,"ALPH")||(pt[0]=Ft,at[0]=dt+8,_t[0]=Fr),dt+=kr,Er-=kr}}if(S=S[0],Qe.na=Qe.na[0],Qe.P=Qe.P[0],Qe.Sa=Qe.Sa[0],Fe!=0)break}S=[S],Qe.Ja=[Qe.Ja],Qe.xa=[Qe.xa];e:if(kt=f,Fe=x,Ie=S,pt=Qe.gb[0],at=Qe.Ja,_t=Qe.xa,Ft=Fe[0],dt=!t(kt,Ft,"VP8 "),Wt=!t(kt,Ft,"VP8L"),e(kt!=null),e(Ie!=null),e(at!=null),e(_t!=null),8>Ie[0])Fe=7;else{if(dt||Wt){if(kt=Vt(kt,Ft+4),12<=pt&&kt>pt-12){Fe=3;break e}if(Le&&kt>Ie[0]-8){Fe=7;break e}at[0]=kt,Fe[0]+=8,Ie[0]-=8,_t[0]=Wt}else _t[0]=5<=Ie[0]&&kt[Ft+0]==47&&!(kt[Ft+4]>>5),at[0]=Ie[0];Fe=0}if(S=S[0],Qe.Ja=Qe.Ja[0],Qe.xa=Qe.xa[0],x=x[0],Fe!=0)break;if(4294967286<Qe.Ja)return 3;if($==null||He||($[0]=Qe.xa?2:1),z=[z],ut=[ut],Qe.xa){if(5>S){Fe=7;break}$=z,Le=ut,He=N,f==null||5>S?f=0:5<=S&&f[x+0]==47&&!(f[x+4]>>5)?(Ie=[0],kt=[0],pt=[0],Ye(at=new ee,f,x,S),De(at,Ie,kt,pt)?($!=null&&($[0]=Ie[0]),Le!=null&&(Le[0]=kt[0]),He!=null&&(He[0]=pt[0]),f=1):f=0):f=0}else{if(10>S){Fe=7;break}$=ut,f==null||10>S||!So(f,x+3,S-3)?f=0:(Le=f[x+0]|f[x+1]<<8|f[x+2]<<16,He=16383&(f[x+7]<<8|f[x+6]),f=16383&(f[x+9]<<8|f[x+8]),1&Le||3<(Le>>1&7)||!(Le>>4&1)||Le>>5>=Qe.Ja||!He||!f?f=0:(z&&(z[0]=He),$&&($[0]=f),f=1))}if(!f||(z=z[0],ut=ut[0],we&&(re[0]!=z||de[0]!=ut)))return 3;Z!=null&&(Z[0]=Qe,Z.offset=x-Z.w,e(4294967286>x-Z.w),e(Z.offset==Z.ha-S));break}return Fe==0||Fe==7&&we&&Z==null?(N!=null&&(N[0]|=Qe.na!=null&&0<Qe.na.length),Q!=null&&(Q[0]=z),R!=null&&(R[0]=ut),0):Fe}function ul(f,x,S){var Q=x.width,R=x.height,N=0,z=0,$=Q,Z=R;if(x.Da=f!=null&&0<f.Da,x.Da&&($=f.cd,Z=f.bd,N=f.v,z=f.j,11>S||(N&=-2,z&=-2),0>N||0>z||0>=$||0>=Z||N+$>Q||z+Z>R))return 0;if(x.v=N,x.j=z,x.va=N+$,x.o=z+Z,x.U=$,x.T=Z,x.da=f!=null&&0<f.da,x.da){if(!fr($,Z,S=[f.ib],N=[f.hb]))return 0;x.ib=S[0],x.hb=N[0]}return x.ob=f!=null&&f.ob,x.Kb=f==null||!f.Sd,x.da&&(x.ob=x.ib<3*Q/4&&x.hb<3*R/4,x.Kb=0),1}function LA(f){if(f==null)return 2;if(11>f.S){var x=f.f.RGBA;x.fb+=(f.height-1)*x.A,x.A=-x.A}else x=f.f.kb,f=f.height,x.O+=(f-1)*x.fa,x.fa=-x.fa,x.N+=(f-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(f-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(f-1)*x.lb,x.lb=-x.lb);return 0}function Qa(f,x,S,Q){if(Q==null||0>=f||0>=x)return 2;if(S!=null){if(S.Da){var R=S.cd,N=S.bd,z=-2&S.v,$=-2&S.j;if(0>z||0>$||0>=R||0>=N||z+R>f||$+N>x)return 2;f=R,x=N}if(S.da){if(!fr(f,x,R=[S.ib],N=[S.hb]))return 2;f=R[0],x=N[0]}}Q.width=f,Q.height=x;e:{var Z=Q.width,re=Q.height;if(f=Q.S,0>=Z||0>=re||!(f>=dl&&13>f))f=2;else{if(0>=Q.Rd&&Q.sd==null){z=N=R=x=0;var de=($=Z*ge[f])*re;if(11>f||(N=(re+1)/2*(x=(Z+1)/2),f==12&&(z=(R=Z)*re)),(re=c(de+2*N+z))==null){f=1;break e}Q.sd=re,11>f?((Z=Q.f.RGBA).eb=re,Z.fb=0,Z.A=$,Z.size=de):((Z=Q.f.kb).y=re,Z.O=0,Z.fa=$,Z.Fd=de,Z.f=re,Z.N=0+de,Z.Ab=x,Z.Cd=N,Z.ea=re,Z.W=0+de+N,Z.Db=x,Z.Ed=N,f==12&&(Z.F=re,Z.J=0+de+2*N),Z.Tc=z,Z.lb=R)}if(x=1,R=Q.S,N=Q.width,z=Q.height,R>=dl&&13>R)if(11>R)f=Q.f.RGBA,x&=($=Math.abs(f.A))*(z-1)+N<=f.size,x&=$>=N*ge[R],x&=f.eb!=null;else{f=Q.f.kb,$=(N+1)/2,de=(z+1)/2,Z=Math.abs(f.fa),re=Math.abs(f.Ab);var we=Math.abs(f.Db),Le=Math.abs(f.lb),Qe=Le*(z-1)+N;x&=Z*(z-1)+N<=f.Fd,x&=re*(de-1)+$<=f.Cd,x=(x&=we*(de-1)+$<=f.Ed)&Z>=N&re>=$&we>=$,x&=f.y!=null,x&=f.f!=null,x&=f.ea!=null,R==12&&(x&=Le>=N,x&=Qe<=f.Tc,x&=f.F!=null)}else x=0;f=x?0:2}}return f!=0||S!=null&&S.fd&&(f=LA(Q)),f}var Ln=64,Ro=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],zo=24,ma=32,no=8,vn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ze("Predictor0","PredictorAdd0"),fe.Predictor0=function(){return 4278190080},fe.Predictor1=function(f){return f},fe.Predictor2=function(f,x,S){return x[S+0]},fe.Predictor3=function(f,x,S){return x[S+1]},fe.Predictor4=function(f,x,S){return x[S-1]},fe.Predictor5=function(f,x,S){return Pt(Pt(f,x[S+1]),x[S+0])},fe.Predictor6=function(f,x,S){return Pt(f,x[S-1])},fe.Predictor7=function(f,x,S){return Pt(f,x[S+0])},fe.Predictor8=function(f,x,S){return Pt(x[S-1],x[S+0])},fe.Predictor9=function(f,x,S){return Pt(x[S+0],x[S+1])},fe.Predictor10=function(f,x,S){return Pt(Pt(f,x[S-1]),Pt(x[S+0],x[S+1]))},fe.Predictor11=function(f,x,S){var Q=x[S+0];return 0>=hr(Q>>24&255,f>>24&255,(x=x[S-1])>>24&255)+hr(Q>>16&255,f>>16&255,x>>16&255)+hr(Q>>8&255,f>>8&255,x>>8&255)+hr(255&Q,255&f,255&x)?Q:f},fe.Predictor12=function(f,x,S){var Q=x[S+0];return(Mt((f>>24&255)+(Q>>24&255)-((x=x[S-1])>>24&255))<<24|Mt((f>>16&255)+(Q>>16&255)-(x>>16&255))<<16|Mt((f>>8&255)+(Q>>8&255)-(x>>8&255))<<8|Mt((255&f)+(255&Q)-(255&x)))>>>0},fe.Predictor13=function(f,x,S){var Q=x[S-1];return(Lt((f=Pt(f,x[S+0]))>>24&255,Q>>24&255)<<24|Lt(f>>16&255,Q>>16&255)<<16|Lt(f>>8&255,Q>>8&255)<<8|Lt(f>>0&255,Q>>0&255))>>>0};var rc=fe.PredictorAdd0;fe.PredictorAdd1=wr,ze("Predictor2","PredictorAdd2"),ze("Predictor3","PredictorAdd3"),ze("Predictor4","PredictorAdd4"),ze("Predictor5","PredictorAdd5"),ze("Predictor6","PredictorAdd6"),ze("Predictor7","PredictorAdd7"),ze("Predictor8","PredictorAdd8"),ze("Predictor9","PredictorAdd9"),ze("Predictor10","PredictorAdd10"),ze("Predictor11","PredictorAdd11"),ze("Predictor12","PredictorAdd12"),ze("Predictor13","PredictorAdd13");var yi=fe.PredictorAdd2;br("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),br("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var ya,Ti=fe.ColorIndexInverseTransform,va=fe.MapARGB,Ho=fe.VP8LColorIndexInverseTransformAlpha,TA=fe.MapAlpha,Yn=fe.VP8LPredictorsAdd=[];Yn.length=16,(fe.VP8LPredictors=[]).length=16,(fe.VP8LPredictorsAdd_C=[]).length=16,(fe.VP8LPredictors_C=[]).length=16;var Tn,Un,ka,Js,_a,Vo,Us,Nn,Da,$i,On,wa,so,jo,Rn,Na,Pn,Ki,Ps,ai,oi,Vi,ji,ba,ea,ta,Ms,Zt,hl=c(511),Oa=c(2041),Go=c(225),qc=c(767),Gt=0,pl=Oa,UA=Go,ls=qc,Jn=hl,dl=0,fl=1,$c=2,ic=3,PA=4,gl=5,nc=6,ml=7,Mn=8,ra=9,qo=10,Kc=[2,3,7],yl=[3,3,11],sc=[280,256,256,256,40],Xu=[0,1,1,1,0],cs=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],xi=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ac=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Wc=8,oc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ac=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],MA=null,dp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],zn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],vl=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ar=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],_r=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],_l=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Zc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],xa=[],ui=[],ia=[],Qs=1,Xc=2,es=[],Ai=[];ct("UpsampleRgbLinePair",$r,3),ct("UpsampleBgrLinePair",Li,3),ct("UpsampleRgbaLinePair",Zn,4),ct("UpsampleBgraLinePair",qi,4),ct("UpsampleArgbLinePair",Yi,4),ct("UpsampleRgba4444LinePair",Di,2),ct("UpsampleRgb565LinePair",ki,2);var Ui=fe.UpsampleRgbLinePair,QA=fe.UpsampleBgrLinePair,kA=fe.UpsampleRgbaLinePair,DA=fe.UpsampleBgraLinePair,ao=fe.UpsampleArgbLinePair,lc=fe.UpsampleRgba4444LinePair,Yc=fe.UpsampleRgb565LinePair,Ra=16,NA=1<<Ra-1,$o=-227,ni=482,v=6,n=(256<<v)-1,u=0,d=c(256),y=c(256),b=c(256),F=c(256),T=c(ni-$o),k=c(ni-$o);As("YuvToRgbRow",$r,3),As("YuvToBgrRow",Li,3),As("YuvToRgbaRow",Zn,4),As("YuvToBgraRow",qi,4),As("YuvToArgbRow",Yi,4),As("YuvToRgba4444Row",Di,2),As("YuvToRgb565Row",ki,2);var O=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],H=[0,2,8],K=[8,7,6,4,4,2,2,2,1,1,1,1],se=1;this.WebPDecodeRGBA=function(f,x,S,Q,R){var N=fl,z=new Ya,$=new bi;z.ba=$,$.S=N,$.width=[$.width],$.height=[$.height];var Z=$.width,re=$.height,de=new Nt;if(de==null||f==null)var we=2;else e(de!=null),we=io(f,x,S,de.width,de.height,de.Pd,de.Qd,de.format,null);if(we!=0?Z=0:(Z!=null&&(Z[0]=de.width[0]),re!=null&&(re[0]=de.height[0]),Z=1),Z){$.width=$.width[0],$.height=$.height[0],Q!=null&&(Q[0]=$.width),R!=null&&(R[0]=$.height);e:{if(Q=new yA,(R=new Ja).data=f,R.w=x,R.ha=S,R.kd=1,x=[0],e(R!=null),((f=io(R.data,R.w,R.ha,null,null,null,x,null,R))==0||f==7)&&x[0]&&(f=4),(x=f)==0){if(e(z!=null),Q.data=R.data,Q.w=R.w+R.offset,Q.ha=R.ha-R.offset,Q.put=ve,Q.ac=le,Q.bc=be,Q.ma=z,R.xa){if((f=Rr())==null){z=1;break e}if(function(Le,Qe){var ut=[0],He=[0],Fe=[0];t:for(;;){if(Le==null)return 0;if(Qe==null)return Le.a=2,0;if(Le.l=Qe,Le.a=0,Ye(Le.m,Qe.data,Qe.w,Qe.ha),!De(Le.m,ut,He,Fe)){Le.a=3;break t}if(Le.xb=Xc,Qe.width=ut[0],Qe.height=He[0],!Sr(ut[0],He[0],1,Le,null))break t;return 1}return e(Le.a!=0),0}(f,Q)){if(Q=(x=Qa(Q.width,Q.height,z.Oa,z.ba))==0){t:{Q=f;r:for(;;){if(Q==null){Q=0;break t}if(e(Q.s.yc!=null),e(Q.s.Ya!=null),e(0<Q.s.Wb),e((S=Q.l)!=null),e((R=S.ma)!=null),Q.xb!=0){if(Q.ca=R.ba,Q.tb=R.tb,e(Q.ca!=null),!ul(R.Oa,S,ic)){Q.a=2;break r}if(!Te(Q,S.width)||S.da)break r;if((S.da||$t(Q.ca.S))&&$e(),11>Q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Q.ca.f.kb.F!=null&&$e()),Q.Pb&&0<Q.s.ua&&Q.s.vb.X==null&&!Jt(Q.s.vb,Q.s.Wa.Xa)){Q.a=1;break r}Q.xb=0}if(!ur(Q,Q.V,Q.Ba,Q.c,Q.i,S.o,nr))break r;R.Dc=Q.Ma,Q=1;break t}e(Q.a!=0),Q=0}Q=!Q}Q&&(x=f.a)}else x=f.a}else{if((f=new $n)==null){z=1;break e}if(f.Fa=R.na,f.P=R.P,f.qc=R.Sa,Ta(f,Q)){if((x=Qa(Q.width,Q.height,z.Oa,z.ba))==0){if(f.Aa=0,S=z.Oa,e((R=f)!=null),S!=null){if(0<(Z=0>(Z=S.Md)?0:100<Z?255:255*Z/100)){for(re=de=0;4>re;++re)12>(we=R.pb[re]).lc&&(we.ia=Z*K[0>we.lc?0:we.lc]>>3),de|=we.ia;de&&(alert("todo:VP8InitRandom"),R.ia=1)}R.Ga=S.Id,100<R.Ga?R.Ga=100:0>R.Ga&&(R.Ga=0)}Ua(f,Q)||(x=f.a)}}else x=f.a}x==0&&z.Oa!=null&&z.Oa.fd&&(x=LA(z.ba))}z=x}N=z!=0?null:11>N?$.f.RGBA.eb:$.f.kb.y}else N=null;return N};var ge=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function _(fe,We){for(var Ke="",ce=0;ce<4;ce++)Ke+=String.fromCharCode(fe[We++]);return Ke}function C(fe,We){return(fe[We+0]<<0|fe[We+1]<<8|fe[We+2]<<16)>>>0}function L(fe,We){return(fe[We+0]<<0|fe[We+1]<<8|fe[We+2]<<16|fe[We+3]<<24)>>>0}new g;var M=[0],I=[0],G=[],j=new g,Y=i,q=function(fe,We){var Ke={},ce=0,Ae=!1,xe=0,_e=0;if(Ke.frames=[],!function(pe,ye,Re,Ge){for(var tt=0;tt<Ge;tt++)if(pe[ye+tt]!=Re.charCodeAt(tt))return!0;return!1}(fe,We,"RIFF",4)){var et,Je;for(L(fe,We+=4),We+=8;We<fe.length;){var rt=_(fe,We),Ye=L(fe,We+=4);We+=4;var it=Ye+(1&Ye);switch(rt){case"VP8 ":case"VP8L":Ke.frames[ce]===void 0&&(Ke.frames[ce]={}),(ee=Ke.frames[ce]).src_off=Ae?_e:We-8,ee.src_size=xe+Ye+8,ce++,Ae&&(Ae=!1,xe=0,_e=0);break;case"VP8X":(ee=Ke.header={}).feature_flags=fe[We];var nt=We+4;ee.canvas_width=1+C(fe,nt),nt+=3,ee.canvas_height=1+C(fe,nt),nt+=3;break;case"ALPH":Ae=!0,xe=it+8,_e=We-8;break;case"ANIM":(ee=Ke.header).bgcolor=L(fe,We),nt=We+4,ee.loop_count=(et=fe)[(Je=nt)+0]<<0|et[Je+1]<<8,nt+=2;break;case"ANMF":var Bt,ee;(ee=Ke.frames[ce]={}).offset_x=2*C(fe,We),We+=3,ee.offset_y=2*C(fe,We),We+=3,ee.width=1+C(fe,We),We+=3,ee.height=1+C(fe,We),We+=3,ee.duration=C(fe,We),We+=3,Bt=fe[We++],ee.dispose=1&Bt,ee.blend=Bt>>1&1}rt!="ANMF"&&(We+=it)}return Ke}}(Y,0);q.response=Y,q.rgbaoutput=!0,q.dataurl=!1;var ne=q.header?q.header:null,he=q.frames?q.frames:null;if(ne){ne.loop_counter=ne.loop_count,M=[ne.canvas_height],I=[ne.canvas_width];for(var Se=0;Se<he.length&&he[Se].blend!=0;Se++);}var Ne=he[0],Pe=j.WebPDecodeRGBA(Y,Ne.src_off,Ne.src_size,I,M);Ne.rgba=Pe,Ne.imgwidth=I[0],Ne.imgheight=M[0];for(var Ee=0;Ee<I[0]*M[0]*4;Ee++)G[Ee]=Pe[Ee];return this.width=I,this.height=M,this.data=G,this}(function(i){var e=function(){return typeof Fg=="function"},t=function(M,I,G,j){var Y=4,q=p;switch(j){case i.image_compression.FAST:Y=1,q=c;break;case i.image_compression.MEDIUM:Y=6,q=a;break;case i.image_compression.SLOW:Y=9,q=g}M=s(M,I,G,q);var ne=Fg(M,{level:Y});return i.__addimage__.arrayBufferToBinaryString(ne)},s=function(M,I,G,j){for(var Y,q,ne,he=M.length/I,Se=new Uint8Array(M.length+he),Ne=C(),Pe=0;Pe<he;Pe+=1){if(ne=Pe*I,Y=M.subarray(ne,ne+I),j)Se.set(j(Y,G,q),ne+Pe);else{for(var Ee,fe=Ne.length,We=[];Ee<fe;Ee+=1)We[Ee]=Ne[Ee](Y,G,q);var Ke=L(We.concat());Se.set(We[Ke],ne+Pe)}q=Y}return Se},l=function(M){var I=Array.apply([],M);return I.unshift(0),I},c=function(M,I){var G,j=[],Y=M.length;j[0]=1;for(var q=0;q<Y;q+=1)G=M[q-I]||0,j[q+1]=M[q]-G+256&255;return j},p=function(M,I,G){var j,Y=[],q=M.length;Y[0]=2;for(var ne=0;ne<q;ne+=1)j=G&&G[ne]||0,Y[ne+1]=M[ne]-j+256&255;return Y},a=function(M,I,G){var j,Y,q=[],ne=M.length;q[0]=3;for(var he=0;he<ne;he+=1)j=M[he-I]||0,Y=G&&G[he]||0,q[he+1]=M[he]+256-(j+Y>>>1)&255;return q},g=function(M,I,G){var j,Y,q,ne,he=[],Se=M.length;he[0]=4;for(var Ne=0;Ne<Se;Ne+=1)j=M[Ne-I]||0,Y=G&&G[Ne]||0,q=G&&G[Ne-I]||0,ne=_(j,Y,q),he[Ne+1]=M[Ne]-ne+256&255;return he},_=function(M,I,G){if(M===I&&I===G)return M;var j=Math.abs(I-G),Y=Math.abs(M-G),q=Math.abs(M+I-G-G);return j<=Y&&j<=q?M:Y<=q?I:G},C=function(){return[l,c,p,a,g]},L=function(M){var I=M.map(function(G){return G.reduce(function(j,Y){return j+Math.abs(Y)},0)});return I.indexOf(Math.min.apply(null,I))};i.processPNG=function(M,I,G,j){var Y,q,ne,he,Se,Ne,Pe,Ee,fe,We,Ke,ce,Ae,xe,_e,et=this.decode.FLATE_DECODE,Je="";if(this.__addimage__.isArrayBuffer(M)&&(M=new Uint8Array(M)),this.__addimage__.isArrayBufferView(M)){if(M=(ne=new a3(M)).imgData,q=ne.bits,Y=ne.colorSpace,Se=ne.colors,[4,6].indexOf(ne.colorType)!==-1){if(ne.bits===8){fe=(Ee=ne.pixelBitlength==32?new Uint32Array(ne.decodePixels().buffer):ne.pixelBitlength==16?new Uint16Array(ne.decodePixels().buffer):new Uint8Array(ne.decodePixels().buffer)).length,Ke=new Uint8Array(fe*ne.colors),We=new Uint8Array(fe);var rt,Ye=ne.pixelBitlength-ne.bits;for(xe=0,_e=0;xe<fe;xe++){for(Ae=Ee[xe],rt=0;rt<Ye;)Ke[_e++]=Ae>>>rt&255,rt+=ne.bits;We[xe]=Ae>>>rt&255}}if(ne.bits===16){fe=(Ee=new Uint32Array(ne.decodePixels().buffer)).length,Ke=new Uint8Array(fe*(32/ne.pixelBitlength)*ne.colors),We=new Uint8Array(fe*(32/ne.pixelBitlength)),ce=ne.colors>1,xe=0,_e=0;for(var it=0;xe<fe;)Ae=Ee[xe++],Ke[_e++]=Ae>>>0&255,ce&&(Ke[_e++]=Ae>>>16&255,Ae=Ee[xe++],Ke[_e++]=Ae>>>0&255),We[it++]=Ae>>>16&255;q=8}j!==i.image_compression.NONE&&e()?(M=t(Ke,ne.width*ne.colors,ne.colors,j),Pe=t(We,ne.width,1,j)):(M=Ke,Pe=We,et=void 0)}if(ne.colorType===3&&(Y=this.color_spaces.INDEXED,Ne=ne.palette,ne.transparency.indexed)){var nt=ne.transparency.indexed,Bt=0;for(xe=0,fe=nt.length;xe<fe;++xe)Bt+=nt[xe];if((Bt/=255)===fe-1&&nt.indexOf(0)!==-1)he=[nt.indexOf(0)];else if(Bt!==fe){for(Ee=ne.decodePixels(),We=new Uint8Array(Ee.length),xe=0,fe=Ee.length;xe<fe;xe++)We[xe]=nt[Ee[xe]];Pe=t(We,ne.width,1)}}var ee=function(pe){var ye;switch(pe){case i.image_compression.FAST:ye=11;break;case i.image_compression.MEDIUM:ye=13;break;case i.image_compression.SLOW:ye=14;break;default:ye=12}return ye}(j);return et===this.decode.FLATE_DECODE&&(Je="/Predictor "+ee+" "),Je+="/Colors "+Se+" /BitsPerComponent "+q+" /Columns "+ne.width,(this.__addimage__.isArrayBuffer(M)||this.__addimage__.isArrayBufferView(M))&&(M=this.__addimage__.arrayBufferToBinaryString(M)),(Pe&&this.__addimage__.isArrayBuffer(Pe)||this.__addimage__.isArrayBufferView(Pe))&&(Pe=this.__addimage__.arrayBufferToBinaryString(Pe)),{alias:G,data:M,index:I,filter:et,decodeParameters:Je,transparency:he,palette:Ne,sMask:Pe,predictor:ee,width:ne.width,height:ne.height,bitsPerComponent:q,colorSpace:Y}}}})(Mr.API),function(i){i.processGIF89A=function(e,t,s,l){var c=new o3(e),p=c.width,a=c.height,g=[];c.decodeAndBlitFrameRGBA(0,g);var _={data:g,width:p,height:a},C=new Rg(100).encode(_,100);return i.processJPEG.call(this,C,t,s,l)},i.processGIF87A=i.processGIF89A}(Mr.API),po.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var e=0;e<i;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:l,green:s,blue:t,quad:c}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},po.prototype.parseBGR=function(){this.pos=this.offset;try{var i="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[i]()}catch(t){Qi.log("bit decode error:"+t)}},po.prototype.bit1=function(){var i,e=Math.ceil(this.width/8),t=e%4;for(i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,l=0;l<e;l++)for(var c=this.datav.getUint8(this.pos++,!0),p=s*this.width*4+8*l*4,a=0;a<8&&8*l+a<this.width;a++){var g=this.palette[c>>7-a&1];this.data[p+4*a]=g.blue,this.data[p+4*a+1]=g.green,this.data[p+4*a+2]=g.red,this.data[p+4*a+3]=255}t!==0&&(this.pos+=4-t)}},po.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),e=i%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,l=0;l<i;l++){var c=this.datav.getUint8(this.pos++,!0),p=s*this.width*4+2*l*4,a=c>>4,g=15&c,_=this.palette[a];if(this.data[p]=_.blue,this.data[p+1]=_.green,this.data[p+2]=_.red,this.data[p+3]=255,2*l+1>=this.width)break;_=this.palette[g],this.data[p+4]=_.blue,this.data[p+4+1]=_.green,this.data[p+4+2]=_.red,this.data[p+4+3]=255}e!==0&&(this.pos+=4-e)}},po.prototype.bit8=function(){for(var i=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var l=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*s;if(l<this.palette.length){var p=this.palette[l];this.data[c]=p.red,this.data[c+1]=p.green,this.data[c+2]=p.blue,this.data[c+3]=255}else this.data[c]=255,this.data[c+1]=255,this.data[c+2]=255,this.data[c+3]=255}i!==0&&(this.pos+=4-i)}},po.prototype.bit15=function(){for(var i=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,l=0;l<this.width;l++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(c&e)/e*255|0,a=(c>>5&e)/e*255|0,g=(c>>10&e)/e*255|0,_=c>>15?255:0,C=s*this.width*4+4*l;this.data[C]=g,this.data[C+1]=a,this.data[C+2]=p,this.data[C+3]=_}this.pos+=i}},po.prototype.bit16=function(){for(var i=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var l=this.bottom_up?s:this.height-1-s,c=0;c<this.width;c++){var p=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(p&e)/e*255|0,g=(p>>5&t)/t*255|0,_=(p>>11)/e*255|0,C=l*this.width*4+4*c;this.data[C]=_,this.data[C+1]=g,this.data[C+2]=a,this.data[C+3]=255}this.pos+=i}},po.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),p=e*this.width*4+4*t;this.data[p]=c,this.data[p+1]=l,this.data[p+2]=s,this.data[p+3]=255}this.pos+=this.width%4}},po.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=c,this.data[a+1]=l,this.data[a+2]=s,this.data[a+3]=p}},po.prototype.getData=function(){return this.data},function(i){i.processBMP=function(e,t,s,l){var c=new po(e,!1),p=c.width,a=c.height,g={data:c.getData(),width:p,height:a},_=new Rg(100).encode(g,100);return i.processJPEG.call(this,_,t,s,l)}}(Mr.API),Nv.prototype.getData=function(){return this.data},function(i){i.processWEBP=function(e,t,s,l){var c=new Nv(e),p=c.width,a=c.height,g={data:c.getData(),width:p,height:a},_=new Rg(100).encode(g,100);return i.processJPEG.call(this,_,t,s,l)}}(Mr.API),Mr.API.processRGBA=function(i,e,t){for(var s=i.data,l=s.length,c=new Uint8Array(l/4*3),p=new Uint8Array(l/4),a=0,g=0,_=0;_<l;_+=4){var C=s[_],L=s[_+1],M=s[_+2],I=s[_+3];c[a++]=C,c[a++]=L,c[a++]=M,p[g++]=I}var G=this.__addimage__.arrayBufferToBinaryString(c);return{alpha:this.__addimage__.arrayBufferToBinaryString(p),data:G,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},Mr.API.setLanguage=function(i){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]!==void 0&&(this.internal.languageSettings.languageCode=i,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},mu=Mr.API,Zp=mu.getCharWidthsArray=function(i,e){var t,s,l=(e=e||{}).font||this.internal.getFont(),c=e.fontSize||this.internal.getFontSize(),p=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:l.metadata.Unicode.widths,g=a.fof?a.fof:1,_=e.kerning?e.kerning:l.metadata.Unicode.kerning,C=_.fof?_.fof:1,L=e.doKerning!==!1,M=0,I=i.length,G=0,j=a[0]||g,Y=[];for(t=0;t<I;t++)s=i.charCodeAt(t),typeof l.metadata.widthOfString=="function"?Y.push((l.metadata.widthOfGlyph(l.metadata.characterToGlyph(s))+p*(1e3/c)||0)/1e3):(M=L&&fi(_[s])==="object"&&!isNaN(parseInt(_[s][G],10))?_[s][G]/C:0,Y.push((a[s]||j)/g+M)),G=s;return Y},Mv=mu.getStringUnitWidth=function(i,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),l=e.charSpace||this.internal.getCharSpace();return mu.processArabic&&(i=mu.processArabic(i)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(i,t,l)/t:Zp.apply(this,arguments).reduce(function(c,p){return c+p},0)},Qv=function(i,e,t,s){for(var l=[],c=0,p=i.length,a=0;c!==p&&a+e[c]<t;)a+=e[c],c++;l.push(i.slice(0,c));var g=c;for(a=0;c!==p;)a+e[c]>s&&(l.push(i.slice(g,c)),a=0,g=c),a+=e[c],c++;return g!==c&&l.push(i.slice(g,c)),l},kv=function(i,e,t){t||(t={});var s,l,c,p,a,g,_,C=[],L=[C],M=t.textIndent||0,I=0,G=0,j=i.split(" "),Y=Zp.apply(this,[" ",t])[0];if(g=t.lineIndent===-1?j[0].length+2:t.lineIndent||0){var q=Array(g).join(" "),ne=[];j.map(function(Se){(Se=Se.split(/\s*\n/)).length>1?ne=ne.concat(Se.map(function(Ne,Pe){return(Pe&&Ne.length?`
`:"")+Ne})):ne.push(Se[0])}),j=ne,g=Mv.apply(this,[q,t])}for(c=0,p=j.length;c<p;c++){var he=0;if(s=j[c],g&&s[0]==`
`&&(s=s.substr(1),he=1),M+I+(G=(l=Zp.apply(this,[s,t])).reduce(function(Se,Ne){return Se+Ne},0))>e||he){if(G>e){for(a=Qv.apply(this,[s,l,e-(M+I),e]),C.push(a.shift()),C=[a.pop()];a.length;)L.push([a.shift()]);G=l.slice(s.length-(C[0]?C[0].length:0)).reduce(function(Se,Ne){return Se+Ne},0)}else C=[s];L.push(C),M=G+g,I=Y}else C.push(s),M+=I+G,I=Y}return _=g?function(Se,Ne){return(Ne?q:"")+Se.join(" ")}:function(Se){return Se.join(" ")},L.map(_)},mu.splitTextToSize=function(i,e,t){var s,l=(t=t||{}).fontSize||this.internal.getFontSize(),c=(function(C){if(C.widths&&C.kerning)return{widths:C.widths,kerning:C.kerning};var L=this.internal.getFont(C.fontName,C.fontStyle);return L.metadata.Unicode?{widths:L.metadata.Unicode.widths||{0:1},kerning:L.metadata.Unicode.kerning||{}}:{font:L.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(i)?i:String(i).split(/\r?\n/);var p=1*this.internal.scaleFactor*e/l;c.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/l:0,c.lineIndent=t.lineIndent;var a,g,_=[];for(a=0,g=s.length;a<g;a++)_=_.concat(kv.apply(this,[s[a],p,c]));return _},function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},s={},l=0;l<e.length;l++)t[e[l]]="0123456789abcdef"[l],s["0123456789abcdef"[l]]=e[l];var c=function(L){return"0x"+parseInt(L,10).toString(16)},p=i.__fontmetrics__.compress=function(L){var M,I,G,j,Y=["{"];for(var q in L){if(M=L[q],isNaN(parseInt(q,10))?I="'"+q+"'":(q=parseInt(q,10),I=(I=c(q).slice(2)).slice(0,-1)+s[I.slice(-1)]),typeof M=="number")M<0?(G=c(M).slice(3),j="-"):(G=c(M).slice(2),j=""),G=j+G.slice(0,-1)+s[G.slice(-1)];else{if(fi(M)!=="object")throw new Error("Don't know what to do with value type "+fi(M)+".");G=p(M)}Y.push(I+G)}return Y.push("}"),Y.join("")},a=i.__fontmetrics__.uncompress=function(L){if(typeof L!="string")throw new Error("Invalid argument passed to uncompress.");for(var M,I,G,j,Y={},q=1,ne=Y,he=[],Se="",Ne="",Pe=L.length-1,Ee=1;Ee<Pe;Ee+=1)(j=L[Ee])=="'"?M?(G=M.join(""),M=void 0):M=[]:M?M.push(j):j=="{"?(he.push([ne,G]),ne={},G=void 0):j=="}"?((I=he.pop())[0][I[1]]=ne,G=void 0,ne=I[0]):j=="-"?q=-1:G===void 0?t.hasOwnProperty(j)?(Se+=t[j],G=parseInt(Se,16)*q,q=1,Se=""):Se+=j:t.hasOwnProperty(j)?(Ne+=t[j],ne[G]=parseInt(Ne,16)*q,q=1,G=void 0,Ne=""):Ne+=j;return Y},g={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},_={Unicode:{Courier:g,"Courier-Bold":g,"Courier-BoldOblique":g,"Courier-Oblique":g,Helvetica:g,"Helvetica-Bold":g,"Helvetica-BoldOblique":g,"Helvetica-Oblique":g,"Times-Roman":g,"Times-Bold":g,"Times-BoldItalic":g,"Times-Italic":g}},C={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(L){var M=L.font,I=C.Unicode[M.postScriptName];I&&(M.metadata.Unicode={},M.metadata.Unicode.widths=I.widths,M.metadata.Unicode.kerning=I.kerning);var G=_.Unicode[M.postScriptName];G&&(M.metadata.Unicode.encoding=G,M.encoding=G.codePages[0])}])}(Mr.API),function(i){var e=function(t){for(var s=t.length,l=new Uint8Array(s),c=0;c<s;c++)l[c]=t.charCodeAt(c);return l};i.API.events.push(["addFont",function(t){var s=void 0,l=t.font,c=t.instance;if(!l.isStandardFont){if(c===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");if(typeof(s=c.existsFileInVFS(l.postScriptName)===!1?c.loadFile(l.postScriptName):c.getFileFromVFS(l.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");(function(p,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(mh(a)),p.metadata=i.API.TTFFont.open(a),p.metadata.Unicode=p.metadata.Unicode||{encoding:{},kerning:{},widths:[]},p.metadata.glyIdsUsed=[0]})(l,s)}}])}(Mr),function(i){function e(){return(Pr.canvg?Promise.resolve(Pr.canvg):Promise.resolve().then(()=>Pz)).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Mr.API.addSvgAsImage=function(t,s,l,c,p,a,g,_){if(isNaN(s)||isNaN(l))throw Qi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(c)||isNaN(p))throw Qi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var C=document.createElement("canvas");C.width=c,C.height=p;var L=C.getContext("2d");L.fillStyle="#fff",L.fillRect(0,0,C.width,C.height);var M={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},I=this;return e().then(function(G){return G.fromString(L,t,M)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(G){return G.render(M)}).then(function(){I.addImage(C.toDataURL("image/jpeg",1),s,l,c,p,g,_)})}}(),Mr.API.putTotalPages=function(i){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(i,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var l=0;l<this.internal.pages[s].length;l++)this.internal.pages[s][l]=this.internal.pages[s][l].replace(e,t);return this},Mr.API.viewerPreferences=function(i,e){var t;i=i||{},e=e||!1;var s,l,c,p={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(p),g=[],_=0,C=0,L=0;function M(G,j){var Y,q=!1;for(Y=0;Y<G.length;Y+=1)G[Y]===j&&(q=!0);return q}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(p)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,i==="reset"||e===!0){var I=a.length;for(L=0;L<I;L+=1)t[a[L]].value=t[a[L]].defaultValue,t[a[L]].explicitSet=!1}if(fi(i)==="object"){for(l in i)if(c=i[l],M(a,l)&&c!==void 0){if(t[l].type==="boolean"&&typeof c=="boolean")t[l].value=c;else if(t[l].type==="name"&&M(t[l].valueSet,c))t[l].value=c;else if(t[l].type==="integer"&&Number.isInteger(c))t[l].value=c;else if(t[l].type==="array"){for(_=0;_<c.length;_+=1)if(s=!0,c[_].length===1&&typeof c[_][0]=="number")g.push(String(c[_]-1));else if(c[_].length>1){for(C=0;C<c[_].length;C+=1)typeof c[_][C]!="number"&&(s=!1);s===!0&&g.push([c[_][0]-1,c[_][1]-1].join(" "))}t[l].value="["+g.join(" ")+"]"}else t[l].value=t[l].defaultValue;t[l].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var G,j=[];for(G in t)t[G].explicitSet===!0&&(t[G].type==="name"?j.push("/"+G+" /"+t[G].value):j.push("/"+G+" "+t[G].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(i){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',l=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),c=unescape(encodeURIComponent(s)),p=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),g=unescape(encodeURIComponent("</x:xmpmeta>")),_=c.length+p.length+a.length+l.length+g.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+_+" >>"),this.internal.write("stream"),this.internal.write(l+c+p+a+g),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};i.addMetadata=function(s,l){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:l||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Mr.API),function(i){var e=i.API,t=e.pdfEscape16=function(c,p){for(var a,g=p.metadata.Unicode.widths,_=["","0","00","000","0000"],C=[""],L=0,M=c.length;L<M;++L){if(a=p.metadata.characterToGlyph(c.charCodeAt(L)),p.metadata.glyIdsUsed.push(a),p.metadata.toUnicode[a]=c.charCodeAt(L),g.indexOf(a)==-1&&(g.push(a),g.push([parseInt(p.metadata.widthOfGlyph(a),10)])),a=="0")return C.join("");a=a.toString(16),C.push(_[4-a.length],a)}return C.join("")},s=function(c){var p,a,g,_,C,L,M;for(C=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,g=[],L=0,M=(a=Object.keys(c).sort(function(I,G){return I-G})).length;L<M;L++)p=a[L],g.length>=100&&(C+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar`,g=[]),c[p]!==void 0&&c[p]!==null&&typeof c[p].toString=="function"&&(_=("0000"+c[p].toString(16)).slice(-4),p=("0000"+(+p).toString(16)).slice(-4),g.push("<"+p+"><"+_+">"));return g.length&&(C+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar
`),C+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(c){(function(p){var a=p.font,g=p.out,_=p.newObject,C=p.putStream;if(a.metadata instanceof i.API.TTFFont&&a.encoding==="Identity-H"){for(var L=a.metadata.Unicode.widths,M=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),I="",G=0;G<M.length;G++)I+=String.fromCharCode(M[G]);var j=_();C({data:I,addLength1:!0,objectId:j}),g("endobj");var Y=_();C({data:s(a.metadata.toUnicode),addLength1:!0,objectId:Y}),g("endobj");var q=_();g("<<"),g("/Type /FontDescriptor"),g("/FontName /"+cu(a.fontName)),g("/FontFile2 "+j+" 0 R"),g("/FontBBox "+i.API.PDFObject.convert(a.metadata.bbox)),g("/Flags "+a.metadata.flags),g("/StemV "+a.metadata.stemV),g("/ItalicAngle "+a.metadata.italicAngle),g("/Ascent "+a.metadata.ascender),g("/Descent "+a.metadata.decender),g("/CapHeight "+a.metadata.capHeight),g(">>"),g("endobj");var ne=_();g("<<"),g("/Type /Font"),g("/BaseFont /"+cu(a.fontName)),g("/FontDescriptor "+q+" 0 R"),g("/W "+i.API.PDFObject.convert(L)),g("/CIDToGIDMap /Identity"),g("/DW 1000"),g("/Subtype /CIDFontType2"),g("/CIDSystemInfo"),g("<<"),g("/Supplement 0"),g("/Registry (Adobe)"),g("/Ordering ("+a.encoding+")"),g(">>"),g(">>"),g("endobj"),a.objectNumber=_(),g("<<"),g("/Type /Font"),g("/Subtype /Type0"),g("/ToUnicode "+Y+" 0 R"),g("/BaseFont /"+cu(a.fontName)),g("/Encoding /"+a.encoding),g("/DescendantFonts ["+ne+" 0 R]"),g(">>"),g("endobj"),a.isAlreadyPutted=!0}})(c)}]),e.events.push(["putFont",function(c){(function(p){var a=p.font,g=p.out,_=p.newObject,C=p.putStream;if(a.metadata instanceof i.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var L=a.metadata.rawData,M="",I=0;I<L.length;I++)M+=String.fromCharCode(L[I]);var G=_();C({data:M,addLength1:!0,objectId:G}),g("endobj");var j=_();C({data:s(a.metadata.toUnicode),addLength1:!0,objectId:j}),g("endobj");var Y=_();g("<<"),g("/Descent "+a.metadata.decender),g("/CapHeight "+a.metadata.capHeight),g("/StemV "+a.metadata.stemV),g("/Type /FontDescriptor"),g("/FontFile2 "+G+" 0 R"),g("/Flags 96"),g("/FontBBox "+i.API.PDFObject.convert(a.metadata.bbox)),g("/FontName /"+cu(a.fontName)),g("/ItalicAngle "+a.metadata.italicAngle),g("/Ascent "+a.metadata.ascender),g(">>"),g("endobj"),a.objectNumber=_();for(var q=0;q<a.metadata.hmtx.widths.length;q++)a.metadata.hmtx.widths[q]=parseInt(a.metadata.hmtx.widths[q]*(1e3/a.metadata.head.unitsPerEm));g("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+cu(a.fontName)+"/FontDescriptor "+Y+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),g("endobj"),a.isAlreadyPutted=!0}})(c)}]);var l=function(c){var p,a=c.text||"",g=c.x,_=c.y,C=c.options||{},L=c.mutex||{},M=L.pdfEscape,I=L.activeFontKey,G=L.fonts,j=I,Y="",q=0,ne="",he=G[j].encoding;if(G[j].encoding!=="Identity-H")return{text:a,x:g,y:_,options:C,mutex:L};for(ne=a,j=I,Array.isArray(a)&&(ne=a[0]),q=0;q<ne.length;q+=1)G[j].metadata.hasOwnProperty("cmap")&&(p=G[j].metadata.cmap.unicode.codeMap[ne[q].charCodeAt(0)]),p||ne[q].charCodeAt(0)<256&&G[j].metadata.hasOwnProperty("Unicode")?Y+=ne[q]:Y+="";var Se="";return parseInt(j.slice(1))<14||he==="WinAnsiEncoding"?Se=M(Y,j).split("").map(function(Ne){return Ne.charCodeAt(0).toString(16)}).join(""):he==="Identity-H"&&(Se=t(Y,G[j])),L.isHex=!0,{text:Se,x:g,y:_,options:C,mutex:L}};e.events.push(["postProcessText",function(c){var p=c.text||"",a=[],g={text:p,x:c.x,y:c.y,options:c.options,mutex:c.mutex};if(Array.isArray(p)){var _=0;for(_=0;_<p.length;_+=1)Array.isArray(p[_])&&p[_].length===3?a.push([l(Object.assign({},g,{text:p[_][0]})).text,p[_][1],p[_][2]]):a.push(l(Object.assign({},g,{text:p[_]})).text);c.text=a}else c.text=l(Object.assign({},g,{text:p})).text}])}(Mr),function(i){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},i.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},i.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Mr.API),function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(s){var l,c,p,a,g,_,C,L=e,M=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],I=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],G={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],q=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ne=!1,he=0;this.__bidiEngine__={};var Se=function(ce){var Ae=ce.charCodeAt(),xe=Ae>>8,_e=j[xe];return _e!==void 0?L[256*_e+(255&Ae)]:xe===252||xe===253?"AL":q.test(xe)?"L":xe===8?"R":"N"},Ne=function(ce){for(var Ae,xe=0;xe<ce.length;xe++){if((Ae=Se(ce.charAt(xe)))==="L")return!1;if(Ae==="R")return!0}return!1},Pe=function(ce,Ae,xe,_e){var et,Je,rt,Ye,it=Ae[_e];switch(it){case"L":case"R":ne=!1;break;case"N":case"AN":break;case"EN":ne&&(it="AN");break;case"AL":ne=!0,it="R";break;case"WS":it="N";break;case"CS":_e<1||_e+1>=Ae.length||(et=xe[_e-1])!=="EN"&&et!=="AN"||(Je=Ae[_e+1])!=="EN"&&Je!=="AN"?it="N":ne&&(Je="AN"),it=Je===et?Je:"N";break;case"ES":it=(et=_e>0?xe[_e-1]:"B")==="EN"&&_e+1<Ae.length&&Ae[_e+1]==="EN"?"EN":"N";break;case"ET":if(_e>0&&xe[_e-1]==="EN"){it="EN";break}if(ne){it="N";break}for(rt=_e+1,Ye=Ae.length;rt<Ye&&Ae[rt]==="ET";)rt++;it=rt<Ye&&Ae[rt]==="EN"?"EN":"N";break;case"NSM":if(p&&!a){for(Ye=Ae.length,rt=_e+1;rt<Ye&&Ae[rt]==="NSM";)rt++;if(rt<Ye){var nt=ce[_e],Bt=nt>=1425&&nt<=2303||nt===64286;if(et=Ae[rt],Bt&&(et==="R"||et==="AL")){it="R";break}}}it=_e<1||(et=Ae[_e-1])==="B"?"N":xe[_e-1];break;case"B":ne=!1,l=!0,it=he;break;case"S":c=!0,it="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ne=!1;break;case"BN":it="N"}return it},Ee=function(ce,Ae,xe){var _e=ce.split("");return xe&&fe(_e,xe,{hiLevel:he}),_e.reverse(),Ae&&Ae.reverse(),_e.join("")},fe=function(ce,Ae,xe){var _e,et,Je,rt,Ye,it=-1,nt=ce.length,Bt=0,ee=[],pe=he?I:M,ye=[];for(ne=!1,l=!1,c=!1,et=0;et<nt;et++)ye[et]=Se(ce[et]);for(Je=0;Je<nt;Je++){if(Ye=Bt,ee[Je]=Pe(ce,ye,ee,Je),_e=240&(Bt=pe[Ye][G[ee[Je]]]),Bt&=15,Ae[Je]=rt=pe[Bt][5],_e>0)if(_e===16){for(et=it;et<Je;et++)Ae[et]=1;it=-1}else it=-1;if(pe[Bt][6])it===-1&&(it=Je);else if(it>-1){for(et=it;et<Je;et++)Ae[et]=rt;it=-1}ye[Je]==="B"&&(Ae[Je]=0),xe.hiLevel|=rt}c&&function(Re,Ge,tt){for(var st=0;st<tt;st++)if(Re[st]==="S"){Ge[st]=he;for(var ot=st-1;ot>=0&&Re[ot]==="WS";ot--)Ge[ot]=he}}(ye,Ae,nt)},We=function(ce,Ae,xe,_e,et){if(!(et.hiLevel<ce)){if(ce===1&&he===1&&!l)return Ae.reverse(),void(xe&&xe.reverse());for(var Je,rt,Ye,it,nt=Ae.length,Bt=0;Bt<nt;){if(_e[Bt]>=ce){for(Ye=Bt+1;Ye<nt&&_e[Ye]>=ce;)Ye++;for(it=Bt,rt=Ye-1;it<rt;it++,rt--)Je=Ae[it],Ae[it]=Ae[rt],Ae[rt]=Je,xe&&(Je=xe[it],xe[it]=xe[rt],xe[rt]=Je);Bt=Ye}Bt++}}},Ke=function(ce,Ae,xe){var _e=ce.split(""),et={hiLevel:he};return xe||(xe=[]),fe(_e,xe,et),function(Je,rt,Ye){if(Ye.hiLevel!==0&&C)for(var it,nt=0;nt<Je.length;nt++)rt[nt]===1&&(it=Y.indexOf(Je[nt]))>=0&&(Je[nt]=Y[it+1])}(_e,xe,et),We(2,_e,Ae,xe,et),We(1,_e,Ae,xe,et),_e.join("")};return this.__bidiEngine__.doBidiReorder=function(ce,Ae,xe){if(function(et,Je){if(Je)for(var rt=0;rt<et.length;rt++)Je[rt]=rt;a===void 0&&(a=Ne(et)),_===void 0&&(_=Ne(et))}(ce,Ae),p||!g||_)if(p&&g&&a^_)he=a?1:0,ce=Ee(ce,Ae,xe);else if(!p&&g&&_)he=a?1:0,ce=Ke(ce,Ae,xe),ce=Ee(ce,Ae);else if(!p||a||g||_){if(p&&!g&&a^_)ce=Ee(ce,Ae),a?(he=0,ce=Ke(ce,Ae,xe)):(he=1,ce=Ke(ce,Ae,xe),ce=Ee(ce,Ae));else if(p&&a&&!g&&_)he=1,ce=Ke(ce,Ae,xe),ce=Ee(ce,Ae);else if(!p&&!g&&a^_){var _e=C;a?(he=1,ce=Ke(ce,Ae,xe),he=0,C=!1,ce=Ke(ce,Ae,xe),C=_e):(he=0,ce=Ke(ce,Ae,xe),ce=Ee(ce,Ae),he=1,C=!1,ce=Ke(ce,Ae,xe),C=_e,ce=Ee(ce,Ae))}}else he=0,ce=Ke(ce,Ae,xe);else he=a?1:0,ce=Ke(ce,Ae,xe);return ce},this.__bidiEngine__.setOptions=function(ce){ce&&(p=ce.isInputVisual,g=ce.isOutputVisual,a=ce.isInputRtl,_=ce.isOutputRtl,C=ce.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(s){var l=s.text,c=(s.x,s.y,s.options||{}),p=(s.mutex,c.lang,[]);if(c.isInputVisual=typeof c.isInputVisual!="boolean"||c.isInputVisual,t.setOptions(c),Object.prototype.toString.call(l)==="[object Array]"){var a=0;for(p=[],a=0;a<l.length;a+=1)Object.prototype.toString.call(l[a])==="[object Array]"?p.push([t.doBidiReorder(l[a][0]),l[a][1],l[a][2]]):p.push([t.doBidiReorder(l[a])]);s.text=p}else s.text=t.doBidiReorder(l);t.setOptions({isInputVisual:!0})}])}(Mr),Mr.API.TTFFont=function(){function i(e){var t;if(this.rawData=e,t=this.contents=new Pl(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new b3(this),this.registerTTF()}return i.open=function(e){return new i(e)},i.prototype.parse=function(){return this.directory=new A3(this.contents),this.head=new c3(this),this.name=new f3(this),this.cmap=new Rv(this),this.toUnicode={},this.hhea=new u3(this),this.maxp=new g3(this),this.hmtx=new m3(this),this.post=new p3(this),this.os2=new h3(this),this.loca=new w3(this),this.glyf=new y3(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var e,t,s,l,c;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var p,a,g,_;for(_=[],p=0,a=(g=this.bbox).length;p<a;p++)e=g[p],_.push(Math.round(e*this.scaleFactor));return _}).call(this),this.stemV=0,this.post.exists?(s=255&(l=this.post.italic_angle),32768&(t=l>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(c=this.familyClass)===1||c===2||c===3||c===4||c===5||c===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},i.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},i.prototype.widthOfString=function(e,t,s){var l,c,p,a;for(p=0,c=0,a=(e=""+e).length;0<=a?c<a:c>a;c=0<=a?++c:--c)l=e.charCodeAt(c),p+=this.widthOfGlyph(this.characterToGlyph(l))+s*(1e3/t)||0;return p*(t/1e3)},i.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},i}();var fo,Pl=function(){function i(e){this.data=e??[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(e){return this.data[this.pos++]=e},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},i.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},i.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},i.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},i.prototype.writeString=function(e){var t,s,l;for(l=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)l.push(this.writeByte(e.charCodeAt(t)));return l},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(e){return this.writeInt16(e)},i.prototype.readLongLong=function(){var e,t,s,l,c,p,a,g;return e=this.readByte(),t=this.readByte(),s=this.readByte(),l=this.readByte(),c=this.readByte(),p=this.readByte(),a=this.readByte(),g=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^l)+16777216*(255^c)+65536*(255^p)+256*(255^a)+(255^g)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*l+16777216*c+65536*p+256*a+g},i.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(e){return this.writeInt32(e)},i.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},i.prototype.write=function(e){var t,s,l,c;for(c=[],s=0,l=e.length;s<l;s++)t=e[s],c.push(this.writeByte(t));return c},i}(),A3=function(){var i;function e(t){var s,l,c;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},l=0,c=this.tableCount;0<=c?l<c:l>c;l=0<=c?++l:--l)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,l,c,p,a,g,_,C,L,M,I,G,j;for(j in I=Object.keys(t).length,g=Math.log(2),L=16*Math.floor(Math.log(I)/g),p=Math.floor(L/g),C=16*I-L,(l=new Pl).writeInt(this.scalarType),l.writeShort(I),l.writeShort(L),l.writeShort(p),l.writeShort(C),c=16*I,_=l.pos+c,a=null,G=[],t)for(M=t[j],l.writeString(j),l.writeInt(i(M)),l.writeInt(_),l.writeInt(M.length),G=G.concat(M),j==="head"&&(a=_),_+=M.length;_%4;)G.push(0),_++;return l.write(G),s=2981146554-i(l.data),l.pos=a+8,l.writeUInt32(s),l.data},i=function(t){var s,l,c,p;for(t=zv.call(t);t.length%4;)t.push(0);for(c=new Pl(t),l=0,s=0,p=t.length;s<p;s=s+=4)l+=c.readUInt32();return 4294967295&l},e}(),l3={}.hasOwnProperty,AA=function(i,e){for(var t in e)l3.call(e,t)&&(i[t]=e[t]);function s(){this.constructor=i}return s.prototype=e.prototype,i.prototype=new s,i.__super__=e.prototype,i};fo=function(){function i(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i}();var c3=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return AA(e,fo),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var s;return(s=new Pl).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(t),s.writeShort(this.glyphDataFormat),s.data},e}(),Ov=function(){function i(e,t){var s,l,c,p,a,g,_,C,L,M,I,G,j,Y,q,ne,he;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),L=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(g=0;g<256;++g)this.codeMap[g]=e.readByte();break;case 4:for(I=e.readUInt16(),M=I/2,e.pos+=6,c=function(){var Se,Ne;for(Ne=[],g=Se=0;0<=M?Se<M:Se>M;g=0<=M?++Se:--Se)Ne.push(e.readUInt16());return Ne}(),e.pos+=2,j=function(){var Se,Ne;for(Ne=[],g=Se=0;0<=M?Se<M:Se>M;g=0<=M?++Se:--Se)Ne.push(e.readUInt16());return Ne}(),_=function(){var Se,Ne;for(Ne=[],g=Se=0;0<=M?Se<M:Se>M;g=0<=M?++Se:--Se)Ne.push(e.readUInt16());return Ne}(),C=function(){var Se,Ne;for(Ne=[],g=Se=0;0<=M?Se<M:Se>M;g=0<=M?++Se:--Se)Ne.push(e.readUInt16());return Ne}(),l=(this.length-e.pos+this.offset)/2,a=function(){var Se,Ne;for(Ne=[],g=Se=0;0<=l?Se<l:Se>l;g=0<=l?++Se:--Se)Ne.push(e.readUInt16());return Ne}(),g=q=0,he=c.length;q<he;g=++q)for(Y=c[g],s=ne=G=j[g];G<=Y?ne<=Y:ne>=Y;s=G<=Y?++ne:--ne)C[g]===0?p=s+_[g]:(p=a[C[g]/2+(s-G)-(M-g)]||0)!==0&&(p+=_[g]),this.codeMap[s]=65535&p}e.pos=L}return i.encode=function(e,t){var s,l,c,p,a,g,_,C,L,M,I,G,j,Y,q,ne,he,Se,Ne,Pe,Ee,fe,We,Ke,ce,Ae,xe,_e,et,Je,rt,Ye,it,nt,Bt,ee,pe,ye,Re,Ge,tt,st,ot,Ct,Et,zt;switch(_e=new Pl,p=Object.keys(e).sort(function(Vt,Jt){return Vt-Jt}),t){case"macroman":for(j=0,Y=function(){var Vt=[];for(G=0;G<256;++G)Vt.push(0);return Vt}(),ne={0:0},c={},et=0,it=p.length;et<it;et++)ne[ot=e[l=p[et]]]==null&&(ne[ot]=++j),c[l]={old:e[l],new:ne[e[l]]},Y[l]=ne[e[l]];return _e.writeUInt16(1),_e.writeUInt16(0),_e.writeUInt32(12),_e.writeUInt16(0),_e.writeUInt16(262),_e.writeUInt16(0),_e.write(Y),{charMap:c,subtable:_e.data,maxGlyphID:j+1};case"unicode":for(Ae=[],L=[],he=0,ne={},s={},q=_=null,Je=0,nt=p.length;Je<nt;Je++)ne[Ne=e[l=p[Je]]]==null&&(ne[Ne]=++he),s[l]={old:Ne,new:ne[Ne]},a=ne[Ne]-l,q!=null&&a===_||(q&&L.push(q),Ae.push(l),_=a),q=l;for(q&&L.push(q),L.push(65535),Ae.push(65535),Ke=2*(We=Ae.length),fe=2*Math.pow(Math.log(We)/Math.LN2,2),M=Math.log(fe/2)/Math.LN2,Ee=2*We-fe,g=[],Pe=[],I=[],G=rt=0,Bt=Ae.length;rt<Bt;G=++rt){if(ce=Ae[G],C=L[G],ce===65535){g.push(0),Pe.push(0);break}if(ce-(xe=s[ce].new)>=32768)for(g.push(0),Pe.push(2*(I.length+We-G)),l=Ye=ce;ce<=C?Ye<=C:Ye>=C;l=ce<=C?++Ye:--Ye)I.push(s[l].new);else g.push(xe-ce),Pe.push(0)}for(_e.writeUInt16(3),_e.writeUInt16(1),_e.writeUInt32(12),_e.writeUInt16(4),_e.writeUInt16(16+8*We+2*I.length),_e.writeUInt16(0),_e.writeUInt16(Ke),_e.writeUInt16(fe),_e.writeUInt16(M),_e.writeUInt16(Ee),tt=0,ee=L.length;tt<ee;tt++)l=L[tt],_e.writeUInt16(l);for(_e.writeUInt16(0),st=0,pe=Ae.length;st<pe;st++)l=Ae[st],_e.writeUInt16(l);for(Ct=0,ye=g.length;Ct<ye;Ct++)a=g[Ct],_e.writeUInt16(a);for(Et=0,Re=Pe.length;Et<Re;Et++)Se=Pe[Et],_e.writeUInt16(Se);for(zt=0,Ge=I.length;zt<Ge;zt++)j=I[zt],_e.writeUInt16(j);return{charMap:s,subtable:_e.data,maxGlyphID:he+1}}},i}(),Rv=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return AA(e,fo),e.prototype.tag="cmap",e.prototype.parse=function(t){var s,l,c;for(t.pos=this.offset,this.version=t.readUInt16(),c=t.readUInt16(),this.tables=[],this.unicode=null,l=0;0<=c?l<c:l>c;l=0<=c?++l:--l)s=new Ov(t,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},e.encode=function(t,s){var l,c;return s==null&&(s="macroman"),l=Ov.encode(t,s),(c=new Pl).writeUInt16(0),c.writeUInt16(1),l.table=c.data.concat(l.subtable),l},e}(),u3=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return AA(e,fo),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),h3=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return AA(e,fo),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var s,l;for(l=[],s=0;s<10;++s)l.push(t.readByte());return l}(),this.charRange=function(){var s,l;for(l=[],s=0;s<4;++s)l.push(t.readInt());return l}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var s,l;for(l=[],s=0;s<2;s=++s)l.push(t.readInt());return l}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),p3=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return AA(e,fo),e.prototype.tag="post",e.prototype.parse=function(t){var s,l,c;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var p;for(l=t.readUInt16(),this.glyphNameIndex=[],p=0;0<=l?p<l:p>l;p=0<=l?++p:--p)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],c=[];t.pos<this.offset+this.length;)s=t.readByte(),c.push(this.names.push(t.readString(s)));return c;case 151552:return l=t.readUInt16(),this.offsets=t.read(l);case 196608:break;case 262144:return this.map=(function(){var a,g,_;for(_=[],p=a=0,g=this.file.maxp.numGlyphs;0<=g?a<g:a>g;p=0<=g?++a:--a)_.push(t.readUInt32());return _}).call(this)}},e}(),d3=function(i,e){this.raw=i,this.length=i.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},f3=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return AA(e,fo),e.prototype.tag="name",e.prototype.parse=function(t){var s,l,c,p,a,g,_,C,L,M,I;for(t.pos=this.offset,t.readShort(),s=t.readShort(),g=t.readShort(),l=[],p=0;0<=s?p<s:p>s;p=0<=s?++p:--p)l.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+g+t.readShort()});for(_={},p=L=0,M=l.length;L<M;p=++L)c=l[p],t.pos=c.offset,C=t.readString(c.length),a=new d3(C,c),_[I=c.nameID]==null&&(_[I]=[]),_[c.nameID].push(a);this.strings=_,this.copyright=_[0],this.fontFamily=_[1],this.fontSubfamily=_[2],this.uniqueSubfamily=_[3],this.fontName=_[4],this.version=_[5];try{this.postscriptName=_[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=_[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=_[7],this.manufacturer=_[8],this.designer=_[9],this.description=_[10],this.vendorUrl=_[11],this.designerUrl=_[12],this.license=_[13],this.licenseUrl=_[14],this.preferredFamily=_[15],this.preferredSubfamily=_[17],this.compatibleFull=_[18],this.sampleText=_[19]},e}(),g3=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return AA(e,fo),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),m3=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return AA(e,fo),e.prototype.tag="hmtx",e.prototype.parse=function(t){var s,l,c,p,a,g,_;for(t.pos=this.offset,this.metrics=[],s=0,g=this.file.hhea.numberOfMetrics;0<=g?s<g:s>g;s=0<=g?++s:--s)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(c=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var C,L;for(L=[],s=C=0;0<=c?C<c:C>c;s=0<=c?++C:--C)L.push(t.readInt16());return L}(),this.widths=(function(){var C,L,M,I;for(I=[],C=0,L=(M=this.metrics).length;C<L;C++)p=M[C],I.push(p.advance);return I}).call(this),l=this.widths[this.widths.length-1],_=[],s=a=0;0<=c?a<c:a>c;s=0<=c?++a:--a)_.push(this.widths.push(l));return _},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),zv=[].slice,y3=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return AA(e,fo),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var s,l,c,p,a,g,_,C,L,M;return t in this.cache?this.cache[t]:(p=this.file.loca,s=this.file.contents,l=p.indexOf(t),(c=p.lengthOf(t))===0?this.cache[t]=null:(s.pos=this.offset+l,a=(g=new Pl(s.read(c))).readShort(),C=g.readShort(),M=g.readShort(),_=g.readShort(),L=g.readShort(),this.cache[t]=a===-1?new _3(g,C,M,_,L):new v3(g,a,C,M,_,L),this.cache[t]))},e.prototype.encode=function(t,s,l){var c,p,a,g,_;for(a=[],p=[],g=0,_=s.length;g<_;g++)c=t[s[g]],p.push(a.length),c&&(a=a.concat(c.encode(l)));return p.push(a.length),{table:a,offsets:p}},e}(),v3=function(){function i(e,t,s,l,c,p){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=l,this.xMax=c,this.yMax=p,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i}(),_3=function(){function i(e,t,s,l,c){var p,a;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=l,this.yMax=c,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],p=this.raw;a=p.readShort(),this.glyphOffsets.push(p.pos),this.glyphIDs.push(p.readUInt16()),32&a;)p.pos+=1&a?4:2,128&a?p.pos+=8:64&a?p.pos+=4:8&a&&(p.pos+=2)}return i.prototype.encode=function(){var e,t,s;for(t=new Pl(zv.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},i}(),w3=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return AA(e,fo),e.prototype.tag="loca",e.prototype.parse=function(t){var s,l;return t.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var c,p;for(p=[],l=0,c=this.length;l<c;l+=2)p.push(2*t.readUInt16());return p}).call(this):(function(){var c,p;for(p=[],l=0,c=this.length;l<c;l+=4)p.push(t.readUInt32());return p}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,s){for(var l=new Uint32Array(this.offsets.length),c=0,p=0,a=0;a<l.length;++a)if(l[a]=c,p<s.length&&s[p]==a){++p,l[a]=c;var g=this.offsets[a],_=this.offsets[a+1]-g;_>0&&(c+=_)}for(var C=new Array(4*l.length),L=0;L<l.length;++L)C[4*L+3]=255&l[L],C[4*L+2]=(65280&l[L])>>8,C[4*L+1]=(16711680&l[L])>>16,C[4*L]=(4278190080&l[L])>>24;return C},e}(),b3=function(){function i(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var e,t,s,l,c;for(t in l=this.font.cmap.tables[0].codeMap,e={},c=this.subset)s=c[t],e[t]=l[s];return e},i.prototype.glyphsFor=function(e){var t,s,l,c,p,a,g;for(l={},p=0,a=e.length;p<a;p++)l[c=e[p]]=this.font.glyf.glyphFor(c);for(c in t=[],l)(s=l[c])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(c in g=this.glyphsFor(t))s=g[c],l[c]=s;return l},i.prototype.encode=function(e,t){var s,l,c,p,a,g,_,C,L,M,I,G,j,Y,q;for(l in s=Rv.encode(this.generateCmap(),"unicode"),p=this.glyphsFor(e),I={0:0},q=s.charMap)I[(g=q[l]).old]=g.new;for(G in M=s.maxGlyphID,p)G in I||(I[G]=M++);return C=function(ne){var he,Se;for(he in Se={},ne)Se[ne[he]]=he;return Se}(I),L=Object.keys(C).sort(function(ne,he){return ne-he}),j=function(){var ne,he,Se;for(Se=[],ne=0,he=L.length;ne<he;ne++)a=L[ne],Se.push(C[a]);return Se}(),c=this.font.glyf.encode(p,j,I),_=this.font.loca.encode(c.offsets,j),Y={cmap:this.font.cmap.raw(),glyf:c.table,loca:_,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(Y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Y)},i}();Mr.API.PDFObject=function(){var i;function e(){}return i=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,l,c,p;if(Array.isArray(t))return"["+function(){var a,g,_;for(_=[],a=0,g=t.length;a<g;a++)s=t[a],_.push(e.convert(s));return _}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+i(t.getUTCFullYear(),4)+i(t.getUTCMonth(),2)+i(t.getUTCDate(),2)+i(t.getUTCHours(),2)+i(t.getUTCMinutes(),2)+i(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(l in c=["<<"],t)p=t[l],c.push("/"+l+" "+e.convert(p));return c.push(">>"),c.join(`
`)}return""+t},e}(),function(i){var e={};function t(s){if(e[s])return e[s].exports;var l=e[s]={i:s,l:!1,exports:{}};return i[s].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=i,t.c=e,t.d=function(s,l,c){t.o(s,l)||Object.defineProperty(s,l,{enumerable:!0,get:c})},t.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},t.t=function(s,l){if(1&l&&(s=t(s)),8&l||4&l&&typeof s=="object"&&s&&s.__esModule)return s;var c=Object.create(null);if(t.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:s}),2&l&&typeof s!="string")for(var p in s)t.d(c,p,(function(a){return s[a]}).bind(null,p));return c},t.n=function(s){var l=s&&s.__esModule?function(){return s.default}:function(){return s};return t.d(l,"a",l),l},t.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)},t.p="",t(t.s=0)}([function(i,e,t){i.exports=t(1)},function(i,e){function t(l,c){for(var p=0;p<c.length;p++){var a=c[p];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(l,a.key,a)}}var s=function(){function l(){(function(a,g){if(!(a instanceof g))throw new TypeError("Cannot call a class as a function")})(this,l),this.options={overlayBackgroundColor:"#666666",overlayOpacity:.6,spinnerIcon:"ball-circus",spinnerColor:"#000",spinnerSize:"3x",overlayIDName:"overlay",spinnerIDName:"spinner",offsetY:0,offsetX:0,lockScroll:!1,containerID:null,spinnerZIndex:99999,overlayZIndex:99998},this.stylesheetBaseURL="https://cdn.jsdelivr.net/npm/load-awesome@1.1.0/css/",this.spinner=null,this.spinnerStylesheetURL=null,this.numberOfEmptyDivForSpinner={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":1,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1}}var c,p;return c=l,(p=[{key:"show",value:function(a){this.setOptions(a),this.addSpinnerStylesheet(),this.generateSpinnerElement(),this.options.lockScroll&&(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"),this.generateAndAddOverlayElement()}},{key:"hide",value:function(){this.options.lockScroll&&(document.body.style.overflow="",document.documentElement.style.overflow="");var a=document.getElementById("loading-overlay-stylesheet");a&&(a.disabled=!0,a.parentNode.removeChild(a),document.getElementById(this.options.overlayIDName).remove(),document.getElementById(this.options.spinnerIDName).remove())}},{key:"setOptions",value:function(a){if(a!==void 0)for(var g in a)this.options[g]=a[g]}},{key:"generateAndAddOverlayElement",value:function(){var a="50%";this.options.offsetX!==0&&(a="calc(50% + "+this.options.offsetX+")");var g="50%";if(this.options.offsetY!==0&&(g="calc(50% + "+this.options.offsetY+")"),this.options.containerID&&document.body.contains(document.getElementById(this.options.containerID))){var _='<div id="'.concat(this.options.overlayIDName,'" style="display: block !important; position: absolute; top: 0; left: 0; overflow: auto; opacity: ').concat(this.options.overlayOpacity,"; background: ").concat(this.options.overlayBackgroundColor,'; z-index: 50; width: 100%; height: 100%;"></div><div id="').concat(this.options.spinnerIDName,'" style="display: block !important; position: absolute; top: ').concat(g,"; left: ").concat(a,'; -webkit-transform: translate(-50%); -ms-transform: translate(-50%); transform: translate(-50%); z-index: 9999;">').concat(this.spinner,"</div>"),C=document.getElementById(this.options.containerID);return C.style.position="relative",void C.insertAdjacentHTML("beforeend",_)}var L='<div id="'.concat(this.options.overlayIDName,'" style="display: block !important; position: fixed; top: 0; left: 0; overflow: auto; opacity: ').concat(this.options.overlayOpacity,"; background: ").concat(this.options.overlayBackgroundColor,"; z-index: ").concat(this.options.overlayZIndex,'; width: 100%; height: 100%;"></div><div id="').concat(this.options.spinnerIDName,'" style="display: block !important; position: fixed; top: ').concat(g,"; left: ").concat(a,"; -webkit-transform: translate(-50%); -ms-transform: translate(-50%); transform: translate(-50%); z-index: ").concat(this.options.spinnerZIndex,';">').concat(this.spinner,"</div>");document.body.insertAdjacentHTML("beforeend",L)}},{key:"generateSpinnerElement",value:function(){var a=this,g=Object.keys(this.numberOfEmptyDivForSpinner).find(function(C){return C===a.options.spinnerIcon}),_=this.generateEmptyDivElement(this.numberOfEmptyDivForSpinner[g]);this.spinner='<div style="color: '.concat(this.options.spinnerColor,'" class="la-').concat(this.options.spinnerIcon," la-").concat(this.options.spinnerSize,'">').concat(_,"</div>")}},{key:"addSpinnerStylesheet",value:function(){this.setSpinnerStylesheetURL();var a=document.createElement("link");a.setAttribute("id","loading-overlay-stylesheet"),a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",this.spinnerStylesheetURL),document.getElementsByTagName("head")[0].appendChild(a)}},{key:"setSpinnerStylesheetURL",value:function(){this.spinnerStylesheetURL=this.stylesheetBaseURL+this.options.spinnerIcon+".min.css"}},{key:"generateEmptyDivElement",value:function(a){for(var g="",_=1;_<=a;_++)g+="<div></div>";return g}}])&&t(c.prototype,p),l}();window.JsLoadingOverlay=new s,i.exports=JsLoadingOverlay}]);const Ml={JPEG:"jpg",PNG:"png",PDF:"pdf",SVG:"svg"},yh={in:"in",mm:"mm"},yu={A2:[594,420],A3:[420,297],A4:[297,210],A5:[210,148],A6:[148,105],B2:[707,500],B3:[500,353],B4:[353,250],B5:[250,176],B6:[176,125]},vh={Landscape:"landscape",Portrait:"portrait"},zg={72:72,96:96,200:200,300:300,400:400};let x3=class{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yu.A4,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:300,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ml.PNG.toString(),c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:yh.mm,p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"map";Mi(this,"map"),Mi(this,"width"),Mi(this,"height"),Mi(this,"dpi"),Mi(this,"format"),Mi(this,"unit"),Mi(this,"fileName"),this.map=e,this.width=t[0],this.height=t[1],this.dpi=s,this.format=l,this.unit=c,this.fileName=p}generate(){const e=this;JsLoadingOverlay.show({overlayBackgroundColor:"#5D5959",overlayOpacity:"0.6",spinnerIcon:"ball-spin",spinnerColor:"#2400FD",spinnerSize:"2x",overlayIDName:"overlay",spinnerIDName:"spinner",offsetX:0,offsetY:0,containerID:null,lockScroll:!1,overlayZIndex:9998,spinnerZIndex:9999});const t=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return e.dpi/96}});const s=document.createElement("div");s.className="hidden-map",document.body.appendChild(s);const l=document.createElement("div");l.style.width=this.toPixels(this.width),l.style.height=this.toPixels(this.height),s.appendChild(l);const c=this.map.getStyle();if(c&&c.sources){const a=c.sources;Object.keys(a).forEach(g=>{const _=a[g];Object.keys(_).forEach(C=>{_[C]||delete _[C]})})}const p=new iv.Map({container:l,style:c,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:this.map._requestManager._transformRequestFn});p.once("idle",()=>{var a;const g=p.getCanvas(),_=`${this.fileName}.${e.format}`;switch(e.format){case Ml.PNG:e.toPNG(g,_);break;case Ml.JPEG:e.toJPEG(g,_);break;case Ml.PDF:e.toPDF(p,_);break;case Ml.SVG:e.toSVG(g,_);break;default:console.error(`Invalid file format: ${e.format}`);break}p.remove(),(a=s.parentNode)==null||a.removeChild(s),Object.defineProperty(window,"devicePixelRatio",{get(){return t}}),s.remove(),JsLoadingOverlay.hide()})}toPNG(e,t){const s=document.createElement("a");s.href=e.toDataURL(),s.download=t,s.click(),s.remove()}toJPEG(e,t){const s=e.toDataURL("image/jpeg",.85);if(e.msToBlob){const l=this.toBlob(s);window.navigator.msSaveBlob(l,t)}else{const l=document.createElement("a");l.href=s,l.download=t,l.click(),l.remove()}}toPDF(e,t){const s=e.getCanvas(),l=new Mr({orientation:this.width>this.height?"l":"p",unit:this.unit,compress:!0,format:[this.width,this.height]});l.addImage(s.toDataURL("image/png"),"png",0,0,this.width,this.height,void 0,"FAST");const{lng:c,lat:p}=e.getCenter();l.setProperties({title:e.getStyle().name,subject:`center: [${c}, ${p}], zoom: ${e.getZoom()}`,creator:"Mapbox GL Export Plugin",author:"(c)Mapbox, (c)OpenStreetMap"}),l.save(t)}toSVG(e,t){const s=e.toDataURL("image/png"),l=Number(this.toPixels(this.width,this.dpi).replace("px","")),c=Number(this.toPixels(this.height,this.dpi).replace("px","")),p=`
    <svg xmlns="http://www.w3.org/2000/svg" 
      xmlns:xlink="http://www.w3.org/1999/xlink" 
      version="1.1" 
      width="${l}" 
      height="${c}" 
      viewBox="0 0 ${l} ${c}" 
      xml:space="preserve">
        <image style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;"  
      xlink:href="${s}" width="${l}" height="${c}"></image>
    </svg>`,a=document.createElement("a");a.href=`data:application/xml,${encodeURIComponent(p)}`,a.download=t,a.click(),a.remove()}toPixels(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:96;return this.unit===yh.mm&&(t/=25.4),`${t*e}px`}toBlob(e){const t=atob(e.replace(/^.*,/,"")),s=new Uint8Array(t.length);for(let l=0;l<t.length;l+=1)s[l]=t.charCodeAt(l);return new Blob([s.buffer],{type:"image/png"})}},B3=class{constructor(e){Mi(this,"map"),Mi(this,"width"),Mi(this,"height"),Mi(this,"unit"),Mi(this,"svgCanvas"),Mi(this,"svgPath");var t,s,l;if(this.map=e,this.map===void 0)return;this.mapResize=this.mapResize.bind(this),this.map.on("resize",this.mapResize);const c=(t=this.map)==null?void 0:t.getCanvas().clientWidth,p=(s=this.map)==null?void 0:s.getCanvas().clientHeight,a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.setAttribute("width",`${c}px`),a.setAttribute("height",`${p}px`);const g=document.createElementNS("http://www.w3.org/2000/svg","path");g.setAttribute("style","fill:#888888;stroke-width:0"),g.setAttribute("fill-opacity","0.5"),a.append(g),(l=this.map)==null||l.getCanvasContainer().appendChild(a),this.svgCanvas=a,this.svgPath=g}mapResize(){this.generateCutOut()}updateArea(e,t){this.width=e,this.height=t,this.unit=yh.mm,this.generateCutOut()}generateCutOut(){var e,t;if(this.map===void 0||this.svgCanvas===void 0||this.svgPath===void 0)return;const s=this.toPixels(this.width),l=this.toPixels(this.height),c=(e=this.map)==null?void 0:e.getCanvas().clientWidth,p=(t=this.map)==null?void 0:t.getCanvas().clientHeight,a=c/2-s/2,g=a+s,_=p/2-l/2,C=_+l;this.svgCanvas.setAttribute("width",`${c}px`),this.svgCanvas.setAttribute("height",`${p}px`),this.svgPath.setAttribute("d",`M 0 0 L ${c} 0 L ${c} ${p} L 0 ${p} M ${a} ${_} L ${a} ${C} L ${g} ${C} L ${g} ${_}`)}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map=void 0)}toPixels(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:96;return this.unit===yh.mm&&(t/=25.4),t*e}};const Hv={PageSize:"Page Size",PageOrientation:"Page Orientation",Format:"Format",DPI:"DPI",Generate:"Generate"},C3={PageSize:"Taille de page",PageOrientation:"Orientation de la page",Format:"Format",DPI:"DPI",Generate:"Gnrer"},S3={PageSize:"Sivukoko",PageOrientation:"Sivun suunta",Format:"Muoto",DPI:"DPI",Generate:"Generoi"},E3={PageSize:"Papierformat",PageOrientation:"Papierausrichtung",Format:"Dateiformat",DPI:"Druckauflsung",Generate:"Erstellen"},F3={PageSize:"Sidstorlek",PageOrientation:"Sidorientering",Format:"Format",DPI:"DPI",Generate:"Generera"},I3={PageSize:"Tamao de pgina",PageOrientation:"Orientacin de pgina",Format:"Formato",DPI:"DPI",Generate:"Generar"},L3={PageSize:"Kch thc trang",PageOrientation:"Loi trang",Format:"nh dng",DPI:"Mt  im nh (DPI)",Generate:"To"},T3={PageSize:" ",PageOrientation:" ",Format:"",DPI:"DPI",Generate:""},U3={PageSize:"",PageOrientation:"",Format:"",DPI:"",Generate:""},P3={PageSize:"",PageOrientation:"",Format:"",DPI:"",Generate:""},M3={PageSize:"",PageOrientation:"",Format:"",DPI:"DPI",Generate:""};let Q3=class{constructor(e){Mi(this,"controlContainer"),Mi(this,"exportContainer"),Mi(this,"crosshair"),Mi(this,"printableArea"),Mi(this,"map"),Mi(this,"exportButton"),Mi(this,"options",{PageSize:yu.A4,PageOrientation:vh.Landscape,Format:Ml.PDF,DPI:zg[300],Crosshair:!1,PrintableArea:!1,Local:"en",AllowedSizes:Object.keys(yu),Filename:"map"}),e&&(this.options=Object.assign(this.options,e)),this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}getTranslation(){switch(this.options.Local){case"de":return E3;case"en":return Hv;case"fr":return C3;case"fi":return S3;case"sv":return F3;case"es":return I3;case"vi":return L3;case"uk":return T3;case"zhHans":return U3;case"zhHant":return P3;case"ja":return M3;default:return Hv}}onAdd(e){var t;this.map=e,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("maplibregl-ctrl"),this.controlContainer.classList.add("maplibregl-ctrl-group"),this.exportContainer=document.createElement("div"),this.exportContainer.classList.add("maplibregl-export-list"),this.exportButton=document.createElement("button"),this.exportButton.classList.add("maplibregl-ctrl-icon"),this.exportButton.classList.add("maplibregl-export-control"),this.exportButton.type="button",this.exportButton.addEventListener("click",()=>{this.exportButton.style.display="none",this.exportContainer.style.display="block",this.toggleCrosshair(!0),this.togglePrintableArea(!0)}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.exportButton),this.controlContainer.appendChild(this.exportContainer);const s=document.createElement("TABLE");s.className="print-table";const l={};(t=this.options.AllowedSizes)==null||t.forEach(C=>{yu[C]&&(l[C]=yu[C])});const c=this.createSelection(l,this.getTranslation().PageSize,"page-size",this.options.PageSize,(C,L)=>JSON.stringify(C[L]));s.appendChild(c);const p=this.createSelection(vh,this.getTranslation().PageOrientation,"page-orientation",this.options.PageOrientation,(C,L)=>C[L]);s.appendChild(p);const a=this.createSelection(Ml,this.getTranslation().Format,"format-type",this.options.Format,(C,L)=>C[L]);s.appendChild(a);const g=this.createSelection(zg,this.getTranslation().DPI,"dpi-type",this.options.DPI,(C,L)=>C[L]);s.appendChild(g),this.exportContainer.appendChild(s);const _=document.createElement("button");return _.type="button",_.textContent=this.getTranslation().Generate,_.classList.add("generate-button"),_.addEventListener("click",()=>{const C=document.getElementById("mapbox-gl-export-page-size"),L=document.getElementById("mapbox-gl-export-page-orientation"),M=document.getElementById("mapbox-gl-export-format-type"),I=document.getElementById("mapbox-gl-export-dpi-type"),G=L.value;let j=JSON.parse(C.value);G===vh.Portrait&&(j=j.reverse()),new x3(e,j,Number(I.value),M.value,yh.mm,this.options.Filename).generate()}),this.exportContainer.appendChild(_),this.controlContainer}createSelection(e,t,s,l,c){const p=document.createElement("label");p.textContent=t;const a=document.createElement("select");a.setAttribute("id",`mapbox-gl-export-${s}`),a.style.width="100%",Object.keys(e).forEach(L=>{const M=document.createElement("option");M.setAttribute("value",c(e,L)),M.appendChild(document.createTextNode(L)),M.setAttribute("name",s),l===e[L]&&(M.selected=!0),a.appendChild(M)}),a.addEventListener("change",()=>{this.updatePrintableArea()});const g=document.createElement("TR"),_=document.createElement("TD"),C=document.createElement("TD");return _.appendChild(p),C.appendChild(a),g.appendChild(_),g.appendChild(C),g}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.exportButton||(this.exportButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0),this.map=void 0)}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.exportContainer&&this.exportButton&&(this.exportContainer.style.display="none",this.exportButton.style.display="block",this.toggleCrosshair(!1),this.togglePrintableArea(!1))}toggleCrosshair(e){this.options.Crosshair===!0&&(e===!1?this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0):(this.crosshair=new C4(this.map),this.crosshair.create()))}togglePrintableArea(e){this.options.PrintableArea===!0&&(e===!1?this.printableArea!==void 0&&(this.printableArea.destroy(),this.printableArea=void 0):(this.printableArea=new B3(this.map),this.updatePrintableArea()))}updatePrintableArea(){if(this.printableArea===void 0)return;const e=document.getElementById("mapbox-gl-export-page-size"),t=document.getElementById("mapbox-gl-export-page-orientation").value;let s=JSON.parse(e.value);t===vh.Portrait&&(s=s.reverse()),this.printableArea.updateArea(s[0],s[1])}};var Vv=D3,k3=Object.prototype.hasOwnProperty;function D3(){for(var i={},e=0;e<arguments.length;e++){var t=arguments[e];for(var s in t)k3.call(t,s)&&(i[s]=t[s])}return i}var jv={exports:{}};(function(i,e){(function(){var t={};i.exports=t,t.simpleFilter=function(s,l){return l.filter(function(c){return t.test(s,c)})},t.test=function(s,l){return t.match(s,l)!==null},t.match=function(s,l,c){c=c||{};var p=0,a=[],g=l.length,_=0,C=0,L=c.pre||"",M=c.post||"",I=c.caseSensitive&&l||l.toLowerCase(),G;s=c.caseSensitive&&s||s.toLowerCase();for(var j=0;j<g;j++)G=l[j],I[j]===s[p]?(G=L+G+M,p+=1,C+=1+C):C=0,_+=C,a[a.length]=G;return p===s.length?(_=I===s?1/0:_,{rendered:a.join(""),score:_}):null},t.filter=function(s,l,c){return!l||l.length===0?[]:typeof s!="string"?l:(c=c||{},l.reduce(function(p,a,g,_){var C=a;c.extract&&(C=c.extract(a));var L=t.match(s,C,c);return L!=null&&(p[p.length]={string:L.rendered,score:L.score,index:g,original:a}),p},[]).sort(function(p,a){var g=a.score-p.score;return g||p.index-a.index}))}})()})(jv);var N3=jv.exports,ca=function(i){return this.component=i,this.items=[],this.active=i.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,i.el.parentNode.insertBefore(this.wrapper,i.el.nextSibling),this};ca.prototype.show=function(){this.element.style.display="block"},ca.prototype.hide=function(){this.element.style.display="none"},ca.prototype.add=function(i){this.items.push(i)},ca.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},ca.prototype.isEmpty=function(){return!this.items.length},ca.prototype.isVisible=function(){return this.element.style.display==="block"},ca.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var i=0;i<this.items.length;i++)this.drawItem(this.items[i],this.active===i);this.show()},ca.prototype.drawItem=function(i,e){var t=document.createElement("li"),s=document.createElement("a");e&&(t.className+=" active"),s.innerHTML=i.string,t.appendChild(s),this.element.appendChild(t),t.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),t.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,i)}).bind(this))},ca.prototype.handleMouseUp=function(i){this.selectingListItem=!1,this.component.value(i.original),this.clear(),this.draw()},ca.prototype.move=function(i){this.active=i,this.draw()},ca.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},ca.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},ca.prototype.drawError=function(i){var e=document.createElement("li");e.innerHTML=i,this.element.appendChild(e),this.show()};var O3=ca,R3=Vv,z3=N3,H3=O3,xs=function(i,e,t){return t=t||{},this.options=R3({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},t),this.el=i,this.data=e||[],this.list=new H3(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(s){this.handleKeyUp(s.keyCode,s)}).bind(this),!1),this.el.addEventListener("keydown",(function(s){this.handleKeyDown(s)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(s){this.handlePaste(s)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};xs.prototype.handleKeyUp=function(i,e){if(!(i===40||i===38||i===27||i===9)){if(i===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),e.stopPropagation());return}this.handleInputChange(this.el.value)}},xs.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},xs.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},xs.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(i.target.value)},100)}},xs.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(e){for(var t=0;t<e.length&&(this.list.add(e[t]),t!==this.options.limit-1);t++);this.list.draw()}).bind(this))},xs.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},xs.prototype.update=function(i){this.data=i,this.handleKeyUp()},xs.prototype.clear=function(){this.data=[],this.list.clear()},xs.prototype.normalize=function(i){return i=i.toLowerCase(),i},xs.prototype.match=function(i,e){return i.indexOf(e)>-1},xs.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i||{place_name:this.query}),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},xs.prototype.getCandidates=function(i){var e={pre:"<strong>",post:"</strong>",extract:(function(s){return this.getItemValue(s)}).bind(this)},t;this.options.filter?(t=z3.filter(this.query,this.data,e),t=t.map((function(s){return{original:s.original,string:this.render(s.original,s.string)}}).bind(this))):t=this.data.map((function(s){var l=this.render(s);return{original:s,string:l}}).bind(this)),i(t)},xs.prototype.getItemValue=function(i){return i},xs.prototype.render=function(i,e){if(e)return e;for(var t=i.original?this.getItemValue(i.original):this.getItemValue(i),s=this.normalize(t),l=s.lastIndexOf(this.query);l>-1;){var c=l+this.query.length;t=t.slice(0,l)+"<strong>"+t.slice(l,c)+"</strong>"+t.slice(c),l=s.slice(0,l).lastIndexOf(this.query)}return t},xs.prototype.renderError=function(i){this.list.drawError(i)};var V3=xs,Gv=V3,j3=Gv;typeof window<"u"&&(window.Suggestions=Gv);var G3="Expected a function",qv=NaN,q3="[object Symbol]",$3=/^\s+|\s+$/g,K3=/^[-+]0x[0-9a-f]+$/i,W3=/^0b[01]+$/i,Z3=/^0o[0-7]+$/i,X3=parseInt,Y3=typeof nA=="object"&&nA&&nA.Object===Object&&nA,J3=typeof self=="object"&&self&&self.Object===Object&&self,eS=Y3||J3||Function("return this")(),tS=Object.prototype,rS=tS.toString,iS=Math.max,nS=Math.min,Hg=function(){return eS.Date.now()};function sS(i,e,t){var s,l,c,p,a,g,_=0,C=!1,L=!1,M=!0;if(typeof i!="function")throw new TypeError(G3);e=$v(e)||0,Vg(t)&&(C=!!t.leading,L="maxWait"in t,c=L?iS($v(t.maxWait)||0,e):c,M="trailing"in t?!!t.trailing:M);function I(Pe){var Ee=s,fe=l;return s=l=void 0,_=Pe,p=i.apply(fe,Ee),p}function G(Pe){return _=Pe,a=setTimeout(q,e),C?I(Pe):p}function j(Pe){var Ee=Pe-g,fe=Pe-_,We=e-Ee;return L?nS(We,c-fe):We}function Y(Pe){var Ee=Pe-g,fe=Pe-_;return g===void 0||Ee>=e||Ee<0||L&&fe>=c}function q(){var Pe=Hg();if(Y(Pe))return ne(Pe);a=setTimeout(q,j(Pe))}function ne(Pe){return a=void 0,M&&s?I(Pe):(s=l=void 0,p)}function he(){a!==void 0&&clearTimeout(a),_=0,s=g=l=a=void 0}function Se(){return a===void 0?p:ne(Hg())}function Ne(){var Pe=Hg(),Ee=Y(Pe);if(s=arguments,l=this,g=Pe,Ee){if(a===void 0)return G(g);if(L)return a=setTimeout(q,e),I(g)}return a===void 0&&(a=setTimeout(q,e)),p}return Ne.cancel=he,Ne.flush=Se,Ne}function Vg(i){var e=typeof i;return!!i&&(e=="object"||e=="function")}function aS(i){return!!i&&typeof i=="object"}function oS(i){return typeof i=="symbol"||aS(i)&&rS.call(i)==q3}function $v(i){if(typeof i=="number")return i;if(oS(i))return qv;if(Vg(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=Vg(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=i.replace($3,"");var t=W3.test(i);return t||Z3.test(i)?X3(i.slice(2),t?2:8):K3.test(i)?qv:+i}var AS=sS,jg={exports:{}},vu=typeof Reflect=="object"?Reflect:null,Kv=vu&&typeof vu.apply=="function"?vu.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)},Xp;vu&&typeof vu.ownKeys=="function"?Xp=vu.ownKeys:Object.getOwnPropertySymbols?Xp=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Xp=function(e){return Object.getOwnPropertyNames(e)};function lS(i){console&&console.warn&&console.warn(i)}var Wv=Number.isNaN||function(e){return e!==e};function Ei(){Ei.init.call(this)}jg.exports=Ei,jg.exports.once=pS,Ei.EventEmitter=Ei,Ei.prototype._events=void 0,Ei.prototype._eventsCount=0,Ei.prototype._maxListeners=void 0;var Zv=10;function Yp(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(Ei,"defaultMaxListeners",{enumerable:!0,get:function(){return Zv},set:function(i){if(typeof i!="number"||i<0||Wv(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");Zv=i}}),Ei.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ei.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Wv(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Xv(i){return i._maxListeners===void 0?Ei.defaultMaxListeners:i._maxListeners}Ei.prototype.getMaxListeners=function(){return Xv(this)},Ei.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var l=e==="error",c=this._events;if(c!==void 0)l=l&&c.error===void 0;else if(!l)return!1;if(l){var p;if(t.length>0&&(p=t[0]),p instanceof Error)throw p;var a=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw a.context=p,a}var g=c[e];if(g===void 0)return!1;if(typeof g=="function")Kv(g,this,t);else for(var _=g.length,C=r2(g,_),s=0;s<_;++s)Kv(C[s],this,t);return!0};function Yv(i,e,t,s){var l,c,p;if(Yp(t),c=i._events,c===void 0?(c=i._events=Object.create(null),i._eventsCount=0):(c.newListener!==void 0&&(i.emit("newListener",e,t.listener?t.listener:t),c=i._events),p=c[e]),p===void 0)p=c[e]=t,++i._eventsCount;else if(typeof p=="function"?p=c[e]=s?[t,p]:[p,t]:s?p.unshift(t):p.push(t),l=Xv(i),l>0&&p.length>l&&!p.warned){p.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=i,a.type=e,a.count=p.length,lS(a)}return i}Ei.prototype.addListener=function(e,t){return Yv(this,e,t,!1)},Ei.prototype.on=Ei.prototype.addListener,Ei.prototype.prependListener=function(e,t){return Yv(this,e,t,!0)};function cS(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Jv(i,e,t){var s={fired:!1,wrapFn:void 0,target:i,type:e,listener:t},l=cS.bind(s);return l.listener=t,s.wrapFn=l,l}Ei.prototype.once=function(e,t){return Yp(t),this.on(e,Jv(this,e,t)),this},Ei.prototype.prependOnceListener=function(e,t){return Yp(t),this.prependListener(e,Jv(this,e,t)),this},Ei.prototype.removeListener=function(e,t){var s,l,c,p,a;if(Yp(t),l=this._events,l===void 0)return this;if(s=l[e],s===void 0)return this;if(s===t||s.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete l[e],l.removeListener&&this.emit("removeListener",e,s.listener||t));else if(typeof s!="function"){for(c=-1,p=s.length-1;p>=0;p--)if(s[p]===t||s[p].listener===t){a=s[p].listener,c=p;break}if(c<0)return this;c===0?s.shift():uS(s,c),s.length===1&&(l[e]=s[0]),l.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this},Ei.prototype.off=Ei.prototype.removeListener,Ei.prototype.removeAllListeners=function(e){var t,s,l;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var c=Object.keys(s),p;for(l=0;l<c.length;++l)p=c[l],p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=s[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(l=t.length-1;l>=0;l--)this.removeListener(e,t[l]);return this};function e2(i,e,t){var s=i._events;if(s===void 0)return[];var l=s[e];return l===void 0?[]:typeof l=="function"?t?[l.listener||l]:[l]:t?hS(l):r2(l,l.length)}Ei.prototype.listeners=function(e){return e2(this,e,!0)},Ei.prototype.rawListeners=function(e){return e2(this,e,!1)},Ei.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):t2.call(i,e)},Ei.prototype.listenerCount=t2;function t2(i){var e=this._events;if(e!==void 0){var t=e[i];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Ei.prototype.eventNames=function(){return this._eventsCount>0?Xp(this._events):[]};function r2(i,e){for(var t=new Array(e),s=0;s<e;++s)t[s]=i[s];return t}function uS(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function hS(i){for(var e=new Array(i.length),t=0;t<e.length;++t)e[t]=i[t].listener||i[t];return e}function pS(i,e){return new Promise(function(t,s){function l(p){i.removeListener(e,c),s(p)}function c(){typeof i.removeListener=="function"&&i.removeListener("error",l),t([].slice.call(arguments))}i2(i,e,c,{once:!0}),e!=="error"&&dS(i,l,{once:!0})})}function dS(i,e,t){typeof i.on=="function"&&i2(i,"error",e,t)}function i2(i,e,t,s){if(typeof i.on=="function")s.once?i.once(e,t):i.on(e,t);else if(typeof i.addEventListener=="function")i.addEventListener(e,function l(c){s.once&&i.removeEventListener(e,l),t(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var n2=jg.exports,fS={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},gS={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},mS={placeholder:gS},s2={exports:{}};(function(i){(function(e,t,s){i.exports?i.exports=s():e[t]=s()})(nA,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function s(g){return g.match(t)||[]}function l(g){return s(g).filter(function(_,C){return _&&C})}function c(g){return g=s(g),{language:g[1]||e,extlang:g[2]||e,script:g[3]||e,region:g[4]||e}}function p(g,_,C){Object.defineProperty(g,_,{value:C,enumerable:!0})}function a(g,_,C){function L(M){return s(M)[g]||e}p(L,"pattern",_),p(c,C,L)}return a(1,/^[a-zA-Z]{2,3}$/,"language"),a(2,/^[a-zA-Z]{3}$/,"extlang"),a(3,/^[a-zA-Z]{4}$/,"script"),a(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),p(c,"split",l),c})})(s2);var yS=s2.exports,vS=j3,_S=AS,Fa=Vv,wS=n2.EventEmitter,a2=fS,bS=mS,xS=yS;function o2(i,e){this._eventEmitter=new wS,this.options=Fa({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geocoderApi=i}o2.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,getItemValue:function(i){return i.text!==void 0?i.text:i.place_name},render:function(i){if(i.geometry){var a=i.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--result maplibregl-ctrl-geocoder--result"><svg class="mapboxgl-ctrl-geocoder--result-icon maplibre-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="mapboxgl-ctrl-geocoder--result-title maplibregl-ctrl-geocoder--result-title">'+a[0]+'</div><div class="mapboxgl-ctrl-geocoder--result-address maplibregl-ctrl-geocoder--result-address">'+a.splice(1,a.length).join(",")+"</div></div></div>"}else{var e=i.text,t=e.toLowerCase().indexOf(this.query.toLowerCase()),s=this.query.length,l=e.substring(0,t),c=e.substring(t,t+s),p=e.substring(t+s);return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibregl-ctrl-geocoder--suggestion"><svg class="mapboxgl-ctrl-geocoder--suggestion-icon maplibre-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="mapboxgl-ctrl-geocoder--suggestion-info maplibregl-ctrl-geocoder--suggestion-info"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibregl-ctrl-geocoder--suggestion-title">'+l+'<span class="mapboxgl-ctrl-geocoder--suggestion-match maplibregl-ctrl-geocoder--suggestion-match">'+c+"</span>"+p+"</div></div></div>"}},popupRender:function(i){var e=i.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibre-ctrl-geocoder--suggestion popup-suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibre-ctrl-geocoder--suggestion-title popup-suggestion-title">'+e[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address maplibre-ctrl-geocoder--suggestion-address popup-suggestion-address">'+e.splice(1,e.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},addTo:function(i){function e(s,l){if(!document.body.contains(l))throw new Error("Element provided to #addTo() exists, but is not in the DOM");var c=s.onAdd();l.appendChild(c)}if(i._controlContainer)i.addControl(this);else if(i instanceof HTMLElement)e(this,i);else if(typeof i=="string"){var t=document.querySelectorAll(i);if(t.length===0)throw new Error("Element ",i,"not found.");if(t.length>1)throw new Error("Geocoder can only be added to a single html element");e(this,t[0])}else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(i){if(i&&typeof i!="string"&&(this._map=i),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";var t=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",_S(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);var s=document.createElement("div");s.classList.add("mapboxgl-ctrl-geocoder--pin-right","maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button maplibregl-ctrl-geocoder--button";var l=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(l),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),s.appendChild(this._clearEl),s.appendChild(this._loadingEl),e.appendChild(t),e.appendChild(this._inputEl),e.appendChild(s),this._typeahead=new vS(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),e},createIcon:function(i,e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");if(t.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+i+" maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+i),t.setAttribute("viewBox","0 0 18 18"),t.setAttribute("xml:space","preserve"),t.setAttribute("width",18),t.setAttribute("height",18),"innerHTML"in t)t.innerHTML=e;else{var s=document.createElement("div");s.innerHTML="<svg>"+e.valueOf().toString()+"</svg>";var l=s.firstChild,c=l.firstChild;t.appendChild(c)}return t},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_onPaste:function(i){var e=(i.clipboardData||window.clipboardData).getData("text");e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e)},_onKeyDown:function(i){var e=27,t=9;if(i.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(i),this._inputEl.blur();var s=i.target&&i.target.shadowRoot?i.target.shadowRoot.activeElement:i.target,l=s?s.value:"";if(!l)return this.fresh=!0,i.keyCode!==t&&this.clear(i),this._clearEl.style.display="none";if(!(i.metaKey||[t,e,37,39,38,40].indexOf(i.keyCode)!==-1)){if(i.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(s.value);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(s.value,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}s.value.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(s.value)}},_showButton:function(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")},_hideButton:function(){this._typeahead.selected&&(this._clearEl.style.display="none")},_onBlur:function(i){this.options.clearOnBlur&&this._clearOnBlur(i),this.options.collapsed&&this._collapse()},_onChange:function(){var i=this._typeahead.selected;if(i&&!i.geometry)i.placeId?this._geocode(i.placeId,!0,!0):this._geocode(i.text,!0);else if(i&&JSON.stringify(i)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){var e;if(this._removeResultMarkers(),i.properties&&a2[i.properties.short_code])e=Fa({},this.options.flyTo),this._map&&this._map.fitBounds(a2[i.properties.short_code].bbox,e);else if(i.bbox){var t=i.bbox;e=Fa({},this.options.flyTo),this._map&&this._map.fitBounds([[t[0],t[1]],[t[2],t[3]]],e)}else{var s={zoom:this.options.zoom};e=Fa({},s,this.options.flyTo),i.center?e.center=i.center:i.geometry&&i.geometry.type&&i.geometry.type==="Point"&&i.geometry.coordinates&&(e.center=i.geometry.coordinates),this._map&&this._map.flyTo(e)}}this.options.marker&&this._maplibregl&&this._handleMarker(i),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(i),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:i})}},_getConfigForRequest:function(){var i=["bbox","limit","proximity","countries","types","language","reverseMode"],e=this,t=i.reduce(function(s,l){return e.options[l]&&(["countries","types","language"].indexOf(l)>-1?s[l]=e.options[l].split(/[\s,]+/):s[l]=e.options[l],l==="proximity"&&e.options[l]&&typeof e.options[l].longitude=="number"&&typeof e.options[l].latitude=="number"&&(s[l]=[e.options[l].longitude,e.options[l].latitude])),s},{});return t},_geocode:function(i,e,t){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:i}),this.inputString=i;var s=null,l=this._getConfigForRequest(),c;if(this.options.localGeocoderOnly)c=Promise.resolve();else if(this.options.reverseGeocode&&/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(i)){var p=i.split(/[\s(,)?]+/).map(function(_){return parseFloat(_,10)}).reverse();l.types&&l.types[0],l=Fa(l,{query:p,limit:1}),"proximity"in l&&delete l.proximity,c=this.geocoderApi.reverseGeocode(l)}else l=Fa(l,{query:i}),this.geocoderApi.getSuggestions?e?this.geocoderApi.searchByPlaceId&&t?c=this.geocoderApi.searchByPlaceId(l):c=this.geocoderApi.forwardGeocode(l):c=this.geocoderApi.getSuggestions(l):c=this.geocoderApi.forwardGeocode(l);var a=[];this.options.localGeocoder&&(a=this.options.localGeocoder(i),a||(a=[]));var g=[];return c.catch((function(_){s=_}).bind(this)).then((function(_){this._loadingEl.style.display="none";var C={};return _?C=_:C={type:"FeatureCollection",features:[]},C.config=l,this.fresh&&(this.fresh=!1),C.features=C.features?a.concat(C.features):a,this.options.externalGeocoder?(g=this.options.externalGeocoder(i,C.features,l)||[],g.then(function(L){return C.features=C.features?L.concat(C.features):L,C},function(){return C})):C}).bind(this)).then((function(_){if(s)throw s;this.options.filter&&_.features.length&&(_.features=_.features.filter(this.options.filter));var C=[];_.suggestions?C=_.suggestions:_.place?C=[_.place]:C=_.features,C.length?(this._clearEl.style.display="block",this._typeahead.update(C),(!this.options.showResultsWhileTyping||e)&&this.options.showResultMarkers&&(_.features.length>0||_.place)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",_)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",_))}).bind(this)).catch((function(_){this._loadingEl.style.display="none",a.length&&this.options.localGeocoder||g.length&&this.options.externalGeocoder?(this._clearEl.style.display="block",this._typeahead.update(a)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:a}),this._eventEmitter.emit("error",{error:_})}).bind(this)),c},_clear:function(i){i&&i.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(i){this._clear(i),this._inputEl.focus()},_clearOnBlur:function(i){var e=this;i.relatedTarget&&e._clear(i)},_onQueryResult:function(i){var e=i;if(e.features.length){var t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}},_updateProximity:function(){if(this._map)if(this._map.getZoom()>9){var i=this._map.getCenter().wrap();this.setProximity({longitude:i.lng,latitude:i.lat})}else this.setProximity(null)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},query:function(i){return this._geocode(i).then(this._onQueryResult),this},_renderError:function(){var i="<div class='mapbox-gl-geocoder--error maplibre-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(i)},_renderNoResults:function(){var i="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>No results found</div>";this._renderMessage(i)},_renderMessage:function(i){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(i)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var i=this.options.language.split(",")[0],e=xS.language(i),t=bS.placeholder[e];if(t)return t}return"Search"},_fitBoundsForMarkers:function(){if(!(this._typeahead.data.length<1)){var i=this._typeahead.data.filter(function(l){return typeof l!="string"}).slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){var e={padding:100},t=Fa({},e,this.options.flyTo),s=new this._maplibregl.LngLatBounds;i.forEach(function(l){s.extend(l.geometry.coordinates)}),this._map.fitBounds(s.toArray(),t)}return i.length>0&&this._maplibregl&&this._handleResultMarkers(i),this}},setInput:function(i){return this._inputEl.value=i,this._typeahead.selected=null,this._typeahead.clear(),i.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(i),this},setProximity:function(i){return this.options.proximity=i,this},getProximity:function(){return this.options.proximity},setRenderFunction:function(i){return i&&typeof i=="function"&&(this._typeahead.render=i),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(i){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=i||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(i){return this.options.zoom=i,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(i){return this.options.flyTo=i,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(i){return this.placeholder=i||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(i){return this.options.bbox=i,this},getCountries:function(){return this.options.countries},setCountries:function(i){return this.options.countries=i,this},getTypes:function(){return this.options.types},setTypes:function(i){return this.options.types=i,this},getMinLength:function(){return this.options.minLength},setMinLength:function(i){return this.options.minLength=i,this._typeahead&&(this._typeahead.options.minLength=i),this},getLimit:function(){return this.options.limit},setLimit:function(i){return this.options.limit=i,this._typeahead&&(this._typeahead.options.limit=i),this},getFilter:function(){return this.options.filter},setFilter:function(i){return this.options.filter=i,this},setGeocoderApi:function(i){return this.geocoderApi=i,this},getGeocoderApi:function(){return this.geocoderApi},_handleMarker:function(i){if(this._map){this._removeMarker();var e={color:"#4668F2"},t=Fa({},e,this.options.marker);this.mapMarker=new this._maplibregl.Marker(t);var s;if(this.options.popup){var l={},c=Fa({},l,this.options.popup);s=new this._maplibregl.Popup(c).setHTML(this.options.popupRender(i))}return i.center?(this.mapMarker.setLngLat(i.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(s)):i.geometry&&i.geometry.type&&i.geometry.type==="Point"&&i.geometry.coordinates&&(this.mapMarker.setLngLat(i.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(s)),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},_handleResultMarkers:function(i){if(this._map){this._removeResultMarkers();var e={color:"#4668F2"},t=Fa({},e,this.options.showResultMarkers);return i.forEach((function(s){if(this.options.showResultMarkers&&this.options.showResultMarkers.element){var l=this.options.showResultMarkers.element.cloneNode(!0);t=Fa(t,{element:l})}var c=new this._maplibregl.Marker(Fa({},t,{element:l})),p;if(this.options.popup){var a={},g=Fa({},a,this.options.popup);p=new this._maplibregl.Popup(g).setHTML(this.options.popupRender(s))}s.center?(c.setLngLat(s.center).addTo(this._map),this.options.popup&&c.setPopup(p)):s.geometry&&s.geometry.type&&s.geometry.type==="Point"&&s.geometry.coordinates&&(c.setLngLat(s.geometry.coordinates).addTo(this._map),this.options.popup&&c.setPopup(p)),this.resultMarkers.push(c)}).bind(this)),this}},_removeResultMarkers:function(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(i){i.remove()}),this.resultMarkers=[])},on:function(i,e){return this._eventEmitter.on(i,e),this},off:function(i,e){return this._eventEmitter.removeListener(i,e),this}};var BS=o2;const CS=vg(BS),Jp={ICGC5M:"https://tilemaps.icgc.cat/tileserver/tileserver.php/terreny-5m-30m-rgb-extent/{z}/{x}/{y}.png",WORLD3M:"https://tilemaps.icgc.cat/tileserver/tileserver.php/terreny_icgc_2m_rgb/{z}/{x}/{y}.png"},$A={TOPO:"https://geoserveis.icgc.cat/contextmaps/icgc_mapa_estandard_general.json",ORTO:"https://geoserveis.icgc.cat/contextmaps/icgc_orto_hibrida.json",ADMIN:"https://geoserveis.icgc.cat/contextmaps/icgc_delimitacio_limits_administratius.json",DARK:"https://geoserveis.icgc.cat/contextmaps/icgc_mapa_base_fosc.json",LIGHT:"https://geoserveis.icgc.cat/contextmaps/icgc_mapa_base_gris.json",GEOLOGY:"https://geoserveis.icgc.cat/contextmaps/icgc_geologic_informacio.json"},Bs={Orto:{ortofotoColorProvisional:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_provisional",ortofotoColor2022:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2022",ortofotoColor2021:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2021",ortofotoColor2020:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2020",ortofotoColor2019:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2019",ortofotoColor2018:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2018",ortofotoColor2017:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2017",ortofotoColor2016:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2016",ortofotoColor2015:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2015",ortofotoColor2014:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2014",ortofotoColor2013:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2013",ortofotoColor2012:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2012",ortofotoColor2011:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2011",ortofotoColor2010:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2010",ortofotoColor2009:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2009",ortofotoColor2008:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2008",ortofotoColor20062007:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2006-2007",ortofotoColor20042005:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2004-2005",ortofotoColor20002003:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2000-2003",ortofotoBlancINegre1998:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1998",ortofotoBlancINegre19941997:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1994-1997",ortofotoColor1993:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_1993",ortofotoBlancINegre19831992:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1983-1992",ortofotoBlancINegre19701977:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1970-1977",ortofotoBlancINegre1956:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1956",ortofotoBlancINegre1945:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1945",ortofotoColorSerieAnual:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_serie_anual",ortofotoInfraroigProvisional:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_provisional",ortofotoInfraroig2022:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2022",ortofotoInfraroig2021:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2021",ortofotoInfraroig2020:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2020",ortofotoInfraroig2019:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2019",ortofotoInfraroig2018:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2018",ortofotoInfraroig2017:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2017",ortofotoInfraroig2016:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2016",ortofotoInfraroig2015:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2015",ortofotoInfraroig2014:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2014",ortofotoInfraroig2013:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2013",ortofotoInfraroig2012:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2012",ortofotoInfraroig2011:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2011",ortofotoInfraroig2010:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2010",ortofotoInfraroig2009:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2009",ortofotoInfraroig2008:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2008",ortofotoInfraroig20062007:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2006-2007",ortofotoInfraroig19961997:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_1996-1997",ortofotoInfraroigSerieAnual:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_serie_anual"},VectorAdmin:{agrupacionsCensals2015:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2015.fgb",agrupacionsCensals2016:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2016.fgb",agrupacionsCensals2017:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2017.fgb",agrupacionsCensals2018:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2018.fgb",agrupacionsCensals2019:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2019.fgb",agrupacionsCensals2020:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2020.fgb",agrupacionsCensals2021:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2021.fgb",agrupacionsCensalsVigent:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_vigent.fgb",agrupacionsCensalsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_vigent_centroid.fgb",areesBasiquesPolicials2019:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_2019.fgb",areesBasiquesPolicials2020:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_2020.fgb",areesBasiquesPolicials2022:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_2022.fgb",areesBasiquesPolicialsVigent:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_vigent.fgb",areesBasiquesPolicialsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_vigent_centroid.fgb",areesBasiquesSalutVigent:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_salut_vigent.fgb",areesBasiquesServeisSocialsVigent:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_serveis_socials_vigent.fgb",areesBasiquesServeisSocialsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_serveis_socials_vigent_centroid.fgb",areesGestioAssistencialVigent:"https://tilemaps.icgc.cat/vector/fgb/arees_gestio_assistencial_vigent.fgb",areesHidrogeologiquesAquifersVigent:"https://tilemaps.icgc.cat/vector/fgb/arees_hidrogeologiques_aquifers_vigent.fgb",catalunyaVigent:"https://tilemaps.icgc.cat/vector/fgb/catalunya_vigent.fgb",catalunyaVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/catalunya_vigent_centroid.fgb",comarques2022:"https://tilemaps.icgc.cat/vector/fgb/comarques_2022.fgb",comarquesVigent:"https://tilemaps.icgc.cat/vector/fgb/comarques_vigent.fgb",comarquesVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/comarques_vigent_centroid.fgb",districtesCensals2002:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2002.fgb",districtesCensals2003:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2003.fgb",districtesCensals2004:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2004.fgb",districtesCensals2005:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2005.fgb",districtesCensals2006:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2006.fgb",districtesCensals2007:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2007.fgb",districtesCensals2008:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2008.fgb",districtesCensals2009:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2009.fgb",districtesCensals2010:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2010.fgb",districtesCensals2011:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2011.fgb",districtesCensals2012:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2012.fgb",districtesCensals2013:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2013.fgb",districtesCensals2014:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2014.fgb",districtesCensals2015:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2015.fgb",districtesCensals2016:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2016.fgb",districtesCensals2017:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2017.fgb",districtesCensals2018:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2018.fgb",districtesCensals2019:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2019.fgb",districtesCensals2020:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2020.fgb",districtesCensals2021:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2021.fgb",districtesCensals2022:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2022.fgb",districtesCensalsVigent:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_vigent.fgb",districtesCensalsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_vigent_centroid.fgb",incendisForestalsVigent:"https://tilemaps.icgc.cat/vector/fgb/incendis_forestals_vigent.fgb",incendisForestalsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/incendis_forestals_vigent_centroid.fgb",municipis2022:"https://tilemaps.icgc.cat/vector/fgb/municipis_2022.fgb",municipis2022Centroid:"https://tilemaps.icgc.cat/vector/fgb/municipis_2022_centroid.fgb",municipisVigent:"https://tilemaps.icgc.cat/vector/fgb/municipis_vigent.fgb",municipisVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/municipis_vigent_centroid.fgb",partitsJudicialsVigent:"https://tilemaps.icgc.cat/vector/fgb/partits_judicials_vigent.fgb",partitsJudicialsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/partits_judicials_vigent_centroid.fgb",plaTerritorial2015:"https://tilemaps.icgc.cat/vector/fgb/pla_territorial_2015.fgb",plaTerritorialVigent:"https://tilemaps.icgc.cat/vector/fgb/pla_territorial_vigent.fgb",plaTerritorialVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/pla_territorial_vigent_centroid.fgb",provinciesVigent:"https://tilemaps.icgc.cat/vector/fgb/provincies_vigent.fgb",provinciesVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/provincies_vigent_centroid.fgb",regionsPolicialsVigent:"https://tilemaps.icgc.cat/vector/fgb/regions_policials_vigent.fgb",regionsPolicialsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/regions_policials_vigent_centroid.fgb",regionsSanitariesVigent:"https://tilemaps.icgc.cat/vector/fgb/regions_sanitaries_vigent.fgb",regionsSanitariesVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/regions_sanitaries_vigent_centroid.fgb",seccionsCensals2002:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2002.fgb",seccionsCensals2003:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2003.fgb",seccionsCensals2004:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2004.fgb",seccionsCensals2005:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2005.fgb",seccionsCensals2006:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2006.fgb",seccionsCensals2007:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2007.fgb",seccionsCensals2008:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2008.fgb",seccionsCensals2009:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2009.fgb",seccionsCensals2010:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2010.fgb",seccionsCensals2011:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2011.fgb",seccionsCensals2012:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2012.fgb",seccionsCensals2013:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2013.fgb",seccionsCensals2014:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2014.fgb",seccionsCensals2015:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2015.fgb",seccionsCensals2016:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2016.fgb",seccionsCensals2017:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2017.fgb",seccionsCensals2018:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2018.fgb",seccionsCensals2019:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2019.fgb",seccionsCensals2020:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2020.fgb",seccionsCensals2021:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2021.fgb",seccionsCensals2022:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2022.fgb",seccionsCensalsVigent:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_vigent.fgb",seccionsCensalsVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_vigent_centroid.fgb",sectorsSanitarisVigent:"https://tilemaps.icgc.cat/vector/fgb/sectors_sanitaris_vigent.fgb",vegueriesVigent:"https://tilemaps.icgc.cat/vector/fgb/vegueries_vigent.fgb",vegueriesVigentCentroid:"https://tilemaps.icgc.cat/vector/fgb/vegueries_vigent_centroid.fgb"},WMS:{relleu:"https://tilemaps.icgc.cat/mapfactory/wmts/relleu/CAT3857/{z}/{x}/{y}.png",geologia:"https://tilemaps.icgc.cat/mapfactory/wmts/geologia/MON3857NW/{z}/{x}/{y}.png",osm:"https://tilemaps.icgc.cat/mapfactory/wmts/osm_suau/CAT3857_15/{z}/{x}/{y}.png",cims:'"https://geoserveis.icgc.cat/icc_100cims/wms/service?REQUEST=GetMap&SERVICE=WMS&VERSION=1.1.1&LAYERS=0&STYLES=&FORMAT=image/png&BGCOLOR=0xFFFFFF&TRANSPARENT=TRUE&SRS=EPSG:25831&BBOX=137118.923076923,4488408.75,650959.076923077,4749634.75&WIDTH=895&HEIGHT=455',cobertesSol:"http://geoserveis.icgc.cat/servei/catalunya/cobertes-sol/wms?REQUEST=GetMap&SERVICE=WMS&VERSION=1.3.0&LAYERS=cobertes_2009&STYLES=&FORMAT=image/png&BGCOLOR=0xFFFFFF&TRANSPARENT=TRUE&CRS=EPSG:25831&BBOX=374110.828167253,4639230.79853085,452621.120632226,4703578.45000215&WIDTH=1020&HEIGHT=836"},Vector:{altimetria:"https://betaserver.icgc.cat/tileserver3/tileserver.php/alti_bt5m/{z}/{x}/{y}.pbf",toponimia:"https://betaserver.icgc.cat/tileserver3/tileserver.php/redtopo/{z}/{x}/{y}.pbf"}},Ql={mapOptions:{container:"map",center:{0:1.537786,1:41.837539},zoom:7.5,bearing:0,pitch:0,hash:!1,style:"https://geoserveis.icgc.cat/contextmaps/icgc_mapa_base_gris.json.json",maxZoom:18,maxPitch:85},baseStyles:{0:{key:"TOPO",url:"https://geoserveis.icgc.cat/contextmaps/icgc_mapa_estandard_general.json",image:"https://visors.icgc.cat/contextmaps/imatges_estil/icgc_mapa_estandard.png"},1:{key:"ORTO",url:"https://geoserveis.icgc.cat/contextmaps/icgc_orto_hibrida.json",image:"https://visors.icgc.cat/contextmaps/imatges_estil/icgc_orto_hibrida.png"},2:{key:"ADMIN",url:"https://geoserveis.icgc.cat/contextmaps/icgc_delimitacio_limits_administratius.json",image:"https://visors.icgc.cat/contextmaps/imatges_estil/icgc_delimitacio_limits_administratius.png"},3:{key:"DARK",url:"https://geoserveis.icgc.cat/contextmaps/icgc_mapa_base_fosc.json",image:"https://visors.icgc.cat/contextmaps/imatges_estil/icgc_mapa_base_fosc.png"},4:{key:"LIGHT",url:"https://geoserveis.icgc.cat/contextmaps/icgc_mapa_base_gris.json",image:"https://visors.icgc.cat/contextmaps/imatges_estil/icgc_mapa_base_gris.png"},5:{key:"GEOLOGY",url:"https://geoserveis.icgc.cat/contextmaps/icgc_geologic_informacio.json",image:"https://visors.icgc.cat/contextmaps/imatges_estil/icgc_geologic_informacio.png"}},urlTerrainICGC:{0:{name:"ICGC5M",url:"https://tilemaps.icgc.cat/tileserver/tileserver.php/terreny-5m-30m-rgb-extent/{z}/{x}/{y}.png"},1:{name:"WORLD3M",url:"https://tilemaps.icgc.cat/tileserver/tileserver.php/terreny_icgc_2m_rgb/{z}/{x}/{y}.png"}},ortoLayersICGC:{0:{name:"ortofotoColorProvisional",key:"ortofoto_color_provisional",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_provisional"},1:{name:"ortofotoColor2022",key:"ortofoto_color_2022",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2022"},2:{name:"ortofotoColor2021",key:"ortofoto_color_2021",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2021"},3:{name:"ortofotoColor2020",key:"ortofoto_color_2020",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2020"},4:{name:"ortofotoColor2019",key:"ortofoto_color_2019",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2019"},5:{name:"ortofotoColor2018",key:"ortofoto_color_2018",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2018"},6:{name:"ortofotoColor2017",key:"ortofoto_color_2017",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2017"},7:{name:"ortofotoColor2016",key:"ortofoto_color_2016",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2016"},8:{name:"ortofotoColor2015",key:"ortofoto_color_2015",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2015"},9:{name:"ortofotoColor2014",key:"ortofoto_color_2014",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2014"},10:{name:"ortofotoColor2013",key:"ortofoto_color_2013",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2013"},11:{name:"ortofotoColor2012",key:"ortofoto_color_2012",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2012"},12:{name:"ortofotoColor2011",key:"ortofoto_color_2011",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2011"},13:{name:"ortofotoColor2010",key:"ortofoto_color_2010",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2010"},14:{name:"ortofotoColor2009",key:"ortofoto_color_2009",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2009"},15:{name:"ortofotoColor2008",key:"ortofoto_color_2008",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2008"},16:{name:"ortofotoColor20062007",key:"ortofoto_color_2006-2007",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2006-2007"},17:{name:"ortofotoColor20042005",key:"ortofoto_color_2004-2005",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2004-2005"},18:{name:"ortofotoColor20002003",key:"ortofoto_color_2000-2003",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_2000-2003"},19:{name:"ortofotoBlancINegre1998",key:"ortofoto_blanc_i_negre_1998",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1998"},20:{name:"ortofotoBlancINegre19941997",key:"ortofoto_blanc_i_negre_1994-1997",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1994-1997"},21:{name:"ortofotoColor1993",key:"ortofoto_color_1993",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_1993"},22:{name:"ortofotoBlancINegre19831992",key:"ortofoto_blanc_i_negre_1983-1992",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1983-1992"},23:{name:"ortofotoBlancINegre19701977",key:"ortofoto_blanc_i_negre_1970-1977",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1970-1977"},24:{name:"ortofotoBlancINegre1956",key:"ortofoto_blanc_i_negre_1956",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1956"},25:{name:"ortofotoBlancINegre1945",key:"ortofoto_blanc_i_negre_1945",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_blanc_i_negre_1945"},26:{name:"ortofotoColorSerieAnual",key:"ortofoto_color_serie_anual",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_color_serie_anual"},27:{name:"ortofotoInfraroigProvisional",key:"ortofoto_infraroig_provisional",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_provisional"},28:{name:"ortofotoInfraroig2022",key:"ortofoto_infraroig_2022",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2022"},29:{name:"ortofotoInfraroig2021",key:"ortofoto_infraroig_2021",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2021"},30:{name:"ortofotoInfraroig2020",key:"ortofoto_infraroig_2020",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2020"},31:{name:"ortofotoInfraroig2019",key:"ortofoto_infraroig_2019",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2019"},32:{name:"ortofotoInfraroig2018",key:"ortofoto_infraroig_2018",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2018"},33:{name:"ortofotoInfraroig2017",key:"ortofoto_infraroig_2017",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2017"},34:{name:"ortofotoInfraroig2016",key:"ortofoto_infraroig_2016",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2016"},35:{name:"ortofotoInfraroig2015",key:"ortofoto_infraroig_2015",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2015"},36:{name:"ortofotoInfraroig2014",key:"ortofoto_infraroig_2014",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2014"},37:{name:"ortofotoInfraroig2013",key:"ortofoto_infraroig_2013",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2013"},38:{name:"ortofotoInfraroig2012",key:"ortofoto_infraroig_2012",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2012"},39:{name:"ortofotoInfraroig2011",key:"ortofoto_infraroig_2011",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2011"},40:{name:"ortofotoInfraroig2010",key:"ortofoto_infraroig_2010",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2010"},41:{name:"ortofotoInfraroig2009",key:"ortofoto_infraroig_2009",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2009"},42:{name:"ortofotoInfraroig2008",key:"ortofoto_infraroig_2008",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2008"},43:{name:"ortofotoInfraroig20062007",key:"ortofoto_infraroig_2006-2007",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_2006-2007"},44:{name:"ortofotoInfraroig19961997",key:"ortofoto_infraroig_1996-1997",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_1996-1997"},45:{name:"ortofotoInfraroigSerieAnual",key:"ortofoto_infraroig_serie_anual",url:"https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?&bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&STYLES=&srs=EPSG:3857&transparent=true&width=256&height=256&layers=ortofoto_infraroig_serie_anual"}},vectorLayersICGC:{0:{name:"agrupacionsCensals2015",key:"agrupacions_censals_2015",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2015.fgb"},1:{name:"agrupacionsCensals2016",key:"agrupacions_censals_2016",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2016.fgb"},2:{name:"agrupacionsCensals2017",key:"agrupacions_censals_2017",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2017.fgb"},3:{name:"agrupacionsCensals2018",key:"agrupacions_censals_2018",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2018.fgb"},4:{name:"agrupacionsCensals2019",key:"agrupacions_censals_2019",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2019.fgb"},5:{name:"agrupacionsCensals2020",key:"agrupacions_censals_2020",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2020.fgb"},6:{name:"agrupacionsCensals2021",key:"agrupacions_censals_2021",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_2021.fgb"},7:{name:"agrupacionsCensalsVigent",key:"agrupacions_censals_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_vigent.fgb"},8:{name:"agrupacionsCensalsVigentCentroid",key:"agrupacions_censals_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/agrupacions_censals_vigent_centroid.fgb"},9:{name:"areesBasiquesPolicials2019",key:"arees_basiques_policials_2019",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_2019.fgb"},10:{name:"areesBasiquesPolicials2020",key:"arees_basiques_policials_2020",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_2020.fgb"},11:{name:"areesBasiquesPolicials2022",key:"arees_basiques_policials_2022",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_2022.fgb"},12:{name:"areesBasiquesPolicialsVigent",key:"arees_basiques_policials_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_vigent.fgb"},13:{name:"areesBasiquesPolicialsVigentCentroid",key:"arees_basiques_policials_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_policials_vigent_centroid.fgb"},14:{name:"areesBasiquesSalutVigent",key:"arees_basiques_salut_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_salut_vigent.fgb"},15:{name:"areesBasiquesServeisSocialsVigent",key:"arees_basiques_serveis_socials_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_serveis_socials_vigent.fgb"},16:{name:"areesBasiquesServeisSocialsVigentCentroid",key:"arees_basiques_serveis_socials_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/arees_basiques_serveis_socials_vigent_centroid.fgb"},17:{name:"areesGestioAssistencialVigent",key:"arees_gestio_assistencial_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/arees_gestio_assistencial_vigent.fgb"},18:{name:"areesHidrogeologiquesAquifersVigent",key:"arees_hidrogeologiques_aquifers_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/arees_hidrogeologiques_aquifers_vigent.fgb"},19:{name:"catalunyaVigent",key:"catalunya_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/catalunya_vigent.fgb"},20:{name:"catalunyaVigentCentroid",key:"catalunya_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/catalunya_vigent_centroid.fgb"},21:{name:"comarques2022",key:"comarques_2022",url:"https://tilemaps.icgc.cat/vector/fgb/comarques_2022.fgb"},22:{name:"comarquesVigent",key:"comarques_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/comarques_vigent.fgb"},23:{name:"comarquesVigentCentroid",key:"comarques_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/comarques_vigent_centroid.fgb"},24:{name:"districtesCensals2002",key:"districtes_censals_2002",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2002.fgb"},25:{name:"districtesCensals2003",key:"districtes_censals_2003",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2003.fgb"},26:{name:"districtesCensals2004",key:"districtes_censals_2004",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2004.fgb"},27:{name:"districtesCensals2005",key:"districtes_censals_2005",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2005.fgb"},28:{name:"districtesCensals2006",key:"districtes_censals_2006",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2006.fgb"},29:{name:"districtesCensals2007",key:"districtes_censals_2007",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2007.fgb"},30:{name:"districtesCensals2008",key:"districtes_censals_2008",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2008.fgb"},31:{name:"districtesCensals2009",key:"districtes_censals_2009",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2009.fgb"},32:{name:"districtesCensals2010",key:"districtes_censals_2010",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2010.fgb"},33:{name:"districtesCensals2011",key:"districtes_censals_2011",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2011.fgb"},34:{name:"districtesCensals2012",key:"districtes_censals_2012",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2012.fgb"},35:{name:"districtesCensals2013",key:"districtes_censals_2013",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2013.fgb"},36:{name:"districtesCensals2014",key:"districtes_censals_2014",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2014.fgb"},37:{name:"districtesCensals2015",key:"districtes_censals_2015",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2015.fgb"},38:{name:"districtesCensals2016",key:"districtes_censals_2016",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2016.fgb"},39:{name:"districtesCensals2017",key:"districtes_censals_2017",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2017.fgb"},40:{name:"districtesCensals2018",key:"districtes_censals_2018",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2018.fgb"},41:{name:"districtesCensals2019",key:"districtes_censals_2019",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2019.fgb"},42:{name:"districtesCensals2020",key:"districtes_censals_2020",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2020.fgb"},43:{name:"districtesCensals2021",key:"districtes_censals_2021",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2021.fgb"},44:{name:"districtesCensals2022",key:"districtes_censals_2022",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_2022.fgb"},45:{name:"districtesCensalsVigent",key:"districtes_censals_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_vigent.fgb"},46:{name:"districtesCensalsVigentCentroid",key:"districtes_censals_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/districtes_censals_vigent_centroid.fgb"},47:{name:"incendisForestalsVigent",key:"incendis_forestals_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/incendis_forestals_vigent.fgb"},48:{name:"incendisForestalsVigentCentroid",key:"incendis_forestals_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/incendis_forestals_vigent_centroid.fgb"},49:{name:"municipis2022",key:"municipis_2022",url:"https://tilemaps.icgc.cat/vector/fgb/municipis_2022.fgb"},50:{name:"municipis2022Centroid",key:"municipis_2022_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/municipis_2022_centroid.fgb"},51:{name:"municipisVigent",key:"municipis_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/municipis_vigent.fgb"},52:{name:"municipisVigentCentroid",key:"municipis_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/municipis_vigent_centroid.fgb"},53:{name:"partitsJudicialsVigent",key:"partits_judicials_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/partits_judicials_vigent.fgb"},54:{name:"partitsJudicialsVigentCentroid",key:"partits_judicials_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/partits_judicials_vigent_centroid.fgb"},55:{name:"plaTerritorial2015",key:"pla_territorial_2015",url:"https://tilemaps.icgc.cat/vector/fgb/pla_territorial_2015.fgb"},56:{name:"plaTerritorialVigent",key:"pla_territorial_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/pla_territorial_vigent.fgb"},57:{name:"plaTerritorialVigentCentroid",key:"pla_territorial_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/pla_territorial_vigent_centroid.fgb"},58:{name:"provinciesVigent",key:"provincies_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/provincies_vigent.fgb"},59:{name:"provinciesVigentCentroid",key:"provincies_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/provincies_vigent_centroid.fgb"},60:{name:"regionsPolicialsVigent",key:"regions_policials_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/regions_policials_vigent.fgb"},61:{name:"regionsPolicialsVigentCentroid",key:"regions_policials_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/regions_policials_vigent_centroid.fgb"},62:{name:"regionsSanitariesVigent",key:"regions_sanitaries_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/regions_sanitaries_vigent.fgb"},63:{name:"regionsSanitariesVigentCentroid",key:"regions_sanitaries_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/regions_sanitaries_vigent_centroid.fgb"},64:{name:"seccionsCensals2002",key:"seccions_censals_2002",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2002.fgb"},65:{name:"seccionsCensals2003",key:"seccions_censals_2003",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2003.fgb"},66:{name:"seccionsCensals2004",key:"seccions_censals_2004",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2004.fgb"},67:{name:"seccionsCensals2005",key:"seccions_censals_2005",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2005.fgb"},68:{name:"seccionsCensals2006",key:"seccions_censals_2006",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2006.fgb"},69:{name:"seccionsCensals2007",key:"seccions_censals_2007",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2007.fgb"},70:{name:"seccionsCensals2008",key:"seccions_censals_2008",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2008.fgb"},71:{name:"seccionsCensals2009",key:"seccions_censals_2009",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2009.fgb"},72:{name:"seccionsCensals2010",key:"seccions_censals_2010",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2010.fgb"},73:{name:"seccionsCensals2011",key:"seccions_censals_2011",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2011.fgb"},74:{name:"seccionsCensals2012",key:"seccions_censals_2012",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2012.fgb"},75:{name:"seccionsCensals2013",key:"seccions_censals_2013",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2013.fgb"},76:{name:"seccionsCensals2014",key:"seccions_censals_2014",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2014.fgb"},77:{name:"seccionsCensals2015",key:"seccions_censals_2015",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2015.fgb"},78:{name:"seccionsCensals2016",key:"seccions_censals_2016",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2016.fgb"},79:{name:"seccionsCensals2017",key:"seccions_censals_2017",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2017.fgb"},80:{name:"seccionsCensals2018",key:"seccions_censals_2018",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2018.fgb"},81:{name:"seccionsCensals2019",key:"seccions_censals_2019",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2019.fgb"},82:{name:"seccionsCensals2020",key:"seccions_censals_2020",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2020.fgb"},83:{name:"seccionsCensals2021",key:"seccions_censals_2021",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2021.fgb"},84:{name:"seccionsCensals2022",key:"seccions_censals_2022",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_2022.fgb"},85:{name:"seccionsCensalsVigent",key:"seccions_censals_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_vigent.fgb"},86:{name:"seccionsCensalsVigentCentroid",key:"seccions_censals_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/seccions_censals_vigent_centroid.fgb"},87:{name:"sectorsSanitarisVigent",key:"sectors_sanitaris_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/sectors_sanitaris_vigent.fgb"},88:{name:"vegueriesVigent",key:"vegueries_vigent",url:"https://tilemaps.icgc.cat/vector/fgb/vegueries_vigent.fgb"},89:{name:"vegueriesVigentCentroid",key:"vegueries_vigent_centroid",url:"https://tilemaps.icgc.cat/vector/fgb/vegueries_vigent_centroid.fgb"}},vectorLayers:{0:{key:"relleu",layer:"",url:"https://tilemaps.icgc.cat/mapfactory/wmts/relleu/CAT3857/{z}/{x}/{y}.png"},1:{key:"geologia",layer:"",url:"https://tilemaps.icgc.cat/mapfactory/wmts/geologia/MON3857NW/{z}/{x}/{y}.png"},2:{key:"osm",layer:"",url:"https://tilemaps.icgc.cat/mapfactory/wmts/osm_suau/CAT3857_15/{z}/{x}/{y}.png"},3:{key:"cims",layer:"",url:'"https://geoserveis.icgc.cat/icc_100cims/wms/service?REQUEST=GetMap&SERVICE=WMS&VERSION=1.1.1&LAYERS=0&STYLES=&FORMAT=image/png&BGCOLOR=0xFFFFFF&TRANSPARENT=TRUE&SRS=EPSG:25831&BBOX=137118.923076923,4488408.75,650959.076923077,4749634.75&WIDTH=895&HEIGHT=455'},4:{key:"cobertesSol",layer:"",url:"http://geoserveis.icgc.cat/servei/catalunya/cobertes-sol/wms?REQUEST=GetMap&SERVICE=WMS&VERSION=1.3.0&LAYERS=cobertes_2009&STYLES=&FORMAT=image/png&BGCOLOR=0xFFFFFF&TRANSPARENT=TRUE&CRS=EPSG:25831&BBOX=374110.828167253,4639230.79853085,452621.120632226,4703578.45000215&WIDTH=1020&HEIGHT=836"}},wmsLayers:{0:{key:"altimetria",layer:"",url:"https://betaserver.icgc.cat/tileserver3/tileserver.php/alti_bt5m/{z}/{x}/{y}.pbf"},1:{key:"toponimia",layer:"",url:"https://betaserver.icgc.cat/tileserver3/tileserver.php/redtopo/{z}/{x}/{y}.pbf"}}};let SS=class{constructor(e){if(!e)e=Ql.mapOptions;else for(const t in Ql.mapOptions){let s=[Ql.mapOptions.center[0],Ql.mapOptions.center[1]];Ql.mapOptions.center=s,e.hasOwnProperty(t)||(e[t]=Ql.mapOptions[t])}e.maxZoom=18,e.maxPitch=85,e.maplibreLogo=!1,e.attributionControl=!1,this.map=new zs.Map(e),this.map.options=e,this.map.addControl(new zs.AttributionControl({compact:!0}))}addGeocoderICGC(e){try{e===void 0&&(e="top-right");const t="https://eines.icgc.cat/geocodificador/autocompletar?text=";let s={collapsed:!0,marker:!0,popup:!0,showResultMarkers:!0,maplibregl:zs,showResultsWhileTyping:!0,minLength:2};const l={forwardGeocode:async p=>{const a=[];try{const g=`https://nominatim.openstreetmap.org/search?q=${p.query}&format=geojson&polygon_geojson=1&addressdetails=1`,_=t+encodeURIComponent(p.query)+"&layers=topo1%2Ctopo2%2Caddress&size=5",L=await(await fetch(_)).json();for(const M of L.features){const I=M.geometry.coordinates,G={type:"Feature",geometry:{type:"Point",coordinates:I},place_name:M.properties.label,properties:M.properties,text:M.properties.label,place_type:["place"],center:I};a.push(G)}}catch(g){console.error(`Failed to forwardGeocode with error: ${g}`)}return{features:a}}};this.map.addControl(new CS(l,s),e);let c=document.getElementsByClassName("maplibregl-ctrl-geocoder--input");c[0].attributes[2].nodeValue="Cerca...",c[0].addEventListener("input",function(p){p.target.value.length>3})}catch(t){console.error(`Error adding ICGC geocoder: ${t.message}`)}}getStyle(){try{this.map.getStyle()}catch(e){console.error(`Error getting style: ${e.message}`)}}getConfigStyles(){try{let e=[];for(const t of $A)e.push(t.name);return e}catch(e){console.error(`Error retrieving base styles: ${e.message}`)}}getConfigWMSLayers(){try{let e=[];for(const t in Bs.WMS)Bs.WMS.hasOwnProperty(t)&&e.push(t);return e}catch(e){console.error(`Error retrieving WMS layers: ${e.message}`)}}getConfigOrtoLayers(){try{let e=[];for(const t in Bs.Orto)Bs.Orto.hasOwnProperty(t)&&e.push(t);return e}catch(e){console.error(`Error retrieving orto image layers: ${e.message}`)}}getConfigVectorLayers(){try{let e=[];for(const t in Bs.Vector)Bs.Vector.hasOwnProperty(t)&&e.push(t);return e}catch(e){console.error(`Error retrieving vector layers: ${e.message}`)}}getConfigVectorAdminLayers(){try{let e=[];for(const t in Bs.VectorAdmin)Bs.VectorAdmin.hasOwnProperty(t)&&e.push(t);return e}catch(e){console.error(`Error retrieving vectorAdmin layers: ${e.message}`)}}async fetchData(e,t,s){try{const c=await(await fetch(e)).json();let p=c.features[0].geometry.type;p.includes("ine")&&(s!==void 0?map.addLayer({id:t,type:"line",source:{type:"geojson",data:c},layout:{visibility:"visible"},paint:s}):map.addLayer({id:t,type:"line",source:{type:"geojson",data:c},layout:{visibility:"visible"},paint:{"line-color":"black","line-width":2,"line-opacity":1}})),p.includes("olygon")&&(s!==void 0?map.addLayer({id:t,type:"fill",source:{type:"geojson",data:c},layout:{visibility:"visible"},paint:s}):map.addLayer({id:t,type:"fill",source:{type:"geojson",data:c},layout:{visibility:"visible"},paint:{"fill-color":"blue","fill-opacity":.6}})),p.includes("oint")&&(s!==void 0?map.addLayer({id:t,type:"circle",source:{type:"geojson",data:c},layout:{visibility:"visible"},paint:s}):map.addLayer({id:t,type:"circle",source:{type:"geojson",data:c},layout:{visibility:"visible"},paint:{"circle-color":"red","circle-opacity":.85}}))}catch(l){console.error(`Error fetching data: ${l.message}`)}}async fetchDataAndMenu(e,t,s,l){try{const p=await(await fetch(e)).json();let a=p.features[0].geometry.type;if(s==="all")a.includes("ine")&&(l!==void 0?map.addLayer({id:t,type:"line",source:{type:"geojson",data:p},layout:{visibility:"visible"},paint:l}):map.addLayer({id:t,type:"line",source:{type:"geojson",data:p},layout:{visibility:"visible"},paint:{"line-color":"black","line-width":2,"line-opacity":1}})),a.includes("olygon")&&(l!==void 0?map.addLayer({id:t,type:"fill",source:{type:"geojson",data:p},layout:{visibility:"visible"},paint:l}):map.addLayer({id:t,type:"fill",source:{type:"geojson",data:p},layout:{visibility:"visible"},paint:{"fill-color":"blue","fill-opacity":.6}})),a.includes("oint")&&(l!==void 0?map.addLayer({id:t,type:"circle",source:{type:"geojson",data:p},layout:{visibility:"visible"},paint:l}):map.addLayer({id:t,type:"circle",source:{type:"geojson",data:p},layout:{visibility:"visible"},paint:{"circle-color":"red","circle-opacity":.85}})),map.addMenuItem(t);else{let g=s;const _={};p.features.forEach(C=>{const L=C.properties[g];_[L]||(a.includes("ine")&&(l!==void 0?map.addLayer({id:L,type:"line",source:{type:"geojson",data:p},layout:{visibility:"visible"},filter:["==",`${g}`,L],paint:l}):map.addLayer({id:L,type:"line",source:{type:"geojson",data:p},layout:{visibility:"visible"},filter:["==",`${g}`,L],paint:{"line-color":"black","line-width":2,"line-opacity":1}})),a.includes("olygon")&&(l!==void 0?map.addLayer({id:L,type:"fill",source:{type:"geojson",data:p},layout:{visibility:"visible"},filter:["==",`${g}`,L],paint:l}):map.addLayer({id:L,type:"fill",source:{type:"geojson",data:p},layout:{visibility:"visible"},filter:["==",`${g}`,L],paint:{"fill-color":"blue","fill-opacity":.6}})),a.includes("oint")&&(l!==void 0?map.addLayer({id:L,type:"circle",source:{type:"geojson",data:p},layout:{visibility:"visible"},filter:["==",`${g}`,L],paint:l}):map.addLayer({id:L,type:"circle",source:{type:"geojson",data:p},layout:{visibility:"visible"},filter:["==",`${g}`,L],paint:{"circle-color":"red","circle-opacity":.85}})),_[L]=!0,map.addMenuItem(L))})}}catch(c){console.error(`Error fetching data: ${c.message}`)}}async geocodeAddress(){try{let a=function(g){var _=turf.filter(p,"address",g);return _.features.slice(0,5)};var e=document.getElementById("addressInput"),t=e.value;const p=await(await fetch(url)).json();var s=document.getElementById("results");s.innerHTML="";var l=a(t);l.length>0?l.forEach(function(g){var _=g.geometry.coordinates,C=g.properties.address,L=document.createElement("div");L.innerHTML="<strong>"+C+"</strong><br>Coordenadas: "+_.join(", "),s.appendChild(L)}):s.innerHTML="No se encontraron resultados para la direccin: "+t}catch{}}async fetchDataWithSearchbox(e,t,s,l,c){try{let g=function(_){var C=turf.filter(a,"address",_);return C.features.slice(0,5)};const a=await(await fetch(e)).json()}catch(p){console.error(`Error fetching data: ${p.message}`)}}on(e,t){try{this.map.on(e,t)}catch(s){console.error(`Error adding event listener: ${s.message}`)}}getSource(e){try{this.map.getSource(e)}catch(t){console.error(`Error getting source: ${t.message}`)}}addSource(e,t){try{this.map.addSource(e,t)}catch(s){console.error(`Error adding source: ${s.message}`)}}setStyle(e,t){try{console.log("kk",e);for(const s of $A)if($A.hasOwnProperty(s)){const l=$A[s];l.key===e&&(e=l.url)}console.log("base",e),t!==void 0?this.map.setStyle(e,t):this.map.setStyle(e)}catch(s){console.error(`Error setting style: ${s.message}`)}}getLayer(e){try{this.map.getLayer(e)}catch(t){console.error(`Error getting layer: ${t.message}`)}}jumpTo(e){try{this.map.jumpTo(e)}catch(t){console.error(`Error jumping to ${e}: ${t.message}`)}}setLayoutProperty(e){try{this.map.setLayoutProperty(e)}catch(t){console.error(`Error setting layout property: ${t.message}`)}}addControl(e,t){try{t===void 0&&(t="top-right"),this.map.addControl(e,t)}catch(s){console.error(`Error adding control: ${s.message}`)}}getZoom(){try{return this.map.getZoom()}catch(e){console.error(`Error getting zoom level: ${e.message}`)}}addMouseCoordControl(){try{this.map.on("mousemove",function(e){const t=e.lngLat.lat,l="Lon/Lat (WGS 84)   Lon: "+e.lngLat.lng.toFixed(6)+"  Lat: "+t.toFixed(6),c=document.getElementById("divInfo"),p=document.createElement("div");p.className="coordControl",p.innerHTML=l+" - ZL: "+map.getZoom().toFixed(1),c.appendChild(p)})}catch(e){console.error(`Error adding mouse coordinate control: ${e.message}`)}}addGeolocateControl(e,t){try{t===void 0&&(t="top-right"),e===void 0?this.map.addControl(new zs.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),t):this.map.addControl(new zs.GeolocateControl(e),t)}catch(s){console.error(`Error adding geolocate control: ${s.message}`)}}getBounds(){try{return this.map.getBounds()}catch(e){console.error(`Error getting bounds: ${e.message}`)}}getCenter(){try{return this.map.getCenter()}catch(e){console.error(`Error getting center: ${e.message}`)}}setTerrain(e){try{this.map.on("load",()=>this.map.setTerrain(e))}catch(t){console.error(`Error setting terrain: ${t.message}`)}}getCanvas(){try{return this.map.getCanvas()}catch(e){console.error(`Error getting canvas: ${e.message}`)}}setCenter(e){try{return this.map.setCenter(e)}catch(t){console.error(`Error setting center: ${t.message}`)}}addLayer(e){try{this.map.addLayer(e)}catch(t){console.error(`Error adding layer: ${t.message}`)}}addLayerGeoJSON(e){try{this.map.on("load",()=>{this.map.addSource(`${e.id}-sourceIcgcMap`,{type:"geojson",data:e.data}),this.map.addLayer({id:`${e.id}-layerIcgcMap`,type:e.layerType,source:`${e.id}-sourceIcgcMap`,layout:e.layout,paint:e.paint})})}catch(t){console.error(`Error adding GeoJSON layer: ${t.message}`)}}addLayerWMS(e){try{this.map.on("load",()=>{console.log("holaaddlayerwms",e),this.map.addSource(`${e.id}-sourceIcgcMap`,{type:"raster",tiles:[e.tiles],tileSize:256}),this.map.addLayer({id:`${e.id}-layerIcgcMap`,type:"raster",source:`${e.id}-sourceIcgcMap`,paint:{}})})}catch(t){console.error(`Error adding WMS layer: ${t.message}`)}}removeControl(e){try{this.map.removeControl(e)}catch(t){console.error(`Error removing control: ${t.message}`)}}removeLayer(e){try{this.map.removeLayer(e)}catch(t){console.error(`Error removing layer: ${t.message}`)}}removeSource(e){try{this.map.removeSource(e)}catch(t){console.error(`Error removing source: ${t.message}`)}}addLogo(e){try{const t=document.createElement("img");t.src=e.url,t.style.height="62px";const s=document.getElementById("logos"),l=document.createElement("a");l.id=e.id,l.href=e.href,l.target="_blank",l.style.position="relative",l.style.bottom="1px",l.appendChild(t),s.appendChild(l)}catch(t){console.error(`Error adding logo: ${t.message}`)}}addBasemapsICGC(e){try{const t=l=>{this.map.setStyle(l)},s=document.getElementById("basemap-group");this.map.on("load",()=>{for(const l of e)for(const c of Object.keys(Ql.baseStyles)){const p=Ql.baseStyles[c];if(l===p.url){const a=document.createElement("div");a.className="basemap-item",a.title=p.key,a.style.backgroundImage=`url('${p.image}')`,s.appendChild(a),a.addEventListener("click",()=>t(p.url))}}})}catch(t){console.error(`Error adding basemaps: ${t.message}`)}}addBasemaps(e){try{const t=l=>{console.log("base",l),this.map.setStyle(l.url)},s=document.getElementById("basemap-group");this.map.on("load",()=>{e.forEach(l=>{const c=document.createElement("div");c.className="basemap-item",c.title=l.label,c.style.backgroundImage=`url('${l.image}')`,s.appendChild(c),c.addEventListener("click",()=>t(l))})})}catch(t){console.error(`Error adding basemaps: ${t.message}`)}}addFeatureQuery(e,t){try{let s;this.map.on("load",()=>{this.map.on("mouseenter",e,()=>{this.map.getCanvas().style.cursor="pointer"}),this.map.on("mouseleave",e,()=>{this.map.getCanvas().style.cursor=""}),this.map.on("click",l=>{let c=this.map.queryRenderedFeatures(l.point);if(c&&c[0].source===e){let p=[l.lngLat.lng,l.lngLat.lat];if(t!==void 0&&t.length>0){if(t!==null){let a="";t.forEach(g=>{let _=c[0].properties[g];a=a+`<h4>${_}</h4>`}),s=a,map.addPopup(p,s)}}else{let a="";for(const g in c[0].properties)a+="<b>"+g+"</b>:"+c[0].properties[g]+"<br>";s=a,map.addPopup(p,s)}}})})}catch(s){console.error(`Error adding feature query: ${s.message}`)}}addScaleControl(e,t){try{var s=new zs.ScaleControl(e);this.map.addControl(s,t)}catch(l){console.error(`Error adding scale: ${l.message}`)}}removeMeasureControl(){try{const e=document.getElementById("xButton"),t=document.getElementById("distance");t.innerHTML="";let s=this.map.getStyle().layers;for(let l=0;l<s.length;l++)s[l].id.includes("measure")&&this.map.removeLayer(s[l].id)}catch(e){console.error(`Error removing measure control: ${e.message}`)}}addMeasureControl(){try{let _=function(L,M){const I=M.queryRenderedFeatures(L.point,{layers:["measure-points"]});if(a.features.length>1&&a.features.pop(),s.innerHTML="",I.length){const Y=I[0].properties.id;a.features=a.features.filter(q=>q.properties.id!==Y)}else{const Y={type:"Feature",geometry:{type:"Point",coordinates:[L.lngLat.lng,L.lngLat.lat]},properties:{id:String(new Date().getTime())}};a.features.push(Y)}g.geometry.coordinates=a.features.map(Y=>Y.geometry.coordinates),a.features.push(g);const G=document.createElement("pre");G.textContent=`Distncia total: ${turf.length(g).toLocaleString()}km`,s.appendChild(G);const j=document.createElement("div");j.id="xButton",j.textContent="X",j.onclick=()=>{try{const Y=document.getElementById("xButton"),q=document.getElementById("distance");q.innerHTML="";let ne=M.getStyle().layers;for(let he=0;he<ne.length;he++)ne[he].id.includes("measure")&&M.removeLayer(ne[he].id)}catch(Y){console.error(`Error adding measure control: ${Y.message}`)}},s.appendChild(j),M.getSource("geojson").setData(a)},C=function(L,M){M.getCanvas().style.cursor="grab",l=!0};const t=document.getElementById("distance"),s=document.getElementById("distanceTotal");let l=!1,c=!1;var e;const p=document.createElement("div");p.id="rulerButton",p.onclick=()=>{try{c?document.getElementById("rulerButton").style.backgroundColor="#ff597a":document.getElementById("rulerButton").style.backgroundColor="#41b883",c=!c}catch(L){console.error(`Error adding measure control: ${L.message}`)}},s.appendChild(p);const a={type:"FeatureCollection",features:[]},g={type:"Feature",geometry:{type:"LineString",coordinates:[]}};this.map.on("load",()=>{this.map.addSource("geojson",{type:"geojson",data:a}),this.map.addLayer({id:"measure-points",type:"circle",source:"geojson",paint:{"circle-radius":5,"circle-color":"#000"},filter:["in","$type","Point"]}),this.map.addLayer({id:"measure-lines",type:"line",source:"geojson",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#000","line-width":2.5},filter:["in","$type","LineString"]})}),this.map.on("click",L=>{clearTimeout(e),!l&&c&&(e=setTimeout(()=>{_(L,this.map)},50))}),this.map.on("dblclick",L=>{c&&(clearTimeout(e),C(L,this.map))}),this.map.on("mousemove",L=>{if(!l&&c){const M=this.map.queryRenderedFeatures(L.point,{layers:["measure-points"]});this.map.getCanvas().style.cursor=M.length?"pointer":"crosshair"}else this.map.getCanvas().style.cursor="grab"})}catch{}}addExportControl(e,t){try{typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e={PageSize:yu.A4,PageOrientation:vh.Landscape,Format:Ml.PNG,DPI:zg[300],Crosshair:!0,PrintableArea:!0},t="top-right"),map.addControl(new Q3(e),t)}catch(s){console.error(`Error adding export control: ${s.message}`)}}addPopup(e,t){try{this.map.on("load",()=>{new zs.Popup().setLngLat(e).setHTML(t).addTo(this.map)})}catch{}}addMarker(e){try{let t,s;return e.text===void 0?t=new zs.Marker(e.options).setLngLat(e.coord).addTo(this.map):(s=new zs.Popup({offset:e.textOffset}).setText(e.text),t=new zs.Marker().setLngLat(e.coord).setPopup(s).addTo(this.map)),t}catch(t){return console.error(`Error adding marker: ${t.message}`),null}}addPopup(e,t){try{return new zs.Popup().setLngLat(e).setHTML(t).addTo(this.map)}catch(s){return console.error(`Error adding popup: ${s.message}`),null}}addFullScreen(e){try{e===void 0&&(e="top-right"),this.map.addControl(new zs.FullscreenControl,e)}catch(t){console.error(`Error adding fullscreen control: ${t.message}`)}}addMenuItem(e){try{if(e.length>0){const t=document.getElementById("menu-group"),s=document.createElement("input");s.type="checkbox",s.id=e,s.checked=!0,t.appendChild(s);const l=document.createElement("label");l.setAttribute("for",e),l.textContent=e,t.appendChild(l),s.addEventListener("change",c=>{this.map.setLayoutProperty(e,"visibility",c.target.checked?"visible":"none")})}}catch(t){console.error(`Error adding menu item: ${t.message}`)}}addLayerTree(e){try{let t=e.features;const s=document.getElementById("filter-group");this.map.on("load",()=>{const l=this.map.getStyle().layers;let c;for(let p=0;p<l.length;p++)if(l[p].type==="symbol"){c=l[p].id;break}this.map.addSource(`${e.id}-source`,{type:e.type,data:t}),t.features.forEach(p=>{const a=p.properties.icon,g=`poi-${a}`;if(!this.map.getLayer(g)){this.map.addLayer({id:g,type:"circle",source:`${e.id}-source`,paint:{"circle-radius":6,"circle-color":"#B42222"},filter:["==","icon",a]},c);const _=document.createElement("input");_.type="checkbox",_.id=g,_.checked=!0,s.appendChild(_);const C=document.createElement("label");C.setAttribute("for",g),C.textContent=a,s.appendChild(C),_.addEventListener("change",L=>{this.map.setLayoutProperty(g,"visibility",L.target.checked?"visible":"none")})}})})}catch(t){console.error(`Error adding layer tree: ${t.message}`)}}createNavigationControl(e,t){try{t===void 0&&(t="top-right"),this.map.addControl(new zs.NavigationControl(e),t)}catch(s){return console.error(`Error creating navigation control: ${s.message}`),null}}addNavigationControl(e,t){try{t===void 0&&(t="top-right"),this.map.addControl(new zs.NavigationControl(e),t)}catch(s){console.error(`Error adding navigation control: ${s.message}`)}}addAttributionControl(e){try{this.map.addControl(new zs.AttributionControl(e.options),e.position)}catch(t){console.error(`Error adding attribution control: ${t.message}`)}}_dealStyleMaps(e){try{if(e&&e.indexOf("icgc.cat")!=-1){for(const t in $A)if($A.hasOwnProperty(t)){const s=$A[t];if(t===e)return s}return $A[0]}else return e}catch(t){return console.error(`Error dealing with map styles: ${t.message}`),null}}addImageLayerICGC(e){try{let s=function(c,p,a,g,_){console.log("hola",e);const C=[p,a,g,_];for(const L of C)for(const[M,I]of Object.entries(L))if(I===c)return M;return null};console.log("name",e);let t=null;t=s(e,Bs.Orto,Bs.VectorAdmin,Bs.WMS,Bs.Vector),console.log("op",t),t||console.log(" %c The layer: %c%s%c does not exist in the ICGC DB. Consult the documentation.","font-weight: bold; font-style: italic;","font-weight: normal; font-style: normal; color: red;",e,"font-weight: bold; font-style: italic;");let l={id:t,tiles:e};console.log("source",l),this.addLayerWMS(l)}catch(t){console.error(`Error adding ICGC image layer: ${t.message}`)}}async addVectorLayerICGC(e,t,s){try{let c=function(p){for(const a in Bs.VectorAdmin)if(Bs.VectorAdmin.hasOwnProperty(a)&&Bs.VectorAdmin[a]===p)return a;return null}(e);if(c===null)console.log(" %c The layer: %c%s%c does not exist in the ICGC DB. Consult the documentation.","font-weight: bold; font-style: italic;","font-weight: normal; font-style: normal; color: red;",c,"font-weight: bold; font-style: italic;");else{const p=await fetch(e);this.map.on("load",async()=>{const a={type:"FeatureCollection",features:[]};for await(const _ of flatgeobuf.deserialize(p.body))a.features.push(_);let g=op.name+"-source";this.map.addSource(g,{type:"geojson",data:a}),this.map.addLayer({id:op.name+"-fill",type:"fill",source:g,paint:{"fill-color":"#0000FF","fill-opacity":0}}),this.map.addLayer({id:op.name+"-line",type:"line",source:g,paint:{"line-color":"#FFFFFF","line-opacity":.49,"line-width":1}})})}}catch(l){console.error(`Error adding ICGC vector layer: ${l.message}`)}}addTerrainICGC(e,t){this.map.on("load",()=>{try{let s;for(const c in Jp)if(Jp.hasOwnProperty(c)){const p=Jp[c];p===e&&(s=p)}let l=s;this.map.addSource("terrainICGC-src",{type:"raster-dem",tiles:[l],tileSize:512,maxzoom:16}),this.map.setTerrain({source:"terrainICGC-src",exaggeration:1.5}),t===void 0&&(t="top-right"),this.map.addControl(new b4({pitch:90,bearing:null,minpitchzoom:null}),t)}catch(s){console.error(`Error adding 3D terrain: ${s.message}`)}})}};var A2={exports:{}};function ES(i,e){var t=i.getCenter(),s=i.getZoom(),l=i.getBearing(),c=i.getPitch();e.forEach(function(p){p.jumpTo({center:t,zoom:s,bearing:l,pitch:c})})}function FS(){var i,e=arguments.length;if(e===1)i=arguments[0];else{i=[];for(var t=0;t<e;t++)i.push(arguments[t])}var s=[];i.forEach(function(a,g){s[g]=p.bind(null,a,i.filter(function(_,C){return C!==g}))});function l(){i.forEach(function(a,g){a.on("move",s[g])})}function c(){i.forEach(function(a,g){a.off("move",s[g])})}function p(a,g){c(),ES(a,g),l()}return l(),function(){c(),s=[],i=[]}}var IS=FS;(function(i){var e=IS,t=n2.EventEmitter;function s(l,c,p,a){if(this.options=a||{},this._mapA=l,this._mapB=c,this._horizontal=this.options.orientation==="horizontal",this._onDown=this._onDown.bind(this),this._onMove=this._onMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._ev=new t,this._swiper=document.createElement("div"),this._swiper.className=this._horizontal?"compare-swiper-horizontal":"compare-swiper-vertical",this._controlContainer=document.createElement("div"),this._controlContainer.className=this._horizontal?"maplibregl-compare maplibregl-compare-horizontal":"maplibregl-compare",this._controlContainer.className=this._controlContainer.className,this._controlContainer.appendChild(this._swiper),typeof p=="string"&&document.body.querySelectorAll){var g=document.body.querySelectorAll(p)[0];if(!g)throw new Error("Cannot find element with specified container selector.");g.appendChild(this._controlContainer)}else if(p instanceof Element&&p.appendChild)p.appendChild(this._controlContainer);else throw new Error("Invalid container specified. Must be CSS selector or HTML element.");this._bounds=c.getContainer().getBoundingClientRect();var _=(this._horizontal?this._bounds.height:this._bounds.width)/2;this._setPosition(_),this._clearSync=e(l,c),this._onResize=(function(){this._bounds=c.getContainer().getBoundingClientRect(),this.currentPosition&&this._setPosition(this.currentPosition)}).bind(this),c.on("resize",this._onResize),this.options&&this.options.mousemove&&(l.getContainer().addEventListener("mousemove",this._onMove),c.getContainer().addEventListener("mousemove",this._onMove)),this._swiper.addEventListener("mousedown",this._onDown),this._swiper.addEventListener("touchstart",this._onDown)}s.prototype={_setPointerEvents:function(l){this._controlContainer.style.pointerEvents=l,this._swiper.style.pointerEvents=l},_onDown:function(l){l.touches?(document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onTouchEnd)):(document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onMouseUp))},_setPosition:function(l){l=Math.min(l,this._horizontal?this._bounds.height:this._bounds.width);var c=this._horizontal?"translate(0, "+l+"px)":"translate("+l+"px, 0)";this._controlContainer.style.transform=c,this._controlContainer.style.WebkitTransform=c;var p=this._horizontal?"rect(0, 999em, "+l+"px, 0)":"rect(0, "+l+"px, "+this._bounds.height+"px, 0)",a=this._horizontal?"rect("+l+"px, 999em, "+this._bounds.height+"px,0)":"rect(0, 999em, "+this._bounds.height+"px,"+l+"px)";this._mapA.getContainer().style.clip=p,this._mapB.getContainer().style.clip=a,this.currentPosition=l},_onMove:function(l){this.options&&this.options.mousemove&&this._setPointerEvents(l.touches?"auto":"none"),this._horizontal?this._setPosition(this._getY(l)):this._setPosition(this._getX(l))},_onMouseUp:function(){document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onMouseUp),this.fire("slideend",{currentPosition:this.currentPosition})},_onTouchEnd:function(){document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onTouchEnd),this.fire("slideend",{currentPosition:this.currentPosition})},_getX:function(l){l=l.touches?l.touches[0]:l;var c=l.clientX-this._bounds.left;return c<0&&(c=0),c>this._bounds.width&&(c=this._bounds.width),c},_getY:function(l){l=l.touches?l.touches[0]:l;var c=l.clientY-this._bounds.top;return c<0&&(c=0),c>this._bounds.height&&(c=this._bounds.height),c},setSlider:function(l){this._setPosition(l)},on:function(l,c){return this._ev.on(l,c),this},fire:function(l,c){return this._ev.emit(l,c),this},off:function(l,c){return this._ev.removeListener(l,c),this},remove:function(){this._clearSync(),this._mapB.off("resize",this._onResize);var l=this._mapA.getContainer();l&&(l.style.clip=null,l.removeEventListener("mousemove",this._onMove));var c=this._mapB.getContainer();c&&(c.style.clip=null,c.removeEventListener("mousemove",this._onMove)),this._swiper.removeEventListener("mousedown",this._onDown),this._swiper.removeEventListener("touchstart",this._onDown),this._controlContainer.remove()}},window.maplibregl?maplibregl.Compare=s:i.exports=s})(A2);var LS=A2.exports;const TS=vg(LS);class US{constructor(e,t,s,l){this.mapCompare=new TS(e.map,t.map,s,{})}}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Gg=function(i,e){return Gg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])},Gg(i,e)};function go(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Gg(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var qg=function(){return qg=Object.assign||function(i){for(var e,t=1,s=arguments.length;t<s;t++){e=arguments[t];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(i[l]=e[l])}return i},qg.apply(this,arguments)};function js(i,e,t,s){function l(c){return c instanceof t?c:new t(function(p){p(c)})}return new(t||(t=Promise))(function(c,p){function a(C){try{_(s.next(C))}catch(L){p(L)}}function g(C){try{_(s.throw(C))}catch(L){p(L)}}function _(C){C.done?c(C.value):l(C.value).then(a,g)}_((s=s.apply(i,e||[])).next())})}function Cs(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,l,c,p;return p={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function a(_){return function(C){return g([_,C])}}function g(_){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,l&&(c=_[0]&2?l.return:_[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,_[1])).done)return c;switch(l=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,l=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){t.label=_[1];break}if(_[0]===6&&t.label<c[1]){t.label=c[1],c=_;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(_);break}c[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(i,t)}catch(C){_=[6,C],l=0}finally{s=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function ed(i,e,t){if(t||arguments.length===2)for(var s=0,l=e.length,c;s<l;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return i.concat(c||e)}for(var KA=function(){function i(e,t,s,l){this.left=e,this.top=t,this.width=s,this.height=l}return i.prototype.add=function(e,t,s,l){return new i(this.left+e,this.top+t,this.width+s,this.height+l)},i.fromClientRect=function(e,t){return new i(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},i.fromDOMRectList=function(e,t){var s=Array.from(t).find(function(l){return l.width!==0});return s?new i(s.left+e.windowBounds.left,s.top+e.windowBounds.top,s.width,s.height):i.EMPTY},i.EMPTY=new i(0,0,0,0),i}(),td=function(i,e){return KA.fromClientRect(i,e.getBoundingClientRect())},PS=function(i){var e=i.body,t=i.documentElement;if(!e||!t)throw new Error("Unable to get document size");var s=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),l=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new KA(0,0,s,l)},rd=function(i){for(var e=[],t=0,s=i.length;t<s;){var l=i.charCodeAt(t++);if(l>=55296&&l<=56319&&t<s){var c=i.charCodeAt(t++);(c&64512)===56320?e.push(((l&1023)<<10)+(c&1023)+65536):(e.push(l),t--)}else e.push(l)}return e},hn=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,i);var t=i.length;if(!t)return"";for(var s=[],l=-1,c="";++l<t;){var p=i[l];p<=65535?s.push(p):(p-=65536,s.push((p>>10)+55296,p%1024+56320)),(l+1===t||s.length>16384)&&(c+=String.fromCharCode.apply(String,s),s.length=0)}return c},l2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",MS=typeof Uint8Array>"u"?[]:new Uint8Array(256),id=0;id<l2.length;id++)MS[l2.charCodeAt(id)]=id;for(var c2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_h=typeof Uint8Array>"u"?[]:new Uint8Array(256),nd=0;nd<c2.length;nd++)_h[c2.charCodeAt(nd)]=nd;for(var QS=function(i){var e=i.length*.75,t=i.length,s,l=0,c,p,a,g;i[i.length-1]==="="&&(e--,i[i.length-2]==="="&&e--);var _=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),C=Array.isArray(_)?_:new Uint8Array(_);for(s=0;s<t;s+=4)c=_h[i.charCodeAt(s)],p=_h[i.charCodeAt(s+1)],a=_h[i.charCodeAt(s+2)],g=_h[i.charCodeAt(s+3)],C[l++]=c<<2|p>>4,C[l++]=(p&15)<<4|a>>2,C[l++]=(a&3)<<6|g&63;return _},kS=function(i){for(var e=i.length,t=[],s=0;s<e;s+=2)t.push(i[s+1]<<8|i[s]);return t},DS=function(i){for(var e=i.length,t=[],s=0;s<e;s+=4)t.push(i[s+3]<<24|i[s+2]<<16|i[s+1]<<8|i[s]);return t},xc=5,$g=11,Kg=2,NS=$g-xc,u2=65536>>xc,OS=1<<xc,Wg=OS-1,RS=1024>>xc,zS=u2+RS,HS=zS,VS=32,jS=HS+VS,GS=65536>>$g,qS=1<<NS,$S=qS-1,h2=function(i,e,t){return i.slice?i.slice(e,t):new Uint16Array(Array.prototype.slice.call(i,e,t))},KS=function(i,e,t){return i.slice?i.slice(e,t):new Uint32Array(Array.prototype.slice.call(i,e,t))},WS=function(i,e){var t=QS(i),s=Array.isArray(t)?DS(t):new Uint32Array(t),l=Array.isArray(t)?kS(t):new Uint16Array(t),c=24,p=h2(l,c/2,s[4]/2),a=s[5]===2?h2(l,(c+s[4])/2):KS(s,Math.ceil((c+s[4])/4));return new ZS(s[0],s[1],s[2],s[3],p,a)},ZS=function(){function i(e,t,s,l,c,p){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=l,this.index=c,this.data=p}return i.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>xc],t=(t<<Kg)+(e&Wg),this.data[t];if(e<=65535)return t=this.index[u2+(e-55296>>xc)],t=(t<<Kg)+(e&Wg),this.data[t];if(e<this.highStart)return t=jS-GS+(e>>$g),t=this.index[t],t+=e>>xc&$S,t=this.index[t],t=(t<<Kg)+(e&Wg),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},i}(),p2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",XS=typeof Uint8Array>"u"?[]:new Uint8Array(256),sd=0;sd<p2.length;sd++)XS[p2.charCodeAt(sd)]=sd;var YS="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",d2=50,JS=1,f2=2,g2=3,eE=4,tE=5,m2=7,y2=8,v2=9,kl=10,Zg=11,_2=12,Xg=13,rE=14,wh=15,Yg=16,ad=17,bh=18,iE=19,w2=20,Jg=21,xh=22,em=23,_u=24,Ia=25,Bh=26,Ch=27,wu=28,nE=29,bu=30,sE=31,od=32,Ad=33,tm=34,rm=35,im=36,Sh=37,nm=38,ld=39,cd=40,sm=41,b2=42,aE=43,oE=[9001,65288],x2="!",Gs="",ud="",am=WS(YS),WA=[bu,im],om=[JS,f2,g2,tE],B2=[kl,y2],C2=[Ch,Bh],AE=om.concat(B2),S2=[nm,ld,cd,tm,rm],lE=[wh,Xg],cE=function(i,e){e===void 0&&(e="strict");var t=[],s=[],l=[];return i.forEach(function(c,p){var a=am.get(c);if(a>d2?(l.push(!0),a-=d2):l.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(c)!==-1)return s.push(p),t.push(Yg);if(a===eE||a===Zg){if(p===0)return s.push(p),t.push(bu);var g=t[p-1];return AE.indexOf(g)===-1?(s.push(s[p-1]),t.push(g)):(s.push(p),t.push(bu))}if(s.push(p),a===sE)return t.push(e==="strict"?Jg:Sh);if(a===b2||a===nE)return t.push(bu);if(a===aE)return c>=131072&&c<=196605||c>=196608&&c<=262141?t.push(Sh):t.push(bu);t.push(a)}),[s,t,l]},Am=function(i,e,t,s){var l=s[t];if(Array.isArray(i)?i.indexOf(l)!==-1:i===l)for(var c=t;c<=s.length;){c++;var p=s[c];if(p===e)return!0;if(p!==kl)break}if(l===kl)for(var c=t;c>0;){c--;var a=s[c];if(Array.isArray(i)?i.indexOf(a)!==-1:i===a)for(var g=t;g<=s.length;){g++;var p=s[g];if(p===e)return!0;if(p!==kl)break}if(a!==kl)break}return!1},E2=function(i,e){for(var t=i;t>=0;){var s=e[t];if(s===kl)t--;else return s}return 0},uE=function(i,e,t,s,l){if(t[s]===0)return Gs;var c=s-1;if(Array.isArray(l)&&l[c]===!0)return Gs;var p=c-1,a=c+1,g=e[c],_=p>=0?e[p]:0,C=e[a];if(g===f2&&C===g2)return Gs;if(om.indexOf(g)!==-1)return x2;if(om.indexOf(C)!==-1||B2.indexOf(C)!==-1)return Gs;if(E2(c,e)===y2)return ud;if(am.get(i[c])===Zg||(g===od||g===Ad)&&am.get(i[a])===Zg||g===m2||C===m2||g===v2||[kl,Xg,wh].indexOf(g)===-1&&C===v2||[ad,bh,iE,_u,wu].indexOf(C)!==-1||E2(c,e)===xh||Am(em,xh,c,e)||Am([ad,bh],Jg,c,e)||Am(_2,_2,c,e))return Gs;if(g===kl)return ud;if(g===em||C===em)return Gs;if(C===Yg||g===Yg)return ud;if([Xg,wh,Jg].indexOf(C)!==-1||g===rE||_===im&&lE.indexOf(g)!==-1||g===wu&&C===im||C===w2||WA.indexOf(C)!==-1&&g===Ia||WA.indexOf(g)!==-1&&C===Ia||g===Ch&&[Sh,od,Ad].indexOf(C)!==-1||[Sh,od,Ad].indexOf(g)!==-1&&C===Bh||WA.indexOf(g)!==-1&&C2.indexOf(C)!==-1||C2.indexOf(g)!==-1&&WA.indexOf(C)!==-1||[Ch,Bh].indexOf(g)!==-1&&(C===Ia||[xh,wh].indexOf(C)!==-1&&e[a+1]===Ia)||[xh,wh].indexOf(g)!==-1&&C===Ia||g===Ia&&[Ia,wu,_u].indexOf(C)!==-1)return Gs;if([Ia,wu,_u,ad,bh].indexOf(C)!==-1)for(var L=c;L>=0;){var M=e[L];if(M===Ia)return Gs;if([wu,_u].indexOf(M)!==-1)L--;else break}if([Ch,Bh].indexOf(C)!==-1)for(var L=[ad,bh].indexOf(g)!==-1?p:c;L>=0;){var M=e[L];if(M===Ia)return Gs;if([wu,_u].indexOf(M)!==-1)L--;else break}if(nm===g&&[nm,ld,tm,rm].indexOf(C)!==-1||[ld,tm].indexOf(g)!==-1&&[ld,cd].indexOf(C)!==-1||[cd,rm].indexOf(g)!==-1&&C===cd||S2.indexOf(g)!==-1&&[w2,Bh].indexOf(C)!==-1||S2.indexOf(C)!==-1&&g===Ch||WA.indexOf(g)!==-1&&WA.indexOf(C)!==-1||g===_u&&WA.indexOf(C)!==-1||WA.concat(Ia).indexOf(g)!==-1&&C===xh&&oE.indexOf(i[a])===-1||WA.concat(Ia).indexOf(C)!==-1&&g===bh)return Gs;if(g===sm&&C===sm){for(var I=t[c],G=1;I>0&&(I--,e[I]===sm);)G++;if(G%2!==0)return Gs}return g===od&&C===Ad?Gs:ud},hE=function(i,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=cE(i,e.lineBreak),s=t[0],l=t[1],c=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(l=l.map(function(a){return[Ia,bu,b2].indexOf(a)!==-1?Sh:a}));var p=e.wordBreak==="keep-all"?c.map(function(a,g){return a&&i[g]>=19968&&i[g]<=40959}):void 0;return[s,l,p]},pE=function(){function i(e,t,s,l){this.codePoints=e,this.required=t===x2,this.start=s,this.end=l}return i.prototype.slice=function(){return hn.apply(void 0,this.codePoints.slice(this.start,this.end))},i}(),dE=function(i,e){var t=rd(i),s=hE(t,e),l=s[0],c=s[1],p=s[2],a=t.length,g=0,_=0;return{next:function(){if(_>=a)return{done:!0,value:null};for(var C=Gs;_<a&&(C=uE(t,c,l,++_,p))===Gs;);if(C!==Gs||_===a){var L=new pE(t,C,g,_);return g=_,{value:L,done:!1}}return{done:!0,value:null}}}},fE=1,gE=2,Eh=4,F2=8,hd=10,I2=47,Fh=92,mE=9,yE=32,pd=34,Ih=61,vE=35,_E=36,wE=37,dd=39,fd=40,Lh=41,bE=95,ua=45,xE=33,BE=60,CE=62,SE=64,EE=91,FE=93,IE=61,LE=123,gd=63,TE=125,L2=124,UE=126,PE=128,T2=65533,lm=42,Bc=43,ME=44,QE=58,kE=59,Th=46,DE=0,NE=8,OE=11,RE=14,zE=31,HE=127,lA=-1,U2=48,P2=97,M2=101,VE=102,jE=117,GE=122,Q2=65,k2=69,D2=70,qE=85,$E=90,qs=function(i){return i>=U2&&i<=57},KE=function(i){return i>=55296&&i<=57343},xu=function(i){return qs(i)||i>=Q2&&i<=D2||i>=P2&&i<=VE},WE=function(i){return i>=P2&&i<=GE},ZE=function(i){return i>=Q2&&i<=$E},XE=function(i){return WE(i)||ZE(i)},YE=function(i){return i>=PE},md=function(i){return i===hd||i===mE||i===yE},yd=function(i){return XE(i)||YE(i)||i===bE},N2=function(i){return yd(i)||qs(i)||i===ua},JE=function(i){return i>=DE&&i<=NE||i===OE||i>=RE&&i<=zE||i===HE},Dl=function(i,e){return i!==Fh?!1:e!==hd},vd=function(i,e,t){return i===ua?yd(e)||Dl(e,t):yd(i)?!0:!!(i===Fh&&Dl(i,e))},cm=function(i,e,t){return i===Bc||i===ua?qs(e)?!0:e===Th&&qs(t):qs(i===Th?e:i)},eF=function(i){var e=0,t=1;(i[e]===Bc||i[e]===ua)&&(i[e]===ua&&(t=-1),e++);for(var s=[];qs(i[e]);)s.push(i[e++]);var l=s.length?parseInt(hn.apply(void 0,s),10):0;i[e]===Th&&e++;for(var c=[];qs(i[e]);)c.push(i[e++]);var p=c.length,a=p?parseInt(hn.apply(void 0,c),10):0;(i[e]===k2||i[e]===M2)&&e++;var g=1;(i[e]===Bc||i[e]===ua)&&(i[e]===ua&&(g=-1),e++);for(var _=[];qs(i[e]);)_.push(i[e++]);var C=_.length?parseInt(hn.apply(void 0,_),10):0;return t*(l+a*Math.pow(10,-p))*Math.pow(10,g*C)},tF={type:2},rF={type:3},iF={type:4},nF={type:13},sF={type:8},aF={type:21},oF={type:9},AF={type:10},lF={type:11},cF={type:12},uF={type:14},_d={type:23},hF={type:1},pF={type:25},dF={type:24},fF={type:26},gF={type:27},mF={type:28},yF={type:29},vF={type:31},um={type:32},O2=function(){function i(){this._value=[]}return i.prototype.write=function(e){this._value=this._value.concat(rd(e))},i.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==um;)e.push(t),t=this.consumeToken();return e},i.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case pd:return this.consumeStringToken(pd);case vE:var t=this.peekCodePoint(0),s=this.peekCodePoint(1),l=this.peekCodePoint(2);if(N2(t)||Dl(s,l)){var c=vd(t,s,l)?gE:fE,p=this.consumeName();return{type:5,value:p,flags:c}}break;case _E:if(this.peekCodePoint(0)===Ih)return this.consumeCodePoint(),nF;break;case dd:return this.consumeStringToken(dd);case fd:return tF;case Lh:return rF;case lm:if(this.peekCodePoint(0)===Ih)return this.consumeCodePoint(),uF;break;case Bc:if(cm(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case ME:return iF;case ua:var a=e,g=this.peekCodePoint(0),_=this.peekCodePoint(1);if(cm(a,g,_))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(vd(a,g,_))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(g===ua&&_===CE)return this.consumeCodePoint(),this.consumeCodePoint(),dF;break;case Th:if(cm(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case I2:if(this.peekCodePoint(0)===lm)for(this.consumeCodePoint();;){var C=this.consumeCodePoint();if(C===lm&&(C=this.consumeCodePoint(),C===I2))return this.consumeToken();if(C===lA)return this.consumeToken()}break;case QE:return fF;case kE:return gF;case BE:if(this.peekCodePoint(0)===xE&&this.peekCodePoint(1)===ua&&this.peekCodePoint(2)===ua)return this.consumeCodePoint(),this.consumeCodePoint(),pF;break;case SE:var L=this.peekCodePoint(0),M=this.peekCodePoint(1),I=this.peekCodePoint(2);if(vd(L,M,I)){var p=this.consumeName();return{type:7,value:p}}break;case EE:return mF;case Fh:if(Dl(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case FE:return yF;case IE:if(this.peekCodePoint(0)===Ih)return this.consumeCodePoint(),sF;break;case LE:return lF;case TE:return cF;case jE:case qE:var G=this.peekCodePoint(0),j=this.peekCodePoint(1);return G===Bc&&(xu(j)||j===gd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case L2:if(this.peekCodePoint(0)===Ih)return this.consumeCodePoint(),oF;if(this.peekCodePoint(0)===L2)return this.consumeCodePoint(),aF;break;case UE:if(this.peekCodePoint(0)===Ih)return this.consumeCodePoint(),AF;break;case lA:return um}return md(e)?(this.consumeWhiteSpace(),vF):qs(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):yd(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:hn(e)}},i.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},i.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},i.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},i.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();xu(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var s=!1;t===gd&&e.length<6;)e.push(t),t=this.consumeCodePoint(),s=!0;if(s){var l=parseInt(hn.apply(void 0,e.map(function(g){return g===gd?U2:g})),16),c=parseInt(hn.apply(void 0,e.map(function(g){return g===gd?D2:g})),16);return{type:30,start:l,end:c}}var p=parseInt(hn.apply(void 0,e),16);if(this.peekCodePoint(0)===ua&&xu(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];xu(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();var c=parseInt(hn.apply(void 0,a),16);return{type:30,start:p,end:c}}else return{type:30,start:p,end:p}},i.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===fd?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===fd?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},i.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===lA)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===dd||t===pd){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===lA||this.peekCodePoint(0)===Lh)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),_d)}for(;;){var l=this.consumeCodePoint();if(l===lA||l===Lh)return{type:22,value:hn.apply(void 0,e)};if(md(l))return this.consumeWhiteSpace(),this.peekCodePoint(0)===lA||this.peekCodePoint(0)===Lh?(this.consumeCodePoint(),{type:22,value:hn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),_d);if(l===pd||l===dd||l===fd||JE(l))return this.consumeBadUrlRemnants(),_d;if(l===Fh)if(Dl(l,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),_d;else e.push(l)}},i.prototype.consumeWhiteSpace=function(){for(;md(this.peekCodePoint(0));)this.consumeCodePoint()},i.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Lh||e===lA)return;Dl(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},i.prototype.consumeStringSlice=function(e){for(var t=5e4,s="";e>0;){var l=Math.min(t,e);s+=hn.apply(void 0,this._value.splice(0,l)),e-=l}return this._value.shift(),s},i.prototype.consumeStringToken=function(e){var t="",s=0;do{var l=this._value[s];if(l===lA||l===void 0||l===e)return t+=this.consumeStringSlice(s),{type:0,value:t};if(l===hd)return this._value.splice(0,s),hF;if(l===Fh){var c=this._value[s+1];c!==lA&&c!==void 0&&(c===hd?(t+=this.consumeStringSlice(s),s=-1,this._value.shift()):Dl(l,c)&&(t+=this.consumeStringSlice(s),t+=hn(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},i.prototype.consumeNumber=function(){var e=[],t=Eh,s=this.peekCodePoint(0);for((s===Bc||s===ua)&&e.push(this.consumeCodePoint());qs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0);var l=this.peekCodePoint(1);if(s===Th&&qs(l))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=F2;qs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0),l=this.peekCodePoint(1);var c=this.peekCodePoint(2);if((s===k2||s===M2)&&((l===Bc||l===ua)&&qs(c)||qs(l)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=F2;qs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[eF(e),t]},i.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],s=e[1],l=this.peekCodePoint(0),c=this.peekCodePoint(1),p=this.peekCodePoint(2);if(vd(l,c,p)){var a=this.consumeName();return{type:15,number:t,flags:s,unit:a}}return l===wE?(this.consumeCodePoint(),{type:16,number:t,flags:s}):{type:17,number:t,flags:s}},i.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(xu(e)){for(var t=hn(e);xu(this.peekCodePoint(0))&&t.length<6;)t+=hn(this.consumeCodePoint());md(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(t,16);return s===0||KE(s)||s>1114111?T2:s}return e===lA?T2:e},i.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(N2(t))e+=hn(t);else if(Dl(t,this.peekCodePoint(0)))e+=hn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},i}(),R2=function(){function i(e){this._tokens=e}return i.create=function(e){var t=new O2;return t.write(e),new i(t.read())},i.parseValue=function(e){return i.create(e).parseComponentValue()},i.parseValues=function(e){return i.create(e).parseComponentValues()},i.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},i.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},i.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},i.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},s=this.consumeToken();;){if(s.type===32||wF(s,e))return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue()),s=this.consumeToken()}},i.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue())}},i.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?um:e},i.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},i}(),Uh=function(i){return i.type===15},Bu=function(i){return i.type===17},Fi=function(i){return i.type===20},_F=function(i){return i.type===0},hm=function(i,e){return Fi(i)&&i.value===e},z2=function(i){return i.type!==31},Cu=function(i){return i.type!==31&&i.type!==4},cA=function(i){var e=[],t=[];return i.forEach(function(s){if(s.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}s.type!==31&&t.push(s)}),t.length&&e.push(t),e},wF=function(i,e){return e===11&&i.type===12||e===28&&i.type===29?!0:e===2&&i.type===3},Nl=function(i){return i.type===17||i.type===15},En=function(i){return i.type===16||Nl(i)},H2=function(i){return i.length>1?[i[0],i[1]]:[i[0]]},ss={type:17,number:0,flags:Eh},pm={type:16,number:50,flags:Eh},Ol={type:16,number:100,flags:Eh},Ph=function(i,e,t){var s=i[0],l=i[1];return[Oi(s,e),Oi(typeof l<"u"?l:s,t)]},Oi=function(i,e){if(i.type===16)return i.number/100*e;if(Uh(i))switch(i.unit){case"rem":case"em":return 16*i.number;case"px":default:return i.number}return i.number},V2="deg",j2="grad",G2="rad",q2="turn",wd={name:"angle",parse:function(i,e){if(e.type===15)switch(e.unit){case V2:return Math.PI*e.number/180;case j2:return Math.PI/200*e.number;case G2:return e.number;case q2:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},$2=function(i){return i.type===15&&(i.unit===V2||i.unit===j2||i.unit===G2||i.unit===q2)},K2=function(i){var e=i.filter(Fi).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ss,ss];case"to top":case"bottom":return ja(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ss,Ol];case"to right":case"left":return ja(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ol,Ol];case"to bottom":case"top":return ja(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ol,ss];case"to left":case"right":return ja(270)}return 0},ja=function(i){return Math.PI*i/180},Rl={name:"color",parse:function(i,e){if(e.type===18){var t=bF[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(i,e.values)}if(e.type===5){if(e.value.length===3){var s=e.value.substring(0,1),l=e.value.substring(1,2),c=e.value.substring(2,3);return Hl(parseInt(s+s,16),parseInt(l+l,16),parseInt(c+c,16),1)}if(e.value.length===4){var s=e.value.substring(0,1),l=e.value.substring(1,2),c=e.value.substring(2,3),p=e.value.substring(3,4);return Hl(parseInt(s+s,16),parseInt(l+l,16),parseInt(c+c,16),parseInt(p+p,16)/255)}if(e.value.length===6){var s=e.value.substring(0,2),l=e.value.substring(2,4),c=e.value.substring(4,6);return Hl(parseInt(s,16),parseInt(l,16),parseInt(c,16),1)}if(e.value.length===8){var s=e.value.substring(0,2),l=e.value.substring(2,4),c=e.value.substring(4,6),p=e.value.substring(6,8);return Hl(parseInt(s,16),parseInt(l,16),parseInt(c,16),parseInt(p,16)/255)}}if(e.type===20){var a=ZA[e.value.toUpperCase()];if(typeof a<"u")return a}return ZA.TRANSPARENT}},zl=function(i){return(255&i)===0},jn=function(i){var e=255&i,t=255&i>>8,s=255&i>>16,l=255&i>>24;return e<255?"rgba("+l+","+s+","+t+","+e/255+")":"rgb("+l+","+s+","+t+")"},Hl=function(i,e,t,s){return(i<<24|e<<16|t<<8|Math.round(s*255)<<0)>>>0},W2=function(i,e){if(i.type===17)return i.number;if(i.type===16){var t=e===3?1:255;return e===3?i.number/100*t:Math.round(i.number/100*t)}return 0},Z2=function(i,e){var t=e.filter(Cu);if(t.length===3){var s=t.map(W2),l=s[0],c=s[1],p=s[2];return Hl(l,c,p,1)}if(t.length===4){var a=t.map(W2),l=a[0],c=a[1],p=a[2],g=a[3];return Hl(l,c,p,g)}return 0};function dm(i,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-i)*t*6+i:t<1/2?e:t<2/3?(e-i)*6*(2/3-t)+i:i}var X2=function(i,e){var t=e.filter(Cu),s=t[0],l=t[1],c=t[2],p=t[3],a=(s.type===17?ja(s.number):wd.parse(i,s))/(Math.PI*2),g=En(l)?l.number/100:0,_=En(c)?c.number/100:0,C=typeof p<"u"&&En(p)?Oi(p,1):1;if(g===0)return Hl(_*255,_*255,_*255,1);var L=_<=.5?_*(g+1):_+g-_*g,M=_*2-L,I=dm(M,L,a+1/3),G=dm(M,L,a),j=dm(M,L,a-1/3);return Hl(I*255,G*255,j*255,C)},bF={hsl:X2,hsla:X2,rgb:Z2,rgba:Z2},Mh=function(i,e){return Rl.parse(i,R2.create(e).parseComponentValue())},ZA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},xF={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(i,e){return e.map(function(t){if(Fi(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},BF={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},bd=function(i,e){var t=Rl.parse(i,e[0]),s=e[1];return s&&En(s)?{color:t,stop:s}:{color:t,stop:null}},Y2=function(i,e){var t=i[0],s=i[i.length-1];t.stop===null&&(t.stop=ss),s.stop===null&&(s.stop=Ol);for(var l=[],c=0,p=0;p<i.length;p++){var a=i[p].stop;if(a!==null){var g=Oi(a,e);g>c?l.push(g):l.push(c),c=g}else l.push(null)}for(var _=null,p=0;p<l.length;p++){var C=l[p];if(C===null)_===null&&(_=p);else if(_!==null){for(var L=p-_,M=l[_-1],I=(C-M)/(L+1),G=1;G<=L;G++)l[_+G-1]=I*G;_=null}}return i.map(function(j,Y){var q=j.color;return{color:q,stop:Math.max(Math.min(1,l[Y]/e),0)}})},CF=function(i,e,t){var s=e/2,l=t/2,c=Oi(i[0],e)-s,p=l-Oi(i[1],t);return(Math.atan2(p,c)+Math.PI*2)%(Math.PI*2)},SF=function(i,e,t){var s=typeof i=="number"?i:CF(i,e,t),l=Math.abs(e*Math.sin(s))+Math.abs(t*Math.cos(s)),c=e/2,p=t/2,a=l/2,g=Math.sin(s-Math.PI/2)*a,_=Math.cos(s-Math.PI/2)*a;return[l,c-_,c+_,p-g,p+g]},mo=function(i,e){return Math.sqrt(i*i+e*e)},J2=function(i,e,t,s,l){var c=[[0,0],[0,e],[i,0],[i,e]];return c.reduce(function(p,a){var g=a[0],_=a[1],C=mo(t-g,s-_);return(l?C<p.optimumDistance:C>p.optimumDistance)?{optimumCorner:a,optimumDistance:C}:p},{optimumDistance:l?1/0:-1/0,optimumCorner:null}).optimumCorner},EF=function(i,e,t,s,l){var c=0,p=0;switch(i.size){case 0:i.shape===0?c=p=Math.min(Math.abs(e),Math.abs(e-s),Math.abs(t),Math.abs(t-l)):i.shape===1&&(c=Math.min(Math.abs(e),Math.abs(e-s)),p=Math.min(Math.abs(t),Math.abs(t-l)));break;case 2:if(i.shape===0)c=p=Math.min(mo(e,t),mo(e,t-l),mo(e-s,t),mo(e-s,t-l));else if(i.shape===1){var a=Math.min(Math.abs(t),Math.abs(t-l))/Math.min(Math.abs(e),Math.abs(e-s)),g=J2(s,l,e,t,!0),_=g[0],C=g[1];c=mo(_-e,(C-t)/a),p=a*c}break;case 1:i.shape===0?c=p=Math.max(Math.abs(e),Math.abs(e-s),Math.abs(t),Math.abs(t-l)):i.shape===1&&(c=Math.max(Math.abs(e),Math.abs(e-s)),p=Math.max(Math.abs(t),Math.abs(t-l)));break;case 3:if(i.shape===0)c=p=Math.max(mo(e,t),mo(e,t-l),mo(e-s,t),mo(e-s,t-l));else if(i.shape===1){var a=Math.max(Math.abs(t),Math.abs(t-l))/Math.max(Math.abs(e),Math.abs(e-s)),L=J2(s,l,e,t,!1),_=L[0],C=L[1];c=mo(_-e,(C-t)/a),p=a*c}break}return Array.isArray(i.size)&&(c=Oi(i.size[0],s),p=i.size.length===2?Oi(i.size[1],l):c),[c,p]},FF=function(i,e){var t=ja(180),s=[];return cA(e).forEach(function(l,c){if(c===0){var p=l[0];if(p.type===20&&p.value==="to"){t=K2(l);return}else if($2(p)){t=wd.parse(i,p);return}}var a=bd(i,l);s.push(a)}),{angle:t,stops:s,type:1}},xd=function(i,e){var t=ja(180),s=[];return cA(e).forEach(function(l,c){if(c===0){var p=l[0];if(p.type===20&&["top","left","right","bottom"].indexOf(p.value)!==-1){t=K2(l);return}else if($2(p)){t=(wd.parse(i,p)+ja(270))%ja(360);return}}var a=bd(i,l);s.push(a)}),{angle:t,stops:s,type:1}},IF=function(i,e){var t=ja(180),s=[],l=1,c=0,p=3,a=[];return cA(e).forEach(function(g,_){var C=g[0];if(_===0){if(Fi(C)&&C.value==="linear"){l=1;return}else if(Fi(C)&&C.value==="radial"){l=2;return}}if(C.type===18){if(C.name==="from"){var L=Rl.parse(i,C.values[0]);s.push({stop:ss,color:L})}else if(C.name==="to"){var L=Rl.parse(i,C.values[0]);s.push({stop:Ol,color:L})}else if(C.name==="color-stop"){var M=C.values.filter(Cu);if(M.length===2){var L=Rl.parse(i,M[1]),I=M[0];Bu(I)&&s.push({stop:{type:16,number:I.number*100,flags:I.flags},color:L})}}}}),l===1?{angle:(t+ja(180))%ja(360),stops:s,type:l}:{size:p,shape:c,stops:s,position:a,type:l}},e_="closest-side",t_="farthest-side",r_="closest-corner",i_="farthest-corner",n_="circle",s_="ellipse",a_="cover",o_="contain",LF=function(i,e){var t=0,s=3,l=[],c=[];return cA(e).forEach(function(p,a){var g=!0;if(a===0){var _=!1;g=p.reduce(function(L,M){if(_)if(Fi(M))switch(M.value){case"center":return c.push(pm),L;case"top":case"left":return c.push(ss),L;case"right":case"bottom":return c.push(Ol),L}else(En(M)||Nl(M))&&c.push(M);else if(Fi(M))switch(M.value){case n_:return t=0,!1;case s_:return t=1,!1;case"at":return _=!0,!1;case e_:return s=0,!1;case a_:case t_:return s=1,!1;case o_:case r_:return s=2,!1;case i_:return s=3,!1}else if(Nl(M)||En(M))return Array.isArray(s)||(s=[]),s.push(M),!1;return L},g)}if(g){var C=bd(i,p);l.push(C)}}),{size:s,shape:t,stops:l,position:c,type:2}},Bd=function(i,e){var t=0,s=3,l=[],c=[];return cA(e).forEach(function(p,a){var g=!0;if(a===0?g=p.reduce(function(C,L){if(Fi(L))switch(L.value){case"center":return c.push(pm),!1;case"top":case"left":return c.push(ss),!1;case"right":case"bottom":return c.push(Ol),!1}else if(En(L)||Nl(L))return c.push(L),!1;return C},g):a===1&&(g=p.reduce(function(C,L){if(Fi(L))switch(L.value){case n_:return t=0,!1;case s_:return t=1,!1;case o_:case e_:return s=0,!1;case t_:return s=1,!1;case r_:return s=2,!1;case a_:case i_:return s=3,!1}else if(Nl(L)||En(L))return Array.isArray(s)||(s=[]),s.push(L),!1;return C},g)),g){var _=bd(i,p);l.push(_)}}),{size:s,shape:t,stops:l,position:c,type:2}},TF=function(i){return i.type===1},UF=function(i){return i.type===2},fm={name:"image",parse:function(i,e){if(e.type===22){var t={url:e.value,type:0};return i.cache.addImage(e.value),t}if(e.type===18){var s=A_[e.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return s(i,e.values)}throw new Error("Unsupported image type "+e.type)}};function PF(i){return!(i.type===20&&i.value==="none")&&(i.type!==18||!!A_[i.name])}var A_={"linear-gradient":FF,"-moz-linear-gradient":xd,"-ms-linear-gradient":xd,"-o-linear-gradient":xd,"-webkit-linear-gradient":xd,"radial-gradient":LF,"-moz-radial-gradient":Bd,"-ms-radial-gradient":Bd,"-o-radial-gradient":Bd,"-webkit-radial-gradient":Bd,"-webkit-gradient":IF},MF={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(i,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(s){return Cu(s)&&PF(s)}).map(function(s){return fm.parse(i,s)})}},QF={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(i,e){return e.map(function(t){if(Fi(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},kF={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(i,e){return cA(e).map(function(t){return t.filter(En)}).map(H2)}},DF={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(i,e){return cA(e).map(function(t){return t.filter(Fi).map(function(s){return s.value}).join(" ")}).map(NF)}},NF=function(i){switch(i){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Su;(function(i){i.AUTO="auto",i.CONTAIN="contain",i.COVER="cover"})(Su||(Su={}));var OF={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(i,e){return cA(e).map(function(t){return t.filter(RF)})}},RF=function(i){return Fi(i)||En(i)},Cd=function(i){return{name:"border-"+i+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},zF=Cd("top"),HF=Cd("right"),VF=Cd("bottom"),jF=Cd("left"),Sd=function(i){return{name:"border-radius-"+i,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return H2(t.filter(En))}}},GF=Sd("top-left"),qF=Sd("top-right"),$F=Sd("bottom-right"),KF=Sd("bottom-left"),Ed=function(i){return{name:"border-"+i+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},WF=Ed("top"),ZF=Ed("right"),XF=Ed("bottom"),YF=Ed("left"),Fd=function(i){return{name:"border-"+i+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Uh(t)?t.number:0}}},JF=Fd("top"),eI=Fd("right"),tI=Fd("bottom"),rI=Fd("left"),iI={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},nI={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(i,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},sI={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(i,e){return e.filter(Fi).reduce(function(t,s){return t|aI(s.value)},0)}},aI=function(i){switch(i){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},oI={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(i,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},AI={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(i,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Id;(function(i){i.NORMAL="normal",i.STRICT="strict"})(Id||(Id={}));var lI={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(i,e){switch(e){case"strict":return Id.STRICT;case"normal":default:return Id.NORMAL}}},cI={name:"line-height",initialValue:"normal",prefix:!1,type:4},l_=function(i,e){return Fi(i)&&i.value==="normal"?1.2*e:i.type===17?e*i.number:En(i)?Oi(i,e):e},uI={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(i,e){return e.type===20&&e.value==="none"?null:fm.parse(i,e)}},hI={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(i,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},gm={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(i,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Ld=function(i){return{name:"margin-"+i,initialValue:"0",prefix:!1,type:4}},pI=Ld("top"),dI=Ld("right"),fI=Ld("bottom"),gI=Ld("left"),mI={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(i,e){return e.filter(Fi).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},yI={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(i,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Td=function(i){return{name:"padding-"+i,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},vI=Td("top"),_I=Td("right"),wI=Td("bottom"),bI=Td("left"),xI={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(i,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},BI={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(i,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},CI={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(i,e){return e.length===1&&hm(e[0],"none")?[]:cA(e).map(function(t){for(var s={color:ZA.TRANSPARENT,offsetX:ss,offsetY:ss,blur:ss},l=0,c=0;c<t.length;c++){var p=t[c];Nl(p)?(l===0?s.offsetX=p:l===1?s.offsetY=p:s.blur=p,l++):s.color=Rl.parse(i,p)}return s})}},SI={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(i,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},EI={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(i,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=LI[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},FI=function(i){var e=i.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},II=function(i){var e=i.filter(function(g){return g.type===17}).map(function(g){return g.number}),t=e[0],s=e[1];e[2],e[3];var l=e[4],c=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var p=e[12],a=e[13];return e[14],e[15],e.length===16?[t,s,l,c,p,a]:null},LI={matrix:FI,matrix3d:II},c_={type:16,number:50,flags:Eh},TI=[c_,c_],UI={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(i,e){var t=e.filter(En);return t.length!==2?TI:[t[0],t[1]]}},PI={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(i,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Qh;(function(i){i.NORMAL="normal",i.BREAK_ALL="break-all",i.KEEP_ALL="keep-all"})(Qh||(Qh={}));for(var MI={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(i,e){switch(e){case"break-all":return Qh.BREAK_ALL;case"keep-all":return Qh.KEEP_ALL;case"normal":default:return Qh.NORMAL}}},QI={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(i,e){if(e.type===20)return{auto:!0,order:0};if(Bu(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},u_={name:"time",parse:function(i,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},kI={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(i,e){return Bu(e)?e.number:1}},DI={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},NI={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(i,e){return e.filter(Fi).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},OI={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(i,e){var t=[],s=[];return e.forEach(function(l){switch(l.type){case 20:case 0:t.push(l.value);break;case 17:t.push(l.number.toString());break;case 4:s.push(t.join(" ")),t.length=0;break}}),t.length&&s.push(t.join(" ")),s.map(function(l){return l.indexOf(" ")===-1?l:"'"+l+"'"})}},RI={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},zI={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(i,e){if(Bu(e))return e.number;if(Fi(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},HI={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(i,e){return e.filter(Fi).map(function(t){return t.value})}},VI={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(i,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Qn=function(i,e){return(i&e)!==0},jI={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(i,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},GI={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(i,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var s=[],l=e.filter(z2),c=0;c<l.length;c++){var p=l[c],a=l[c+1];if(p.type===20){var g=a&&Bu(a)?a.number:1;s.push({counter:p.value,increment:g})}}return s}},qI={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(i,e){if(e.length===0)return[];for(var t=[],s=e.filter(z2),l=0;l<s.length;l++){var c=s[l],p=s[l+1];if(Fi(c)&&c.value!=="none"){var a=p&&Bu(p)?p.number:0;t.push({counter:c.value,reset:a})}}return t}},$I={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(i,e){return e.filter(Uh).map(function(t){return u_.parse(i,t)})}},KI={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(i,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var s=[],l=e.filter(_F);if(l.length%2!==0)return null;for(var c=0;c<l.length;c+=2){var p=l[c].value,a=l[c+1].value;s.push({open:p,close:a})}return s}},h_=function(i,e,t){if(!i)return"";var s=i[Math.min(e,i.length-1)];return s?t?s.open:s.close:""},WI={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(i,e){return e.length===1&&hm(e[0],"none")?[]:cA(e).map(function(t){for(var s={color:255,offsetX:ss,offsetY:ss,blur:ss,spread:ss,inset:!1},l=0,c=0;c<t.length;c++){var p=t[c];hm(p,"inset")?s.inset=!0:Nl(p)?(l===0?s.offsetX=p:l===1?s.offsetY=p:l===2?s.blur=p:s.spread=p,l++):s.color=Rl.parse(i,p)}return s})}},ZI={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(i,e){var t=[0,1,2],s=[];return e.filter(Fi).forEach(function(l){switch(l.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),t.forEach(function(l){s.indexOf(l)===-1&&s.push(l)}),s}},XI={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},YI={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(i,e){return Uh(e)?e.number:0}},JI=function(){function i(e,t){var s,l;this.animationDuration=or(e,$I,t.animationDuration),this.backgroundClip=or(e,xF,t.backgroundClip),this.backgroundColor=or(e,BF,t.backgroundColor),this.backgroundImage=or(e,MF,t.backgroundImage),this.backgroundOrigin=or(e,QF,t.backgroundOrigin),this.backgroundPosition=or(e,kF,t.backgroundPosition),this.backgroundRepeat=or(e,DF,t.backgroundRepeat),this.backgroundSize=or(e,OF,t.backgroundSize),this.borderTopColor=or(e,zF,t.borderTopColor),this.borderRightColor=or(e,HF,t.borderRightColor),this.borderBottomColor=or(e,VF,t.borderBottomColor),this.borderLeftColor=or(e,jF,t.borderLeftColor),this.borderTopLeftRadius=or(e,GF,t.borderTopLeftRadius),this.borderTopRightRadius=or(e,qF,t.borderTopRightRadius),this.borderBottomRightRadius=or(e,$F,t.borderBottomRightRadius),this.borderBottomLeftRadius=or(e,KF,t.borderBottomLeftRadius),this.borderTopStyle=or(e,WF,t.borderTopStyle),this.borderRightStyle=or(e,ZF,t.borderRightStyle),this.borderBottomStyle=or(e,XF,t.borderBottomStyle),this.borderLeftStyle=or(e,YF,t.borderLeftStyle),this.borderTopWidth=or(e,JF,t.borderTopWidth),this.borderRightWidth=or(e,eI,t.borderRightWidth),this.borderBottomWidth=or(e,tI,t.borderBottomWidth),this.borderLeftWidth=or(e,rI,t.borderLeftWidth),this.boxShadow=or(e,WI,t.boxShadow),this.color=or(e,iI,t.color),this.direction=or(e,nI,t.direction),this.display=or(e,sI,t.display),this.float=or(e,oI,t.cssFloat),this.fontFamily=or(e,OI,t.fontFamily),this.fontSize=or(e,RI,t.fontSize),this.fontStyle=or(e,VI,t.fontStyle),this.fontVariant=or(e,HI,t.fontVariant),this.fontWeight=or(e,zI,t.fontWeight),this.letterSpacing=or(e,AI,t.letterSpacing),this.lineBreak=or(e,lI,t.lineBreak),this.lineHeight=or(e,cI,t.lineHeight),this.listStyleImage=or(e,uI,t.listStyleImage),this.listStylePosition=or(e,hI,t.listStylePosition),this.listStyleType=or(e,gm,t.listStyleType),this.marginTop=or(e,pI,t.marginTop),this.marginRight=or(e,dI,t.marginRight),this.marginBottom=or(e,fI,t.marginBottom),this.marginLeft=or(e,gI,t.marginLeft),this.opacity=or(e,kI,t.opacity);var c=or(e,mI,t.overflow);this.overflowX=c[0],this.overflowY=c[c.length>1?1:0],this.overflowWrap=or(e,yI,t.overflowWrap),this.paddingTop=or(e,vI,t.paddingTop),this.paddingRight=or(e,_I,t.paddingRight),this.paddingBottom=or(e,wI,t.paddingBottom),this.paddingLeft=or(e,bI,t.paddingLeft),this.paintOrder=or(e,ZI,t.paintOrder),this.position=or(e,BI,t.position),this.textAlign=or(e,xI,t.textAlign),this.textDecorationColor=or(e,DI,(s=t.textDecorationColor)!==null&&s!==void 0?s:t.color),this.textDecorationLine=or(e,NI,(l=t.textDecorationLine)!==null&&l!==void 0?l:t.textDecoration),this.textShadow=or(e,CI,t.textShadow),this.textTransform=or(e,SI,t.textTransform),this.transform=or(e,EI,t.transform),this.transformOrigin=or(e,UI,t.transformOrigin),this.visibility=or(e,PI,t.visibility),this.webkitTextStrokeColor=or(e,XI,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=or(e,YI,t.webkitTextStrokeWidth),this.wordBreak=or(e,MI,t.wordBreak),this.zIndex=or(e,QI,t.zIndex)}return i.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},i.prototype.isTransparent=function(){return zl(this.backgroundColor)},i.prototype.isTransformed=function(){return this.transform!==null},i.prototype.isPositioned=function(){return this.position!==0},i.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},i.prototype.isFloating=function(){return this.float!==0},i.prototype.isInlineLevel=function(){return Qn(this.display,4)||Qn(this.display,33554432)||Qn(this.display,268435456)||Qn(this.display,536870912)||Qn(this.display,67108864)||Qn(this.display,134217728)},i}(),eL=function(){function i(e,t){this.content=or(e,jI,t.content),this.quotes=or(e,KI,t.quotes)}return i}(),p_=function(){function i(e,t){this.counterIncrement=or(e,GI,t.counterIncrement),this.counterReset=or(e,qI,t.counterReset)}return i}(),or=function(i,e,t){var s=new O2,l=t!==null&&typeof t<"u"?t.toString():e.initialValue;s.write(l);var c=new R2(s.read());switch(e.type){case 2:var p=c.parseComponentValue();return e.parse(i,Fi(p)?p.value:e.initialValue);case 0:return e.parse(i,c.parseComponentValue());case 1:return e.parse(i,c.parseComponentValues());case 4:return c.parseComponentValue();case 3:switch(e.format){case"angle":return wd.parse(i,c.parseComponentValue());case"color":return Rl.parse(i,c.parseComponentValue());case"image":return fm.parse(i,c.parseComponentValue());case"length":var a=c.parseComponentValue();return Nl(a)?a:ss;case"length-percentage":var g=c.parseComponentValue();return En(g)?g:ss;case"time":return u_.parse(i,c.parseComponentValue())}break}},tL="data-html2canvas-debug",rL=function(i){var e=i.getAttribute(tL);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},mm=function(i,e){var t=rL(i);return t===1||e===t},uA=function(){function i(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,mm(t,3))debugger;this.styles=new JI(e,window.getComputedStyle(t,null)),Lm(t)&&(this.styles.animationDuration.some(function(s){return s>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=td(this.context,t),mm(t,4)&&(this.flags|=16)}return i}(),iL="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",d_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kh=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ud=0;Ud<d_.length;Ud++)kh[d_.charCodeAt(Ud)]=Ud;for(var nL=function(i){var e=i.length*.75,t=i.length,s,l=0,c,p,a,g;i[i.length-1]==="="&&(e--,i[i.length-2]==="="&&e--);var _=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),C=Array.isArray(_)?_:new Uint8Array(_);for(s=0;s<t;s+=4)c=kh[i.charCodeAt(s)],p=kh[i.charCodeAt(s+1)],a=kh[i.charCodeAt(s+2)],g=kh[i.charCodeAt(s+3)],C[l++]=c<<2|p>>4,C[l++]=(p&15)<<4|a>>2,C[l++]=(a&3)<<6|g&63;return _},sL=function(i){for(var e=i.length,t=[],s=0;s<e;s+=2)t.push(i[s+1]<<8|i[s]);return t},aL=function(i){for(var e=i.length,t=[],s=0;s<e;s+=4)t.push(i[s+3]<<24|i[s+2]<<16|i[s+1]<<8|i[s]);return t},Cc=5,ym=11,vm=2,oL=ym-Cc,f_=65536>>Cc,AL=1<<Cc,_m=AL-1,lL=1024>>Cc,cL=f_+lL,uL=cL,hL=32,pL=uL+hL,dL=65536>>ym,fL=1<<oL,gL=fL-1,g_=function(i,e,t){return i.slice?i.slice(e,t):new Uint16Array(Array.prototype.slice.call(i,e,t))},mL=function(i,e,t){return i.slice?i.slice(e,t):new Uint32Array(Array.prototype.slice.call(i,e,t))},yL=function(i,e){var t=nL(i),s=Array.isArray(t)?aL(t):new Uint32Array(t),l=Array.isArray(t)?sL(t):new Uint16Array(t),c=24,p=g_(l,c/2,s[4]/2),a=s[5]===2?g_(l,(c+s[4])/2):mL(s,Math.ceil((c+s[4])/4));return new vL(s[0],s[1],s[2],s[3],p,a)},vL=function(){function i(e,t,s,l,c,p){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=l,this.index=c,this.data=p}return i.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Cc],t=(t<<vm)+(e&_m),this.data[t];if(e<=65535)return t=this.index[f_+(e-55296>>Cc)],t=(t<<vm)+(e&_m),this.data[t];if(e<this.highStart)return t=pL-dL+(e>>ym),t=this.index[t],t+=e>>Cc&gL,t=this.index[t],t=(t<<vm)+(e&_m),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},i}(),m_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_L=typeof Uint8Array>"u"?[]:new Uint8Array(256),Pd=0;Pd<m_.length;Pd++)_L[m_.charCodeAt(Pd)]=Pd;var wL=1,wm=2,bm=3,y_=4,v_=5,bL=7,__=8,xm=9,Bm=10,w_=11,b_=12,x_=13,B_=14,Cm=15,xL=function(i){for(var e=[],t=0,s=i.length;t<s;){var l=i.charCodeAt(t++);if(l>=55296&&l<=56319&&t<s){var c=i.charCodeAt(t++);(c&64512)===56320?e.push(((l&1023)<<10)+(c&1023)+65536):(e.push(l),t--)}else e.push(l)}return e},BL=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,i);var t=i.length;if(!t)return"";for(var s=[],l=-1,c="";++l<t;){var p=i[l];p<=65535?s.push(p):(p-=65536,s.push((p>>10)+55296,p%1024+56320)),(l+1===t||s.length>16384)&&(c+=String.fromCharCode.apply(String,s),s.length=0)}return c},CL=yL(iL),Sc="",C_="",SL=function(i){return CL.get(i)},EL=function(i,e,t){var s=t-2,l=e[s],c=e[t-1],p=e[t];if(c===wm&&p===bm)return Sc;if(c===wm||c===bm||c===y_||p===wm||p===bm||p===y_)return C_;if(c===__&&[__,xm,w_,b_].indexOf(p)!==-1||(c===w_||c===xm)&&(p===xm||p===Bm)||(c===b_||c===Bm)&&p===Bm||p===x_||p===v_||p===bL||c===wL)return Sc;if(c===x_&&p===B_){for(;l===v_;)l=e[--s];if(l===B_)return Sc}if(c===Cm&&p===Cm){for(var a=0;l===Cm;)a++,l=e[--s];if(a%2===0)return Sc}return C_},FL=function(i){var e=xL(i),t=e.length,s=0,l=0,c=e.map(SL);return{next:function(){if(s>=t)return{done:!0,value:null};for(var p=Sc;s<t&&(p=EL(e,c,++s))===Sc;);if(p!==Sc||s===t){var a=BL.apply(null,e.slice(l,s));return l=s,{value:a,done:!1}}return{done:!0,value:null}}}},IL=function(i){for(var e=FL(i),t=[],s;!(s=e.next()).done;)s.value&&t.push(s.value.slice());return t},LL=function(i){var e=123;if(i.createRange){var t=i.createRange();if(t.getBoundingClientRect){var s=i.createElement("boundtest");s.style.height=e+"px",s.style.display="block",i.body.appendChild(s),t.selectNode(s);var l=t.getBoundingClientRect(),c=Math.round(l.height);if(i.body.removeChild(s),c===e)return!0}}return!1},TL=function(i){var e=i.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",i.body.appendChild(e);var t=i.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=e.firstChild,l=rd(s.data).map(function(g){return hn(g)}),c=0,p={},a=l.every(function(g,_){t.setStart(s,c),t.setEnd(s,c+g.length);var C=t.getBoundingClientRect();c+=g.length;var L=C.x>p.x||C.y>p.y;return p=C,_===0?!0:L});return i.body.removeChild(e),a},UL=function(){return typeof new Image().crossOrigin<"u"},PL=function(){return typeof new XMLHttpRequest().responseType=="string"},ML=function(i){var e=new Image,t=i.createElement("canvas"),s=t.getContext("2d");if(!s)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},S_=function(i){return i[0]===0&&i[1]===255&&i[2]===0&&i[3]===255},QL=function(i){var e=i.createElement("canvas"),t=100;e.width=t,e.height=t;var s=e.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,t,t);var l=new Image,c=e.toDataURL();l.src=c;var p=Sm(t,t,0,0,l);return s.fillStyle="red",s.fillRect(0,0,t,t),E_(p).then(function(a){s.drawImage(a,0,0);var g=s.getImageData(0,0,t,t).data;s.fillStyle="red",s.fillRect(0,0,t,t);var _=i.createElement("div");return _.style.backgroundImage="url("+c+")",_.style.height=t+"px",S_(g)?E_(Sm(t,t,0,0,_)):Promise.reject(!1)}).then(function(a){return s.drawImage(a,0,0),S_(s.getImageData(0,0,t,t).data)}).catch(function(){return!1})},Sm=function(i,e,t,s,l){var c="http://www.w3.org/2000/svg",p=document.createElementNS(c,"svg"),a=document.createElementNS(c,"foreignObject");return p.setAttributeNS(null,"width",i.toString()),p.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",s.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),p.appendChild(a),a.appendChild(l),p},E_=function(i){return new Promise(function(e,t){var s=new Image;s.onload=function(){return e(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(i))})},as={get SUPPORT_RANGE_BOUNDS(){var i=LL(document);return Object.defineProperty(as,"SUPPORT_RANGE_BOUNDS",{value:i}),i},get SUPPORT_WORD_BREAKING(){var i=as.SUPPORT_RANGE_BOUNDS&&TL(document);return Object.defineProperty(as,"SUPPORT_WORD_BREAKING",{value:i}),i},get SUPPORT_SVG_DRAWING(){var i=ML(document);return Object.defineProperty(as,"SUPPORT_SVG_DRAWING",{value:i}),i},get SUPPORT_FOREIGNOBJECT_DRAWING(){var i=typeof Array.from=="function"&&typeof window.fetch=="function"?QL(document):Promise.resolve(!1);return Object.defineProperty(as,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:i}),i},get SUPPORT_CORS_IMAGES(){var i=UL();return Object.defineProperty(as,"SUPPORT_CORS_IMAGES",{value:i}),i},get SUPPORT_RESPONSE_TYPE(){var i=PL();return Object.defineProperty(as,"SUPPORT_RESPONSE_TYPE",{value:i}),i},get SUPPORT_CORS_XHR(){var i="withCredentials"in new XMLHttpRequest;return Object.defineProperty(as,"SUPPORT_CORS_XHR",{value:i}),i},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var i=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(as,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:i}),i}},Dh=function(){function i(e,t){this.text=e,this.bounds=t}return i}(),kL=function(i,e,t,s){var l=OL(e,t),c=[],p=0;return l.forEach(function(a){if(t.textDecorationLine.length||a.trim().length>0)if(as.SUPPORT_RANGE_BOUNDS){var g=F_(s,p,a.length).getClientRects();if(g.length>1){var _=Em(a),C=0;_.forEach(function(M){c.push(new Dh(M,KA.fromDOMRectList(i,F_(s,C+p,M.length).getClientRects()))),C+=M.length})}else c.push(new Dh(a,KA.fromDOMRectList(i,g)))}else{var L=s.splitText(a.length);c.push(new Dh(a,DL(i,s))),s=L}else as.SUPPORT_RANGE_BOUNDS||(s=s.splitText(a.length));p+=a.length}),c},DL=function(i,e){var t=e.ownerDocument;if(t){var s=t.createElement("html2canvaswrapper");s.appendChild(e.cloneNode(!0));var l=e.parentNode;if(l){l.replaceChild(s,e);var c=td(i,s);return s.firstChild&&l.replaceChild(s.firstChild,s),c}}return KA.EMPTY},F_=function(i,e,t){var s=i.ownerDocument;if(!s)throw new Error("Node has no owner document");var l=s.createRange();return l.setStart(i,e),l.setEnd(i,e+t),l},Em=function(i){if(as.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(i)).map(function(t){return t.segment})}return IL(i)},NL=function(i,e){if(as.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(i)).map(function(s){return s.segment})}return zL(i,e)},OL=function(i,e){return e.letterSpacing!==0?Em(i):NL(i,e)},RL=[32,160,4961,65792,65793,4153,4241],zL=function(i,e){for(var t=dE(i,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),s=[],l,c=function(){if(l.value){var p=l.value.slice(),a=rd(p),g="";a.forEach(function(_){RL.indexOf(_)===-1?g+=hn(_):(g.length&&s.push(g),s.push(hn(_)),g="")}),g.length&&s.push(g)}};!(l=t.next()).done;)c();return s},HL=function(){function i(e,t,s){this.text=VL(t.data,s.textTransform),this.textBounds=kL(e,this.text,s,t)}return i}(),VL=function(i,e){switch(e){case 1:return i.toLowerCase();case 3:return i.replace(jL,GL);case 2:return i.toUpperCase();default:return i}},jL=/(^|\s|:|-|\(|\))([a-z])/g,GL=function(i,e,t){return i.length>0?e+t.toUpperCase():i},I_=function(i){go(e,i);function e(t,s){var l=i.call(this,t,s)||this;return l.src=s.currentSrc||s.src,l.intrinsicWidth=s.naturalWidth,l.intrinsicHeight=s.naturalHeight,l.context.cache.addImage(l.src),l}return e}(uA),L_=function(i){go(e,i);function e(t,s){var l=i.call(this,t,s)||this;return l.canvas=s,l.intrinsicWidth=s.width,l.intrinsicHeight=s.height,l}return e}(uA),T_=function(i){go(e,i);function e(t,s){var l=i.call(this,t,s)||this,c=new XMLSerializer,p=td(t,s);return s.setAttribute("width",p.width+"px"),s.setAttribute("height",p.height+"px"),l.svg="data:image/svg+xml,"+encodeURIComponent(c.serializeToString(s)),l.intrinsicWidth=s.width.baseVal.value,l.intrinsicHeight=s.height.baseVal.value,l.context.cache.addImage(l.svg),l}return e}(uA),U_=function(i){go(e,i);function e(t,s){var l=i.call(this,t,s)||this;return l.value=s.value,l}return e}(uA),Fm=function(i){go(e,i);function e(t,s){var l=i.call(this,t,s)||this;return l.start=s.start,l.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,l}return e}(uA),qL=[{type:15,flags:0,unit:"px",number:3}],$L=[{type:16,flags:0,number:50}],KL=function(i){return i.width>i.height?new KA(i.left+(i.width-i.height)/2,i.top,i.height,i.height):i.width<i.height?new KA(i.left,i.top+(i.height-i.width)/2,i.width,i.width):i},WL=function(i){var e=i.type===ZL?new Array(i.value.length+1).join(""):i.value;return e.length===0?i.placeholder||"":e},Md="checkbox",Qd="radio",ZL="password",P_=707406591,Im=function(i){go(e,i);function e(t,s){var l=i.call(this,t,s)||this;switch(l.type=s.type.toLowerCase(),l.checked=s.checked,l.value=WL(s),(l.type===Md||l.type===Qd)&&(l.styles.backgroundColor=3739148031,l.styles.borderTopColor=l.styles.borderRightColor=l.styles.borderBottomColor=l.styles.borderLeftColor=2779096575,l.styles.borderTopWidth=l.styles.borderRightWidth=l.styles.borderBottomWidth=l.styles.borderLeftWidth=1,l.styles.borderTopStyle=l.styles.borderRightStyle=l.styles.borderBottomStyle=l.styles.borderLeftStyle=1,l.styles.backgroundClip=[0],l.styles.backgroundOrigin=[0],l.bounds=KL(l.bounds)),l.type){case Md:l.styles.borderTopRightRadius=l.styles.borderTopLeftRadius=l.styles.borderBottomRightRadius=l.styles.borderBottomLeftRadius=qL;break;case Qd:l.styles.borderTopRightRadius=l.styles.borderTopLeftRadius=l.styles.borderBottomRightRadius=l.styles.borderBottomLeftRadius=$L;break}return l}return e}(uA),M_=function(i){go(e,i);function e(t,s){var l=i.call(this,t,s)||this,c=s.options[s.selectedIndex||0];return l.value=c&&c.text||"",l}return e}(uA),Q_=function(i){go(e,i);function e(t,s){var l=i.call(this,t,s)||this;return l.value=s.value,l}return e}(uA),k_=function(i){go(e,i);function e(t,s){var l=i.call(this,t,s)||this;l.src=s.src,l.width=parseInt(s.width,10)||0,l.height=parseInt(s.height,10)||0,l.backgroundColor=l.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){l.tree=N_(t,s.contentWindow.document.documentElement);var c=s.contentWindow.document.documentElement?Mh(t,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):ZA.TRANSPARENT,p=s.contentWindow.document.body?Mh(t,getComputedStyle(s.contentWindow.document.body).backgroundColor):ZA.TRANSPARENT;l.backgroundColor=zl(c)?zl(p)?l.styles.backgroundColor:p:c}}catch{}return l}return e}(uA),XL=["OL","UL","MENU"],kd=function(i,e,t,s){for(var l=e.firstChild,c=void 0;l;l=c)if(c=l.nextSibling,O_(l)&&l.data.trim().length>0)t.textNodes.push(new HL(i,l,t.styles));else if(Eu(l))if(G_(l)&&l.assignedNodes)l.assignedNodes().forEach(function(a){return kd(i,a,t,s)});else{var p=D_(i,l);p.styles.isVisible()&&(YL(l,p,s)?p.flags|=4:JL(p.styles)&&(p.flags|=2),XL.indexOf(l.tagName)!==-1&&(p.flags|=8),t.elements.push(p),l.slot,l.shadowRoot?kd(i,l.shadowRoot,p,s):!Nd(l)&&!R_(l)&&!Od(l)&&kd(i,l,p,s))}},D_=function(i,e){return Um(e)?new I_(i,e):z_(e)?new L_(i,e):R_(e)?new T_(i,e):eT(e)?new U_(i,e):tT(e)?new Fm(i,e):rT(e)?new Im(i,e):Od(e)?new M_(i,e):Nd(e)?new Q_(i,e):V_(e)?new k_(i,e):new uA(i,e)},N_=function(i,e){var t=D_(i,e);return t.flags|=4,kd(i,e,t,t),t},YL=function(i,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Tm(i)&&t.styles.isTransparent()},JL=function(i){return i.isPositioned()||i.isFloating()},O_=function(i){return i.nodeType===Node.TEXT_NODE},Eu=function(i){return i.nodeType===Node.ELEMENT_NODE},Lm=function(i){return Eu(i)&&typeof i.style<"u"&&!Dd(i)},Dd=function(i){return typeof i.className=="object"},eT=function(i){return i.tagName==="LI"},tT=function(i){return i.tagName==="OL"},rT=function(i){return i.tagName==="INPUT"},iT=function(i){return i.tagName==="HTML"},R_=function(i){return i.tagName==="svg"},Tm=function(i){return i.tagName==="BODY"},z_=function(i){return i.tagName==="CANVAS"},H_=function(i){return i.tagName==="VIDEO"},Um=function(i){return i.tagName==="IMG"},V_=function(i){return i.tagName==="IFRAME"},j_=function(i){return i.tagName==="STYLE"},nT=function(i){return i.tagName==="SCRIPT"},Nd=function(i){return i.tagName==="TEXTAREA"},Od=function(i){return i.tagName==="SELECT"},G_=function(i){return i.tagName==="SLOT"},q_=function(i){return i.tagName.indexOf("-")>0},sT=function(){function i(){this.counters={}}return i.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},i.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},i.prototype.pop=function(e){var t=this;e.forEach(function(s){return t.counters[s].pop()})},i.prototype.parse=function(e){var t=this,s=e.counterIncrement,l=e.counterReset,c=!0;s!==null&&s.forEach(function(a){var g=t.counters[a.counter];g&&a.increment!==0&&(c=!1,g.length||g.push(1),g[Math.max(0,g.length-1)]+=a.increment)});var p=[];return c&&l.forEach(function(a){var g=t.counters[a.counter];p.push(a.counter),g||(g=t.counters[a.counter]=[]),g.push(a.reset)}),p},i}(),$_={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},K_={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},aT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},oT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Fu=function(i,e,t,s,l,c){return i<e||i>t?Oh(i,l,c.length>0):s.integers.reduce(function(p,a,g){for(;i>=a;)i-=a,p+=s.values[g];return p},"")+c},W_=function(i,e,t,s){var l="";do t||i--,l=s(i)+l,i/=e;while(i*e>=e);return l},pn=function(i,e,t,s,l){var c=t-e+1;return(i<0?"-":"")+(W_(Math.abs(i),c,s,function(p){return hn(Math.floor(p%c)+e)})+l)},Ec=function(i,e,t){t===void 0&&(t=". ");var s=e.length;return W_(Math.abs(i),s,!1,function(l){return e[Math.floor(l%s)]})+t},Iu=1,Vl=2,jl=4,Nh=8,XA=function(i,e,t,s,l,c){if(i<-9999||i>9999)return Oh(i,4,l.length>0);var p=Math.abs(i),a=l;if(p===0)return e[0]+a;for(var g=0;p>0&&g<=4;g++){var _=p%10;_===0&&Qn(c,Iu)&&a!==""?a=e[_]+a:_>1||_===1&&g===0||_===1&&g===1&&Qn(c,Vl)||_===1&&g===1&&Qn(c,jl)&&i>100||_===1&&g>1&&Qn(c,Nh)?a=e[_]+(g>0?t[g-1]:"")+a:_===1&&g>0&&(a=t[g-1]+a),p=Math.floor(p/10)}return(i<0?s:"")+a},Z_="",X_="",Y_="",Pm="",Oh=function(i,e,t){var s=t?". ":"",l=t?"":"",c=t?", ":"",p=t?" ":"";switch(e){case 0:return""+p;case 1:return""+p;case 2:return""+p;case 5:var a=pn(i,48,57,!0,s);return a.length<4?"0"+a:a;case 4:return Ec(i,"",l);case 6:return Fu(i,1,3999,$_,3,s).toLowerCase();case 7:return Fu(i,1,3999,$_,3,s);case 8:return pn(i,945,969,!1,s);case 9:return pn(i,97,122,!1,s);case 10:return pn(i,65,90,!1,s);case 11:return pn(i,1632,1641,!0,s);case 12:case 49:return Fu(i,1,9999,K_,3,s);case 35:return Fu(i,1,9999,K_,3,s).toLowerCase();case 13:return pn(i,2534,2543,!0,s);case 14:case 30:return pn(i,6112,6121,!0,s);case 15:return Ec(i,"",l);case 16:return Ec(i,"",l);case 17:case 48:return XA(i,"",Z_,"",l,Vl|jl|Nh);case 47:return XA(i,"",X_,"",l,Iu|Vl|jl|Nh);case 42:return XA(i,"",Z_,"",l,Vl|jl|Nh);case 41:return XA(i,"",X_,"",l,Iu|Vl|jl|Nh);case 26:return XA(i,"","",Y_,l,0);case 25:return XA(i,"","",Y_,l,Iu|Vl|jl);case 31:return XA(i,"","",Pm,c,Iu|Vl|jl);case 33:return XA(i,"","",Pm,c,0);case 32:return XA(i,"","",Pm,c,Iu|Vl|jl);case 18:return pn(i,2406,2415,!0,s);case 20:return Fu(i,1,19999,oT,3,s);case 21:return pn(i,2790,2799,!0,s);case 22:return pn(i,2662,2671,!0,s);case 22:return Fu(i,1,10999,aT,3,s);case 23:return Ec(i,"");case 24:return Ec(i,"");case 27:return pn(i,3302,3311,!0,s);case 28:return Ec(i,"",l);case 29:return Ec(i,"",l);case 34:return pn(i,3792,3801,!0,s);case 37:return pn(i,6160,6169,!0,s);case 38:return pn(i,4160,4169,!0,s);case 39:return pn(i,2918,2927,!0,s);case 40:return pn(i,1776,1785,!0,s);case 43:return pn(i,3046,3055,!0,s);case 44:return pn(i,3174,3183,!0,s);case 45:return pn(i,3664,3673,!0,s);case 46:return pn(i,3872,3881,!0,s);case 3:default:return pn(i,48,57,!0,s)}},J_="data-html2canvas-ignore",ew=function(){function i(e,t,s){if(this.context=e,this.options=s,this.scrolledElements=[],this.referenceElement=t,this.counters=new sT,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return i.prototype.toIFrame=function(e,t){var s=this,l=AT(e,t);if(!l.contentWindow)return Promise.reject("Unable to find iframe window");var c=e.defaultView.pageXOffset,p=e.defaultView.pageYOffset,a=l.contentWindow,g=a.document,_=uT(l).then(function(){return js(s,void 0,void 0,function(){var C,L;return Cs(this,function(M){switch(M.label){case 0:return this.scrolledElements.forEach(fT),a&&(a.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==t.top||a.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-t.left,a.scrollY-t.top,0,0))),C=this.options.onclone,L=this.clonedReferenceElement,typeof L>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:g.fonts&&g.fonts.ready?[4,g.fonts.ready]:[3,2];case 1:M.sent(),M.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,cT(g)]:[3,4];case 3:M.sent(),M.label=4;case 4:return typeof C=="function"?[2,Promise.resolve().then(function(){return C(g,L)}).then(function(){return l})]:[2,l]}})})});return g.open(),g.write(pT(document.doctype)+"<html></html>"),dT(this.referenceElement.ownerDocument,c,p),g.replaceChild(g.adoptNode(this.documentElement),g.documentElement),g.close(),_},i.prototype.createElementClone=function(e){if(mm(e,2))debugger;if(z_(e))return this.createCanvasClone(e);if(H_(e))return this.createVideoClone(e);if(j_(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Um(t)&&(Um(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),q_(t)?this.createCustomElementClone(t):t},i.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return Mm(e.style,t),t},i.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var s=[].slice.call(t.cssRules,0).reduce(function(c,p){return p&&typeof p.cssText=="string"?c+p.cssText:c},""),l=e.cloneNode(!1);return l.textContent=s,l}}catch(c){if(this.context.logger.error("Unable to access cssRules property",c),c.name!=="SecurityError")throw c}return e.cloneNode(!1)},i.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var s=e.ownerDocument.createElement("img");try{return s.src=e.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var l=e.cloneNode(!1);try{l.width=e.width,l.height=e.height;var c=e.getContext("2d"),p=l.getContext("2d");if(p)if(!this.options.allowTaint&&c)p.putImageData(c.getImageData(0,0,e.width,e.height),0,0);else{var a=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(a){var g=a.getContextAttributes();(g==null?void 0:g.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}p.drawImage(e,0,0)}return l}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return l},i.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var s=t.getContext("2d");try{return s&&(s.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||s.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var l=e.ownerDocument.createElement("canvas");return l.width=e.offsetWidth,l.height=e.offsetHeight,l},i.prototype.appendChildNode=function(e,t,s){(!Eu(t)||!nT(t)&&!t.hasAttribute(J_)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!Eu(t)||!j_(t))&&e.appendChild(this.cloneNode(t,s))},i.prototype.cloneChildNodes=function(e,t,s){for(var l=this,c=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;c;c=c.nextSibling)if(Eu(c)&&G_(c)&&typeof c.assignedNodes=="function"){var p=c.assignedNodes();p.length&&p.forEach(function(a){return l.appendChildNode(t,a,s)})}else this.appendChildNode(t,c,s)},i.prototype.cloneNode=function(e,t){if(O_(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var s=e.ownerDocument.defaultView;if(s&&Eu(e)&&(Lm(e)||Dd(e))){var l=this.createElementClone(e);l.style.transitionProperty="none";var c=s.getComputedStyle(e),p=s.getComputedStyle(e,":before"),a=s.getComputedStyle(e,":after");this.referenceElement===e&&Lm(l)&&(this.clonedReferenceElement=l),Tm(l)&&yT(l);var g=this.counters.parse(new p_(this.context,c)),_=this.resolvePseudoContent(e,l,p,Rh.BEFORE);q_(e)&&(t=!0),H_(e)||this.cloneChildNodes(e,l,t),_&&l.insertBefore(_,l.firstChild);var C=this.resolvePseudoContent(e,l,a,Rh.AFTER);return C&&l.appendChild(C),this.counters.pop(g),(c&&(this.options.copyStyles||Dd(e))&&!V_(e)||t)&&Mm(c,l),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([l,e.scrollLeft,e.scrollTop]),(Nd(e)||Od(e))&&(Nd(l)||Od(l))&&(l.value=e.value),l}return e.cloneNode(!1)},i.prototype.resolvePseudoContent=function(e,t,s,l){var c=this;if(s){var p=s.content,a=t.ownerDocument;if(!(!a||!p||p==="none"||p==="-moz-alt-content"||s.display==="none")){this.counters.parse(new p_(this.context,s));var g=new eL(this.context,s),_=a.createElement("html2canvaspseudoelement");Mm(s,_),g.content.forEach(function(L){if(L.type===0)_.appendChild(a.createTextNode(L.value));else if(L.type===22){var M=a.createElement("img");M.src=L.value,M.style.opacity="1",_.appendChild(M)}else if(L.type===18){if(L.name==="attr"){var I=L.values.filter(Fi);I.length&&_.appendChild(a.createTextNode(e.getAttribute(I[0].value)||""))}else if(L.name==="counter"){var G=L.values.filter(Cu),j=G[0],Y=G[1];if(j&&Fi(j)){var q=c.counters.getCounterValue(j.value),ne=Y&&Fi(Y)?gm.parse(c.context,Y.value):3;_.appendChild(a.createTextNode(Oh(q,ne,!1)))}}else if(L.name==="counters"){var he=L.values.filter(Cu),j=he[0],Se=he[1],Y=he[2];if(j&&Fi(j)){var Ne=c.counters.getCounterValues(j.value),Pe=Y&&Fi(Y)?gm.parse(c.context,Y.value):3,Ee=Se&&Se.type===0?Se.value:"",fe=Ne.map(function(ce){return Oh(ce,Pe,!1)}).join(Ee);_.appendChild(a.createTextNode(fe))}}}else if(L.type===20)switch(L.value){case"open-quote":_.appendChild(a.createTextNode(h_(g.quotes,c.quoteDepth++,!0)));break;case"close-quote":_.appendChild(a.createTextNode(h_(g.quotes,--c.quoteDepth,!1)));break;default:_.appendChild(a.createTextNode(L.value))}}),_.className=Qm+" "+km;var C=l===Rh.BEFORE?" "+Qm:" "+km;return Dd(t)?t.className.baseValue+=C:t.className+=C,_}}},i.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},i}(),Rh;(function(i){i[i.BEFORE=0]="BEFORE",i[i.AFTER=1]="AFTER"})(Rh||(Rh={}));var AT=function(i,e){var t=i.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(J_,"true"),i.body.appendChild(t),t},lT=function(i){return new Promise(function(e){if(i.complete){e();return}if(!i.src){e();return}i.onload=e,i.onerror=e})},cT=function(i){return Promise.all([].slice.call(i.images,0).map(lT))},uT=function(i){return new Promise(function(e,t){var s=i.contentWindow;if(!s)return t("No window assigned for iframe");var l=s.document;s.onload=i.onload=function(){s.onload=i.onload=null;var c=setInterval(function(){l.body.childNodes.length>0&&l.readyState==="complete"&&(clearInterval(c),e(i))},50)}})},hT=["all","d","content"],Mm=function(i,e){for(var t=i.length-1;t>=0;t--){var s=i.item(t);hT.indexOf(s)===-1&&e.style.setProperty(s,i.getPropertyValue(s))}return e},pT=function(i){var e="";return i&&(e+="<!DOCTYPE ",i.name&&(e+=i.name),i.internalSubset&&(e+=i.internalSubset),i.publicId&&(e+='"'+i.publicId+'"'),i.systemId&&(e+='"'+i.systemId+'"'),e+=">"),e},dT=function(i,e,t){i&&i.defaultView&&(e!==i.defaultView.pageXOffset||t!==i.defaultView.pageYOffset)&&i.defaultView.scrollTo(e,t)},fT=function(i){var e=i[0],t=i[1],s=i[2];e.scrollLeft=t,e.scrollTop=s},gT=":before",mT=":after",Qm="___html2canvas___pseudoelement_before",km="___html2canvas___pseudoelement_after",tw=`{
    content: "" !important;
    display: none !important;
}`,yT=function(i){vT(i,"."+Qm+gT+tw+`
         .`+km+mT+tw)},vT=function(i,e){var t=i.ownerDocument;if(t){var s=t.createElement("style");s.textContent=e,i.appendChild(s)}},rw=function(){function i(){}return i.getOrigin=function(e){var t=i._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},i.isSameOrigin=function(e){return i.getOrigin(e)===i._origin},i.setContext=function(e){i._link=e.document.createElement("a"),i._origin=i.getOrigin(e.location.href)},i._origin="about:blank",i}(),_T=function(){function i(e,t){this.context=e,this._options=t,this._cache={}}return i.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(Nm(e)||BT(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},i.prototype.match=function(e){return this._cache[e]},i.prototype.loadImage=function(e){return js(this,void 0,void 0,function(){var t,s,l,c,p=this;return Cs(this,function(a){switch(a.label){case 0:return t=rw.isSameOrigin(e),s=!Dm(e)&&this._options.useCORS===!0&&as.SUPPORT_CORS_IMAGES&&!t,l=!Dm(e)&&!t&&!Nm(e)&&typeof this._options.proxy=="string"&&as.SUPPORT_CORS_XHR&&!s,!t&&this._options.allowTaint===!1&&!Dm(e)&&!Nm(e)&&!l&&!s?[2]:(c=e,l?[4,this.proxy(c)]:[3,2]);case 1:c=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(g,_){var C=new Image;C.onload=function(){return g(C)},C.onerror=_,(CT(c)||s)&&(C.crossOrigin="anonymous"),C.src=c,C.complete===!0&&setTimeout(function(){return g(C)},500),p._options.imageTimeout>0&&setTimeout(function(){return _("Timed out ("+p._options.imageTimeout+"ms) loading image")},p._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},i.prototype.has=function(e){return typeof this._cache[e]<"u"},i.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},i.prototype.proxy=function(e){var t=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var l=e.substring(0,256);return new Promise(function(c,p){var a=as.SUPPORT_RESPONSE_TYPE?"blob":"text",g=new XMLHttpRequest;g.onload=function(){if(g.status===200)if(a==="text")c(g.response);else{var L=new FileReader;L.addEventListener("load",function(){return c(L.result)},!1),L.addEventListener("error",function(M){return p(M)},!1),L.readAsDataURL(g.response)}else p("Failed to proxy resource "+l+" with status code "+g.status)},g.onerror=p;var _=s.indexOf("?")>-1?"&":"?";if(g.open("GET",""+s+_+"url="+encodeURIComponent(e)+"&responseType="+a),a!=="text"&&g instanceof XMLHttpRequest&&(g.responseType=a),t._options.imageTimeout){var C=t._options.imageTimeout;g.timeout=C,g.ontimeout=function(){return p("Timed out ("+C+"ms) proxying "+l)}}g.send()})},i}(),wT=/^data:image\/svg\+xml/i,bT=/^data:image\/.*;base64,/i,xT=/^data:image\/.*/i,BT=function(i){return as.SUPPORT_SVG_DRAWING||!ST(i)},Dm=function(i){return xT.test(i)},CT=function(i){return bT.test(i)},Nm=function(i){return i.substr(0,4)==="blob"},ST=function(i){return i.substr(-3).toLowerCase()==="svg"||wT.test(i)},tr=function(){function i(e,t){this.type=0,this.x=e,this.y=t}return i.prototype.add=function(e,t){return new i(this.x+e,this.y+t)},i}(),Lu=function(i,e,t){return new tr(i.x+(e.x-i.x)*t,i.y+(e.y-i.y)*t)},Rd=function(){function i(e,t,s,l){this.type=1,this.start=e,this.startControl=t,this.endControl=s,this.end=l}return i.prototype.subdivide=function(e,t){var s=Lu(this.start,this.startControl,e),l=Lu(this.startControl,this.endControl,e),c=Lu(this.endControl,this.end,e),p=Lu(s,l,e),a=Lu(l,c,e),g=Lu(p,a,e);return t?new i(this.start,s,p,g):new i(g,a,c,this.end)},i.prototype.add=function(e,t){return new i(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},i.prototype.reverse=function(){return new i(this.end,this.endControl,this.startControl,this.start)},i}(),Ga=function(i){return i.type===1},ET=function(){function i(e){var t=e.styles,s=e.bounds,l=Ph(t.borderTopLeftRadius,s.width,s.height),c=l[0],p=l[1],a=Ph(t.borderTopRightRadius,s.width,s.height),g=a[0],_=a[1],C=Ph(t.borderBottomRightRadius,s.width,s.height),L=C[0],M=C[1],I=Ph(t.borderBottomLeftRadius,s.width,s.height),G=I[0],j=I[1],Y=[];Y.push((c+g)/s.width),Y.push((G+L)/s.width),Y.push((p+j)/s.height),Y.push((_+M)/s.height);var q=Math.max.apply(Math,Y);q>1&&(c/=q,p/=q,g/=q,_/=q,L/=q,M/=q,G/=q,j/=q);var ne=s.width-g,he=s.height-M,Se=s.width-L,Ne=s.height-j,Pe=t.borderTopWidth,Ee=t.borderRightWidth,fe=t.borderBottomWidth,We=t.borderLeftWidth,Ke=Oi(t.paddingTop,e.bounds.width),ce=Oi(t.paddingRight,e.bounds.width),Ae=Oi(t.paddingBottom,e.bounds.width),xe=Oi(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=c>0||p>0?Gi(s.left+We/3,s.top+Pe/3,c-We/3,p-Pe/3,_i.TOP_LEFT):new tr(s.left+We/3,s.top+Pe/3),this.topRightBorderDoubleOuterBox=c>0||p>0?Gi(s.left+ne,s.top+Pe/3,g-Ee/3,_-Pe/3,_i.TOP_RIGHT):new tr(s.left+s.width-Ee/3,s.top+Pe/3),this.bottomRightBorderDoubleOuterBox=L>0||M>0?Gi(s.left+Se,s.top+he,L-Ee/3,M-fe/3,_i.BOTTOM_RIGHT):new tr(s.left+s.width-Ee/3,s.top+s.height-fe/3),this.bottomLeftBorderDoubleOuterBox=G>0||j>0?Gi(s.left+We/3,s.top+Ne,G-We/3,j-fe/3,_i.BOTTOM_LEFT):new tr(s.left+We/3,s.top+s.height-fe/3),this.topLeftBorderDoubleInnerBox=c>0||p>0?Gi(s.left+We*2/3,s.top+Pe*2/3,c-We*2/3,p-Pe*2/3,_i.TOP_LEFT):new tr(s.left+We*2/3,s.top+Pe*2/3),this.topRightBorderDoubleInnerBox=c>0||p>0?Gi(s.left+ne,s.top+Pe*2/3,g-Ee*2/3,_-Pe*2/3,_i.TOP_RIGHT):new tr(s.left+s.width-Ee*2/3,s.top+Pe*2/3),this.bottomRightBorderDoubleInnerBox=L>0||M>0?Gi(s.left+Se,s.top+he,L-Ee*2/3,M-fe*2/3,_i.BOTTOM_RIGHT):new tr(s.left+s.width-Ee*2/3,s.top+s.height-fe*2/3),this.bottomLeftBorderDoubleInnerBox=G>0||j>0?Gi(s.left+We*2/3,s.top+Ne,G-We*2/3,j-fe*2/3,_i.BOTTOM_LEFT):new tr(s.left+We*2/3,s.top+s.height-fe*2/3),this.topLeftBorderStroke=c>0||p>0?Gi(s.left+We/2,s.top+Pe/2,c-We/2,p-Pe/2,_i.TOP_LEFT):new tr(s.left+We/2,s.top+Pe/2),this.topRightBorderStroke=c>0||p>0?Gi(s.left+ne,s.top+Pe/2,g-Ee/2,_-Pe/2,_i.TOP_RIGHT):new tr(s.left+s.width-Ee/2,s.top+Pe/2),this.bottomRightBorderStroke=L>0||M>0?Gi(s.left+Se,s.top+he,L-Ee/2,M-fe/2,_i.BOTTOM_RIGHT):new tr(s.left+s.width-Ee/2,s.top+s.height-fe/2),this.bottomLeftBorderStroke=G>0||j>0?Gi(s.left+We/2,s.top+Ne,G-We/2,j-fe/2,_i.BOTTOM_LEFT):new tr(s.left+We/2,s.top+s.height-fe/2),this.topLeftBorderBox=c>0||p>0?Gi(s.left,s.top,c,p,_i.TOP_LEFT):new tr(s.left,s.top),this.topRightBorderBox=g>0||_>0?Gi(s.left+ne,s.top,g,_,_i.TOP_RIGHT):new tr(s.left+s.width,s.top),this.bottomRightBorderBox=L>0||M>0?Gi(s.left+Se,s.top+he,L,M,_i.BOTTOM_RIGHT):new tr(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=G>0||j>0?Gi(s.left,s.top+Ne,G,j,_i.BOTTOM_LEFT):new tr(s.left,s.top+s.height),this.topLeftPaddingBox=c>0||p>0?Gi(s.left+We,s.top+Pe,Math.max(0,c-We),Math.max(0,p-Pe),_i.TOP_LEFT):new tr(s.left+We,s.top+Pe),this.topRightPaddingBox=g>0||_>0?Gi(s.left+Math.min(ne,s.width-Ee),s.top+Pe,ne>s.width+Ee?0:Math.max(0,g-Ee),Math.max(0,_-Pe),_i.TOP_RIGHT):new tr(s.left+s.width-Ee,s.top+Pe),this.bottomRightPaddingBox=L>0||M>0?Gi(s.left+Math.min(Se,s.width-We),s.top+Math.min(he,s.height-fe),Math.max(0,L-Ee),Math.max(0,M-fe),_i.BOTTOM_RIGHT):new tr(s.left+s.width-Ee,s.top+s.height-fe),this.bottomLeftPaddingBox=G>0||j>0?Gi(s.left+We,s.top+Math.min(Ne,s.height-fe),Math.max(0,G-We),Math.max(0,j-fe),_i.BOTTOM_LEFT):new tr(s.left+We,s.top+s.height-fe),this.topLeftContentBox=c>0||p>0?Gi(s.left+We+xe,s.top+Pe+Ke,Math.max(0,c-(We+xe)),Math.max(0,p-(Pe+Ke)),_i.TOP_LEFT):new tr(s.left+We+xe,s.top+Pe+Ke),this.topRightContentBox=g>0||_>0?Gi(s.left+Math.min(ne,s.width+We+xe),s.top+Pe+Ke,ne>s.width+We+xe?0:g-We+xe,_-(Pe+Ke),_i.TOP_RIGHT):new tr(s.left+s.width-(Ee+ce),s.top+Pe+Ke),this.bottomRightContentBox=L>0||M>0?Gi(s.left+Math.min(Se,s.width-(We+xe)),s.top+Math.min(he,s.height+Pe+Ke),Math.max(0,L-(Ee+ce)),M-(fe+Ae),_i.BOTTOM_RIGHT):new tr(s.left+s.width-(Ee+ce),s.top+s.height-(fe+Ae)),this.bottomLeftContentBox=G>0||j>0?Gi(s.left+We+xe,s.top+Ne,Math.max(0,G-(We+xe)),j-(fe+Ae),_i.BOTTOM_LEFT):new tr(s.left+We+xe,s.top+s.height-(fe+Ae))}return i}(),_i;(function(i){i[i.TOP_LEFT=0]="TOP_LEFT",i[i.TOP_RIGHT=1]="TOP_RIGHT",i[i.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",i[i.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(_i||(_i={}));var Gi=function(i,e,t,s,l){var c=4*((Math.sqrt(2)-1)/3),p=t*c,a=s*c,g=i+t,_=e+s;switch(l){case _i.TOP_LEFT:return new Rd(new tr(i,_),new tr(i,_-a),new tr(g-p,e),new tr(g,e));case _i.TOP_RIGHT:return new Rd(new tr(i,e),new tr(i+p,e),new tr(g,_-a),new tr(g,_));case _i.BOTTOM_RIGHT:return new Rd(new tr(g,e),new tr(g,e+a),new tr(i+p,_),new tr(i,_));case _i.BOTTOM_LEFT:default:return new Rd(new tr(g,_),new tr(g-p,_),new tr(i,e+a),new tr(i,e))}},zd=function(i){return[i.topLeftBorderBox,i.topRightBorderBox,i.bottomRightBorderBox,i.bottomLeftBorderBox]},FT=function(i){return[i.topLeftContentBox,i.topRightContentBox,i.bottomRightContentBox,i.bottomLeftContentBox]},Hd=function(i){return[i.topLeftPaddingBox,i.topRightPaddingBox,i.bottomRightPaddingBox,i.bottomLeftPaddingBox]},IT=function(){function i(e,t,s){this.offsetX=e,this.offsetY=t,this.matrix=s,this.type=0,this.target=6}return i}(),Vd=function(){function i(e,t){this.path=e,this.target=t,this.type=1}return i}(),LT=function(){function i(e){this.opacity=e,this.type=2,this.target=6}return i}(),TT=function(i){return i.type===0},iw=function(i){return i.type===1},UT=function(i){return i.type===2},nw=function(i,e){return i.length===e.length?i.some(function(t,s){return t===e[s]}):!1},PT=function(i,e,t,s,l){return i.map(function(c,p){switch(p){case 0:return c.add(e,t);case 1:return c.add(e+s,t);case 2:return c.add(e+s,t+l);case 3:return c.add(e,t+l)}return c})},sw=function(){function i(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return i}(),aw=function(){function i(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new ET(this.container),this.container.styles.opacity<1&&this.effects.push(new LT(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,l=this.container.bounds.top+this.container.styles.transformOrigin[1].number,c=this.container.styles.transform;this.effects.push(new IT(s,l,c))}if(this.container.styles.overflowX!==0){var p=zd(this.curves),a=Hd(this.curves);nw(p,a)?this.effects.push(new Vd(p,6)):(this.effects.push(new Vd(p,2)),this.effects.push(new Vd(a,4)))}}return i.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,l=this.effects.slice(0);s;){var c=s.effects.filter(function(g){return!iw(g)});if(t||s.container.styles.position!==0||!s.parent){if(l.unshift.apply(l,c),t=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var p=zd(s.curves),a=Hd(s.curves);nw(p,a)||l.unshift(new Vd(a,6))}}else l.unshift.apply(l,c);s=s.parent}return l.filter(function(g){return Qn(g.target,e)})},i}(),Om=function(i,e,t,s){i.container.elements.forEach(function(l){var c=Qn(l.flags,4),p=Qn(l.flags,2),a=new aw(l,i);Qn(l.styles.display,2048)&&s.push(a);var g=Qn(l.flags,8)?[]:s;if(c||p){var _=c||l.styles.isPositioned()?t:e,C=new sw(a);if(l.styles.isPositioned()||l.styles.opacity<1||l.styles.isTransformed()){var L=l.styles.zIndex.order;if(L<0){var M=0;_.negativeZIndex.some(function(G,j){return L>G.element.container.styles.zIndex.order?(M=j,!1):M>0}),_.negativeZIndex.splice(M,0,C)}else if(L>0){var I=0;_.positiveZIndex.some(function(G,j){return L>=G.element.container.styles.zIndex.order?(I=j+1,!1):I>0}),_.positiveZIndex.splice(I,0,C)}else _.zeroOrAutoZIndexOrTransformedOrOpacity.push(C)}else l.styles.isFloating()?_.nonPositionedFloats.push(C):_.nonPositionedInlineLevel.push(C);Om(a,C,c?C:t,g)}else l.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),Om(a,e,t,g);Qn(l.flags,8)&&ow(l,g)})},ow=function(i,e){for(var t=i instanceof Fm?i.start:1,s=i instanceof Fm?i.reversed:!1,l=0;l<e.length;l++){var c=e[l];c.container instanceof U_&&typeof c.container.value=="number"&&c.container.value!==0&&(t=c.container.value),c.listValue=Oh(t,c.container.styles.listStyleType,!0),t+=s?-1:1}},MT=function(i){var e=new aw(i,null),t=new sw(e),s=[];return Om(e,t,t,s),ow(e.container,s),t},Aw=function(i,e){switch(e){case 0:return qa(i.topLeftBorderBox,i.topLeftPaddingBox,i.topRightBorderBox,i.topRightPaddingBox);case 1:return qa(i.topRightBorderBox,i.topRightPaddingBox,i.bottomRightBorderBox,i.bottomRightPaddingBox);case 2:return qa(i.bottomRightBorderBox,i.bottomRightPaddingBox,i.bottomLeftBorderBox,i.bottomLeftPaddingBox);case 3:default:return qa(i.bottomLeftBorderBox,i.bottomLeftPaddingBox,i.topLeftBorderBox,i.topLeftPaddingBox)}},QT=function(i,e){switch(e){case 0:return qa(i.topLeftBorderBox,i.topLeftBorderDoubleOuterBox,i.topRightBorderBox,i.topRightBorderDoubleOuterBox);case 1:return qa(i.topRightBorderBox,i.topRightBorderDoubleOuterBox,i.bottomRightBorderBox,i.bottomRightBorderDoubleOuterBox);case 2:return qa(i.bottomRightBorderBox,i.bottomRightBorderDoubleOuterBox,i.bottomLeftBorderBox,i.bottomLeftBorderDoubleOuterBox);case 3:default:return qa(i.bottomLeftBorderBox,i.bottomLeftBorderDoubleOuterBox,i.topLeftBorderBox,i.topLeftBorderDoubleOuterBox)}},kT=function(i,e){switch(e){case 0:return qa(i.topLeftBorderDoubleInnerBox,i.topLeftPaddingBox,i.topRightBorderDoubleInnerBox,i.topRightPaddingBox);case 1:return qa(i.topRightBorderDoubleInnerBox,i.topRightPaddingBox,i.bottomRightBorderDoubleInnerBox,i.bottomRightPaddingBox);case 2:return qa(i.bottomRightBorderDoubleInnerBox,i.bottomRightPaddingBox,i.bottomLeftBorderDoubleInnerBox,i.bottomLeftPaddingBox);case 3:default:return qa(i.bottomLeftBorderDoubleInnerBox,i.bottomLeftPaddingBox,i.topLeftBorderDoubleInnerBox,i.topLeftPaddingBox)}},DT=function(i,e){switch(e){case 0:return jd(i.topLeftBorderStroke,i.topRightBorderStroke);case 1:return jd(i.topRightBorderStroke,i.bottomRightBorderStroke);case 2:return jd(i.bottomRightBorderStroke,i.bottomLeftBorderStroke);case 3:default:return jd(i.bottomLeftBorderStroke,i.topLeftBorderStroke)}},jd=function(i,e){var t=[];return Ga(i)?t.push(i.subdivide(.5,!1)):t.push(i),Ga(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},qa=function(i,e,t,s){var l=[];return Ga(i)?l.push(i.subdivide(.5,!1)):l.push(i),Ga(t)?l.push(t.subdivide(.5,!0)):l.push(t),Ga(s)?l.push(s.subdivide(.5,!0).reverse()):l.push(s),Ga(e)?l.push(e.subdivide(.5,!1).reverse()):l.push(e),l},lw=function(i){var e=i.bounds,t=i.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},Gd=function(i){var e=i.styles,t=i.bounds,s=Oi(e.paddingLeft,t.width),l=Oi(e.paddingRight,t.width),c=Oi(e.paddingTop,t.width),p=Oi(e.paddingBottom,t.width);return t.add(s+e.borderLeftWidth,c+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+s+l),-(e.borderTopWidth+e.borderBottomWidth+c+p))},NT=function(i,e){return i===0?e.bounds:i===2?Gd(e):lw(e)},OT=function(i,e){return i===0?e.bounds:i===2?Gd(e):lw(e)},Rm=function(i,e,t){var s=NT(Uu(i.styles.backgroundOrigin,e),i),l=OT(Uu(i.styles.backgroundClip,e),i),c=RT(Uu(i.styles.backgroundSize,e),t,s),p=c[0],a=c[1],g=Ph(Uu(i.styles.backgroundPosition,e),s.width-p,s.height-a),_=zT(Uu(i.styles.backgroundRepeat,e),g,c,s,l),C=Math.round(s.left+g[0]),L=Math.round(s.top+g[1]);return[_,C,L,p,a]},Tu=function(i){return Fi(i)&&i.value===Su.AUTO},qd=function(i){return typeof i=="number"},RT=function(i,e,t){var s=e[0],l=e[1],c=e[2],p=i[0],a=i[1];if(!p)return[0,0];if(En(p)&&a&&En(a))return[Oi(p,t.width),Oi(a,t.height)];var g=qd(c);if(Fi(p)&&(p.value===Su.CONTAIN||p.value===Su.COVER)){if(qd(c)){var _=t.width/t.height;return _<c!=(p.value===Su.COVER)?[t.width,t.width/c]:[t.height*c,t.height]}return[t.width,t.height]}var C=qd(s),L=qd(l),M=C||L;if(Tu(p)&&(!a||Tu(a))){if(C&&L)return[s,l];if(!g&&!M)return[t.width,t.height];if(M&&g){var I=C?s:l*c,G=L?l:s/c;return[I,G]}var j=C?s:t.width,Y=L?l:t.height;return[j,Y]}if(g){var q=0,ne=0;return En(p)?q=Oi(p,t.width):En(a)&&(ne=Oi(a,t.height)),Tu(p)?q=ne*c:(!a||Tu(a))&&(ne=q/c),[q,ne]}var he=null,Se=null;if(En(p)?he=Oi(p,t.width):a&&En(a)&&(Se=Oi(a,t.height)),he!==null&&(!a||Tu(a))&&(Se=C&&L?he/s*l:t.height),Se!==null&&Tu(p)&&(he=C&&L?Se/l*s:t.width),he!==null&&Se!==null)return[he,Se];throw new Error("Unable to calculate background-size for element")},Uu=function(i,e){var t=i[e];return typeof t>"u"?i[0]:t},zT=function(i,e,t,s,l){var c=e[0],p=e[1],a=t[0],g=t[1];switch(i){case 2:return[new tr(Math.round(s.left),Math.round(s.top+p)),new tr(Math.round(s.left+s.width),Math.round(s.top+p)),new tr(Math.round(s.left+s.width),Math.round(g+s.top+p)),new tr(Math.round(s.left),Math.round(g+s.top+p))];case 3:return[new tr(Math.round(s.left+c),Math.round(s.top)),new tr(Math.round(s.left+c+a),Math.round(s.top)),new tr(Math.round(s.left+c+a),Math.round(s.height+s.top)),new tr(Math.round(s.left+c),Math.round(s.height+s.top))];case 1:return[new tr(Math.round(s.left+c),Math.round(s.top+p)),new tr(Math.round(s.left+c+a),Math.round(s.top+p)),new tr(Math.round(s.left+c+a),Math.round(s.top+p+g)),new tr(Math.round(s.left+c),Math.round(s.top+p+g))];default:return[new tr(Math.round(l.left),Math.round(l.top)),new tr(Math.round(l.left+l.width),Math.round(l.top)),new tr(Math.round(l.left+l.width),Math.round(l.height+l.top)),new tr(Math.round(l.left),Math.round(l.height+l.top))]}},HT="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",cw="Hidden Text",VT=function(){function i(e){this._data={},this._document=e}return i.prototype.parseMetrics=function(e,t){var s=this._document.createElement("div"),l=this._document.createElement("img"),c=this._document.createElement("span"),p=this._document.body;s.style.visibility="hidden",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",p.appendChild(s),l.src=HT,l.width=1,l.height=1,l.style.margin="0",l.style.padding="0",l.style.verticalAlign="baseline",c.style.fontFamily=e,c.style.fontSize=t,c.style.margin="0",c.style.padding="0",c.appendChild(this._document.createTextNode(cw)),s.appendChild(c),s.appendChild(l);var a=l.offsetTop-c.offsetTop+2;s.removeChild(c),s.appendChild(this._document.createTextNode(cw)),s.style.lineHeight="normal",l.style.verticalAlign="super";var g=l.offsetTop-s.offsetTop+2;return p.removeChild(s),{baseline:a,middle:g}},i.prototype.getMetrics=function(e,t){var s=e+" "+t;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(e,t)),this._data[s]},i}(),uw=function(){function i(e,t){this.context=e,this.options=t}return i}(),jT=1e4,GT=function(i){go(e,i);function e(t,s){var l=i.call(this,t,s)||this;return l._activeEffects=[],l.canvas=s.canvas?s.canvas:document.createElement("canvas"),l.ctx=l.canvas.getContext("2d"),s.canvas||(l.canvas.width=Math.floor(s.width*s.scale),l.canvas.height=Math.floor(s.height*s.scale),l.canvas.style.width=s.width+"px",l.canvas.style.height=s.height+"px"),l.fontMetrics=new VT(document),l.ctx.scale(l.options.scale,l.options.scale),l.ctx.translate(-s.x,-s.y),l.ctx.textBaseline="bottom",l._activeEffects=[],l.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),l}return e.prototype.applyEffects=function(t){for(var s=this;this._activeEffects.length;)this.popEffect();t.forEach(function(l){return s.applyEffect(l)})},e.prototype.applyEffect=function(t){this.ctx.save(),UT(t)&&(this.ctx.globalAlpha=t.opacity),TT(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),iw(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return js(this,void 0,void 0,function(){var s;return Cs(this,function(l){switch(l.label){case 0:return s=t.element.container.styles,s.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return js(this,void 0,void 0,function(){return Cs(this,function(s){switch(s.label){case 0:if(Qn(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(t)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,s,l){var c=this;if(s===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+l);else{var p=Em(t.text);p.reduce(function(a,g){return c.ctx.fillText(g,a,t.bounds.top+l),a+c.ctx.measureText(g).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var s=t.fontVariant.filter(function(p){return p==="normal"||p==="small-caps"}).join(""),l=ZT(t.fontFamily).join(", "),c=Uh(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,s,t.fontWeight,c,l].join(" "),l,c]},e.prototype.renderTextNode=function(t,s){return js(this,void 0,void 0,function(){var l,c,p,a,g,_,C,L,M=this;return Cs(this,function(I){return l=this.createFontStyle(s),c=l[0],p=l[1],a=l[2],this.ctx.font=c,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",g=this.fontMetrics.getMetrics(p,a),_=g.baseline,C=g.middle,L=s.paintOrder,t.textBounds.forEach(function(G){L.forEach(function(j){switch(j){case 0:M.ctx.fillStyle=jn(s.color),M.renderTextWithLetterSpacing(G,s.letterSpacing,_);var Y=s.textShadow;Y.length&&G.text.trim().length&&(Y.slice(0).reverse().forEach(function(q){M.ctx.shadowColor=jn(q.color),M.ctx.shadowOffsetX=q.offsetX.number*M.options.scale,M.ctx.shadowOffsetY=q.offsetY.number*M.options.scale,M.ctx.shadowBlur=q.blur.number,M.renderTextWithLetterSpacing(G,s.letterSpacing,_)}),M.ctx.shadowColor="",M.ctx.shadowOffsetX=0,M.ctx.shadowOffsetY=0,M.ctx.shadowBlur=0),s.textDecorationLine.length&&(M.ctx.fillStyle=jn(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(q){switch(q){case 1:M.ctx.fillRect(G.bounds.left,Math.round(G.bounds.top+_),G.bounds.width,1);break;case 2:M.ctx.fillRect(G.bounds.left,Math.round(G.bounds.top),G.bounds.width,1);break;case 3:M.ctx.fillRect(G.bounds.left,Math.ceil(G.bounds.top+C),G.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&G.text.trim().length&&(M.ctx.strokeStyle=jn(s.webkitTextStrokeColor),M.ctx.lineWidth=s.webkitTextStrokeWidth,M.ctx.lineJoin=window.chrome?"miter":"round",M.ctx.strokeText(G.text,G.bounds.left,G.bounds.top+_)),M.ctx.strokeStyle="",M.ctx.lineWidth=0,M.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,s,l){if(l&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var c=Gd(t),p=Hd(s);this.path(p),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(l,0,0,t.intrinsicWidth,t.intrinsicHeight,c.left,c.top,c.width,c.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return js(this,void 0,void 0,function(){var s,l,c,p,a,g,ne,ne,_,C,L,M,Se,I,G,Ne,j,Y,q,ne,he,Se,Ne;return Cs(this,function(Pe){switch(Pe.label){case 0:this.applyEffects(t.getEffects(4)),s=t.container,l=t.curves,c=s.styles,p=0,a=s.textNodes,Pe.label=1;case 1:return p<a.length?(g=a[p],[4,this.renderTextNode(g,c)]):[3,4];case 2:Pe.sent(),Pe.label=3;case 3:return p++,[3,1];case 4:if(!(s instanceof I_))return[3,8];Pe.label=5;case 5:return Pe.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return ne=Pe.sent(),this.renderReplacedElement(s,l,ne),[3,8];case 7:return Pe.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof L_&&this.renderReplacedElement(s,l,s.canvas),!(s instanceof T_))return[3,12];Pe.label=9;case 9:return Pe.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return ne=Pe.sent(),this.renderReplacedElement(s,l,ne),[3,12];case 11:return Pe.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof k_&&s.tree?(_=new e(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,_.render(s.tree)]):[3,14];case 13:C=Pe.sent(),s.width&&s.height&&this.ctx.drawImage(C,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),Pe.label=14;case 14:if(s instanceof Im&&(L=Math.min(s.bounds.width,s.bounds.height),s.type===Md?s.checked&&(this.ctx.save(),this.path([new tr(s.bounds.left+L*.39363,s.bounds.top+L*.79),new tr(s.bounds.left+L*.16,s.bounds.top+L*.5549),new tr(s.bounds.left+L*.27347,s.bounds.top+L*.44071),new tr(s.bounds.left+L*.39694,s.bounds.top+L*.5649),new tr(s.bounds.left+L*.72983,s.bounds.top+L*.23),new tr(s.bounds.left+L*.84,s.bounds.top+L*.34085),new tr(s.bounds.left+L*.39363,s.bounds.top+L*.79)]),this.ctx.fillStyle=jn(P_),this.ctx.fill(),this.ctx.restore()):s.type===Qd&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+L/2,s.bounds.top+L/2,L/4,0,Math.PI*2,!0),this.ctx.fillStyle=jn(P_),this.ctx.fill(),this.ctx.restore())),qT(s)&&s.value.length){switch(M=this.createFontStyle(c),Se=M[0],I=M[1],G=this.fontMetrics.getMetrics(Se,I).baseline,this.ctx.font=Se,this.ctx.fillStyle=jn(c.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=KT(s.styles.textAlign),Ne=Gd(s),j=0,s.styles.textAlign){case 1:j+=Ne.width/2;break;case 2:j+=Ne.width;break}Y=Ne.add(j,0,0,-Ne.height/2+1),this.ctx.save(),this.path([new tr(Ne.left,Ne.top),new tr(Ne.left+Ne.width,Ne.top),new tr(Ne.left+Ne.width,Ne.top+Ne.height),new tr(Ne.left,Ne.top+Ne.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Dh(s.value,Y),c.letterSpacing,G),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Qn(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(q=s.styles.listStyleImage,q.type!==0)return[3,18];ne=void 0,he=q.url,Pe.label=15;case 15:return Pe.trys.push([15,17,,18]),[4,this.context.cache.match(he)];case 16:return ne=Pe.sent(),this.ctx.drawImage(ne,s.bounds.left-(ne.width+10),s.bounds.top),[3,18];case 17:return Pe.sent(),this.context.logger.error("Error loading list-style-image "+he),[3,18];case 18:return[3,20];case 19:t.listValue&&s.styles.listStyleType!==-1&&(Se=this.createFontStyle(c)[0],this.ctx.font=Se,this.ctx.fillStyle=jn(c.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Ne=new KA(s.bounds.left,s.bounds.top+Oi(s.styles.paddingTop,s.bounds.width),s.bounds.width,l_(c.lineHeight,c.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Dh(t.listValue,Ne),c.letterSpacing,l_(c.lineHeight,c.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Pe.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return js(this,void 0,void 0,function(){var s,l,q,c,p,q,a,g,q,_,C,q,L,M,q,I,G,q,j,Y,q;return Cs(this,function(ne){switch(ne.label){case 0:if(Qn(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:ne.sent(),s=0,l=t.negativeZIndex,ne.label=2;case 2:return s<l.length?(q=l[s],[4,this.renderStack(q)]):[3,5];case 3:ne.sent(),ne.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:ne.sent(),c=0,p=t.nonInlineLevel,ne.label=7;case 7:return c<p.length?(q=p[c],[4,this.renderNode(q)]):[3,10];case 8:ne.sent(),ne.label=9;case 9:return c++,[3,7];case 10:a=0,g=t.nonPositionedFloats,ne.label=11;case 11:return a<g.length?(q=g[a],[4,this.renderStack(q)]):[3,14];case 12:ne.sent(),ne.label=13;case 13:return a++,[3,11];case 14:_=0,C=t.nonPositionedInlineLevel,ne.label=15;case 15:return _<C.length?(q=C[_],[4,this.renderStack(q)]):[3,18];case 16:ne.sent(),ne.label=17;case 17:return _++,[3,15];case 18:L=0,M=t.inlineLevel,ne.label=19;case 19:return L<M.length?(q=M[L],[4,this.renderNode(q)]):[3,22];case 20:ne.sent(),ne.label=21;case 21:return L++,[3,19];case 22:I=0,G=t.zeroOrAutoZIndexOrTransformedOrOpacity,ne.label=23;case 23:return I<G.length?(q=G[I],[4,this.renderStack(q)]):[3,26];case 24:ne.sent(),ne.label=25;case 25:return I++,[3,23];case 26:j=0,Y=t.positiveZIndex,ne.label=27;case 27:return j<Y.length?(q=Y[j],[4,this.renderStack(q)]):[3,30];case 28:ne.sent(),ne.label=29;case 29:return j++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var s=this;t.forEach(function(l,c){var p=Ga(l)?l.start:l;c===0?s.ctx.moveTo(p.x,p.y):s.ctx.lineTo(p.x,p.y),Ga(l)&&s.ctx.bezierCurveTo(l.startControl.x,l.startControl.y,l.endControl.x,l.endControl.y,l.end.x,l.end.y)})},e.prototype.renderRepeat=function(t,s,l,c){this.path(t),this.ctx.fillStyle=s,this.ctx.translate(l,c),this.ctx.fill(),this.ctx.translate(-l,-c)},e.prototype.resizeImage=function(t,s,l){var c;if(t.width===s&&t.height===l)return t;var p=(c=this.canvas.ownerDocument)!==null&&c!==void 0?c:document,a=p.createElement("canvas");a.width=Math.max(1,s),a.height=Math.max(1,l);var g=a.getContext("2d");return g.drawImage(t,0,0,t.width,t.height,0,0,s,l),a},e.prototype.renderBackgroundImage=function(t){return js(this,void 0,void 0,function(){var s,l,c,p,a,g;return Cs(this,function(_){switch(_.label){case 0:s=t.styles.backgroundImage.length-1,l=function(C){var L,M,I,Ke,Je,rt,xe,_e,fe,G,Ke,Je,rt,xe,_e,j,Y,q,ne,he,Se,Ne,Pe,Ee,fe,We,Ke,ce,Ae,xe,_e,et,Je,rt,Ye,it,nt,Bt,ee,pe,ye,Re;return Cs(this,function(Ge){switch(Ge.label){case 0:if(C.type!==0)return[3,5];L=void 0,M=C.url,Ge.label=1;case 1:return Ge.trys.push([1,3,,4]),[4,c.context.cache.match(M)];case 2:return L=Ge.sent(),[3,4];case 3:return Ge.sent(),c.context.logger.error("Error loading background-image "+M),[3,4];case 4:return L&&(I=Rm(t,s,[L.width,L.height,L.width/L.height]),Ke=I[0],Je=I[1],rt=I[2],xe=I[3],_e=I[4],fe=c.ctx.createPattern(c.resizeImage(L,xe,_e),"repeat"),c.renderRepeat(Ke,fe,Je,rt)),[3,6];case 5:TF(C)?(G=Rm(t,s,[null,null,null]),Ke=G[0],Je=G[1],rt=G[2],xe=G[3],_e=G[4],j=SF(C.angle,xe,_e),Y=j[0],q=j[1],ne=j[2],he=j[3],Se=j[4],Ne=document.createElement("canvas"),Ne.width=xe,Ne.height=_e,Pe=Ne.getContext("2d"),Ee=Pe.createLinearGradient(q,he,ne,Se),Y2(C.stops,Y).forEach(function(tt){return Ee.addColorStop(tt.stop,jn(tt.color))}),Pe.fillStyle=Ee,Pe.fillRect(0,0,xe,_e),xe>0&&_e>0&&(fe=c.ctx.createPattern(Ne,"repeat"),c.renderRepeat(Ke,fe,Je,rt))):UF(C)&&(We=Rm(t,s,[null,null,null]),Ke=We[0],ce=We[1],Ae=We[2],xe=We[3],_e=We[4],et=C.position.length===0?[pm]:C.position,Je=Oi(et[0],xe),rt=Oi(et[et.length-1],_e),Ye=EF(C,Je,rt,xe,_e),it=Ye[0],nt=Ye[1],it>0&&nt>0&&(Bt=c.ctx.createRadialGradient(ce+Je,Ae+rt,0,ce+Je,Ae+rt,it),Y2(C.stops,it*2).forEach(function(tt){return Bt.addColorStop(tt.stop,jn(tt.color))}),c.path(Ke),c.ctx.fillStyle=Bt,it!==nt?(ee=t.bounds.left+.5*t.bounds.width,pe=t.bounds.top+.5*t.bounds.height,ye=nt/it,Re=1/ye,c.ctx.save(),c.ctx.translate(ee,pe),c.ctx.transform(1,0,0,ye,0,0),c.ctx.translate(-ee,-pe),c.ctx.fillRect(ce,Re*(Ae-pe)+pe,xe,_e*Re),c.ctx.restore()):c.ctx.fill())),Ge.label=6;case 6:return s--,[2]}})},c=this,p=0,a=t.styles.backgroundImage.slice(0).reverse(),_.label=1;case 1:return p<a.length?(g=a[p],[5,l(g)]):[3,4];case 2:_.sent(),_.label=3;case 3:return p++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,s,l){return js(this,void 0,void 0,function(){return Cs(this,function(c){return this.path(Aw(l,s)),this.ctx.fillStyle=jn(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,s,l,c){return js(this,void 0,void 0,function(){var p,a;return Cs(this,function(g){switch(g.label){case 0:return s<3?[4,this.renderSolidBorder(t,l,c)]:[3,2];case 1:return g.sent(),[2];case 2:return p=QT(c,l),this.path(p),this.ctx.fillStyle=jn(t),this.ctx.fill(),a=kT(c,l),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return js(this,void 0,void 0,function(){var s,l,c,p,a,g,_,C,L=this;return Cs(this,function(M){switch(M.label){case 0:return this.applyEffects(t.getEffects(2)),s=t.container.styles,l=!zl(s.backgroundColor)||s.backgroundImage.length,c=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],p=$T(Uu(s.backgroundClip,0),t.curves),l||s.boxShadow.length?(this.ctx.save(),this.path(p),this.ctx.clip(),zl(s.backgroundColor)||(this.ctx.fillStyle=jn(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:M.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(I){L.ctx.save();var G=zd(t.curves),j=I.inset?0:jT,Y=PT(G,-j+(I.inset?1:-1)*I.spread.number,(I.inset?1:-1)*I.spread.number,I.spread.number*(I.inset?-2:2),I.spread.number*(I.inset?-2:2));I.inset?(L.path(G),L.ctx.clip(),L.mask(Y)):(L.mask(G),L.ctx.clip(),L.path(Y)),L.ctx.shadowOffsetX=I.offsetX.number+j,L.ctx.shadowOffsetY=I.offsetY.number,L.ctx.shadowColor=jn(I.color),L.ctx.shadowBlur=I.blur.number,L.ctx.fillStyle=I.inset?jn(I.color):"rgba(0,0,0,1)",L.ctx.fill(),L.ctx.restore()}),M.label=2;case 2:a=0,g=0,_=c,M.label=3;case 3:return g<_.length?(C=_[g],C.style!==0&&!zl(C.color)&&C.width>0?C.style!==2?[3,5]:[4,this.renderDashedDottedBorder(C.color,C.width,a,t.curves,2)]:[3,11]):[3,13];case 4:return M.sent(),[3,11];case 5:return C.style!==3?[3,7]:[4,this.renderDashedDottedBorder(C.color,C.width,a,t.curves,3)];case 6:return M.sent(),[3,11];case 7:return C.style!==4?[3,9]:[4,this.renderDoubleBorder(C.color,C.width,a,t.curves)];case 8:return M.sent(),[3,11];case 9:return[4,this.renderSolidBorder(C.color,a,t.curves)];case 10:M.sent(),M.label=11;case 11:a++,M.label=12;case 12:return g++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,s,l,c,p){return js(this,void 0,void 0,function(){var a,g,_,C,L,M,I,G,j,Y,q,ne,he,Se,Ne,Pe,Ne,Pe;return Cs(this,function(Ee){return this.ctx.save(),a=DT(c,l),g=Aw(c,l),p===2&&(this.path(g),this.ctx.clip()),Ga(g[0])?(_=g[0].start.x,C=g[0].start.y):(_=g[0].x,C=g[0].y),Ga(g[1])?(L=g[1].end.x,M=g[1].end.y):(L=g[1].x,M=g[1].y),l===0||l===2?I=Math.abs(_-L):I=Math.abs(C-M),this.ctx.beginPath(),p===3?this.formatPath(a):this.formatPath(g.slice(0,2)),G=s<3?s*3:s*2,j=s<3?s*2:s,p===3&&(G=s,j=s),Y=!0,I<=G*2?Y=!1:I<=G*2+j?(q=I/(2*G+j),G*=q,j*=q):(ne=Math.floor((I+j)/(G+j)),he=(I-ne*G)/(ne-1),Se=(I-(ne+1)*G)/ne,j=Se<=0||Math.abs(j-he)<Math.abs(j-Se)?he:Se),Y&&(p===3?this.ctx.setLineDash([0,G+j]):this.ctx.setLineDash([G,j])),p===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=jn(t),this.ctx.stroke(),this.ctx.setLineDash([]),p===2&&(Ga(g[0])&&(Ne=g[3],Pe=g[0],this.ctx.beginPath(),this.formatPath([new tr(Ne.end.x,Ne.end.y),new tr(Pe.start.x,Pe.start.y)]),this.ctx.stroke()),Ga(g[1])&&(Ne=g[1],Pe=g[2],this.ctx.beginPath(),this.formatPath([new tr(Ne.end.x,Ne.end.y),new tr(Pe.start.x,Pe.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return js(this,void 0,void 0,function(){var s;return Cs(this,function(l){switch(l.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=jn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=MT(t),[4,this.renderStack(s)];case 1:return l.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(uw),qT=function(i){return i instanceof Q_||i instanceof M_?!0:i instanceof Im&&i.type!==Qd&&i.type!==Md},$T=function(i,e){switch(i){case 0:return zd(e);case 2:return FT(e);case 1:default:return Hd(e)}},KT=function(i){switch(i){case 1:return"center";case 2:return"right";case 0:default:return"left"}},WT=["-apple-system","system-ui"],ZT=function(i){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?i.filter(function(e){return WT.indexOf(e)===-1}):i},XT=function(i){go(e,i);function e(t,s){var l=i.call(this,t,s)||this;return l.canvas=s.canvas?s.canvas:document.createElement("canvas"),l.ctx=l.canvas.getContext("2d"),l.options=s,l.canvas.width=Math.floor(s.width*s.scale),l.canvas.height=Math.floor(s.height*s.scale),l.canvas.style.width=s.width+"px",l.canvas.style.height=s.height+"px",l.ctx.scale(l.options.scale,l.options.scale),l.ctx.translate(-s.x,-s.y),l.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),l}return e.prototype.render=function(t){return js(this,void 0,void 0,function(){var s,l;return Cs(this,function(c){switch(c.label){case 0:return s=Sm(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,YT(s)];case 1:return l=c.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=jn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(l,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(uw),YT=function(i){return new Promise(function(e,t){var s=new Image;s.onload=function(){e(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(i))})},JT=function(){function i(e){var t=e.id,s=e.enabled;this.id=t,this.enabled=s,this.start=Date.now()}return i.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,ed([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},i.prototype.getTime=function(){return Date.now()-this.start},i.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,ed([this.id,this.getTime()+"ms"],e))},i.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,ed([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},i.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,ed([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},i.instances={},i}(),e6=function(){function i(e,t){var s;this.windowBounds=t,this.instanceName="#"+i.instanceCount++,this.logger=new JT({id:this.instanceName,enabled:e.logging}),this.cache=(s=e.cache)!==null&&s!==void 0?s:new _T(this,e)}return i.instanceCount=1,i}(),t6=function(i,e){return e===void 0&&(e={}),r6(i,e)};typeof window<"u"&&rw.setContext(window);var r6=function(i,e){return js(void 0,void 0,void 0,function(){var t,s,l,c,p,a,g,_,C,L,M,I,G,j,Y,q,ne,he,Se,Ne,Ee,Pe,Ee,fe,We,Ke,ce,Ae,xe,_e,et,Je,rt,Ye,it,nt,Bt,ee,pe,ye;return Cs(this,function(Re){switch(Re.label){case 0:if(!i||typeof i!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=i.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(s=t.defaultView,!s)throw new Error("Document is not attached to a Window");return l={allowTaint:(fe=e.allowTaint)!==null&&fe!==void 0?fe:!1,imageTimeout:(We=e.imageTimeout)!==null&&We!==void 0?We:15e3,proxy:e.proxy,useCORS:(Ke=e.useCORS)!==null&&Ke!==void 0?Ke:!1},c=qg({logging:(ce=e.logging)!==null&&ce!==void 0?ce:!0,cache:e.cache},l),p={windowWidth:(Ae=e.windowWidth)!==null&&Ae!==void 0?Ae:s.innerWidth,windowHeight:(xe=e.windowHeight)!==null&&xe!==void 0?xe:s.innerHeight,scrollX:(_e=e.scrollX)!==null&&_e!==void 0?_e:s.pageXOffset,scrollY:(et=e.scrollY)!==null&&et!==void 0?et:s.pageYOffset},a=new KA(p.scrollX,p.scrollY,p.windowWidth,p.windowHeight),g=new e6(c,a),_=(Je=e.foreignObjectRendering)!==null&&Je!==void 0?Je:!1,C={allowTaint:(rt=e.allowTaint)!==null&&rt!==void 0?rt:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:_,copyStyles:_},g.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),L=new ew(g,i,C),M=L.clonedReferenceElement,M?[4,L.toIFrame(t,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return I=Re.sent(),G=Tm(M)||iT(M)?PS(M.ownerDocument):td(g,M),j=G.width,Y=G.height,q=G.left,ne=G.top,he=i6(g,M,e.backgroundColor),Se={canvas:e.canvas,backgroundColor:he,scale:(it=(Ye=e.scale)!==null&&Ye!==void 0?Ye:s.devicePixelRatio)!==null&&it!==void 0?it:1,x:((nt=e.x)!==null&&nt!==void 0?nt:0)+q,y:((Bt=e.y)!==null&&Bt!==void 0?Bt:0)+ne,width:(ee=e.width)!==null&&ee!==void 0?ee:Math.ceil(j),height:(pe=e.height)!==null&&pe!==void 0?pe:Math.ceil(Y)},_?(g.logger.debug("Document cloned, using foreign object rendering"),Ee=new XT(g,Se),[4,Ee.render(M)]):[3,3];case 2:return Ne=Re.sent(),[3,5];case 3:return g.logger.debug("Document cloned, element located at "+q+","+ne+" with size "+j+"x"+Y+" using computed rendering"),g.logger.debug("Starting DOM parsing"),Pe=N_(g,M),he===Pe.styles.backgroundColor&&(Pe.styles.backgroundColor=ZA.TRANSPARENT),g.logger.debug("Starting renderer for element at "+Se.x+","+Se.y+" with size "+Se.width+"x"+Se.height),Ee=new GT(g,Se),[4,Ee.render(Pe)];case 4:Ne=Re.sent(),Re.label=5;case 5:return(!((ye=e.removeContainer)!==null&&ye!==void 0)||ye)&&(ew.destroy(I)||g.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),g.logger.debug("Finished rendering"),[2,Ne]}})})},i6=function(i,e,t){var s=e.ownerDocument,l=s.documentElement?Mh(i,getComputedStyle(s.documentElement).backgroundColor):ZA.TRANSPARENT,c=s.body?Mh(i,getComputedStyle(s.body).backgroundColor):ZA.TRANSPARENT,p=typeof t=="string"?Mh(i,t):t===null?ZA.TRANSPARENT:4294967295;return e===s.documentElement?zl(l)?zl(c)?p:c:l:p};const n6=Object.freeze(Object.defineProperty({__proto__:null,default:t6},Symbol.toStringTag,{value:"Module"}));/*! @license DOMPurify 2.4.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.5/LICENSE */function Gl(i){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gl(i)}function zm(i,e){return zm=Object.setPrototypeOf||function(t,s){return t.__proto__=s,t},zm(i,e)}function s6(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $d(i,e,t){return s6()?$d=Reflect.construct:$d=function(s,l,c){var p=[null];p.push.apply(p,l);var a=Function.bind.apply(s,p),g=new a;return c&&zm(g,c.prototype),g},$d.apply(null,arguments)}function yo(i){return a6(i)||o6(i)||A6(i)||l6()}function a6(i){if(Array.isArray(i))return Hm(i)}function o6(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function A6(i,e){if(i){if(typeof i=="string")return Hm(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Hm(i,e)}}function Hm(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=i[t];return s}function l6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c6=Object.hasOwnProperty,hw=Object.setPrototypeOf,u6=Object.isFrozen,h6=Object.getPrototypeOf,p6=Object.getOwnPropertyDescriptor,$s=Object.freeze,vo=Object.seal,d6=Object.create,pw=typeof Reflect<"u"&&Reflect,Kd=pw.apply,Vm=pw.construct;Kd||(Kd=function(i,e,t){return i.apply(e,t)}),$s||($s=function(i){return i}),vo||(vo=function(i){return i}),Vm||(Vm=function(i,e){return $d(i,yo(e))});var f6=$a(Array.prototype.forEach),dw=$a(Array.prototype.pop),zh=$a(Array.prototype.push),Wd=$a(String.prototype.toLowerCase),jm=$a(String.prototype.toString),g6=$a(String.prototype.match),_o=$a(String.prototype.replace),m6=$a(String.prototype.indexOf),y6=$a(String.prototype.trim),Ks=$a(RegExp.prototype.test),Gm=v6(TypeError);function $a(i){return function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),l=1;l<t;l++)s[l-1]=arguments[l];return Kd(i,e,s)}}function v6(i){return function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Vm(i,t)}}function Jr(i,e,t){t=t||Wd,hw&&hw(i,null);for(var s=e.length;s--;){var l=e[s];if(typeof l=="string"){var c=t(l);c!==l&&(u6(e)||(e[s]=c),l=c)}i[l]=!0}return i}function Fc(i){var e=d6(null),t;for(t in i)Kd(c6,i,[t])===!0&&(e[t]=i[t]);return e}function Zd(i,e){for(;i!==null;){var t=p6(i,e);if(t){if(t.get)return $a(t.get);if(typeof t.value=="function")return $a(t.value)}i=h6(i)}function s(l){return console.warn("fallback value for",l),null}return s}var fw=$s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qm=$s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$m=$s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),_6=$s(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Km=$s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),w6=$s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gw=$s(["#text"]),mw=$s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Wm=$s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),yw=$s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Xd=$s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),b6=vo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),x6=vo(/<%[\w\W]*|[\w\W]*%>/gm),B6=vo(/\${[\w\W]*}/gm),C6=vo(/^data-[\-\w.\u00B7-\uFFFF]/),S6=vo(/^aria-[\-\w]+$/),E6=vo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),F6=vo(/^(?:\w+script|data):/i),I6=vo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),L6=vo(/^html$/i),T6=function(){return typeof window>"u"?null:window},U6=function(i,e){if(Gl(i)!=="object"||typeof i.createPolicy!="function")return null;var t=null,s="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(s)&&(t=e.currentScript.getAttribute(s));var l="dompurify"+(t?"#"+t:"");try{return i.createPolicy(l,{createHTML:function(c){return c},createScriptURL:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}};function vw(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T6(),e=function(Te){return vw(Te)};if(e.version="2.4.5",e.removed=[],!i||!i.document||i.document.nodeType!==9)return e.isSupported=!1,e;var t=i.document,s=i.document,l=i.DocumentFragment,c=i.HTMLTemplateElement,p=i.Node,a=i.Element,g=i.NodeFilter,_=i.NamedNodeMap,C=_===void 0?i.NamedNodeMap||i.MozNamedAttrMap:_,L=i.HTMLFormElement,M=i.DOMParser,I=i.trustedTypes,G=a.prototype,j=Zd(G,"cloneNode"),Y=Zd(G,"nextSibling"),q=Zd(G,"childNodes"),ne=Zd(G,"parentNode");if(typeof c=="function"){var he=s.createElement("template");he.content&&he.content.ownerDocument&&(s=he.content.ownerDocument)}var Se=U6(I,t),Ne=Se?Se.createHTML(""):"",Pe=s,Ee=Pe.implementation,fe=Pe.createNodeIterator,We=Pe.createDocumentFragment,Ke=Pe.getElementsByTagName,ce=t.importNode,Ae={};try{Ae=Fc(s).documentMode?s.documentMode:{}}catch{}var xe={};e.isSupported=typeof ne=="function"&&Ee&&typeof Ee.createHTMLDocument<"u"&&Ae!==9;var _e=b6,et=x6,Je=B6,rt=C6,Ye=S6,it=F6,nt=I6,Bt=E6,ee=null,pe=Jr({},[].concat(yo(fw),yo(qm),yo($m),yo(Km),yo(gw))),ye=null,Re=Jr({},[].concat(yo(mw),yo(Wm),yo(yw),yo(Xd))),Ge=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),tt=null,st=null,ot=!0,Ct=!0,Et=!1,zt=!0,Vt=!1,Jt=!1,ft=!1,Me=!1,fr=!1,Xt=!1,bt=!1,ze=!0,Ut=!1,Pt="user-content-",Mt=!0,Lt=!1,hr={},wr=null,Lr=Jr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),qr=null,gr=Jr({},["audio","video","img","source","image","track"]),br=null,Rt=Jr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vt="http://www.w3.org/1998/Math/MathML",Cr="http://www.w3.org/2000/svg",Tr="http://www.w3.org/1999/xhtml",Dr=Tr,Vr=!1,xt=null,$t=Jr({},[vt,Cr,Tr],jm),rr,Or=["application/xhtml+xml","text/html"],bi="text/html",Nt,Kr=null,ue=s.createElement("form"),X=function(Te){return Te instanceof RegExp||Te instanceof Function},ie=function(Te){Kr&&Kr===Te||((!Te||Gl(Te)!=="object")&&(Te={}),Te=Fc(Te),rr=Or.indexOf(Te.PARSER_MEDIA_TYPE)===-1?rr=bi:rr=Te.PARSER_MEDIA_TYPE,Nt=rr==="application/xhtml+xml"?jm:Wd,ee="ALLOWED_TAGS"in Te?Jr({},Te.ALLOWED_TAGS,Nt):pe,ye="ALLOWED_ATTR"in Te?Jr({},Te.ALLOWED_ATTR,Nt):Re,xt="ALLOWED_NAMESPACES"in Te?Jr({},Te.ALLOWED_NAMESPACES,jm):$t,br="ADD_URI_SAFE_ATTR"in Te?Jr(Fc(Rt),Te.ADD_URI_SAFE_ATTR,Nt):Rt,qr="ADD_DATA_URI_TAGS"in Te?Jr(Fc(gr),Te.ADD_DATA_URI_TAGS,Nt):gr,wr="FORBID_CONTENTS"in Te?Jr({},Te.FORBID_CONTENTS,Nt):Lr,tt="FORBID_TAGS"in Te?Jr({},Te.FORBID_TAGS,Nt):{},st="FORBID_ATTR"in Te?Jr({},Te.FORBID_ATTR,Nt):{},hr="USE_PROFILES"in Te?Te.USE_PROFILES:!1,ot=Te.ALLOW_ARIA_ATTR!==!1,Ct=Te.ALLOW_DATA_ATTR!==!1,Et=Te.ALLOW_UNKNOWN_PROTOCOLS||!1,zt=Te.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Vt=Te.SAFE_FOR_TEMPLATES||!1,Jt=Te.WHOLE_DOCUMENT||!1,fr=Te.RETURN_DOM||!1,Xt=Te.RETURN_DOM_FRAGMENT||!1,bt=Te.RETURN_TRUSTED_TYPE||!1,Me=Te.FORCE_BODY||!1,ze=Te.SANITIZE_DOM!==!1,Ut=Te.SANITIZE_NAMED_PROPS||!1,Mt=Te.KEEP_CONTENT!==!1,Lt=Te.IN_PLACE||!1,Bt=Te.ALLOWED_URI_REGEXP||Bt,Dr=Te.NAMESPACE||Tr,Ge=Te.CUSTOM_ELEMENT_HANDLING||{},Te.CUSTOM_ELEMENT_HANDLING&&X(Te.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ge.tagNameCheck=Te.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Te.CUSTOM_ELEMENT_HANDLING&&X(Te.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ge.attributeNameCheck=Te.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Te.CUSTOM_ELEMENT_HANDLING&&typeof Te.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ge.allowCustomizedBuiltInElements=Te.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Vt&&(Ct=!1),Xt&&(fr=!0),hr&&(ee=Jr({},yo(gw)),ye=[],hr.html===!0&&(Jr(ee,fw),Jr(ye,mw)),hr.svg===!0&&(Jr(ee,qm),Jr(ye,Wm),Jr(ye,Xd)),hr.svgFilters===!0&&(Jr(ee,$m),Jr(ye,Wm),Jr(ye,Xd)),hr.mathMl===!0&&(Jr(ee,Km),Jr(ye,yw),Jr(ye,Xd))),Te.ADD_TAGS&&(ee===pe&&(ee=Fc(ee)),Jr(ee,Te.ADD_TAGS,Nt)),Te.ADD_ATTR&&(ye===Re&&(ye=Fc(ye)),Jr(ye,Te.ADD_ATTR,Nt)),Te.ADD_URI_SAFE_ATTR&&Jr(br,Te.ADD_URI_SAFE_ATTR,Nt),Te.FORBID_CONTENTS&&(wr===Lr&&(wr=Fc(wr)),Jr(wr,Te.FORBID_CONTENTS,Nt)),Mt&&(ee["#text"]=!0),Jt&&Jr(ee,["html","head","body"]),ee.table&&(Jr(ee,["tbody"]),delete tt.tbody),$s&&$s(Te),Kr=Te)},le=Jr({},["mi","mo","mn","ms","mtext"]),ve=Jr({},["foreignobject","desc","title","annotation-xml"]),be=Jr({},["title","style","font","a","script"]),De=Jr({},qm);Jr(De,$m),Jr(De,_6);var Oe=Jr({},Km);Jr(Oe,w6);var Ue=function(Te){var Qt=ne(Te);(!Qt||!Qt.tagName)&&(Qt={namespaceURI:Dr,tagName:"template"});var yt=Wd(Te.tagName),vr=Wd(Qt.tagName);return xt[Te.namespaceURI]?Te.namespaceURI===Cr?Qt.namespaceURI===Tr?yt==="svg":Qt.namespaceURI===vt?yt==="svg"&&(vr==="annotation-xml"||le[vr]):!!De[yt]:Te.namespaceURI===vt?Qt.namespaceURI===Tr?yt==="math":Qt.namespaceURI===Cr?yt==="math"&&ve[vr]:!!Oe[yt]:Te.namespaceURI===Tr?Qt.namespaceURI===Cr&&!ve[vr]||Qt.namespaceURI===vt&&!le[vr]?!1:!Oe[yt]&&(be[yt]||!De[yt]):!!(rr==="application/xhtml+xml"&&xt[Te.namespaceURI]):!1},Ve=function(Te){zh(e.removed,{element:Te});try{Te.parentNode.removeChild(Te)}catch{try{Te.outerHTML=Ne}catch{Te.remove()}}},lt=function(Te,Qt){try{zh(e.removed,{attribute:Qt.getAttributeNode(Te),from:Qt})}catch{zh(e.removed,{attribute:null,from:Qt})}if(Qt.removeAttribute(Te),Te==="is"&&!ye[Te])if(fr||Xt)try{Ve(Qt)}catch{}else try{Qt.setAttribute(Te,"")}catch{}},ht=function(Te){var Qt,yt;if(Me)Te="<remove></remove>"+Te;else{var vr=g6(Te,/^[\r\n\t ]+/);yt=vr&&vr[0]}rr==="application/xhtml+xml"&&Dr===Tr&&(Te='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Te+"</body></html>");var Nr=Se?Se.createHTML(Te):Te;if(Dr===Tr)try{Qt=new M().parseFromString(Nr,rr)}catch{}if(!Qt||!Qt.documentElement){Qt=Ee.createDocument(Dr,"template",null);try{Qt.documentElement.innerHTML=Vr?Ne:Nr}catch{}}var di=Qt.body||Qt.documentElement;return Te&&yt&&di.insertBefore(s.createTextNode(yt),di.childNodes[0]||null),Dr===Tr?Ke.call(Qt,Jt?"html":"body")[0]:Jt?Qt.documentElement:di},gt=function(Te){return fe.call(Te.ownerDocument||Te,Te,g.SHOW_ELEMENT|g.SHOW_COMMENT|g.SHOW_TEXT,null,!1)},nr=function(Te){return Te instanceof L&&(typeof Te.nodeName!="string"||typeof Te.textContent!="string"||typeof Te.removeChild!="function"||!(Te.attributes instanceof C)||typeof Te.removeAttribute!="function"||typeof Te.setAttribute!="function"||typeof Te.namespaceURI!="string"||typeof Te.insertBefore!="function"||typeof Te.hasChildNodes!="function")},sr=function(Te){return Gl(p)==="object"?Te instanceof p:Te&&Gl(Te)==="object"&&typeof Te.nodeType=="number"&&typeof Te.nodeName=="string"},jt=function(Te,Qt,yt){xe[Te]&&f6(xe[Te],function(vr){vr.call(e,Qt,yt,Kr)})},Yt=function(Te){var Qt;if(jt("beforeSanitizeElements",Te,null),nr(Te)||Ks(/[\u0080-\uFFFF]/,Te.nodeName))return Ve(Te),!0;var yt=Nt(Te.nodeName);if(jt("uponSanitizeElement",Te,{tagName:yt,allowedTags:ee}),Te.hasChildNodes()&&!sr(Te.firstElementChild)&&(!sr(Te.content)||!sr(Te.content.firstElementChild))&&Ks(/<[/\w]/g,Te.innerHTML)&&Ks(/<[/\w]/g,Te.textContent)||yt==="select"&&Ks(/<template/i,Te.innerHTML))return Ve(Te),!0;if(!ee[yt]||tt[yt]){if(!tt[yt]&&Br(yt)&&(Ge.tagNameCheck instanceof RegExp&&Ks(Ge.tagNameCheck,yt)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(yt)))return!1;if(Mt&&!wr[yt]){var vr=ne(Te)||Te.parentNode,Nr=q(Te)||Te.childNodes;if(Nr&&vr)for(var di=Nr.length,Ii=di-1;Ii>=0;--Ii)vr.insertBefore(j(Nr[Ii],!0),Y(Te))}return Ve(Te),!0}return Te instanceof a&&!Ue(Te)||(yt==="noscript"||yt==="noembed")&&Ks(/<\/no(script|embed)/i,Te.innerHTML)?(Ve(Te),!0):(Vt&&Te.nodeType===3&&(Qt=Te.textContent,Qt=_o(Qt,_e," "),Qt=_o(Qt,et," "),Qt=_o(Qt,Je," "),Te.textContent!==Qt&&(zh(e.removed,{element:Te.cloneNode()}),Te.textContent=Qt)),jt("afterSanitizeElements",Te,null),!1)},ur=function(Te,Qt,yt){if(ze&&(Qt==="id"||Qt==="name")&&(yt in s||yt in ue))return!1;if(!(Ct&&!st[Qt]&&Ks(rt,Qt))&&!(ot&&Ks(Ye,Qt))){if(!ye[Qt]||st[Qt]){if(!(Br(Te)&&(Ge.tagNameCheck instanceof RegExp&&Ks(Ge.tagNameCheck,Te)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(Te))&&(Ge.attributeNameCheck instanceof RegExp&&Ks(Ge.attributeNameCheck,Qt)||Ge.attributeNameCheck instanceof Function&&Ge.attributeNameCheck(Qt))||Qt==="is"&&Ge.allowCustomizedBuiltInElements&&(Ge.tagNameCheck instanceof RegExp&&Ks(Ge.tagNameCheck,yt)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(yt))))return!1}else if(!br[Qt]&&!Ks(Bt,_o(yt,nt,""))&&!((Qt==="src"||Qt==="xlink:href"||Qt==="href")&&Te!=="script"&&m6(yt,"data:")===0&&qr[Te])&&!(Et&&!Ks(it,_o(yt,nt,"")))&&yt)return!1}return!0},Br=function(Te){return Te.indexOf("-")>0},Rr=function(Te){var Qt,yt,vr,Nr;jt("beforeSanitizeAttributes",Te,null);var di=Te.attributes;if(di){var Ii={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ye};for(Nr=di.length;Nr--;){Qt=di[Nr];var qn=Qt,Hi=qn.name,Wi=qn.namespaceURI;if(yt=Hi==="value"?Qt.value:y6(Qt.value),vr=Nt(Hi),Ii.attrName=vr,Ii.attrValue=yt,Ii.keepAttr=!0,Ii.forceKeepAttr=void 0,jt("uponSanitizeAttribute",Te,Ii),yt=Ii.attrValue,!Ii.forceKeepAttr&&(lt(Hi,Te),!!Ii.keepAttr)){if(!zt&&Ks(/\/>/i,yt)){lt(Hi,Te);continue}Vt&&(yt=_o(yt,_e," "),yt=_o(yt,et," "),yt=_o(yt,Je," "));var ii=Nt(Te.nodeName);if(ur(ii,vr,yt)){if(Ut&&(vr==="id"||vr==="name")&&(lt(Hi,Te),yt=Pt+yt),Se&&Gl(I)==="object"&&typeof I.getAttributeType=="function"&&!Wi)switch(I.getAttributeType(ii,vr)){case"TrustedHTML":yt=Se.createHTML(yt);break;case"TrustedScriptURL":yt=Se.createScriptURL(yt);break}try{Wi?Te.setAttributeNS(Wi,Hi,yt):Te.setAttribute(Hi,yt),dw(e.removed)}catch{}}}}jt("afterSanitizeAttributes",Te,null)}},Sr=function Te(Qt){var yt,vr=gt(Qt);for(jt("beforeSanitizeShadowDOM",Qt,null);yt=vr.nextNode();)jt("uponSanitizeShadowNode",yt,null),!Yt(yt)&&(yt.content instanceof l&&Te(yt.content),Rr(yt));jt("afterSanitizeShadowDOM",Qt,null)};return e.sanitize=function(Te){var Qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},yt,vr,Nr,di,Ii;if(Vr=!Te,Vr&&(Te="<!-->"),typeof Te!="string"&&!sr(Te)){if(typeof Te.toString!="function")throw Gm("toString is not a function");if(Te=Te.toString(),typeof Te!="string")throw Gm("dirty is not a string, aborting")}if(!e.isSupported){if(Gl(i.toStaticHTML)==="object"||typeof i.toStaticHTML=="function"){if(typeof Te=="string")return i.toStaticHTML(Te);if(sr(Te))return i.toStaticHTML(Te.outerHTML)}return Te}if(ft||ie(Qt),e.removed=[],typeof Te=="string"&&(Lt=!1),Lt){if(Te.nodeName){var qn=Nt(Te.nodeName);if(!ee[qn]||tt[qn])throw Gm("root node is forbidden and cannot be sanitized in-place")}}else if(Te instanceof p)yt=ht("<!---->"),vr=yt.ownerDocument.importNode(Te,!0),vr.nodeType===1&&vr.nodeName==="BODY"||vr.nodeName==="HTML"?yt=vr:yt.appendChild(vr);else{if(!fr&&!Vt&&!Jt&&Te.indexOf("<")===-1)return Se&&bt?Se.createHTML(Te):Te;if(yt=ht(Te),!yt)return fr?null:bt?Ne:""}yt&&Me&&Ve(yt.firstChild);for(var Hi=gt(Lt?Te:yt);Nr=Hi.nextNode();)Nr.nodeType===3&&Nr===di||Yt(Nr)||(Nr.content instanceof l&&Sr(Nr.content),Rr(Nr),di=Nr);if(di=null,Lt)return Te;if(fr){if(Xt)for(Ii=We.call(yt.ownerDocument);yt.firstChild;)Ii.appendChild(yt.firstChild);else Ii=yt;return(ye.shadowroot||ye.shadowrootmod)&&(Ii=ce.call(t,Ii,!0)),Ii}var Wi=Jt?yt.outerHTML:yt.innerHTML;return Jt&&ee["!doctype"]&&yt.ownerDocument&&yt.ownerDocument.doctype&&yt.ownerDocument.doctype.name&&Ks(L6,yt.ownerDocument.doctype.name)&&(Wi="<!DOCTYPE "+yt.ownerDocument.doctype.name+`>
`+Wi),Vt&&(Wi=_o(Wi,_e," "),Wi=_o(Wi,et," "),Wi=_o(Wi,Je," ")),Se&&bt?Se.createHTML(Wi):Wi},e.setConfig=function(Te){ie(Te),ft=!0},e.clearConfig=function(){Kr=null,ft=!1},e.isValidAttribute=function(Te,Qt,yt){Kr||ie({});var vr=Nt(Te),Nr=Nt(Qt);return ur(vr,Nr,yt)},e.addHook=function(Te,Qt){typeof Qt=="function"&&(xe[Te]=xe[Te]||[],zh(xe[Te],Qt))},e.removeHook=function(Te){if(xe[Te])return dw(xe[Te])},e.removeHooks=function(Te){xe[Te]&&(xe[Te]=[])},e.removeAllHooks=function(){xe={}},e}var P6=vw();const M6=Object.freeze(Object.defineProperty({__proto__:null,default:P6},Symbol.toStringTag,{value:"Module"}));var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _w(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Yd=function(i){return i&&i.Math==Math&&i},kn=Yd(typeof globalThis=="object"&&globalThis)||Yd(typeof window=="object"&&window)||Yd(typeof self=="object"&&self)||Yd(typeof Hh=="object"&&Hh)||function(){return this}()||Hh||Function("return this")(),Pu={},dn=function(i){try{return!!i()}catch{return!0}},Q6=dn,hA=!Q6(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),k6=dn,Jd=!k6(function(){var i=(function(){}).bind();return typeof i!="function"||i.hasOwnProperty("prototype")}),D6=Jd,ef=Function.prototype.call,os=D6?ef.bind(ef):function(){return ef.apply(ef,arguments)},ww={},bw={}.propertyIsEnumerable,xw=Object.getOwnPropertyDescriptor,N6=xw&&!bw.call({1:2},1);ww.f=N6?function(i){var e=xw(this,i);return!!e&&e.enumerable}:bw;var tf=function(i,e){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:e}},Bw=Jd,Cw=Function.prototype,Zm=Cw.call,O6=Bw&&Cw.bind.bind(Zm,Zm),fn=Bw?O6:function(i){return function(){return Zm.apply(i,arguments)}},Sw=fn,R6=Sw({}.toString),z6=Sw("".slice),Ic=function(i){return z6(R6(i),8,-1)},H6=fn,V6=dn,j6=Ic,Xm=Object,G6=H6("".split),Ew=V6(function(){return!Xm("z").propertyIsEnumerable(0)})?function(i){return j6(i)=="String"?G6(i,""):Xm(i)}:Xm,Lc=function(i){return i==null},q6=Lc,$6=TypeError,pA=function(i){if(q6(i))throw $6("Can't call method on "+i);return i},K6=Ew,W6=pA,Vh=function(i){return K6(W6(i))},Ym=typeof document=="object"&&document.all,Z6=typeof Ym>"u"&&Ym!==void 0,Fw={all:Ym,IS_HTMLDDA:Z6},Iw=Fw,X6=Iw.all,sn=Iw.IS_HTMLDDA?function(i){return typeof i=="function"||i===X6}:function(i){return typeof i=="function"},Lw=sn,Tw=Fw,Y6=Tw.all,YA=Tw.IS_HTMLDDA?function(i){return typeof i=="object"?i!==null:Lw(i)||i===Y6}:function(i){return typeof i=="object"?i!==null:Lw(i)},Jm=kn,J6=sn,eU=function(i){return J6(i)?i:void 0},Tc=function(i,e){return arguments.length<2?eU(Jm[i]):Jm[i]&&Jm[i][e]},tU=fn,rf=tU({}.isPrototypeOf),nf=typeof navigator<"u"&&String(navigator.userAgent)||"",Uw=kn,e0=nf,Pw=Uw.process,Mw=Uw.Deno,Qw=Pw&&Pw.versions||Mw&&Mw.version,kw=Qw&&Qw.v8,wo,sf;kw&&(wo=kw.split("."),sf=wo[0]>0&&wo[0]<4?1:+(wo[0]+wo[1])),!sf&&e0&&(wo=e0.match(/Edge\/(\d+)/),(!wo||wo[1]>=74)&&(wo=e0.match(/Chrome\/(\d+)/),wo&&(sf=+wo[1])));var t0=sf,Dw=t0,rU=dn,iU=kn,nU=iU.String,Nw=!!Object.getOwnPropertySymbols&&!rU(function(){var i=Symbol();return!nU(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&Dw&&Dw<41}),sU=Nw,Ow=sU&&!Symbol.sham&&typeof Symbol.iterator=="symbol",aU=Tc,oU=sn,AU=rf,lU=Ow,cU=Object,Rw=lU?function(i){return typeof i=="symbol"}:function(i){var e=aU("Symbol");return oU(e)&&AU(e.prototype,cU(i))},uU=String,af=function(i){try{return uU(i)}catch{return"Object"}},hU=sn,pU=af,dU=TypeError,JA=function(i){if(hU(i))return i;throw dU(pU(i)+" is not a function")},fU=JA,gU=Lc,Mu=function(i,e){var t=i[e];return gU(t)?void 0:fU(t)},r0=os,i0=sn,n0=YA,mU=TypeError,yU=function(i,e){var t,s;if(e==="string"&&i0(t=i.toString)&&!n0(s=r0(t,i))||i0(t=i.valueOf)&&!n0(s=r0(t,i))||e!=="string"&&i0(t=i.toString)&&!n0(s=r0(t,i)))return s;throw mU("Can't convert object to primitive value")},zw={exports:{}},Hw=kn,vU=Object.defineProperty,s0=function(i,e){try{vU(Hw,i,{value:e,configurable:!0,writable:!0})}catch{Hw[i]=e}return e},_U=kn,wU=s0,Vw="__core-js_shared__",bU=_U[Vw]||wU(Vw,{}),a0=bU,jw=a0;(zw.exports=function(i,e){return jw[i]||(jw[i]=e!==void 0?e:{})})("versions",[]).push({version:"3.30.2",mode:"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"});var o0=zw.exports,xU=pA,BU=Object,of=function(i){return BU(xU(i))},CU=fn,SU=of,EU=CU({}.hasOwnProperty),bo=Object.hasOwn||function(i,e){return EU(SU(i),e)},FU=fn,IU=0,LU=Math.random(),TU=FU(1 .toString),Gw=function(i){return"Symbol("+(i===void 0?"":i)+")_"+TU(++IU+LU,36)},UU=kn,PU=o0,qw=bo,MU=Gw,QU=Nw,kU=Ow,Qu=UU.Symbol,A0=PU("wks"),DU=kU?Qu.for||Qu:Qu&&Qu.withoutSetter||MU,Gn=function(i){return qw(A0,i)||(A0[i]=QU&&qw(Qu,i)?Qu[i]:DU("Symbol."+i)),A0[i]},NU=os,$w=YA,Kw=Rw,OU=Mu,RU=yU,zU=Gn,HU=TypeError,VU=zU("toPrimitive"),jU=function(i,e){if(!$w(i)||Kw(i))return i;var t=OU(i,VU),s;if(t){if(e===void 0&&(e="default"),s=NU(t,i,e),!$w(s)||Kw(s))return s;throw HU("Can't convert object to primitive value")}return e===void 0&&(e="number"),RU(i,e)},GU=jU,qU=Rw,l0=function(i){var e=GU(i,"string");return qU(e)?e:e+""},$U=kn,Ww=YA,c0=$U.document,KU=Ww(c0)&&Ww(c0.createElement),Af=function(i){return KU?c0.createElement(i):{}},WU=hA,ZU=dn,XU=Af,Zw=!WU&&!ZU(function(){return Object.defineProperty(XU("div"),"a",{get:function(){return 7}}).a!=7}),YU=hA,JU=os,eP=ww,tP=tf,rP=Vh,iP=l0,nP=bo,sP=Zw,Xw=Object.getOwnPropertyDescriptor;Pu.f=YU?Xw:function(i,e){if(i=rP(i),e=iP(e),sP)try{return Xw(i,e)}catch{}if(nP(i,e))return tP(!JU(eP.f,i,e),i[e])};var dA={},aP=hA,oP=dn,Yw=aP&&oP(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),AP=YA,lP=String,cP=TypeError,Ss=function(i){if(AP(i))return i;throw cP(lP(i)+" is not an object")},uP=hA,hP=Zw,pP=Yw,lf=Ss,Jw=l0,dP=TypeError,u0=Object.defineProperty,fP=Object.getOwnPropertyDescriptor,h0="enumerable",p0="configurable",d0="writable";dA.f=uP?pP?function(i,e,t){if(lf(i),e=Jw(e),lf(t),typeof i=="function"&&e==="prototype"&&"value"in t&&d0 in t&&!t[d0]){var s=fP(i,e);s&&s[d0]&&(i[e]=t.value,t={configurable:p0 in t?t[p0]:s[p0],enumerable:h0 in t?t[h0]:s[h0],writable:!1})}return u0(i,e,t)}:u0:function(i,e,t){if(lf(i),e=Jw(e),lf(t),hP)try{return u0(i,e,t)}catch{}if("get"in t||"set"in t)throw dP("Accessors not supported");return"value"in t&&(i[e]=t.value),i};var gP=hA,mP=dA,yP=tf,jh=gP?function(i,e,t){return mP.f(i,e,yP(1,t))}:function(i,e,t){return i[e]=t,i},eb={exports:{}},f0=hA,vP=bo,tb=Function.prototype,_P=f0&&Object.getOwnPropertyDescriptor,g0=vP(tb,"name"),wP=g0&&(function(){}).name==="something",bP=g0&&(!f0||f0&&_P(tb,"name").configurable),cf={EXISTS:g0,PROPER:wP,CONFIGURABLE:bP},xP=fn,BP=sn,m0=a0,CP=xP(Function.toString);BP(m0.inspectSource)||(m0.inspectSource=function(i){return CP(i)});var y0=m0.inspectSource,SP=kn,EP=sn,rb=SP.WeakMap,FP=EP(rb)&&/native code/.test(String(rb)),IP=o0,LP=Gw,ib=IP("keys"),v0=function(i){return ib[i]||(ib[i]=LP(i))},_0={},TP=FP,nb=kn,UP=YA,PP=jh,w0=bo,b0=a0,MP=v0,QP=_0,sb="Object already initialized",x0=nb.TypeError,kP=nb.WeakMap,uf,Gh,hf,DP=function(i){return hf(i)?Gh(i):uf(i,{})},NP=function(i){return function(e){var t;if(!UP(e)||(t=Gh(e)).type!==i)throw x0("Incompatible receiver, "+i+" required");return t}};if(TP||b0.state){var fA=b0.state||(b0.state=new kP);fA.get=fA.get,fA.has=fA.has,fA.set=fA.set,uf=function(i,e){if(fA.has(i))throw x0(sb);return e.facade=i,fA.set(i,e),e},Gh=function(i){return fA.get(i)||{}},hf=function(i){return fA.has(i)}}else{var ku=MP("state");QP[ku]=!0,uf=function(i,e){if(w0(i,ku))throw x0(sb);return e.facade=i,PP(i,ku,e),e},Gh=function(i){return w0(i,ku)?i[ku]:{}},hf=function(i){return w0(i,ku)}}var pf={set:uf,get:Gh,has:hf,enforce:DP,getterFor:NP},B0=fn,OP=dn,RP=sn,df=bo,C0=hA,zP=cf.CONFIGURABLE,HP=y0,ab=pf,VP=ab.enforce,jP=ab.get,ob=String,ff=Object.defineProperty,GP=B0("".slice),qP=B0("".replace),$P=B0([].join),KP=C0&&!OP(function(){return ff(function(){},"length",{value:8}).length!==8}),WP=String(String).split("String"),ZP=eb.exports=function(i,e,t){GP(ob(e),0,7)==="Symbol("&&(e="["+qP(ob(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!df(i,"name")||zP&&i.name!==e)&&(C0?ff(i,"name",{value:e,configurable:!0}):i.name=e),KP&&t&&df(t,"arity")&&i.length!==t.arity&&ff(i,"length",{value:t.arity});try{t&&df(t,"constructor")&&t.constructor?C0&&ff(i,"prototype",{writable:!1}):i.prototype&&(i.prototype=void 0)}catch{}var s=VP(i);return df(s,"source")||(s.source=$P(WP,typeof e=="string"?e:"")),i};Function.prototype.toString=ZP(function(){return RP(this)&&jP(this).source||HP(this)},"toString");var Ab=eb.exports,XP=sn,YP=dA,JP=Ab,eM=s0,Uc=function(i,e,t,s){s||(s={});var l=s.enumerable,c=s.name!==void 0?s.name:e;if(XP(t)&&JP(t,c,s),s.global)l?i[e]=t:eM(e,t);else{try{s.unsafe?i[e]&&(l=!0):delete i[e]}catch{}l?i[e]=t:YP.f(i,e,{value:t,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return i},lb={},tM=Math.ceil,rM=Math.floor,iM=Math.trunc||function(i){var e=+i;return(e>0?rM:tM)(e)},nM=iM,gf=function(i){var e=+i;return e!==e||e===0?0:nM(e)},sM=gf,aM=Math.max,oM=Math.min,cb=function(i,e){var t=sM(i);return t<0?aM(t+e,0):oM(t,e)},AM=gf,lM=Math.min,Du=function(i){return i>0?lM(AM(i),9007199254740991):0},cM=Du,mf=function(i){return cM(i.length)},uM=Vh,hM=cb,pM=mf,ub=function(i){return function(e,t,s){var l=uM(e),c=pM(l),p=hM(s,c),a;if(i&&t!=t){for(;c>p;)if(a=l[p++],a!=a)return!0}else for(;c>p;p++)if((i||p in l)&&l[p]===t)return i||p||0;return!i&&-1}},hb={includes:ub(!0),indexOf:ub(!1)},dM=fn,S0=bo,fM=Vh,gM=hb.indexOf,mM=_0,pb=dM([].push),db=function(i,e){var t=fM(i),s=0,l=[],c;for(c in t)!S0(mM,c)&&S0(t,c)&&pb(l,c);for(;e.length>s;)S0(t,c=e[s++])&&(~gM(l,c)||pb(l,c));return l},E0=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],yM=db,vM=E0,_M=vM.concat("length","prototype");lb.f=Object.getOwnPropertyNames||function(i){return yM(i,_M)};var fb={};fb.f=Object.getOwnPropertySymbols;var wM=Tc,bM=fn,xM=lb,BM=fb,CM=Ss,SM=bM([].concat),EM=wM("Reflect","ownKeys")||function(i){var e=xM.f(CM(i)),t=BM.f;return t?SM(e,t(i)):e},gb=bo,FM=EM,IM=Pu,LM=dA,TM=function(i,e,t){for(var s=FM(e),l=LM.f,c=IM.f,p=0;p<s.length;p++){var a=s[p];!gb(i,a)&&!(t&&gb(t,a))&&l(i,a,c(e,a))}},UM=dn,PM=sn,MM=/#|\.prototype\./,qh=function(i,e){var t=kM[QM(i)];return t==NM?!0:t==DM?!1:PM(e)?UM(e):!!e},QM=qh.normalize=function(i){return String(i).replace(MM,".").toLowerCase()},kM=qh.data={},DM=qh.NATIVE="N",NM=qh.POLYFILL="P",mb=qh,F0=kn,OM=Pu.f,RM=jh,zM=Uc,HM=s0,VM=TM,jM=mb,Ws=function(i,e){var t=i.target,s=i.global,l=i.stat,c,p,a,g,_,C;if(s?p=F0:l?p=F0[t]||HM(t,{}):p=(F0[t]||{}).prototype,p)for(a in e){if(_=e[a],i.dontCallGetSet?(C=OM(p,a),g=C&&C.value):g=p[a],c=jM(s?a:t+(l?".":"#")+a,i.forced),!c&&g!==void 0){if(typeof _==typeof g)continue;VM(_,g)}(i.sham||g&&g.sham)&&RM(_,"sham",!0),zM(p,a,_,i)}},GM=Ic,$h=typeof process<"u"&&GM(process)=="process",qM=fn,$M=JA,KM=function(i,e,t){try{return qM($M(Object.getOwnPropertyDescriptor(i,e)[t]))}catch{}},WM=sn,ZM=String,XM=TypeError,YM=function(i){if(typeof i=="object"||WM(i))return i;throw XM("Can't set "+ZM(i)+" as a prototype")},JM=KM,eQ=Ss,tQ=YM,yb=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,e={},t;try{t=JM(Object.prototype,"__proto__","set"),t(e,[]),i=e instanceof Array}catch{}return function(s,l){return eQ(s),tQ(l),i?t(s,l):s.__proto__=l,s}}():void 0),rQ=dA.f,iQ=bo,nQ=Gn,vb=nQ("toStringTag"),I0=function(i,e,t){i&&!t&&(i=i.prototype),i&&!iQ(i,vb)&&rQ(i,vb,{configurable:!0,value:e})},_b=Ab,sQ=dA,aQ=function(i,e,t){return t.get&&_b(t.get,e,{getter:!0}),t.set&&_b(t.set,e,{setter:!0}),sQ.f(i,e,t)},oQ=Tc,AQ=aQ,lQ=Gn,cQ=hA,wb=lQ("species"),uQ=function(i){var e=oQ(i);cQ&&e&&!e[wb]&&AQ(e,wb,{configurable:!0,get:function(){return this}})},hQ=rf,pQ=TypeError,dQ=function(i,e){if(hQ(e,i))return i;throw pQ("Incorrect invocation")},fQ=Gn,gQ=fQ("toStringTag"),bb={};bb[gQ]="z";var mQ=String(bb)==="[object z]",yQ=mQ,vQ=sn,yf=Ic,_Q=Gn,wQ=_Q("toStringTag"),bQ=Object,xQ=yf(function(){return arguments}())=="Arguments",BQ=function(i,e){try{return i[e]}catch{}},L0=yQ?yf:function(i){var e,t,s;return i===void 0?"Undefined":i===null?"Null":typeof(t=BQ(e=bQ(i),wQ))=="string"?t:xQ?yf(e):(s=yf(e))=="Object"&&vQ(e.callee)?"Arguments":s},CQ=fn,SQ=dn,xb=sn,EQ=L0,FQ=Tc,IQ=y0,Bb=function(){},LQ=[],Cb=FQ("Reflect","construct"),T0=/^\s*(?:class|function)\b/,TQ=CQ(T0.exec),UQ=!T0.exec(Bb),Kh=function(i){if(!xb(i))return!1;try{return Cb(Bb,LQ,i),!0}catch{return!1}},Sb=function(i){if(!xb(i))return!1;switch(EQ(i)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return UQ||!!TQ(T0,IQ(i))}catch{return!0}};Sb.sham=!0;var PQ=!Cb||SQ(function(){var i;return Kh(Kh.call)||!Kh(Object)||!Kh(function(){i=!0})||i})?Sb:Kh,MQ=PQ,QQ=af,kQ=TypeError,DQ=function(i){if(MQ(i))return i;throw kQ(QQ(i)+" is not a constructor")},Eb=Ss,NQ=DQ,OQ=Lc,RQ=Gn,zQ=RQ("species"),Fb=function(i,e){var t=Eb(i).constructor,s;return t===void 0||OQ(s=Eb(t)[zQ])?e:NQ(s)},HQ=Jd,Ib=Function.prototype,Lb=Ib.apply,Tb=Ib.call,U0=typeof Reflect=="object"&&Reflect.apply||(HQ?Tb.bind(Lb):function(){return Tb.apply(Lb,arguments)}),VQ=Ic,jQ=fn,Wh=function(i){if(VQ(i)==="Function")return jQ(i)},Ub=Wh,GQ=JA,qQ=Jd,$Q=Ub(Ub.bind),P0=function(i,e){return GQ(i),e===void 0?i:qQ?$Q(i,e):function(){return i.apply(e,arguments)}},KQ=Tc,Pb=KQ("document","documentElement"),WQ=fn,ZQ=WQ([].slice),XQ=TypeError,YQ=function(i,e){if(i<e)throw XQ("Not enough arguments");return i},JQ=nf,Mb=/(?:ipad|iphone|ipod).*applewebkit/i.test(JQ),La=kn,ek=U0,tk=P0,Qb=sn,rk=bo,kb=dn,Db=Pb,ik=ZQ,Nb=Af,nk=YQ,sk=Mb,ak=$h,M0=La.setImmediate,Q0=La.clearImmediate,ok=La.process,k0=La.Dispatch,Ak=La.Function,Ob=La.MessageChannel,lk=La.String,D0=0,Zh={},Rb="onreadystatechange",Xh,Pc,N0,O0;kb(function(){Xh=La.location});var R0=function(i){if(rk(Zh,i)){var e=Zh[i];delete Zh[i],e()}},z0=function(i){return function(){R0(i)}},zb=function(i){R0(i.data)},Hb=function(i){La.postMessage(lk(i),Xh.protocol+"//"+Xh.host)};(!M0||!Q0)&&(M0=function(i){nk(arguments.length,1);var e=Qb(i)?i:Ak(i),t=ik(arguments,1);return Zh[++D0]=function(){ek(e,void 0,t)},Pc(D0),D0},Q0=function(i){delete Zh[i]},ak?Pc=function(i){ok.nextTick(z0(i))}:k0&&k0.now?Pc=function(i){k0.now(z0(i))}:Ob&&!sk?(N0=new Ob,O0=N0.port2,N0.port1.onmessage=zb,Pc=tk(O0.postMessage,O0)):La.addEventListener&&Qb(La.postMessage)&&!La.importScripts&&Xh&&Xh.protocol!=="file:"&&!kb(Hb)?(Pc=Hb,La.addEventListener("message",zb,!1)):Rb in Nb("script")?Pc=function(i){Db.appendChild(Nb("script"))[Rb]=function(){Db.removeChild(this),R0(i)}}:Pc=function(i){setTimeout(z0(i),0)});var Vb={set:M0,clear:Q0},jb=function(){this.head=null,this.tail=null};jb.prototype={add:function(i){var e={item:i,next:null},t=this.tail;t?t.next=e:this.head=e,this.tail=e},get:function(){var i=this.head;if(i){var e=this.head=i.next;return e===null&&(this.tail=null),i.item}}};var Gb=jb,ck=nf,uk=/ipad|iphone|ipod/i.test(ck)&&typeof Pebble<"u",hk=nf,pk=/web0s(?!.*chrome)/i.test(hk),Mc=kn,qb=P0,dk=Pu.f,H0=Vb.set,fk=Gb,gk=Mb,mk=uk,yk=pk,V0=$h,$b=Mc.MutationObserver||Mc.WebKitMutationObserver,Kb=Mc.document,Wb=Mc.process,vf=Mc.Promise,Zb=dk(Mc,"queueMicrotask"),j0=Zb&&Zb.value,Nu,G0,q0,_f,Xb;if(!j0){var wf=new fk,bf=function(){var i,e;for(V0&&(i=Wb.domain)&&i.exit();e=wf.get();)try{e()}catch(t){throw wf.head&&Nu(),t}i&&i.enter()};!gk&&!V0&&!yk&&$b&&Kb?(G0=!0,q0=Kb.createTextNode(""),new $b(bf).observe(q0,{characterData:!0}),Nu=function(){q0.data=G0=!G0}):!mk&&vf&&vf.resolve?(_f=vf.resolve(void 0),_f.constructor=vf,Xb=qb(_f.then,_f),Nu=function(){Xb(bf)}):V0?Nu=function(){Wb.nextTick(bf)}:(H0=qb(H0,Mc),Nu=function(){H0(bf)}),j0=function(i){wf.head||Nu(),wf.add(i)}}var vk=j0,_k=function(i,e){try{arguments.length==1?console.error(i):console.error(i,e)}catch{}},$0=function(i){try{return{error:!1,value:i()}}catch(e){return{error:!0,value:e}}},wk=kn,xf=wk.Promise,Yb=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",bk=Yb,xk=$h,Bk=!bk&&!xk&&typeof window=="object"&&typeof document=="object",Ck=kn,Yh=xf,Sk=sn,Ek=mb,Fk=y0,Ik=Gn,Lk=Bk,Tk=Yb,K0=t0;Yh&&Yh.prototype;var Uk=Ik("species"),W0=!1,Jb=Sk(Ck.PromiseRejectionEvent),Pk=Ek("Promise",function(){var i=Fk(Yh),e=i!==String(Yh);if(!e&&K0===66)return!0;if(!K0||K0<51||!/native code/.test(i)){var t=new Yh(function(c){c(1)}),s=function(c){c(function(){},function(){})},l=t.constructor={};if(l[Uk]=s,W0=t.then(function(){})instanceof s,!W0)return!0}return!e&&(Lk||Tk)&&!Jb}),Jh={CONSTRUCTOR:Pk,REJECTION_EVENT:Jb,SUBCLASSING:W0},Ou={},ex=JA,Mk=TypeError,Qk=function(i){var e,t;this.promise=new i(function(s,l){if(e!==void 0||t!==void 0)throw Mk("Bad Promise constructor");e=s,t=l}),this.resolve=ex(e),this.reject=ex(t)};Ou.f=function(i){return new Qk(i)};var kk=Ws,Bf=$h,ql=kn,Ru=os,tx=Uc,rx=yb,Dk=I0,Nk=uQ,Ok=JA,Cf=sn,Rk=YA,zk=dQ,Hk=Fb,ix=Vb.set,Z0=vk,Vk=_k,jk=$0,Gk=Gb,nx=pf,Sf=xf,X0=Jh,sx=Ou,Ef="Promise",ax=X0.CONSTRUCTOR,qk=X0.REJECTION_EVENT,$k=X0.SUBCLASSING,Y0=nx.getterFor(Ef),Kk=nx.set,zu=Sf&&Sf.prototype,Qc=Sf,Ff=zu,ox=ql.TypeError,J0=ql.document,e1=ql.process,t1=sx.f,Wk=t1,Zk=!!(J0&&J0.createEvent&&ql.dispatchEvent),Ax="unhandledrejection",Xk="rejectionhandled",lx=0,cx=1,Yk=2,r1=1,ux=2,If,hx,Jk,px,dx=function(i){var e;return Rk(i)&&Cf(e=i.then)?e:!1},fx=function(i,e){var t=e.value,s=e.state==cx,l=s?i.ok:i.fail,c=i.resolve,p=i.reject,a=i.domain,g,_,C;try{l?(s||(e.rejection===ux&&t8(e),e.rejection=r1),l===!0?g=t:(a&&a.enter(),g=l(t),a&&(a.exit(),C=!0)),g===i.promise?p(ox("Promise-chain cycle")):(_=dx(g))?Ru(_,g,c,p):c(g)):p(t)}catch(L){a&&!C&&a.exit(),p(L)}},gx=function(i,e){i.notified||(i.notified=!0,Z0(function(){for(var t=i.reactions,s;s=t.get();)fx(s,i);i.notified=!1,e&&!i.rejection&&e8(i)}))},mx=function(i,e,t){var s,l;Zk?(s=J0.createEvent("Event"),s.promise=e,s.reason=t,s.initEvent(i,!1,!0),ql.dispatchEvent(s)):s={promise:e,reason:t},!qk&&(l=ql["on"+i])?l(s):i===Ax&&Vk("Unhandled promise rejection",t)},e8=function(i){Ru(ix,ql,function(){var e=i.facade,t=i.value,s=yx(i),l;if(s&&(l=jk(function(){Bf?e1.emit("unhandledRejection",t,e):mx(Ax,e,t)}),i.rejection=Bf||yx(i)?ux:r1,l.error))throw l.value})},yx=function(i){return i.rejection!==r1&&!i.parent},t8=function(i){Ru(ix,ql,function(){var e=i.facade;Bf?e1.emit("rejectionHandled",e):mx(Xk,e,i.value)})},Hu=function(i,e,t){return function(s){i(e,s,t)}},Vu=function(i,e,t){i.done||(i.done=!0,t&&(i=t),i.value=e,i.state=Yk,gx(i,!0))},i1=function(i,e,t){if(!i.done){i.done=!0,t&&(i=t);try{if(i.facade===e)throw ox("Promise can't be resolved itself");var s=dx(e);s?Z0(function(){var l={done:!1};try{Ru(s,e,Hu(i1,l,i),Hu(Vu,l,i))}catch(c){Vu(l,c,i)}}):(i.value=e,i.state=cx,gx(i,!1))}catch(l){Vu({done:!1},l,i)}}};if(ax&&(Qc=function(i){zk(this,Ff),Ok(i),Ru(If,this);var e=Y0(this);try{i(Hu(i1,e),Hu(Vu,e))}catch(t){Vu(e,t)}},Ff=Qc.prototype,If=function(i){Kk(this,{type:Ef,done:!1,notified:!1,parent:!1,reactions:new Gk,rejection:!1,state:lx,value:void 0})},If.prototype=tx(Ff,"then",function(i,e){var t=Y0(this),s=t1(Hk(this,Qc));return t.parent=!0,s.ok=Cf(i)?i:!0,s.fail=Cf(e)&&e,s.domain=Bf?e1.domain:void 0,t.state==lx?t.reactions.add(s):Z0(function(){fx(s,t)}),s.promise}),hx=function(){var i=new If,e=Y0(i);this.promise=i,this.resolve=Hu(i1,e),this.reject=Hu(Vu,e)},sx.f=t1=function(i){return i===Qc||i===Jk?new hx(i):Wk(i)},Cf(Sf)&&zu!==Object.prototype)){px=zu.then,$k||tx(zu,"then",function(i,e){var t=this;return new Qc(function(s,l){Ru(px,t,s,l)}).then(i,e)},{unsafe:!0});try{delete zu.constructor}catch{}rx&&rx(zu,Ff)}kk({global:!0,constructor:!0,wrap:!0,forced:ax},{Promise:Qc}),Dk(Qc,Ef,!1),Nk(Ef);var ep={},r8=Gn,i8=ep,n8=r8("iterator"),s8=Array.prototype,a8=function(i){return i!==void 0&&(i8.Array===i||s8[n8]===i)},o8=L0,vx=Mu,A8=Lc,l8=ep,c8=Gn,u8=c8("iterator"),_x=function(i){if(!A8(i))return vx(i,u8)||vx(i,"@@iterator")||l8[o8(i)]},h8=os,p8=JA,d8=Ss,f8=af,g8=_x,m8=TypeError,y8=function(i,e){var t=arguments.length<2?g8(i):e;if(p8(t))return d8(h8(t,i));throw m8(f8(i)+" is not iterable")},v8=os,wx=Ss,_8=Mu,w8=function(i,e,t){var s,l;wx(i);try{if(s=_8(i,"return"),!s){if(e==="throw")throw t;return t}s=v8(s,i)}catch(c){l=!0,s=c}if(e==="throw")throw t;if(l)throw s;return wx(s),t},b8=P0,x8=os,B8=Ss,C8=af,S8=a8,E8=mf,bx=rf,F8=y8,I8=_x,xx=w8,L8=TypeError,Lf=function(i,e){this.stopped=i,this.result=e},Bx=Lf.prototype,Cx=function(i,e,t){var s=t&&t.that,l=!!(t&&t.AS_ENTRIES),c=!!(t&&t.IS_RECORD),p=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),g=b8(e,s),_,C,L,M,I,G,j,Y=function(ne){return _&&xx(_,"normal",ne),new Lf(!0,ne)},q=function(ne){return l?(B8(ne),a?g(ne[0],ne[1],Y):g(ne[0],ne[1])):a?g(ne,Y):g(ne)};if(c)_=i.iterator;else if(p)_=i;else{if(C=I8(i),!C)throw L8(C8(i)+" is not iterable");if(S8(C)){for(L=0,M=E8(i);M>L;L++)if(I=q(i[L]),I&&bx(Bx,I))return I;return new Lf(!1)}_=F8(i,C)}for(G=c?i.next:_.next;!(j=x8(G,_)).done;){try{I=q(j.value)}catch(ne){xx(_,"throw",ne)}if(typeof I=="object"&&I&&bx(Bx,I))return I}return new Lf(!1)},T8=Gn,Sx=T8("iterator"),Ex=!1;try{var U8=0,Fx={next:function(){return{done:!!U8++}},return:function(){Ex=!0}};Fx[Sx]=function(){return this},Array.from(Fx,function(){throw 2})}catch{}var P8=function(i,e){if(!e&&!Ex)return!1;var t=!1;try{var s={};s[Sx]=function(){return{next:function(){return{done:t=!0}}}},i(s)}catch{}return t},M8=xf,Q8=P8,k8=Jh.CONSTRUCTOR,Ix=k8||!Q8(function(i){M8.all(i).then(void 0,function(){})}),D8=Ws,N8=os,O8=JA,R8=Ou,z8=$0,H8=Cx,V8=Ix;D8({target:"Promise",stat:!0,forced:V8},{all:function(i){var e=this,t=R8.f(e),s=t.resolve,l=t.reject,c=z8(function(){var p=O8(e.resolve),a=[],g=0,_=1;H8(i,function(C){var L=g++,M=!1;_++,N8(p,e,C).then(function(I){M||(M=!0,a[L]=I,--_||s(a))},l)}),--_||s(a)});return c.error&&l(c.value),t.promise}});var j8=Ws,G8=Jh.CONSTRUCTOR,n1=xf,q8=Tc,$8=sn,K8=Uc,Lx=n1&&n1.prototype;if(j8({target:"Promise",proto:!0,forced:G8,real:!0},{catch:function(i){return this.then(void 0,i)}}),$8(n1)){var Tx=q8("Promise").prototype.catch;Lx.catch!==Tx&&K8(Lx,"catch",Tx,{unsafe:!0})}var W8=Ws,Z8=os,X8=JA,Y8=Ou,J8=$0,eD=Cx,tD=Ix;W8({target:"Promise",stat:!0,forced:tD},{race:function(i){var e=this,t=Y8.f(e),s=t.reject,l=J8(function(){var c=X8(e.resolve);eD(i,function(p){Z8(c,e,p).then(t.resolve,s)})});return l.error&&s(l.value),t.promise}});var rD=Ws,iD=os,nD=Ou,sD=Jh.CONSTRUCTOR;rD({target:"Promise",stat:!0,forced:sD},{reject:function(i){var e=nD.f(this);return iD(e.reject,void 0,i),e.promise}});var aD=Ss,oD=YA,AD=Ou,lD=function(i,e){if(aD(i),oD(e)&&e.constructor===i)return e;var t=AD.f(i),s=t.resolve;return s(e),t.promise},cD=Ws,uD=Tc,hD=Jh.CONSTRUCTOR,pD=lD;uD("Promise"),cD({target:"Promise",stat:!0,forced:hD},{resolve:function(i){return pD(this,i)}});function Ux(i,e,t,s,l,c,p){try{var a=i[c](p),g=a.value}catch(_){t(_);return}a.done?e(g):Promise.resolve(g).then(s,l)}function el(i){return function(){var e=this,t=arguments;return new Promise(function(s,l){var c=i.apply(e,t);function p(g){Ux(c,s,l,p,a,"next",g)}function a(g){Ux(c,s,l,p,a,"throw",g)}p(void 0)})}}var dD=L0,fD=String,gA=function(i){if(dD(i)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return fD(i)},gD=Ss,Px=function(){var i=gD(this),e="";return i.hasIndices&&(e+="d"),i.global&&(e+="g"),i.ignoreCase&&(e+="i"),i.multiline&&(e+="m"),i.dotAll&&(e+="s"),i.unicode&&(e+="u"),i.unicodeSets&&(e+="v"),i.sticky&&(e+="y"),e},s1=dn,mD=kn,a1=mD.RegExp,o1=s1(function(){var i=a1("a","y");return i.lastIndex=2,i.exec("abcd")!=null}),yD=o1||s1(function(){return!a1("a","y").sticky}),vD=o1||s1(function(){var i=a1("^r","gy");return i.lastIndex=2,i.exec("str")!=null}),Mx={BROKEN_CARET:vD,MISSED_STICKY:yD,UNSUPPORTED_Y:o1},Qx={},_D=db,wD=E0,bD=Object.keys||function(i){return _D(i,wD)},xD=hA,BD=Yw,CD=dA,SD=Ss,ED=Vh,FD=bD;Qx.f=xD&&!BD?Object.defineProperties:function(i,e){SD(i);for(var t=ED(e),s=FD(e),l=s.length,c=0,p;l>c;)CD.f(i,p=s[c++],t[p]);return i};var ID=Ss,LD=Qx,kx=E0,TD=_0,UD=Pb,PD=Af,MD=v0,Dx=">",Nx="<",A1="prototype",l1="script",Ox=MD("IE_PROTO"),c1=function(){},Rx=function(i){return Nx+l1+Dx+i+Nx+"/"+l1+Dx},zx=function(i){i.write(Rx("")),i.close();var e=i.parentWindow.Object;return i=null,e},QD=function(){var i=PD("iframe"),e="java"+l1+":",t;return i.style.display="none",UD.appendChild(i),i.src=String(e),t=i.contentWindow.document,t.open(),t.write(Rx("document.F=Object")),t.close(),t.F},Tf,Uf=function(){try{Tf=new ActiveXObject("htmlfile")}catch{}Uf=typeof document<"u"?document.domain&&Tf?zx(Tf):QD():zx(Tf);for(var i=kx.length;i--;)delete Uf[A1][kx[i]];return Uf()};TD[Ox]=!0;var u1=Object.create||function(i,e){var t;return i!==null?(c1[A1]=ID(i),t=new c1,c1[A1]=null,t[Ox]=i):t=Uf(),e===void 0?t:LD.f(t,e)},kD=dn,DD=kn,ND=DD.RegExp,OD=kD(function(){var i=ND(".","s");return!(i.dotAll&&i.exec(`
`)&&i.flags==="s")}),RD=dn,zD=kn,HD=zD.RegExp,VD=RD(function(){var i=HD("(?<a>b)","g");return i.exec("b").groups.a!=="b"||"b".replace(i,"$<a>c")!=="bc"}),ju=os,Pf=fn,jD=gA,GD=Px,qD=Mx,$D=o0,KD=u1,WD=pf.get,ZD=OD,XD=VD,YD=$D("native-string-replace",String.prototype.replace),Mf=RegExp.prototype.exec,h1=Mf,JD=Pf("".charAt),eN=Pf("".indexOf),tN=Pf("".replace),p1=Pf("".slice),d1=function(){var i=/a/,e=/b*/g;return ju(Mf,i,"a"),ju(Mf,e,"a"),i.lastIndex!==0||e.lastIndex!==0}(),Hx=qD.BROKEN_CARET,f1=/()??/.exec("")[1]!==void 0,rN=d1||f1||Hx||ZD||XD;rN&&(h1=function(i){var e=this,t=WD(e),s=jD(i),l=t.raw,c,p,a,g,_,C,L;if(l)return l.lastIndex=e.lastIndex,c=ju(h1,l,s),e.lastIndex=l.lastIndex,c;var M=t.groups,I=Hx&&e.sticky,G=ju(GD,e),j=e.source,Y=0,q=s;if(I&&(G=tN(G,"y",""),eN(G,"g")===-1&&(G+="g"),q=p1(s,e.lastIndex),e.lastIndex>0&&(!e.multiline||e.multiline&&JD(s,e.lastIndex-1)!==`
`)&&(j="(?: "+j+")",q=" "+q,Y++),p=new RegExp("^(?:"+j+")",G)),f1&&(p=new RegExp("^"+j+"$(?!\\s)",G)),d1&&(a=e.lastIndex),g=ju(Mf,I?p:e,q),I?g?(g.input=p1(g.input,Y),g[0]=p1(g[0],Y),g.index=e.lastIndex,e.lastIndex+=g[0].length):e.lastIndex=0:d1&&g&&(e.lastIndex=e.global?g.index+g[0].length:a),f1&&g&&g.length>1&&ju(YD,g[0],p,function(){for(_=1;_<arguments.length-2;_++)arguments[_]===void 0&&(g[_]=void 0)}),g&&M)for(g.groups=C=KD(null),_=0;_<M.length;_++)L=M[_],C[L[0]]=g[L[1]];return g});var Qf=h1,iN=Ws,Vx=Qf;iN({target:"RegExp",proto:!0,forced:/./.exec!==Vx},{exec:Vx});var jx=Wh,Gx=Uc,nN=Qf,qx=dn,$x=Gn,sN=jh,aN=$x("species"),g1=RegExp.prototype,m1=function(i,e,t,s){var l=$x(i),c=!qx(function(){var _={};return _[l]=function(){return 7},""[i](_)!=7}),p=c&&!qx(function(){var _=!1,C=/a/;return i==="split"&&(C={},C.constructor={},C.constructor[aN]=function(){return C},C.flags="",C[l]=/./[l]),C.exec=function(){return _=!0,null},C[l](""),!_});if(!c||!p||t){var a=jx(/./[l]),g=e(l,""[i],function(_,C,L,M,I){var G=jx(_),j=C.exec;return j===nN||j===g1.exec?c&&!I?{done:!0,value:a(C,L,M)}:{done:!0,value:G(L,C,M)}:{done:!1}});Gx(String.prototype,i,g[0]),Gx(g1,l,g[1])}s&&sN(g1[l],"sham",!0)},y1=fn,oN=gf,AN=gA,lN=pA,cN=y1("".charAt),Kx=y1("".charCodeAt),uN=y1("".slice),Wx=function(i){return function(e,t){var s=AN(lN(e)),l=oN(t),c=s.length,p,a;return l<0||l>=c?i?"":void 0:(p=Kx(s,l),p<55296||p>56319||l+1===c||(a=Kx(s,l+1))<56320||a>57343?i?cN(s,l):p:i?uN(s,l,l+2):(p-55296<<10)+(a-56320)+65536)}},hN={codeAt:Wx(!1),charAt:Wx(!0)},pN=hN.charAt,v1=function(i,e,t){return e+(t?pN(i,e).length:1)},Zx=os,dN=Ss,fN=sn,gN=Ic,mN=Qf,yN=TypeError,_1=function(i,e){var t=i.exec;if(fN(t)){var s=Zx(t,i,e);return s!==null&&dN(s),s}if(gN(i)==="RegExp")return Zx(mN,i,e);throw yN("RegExp#exec called on incompatible receiver")},vN=os,_N=m1,wN=Ss,bN=Lc,xN=Du,w1=gA,BN=pA,CN=Mu,SN=v1,Xx=_1;_N("match",function(i,e,t){return[function(s){var l=BN(this),c=bN(s)?void 0:CN(s,i);return c?vN(c,s,l):new RegExp(s)[i](w1(l))},function(s){var l=wN(this),c=w1(s),p=t(e,l,c);if(p.done)return p.value;if(!l.global)return Xx(l,c);var a=l.unicode;l.lastIndex=0;for(var g=[],_=0,C;(C=Xx(l,c))!==null;){var L=w1(C[0]);g[_]=L,L===""&&(l.lastIndex=SN(c,xN(l.lastIndex),a)),_++}return _===0?null:g}]});var b1=fn,EN=of,FN=Math.floor,x1=b1("".charAt),IN=b1("".replace),B1=b1("".slice),LN=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,TN=/\$([$&'`]|\d{1,2})/g,UN=function(i,e,t,s,l,c){var p=t+i.length,a=s.length,g=TN;return l!==void 0&&(l=EN(l),g=LN),IN(c,g,function(_,C){var L;switch(x1(C,0)){case"$":return"$";case"&":return i;case"`":return B1(e,0,t);case"'":return B1(e,p);case"<":L=l[B1(C,1,-1)];break;default:var M=+C;if(M===0)return _;if(M>a){var I=FN(M/10);return I===0?_:I<=a?s[I-1]===void 0?x1(C,1):s[I-1]+x1(C,1):_}L=s[M-1]}return L===void 0?"":L})},PN=U0,Yx=os,kf=fn,MN=m1,QN=dn,kN=Ss,DN=sn,NN=Lc,ON=gf,RN=Du,Gu=gA,zN=pA,HN=v1,VN=Mu,jN=UN,GN=_1,qN=Gn,C1=qN("replace"),$N=Math.max,KN=Math.min,WN=kf([].concat),S1=kf([].push),Jx=kf("".indexOf),eB=kf("".slice),ZN=function(i){return i===void 0?i:String(i)},XN=function(){return"a".replace(/./,"$0")==="$0"}(),tB=function(){return/./[C1]?/./[C1]("a","$0")==="":!1}(),YN=!QN(function(){var i=/./;return i.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(i,"$<a>")!=="7"});MN("replace",function(i,e,t){var s=tB?"$":"$0";return[function(l,c){var p=zN(this),a=NN(l)?void 0:VN(l,C1);return a?Yx(a,l,p,c):Yx(e,Gu(p),l,c)},function(l,c){var p=kN(this),a=Gu(l);if(typeof c=="string"&&Jx(c,s)===-1&&Jx(c,"$<")===-1){var g=t(e,p,a,c);if(g.done)return g.value}var _=DN(c);_||(c=Gu(c));var C=p.global;if(C){var L=p.unicode;p.lastIndex=0}for(var M=[];;){var I=GN(p,a);if(I===null||(S1(M,I),!C))break;var G=Gu(I[0]);G===""&&(p.lastIndex=HN(a,RN(p.lastIndex),L))}for(var j="",Y=0,q=0;q<M.length;q++){I=M[q];for(var ne=Gu(I[0]),he=$N(KN(ON(I.index),a.length),0),Se=[],Ne=1;Ne<I.length;Ne++)S1(Se,ZN(I[Ne]));var Pe=I.groups;if(_){var Ee=WN([ne],Se,he,a);Pe!==void 0&&S1(Ee,Pe);var fe=Gu(PN(c,void 0,Ee))}else fe=jN(ne,a,he,Se,Pe,c);he>=Y&&(j+=eB(a,Y,he)+fe,Y=he+ne.length)}return j+eB(a,Y)}]},!YN||!XN||tB);var JN=YA,eO=Ic,tO=Gn,rO=tO("match"),rB=function(i){var e;return JN(i)&&((e=i[rO])!==void 0?!!e:eO(i)=="RegExp")},iO=rB,nO=TypeError,E1=function(i){if(iO(i))throw nO("The method doesn't accept regular expressions");return i},sO=Gn,aO=sO("match"),F1=function(i){var e=/./;try{"/./"[i](e)}catch{try{return e[aO]=!1,"/./"[i](e)}catch{}}return!1},oO=Ws,iB=Wh,AO=Pu.f,lO=Du,nB=gA,cO=E1,uO=pA,hO=F1,sB=iB("".startsWith),pO=iB("".slice),dO=Math.min,aB=hO("startsWith"),fO=!aB&&!!function(){var i=AO(String.prototype,"startsWith");return i&&!i.writable}();oO({target:"String",proto:!0,forced:!fO&&!aB},{startsWith:function(i){var e=nB(uO(this));cO(i);var t=lO(dO(arguments.length>1?arguments[1]:void 0,e.length)),s=nB(i);return sB?sB(e,s,t):pO(e,t,t+s.length)===s}});var gO=Gn,mO=u1,yO=dA.f,I1=gO("unscopables"),L1=Array.prototype;L1[I1]==null&&yO(L1,I1,{configurable:!0,value:mO(null)});var vO=function(i){L1[I1][i]=!0},_O=dn,wO=!_O(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype}),bO=bo,xO=sn,BO=of,CO=v0,SO=wO,oB=CO("IE_PROTO"),T1=Object,EO=T1.prototype,AB=SO?T1.getPrototypeOf:function(i){var e=BO(i);if(bO(e,oB))return e[oB];var t=e.constructor;return xO(t)&&e instanceof t?t.prototype:e instanceof T1?EO:null},FO=dn,IO=sn,LO=YA,lB=AB,TO=Uc,UO=Gn,U1=UO("iterator"),cB=!1,kc,P1,M1;[].keys&&(M1=[].keys(),"next"in M1?(P1=lB(lB(M1)),P1!==Object.prototype&&(kc=P1)):cB=!0);var PO=!LO(kc)||FO(function(){var i={};return kc[U1].call(i)!==i});PO&&(kc={}),IO(kc[U1])||TO(kc,U1,function(){return this});var uB={IteratorPrototype:kc,BUGGY_SAFARI_ITERATORS:cB},MO=uB.IteratorPrototype,QO=u1,kO=tf,DO=I0,NO=ep,OO=function(){return this},RO=function(i,e,t,s){var l=e+" Iterator";return i.prototype=QO(MO,{next:kO(+!s,t)}),DO(i,l,!1),NO[l]=OO,i},zO=Ws,HO=os,hB=cf,VO=sn,jO=RO,pB=AB,dB=yb,GO=I0,qO=jh,Q1=Uc,$O=Gn,KO=ep,fB=uB,WO=hB.PROPER,ZO=hB.CONFIGURABLE,gB=fB.IteratorPrototype,Df=fB.BUGGY_SAFARI_ITERATORS,tp=$O("iterator"),mB="keys",rp="values",yB="entries",XO=function(){return this},YO=function(i,e,t,s,l,c,p){jO(t,e,s);var a=function(q){if(q===l&&M)return M;if(!Df&&q in C)return C[q];switch(q){case mB:return function(){return new t(this,q)};case rp:return function(){return new t(this,q)};case yB:return function(){return new t(this,q)}}return function(){return new t(this)}},g=e+" Iterator",_=!1,C=i.prototype,L=C[tp]||C["@@iterator"]||l&&C[l],M=!Df&&L||a(l),I=e=="Array"&&C.entries||L,G,j,Y;if(I&&(G=pB(I.call(new i)),G!==Object.prototype&&G.next&&(pB(G)!==gB&&(dB?dB(G,gB):VO(G[tp])||Q1(G,tp,XO)),GO(G,g,!0))),WO&&l==rp&&L&&L.name!==rp&&(ZO?qO(C,"name",rp):(_=!0,M=function(){return HO(L,this)})),l)if(j={values:a(rp),keys:c?M:a(mB),entries:a(yB)},p)for(Y in j)(Df||_||!(Y in C))&&Q1(C,Y,j[Y]);else zO({target:e,proto:!0,forced:Df||_},j);return C[tp]!==M&&Q1(C,tp,M,{name:l}),KO[e]=M,j},JO=function(i,e){return{value:i,done:e}},e7=Vh,k1=vO,vB=ep,_B=pf,t7=dA.f,r7=YO,Nf=JO,i7=hA,wB="Array Iterator",n7=_B.set,s7=_B.getterFor(wB),a7=r7(Array,"Array",function(i,e){n7(this,{type:wB,target:e7(i),index:0,kind:e})},function(){var i=s7(this),e=i.target,t=i.kind,s=i.index++;return!e||s>=e.length?(i.target=void 0,Nf(void 0,!0)):t=="keys"?Nf(s,!1):t=="values"?Nf(e[s],!1):Nf([s,e[s]],!1)},"values"),bB=vB.Arguments=vB.Array;if(k1("keys"),k1("values"),k1("entries"),i7&&bB.name!=="values")try{t7(bB,"name",{value:"values"})}catch{}var o7={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},A7=Af,D1=A7("span").classList,xB=D1&&D1.constructor&&D1.constructor.prototype,l7=xB===Object.prototype?void 0:xB,BB=kn,CB=o7,c7=l7,ip=a7,N1=jh,SB=Gn,O1=SB("iterator"),EB=SB("toStringTag"),R1=ip.values,FB=function(i,e){if(i){if(i[O1]!==R1)try{N1(i,O1,R1)}catch{i[O1]=R1}if(i[EB]||N1(i,EB,e),CB[e]){for(var t in ip)if(i[t]!==ip[t])try{N1(i,t,ip[t])}catch{i[t]=ip[t]}}}};for(var z1 in CB)FB(BB[z1]&&BB[z1].prototype,z1);FB(c7,"DOMTokenList");function u7(i,e){if(fi(i)!=="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var s=t.call(i,e||"default");if(fi(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function h7(i){var e=u7(i,"string");return fi(e)==="symbol"?e:String(e)}function H1(i,e,t){return e=h7(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var p7=JA,d7=of,f7=Ew,g7=mf,m7=TypeError,IB=function(i){return function(e,t,s,l){p7(t);var c=d7(e),p=f7(c),a=g7(c),g=i?a-1:0,_=i?-1:1;if(s<2)for(;;){if(g in p){l=p[g],g+=_;break}if(g+=_,i?g<0:a<=g)throw m7("Reduce of empty array with no initial value")}for(;i?g>=0:a>g;g+=_)g in p&&(l=t(l,p[g],g,c));return l}},y7={left:IB(!1),right:IB(!0)},v7=dn,LB=function(i,e){var t=[][i];return!!t&&v7(function(){t.call(null,e||function(){return 1},1)})},_7=Ws,w7=y7.left,b7=LB,TB=t0,x7=$h,B7=!x7&&TB>79&&TB<83,C7=B7||!b7("reduce");_7({target:"Array",proto:!0,forced:C7},{reduce:function(i){var e=arguments.length;return w7(this,i,e,e>1?arguments[1]:void 0)}});var S7=Ws,UB=Wh,E7=Pu.f,F7=Du,PB=gA,I7=E1,L7=pA,T7=F1,MB=UB("".endsWith),U7=UB("".slice),P7=Math.min,QB=T7("endsWith"),M7=!QB&&!!function(){var i=E7(String.prototype,"endsWith");return i&&!i.writable}();S7({target:"String",proto:!0,forced:!M7&&!QB},{endsWith:function(i){var e=PB(L7(this));I7(i);var t=arguments.length>1?arguments[1]:void 0,s=e.length,l=t===void 0?s:P7(F7(t),s),c=PB(i);return MB?MB(e,c,l):U7(e,l-c.length,l)===c}});var Q7=l0,k7=dA,D7=tf,N7=function(i,e,t){var s=Q7(e);s in i?k7.f(i,s,D7(0,t)):i[s]=t},kB=cb,O7=mf,R7=N7,z7=Array,H7=Math.max,V7=function(i,e,t){for(var s=O7(i),l=kB(e,s),c=kB(t===void 0?s:t,s),p=z7(H7(c-l,0)),a=0;l<c;l++,a++)R7(p,a,i[l]);return p.length=a,p},j7=U0,np=os,V1=fn,G7=m1,q7=Ss,$7=Lc,K7=rB,DB=pA,W7=Fb,Z7=v1,X7=Du,j1=gA,Y7=Mu,NB=V7,OB=_1,J7=Qf,eR=Mx,tR=dn,qu=eR.UNSUPPORTED_Y,RB=4294967295,rR=Math.min,zB=[].push,iR=V1(/./.exec),$u=V1(zB),sp=V1("".slice),nR=!tR(function(){var i=/(?:)/,e=i.exec;i.exec=function(){return e.apply(this,arguments)};var t="ab".split(i);return t.length!==2||t[0]!=="a"||t[1]!=="b"});G7("split",function(i,e,t){var s;return"abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?s=function(l,c){var p=j1(DB(this)),a=c===void 0?RB:c>>>0;if(a===0)return[];if(l===void 0)return[p];if(!K7(l))return np(e,p,l,a);for(var g=[],_=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(l.sticky?"y":""),C=0,L=new RegExp(l.source,_+"g"),M,I,G;(M=np(J7,L,p))&&(I=L.lastIndex,!(I>C&&($u(g,sp(p,C,M.index)),M.length>1&&M.index<p.length&&j7(zB,g,NB(M,1)),G=M[0].length,C=I,g.length>=a)));)L.lastIndex===M.index&&L.lastIndex++;return C===p.length?(G||!iR(L,""))&&$u(g,""):$u(g,sp(p,C)),g.length>a?NB(g,0,a):g}:"0".split(void 0,0).length?s=function(l,c){return l===void 0&&c===0?[]:np(e,this,l,c)}:s=e,[function(l,c){var p=DB(this),a=$7(l)?void 0:Y7(l,i);return a?np(a,l,p,c):np(s,j1(p),l,c)},function(l,c){var p=q7(this),a=j1(l),g=t(s,p,a,c,s!==e);if(g.done)return g.value;var _=W7(p,RegExp),C=p.unicode,L=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(qu?"g":"y"),M=new _(qu?"^(?:"+p.source+")":p,L),I=c===void 0?RB:c>>>0;if(I===0)return[];if(a.length===0)return OB(M,a)===null?[a]:[];for(var G=0,j=0,Y=[];j<a.length;){M.lastIndex=qu?0:j;var q=OB(M,qu?sp(a,j):a),ne;if(q===null||(ne=rR(X7(M.lastIndex+(qu?j:0)),a.length))===G)j=Z7(a,j,C);else{if($u(Y,sp(a,G,j)),Y.length===I)return Y;for(var he=1;he<=q.length-1;he++)if($u(Y,q[he]),Y.length===I)return Y;j=G=ne}}return $u(Y,sp(a,G)),Y}]},!nR,qu);var Of={exports:{}},ap={exports:{}};(function(){var i,e,t,s,l,c;typeof performance<"u"&&performance!==null&&performance.now?ap.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(ap.exports=function(){return(i()-l)/1e6},e=process.hrtime,i=function(){var p;return p=e(),p[0]*1e9+p[1]},s=i(),c=process.uptime()*1e9,l=s-c):Date.now?(ap.exports=function(){return Date.now()-t},t=Date.now()):(ap.exports=function(){return new Date().getTime()-t},t=new Date().getTime())}).call(Hh);for(var sR=ap.exports,aR=sR,tl=typeof window>"u"?Hh:window,Rf=["moz","webkit"],Ku="AnimationFrame",Wu=tl["request"+Ku],Ap=tl["cancel"+Ku]||tl["cancelRequest"+Ku],lp=0;!Wu&&lp<Rf.length;lp++)Wu=tl[Rf[lp]+"Request"+Ku],Ap=tl[Rf[lp]+"Cancel"+Ku]||tl[Rf[lp]+"CancelRequest"+Ku];if(!Wu||!Ap){var G1=0,HB=0,Dc=[],oR=1e3/60;Wu=function(i){if(Dc.length===0){var e=aR(),t=Math.max(0,oR-(e-G1));G1=t+e,setTimeout(function(){var s=Dc.slice(0);Dc.length=0;for(var l=0;l<s.length;l++)if(!s[l].cancelled)try{s[l].callback(G1)}catch(c){setTimeout(function(){throw c},0)}},Math.round(t))}return Dc.push({handle:++HB,callback:i,cancelled:!1}),HB},Ap=function(i){for(var e=0;e<Dc.length;e++)Dc[e].handle===i&&(Dc[e].cancelled=!0)}}Of.exports=function(i){return Wu.call(tl,i)},Of.exports.cancel=function(){Ap.apply(tl,arguments)},Of.exports.polyfill=function(i){i||(i=tl),i.requestAnimationFrame=Wu,i.cancelAnimationFrame=Ap};var AR=Of.exports;const q1=_w(AR);var VB=`	
\v\f\r \u2028\u2029\uFEFF`,lR=fn,cR=pA,uR=gA,$1=VB,jB=lR("".replace),hR=RegExp("^["+$1+"]+"),pR=RegExp("(^|[^"+$1+"])["+$1+"]+$"),K1=function(i){return function(e){var t=uR(cR(e));return i&1&&(t=jB(t,hR,"")),i&2&&(t=jB(t,pR,"$1")),t}},dR={start:K1(1),end:K1(2),trim:K1(3)},fR=cf.PROPER,gR=dn,GB=VB,qB="",mR=function(i){return gR(function(){return!!GB[i]()||qB[i]()!==qB||fR&&GB[i].name!==i})},yR=Ws,vR=dR.trim,_R=mR;yR({target:"String",proto:!0,forced:_R("trim")},{trim:function(){return vR(this)}});var wR=function(i){this.ok=!1,this.alpha=1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i=i.replace(/ /g,""),i=i.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};i=e[i]||i;for(var t=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(g){return[parseInt(g[1]),parseInt(g[2]),parseInt(g[3]),parseFloat(g[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(g){return[parseInt(g[1]),parseInt(g[2]),parseInt(g[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(g){return[parseInt(g[1],16),parseInt(g[2],16),parseInt(g[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(g){return[parseInt(g[1]+g[1],16),parseInt(g[2]+g[2],16),parseInt(g[3]+g[3],16)]}}],s=0;s<t.length;s++){var l=t[s].re,c=t[s].process,p=l.exec(i);if(p){var a=c(p);this.r=a[0],this.g=a[1],this.b=a[2],a.length>3&&(this.alpha=a[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var g=this.r.toString(16),_=this.g.toString(16),C=this.b.toString(16);return g.length==1&&(g="0"+g),_.length==1&&(_="0"+_),C.length==1&&(C="0"+C),"#"+g+_+C},this.getHelpXML=function(){for(var g=new Array,_=0;_<t.length;_++)for(var C=t[_].example,L=0;L<C.length;L++)g[g.length]=C[L];for(var M in e)g[g.length]=M;var I=document.createElement("ul");I.setAttribute("id","rgbcolor-examples");for(var _=0;_<g.length;_++)try{var G=document.createElement("li"),j=new RGBColor(g[_]),Y=document.createElement("div");Y.style.cssText="margin: 3px; border: 1px solid black; background:"+j.toHex()+"; color:"+j.toHex(),Y.appendChild(document.createTextNode("test"));var q=document.createTextNode(" "+g[_]+" -> "+j.toRGB()+" -> "+j.toHex());G.appendChild(Y),G.appendChild(q),I.appendChild(G)}catch{}return I}};const W1=_w(wR);var bR=Ws,xR=Wh,BR=hb.indexOf,CR=LB,Z1=xR([].indexOf),$B=!!Z1&&1/Z1([1],1,-0)<0,SR=$B||!CR("indexOf");bR({target:"Array",proto:!0,forced:SR},{indexOf:function(i){var e=arguments.length>1?arguments[1]:void 0;return $B?Z1(this,i,e)||0:BR(this,i,e)}});var ER=Ws,FR=fn,IR=E1,LR=pA,KB=gA,TR=F1,UR=FR("".indexOf);ER({target:"String",proto:!0,forced:!TR("includes")},{includes:function(i){return!!~UR(KB(LR(this)),KB(IR(i)),arguments.length>1?arguments[1]:void 0)}});var PR=Ic,MR=Array.isArray||function(i){return PR(i)=="Array"},QR=Ws,kR=fn,DR=MR,NR=kR([].reverse),WB=[1,2];QR({target:"Array",proto:!0,forced:String(WB)===String(WB.reverse())},{reverse:function(){return DR(this)&&(this.length=this.length),NR(this)}});/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var ZB=function(i,e){return(ZB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])})(i,e)};function XB(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}ZB(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function OR(i){var e="";Array.isArray(i)||(i=[i]);for(var t=0;t<i.length;t++){var s=i[t];if(s.type===It.CLOSE_PATH)e+="z";else if(s.type===It.HORIZ_LINE_TO)e+=(s.relative?"h":"H")+s.x;else if(s.type===It.VERT_LINE_TO)e+=(s.relative?"v":"V")+s.y;else if(s.type===It.MOVE_TO)e+=(s.relative?"m":"M")+s.x+" "+s.y;else if(s.type===It.LINE_TO)e+=(s.relative?"l":"L")+s.x+" "+s.y;else if(s.type===It.CURVE_TO)e+=(s.relative?"c":"C")+s.x1+" "+s.y1+" "+s.x2+" "+s.y2+" "+s.x+" "+s.y;else if(s.type===It.SMOOTH_CURVE_TO)e+=(s.relative?"s":"S")+s.x2+" "+s.y2+" "+s.x+" "+s.y;else if(s.type===It.QUAD_TO)e+=(s.relative?"q":"Q")+s.x1+" "+s.y1+" "+s.x+" "+s.y;else if(s.type===It.SMOOTH_QUAD_TO)e+=(s.relative?"t":"T")+s.x+" "+s.y;else{if(s.type!==It.ARC)throw new Error('Unexpected command type "'+s.type+'" at index '+t+".");e+=(s.relative?"a":"A")+s.rX+" "+s.rY+" "+s.xRot+" "+ +s.lArcFlag+" "+ +s.sweepFlag+" "+s.x+" "+s.y}}return e}function X1(i,e){var t=i[0],s=i[1];return[t*Math.cos(e)-s*Math.sin(e),t*Math.sin(e)+s*Math.cos(e)]}function xo(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var t=0;t<i.length;t++)if(typeof i[t]!="number")throw new Error("assertNumbers arguments["+t+"] is not a number. "+typeof i[t]+" == typeof "+i[t]);return!0}var $l=Math.PI;function Y1(i,e,t){i.lArcFlag=i.lArcFlag===0?0:1,i.sweepFlag=i.sweepFlag===0?0:1;var s=i.rX,l=i.rY,c=i.x,p=i.y;s=Math.abs(i.rX),l=Math.abs(i.rY);var a=X1([(e-c)/2,(t-p)/2],-i.xRot/180*$l),g=a[0],_=a[1],C=Math.pow(g,2)/Math.pow(s,2)+Math.pow(_,2)/Math.pow(l,2);1<C&&(s*=Math.sqrt(C),l*=Math.sqrt(C)),i.rX=s,i.rY=l;var L=Math.pow(s,2)*Math.pow(_,2)+Math.pow(l,2)*Math.pow(g,2),M=(i.lArcFlag!==i.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(s,2)*Math.pow(l,2)-L)/L)),I=s*_/l*M,G=-l*g/s*M,j=X1([I,G],i.xRot/180*$l);i.cX=j[0]+(e+c)/2,i.cY=j[1]+(t+p)/2,i.phi1=Math.atan2((_-G)/l,(g-I)/s),i.phi2=Math.atan2((-_-G)/l,(-g-I)/s),i.sweepFlag===0&&i.phi2>i.phi1&&(i.phi2-=2*$l),i.sweepFlag===1&&i.phi2<i.phi1&&(i.phi2+=2*$l),i.phi1*=180/$l,i.phi2*=180/$l}function YB(i,e,t){xo(i,e,t);var s=i*i+e*e-t*t;if(0>s)return[];if(s===0)return[[i*t/(i*i+e*e),e*t/(i*i+e*e)]];var l=Math.sqrt(s);return[[(i*t+e*l)/(i*i+e*e),(e*t-i*l)/(i*i+e*e)],[(i*t-e*l)/(i*i+e*e),(e*t+i*l)/(i*i+e*e)]]}var Fn,rl=Math.PI/180;function JB(i,e,t){return(1-t)*i+t*e}function e5(i,e,t,s){return i+Math.cos(s/180*$l)*e+Math.sin(s/180*$l)*t}function t5(i,e,t,s){var l=1e-6,c=e-i,p=t-e,a=3*c+3*(s-t)-6*p,g=6*(p-c),_=3*c;return Math.abs(a)<l?[-_/g]:function(C,L,M){M===void 0&&(M=1e-6);var I=C*C/4-L;if(I<-M)return[];if(I<=M)return[-C/2];var G=Math.sqrt(I);return[-C/2-G,-C/2+G]}(g/a,_/a,l)}function r5(i,e,t,s,l){var c=1-l;return i*(c*c*c)+e*(3*c*c*l)+t*(3*c*l*l)+s*(l*l*l)}(function(i){function e(){return l(function(a,g,_){return a.relative&&(a.x1!==void 0&&(a.x1+=g),a.y1!==void 0&&(a.y1+=_),a.x2!==void 0&&(a.x2+=g),a.y2!==void 0&&(a.y2+=_),a.x!==void 0&&(a.x+=g),a.y!==void 0&&(a.y+=_),a.relative=!1),a})}function t(){var a=NaN,g=NaN,_=NaN,C=NaN;return l(function(L,M,I){return L.type&It.SMOOTH_CURVE_TO&&(L.type=It.CURVE_TO,a=isNaN(a)?M:a,g=isNaN(g)?I:g,L.x1=L.relative?M-a:2*M-a,L.y1=L.relative?I-g:2*I-g),L.type&It.CURVE_TO?(a=L.relative?M+L.x2:L.x2,g=L.relative?I+L.y2:L.y2):(a=NaN,g=NaN),L.type&It.SMOOTH_QUAD_TO&&(L.type=It.QUAD_TO,_=isNaN(_)?M:_,C=isNaN(C)?I:C,L.x1=L.relative?M-_:2*M-_,L.y1=L.relative?I-C:2*I-C),L.type&It.QUAD_TO?(_=L.relative?M+L.x1:L.x1,C=L.relative?I+L.y1:L.y1):(_=NaN,C=NaN),L})}function s(){var a=NaN,g=NaN;return l(function(_,C,L){if(_.type&It.SMOOTH_QUAD_TO&&(_.type=It.QUAD_TO,a=isNaN(a)?C:a,g=isNaN(g)?L:g,_.x1=_.relative?C-a:2*C-a,_.y1=_.relative?L-g:2*L-g),_.type&It.QUAD_TO){a=_.relative?C+_.x1:_.x1,g=_.relative?L+_.y1:_.y1;var M=_.x1,I=_.y1;_.type=It.CURVE_TO,_.x1=((_.relative?0:C)+2*M)/3,_.y1=((_.relative?0:L)+2*I)/3,_.x2=(_.x+2*M)/3,_.y2=(_.y+2*I)/3}else a=NaN,g=NaN;return _})}function l(a){var g=0,_=0,C=NaN,L=NaN;return function(M){if(isNaN(C)&&!(M.type&It.MOVE_TO))throw new Error("path must start with moveto");var I=a(M,g,_,C,L);return M.type&It.CLOSE_PATH&&(g=C,_=L),M.x!==void 0&&(g=M.relative?g+M.x:M.x),M.y!==void 0&&(_=M.relative?_+M.y:M.y),M.type&It.MOVE_TO&&(C=g,L=_),I}}function c(a,g,_,C,L,M){return xo(a,g,_,C,L,M),l(function(I,G,j,Y){var q=I.x1,ne=I.x2,he=I.relative&&!isNaN(Y),Se=I.x!==void 0?I.x:he?0:G,Ne=I.y!==void 0?I.y:he?0:j;function Pe(ee){return ee*ee}I.type&It.HORIZ_LINE_TO&&g!==0&&(I.type=It.LINE_TO,I.y=I.relative?0:j),I.type&It.VERT_LINE_TO&&_!==0&&(I.type=It.LINE_TO,I.x=I.relative?0:G),I.x!==void 0&&(I.x=I.x*a+Ne*_+(he?0:L)),I.y!==void 0&&(I.y=Se*g+I.y*C+(he?0:M)),I.x1!==void 0&&(I.x1=I.x1*a+I.y1*_+(he?0:L)),I.y1!==void 0&&(I.y1=q*g+I.y1*C+(he?0:M)),I.x2!==void 0&&(I.x2=I.x2*a+I.y2*_+(he?0:L)),I.y2!==void 0&&(I.y2=ne*g+I.y2*C+(he?0:M));var Ee=a*C-g*_;if(I.xRot!==void 0&&(a!==1||g!==0||_!==0||C!==1))if(Ee===0)delete I.rX,delete I.rY,delete I.xRot,delete I.lArcFlag,delete I.sweepFlag,I.type=It.LINE_TO;else{var fe=I.xRot*Math.PI/180,We=Math.sin(fe),Ke=Math.cos(fe),ce=1/Pe(I.rX),Ae=1/Pe(I.rY),xe=Pe(Ke)*ce+Pe(We)*Ae,_e=2*We*Ke*(ce-Ae),et=Pe(We)*ce+Pe(Ke)*Ae,Je=xe*C*C-_e*g*C+et*g*g,rt=_e*(a*C+g*_)-2*(xe*_*C+et*a*g),Ye=xe*_*_-_e*a*_+et*a*a,it=(Math.atan2(rt,Je-Ye)+Math.PI)%Math.PI/2,nt=Math.sin(it),Bt=Math.cos(it);I.rX=Math.abs(Ee)/Math.sqrt(Je*Pe(Bt)+rt*nt*Bt+Ye*Pe(nt)),I.rY=Math.abs(Ee)/Math.sqrt(Je*Pe(nt)-rt*nt*Bt+Ye*Pe(Bt)),I.xRot=180*it/Math.PI}return I.sweepFlag!==void 0&&0>Ee&&(I.sweepFlag=+!I.sweepFlag),I})}function p(){return function(a){var g={};for(var _ in a)g[_]=a[_];return g}}i.ROUND=function(a){function g(_){return Math.round(_*a)/a}return a===void 0&&(a=1e13),xo(a),function(_){return _.x1!==void 0&&(_.x1=g(_.x1)),_.y1!==void 0&&(_.y1=g(_.y1)),_.x2!==void 0&&(_.x2=g(_.x2)),_.y2!==void 0&&(_.y2=g(_.y2)),_.x!==void 0&&(_.x=g(_.x)),_.y!==void 0&&(_.y=g(_.y)),_.rX!==void 0&&(_.rX=g(_.rX)),_.rY!==void 0&&(_.rY=g(_.rY)),_}},i.TO_ABS=e,i.TO_REL=function(){return l(function(a,g,_){return a.relative||(a.x1!==void 0&&(a.x1-=g),a.y1!==void 0&&(a.y1-=_),a.x2!==void 0&&(a.x2-=g),a.y2!==void 0&&(a.y2-=_),a.x!==void 0&&(a.x-=g),a.y!==void 0&&(a.y-=_),a.relative=!0),a})},i.NORMALIZE_HVZ=function(a,g,_){return a===void 0&&(a=!0),g===void 0&&(g=!0),_===void 0&&(_=!0),l(function(C,L,M,I,G){if(isNaN(I)&&!(C.type&It.MOVE_TO))throw new Error("path must start with moveto");return g&&C.type&It.HORIZ_LINE_TO&&(C.type=It.LINE_TO,C.y=C.relative?0:M),_&&C.type&It.VERT_LINE_TO&&(C.type=It.LINE_TO,C.x=C.relative?0:L),a&&C.type&It.CLOSE_PATH&&(C.type=It.LINE_TO,C.x=C.relative?I-L:I,C.y=C.relative?G-M:G),C.type&It.ARC&&(C.rX===0||C.rY===0)&&(C.type=It.LINE_TO,delete C.rX,delete C.rY,delete C.xRot,delete C.lArcFlag,delete C.sweepFlag),C})},i.NORMALIZE_ST=t,i.QT_TO_C=s,i.INFO=l,i.SANITIZE=function(a){a===void 0&&(a=0),xo(a);var g=NaN,_=NaN,C=NaN,L=NaN;return l(function(M,I,G,j,Y){var q=Math.abs,ne=!1,he=0,Se=0;if(M.type&It.SMOOTH_CURVE_TO&&(he=isNaN(g)?0:I-g,Se=isNaN(_)?0:G-_),M.type&(It.CURVE_TO|It.SMOOTH_CURVE_TO)?(g=M.relative?I+M.x2:M.x2,_=M.relative?G+M.y2:M.y2):(g=NaN,_=NaN),M.type&It.SMOOTH_QUAD_TO?(C=isNaN(C)?I:2*I-C,L=isNaN(L)?G:2*G-L):M.type&It.QUAD_TO?(C=M.relative?I+M.x1:M.x1,L=M.relative?G+M.y1:M.y2):(C=NaN,L=NaN),M.type&It.LINE_COMMANDS||M.type&It.ARC&&(M.rX===0||M.rY===0||!M.lArcFlag)||M.type&It.CURVE_TO||M.type&It.SMOOTH_CURVE_TO||M.type&It.QUAD_TO||M.type&It.SMOOTH_QUAD_TO){var Ne=M.x===void 0?0:M.relative?M.x:M.x-I,Pe=M.y===void 0?0:M.relative?M.y:M.y-G;he=isNaN(C)?M.x1===void 0?he:M.relative?M.x:M.x1-I:C-I,Se=isNaN(L)?M.y1===void 0?Se:M.relative?M.y:M.y1-G:L-G;var Ee=M.x2===void 0?0:M.relative?M.x:M.x2-I,fe=M.y2===void 0?0:M.relative?M.y:M.y2-G;q(Ne)<=a&&q(Pe)<=a&&q(he)<=a&&q(Se)<=a&&q(Ee)<=a&&q(fe)<=a&&(ne=!0)}return M.type&It.CLOSE_PATH&&q(I-j)<=a&&q(G-Y)<=a&&(ne=!0),ne?[]:M})},i.MATRIX=c,i.ROTATE=function(a,g,_){g===void 0&&(g=0),_===void 0&&(_=0),xo(a,g,_);var C=Math.sin(a),L=Math.cos(a);return c(L,C,-C,L,g-g*L+_*C,_-g*C-_*L)},i.TRANSLATE=function(a,g){return g===void 0&&(g=0),xo(a,g),c(1,0,0,1,a,g)},i.SCALE=function(a,g){return g===void 0&&(g=a),xo(a,g),c(a,0,0,g,0,0)},i.SKEW_X=function(a){return xo(a),c(1,0,Math.atan(a),1,0,0)},i.SKEW_Y=function(a){return xo(a),c(1,Math.atan(a),0,1,0,0)},i.X_AXIS_SYMMETRY=function(a){return a===void 0&&(a=0),xo(a),c(-1,0,0,1,a,0)},i.Y_AXIS_SYMMETRY=function(a){return a===void 0&&(a=0),xo(a),c(1,0,0,-1,0,a)},i.A_TO_C=function(){return l(function(a,g,_){return It.ARC===a.type?function(C,L,M){var I,G,j,Y;C.cX||Y1(C,L,M);for(var q=Math.min(C.phi1,C.phi2),ne=Math.max(C.phi1,C.phi2)-q,he=Math.ceil(ne/90),Se=new Array(he),Ne=L,Pe=M,Ee=0;Ee<he;Ee++){var fe=JB(C.phi1,C.phi2,Ee/he),We=JB(C.phi1,C.phi2,(Ee+1)/he),Ke=We-fe,ce=4/3*Math.tan(Ke*rl/4),Ae=[Math.cos(fe*rl)-ce*Math.sin(fe*rl),Math.sin(fe*rl)+ce*Math.cos(fe*rl)],xe=Ae[0],_e=Ae[1],et=[Math.cos(We*rl),Math.sin(We*rl)],Je=et[0],rt=et[1],Ye=[Je+ce*Math.sin(We*rl),rt-ce*Math.cos(We*rl)],it=Ye[0],nt=Ye[1];Se[Ee]={relative:C.relative,type:It.CURVE_TO};var Bt=function(ee,pe){var ye=X1([ee*C.rX,pe*C.rY],C.xRot),Re=ye[0],Ge=ye[1];return[C.cX+Re,C.cY+Ge]};I=Bt(xe,_e),Se[Ee].x1=I[0],Se[Ee].y1=I[1],G=Bt(it,nt),Se[Ee].x2=G[0],Se[Ee].y2=G[1],j=Bt(Je,rt),Se[Ee].x=j[0],Se[Ee].y=j[1],C.relative&&(Se[Ee].x1-=Ne,Se[Ee].y1-=Pe,Se[Ee].x2-=Ne,Se[Ee].y2-=Pe,Se[Ee].x-=Ne,Se[Ee].y-=Pe),Ne=(Y=[Se[Ee].x,Se[Ee].y])[0],Pe=Y[1]}return Se}(a,a.relative?0:g,a.relative?0:_):a})},i.ANNOTATE_ARCS=function(){return l(function(a,g,_){return a.relative&&(g=0,_=0),It.ARC===a.type&&Y1(a,g,_),a})},i.CLONE=p,i.CALCULATE_BOUNDS=function(){var a=function(M){var I={};for(var G in M)I[G]=M[G];return I},g=e(),_=s(),C=t(),L=l(function(M,I,G){var j=C(_(g(a(M))));function Y(nt){nt>L.maxX&&(L.maxX=nt),nt<L.minX&&(L.minX=nt)}function q(nt){nt>L.maxY&&(L.maxY=nt),nt<L.minY&&(L.minY=nt)}if(j.type&It.DRAWING_COMMANDS&&(Y(I),q(G)),j.type&It.HORIZ_LINE_TO&&Y(j.x),j.type&It.VERT_LINE_TO&&q(j.y),j.type&It.LINE_TO&&(Y(j.x),q(j.y)),j.type&It.CURVE_TO){Y(j.x),q(j.y);for(var ne=0,he=t5(I,j.x1,j.x2,j.x);ne<he.length;ne++)0<(it=he[ne])&&1>it&&Y(r5(I,j.x1,j.x2,j.x,it));for(var Se=0,Ne=t5(G,j.y1,j.y2,j.y);Se<Ne.length;Se++)0<(it=Ne[Se])&&1>it&&q(r5(G,j.y1,j.y2,j.y,it))}if(j.type&It.ARC){Y(j.x),q(j.y),Y1(j,I,G);for(var Pe=j.xRot/180*Math.PI,Ee=Math.cos(Pe)*j.rX,fe=Math.sin(Pe)*j.rX,We=-Math.sin(Pe)*j.rY,Ke=Math.cos(Pe)*j.rY,ce=j.phi1<j.phi2?[j.phi1,j.phi2]:-180>j.phi2?[j.phi2+360,j.phi1+360]:[j.phi2,j.phi1],Ae=ce[0],xe=ce[1],_e=function(nt){var Bt=nt[0],ee=nt[1],pe=180*Math.atan2(ee,Bt)/Math.PI;return pe<Ae?pe+360:pe},et=0,Je=YB(We,-Ee,0).map(_e);et<Je.length;et++)(it=Je[et])>Ae&&it<xe&&Y(e5(j.cX,Ee,We,it));for(var rt=0,Ye=YB(Ke,-fe,0).map(_e);rt<Ye.length;rt++){var it;(it=Ye[rt])>Ae&&it<xe&&q(e5(j.cY,fe,Ke,it))}}return M});return L.minX=1/0,L.maxX=-1/0,L.minY=1/0,L.maxY=-1/0,L}})(Fn||(Fn={}));var Bo,i5=function(){function i(){}return i.prototype.round=function(e){return this.transform(Fn.ROUND(e))},i.prototype.toAbs=function(){return this.transform(Fn.TO_ABS())},i.prototype.toRel=function(){return this.transform(Fn.TO_REL())},i.prototype.normalizeHVZ=function(e,t,s){return this.transform(Fn.NORMALIZE_HVZ(e,t,s))},i.prototype.normalizeST=function(){return this.transform(Fn.NORMALIZE_ST())},i.prototype.qtToC=function(){return this.transform(Fn.QT_TO_C())},i.prototype.aToC=function(){return this.transform(Fn.A_TO_C())},i.prototype.sanitize=function(e){return this.transform(Fn.SANITIZE(e))},i.prototype.translate=function(e,t){return this.transform(Fn.TRANSLATE(e,t))},i.prototype.scale=function(e,t){return this.transform(Fn.SCALE(e,t))},i.prototype.rotate=function(e,t,s){return this.transform(Fn.ROTATE(e,t,s))},i.prototype.matrix=function(e,t,s,l,c,p){return this.transform(Fn.MATRIX(e,t,s,l,c,p))},i.prototype.skewX=function(e){return this.transform(Fn.SKEW_X(e))},i.prototype.skewY=function(e){return this.transform(Fn.SKEW_Y(e))},i.prototype.xSymmetry=function(e){return this.transform(Fn.X_AXIS_SYMMETRY(e))},i.prototype.ySymmetry=function(e){return this.transform(Fn.Y_AXIS_SYMMETRY(e))},i.prototype.annotateArcs=function(){return this.transform(Fn.ANNOTATE_ARCS())},i}(),RR=function(i){return i===" "||i==="	"||i==="\r"||i===`
`},n5=function(i){return 48<=i.charCodeAt(0)&&i.charCodeAt(0)<=57},zR=function(i){function e(){var t=i.call(this)||this;return t.curNumber="",t.curCommandType=-1,t.curCommandRelative=!1,t.canParseCommandOrComma=!0,t.curNumberHasExp=!1,t.curNumberHasExpDigits=!1,t.curNumberHasDecimal=!1,t.curArgs=[],t}return XB(e,i),e.prototype.finish=function(t){if(t===void 0&&(t=[]),this.parse(" ",t),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return t},e.prototype.parse=function(t,s){var l=this;s===void 0&&(s=[]);for(var c=function(L){s.push(L),l.curArgs.length=0,l.canParseCommandOrComma=!0},p=0;p<t.length;p++){var a=t[p],g=!(this.curCommandType!==It.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),_=n5(a)&&(this.curNumber==="0"&&a==="0"||g);if(!n5(a)||_)if(a!=="e"&&a!=="E")if(a!=="-"&&a!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(a!=="."||this.curNumberHasExp||this.curNumberHasDecimal||g){if(this.curNumber&&this.curCommandType!==-1){var C=Number(this.curNumber);if(isNaN(C))throw new SyntaxError("Invalid number ending at "+p);if(this.curCommandType===It.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>C)throw new SyntaxError('Expected positive number, got "'+C+'" at index "'+p+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+p+'"')}this.curArgs.push(C),this.curArgs.length===HR[this.curCommandType]&&(It.HORIZ_LINE_TO===this.curCommandType?c({type:It.HORIZ_LINE_TO,relative:this.curCommandRelative,x:C}):It.VERT_LINE_TO===this.curCommandType?c({type:It.VERT_LINE_TO,relative:this.curCommandRelative,y:C}):this.curCommandType===It.MOVE_TO||this.curCommandType===It.LINE_TO||this.curCommandType===It.SMOOTH_QUAD_TO?(c({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),It.MOVE_TO===this.curCommandType&&(this.curCommandType=It.LINE_TO)):this.curCommandType===It.CURVE_TO?c({type:It.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===It.SMOOTH_CURVE_TO?c({type:It.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===It.QUAD_TO?c({type:It.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===It.ARC&&c({type:It.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!RR(a))if(a===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(a!=="+"&&a!=="-"&&a!==".")if(_)this.curNumber=a,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+p+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+a+'" at index '+p+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,a!=="z"&&a!=="Z")if(a==="h"||a==="H")this.curCommandType=It.HORIZ_LINE_TO,this.curCommandRelative=a==="h";else if(a==="v"||a==="V")this.curCommandType=It.VERT_LINE_TO,this.curCommandRelative=a==="v";else if(a==="m"||a==="M")this.curCommandType=It.MOVE_TO,this.curCommandRelative=a==="m";else if(a==="l"||a==="L")this.curCommandType=It.LINE_TO,this.curCommandRelative=a==="l";else if(a==="c"||a==="C")this.curCommandType=It.CURVE_TO,this.curCommandRelative=a==="c";else if(a==="s"||a==="S")this.curCommandType=It.SMOOTH_CURVE_TO,this.curCommandRelative=a==="s";else if(a==="q"||a==="Q")this.curCommandType=It.QUAD_TO,this.curCommandRelative=a==="q";else if(a==="t"||a==="T")this.curCommandType=It.SMOOTH_QUAD_TO,this.curCommandRelative=a==="t";else{if(a!=="a"&&a!=="A")throw new SyntaxError('Unexpected character "'+a+'" at index '+p+".");this.curCommandType=It.ARC,this.curCommandRelative=a==="a"}else s.push({type:It.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=a,this.curNumberHasDecimal=a==="."}else this.curNumber+=a,this.curNumberHasDecimal=!0;else this.curNumber+=a;else this.curNumber+=a,this.curNumberHasExp=!0;else this.curNumber+=a,this.curNumberHasExpDigits=this.curNumberHasExp}return s},e.prototype.transform=function(t){return Object.create(this,{parse:{value:function(s,l){l===void 0&&(l=[]);for(var c=0,p=Object.getPrototypeOf(this).parse.call(this,s);c<p.length;c++){var a=p[c],g=t(a);Array.isArray(g)?l.push.apply(l,g):l.push(g)}return l}}})},e}(i5),It=function(i){function e(t){var s=i.call(this)||this;return s.commands=typeof t=="string"?e.parse(t):t,s}return XB(e,i),e.prototype.encode=function(){return e.encode(this.commands)},e.prototype.getBounds=function(){var t=Fn.CALCULATE_BOUNDS();return this.transform(t),t},e.prototype.transform=function(t){for(var s=[],l=0,c=this.commands;l<c.length;l++){var p=t(c[l]);Array.isArray(p)?s.push.apply(s,p):s.push(p)}return this.commands=s,this},e.encode=function(t){return OR(t)},e.parse=function(t){var s=new zR,l=[];return s.parse(t,l),s.finish(l),l},e.CLOSE_PATH=1,e.MOVE_TO=2,e.HORIZ_LINE_TO=4,e.VERT_LINE_TO=8,e.LINE_TO=16,e.CURVE_TO=32,e.SMOOTH_CURVE_TO=64,e.QUAD_TO=128,e.SMOOTH_QUAD_TO=256,e.ARC=512,e.LINE_COMMANDS=e.LINE_TO|e.HORIZ_LINE_TO|e.VERT_LINE_TO,e.DRAWING_COMMANDS=e.HORIZ_LINE_TO|e.VERT_LINE_TO|e.LINE_TO|e.CURVE_TO|e.SMOOTH_CURVE_TO|e.QUAD_TO|e.SMOOTH_QUAD_TO|e.ARC,e}(i5),HR=((Bo={})[It.MOVE_TO]=2,Bo[It.LINE_TO]=2,Bo[It.HORIZ_LINE_TO]=1,Bo[It.VERT_LINE_TO]=1,Bo[It.CLOSE_PATH]=0,Bo[It.QUAD_TO]=4,Bo[It.SMOOTH_QUAD_TO]=2,Bo[It.CURVE_TO]=6,Bo[It.SMOOTH_CURVE_TO]=4,Bo[It.ARC]=7,Bo),VR=os,jR=bo,GR=rf,qR=Px,s5=RegExp.prototype,$R=function(i){var e=i.flags;return e===void 0&&!("flags"in s5)&&!jR(i,"flags")&&GR(s5,i)?VR(qR,i):e},KR=cf.PROPER,WR=Uc,ZR=Ss,a5=gA,XR=dn,YR=$R,J1="toString",JR=RegExp.prototype,o5=JR[J1],ez=XR(function(){return o5.call({source:"a",flags:"b"})!="/a/b"}),tz=KR&&o5.name!=J1;(ez||tz)&&WR(RegExp.prototype,J1,function(){var i=ZR(this),e=a5(i.source),t=a5(YR(i));return"/"+e+"/"+t},{unsafe:!0});function zf(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zf=function(e){return typeof e}:zf=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zf(i)}function rz(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var iz=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],nz=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function sz(i,e,t,s,l){if(typeof i=="string"&&(i=document.getElementById(i)),!i||zf(i)!=="object"||!("getContext"in i))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var c=i.getContext("2d");try{return c.getImageData(e,t,s,l)}catch(p){throw new Error("unable to access image data: "+p)}}function az(i,e,t,s,l,c){if(!(isNaN(c)||c<1)){c|=0;var p=sz(i,e,t,s,l);p=oz(p,e,t,s,l,c),i.getContext("2d").putImageData(p,e,t)}}function oz(i,e,t,s,l,c){for(var p=i.data,a=2*c+1,g=s-1,_=l-1,C=c+1,L=C*(C+1)/2,M=new A5,I=M,G,j=1;j<a;j++)I=I.next=new A5,j===C&&(G=I);I.next=M;for(var Y=null,q=null,ne=0,he=0,Se=iz[c],Ne=nz[c],Pe=0;Pe<l;Pe++){I=M;for(var Ee=p[he],fe=p[he+1],We=p[he+2],Ke=p[he+3],ce=0;ce<C;ce++)I.r=Ee,I.g=fe,I.b=We,I.a=Ke,I=I.next;for(var Ae=0,xe=0,_e=0,et=0,Je=C*Ee,rt=C*fe,Ye=C*We,it=C*Ke,nt=L*Ee,Bt=L*fe,ee=L*We,pe=L*Ke,ye=1;ye<C;ye++){var Re=he+((g<ye?g:ye)<<2),Ge=p[Re],tt=p[Re+1],st=p[Re+2],ot=p[Re+3],Ct=C-ye;nt+=(I.r=Ge)*Ct,Bt+=(I.g=tt)*Ct,ee+=(I.b=st)*Ct,pe+=(I.a=ot)*Ct,Ae+=Ge,xe+=tt,_e+=st,et+=ot,I=I.next}Y=M,q=G;for(var Et=0;Et<s;Et++){var zt=pe*Se>>Ne;if(p[he+3]=zt,zt!==0){var Vt=255/zt;p[he]=(nt*Se>>Ne)*Vt,p[he+1]=(Bt*Se>>Ne)*Vt,p[he+2]=(ee*Se>>Ne)*Vt}else p[he]=p[he+1]=p[he+2]=0;nt-=Je,Bt-=rt,ee-=Ye,pe-=it,Je-=Y.r,rt-=Y.g,Ye-=Y.b,it-=Y.a;var Jt=Et+c+1;Jt=ne+(Jt<g?Jt:g)<<2,Ae+=Y.r=p[Jt],xe+=Y.g=p[Jt+1],_e+=Y.b=p[Jt+2],et+=Y.a=p[Jt+3],nt+=Ae,Bt+=xe,ee+=_e,pe+=et,Y=Y.next;var ft=q,Me=ft.r,fr=ft.g,Xt=ft.b,bt=ft.a;Je+=Me,rt+=fr,Ye+=Xt,it+=bt,Ae-=Me,xe-=fr,_e-=Xt,et-=bt,q=q.next,he+=4}ne+=s}for(var ze=0;ze<s;ze++){he=ze<<2;var Ut=p[he],Pt=p[he+1],Mt=p[he+2],Lt=p[he+3],hr=C*Ut,wr=C*Pt,Lr=C*Mt,qr=C*Lt,gr=L*Ut,br=L*Pt,Rt=L*Mt,vt=L*Lt;I=M;for(var Cr=0;Cr<C;Cr++)I.r=Ut,I.g=Pt,I.b=Mt,I.a=Lt,I=I.next;for(var Tr=s,Dr=0,Vr=0,xt=0,$t=0,rr=1;rr<=c;rr++){he=Tr+ze<<2;var Or=C-rr;gr+=(I.r=Ut=p[he])*Or,br+=(I.g=Pt=p[he+1])*Or,Rt+=(I.b=Mt=p[he+2])*Or,vt+=(I.a=Lt=p[he+3])*Or,$t+=Ut,Dr+=Pt,Vr+=Mt,xt+=Lt,I=I.next,rr<_&&(Tr+=s)}he=ze,Y=M,q=G;for(var bi=0;bi<l;bi++){var Nt=he<<2;p[Nt+3]=Lt=vt*Se>>Ne,Lt>0?(Lt=255/Lt,p[Nt]=(gr*Se>>Ne)*Lt,p[Nt+1]=(br*Se>>Ne)*Lt,p[Nt+2]=(Rt*Se>>Ne)*Lt):p[Nt]=p[Nt+1]=p[Nt+2]=0,gr-=hr,br-=wr,Rt-=Lr,vt-=qr,hr-=Y.r,wr-=Y.g,Lr-=Y.b,qr-=Y.a,Nt=ze+((Nt=bi+C)<_?Nt:_)*s<<2,gr+=$t+=Y.r=p[Nt],br+=Dr+=Y.g=p[Nt+1],Rt+=Vr+=Y.b=p[Nt+2],vt+=xt+=Y.a=p[Nt+3],Y=Y.next,hr+=Ut=q.r,wr+=Pt=q.g,Lr+=Mt=q.b,qr+=Lt=q.a,$t-=Ut,Dr-=Pt,Vr-=Mt,xt-=Lt,q=q.next,he+=s}}return i}var A5=function i(){rz(this,i),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function Az(){var{DOMParser:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:i,createCanvas(t,s){return new OffscreenCanvas(t,s)},createImage(t){return el(function*(){var s=yield fetch(t),l=yield s.blob(),c=yield createImageBitmap(l);return c})()}};return(typeof DOMParser<"u"||typeof i>"u")&&Reflect.deleteProperty(e,"DOMParser"),e}function lz(i){var{DOMParser:e,canvas:t,fetch:s}=i;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,fetch:s,createCanvas:t.createCanvas,createImage:t.loadImage}}var cz=Object.freeze({__proto__:null,offscreen:Az,node:lz});function Nc(i){return i.replace(/(?!\u3000)\s+/gm," ")}function l5(i){return i.replace(/^[\n \t]+/,"")}function c5(i){return i.replace(/[\n \t]+$/,"")}function ha(i){var e=(i||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[];return e.map(parseFloat)}var uz=/^[A-Z-]+$/;function u5(i){return uz.test(i)?i.toLowerCase():i}function ey(i){var e=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(i)||[];return e[2]||e[3]||e[4]}function h5(i){if(!i.startsWith("rgb"))return i;var e=3,t=i.replace(/\d+(\.\d+)?/g,(s,l)=>e--&&l?String(Math.round(parseFloat(s))):s);return t}var hz=/(\[[^\]]+\])/g,pz=/(#[^\s+>~.[:]+)/g,dz=/(\.[^\s+>~.[:]+)/g,fz=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,gz=/(:[\w-]+\([^)]*\))/gi,mz=/(:[^\s+>~.[:]+)/g,yz=/([^\s+>~.[:]+)/g;function Oc(i,e){var t=e.exec(i);return t?[i.replace(e," "),t.length]:[i,0]}function p5(i){var e=[0,0,0],t=i.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),s=0;return[t,s]=Oc(t,hz),e[1]+=s,[t,s]=Oc(t,pz),e[0]+=s,[t,s]=Oc(t,dz),e[1]+=s,[t,s]=Oc(t,fz),e[2]+=s,[t,s]=Oc(t,gz),e[1]+=s,[t,s]=Oc(t,mz),e[1]+=s,t=t.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[t,s]=Oc(t,yz),e[2]+=s,e.join("")}var Rc=1e-8;function ty(i){return Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2))}function Hf(i,e){return(i[0]*e[0]+i[1]*e[1])/(ty(i)*ty(e))}function ry(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Hf(i,e))}function iy(i){return i*i*i}function ny(i){return 3*i*i*(1-i)}function sy(i){return 3*i*(1-i)*(1-i)}function ay(i){return(1-i)*(1-i)*(1-i)}function oy(i){return i*i}function Ay(i){return 2*i*(1-i)}function ly(i){return(1-i)*(1-i)}class xr{constructor(e,t,s){this.document=e,this.name=t,this.value=s,this.isNormalizedColor=!1}static empty(e){return new xr(e,"EMPTY","")}split(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:t,name:s}=this;return Nc(this.getString()).trim().split(e).map(l=>new xr(t,s,l))}hasValue(e){var{value:t}=this;return t!==null&&t!==""&&(e||t!==0)&&typeof t<"u"}isString(e){var{value:t}=this,s=typeof t=="string";return!s||!e?s:e.test(t)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var e=this.getString();switch(!0){case e.endsWith("px"):case/^[0-9]+$/.test(e):return!0;default:return!1}}setValue(e){return this.value=e,this}getValue(e){return typeof e>"u"||this.hasValue()?this.value:e}getNumber(e){if(!this.hasValue())return typeof e>"u"?0:parseFloat(e);var{value:t}=this,s=parseFloat(t);return this.isString(/%$/)&&(s/=100),s}getString(e){return typeof e>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(e)}getColor(e){var t=this.getString(e);return this.isNormalizedColor||(this.isNormalizedColor=!0,t=h5(t),this.value=t),t}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;var[s,l]=typeof e=="boolean"?[void 0,e]:[e],{viewPort:c}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(c.computeSize("x"),c.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(c.computeSize("x"),c.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*c.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*c.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&l):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*c.computeSize(s);default:{var p=this.getNumber();return t&&p<1?p*c.computeSize(s):p}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var e=this.getString(),t=/#([^)'"]+)/.exec(e);return t&&(t=t[1]),t||(t=e),this.document.definitions[t]}getFillStyleDefinition(e,t){var s=this.getDefinition();if(!s)return null;if(typeof s.createGradient=="function")return s.createGradient(this.document.ctx,e,t);if(typeof s.createPattern=="function"){if(s.getHrefAttribute().hasValue()){var l=s.getAttribute("patternTransform");s=s.getHrefAttribute().getDefinition(),l.hasValue()&&s.getAttribute("patternTransform",!0).setValue(l.value)}return s.createPattern(this.document.ctx,e,t)}return null}getTextBaseline(){return this.hasValue()?xr.textBaselineMapping[this.getString()]:null}addOpacity(e){for(var t=this.getColor(),s=t.length,l=0,c=0;c<s&&(t[c]===","&&l++,l!==3);c++);if(e.hasValue()&&this.isString()&&l!==3){var p=new W1(t);p.ok&&(p.alpha=e.getNumber(),t=p.toRGBA())}return new xr(this.document,this.name,t)}}xr.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class d5{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(e,t){this.viewPorts.push({width:e,height:t})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:e}=this;return e[e.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(e){return typeof e=="number"?e:e==="x"?this.width:e==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}class an{constructor(e,t){this.x=e,this.y=t}static parse(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[s=t,l=t]=ha(e);return new an(s,l)}static parseScale(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[s=t,l=s]=ha(e);return new an(s,l)}static parsePath(e){for(var t=ha(e),s=t.length,l=[],c=0;c<s;c+=2)l.push(new an(t[c],t[c+1]));return l}angleTo(e){return Math.atan2(e.y-this.y,e.x-this.x)}applyTransform(e){var{x:t,y:s}=this,l=t*e[0]+s*e[2]+e[4],c=t*e[1]+s*e[3]+e[5];this.x=l,this.y=c}}class f5{constructor(e){this.screen=e,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:e,onClick:t,onMouseMove:s}=this,l=e.ctx.canvas;l.onclick=t,l.onmousemove=s,this.working=!0}}stop(){if(this.working){var e=this.screen.ctx.canvas;this.working=!1,e.onclick=null,e.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:e,events:t,eventElements:s}=this,{style:l}=e.ctx.canvas;l&&(l.cursor=""),t.forEach((c,p)=>{for(var{run:a}=c,g=s[p];g;)a(g),g=g.parent}),this.events=[],this.eventElements=[]}}checkPath(e,t){if(!(!this.working||!t)){var{events:s,eventElements:l}=this;s.forEach((c,p)=>{var{x:a,y:g}=c;!l[p]&&t.isPointInPath&&t.isPointInPath(a,g)&&(l[p]=e)})}}checkBoundingBox(e,t){if(!(!this.working||!t)){var{events:s,eventElements:l}=this;s.forEach((c,p)=>{var{x:a,y:g}=c;!l[p]&&t.isPointInBox(a,g)&&(l[p]=e)})}}mapXY(e,t){for(var{window:s,ctx:l}=this.screen,c=new an(e,t),p=l.canvas;p;)c.x-=p.offsetLeft,c.y-=p.offsetTop,p=p.offsetParent;return s.scrollX&&(c.x+=s.scrollX),s.scrollY&&(c.y+=s.scrollY),c}onClick(e){var{x:t,y:s}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onclick",x:t,y:s,run(l){l.onClick&&l.onClick()}})}onMouseMove(e){var{x:t,y:s}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onmousemove",x:t,y:s,run(l){l.onMouseMove&&l.onMouseMove()}})}}var g5=typeof window<"u"?window:null,m5=typeof fetch<"u"?fetch.bind(void 0):null;class cp{constructor(e){var{fetch:t=m5,window:s=g5}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.ctx=e,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new d5,this.mouse=new f5(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=s,this.fetch=t}wait(e){this.waits.push(e)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var e=this.waits.every(t=>t());return e&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=e,e}setDefaults(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4}setViewBox(e){var{document:t,ctx:s,aspectRatio:l,width:c,desiredWidth:p,height:a,desiredHeight:g,minX:_=0,minY:C=0,refX:L,refY:M,clip:I=!1,clipX:G=0,clipY:j=0}=e,Y=Nc(l).replace(/^defer\s/,""),[q,ne]=Y.split(" "),he=q||"xMidYMid",Se=ne||"meet",Ne=c/p,Pe=a/g,Ee=Math.min(Ne,Pe),fe=Math.max(Ne,Pe),We=p,Ke=g;Se==="meet"&&(We*=Ee,Ke*=Ee),Se==="slice"&&(We*=fe,Ke*=fe);var ce=new xr(t,"refX",L),Ae=new xr(t,"refY",M),xe=ce.hasValue()&&Ae.hasValue();if(xe&&s.translate(-Ee*ce.getPixels("x"),-Ee*Ae.getPixels("y")),I){var _e=Ee*G,et=Ee*j;s.beginPath(),s.moveTo(_e,et),s.lineTo(c,et),s.lineTo(c,a),s.lineTo(_e,a),s.closePath(),s.clip()}if(!xe){var Je=Se==="meet"&&Ee===Pe,rt=Se==="slice"&&fe===Pe,Ye=Se==="meet"&&Ee===Ne,it=Se==="slice"&&fe===Ne;he.startsWith("xMid")&&(Je||rt)&&s.translate(c/2-We/2,0),he.endsWith("YMid")&&(Ye||it)&&s.translate(0,a/2-Ke/2),he.startsWith("xMax")&&(Je||rt)&&s.translate(c-We,0),he.endsWith("YMax")&&(Ye||it)&&s.translate(0,a-Ke)}switch(!0){case he==="none":s.scale(Ne,Pe);break;case Se==="meet":s.scale(Ee,Ee);break;case Se==="slice":s.scale(fe,fe);break}s.translate(-_,-C)}start(e){var{enableRedraw:t=!1,ignoreMouse:s=!1,ignoreAnimation:l=!1,ignoreDimensions:c=!1,ignoreClear:p=!1,forceRedraw:a,scaleWidth:g,scaleHeight:_,offsetX:C,offsetY:L}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{FRAMERATE:M,mouse:I}=this,G=1e3/M;if(this.frameDuration=G,this.readyPromise=new Promise(he=>{this.resolveReady=he}),this.isReady()&&this.render(e,c,p,g,_,C,L),!!t){var j=Date.now(),Y=j,q=0,ne=()=>{j=Date.now(),q=j-Y,q>=G&&(Y=j-q%G,this.shouldUpdate(l,a)&&(this.render(e,c,p,g,_,C,L),I.runEvents())),this.intervalId=q1(ne)};s||I.start(),this.intervalId=q1(ne)}}stop(){this.intervalId&&(q1.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(e,t){if(!e){var{frameDuration:s}=this,l=this.animations.reduce((c,p)=>p.update(s)||c,!1);if(l)return!0}return!!(typeof t=="function"&&t()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(e,t,s,l,c,p,a){var{CLIENT_WIDTH:g,CLIENT_HEIGHT:_,viewPort:C,ctx:L,isFirstRender:M}=this,I=L.canvas;C.clear(),I.width&&I.height?C.setCurrent(I.width,I.height):C.setCurrent(g,_);var G=e.getStyle("width"),j=e.getStyle("height");!t&&(M||typeof l!="number"&&typeof c!="number")&&(G.hasValue()&&(I.width=G.getPixels("x"),I.style&&(I.style.width="".concat(I.width,"px"))),j.hasValue()&&(I.height=j.getPixels("y"),I.style&&(I.style.height="".concat(I.height,"px"))));var Y=I.clientWidth||I.width,q=I.clientHeight||I.height;if(t&&G.hasValue()&&j.hasValue()&&(Y=G.getPixels("x"),q=j.getPixels("y")),C.setCurrent(Y,q),typeof p=="number"&&e.getAttribute("x",!0).setValue(p),typeof a=="number"&&e.getAttribute("y",!0).setValue(a),typeof l=="number"||typeof c=="number"){var ne=ha(e.getAttribute("viewBox").getString()),he=0,Se=0;if(typeof l=="number"){var Ne=e.getStyle("width");Ne.hasValue()?he=Ne.getPixels("x")/l:isNaN(ne[2])||(he=ne[2]/l)}if(typeof c=="number"){var Pe=e.getStyle("height");Pe.hasValue()?Se=Pe.getPixels("y")/c:isNaN(ne[3])||(Se=ne[3]/c)}he||(he=Se),Se||(Se=he),e.getAttribute("width",!0).setValue(l),e.getAttribute("height",!0).setValue(c);var Ee=e.getStyle("transform",!0,!0);Ee.setValue("".concat(Ee.getString()," scale(").concat(1/he,", ").concat(1/Se,")"))}s||L.clearRect(0,0,Y,q),e.render(L),M&&(this.isFirstRender=!1)}}cp.defaultWindow=g5,cp.defaultFetch=m5;var{defaultFetch:vz}=cp,_z=typeof DOMParser<"u"?DOMParser:null;class Vf{constructor(){var{fetch:e=vz,DOMParser:t=_z}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fetch=e,this.DOMParser=t}parse(e){var t=this;return el(function*(){return e.startsWith("<")?t.parseFromString(e):t.load(e)})()}parseFromString(e){var t=new this.DOMParser;try{return this.checkDocument(t.parseFromString(e,"image/svg+xml"))}catch{return this.checkDocument(t.parseFromString(e,"text/xml"))}}checkDocument(e){var t=e.getElementsByTagName("parsererror")[0];if(t)throw new Error(t.textContent);return e}load(e){var t=this;return el(function*(){var s=yield t.fetch(e),l=yield s.text();return t.parseFromString(l)})()}}class y5{constructor(e,t){this.type="translate",this.point=null,this.point=an.parse(t)}apply(e){var{x:t,y:s}=this.point;e.translate(t||0,s||0)}unapply(e){var{x:t,y:s}=this.point;e.translate(-1*t||0,-1*s||0)}applyToPoint(e){var{x:t,y:s}=this.point;e.applyTransform([1,0,0,1,t||0,s||0])}}class v5{constructor(e,t,s){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var l=ha(t);this.angle=new xr(e,"angle",l[0]),this.originX=s[0],this.originY=s[1],this.cx=l[1]||0,this.cy=l[2]||0}apply(e){var{cx:t,cy:s,originX:l,originY:c,angle:p}=this,a=t+l.getPixels("x"),g=s+c.getPixels("y");e.translate(a,g),e.rotate(p.getRadians()),e.translate(-a,-g)}unapply(e){var{cx:t,cy:s,originX:l,originY:c,angle:p}=this,a=t+l.getPixels("x"),g=s+c.getPixels("y");e.translate(a,g),e.rotate(-1*p.getRadians()),e.translate(-a,-g)}applyToPoint(e){var{cx:t,cy:s,angle:l}=this,c=l.getRadians();e.applyTransform([1,0,0,1,t||0,s||0]),e.applyTransform([Math.cos(c),Math.sin(c),-Math.sin(c),Math.cos(c),0,0]),e.applyTransform([1,0,0,1,-t||0,-s||0])}}class _5{constructor(e,t,s){this.type="scale",this.scale=null,this.originX=null,this.originY=null;var l=an.parseScale(t);(l.x===0||l.y===0)&&(l.x=Rc,l.y=Rc),this.scale=l,this.originX=s[0],this.originY=s[1]}apply(e){var{scale:{x:t,y:s},originX:l,originY:c}=this,p=l.getPixels("x"),a=c.getPixels("y");e.translate(p,a),e.scale(t,s||t),e.translate(-p,-a)}unapply(e){var{scale:{x:t,y:s},originX:l,originY:c}=this,p=l.getPixels("x"),a=c.getPixels("y");e.translate(p,a),e.scale(1/t,1/s||t),e.translate(-p,-a)}applyToPoint(e){var{x:t,y:s}=this.scale;e.applyTransform([t||0,0,0,s||0,0,0])}}class cy{constructor(e,t,s){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=ha(t),this.originX=s[0],this.originY=s[1]}apply(e){var{originX:t,originY:s,matrix:l}=this,c=t.getPixels("x"),p=s.getPixels("y");e.translate(c,p),e.transform(l[0],l[1],l[2],l[3],l[4],l[5]),e.translate(-c,-p)}unapply(e){var{originX:t,originY:s,matrix:l}=this,c=l[0],p=l[2],a=l[4],g=l[1],_=l[3],C=l[5],L=0,M=0,I=1,G=1/(c*(_*I-C*M)-p*(g*I-C*L)+a*(g*M-_*L)),j=t.getPixels("x"),Y=s.getPixels("y");e.translate(j,Y),e.transform(G*(_*I-C*M),G*(C*L-g*I),G*(a*M-p*I),G*(c*I-a*L),G*(p*C-a*_),G*(a*g-c*C)),e.translate(-j,-Y)}applyToPoint(e){e.applyTransform(this.matrix)}}class uy extends cy{constructor(e,t,s){super(e,t,s),this.type="skew",this.angle=null,this.angle=new xr(e,"angle",t)}}class w5 extends uy{constructor(e,t,s){super(e,t,s),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class b5 extends uy{constructor(e,t,s){super(e,t,s),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function wz(i){return Nc(i).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function bz(i){var[e,t]=i.split("(");return[e.trim(),t.trim().replace(")","")]}class Kl{constructor(e,t,s){this.document=e,this.transforms=[];var l=wz(t);l.forEach(c=>{if(c!=="none"){var[p,a]=bz(c),g=Kl.transformTypes[p];typeof g<"u"&&this.transforms.push(new g(this.document,a,s))}})}static fromElement(e,t){var s=t.getStyle("transform",!1,!0),[l,c=l]=t.getStyle("transform-origin",!1,!0).split(),p=[l,c];return s.hasValue()?new Kl(e,s.getString(),p):null}apply(e){for(var{transforms:t}=this,s=t.length,l=0;l<s;l++)t[l].apply(e)}unapply(e){for(var{transforms:t}=this,s=t.length,l=s-1;l>=0;l--)t[l].unapply(e)}applyToPoint(e){for(var{transforms:t}=this,s=t.length,l=0;l<s;l++)t[l].applyToPoint(e)}}Kl.transformTypes={translate:y5,rotate:v5,scale:_5,matrix:cy,skewX:w5,skewY:b5};class Ri{constructor(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.document=e,this.node=t,this.captureTextNodes=s,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!(!t||t.nodeType!==1)){if(Array.from(t.attributes).forEach(a=>{var g=u5(a.nodeName);this.attributes[g]=new xr(e,g,a.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var l=this.getAttribute("style").getString().split(";").map(a=>a.trim());l.forEach(a=>{if(a){var[g,_]=a.split(":").map(C=>C.trim());this.styles[g]=new xr(e,g,_)}})}var{definitions:c}=e,p=this.getAttribute("id");p.hasValue()&&(c[p.getString()]||(c[p.getString()]=this)),Array.from(t.childNodes).forEach(a=>{if(a.nodeType===1)this.addChild(a);else if(s&&(a.nodeType===3||a.nodeType===4)){var g=e.createTextNode(a);g.getText().length>0&&this.addChild(g)}})}}getAttribute(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.attributes[e];if(!s&&t){var l=new xr(this.document,e,"");return this.attributes[e]=l,l}return s||xr.empty(this.document)}getHrefAttribute(){for(var e in this.attributes)if(e==="href"||e.endsWith(":href"))return this.attributes[e];return xr.empty(this.document)}getStyle(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,l=this.styles[e];if(l)return l;var c=this.getAttribute(e);if(c!=null&&c.hasValue())return this.styles[e]=c,c;if(!s){var{parent:p}=this;if(p){var a=p.getStyle(e);if(a!=null&&a.hasValue())return a}}if(t){var g=new xr(this.document,e,"");return this.styles[e]=g,g}return l||xr.empty(this.document)}render(e){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(e.save(),this.getStyle("mask").hasValue()){var t=this.getStyle("mask").getDefinition();t&&(this.applyEffects(e),t.apply(e,this))}else if(this.getStyle("filter").getValue("none")!=="none"){var s=this.getStyle("filter").getDefinition();s&&(this.applyEffects(e),s.apply(e,this))}else this.setContext(e),this.renderChildren(e),this.clearContext(e);e.restore()}}setContext(e){}applyEffects(e){var t=Kl.fromElement(this.document,this);t&&t.apply(e);var s=this.getStyle("clip-path",!1,!0);if(s.hasValue()){var l=s.getDefinition();l&&l.apply(e)}}clearContext(e){}renderChildren(e){this.children.forEach(t=>{t.render(e)})}addChild(e){var t=e instanceof Ri?e:this.document.createElement(e);t.parent=this,Ri.ignoreChildTypes.includes(t.type)||this.children.push(t)}matchesSelector(e){var t,{node:s}=this;if(typeof s.matches=="function")return s.matches(e);var l=(t=s.getAttribute)===null||t===void 0?void 0:t.call(s,"class");return!l||l===""?!1:l.split(" ").some(c=>".".concat(c)===e)}addStylesFromStyleDefinition(){var{styles:e,stylesSpecificity:t}=this.document;for(var s in e)if(!s.startsWith("@")&&this.matchesSelector(s)){var l=e[s],c=t[s];if(l)for(var p in l){var a=this.stylesSpecificity[p];typeof a>"u"&&(a="000"),c>=a&&(this.styles[p]=l[p],this.stylesSpecificity[p]=c)}}}removeStyles(e,t){var s=t.reduce((l,c)=>{var p=e.getStyle(c);if(!p.hasValue())return l;var a=p.getString();return p.setValue(""),[...l,[c,a]]},[]);return s}restoreStyles(e,t){t.forEach(s=>{var[l,c]=s;e.getStyle(l,!0).setValue(c)})}isFirstChild(){var e;return((e=this.parent)===null||e===void 0?void 0:e.children.indexOf(this))===0}}Ri.ignoreChildTypes=["title"];class x5 extends Ri{constructor(e,t,s){super(e,t,s)}}function xz(i){var e=i.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}function Bz(i){return typeof process>"u"?i:i.trim().split(",").map(xz).join(",")}function Cz(i){if(!i)return"";var e=i.trim().toLowerCase();switch(e){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return e;default:return/^oblique\s+(-|)\d+deg$/.test(e)?e:""}}function Sz(i){if(!i)return"";var e=i.trim().toLowerCase();switch(e){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return e;default:return/^[\d.]+$/.test(e)?e:""}}class Es{constructor(e,t,s,l,c,p){var a=p?typeof p=="string"?Es.parse(p):p:{};this.fontFamily=c||a.fontFamily,this.fontSize=l||a.fontSize,this.fontStyle=e||a.fontStyle,this.fontWeight=s||a.fontWeight,this.fontVariant=t||a.fontVariant}static parse(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,s="",l="",c="",p="",a="",g=Nc(e).trim().split(" "),_={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return g.forEach(C=>{switch(!0){case(!_.fontStyle&&Es.styles.includes(C)):C!=="inherit"&&(s=C),_.fontStyle=!0;break;case(!_.fontVariant&&Es.variants.includes(C)):C!=="inherit"&&(l=C),_.fontStyle=!0,_.fontVariant=!0;break;case(!_.fontWeight&&Es.weights.includes(C)):C!=="inherit"&&(c=C),_.fontStyle=!0,_.fontVariant=!0,_.fontWeight=!0;break;case!_.fontSize:C!=="inherit"&&([p]=C.split("/")),_.fontStyle=!0,_.fontVariant=!0,_.fontWeight=!0,_.fontSize=!0;break;default:C!=="inherit"&&(a+=C)}}),new Es(s,l,c,p,a,t)}toString(){return[Cz(this.fontStyle),this.fontVariant,Sz(this.fontWeight),this.fontSize,Bz(this.fontFamily)].join(" ").trim()}}Es.styles="normal|italic|oblique|inherit",Es.variants="normal|small-caps|inherit",Es.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class Ka{constructor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.NaN,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.NaN,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.NaN,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Number.NaN;this.x1=e,this.y1=t,this.x2=s,this.y2=l,this.addPoint(e,t),this.addPoint(s,l)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(e,t){typeof e<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),typeof t<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))}addX(e){this.addPoint(e,null)}addY(e){this.addPoint(null,e)}addBoundingBox(e){if(e){var{x1:t,y1:s,x2:l,y2:c}=e;this.addPoint(t,s),this.addPoint(l,c)}}sumCubic(e,t,s,l,c){return Math.pow(1-e,3)*t+3*Math.pow(1-e,2)*e*s+3*(1-e)*Math.pow(e,2)*l+Math.pow(e,3)*c}bezierCurveAdd(e,t,s,l,c){var p=6*t-12*s+6*l,a=-3*t+9*s-9*l+3*c,g=3*s-3*t;if(a===0){if(p===0)return;var _=-g/p;0<_&&_<1&&(e?this.addX(this.sumCubic(_,t,s,l,c)):this.addY(this.sumCubic(_,t,s,l,c)));return}var C=Math.pow(p,2)-4*g*a;if(!(C<0)){var L=(-p+Math.sqrt(C))/(2*a);0<L&&L<1&&(e?this.addX(this.sumCubic(L,t,s,l,c)):this.addY(this.sumCubic(L,t,s,l,c)));var M=(-p-Math.sqrt(C))/(2*a);0<M&&M<1&&(e?this.addX(this.sumCubic(M,t,s,l,c)):this.addY(this.sumCubic(M,t,s,l,c)))}}addBezierCurve(e,t,s,l,c,p,a,g){this.addPoint(e,t),this.addPoint(a,g),this.bezierCurveAdd(!0,e,s,c,a),this.bezierCurveAdd(!1,t,l,p,g)}addQuadraticCurve(e,t,s,l,c,p){var a=e+.6666666666666666*(s-e),g=t+2/3*(l-t),_=a+1/3*(c-e),C=g+1/3*(p-t);this.addBezierCurve(e,t,a,_,g,C,c,p)}isPointInBox(e,t){var{x1:s,y1:l,x2:c,y2:p}=this;return s<=e&&e<=c&&l<=t&&t<=p}}class Gr extends It{constructor(e){super(e.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new an(0,0),this.control=new an(0,0),this.current=new an(0,0),this.points=[],this.angles=[]}isEnd(){var{i:e,commands:t}=this;return e>=t.length-1}next(){var e=this.commands[++this.i];return this.previousCommand=this.command,this.command=e,e}getPoint(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",s=new an(this.command[e],this.command[t]);return this.makeAbsolute(s)}getAsControlPoint(e,t){var s=this.getPoint(e,t);return this.control=s,s}getAsCurrentPoint(e,t){var s=this.getPoint(e,t);return this.current=s,s}getReflectedControlPoint(){var e=this.previousCommand.type;if(e!==It.CURVE_TO&&e!==It.SMOOTH_CURVE_TO&&e!==It.QUAD_TO&&e!==It.SMOOTH_QUAD_TO)return this.current;var{current:{x:t,y:s},control:{x:l,y:c}}=this,p=new an(2*t-l,2*s-c);return p}makeAbsolute(e){if(this.command.relative){var{x:t,y:s}=this.current;e.x+=t,e.y+=s}return e}addMarker(e,t,s){var{points:l,angles:c}=this;s&&c.length>0&&!c[c.length-1]&&(c[c.length-1]=l[l.length-1].angleTo(s)),this.addMarkerAngle(e,t?t.angleTo(e):null)}addMarkerAngle(e,t){this.points.push(e),this.angles.push(t)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:e}=this,t=e.length,s=0;s<t;s++)if(!e[s]){for(var l=s+1;l<t;l++)if(e[l]){e[s]=e[l];break}}return e}}class Wl extends Ri{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var e=1,t=this;t;){var s=t.getStyle("opacity",!1,!0);s.hasValue(!0)&&(e*=s.getNumber()),t=t.parent}return e}setContext(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!t){var s=this.getStyle("fill"),l=this.getStyle("fill-opacity"),c=this.getStyle("stroke"),p=this.getStyle("stroke-opacity");if(s.isUrlDefinition()){var a=s.getFillStyleDefinition(this,l);a&&(e.fillStyle=a)}else if(s.hasValue()){s.getString()==="currentColor"&&s.setValue(this.getStyle("color").getColor());var g=s.getColor();g!=="inherit"&&(e.fillStyle=g==="none"?"rgba(0,0,0,0)":g)}if(l.hasValue()){var _=new xr(this.document,"fill",e.fillStyle).addOpacity(l).getColor();e.fillStyle=_}if(c.isUrlDefinition()){var C=c.getFillStyleDefinition(this,p);C&&(e.strokeStyle=C)}else if(c.hasValue()){c.getString()==="currentColor"&&c.setValue(this.getStyle("color").getColor());var L=c.getString();L!=="inherit"&&(e.strokeStyle=L==="none"?"rgba(0,0,0,0)":L)}if(p.hasValue()){var M=new xr(this.document,"stroke",e.strokeStyle).addOpacity(p).getString();e.strokeStyle=M}var I=this.getStyle("stroke-width");if(I.hasValue()){var G=I.getPixels();e.lineWidth=G||Rc}var j=this.getStyle("stroke-linecap"),Y=this.getStyle("stroke-linejoin"),q=this.getStyle("stroke-miterlimit"),ne=this.getStyle("stroke-dasharray"),he=this.getStyle("stroke-dashoffset");if(j.hasValue()&&(e.lineCap=j.getString()),Y.hasValue()&&(e.lineJoin=Y.getString()),q.hasValue()&&(e.miterLimit=q.getNumber()),ne.hasValue()&&ne.getString()!=="none"){var Se=ha(ne.getString());typeof e.setLineDash<"u"?e.setLineDash(Se):typeof e.webkitLineDash<"u"?e.webkitLineDash=Se:typeof e.mozDash<"u"&&!(Se.length===1&&Se[0]===0)&&(e.mozDash=Se);var Ne=he.getPixels();typeof e.lineDashOffset<"u"?e.lineDashOffset=Ne:typeof e.webkitLineDashOffset<"u"?e.webkitLineDashOffset=Ne:typeof e.mozDashOffset<"u"&&(e.mozDashOffset=Ne)}}if(this.modifiedEmSizeStack=!1,typeof e.font<"u"){var Pe=this.getStyle("font"),Ee=this.getStyle("font-style"),fe=this.getStyle("font-variant"),We=this.getStyle("font-weight"),Ke=this.getStyle("font-size"),ce=this.getStyle("font-family"),Ae=new Es(Ee.getString(),fe.getString(),We.getString(),Ke.hasValue()?"".concat(Ke.getPixels(!0),"px"):"",ce.getString(),Es.parse(Pe.getString(),e.font));Ee.setValue(Ae.fontStyle),fe.setValue(Ae.fontVariant),We.setValue(Ae.fontWeight),Ke.setValue(Ae.fontSize),ce.setValue(Ae.fontFamily),e.font=Ae.toString(),Ke.isPixels()&&(this.document.emSize=Ke.getPixels(),this.modifiedEmSizeStack=!0)}t||(this.applyEffects(e),e.globalAlpha=this.calculateOpacity())}clearContext(e){super.clearContext(e),this.modifiedEmSizeStack&&this.document.popEmSize()}}class wi extends Wl{constructor(e,t,s){super(e,t,s),this.type="path",this.pathParser=null,this.pathParser=new Gr(this.getAttribute("d").getString())}path(e){var{pathParser:t}=this,s=new Ka;for(t.reset(),e&&e.beginPath();!t.isEnd();)switch(t.next().type){case Gr.MOVE_TO:this.pathM(e,s);break;case Gr.LINE_TO:this.pathL(e,s);break;case Gr.HORIZ_LINE_TO:this.pathH(e,s);break;case Gr.VERT_LINE_TO:this.pathV(e,s);break;case Gr.CURVE_TO:this.pathC(e,s);break;case Gr.SMOOTH_CURVE_TO:this.pathS(e,s);break;case Gr.QUAD_TO:this.pathQ(e,s);break;case Gr.SMOOTH_QUAD_TO:this.pathT(e,s);break;case Gr.ARC:this.pathA(e,s);break;case Gr.CLOSE_PATH:this.pathZ(e,s);break}return s}getBoundingBox(e){return this.path()}getMarkers(){var{pathParser:e}=this,t=e.getMarkerPoints(),s=e.getMarkerAngles(),l=t.map((c,p)=>[c,s[p]]);return l}renderChildren(e){this.path(e),this.document.screen.mouse.checkPath(this,e);var t=this.getStyle("fill-rule");e.fillStyle!==""&&(t.getString("inherit")!=="inherit"?e.fill(t.getString()):e.fill()),e.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(e.save(),e.setTransform(1,0,0,1,0,0),e.stroke(),e.restore()):e.stroke());var s=this.getMarkers();if(s){var l=s.length-1,c=this.getStyle("marker-start"),p=this.getStyle("marker-mid"),a=this.getStyle("marker-end");if(c.isUrlDefinition()){var g=c.getDefinition(),[_,C]=s[0];g.render(e,_,C)}if(p.isUrlDefinition())for(var L=p.getDefinition(),M=1;M<l;M++){var[I,G]=s[M];L.render(e,I,G)}if(a.isUrlDefinition()){var j=a.getDefinition(),[Y,q]=s[l];j.render(e,Y,q)}}}static pathM(e){var t=e.getAsCurrentPoint();return e.start=e.current,{point:t}}pathM(e,t){var{pathParser:s}=this,{point:l}=wi.pathM(s),{x:c,y:p}=l;s.addMarker(l),t.addPoint(c,p),e&&e.moveTo(c,p)}static pathL(e){var{current:t}=e,s=e.getAsCurrentPoint();return{current:t,point:s}}pathL(e,t){var{pathParser:s}=this,{current:l,point:c}=wi.pathL(s),{x:p,y:a}=c;s.addMarker(c,l),t.addPoint(p,a),e&&e.lineTo(p,a)}static pathH(e){var{current:t,command:s}=e,l=new an((s.relative?t.x:0)+s.x,t.y);return e.current=l,{current:t,point:l}}pathH(e,t){var{pathParser:s}=this,{current:l,point:c}=wi.pathH(s),{x:p,y:a}=c;s.addMarker(c,l),t.addPoint(p,a),e&&e.lineTo(p,a)}static pathV(e){var{current:t,command:s}=e,l=new an(t.x,(s.relative?t.y:0)+s.y);return e.current=l,{current:t,point:l}}pathV(e,t){var{pathParser:s}=this,{current:l,point:c}=wi.pathV(s),{x:p,y:a}=c;s.addMarker(c,l),t.addPoint(p,a),e&&e.lineTo(p,a)}static pathC(e){var{current:t}=e,s=e.getPoint("x1","y1"),l=e.getAsControlPoint("x2","y2"),c=e.getAsCurrentPoint();return{current:t,point:s,controlPoint:l,currentPoint:c}}pathC(e,t){var{pathParser:s}=this,{current:l,point:c,controlPoint:p,currentPoint:a}=wi.pathC(s);s.addMarker(a,p,c),t.addBezierCurve(l.x,l.y,c.x,c.y,p.x,p.y,a.x,a.y),e&&e.bezierCurveTo(c.x,c.y,p.x,p.y,a.x,a.y)}static pathS(e){var{current:t}=e,s=e.getReflectedControlPoint(),l=e.getAsControlPoint("x2","y2"),c=e.getAsCurrentPoint();return{current:t,point:s,controlPoint:l,currentPoint:c}}pathS(e,t){var{pathParser:s}=this,{current:l,point:c,controlPoint:p,currentPoint:a}=wi.pathS(s);s.addMarker(a,p,c),t.addBezierCurve(l.x,l.y,c.x,c.y,p.x,p.y,a.x,a.y),e&&e.bezierCurveTo(c.x,c.y,p.x,p.y,a.x,a.y)}static pathQ(e){var{current:t}=e,s=e.getAsControlPoint("x1","y1"),l=e.getAsCurrentPoint();return{current:t,controlPoint:s,currentPoint:l}}pathQ(e,t){var{pathParser:s}=this,{current:l,controlPoint:c,currentPoint:p}=wi.pathQ(s);s.addMarker(p,c,c),t.addQuadraticCurve(l.x,l.y,c.x,c.y,p.x,p.y),e&&e.quadraticCurveTo(c.x,c.y,p.x,p.y)}static pathT(e){var{current:t}=e,s=e.getReflectedControlPoint();e.control=s;var l=e.getAsCurrentPoint();return{current:t,controlPoint:s,currentPoint:l}}pathT(e,t){var{pathParser:s}=this,{current:l,controlPoint:c,currentPoint:p}=wi.pathT(s);s.addMarker(p,c,c),t.addQuadraticCurve(l.x,l.y,c.x,c.y,p.x,p.y),e&&e.quadraticCurveTo(c.x,c.y,p.x,p.y)}static pathA(e){var{current:t,command:s}=e,{rX:l,rY:c,xRot:p,lArcFlag:a,sweepFlag:g}=s,_=p*(Math.PI/180),C=e.getAsCurrentPoint(),L=new an(Math.cos(_)*(t.x-C.x)/2+Math.sin(_)*(t.y-C.y)/2,-Math.sin(_)*(t.x-C.x)/2+Math.cos(_)*(t.y-C.y)/2),M=Math.pow(L.x,2)/Math.pow(l,2)+Math.pow(L.y,2)/Math.pow(c,2);M>1&&(l*=Math.sqrt(M),c*=Math.sqrt(M));var I=(a===g?-1:1)*Math.sqrt((Math.pow(l,2)*Math.pow(c,2)-Math.pow(l,2)*Math.pow(L.y,2)-Math.pow(c,2)*Math.pow(L.x,2))/(Math.pow(l,2)*Math.pow(L.y,2)+Math.pow(c,2)*Math.pow(L.x,2)));isNaN(I)&&(I=0);var G=new an(I*l*L.y/c,I*-c*L.x/l),j=new an((t.x+C.x)/2+Math.cos(_)*G.x-Math.sin(_)*G.y,(t.y+C.y)/2+Math.sin(_)*G.x+Math.cos(_)*G.y),Y=ry([1,0],[(L.x-G.x)/l,(L.y-G.y)/c]),q=[(L.x-G.x)/l,(L.y-G.y)/c],ne=[(-L.x-G.x)/l,(-L.y-G.y)/c],he=ry(q,ne);return Hf(q,ne)<=-1&&(he=Math.PI),Hf(q,ne)>=1&&(he=0),{currentPoint:C,rX:l,rY:c,sweepFlag:g,xAxisRotation:_,centp:j,a1:Y,ad:he}}pathA(e,t){var{pathParser:s}=this,{currentPoint:l,rX:c,rY:p,sweepFlag:a,xAxisRotation:g,centp:_,a1:C,ad:L}=wi.pathA(s),M=1-a?1:-1,I=C+M*(L/2),G=new an(_.x+c*Math.cos(I),_.y+p*Math.sin(I));if(s.addMarkerAngle(G,I-M*Math.PI/2),s.addMarkerAngle(l,I-M*Math.PI),t.addPoint(l.x,l.y),e&&!isNaN(C)&&!isNaN(L)){var j=c>p?c:p,Y=c>p?1:c/p,q=c>p?p/c:1;e.translate(_.x,_.y),e.rotate(g),e.scale(Y,q),e.arc(0,0,j,C,C+L,!!(1-a)),e.scale(1/Y,1/q),e.rotate(-g),e.translate(-_.x,-_.y)}}static pathZ(e){e.current=e.start}pathZ(e,t){wi.pathZ(this.pathParser),e&&t.x1!==t.x2&&t.y1!==t.y2&&e.closePath()}}class hy extends wi{constructor(e,t,s){super(e,t,s),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class il extends Wl{constructor(e,t,s){super(e,t,new.target===il?!0:s),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(e,t);var s=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();s&&(e.textBaseline=s)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(e){if(this.type!=="text")return this.getTElementBoundingBox(e);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e);var t=null;return this.children.forEach((s,l)=>{var c=this.getChildBoundingBox(e,this,this,l);t?t.addBoundingBox(c):t=c}),t}getFontSize(){var{document:e,parent:t}=this,s=Es.parse(e.ctx.font).fontSize,l=t.getStyle("font-size").getNumber(s);return l}getTElementBoundingBox(e){var t=this.getFontSize();return new Ka(this.x,this.y-t,this.x+this.measureText(e),this.y)}getGlyph(e,t,s){var l=t[s],c=null;if(e.isArabic){var p=t.length,a=t[s-1],g=t[s+1],_="isolated";if((s===0||a===" ")&&s<p-1&&g!==" "&&(_="terminal"),s>0&&a!==" "&&s<p-1&&g!==" "&&(_="medial"),s>0&&a!==" "&&(s===p-1||g===" ")&&(_="initial"),typeof e.glyphs[l]<"u"){var C=e.glyphs[l];c=C instanceof hy?C:C[_]}}else c=e.glyphs[l];return c||(c=e.missingGlyph),c}getText(){return""}getTextFromNode(e){var t=e||this.node,s=Array.from(t.parentNode.childNodes),l=s.indexOf(t),c=s.length-1,p=Nc(t.textContent||"");return l===0&&(p=l5(p)),l===c&&(p=c5(p)),p}renderChildren(e){if(this.type!=="text"){this.renderTElementChildren(e);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e),this.children.forEach((s,l)=>{this.renderChild(e,this,this,l)});var{mouse:t}=this.document.screen;t.isWorking()&&t.checkBoundingBox(this,this.getBoundingBox(e))}renderTElementChildren(e){var{document:t,parent:s}=this,l=this.getText(),c=s.getStyle("font-family").getDefinition();if(c){for(var{unitsPerEm:p}=c.fontFace,a=Es.parse(t.ctx.font),g=s.getStyle("font-size").getNumber(a.fontSize),_=s.getStyle("font-style").getString(a.fontStyle),C=g/p,L=c.isRTL?l.split("").reverse().join(""):l,M=ha(s.getAttribute("dx").getString()),I=L.length,G=0;G<I;G++){var j=this.getGlyph(c,L,G);e.translate(this.x,this.y),e.scale(C,-C);var Y=e.lineWidth;e.lineWidth=e.lineWidth*p/g,_==="italic"&&e.transform(1,0,.4,1,0,0),j.render(e),_==="italic"&&e.transform(1,0,-.4,1,0,0),e.lineWidth=Y,e.scale(1/C,-1/C),e.translate(-this.x,-this.y),this.x+=g*(j.horizAdvX||c.horizAdvX)/p,typeof M[G]<"u"&&!isNaN(M[G])&&(this.x+=M[G])}return}var{x:q,y:ne}=this;e.fillStyle&&e.fillText(l,q,ne),e.strokeStyle&&e.strokeText(l,q,ne)}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var e=this.leafTexts[this.textChunkStart],t=e.getStyle("text-anchor").getString("start"),s=!1,l=0;t==="start"&&!s||t==="end"&&s?l=e.x-this.minX:t==="end"&&!s||t==="start"&&s?l=e.x-this.maxX:l=e.x-(this.minX+this.maxX)/2;for(var c=this.textChunkStart;c<this.leafTexts.length;c++)this.leafTexts[c].x+=l;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(e){this.children.forEach((t,s)=>{this.adjustChildCoordinatesRecursiveCore(e,this,this,s)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(e,t,s,l){var c=s.children[l];c.children.length>0?c.children.forEach((p,a)=>{t.adjustChildCoordinatesRecursiveCore(e,t,c,a)}):this.adjustChildCoordinates(e,t,s,l)}adjustChildCoordinates(e,t,s,l){var c=s.children[l];if(typeof c.measureText!="function")return c;e.save(),c.setContext(e,!0);var p=c.getAttribute("x"),a=c.getAttribute("y"),g=c.getAttribute("dx"),_=c.getAttribute("dy"),C=c.getStyle("font-family").getDefinition(),L=!!C&&C.isRTL;l===0&&(p.hasValue()||p.setValue(c.getInheritedAttribute("x")),a.hasValue()||a.setValue(c.getInheritedAttribute("y")),g.hasValue()||g.setValue(c.getInheritedAttribute("dx")),_.hasValue()||_.setValue(c.getInheritedAttribute("dy")));var M=c.measureText(e);return L&&(t.x-=M),p.hasValue()?(t.applyAnchoring(),c.x=p.getPixels("x"),g.hasValue()&&(c.x+=g.getPixels("x"))):(g.hasValue()&&(t.x+=g.getPixels("x")),c.x=t.x),t.x=c.x,L||(t.x+=M),a.hasValue()?(c.y=a.getPixels("y"),_.hasValue()&&(c.y+=_.getPixels("y"))):(_.hasValue()&&(t.y+=_.getPixels("y")),c.y=t.y),t.y=c.y,t.leafTexts.push(c),t.minX=Math.min(t.minX,c.x,c.x+M),t.maxX=Math.max(t.maxX,c.x,c.x+M),c.clearContext(e),e.restore(),c}getChildBoundingBox(e,t,s,l){var c=s.children[l];if(typeof c.getBoundingBox!="function")return null;var p=c.getBoundingBox(e);return p?(c.children.forEach((a,g)=>{var _=t.getChildBoundingBox(e,t,c,g);p.addBoundingBox(_)}),p):null}renderChild(e,t,s,l){var c=s.children[l];c.render(e),c.children.forEach((p,a)=>{t.renderChild(e,t,c,a)})}measureText(e){var{measureCache:t}=this;if(~t)return t;var s=this.getText(),l=this.measureTargetText(e,s);return this.measureCache=l,l}measureTargetText(e,t){if(!t.length)return 0;var{parent:s}=this,l=s.getStyle("font-family").getDefinition();if(l){for(var c=this.getFontSize(),p=l.isRTL?t.split("").reverse().join(""):t,a=ha(s.getAttribute("dx").getString()),g=p.length,_=0,C=0;C<g;C++){var L=this.getGlyph(l,p,C);_+=(L.horizAdvX||l.horizAdvX)*c/l.fontFace.unitsPerEm,typeof a[C]<"u"&&!isNaN(a[C])&&(_+=a[C])}return _}if(!e.measureText)return t.length*10;e.save(),this.setContext(e,!0);var{width:M}=e.measureText(t);return this.clearContext(e),e.restore(),M}getInheritedAttribute(e){for(var t=this;t instanceof il&&t.isFirstChild();){var s=t.parent.getAttribute(e);if(s.hasValue(!0))return s.getValue("0");t=t.parent}return null}}class up extends il{constructor(e,t,s){super(e,t,new.target===up?!0:s),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}getText(){return this.text}}class Ez extends up{constructor(){super(...arguments),this.type="textNode"}}class Zu extends Wl{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(e){var t,{document:s}=this,{screen:l,window:c}=s,p=e.canvas;if(l.setDefaults(e),p.style&&typeof e.font<"u"&&c&&typeof c.getComputedStyle<"u"){e.font=c.getComputedStyle(p).getPropertyValue("font");var a=new xr(s,"fontSize",Es.parse(e.font).fontSize);a.hasValue()&&(s.rootEmSize=a.getPixels("y"),s.emSize=s.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var{width:g,height:_}=l.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var C=this.getAttribute("refX"),L=this.getAttribute("refY"),M=this.getAttribute("viewBox"),I=M.hasValue()?ha(M.getString()):null,G=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",j=0,Y=0,q=0,ne=0;I&&(j=I[0],Y=I[1]),this.root||(g=this.getStyle("width").getPixels("x"),_=this.getStyle("height").getPixels("y"),this.type==="marker"&&(q=j,ne=Y,j=0,Y=0)),l.viewPort.setCurrent(g,_),this.node&&(!this.parent||((t=this.node.parentNode)===null||t===void 0?void 0:t.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(e),e.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),I&&(g=I[2],_=I[3]),s.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:l.viewPort.width,desiredWidth:g,height:l.viewPort.height,desiredHeight:_,minX:j,minY:Y,refX:C.getValue(),refY:L.getValue(),clip:G,clipX:q,clipY:ne}),I&&(l.viewPort.removeCurrent(),l.viewPort.setCurrent(g,_))}clearContext(e){super.clearContext(e),this.document.screen.viewPort.removeCurrent()}resize(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,l=this.getAttribute("width",!0),c=this.getAttribute("height",!0),p=this.getAttribute("viewBox"),a=this.getAttribute("style"),g=l.getNumber(0),_=c.getNumber(0);if(s)if(typeof s=="string")this.getAttribute("preserveAspectRatio",!0).setValue(s);else{var C=this.getAttribute("preserveAspectRatio");C.hasValue()&&C.setValue(C.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(l.setValue(e),c.setValue(t),p.hasValue()||p.setValue("0 0 ".concat(g||e," ").concat(_||t)),a.hasValue()){var L=this.getStyle("width"),M=this.getStyle("height");L.hasValue()&&L.setValue("".concat(e,"px")),M.hasValue()&&M.setValue("".concat(t,"px"))}}}class py extends wi{constructor(){super(...arguments),this.type="rect"}path(e){var t=this.getAttribute("x").getPixels("x"),s=this.getAttribute("y").getPixels("y"),l=this.getStyle("width",!1,!0).getPixels("x"),c=this.getStyle("height",!1,!0).getPixels("y"),p=this.getAttribute("rx"),a=this.getAttribute("ry"),g=p.getPixels("x"),_=a.getPixels("y");if(p.hasValue()&&!a.hasValue()&&(_=g),a.hasValue()&&!p.hasValue()&&(g=_),g=Math.min(g,l/2),_=Math.min(_,c/2),e){var C=4*((Math.sqrt(2)-1)/3);e.beginPath(),c>0&&l>0&&(e.moveTo(t+g,s),e.lineTo(t+l-g,s),e.bezierCurveTo(t+l-g+C*g,s,t+l,s+_-C*_,t+l,s+_),e.lineTo(t+l,s+c-_),e.bezierCurveTo(t+l,s+c-_+C*_,t+l-g+C*g,s+c,t+l-g,s+c),e.lineTo(t+g,s+c),e.bezierCurveTo(t+g-C*g,s+c,t,s+c-_+C*_,t,s+c-_),e.lineTo(t,s+_),e.bezierCurveTo(t,s+_-C*_,t+g-C*g,s,t+g,s),e.closePath())}return new Ka(t,s,t+l,s+c)}getMarkers(){return null}}class B5 extends wi{constructor(){super(...arguments),this.type="circle"}path(e){var t=this.getAttribute("cx").getPixels("x"),s=this.getAttribute("cy").getPixels("y"),l=this.getAttribute("r").getPixels();return e&&l>0&&(e.beginPath(),e.arc(t,s,l,0,Math.PI*2,!1),e.closePath()),new Ka(t-l,s-l,t+l,s+l)}getMarkers(){return null}}class C5 extends wi{constructor(){super(...arguments),this.type="ellipse"}path(e){var t=4*((Math.sqrt(2)-1)/3),s=this.getAttribute("rx").getPixels("x"),l=this.getAttribute("ry").getPixels("y"),c=this.getAttribute("cx").getPixels("x"),p=this.getAttribute("cy").getPixels("y");return e&&s>0&&l>0&&(e.beginPath(),e.moveTo(c+s,p),e.bezierCurveTo(c+s,p+t*l,c+t*s,p+l,c,p+l),e.bezierCurveTo(c-t*s,p+l,c-s,p+t*l,c-s,p),e.bezierCurveTo(c-s,p-t*l,c-t*s,p-l,c,p-l),e.bezierCurveTo(c+t*s,p-l,c+s,p-t*l,c+s,p),e.closePath()),new Ka(c-s,p-l,c+s,p+l)}getMarkers(){return null}}class S5 extends wi{constructor(){super(...arguments),this.type="line"}getPoints(){return[new an(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new an(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(e){var[{x:t,y:s},{x:l,y:c}]=this.getPoints();return e&&(e.beginPath(),e.moveTo(t,s),e.lineTo(l,c)),new Ka(t,s,l,c)}getMarkers(){var[e,t]=this.getPoints(),s=e.angleTo(t);return[[e,s],[t,s]]}}class dy extends wi{constructor(e,t,s){super(e,t,s),this.type="polyline",this.points=[],this.points=an.parsePath(this.getAttribute("points").getString())}path(e){var{points:t}=this,[{x:s,y:l}]=t,c=new Ka(s,l);return e&&(e.beginPath(),e.moveTo(s,l)),t.forEach(p=>{var{x:a,y:g}=p;c.addPoint(a,g),e&&e.lineTo(a,g)}),c}getMarkers(){var{points:e}=this,t=e.length-1,s=[];return e.forEach((l,c)=>{c!==t&&s.push([l,l.angleTo(e[c+1])])}),s.length>0&&s.push([e[e.length-1],s[s.length-1][1]]),s}}class E5 extends dy{constructor(){super(...arguments),this.type="polygon"}path(e){var t=super.path(e),[{x:s,y:l}]=this.points;return e&&(e.lineTo(s,l),e.closePath()),t}}class F5 extends Ri{constructor(){super(...arguments),this.type="pattern"}createPattern(e,t,s){var l=this.getStyle("width").getPixels("x",!0),c=this.getStyle("height").getPixels("y",!0),p=new Zu(this.document,null);p.attributes.viewBox=new xr(this.document,"viewBox",this.getAttribute("viewBox").getValue()),p.attributes.width=new xr(this.document,"width","".concat(l,"px")),p.attributes.height=new xr(this.document,"height","".concat(c,"px")),p.attributes.transform=new xr(this.document,"transform",this.getAttribute("patternTransform").getValue()),p.children=this.children;var a=this.document.createCanvas(l,c),g=a.getContext("2d"),_=this.getAttribute("x"),C=this.getAttribute("y");_.hasValue()&&C.hasValue()&&g.translate(_.getPixels("x",!0),C.getPixels("y",!0)),s.hasValue()?this.styles["fill-opacity"]=s:Reflect.deleteProperty(this.styles,"fill-opacity");for(var L=-1;L<=1;L++)for(var M=-1;M<=1;M++)g.save(),p.attributes.x=new xr(this.document,"x",L*a.width),p.attributes.y=new xr(this.document,"y",M*a.height),p.render(g),g.restore();var I=e.createPattern(a,"repeat");return I}}class I5 extends Ri{constructor(){super(...arguments),this.type="marker"}render(e,t,s){if(t){var{x:l,y:c}=t,p=this.getAttribute("orient").getString("auto"),a=this.getAttribute("markerUnits").getString("strokeWidth");e.translate(l,c),p==="auto"&&e.rotate(s),a==="strokeWidth"&&e.scale(e.lineWidth,e.lineWidth),e.save();var g=new Zu(this.document,null);g.type=this.type,g.attributes.viewBox=new xr(this.document,"viewBox",this.getAttribute("viewBox").getValue()),g.attributes.refX=new xr(this.document,"refX",this.getAttribute("refX").getValue()),g.attributes.refY=new xr(this.document,"refY",this.getAttribute("refY").getValue()),g.attributes.width=new xr(this.document,"width",this.getAttribute("markerWidth").getValue()),g.attributes.height=new xr(this.document,"height",this.getAttribute("markerHeight").getValue()),g.attributes.overflow=new xr(this.document,"overflow",this.getAttribute("overflow").getValue()),g.attributes.fill=new xr(this.document,"fill",this.getAttribute("fill").getColor("black")),g.attributes.stroke=new xr(this.document,"stroke",this.getAttribute("stroke").getValue("none")),g.children=this.children,g.render(e),e.restore(),a==="strokeWidth"&&e.scale(1/e.lineWidth,1/e.lineWidth),p==="auto"&&e.rotate(-s),e.translate(-l,-c)}}}class L5 extends Ri{constructor(){super(...arguments),this.type="defs"}render(){}}class jf extends Wl{constructor(){super(...arguments),this.type="g"}getBoundingBox(e){var t=new Ka;return this.children.forEach(s=>{t.addBoundingBox(s.getBoundingBox(e))}),t}}class fy extends Ri{constructor(e,t,s){super(e,t,s),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:l,children:c}=this;c.forEach(p=>{p.type==="stop"&&l.push(p)})}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(e,t,s){var l=this;this.getHrefAttribute().hasValue()&&(l=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(l));var{stops:c}=l,p=this.getGradient(e,t);if(!p)return this.addParentOpacity(s,c[c.length-1].color);if(c.forEach(Y=>{p.addColorStop(Y.offset,this.addParentOpacity(s,Y.color))}),this.getAttribute("gradientTransform").hasValue()){var{document:a}=this,{MAX_VIRTUAL_PIXELS:g,viewPort:_}=a.screen,[C]=_.viewPorts,L=new py(a,null);L.attributes.x=new xr(a,"x",-g/3),L.attributes.y=new xr(a,"y",-g/3),L.attributes.width=new xr(a,"width",g),L.attributes.height=new xr(a,"height",g);var M=new jf(a,null);M.attributes.transform=new xr(a,"transform",this.getAttribute("gradientTransform").getValue()),M.children=[L];var I=new Zu(a,null);I.attributes.x=new xr(a,"x",0),I.attributes.y=new xr(a,"y",0),I.attributes.width=new xr(a,"width",C.width),I.attributes.height=new xr(a,"height",C.height),I.children=[M];var G=a.createCanvas(C.width,C.height),j=G.getContext("2d");return j.fillStyle=p,I.render(j),j.createPattern(G,"no-repeat")}return p}inheritStopContainer(e){this.attributesToInherit.forEach(t=>{!this.getAttribute(t).hasValue()&&e.getAttribute(t).hasValue()&&this.getAttribute(t,!0).setValue(e.getAttribute(t).getValue())})}addParentOpacity(e,t){if(e.hasValue()){var s=new xr(this.document,"color",t);return s.addOpacity(e).getColor()}return t}}class T5 extends fy{constructor(e,t,s){super(e,t,s),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(e,t){var s=this.getGradientUnits()==="objectBoundingBox",l=s?t.getBoundingBox(e):null;if(s&&!l)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var c=s?l.x+l.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),p=s?l.y+l.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),a=s?l.x+l.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),g=s?l.y+l.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return c===a&&p===g?null:e.createLinearGradient(c,p,a,g)}}class U5 extends fy{constructor(e,t,s){super(e,t,s),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(e,t){var s=this.getGradientUnits()==="objectBoundingBox",l=t.getBoundingBox(e);if(s&&!l)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var c=s?l.x+l.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),p=s?l.y+l.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),a=c,g=p;this.getAttribute("fx").hasValue()&&(a=s?l.x+l.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(g=s?l.y+l.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var _=s?(l.width+l.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),C=this.getAttribute("fr").getPixels();return e.createRadialGradient(a,g,C,c,p,_)}}class P5 extends Ri{constructor(e,t,s){super(e,t,s),this.type="stop";var l=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),c=this.getStyle("stop-opacity"),p=this.getStyle("stop-color",!0);p.getString()===""&&p.setValue("#000"),c.hasValue()&&(p=p.addOpacity(c)),this.offset=l,this.color=p.getColor()}}class Gf extends Ri{constructor(e,t,s){super(e,t,s),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,e.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new xr(e,"values",null);var l=this.getAttribute("values");l.hasValue()&&this.values.setValue(l.getString().split(";"))}getProperty(){var e=this.getAttribute("attributeType").getString(),t=this.getAttribute("attributeName").getString();return e==="CSS"?this.parent.getStyle(t,!0):this.parent.getAttribute(t,!0)}calcValue(){var{initialUnits:e}=this,{progress:t,from:s,to:l}=this.getProgress(),c=s.getNumber()+(l.getNumber()-s.getNumber())*t;return e==="%"&&(c*=100),"".concat(c).concat(e)}update(e){var{parent:t}=this,s=this.getProperty();if(this.initialValue||(this.initialValue=s.getString(),this.initialUnits=s.getUnits()),this.duration>this.maxDuration){var l=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(l==="freeze"&&!this.frozen)this.frozen=!0,t.animationFrozen=!0,t.animationFrozenValue=s.getString();else if(l==="remove"&&!this.removed)return this.removed=!0,s.setValue(t.animationFrozen?t.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=e;var c=!1;if(this.begin<this.duration){var p=this.calcValue(),a=this.getAttribute("type");if(a.hasValue()){var g=a.getString();p="".concat(g,"(").concat(p,")")}s.setValue(p),c=!0}return c}getProgress(){var{document:e,values:t}=this,s={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(t.hasValue()){var l=s.progress*(t.getValue().length-1),c=Math.floor(l),p=Math.ceil(l);s.from=new xr(e,"from",parseFloat(t.getValue()[c])),s.to=new xr(e,"to",parseFloat(t.getValue()[p])),s.progress=(l-c)/(p-c)}else s.from=this.from,s.to=this.to;return s}}class M5 extends Gf{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var{progress:e,from:t,to:s}=this.getProgress(),l=new W1(t.getColor()),c=new W1(s.getColor());if(l.ok&&c.ok){var p=l.r+(c.r-l.r)*e,a=l.g+(c.g-l.g)*e,g=l.b+(c.b-l.b)*e;return"rgb(".concat(Math.floor(p),", ").concat(Math.floor(a),", ").concat(Math.floor(g),")")}return this.getAttribute("from").getColor()}}class Q5 extends Gf{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:e,from:t,to:s}=this.getProgress(),l=ha(t.getString()),c=ha(s.getString()),p=l.map((a,g)=>{var _=c[g];return a+(_-a)*e}).join(" ");return p}}class k5 extends Ri{constructor(e,t,s){super(e,t,s),this.type="font",this.glyphs={},this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var{definitions:l}=e,{children:c}=this;for(var p of c)switch(p.type){case"font-face":{this.fontFace=p;var a=p.getStyle("font-family");a.hasValue()&&(l[a.getString()]=this);break}case"missing-glyph":this.missingGlyph=p;break;case"glyph":{var g=p;g.arabicForm?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[g.unicode]>"u"&&(this.glyphs[g.unicode]={}),this.glyphs[g.unicode][g.arabicForm]=g):this.glyphs[g.unicode]=g;break}}}render(){}}class D5 extends Ri{constructor(e,t,s){super(e,t,s),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class N5 extends wi{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}}class O5 extends il{constructor(){super(...arguments),this.type="tref"}getText(){var e=this.getHrefAttribute().getDefinition();if(e){var t=e.children[0];if(t)return t.getText()}return""}}class R5 extends il{constructor(e,t,s){super(e,t,s),this.type="a";var{childNodes:l}=t,c=l[0],p=l.length>0&&Array.from(l).every(a=>a.nodeType===3);this.hasText=p,this.text=p?this.getTextFromNode(c):""}getText(){return this.text}renderChildren(e){if(this.hasText){super.renderChildren(e);var{document:t,x:s,y:l}=this,{mouse:c}=t.screen,p=new xr(t,"fontSize",Es.parse(t.ctx.font).fontSize);c.isWorking()&&c.checkBoundingBox(this,new Ka(s,l-p.getPixels("y"),s+this.measureText(e),l))}else if(this.children.length>0){var a=new jf(this.document,null);a.children=this.children,a.parent=this,a.render(e)}}onClick(){var{window:e}=this.document;e&&e.open(this.getHrefAttribute().getString())}onMouseMove(){var e=this.document.ctx;e.canvas.style.cursor="pointer"}}function z5(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable})),t.push.apply(t,s)}return t}function qf(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?z5(Object(t),!0).forEach(function(s){H1(i,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):z5(Object(t)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(t,s))})}return i}class H5 extends il{constructor(e,t,s){super(e,t,s),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);var l=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(l)}getText(){return this.text}path(e){var{dataArray:t}=this;e&&e.beginPath(),t.forEach(s=>{var{type:l,points:c}=s;switch(l){case Gr.LINE_TO:e&&e.lineTo(c[0],c[1]);break;case Gr.MOVE_TO:e&&e.moveTo(c[0],c[1]);break;case Gr.CURVE_TO:e&&e.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case Gr.QUAD_TO:e&&e.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case Gr.ARC:{var[p,a,g,_,C,L,M,I]=c,G=g>_?g:_,j=g>_?1:g/_,Y=g>_?_/g:1;e&&(e.translate(p,a),e.rotate(M),e.scale(j,Y),e.arc(0,0,G,C,C+L,!!(1-I)),e.scale(1/j,1/Y),e.rotate(-M),e.translate(-p,-a));break}case Gr.CLOSE_PATH:e&&e.closePath();break}})}renderChildren(e){this.setTextData(e),e.save();var t=this.parent.getStyle("text-decoration").getString(),s=this.getFontSize(),{glyphInfo:l}=this,c=e.fillStyle;t==="underline"&&e.beginPath(),l.forEach((p,a)=>{var{p0:g,p1:_,rotation:C,text:L}=p;e.save(),e.translate(g.x,g.y),e.rotate(C),e.fillStyle&&e.fillText(L,0,0),e.strokeStyle&&e.strokeText(L,0,0),e.restore(),t==="underline"&&(a===0&&e.moveTo(g.x,g.y+s/8),e.lineTo(_.x,_.y+s/5))}),t==="underline"&&(e.lineWidth=s/20,e.strokeStyle=c,e.stroke(),e.closePath()),e.restore()}getLetterSpacingAt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[e]||0}findSegmentToFitChar(e,t,s,l,c,p,a,g,_){var C=p,L=this.measureText(e,g);g===" "&&t==="justify"&&s<l&&(L+=(l-s)/c),_>-1&&(C+=this.getLetterSpacingAt(_));var M=this.textHeight/20,I=this.getEquidistantPointOnPath(C,M,0),G=this.getEquidistantPointOnPath(C+L,M,0),j={p0:I,p1:G},Y=I&&G?Math.atan2(G.y-I.y,G.x-I.x):0;if(a){var q=Math.cos(Math.PI/2+Y)*a,ne=Math.cos(-Y)*a;j.p0=qf(qf({},I),{},{x:I.x+q,y:I.y+ne}),j.p1=qf(qf({},G),{},{x:G.x+q,y:G.y+ne})}return C+=L,{offset:C,segment:j,rotation:Y}}measureText(e,t){var{measuresCache:s}=this,l=t||this.getText();if(s.has(l))return s.get(l);var c=this.measureTargetText(e,l);return s.set(l,c),c}setTextData(e){if(!this.glyphInfo){var t=this.getText(),s=t.split(""),l=t.split(" ").length-1,c=this.parent.getAttribute("dx").split().map(Se=>Se.getPixels("x")),p=this.parent.getAttribute("dy").getPixels("y"),a=this.parent.getStyle("text-anchor").getString("start"),g=this.getStyle("letter-spacing"),_=this.parent.getStyle("letter-spacing"),C=0;!g.hasValue()||g.getValue()==="inherit"?C=_.getPixels():g.hasValue()&&g.getValue()!=="initial"&&g.getValue()!=="unset"&&(C=g.getPixels());var L=[],M=t.length;this.letterSpacingCache=L;for(var I=0;I<M;I++)L.push(typeof c[I]<"u"?c[I]:C);var G=L.reduce((Se,Ne,Pe)=>Pe===0?0:Se+Ne||0,0),j=this.measureText(e),Y=Math.max(j+G,0);this.textWidth=j,this.textHeight=this.getFontSize(),this.glyphInfo=[];var q=this.getPathLength(),ne=this.getStyle("startOffset").getNumber(0)*q,he=0;(a==="middle"||a==="center")&&(he=-Y/2),(a==="end"||a==="right")&&(he=-Y),he+=ne,s.forEach((Se,Ne)=>{var{offset:Pe,segment:Ee,rotation:fe}=this.findSegmentToFitChar(e,a,Y,q,l,he,p,Se,Ne);he=Pe,!(!Ee.p0||!Ee.p1)&&this.glyphInfo.push({text:s[Ne],p0:Ee.p0,p1:Ee.p1,rotation:fe})})}}parsePathData(e){if(this.pathLength=-1,!e)return[];var t=[],{pathParser:s}=e;for(s.reset();!s.isEnd();){var{current:l}=s,c=l?l.x:0,p=l?l.y:0,a=s.next(),g=a.type,_=[];switch(a.type){case Gr.MOVE_TO:this.pathM(s,_);break;case Gr.LINE_TO:g=this.pathL(s,_);break;case Gr.HORIZ_LINE_TO:g=this.pathH(s,_);break;case Gr.VERT_LINE_TO:g=this.pathV(s,_);break;case Gr.CURVE_TO:this.pathC(s,_);break;case Gr.SMOOTH_CURVE_TO:g=this.pathS(s,_);break;case Gr.QUAD_TO:this.pathQ(s,_);break;case Gr.SMOOTH_QUAD_TO:g=this.pathT(s,_);break;case Gr.ARC:_=this.pathA(s);break;case Gr.CLOSE_PATH:wi.pathZ(s);break}a.type!==Gr.CLOSE_PATH?t.push({type:g,points:_,start:{x:c,y:p},pathLength:this.calcLength(c,p,g,_)}):t.push({type:Gr.CLOSE_PATH,points:[],pathLength:0})}return t}pathM(e,t){var{x:s,y:l}=wi.pathM(e).point;t.push(s,l)}pathL(e,t){var{x:s,y:l}=wi.pathL(e).point;return t.push(s,l),Gr.LINE_TO}pathH(e,t){var{x:s,y:l}=wi.pathH(e).point;return t.push(s,l),Gr.LINE_TO}pathV(e,t){var{x:s,y:l}=wi.pathV(e).point;return t.push(s,l),Gr.LINE_TO}pathC(e,t){var{point:s,controlPoint:l,currentPoint:c}=wi.pathC(e);t.push(s.x,s.y,l.x,l.y,c.x,c.y)}pathS(e,t){var{point:s,controlPoint:l,currentPoint:c}=wi.pathS(e);return t.push(s.x,s.y,l.x,l.y,c.x,c.y),Gr.CURVE_TO}pathQ(e,t){var{controlPoint:s,currentPoint:l}=wi.pathQ(e);t.push(s.x,s.y,l.x,l.y)}pathT(e,t){var{controlPoint:s,currentPoint:l}=wi.pathT(e);return t.push(s.x,s.y,l.x,l.y),Gr.QUAD_TO}pathA(e){var{rX:t,rY:s,sweepFlag:l,xAxisRotation:c,centp:p,a1:a,ad:g}=wi.pathA(e);return l===0&&g>0&&(g-=2*Math.PI),l===1&&g<0&&(g+=2*Math.PI),[p.x,p.y,t,s,a,g,c,l]}calcLength(e,t,s,l){var c=0,p=null,a=null,g=0;switch(s){case Gr.LINE_TO:return this.getLineLength(e,t,l[0],l[1]);case Gr.CURVE_TO:for(c=0,p=this.getPointOnCubicBezier(0,e,t,l[0],l[1],l[2],l[3],l[4],l[5]),g=.01;g<=1;g+=.01)a=this.getPointOnCubicBezier(g,e,t,l[0],l[1],l[2],l[3],l[4],l[5]),c+=this.getLineLength(p.x,p.y,a.x,a.y),p=a;return c;case Gr.QUAD_TO:for(c=0,p=this.getPointOnQuadraticBezier(0,e,t,l[0],l[1],l[2],l[3]),g=.01;g<=1;g+=.01)a=this.getPointOnQuadraticBezier(g,e,t,l[0],l[1],l[2],l[3]),c+=this.getLineLength(p.x,p.y,a.x,a.y),p=a;return c;case Gr.ARC:{c=0;var _=l[4],C=l[5],L=l[4]+C,M=Math.PI/180;if(Math.abs(_-L)<M&&(M=Math.abs(_-L)),p=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],_,0),C<0)for(g=_-M;g>L;g-=M)a=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],g,0),c+=this.getLineLength(p.x,p.y,a.x,a.y),p=a;else for(g=_+M;g<L;g+=M)a=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],g,0),c+=this.getLineLength(p.x,p.y,a.x,a.y),p=a;return a=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],L,0),c+=this.getLineLength(p.x,p.y,a.x,a.y),c}}return 0}getPointOnLine(e,t,s,l,c){var p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:t,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:s,g=(c-s)/(l-t+Rc),_=Math.sqrt(e*e/(1+g*g));l<t&&(_*=-1);var C=g*_,L=null;if(l===t)L={x:p,y:a+C};else if((a-s)/(p-t+Rc)===g)L={x:p+_,y:a+C};else{var M=0,I=0,G=this.getLineLength(t,s,l,c);if(G<Rc)return null;var j=(p-t)*(l-t)+(a-s)*(c-s);j/=G*G,M=t+j*(l-t),I=s+j*(c-s);var Y=this.getLineLength(p,a,M,I),q=Math.sqrt(e*e-Y*Y);_=Math.sqrt(q*q/(1+g*g)),l<t&&(_*=-1),C=g*_,L={x:M+_,y:I+C}}return L}getPointOnPath(e){var t=this.getPathLength(),s=0,l=null;if(e<-5e-5||e-5e-5>t)return null;var{dataArray:c}=this;for(var p of c){if(p&&(p.pathLength<5e-5||s+p.pathLength+5e-5<e)){s+=p.pathLength;continue}var a=e-s,g=0;switch(p.type){case Gr.LINE_TO:l=this.getPointOnLine(a,p.start.x,p.start.y,p.points[0],p.points[1],p.start.x,p.start.y);break;case Gr.ARC:{var _=p.points[4],C=p.points[5],L=p.points[4]+C;if(g=_+a/p.pathLength*C,C<0&&g<L||C>=0&&g>L)break;l=this.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],g,p.points[6]);break}case Gr.CURVE_TO:g=a/p.pathLength,g>1&&(g=1),l=this.getPointOnCubicBezier(g,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);break;case Gr.QUAD_TO:g=a/p.pathLength,g>1&&(g=1),l=this.getPointOnQuadraticBezier(g,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3]);break}if(l)return l;break}return null}getLineLength(e,t,s,l){return Math.sqrt((s-e)*(s-e)+(l-t)*(l-t))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((e,t)=>t.pathLength>0?e+t.pathLength:e,0)),this.pathLength}getPointOnCubicBezier(e,t,s,l,c,p,a,g,_){var C=g*iy(e)+p*ny(e)+l*sy(e)+t*ay(e),L=_*iy(e)+a*ny(e)+c*sy(e)+s*ay(e);return{x:C,y:L}}getPointOnQuadraticBezier(e,t,s,l,c,p,a){var g=p*oy(e)+l*Ay(e)+t*ly(e),_=a*oy(e)+c*Ay(e)+s*ly(e);return{x:g,y:_}}getPointOnEllipticalArc(e,t,s,l,c,p){var a=Math.cos(p),g=Math.sin(p),_={x:s*Math.cos(c),y:l*Math.sin(c)};return{x:e+(_.x*a-_.y*g),y:t+(_.x*g+_.y*a)}}buildEquidistantCache(e,t){var s=this.getPathLength(),l=t||.25,c=e||s/100;if(!this.equidistantCache||this.equidistantCache.step!==c||this.equidistantCache.precision!==l){this.equidistantCache={step:c,precision:l,points:[]};for(var p=0,a=0;a<=s;a+=l){var g=this.getPointOnPath(a),_=this.getPointOnPath(a+l);!g||!_||(p+=this.getLineLength(g.x,g.y,_.x,_.y),p>=c&&(this.equidistantCache.points.push({x:g.x,y:g.y,distance:a}),p-=c))}}}getEquidistantPointOnPath(e,t,s){if(this.buildEquidistantCache(t,s),e<0||e-this.getPathLength()>5e-5)return null;var l=Math.round(e/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[l]||null}}var Fz=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class V5 extends Wl{constructor(e,t,s){super(e,t,s),this.type="image",this.loaded=!1;var l=this.getHrefAttribute().getString();if(l){var c=l.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(l);e.images.push(this),c?this.loadSvg(l):this.loadImage(l),this.isSvg=c}}loadImage(e){var t=this;return el(function*(){try{var s=yield t.document.createImage(e);t.image=s}catch(l){console.error('Error while loading image "'.concat(e,'":'),l)}t.loaded=!0})()}loadSvg(e){var t=this;return el(function*(){var s=Fz.exec(e);if(s){var l=s[5];s[4]==="base64"?t.image=atob(l):t.image=decodeURIComponent(l)}else try{var c=yield t.document.fetch(e),p=yield c.text();t.image=p}catch(a){console.error('Error while loading image "'.concat(e,'":'),a)}t.loaded=!0})()}renderChildren(e){var{document:t,image:s,loaded:l}=this,c=this.getAttribute("x").getPixels("x"),p=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),g=this.getStyle("height").getPixels("y");if(!(!l||!s||!a||!g)){if(e.save(),e.translate(c,p),this.isSvg){var _=t.canvg.forkString(e,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:a,scaleHeight:g});_.document.documentElement.parent=this,_.render()}else{var C=this.image;t.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:a,desiredWidth:C.width,height:g,desiredHeight:C.height}),this.loaded&&(typeof C.complete>"u"||C.complete)&&e.drawImage(C,0,0)}e.restore()}}getBoundingBox(){var e=this.getAttribute("x").getPixels("x"),t=this.getAttribute("y").getPixels("y"),s=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");return new Ka(e,t,e+s,t+l)}}class j5 extends Wl{constructor(){super(...arguments),this.type="symbol"}render(e){}}class G5{constructor(e){this.document=e,this.loaded=!1,e.fonts.push(this)}load(e,t){var s=this;return el(function*(){try{var{document:l}=s,c=yield l.canvg.parser.load(t),p=c.getElementsByTagName("font");Array.from(p).forEach(a=>{var g=l.createElement(a);l.definitions[e]=g})}catch(a){console.error('Error while loading font "'.concat(t,'":'),a)}s.loaded=!0})()}}class gy extends Ri{constructor(e,t,s){super(e,t,s),this.type="style";var l=Nc(Array.from(t.childNodes).map(p=>p.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")),c=l.split("}");c.forEach(p=>{var a=p.trim();if(a){var g=a.split("{"),_=g[0].split(","),C=g[1].split(";");_.forEach(L=>{var M=L.trim();if(M){var I=e.styles[M]||{};if(C.forEach(Y=>{var q=Y.indexOf(":"),ne=Y.substr(0,q).trim(),he=Y.substr(q+1,Y.length-q).trim();ne&&he&&(I[ne]=new xr(e,ne,he))}),e.styles[M]=I,e.stylesSpecificity[M]=p5(M),M==="@font-face"){var G=I["font-family"].getString().replace(/"|'/g,""),j=I.src.getString().split(",");j.forEach(Y=>{if(Y.indexOf('format("svg")')>0){var q=ey(Y);q&&new G5(e).load(G,q)}})}}})}})}}gy.parseExternalUrl=ey;class q5 extends Wl{constructor(){super(...arguments),this.type="use"}setContext(e){super.setContext(e);var t=this.getAttribute("x"),s=this.getAttribute("y");t.hasValue()&&e.translate(t.getPixels("x"),0),s.hasValue()&&e.translate(0,s.getPixels("y"))}path(e){var{element:t}=this;t&&t.path(e)}renderChildren(e){var{document:t,element:s}=this;if(s){var l=s;if(s.type==="symbol"&&(l=new Zu(t,null),l.attributes.viewBox=new xr(t,"viewBox",s.getAttribute("viewBox").getString()),l.attributes.preserveAspectRatio=new xr(t,"preserveAspectRatio",s.getAttribute("preserveAspectRatio").getString()),l.attributes.overflow=new xr(t,"overflow",s.getAttribute("overflow").getString()),l.children=s.children,s.styles.opacity=new xr(t,"opacity",this.calculateOpacity())),l.type==="svg"){var c=this.getStyle("width",!1,!0),p=this.getStyle("height",!1,!0);c.hasValue()&&(l.attributes.width=new xr(t,"width",c.getString())),p.hasValue()&&(l.attributes.height=new xr(t,"height",p.getString()))}var a=l.parent;l.parent=this,l.render(e),l.parent=a}}getBoundingBox(e){var{element:t}=this;return t?t.getBoundingBox(e):null}elementTransform(){var{document:e,element:t}=this;return Kl.fromElement(e,t)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}function $f(i,e,t,s,l,c){return i[t*s*4+e*4+c]}function Kf(i,e,t,s,l,c,p){i[t*s*4+e*4+c]=p}function In(i,e,t){var s=i[e];return s*t}function nl(i,e,t,s){return e+Math.cos(i)*t+Math.sin(i)*s}class my extends Ri{constructor(e,t,s){super(e,t,s),this.type="feColorMatrix";var l=ha(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{var c=l[0];l=[.213+.787*c,.715-.715*c,.072-.072*c,0,0,.213-.213*c,.715+.285*c,.072-.072*c,0,0,.213-.213*c,.715-.715*c,.072+.928*c,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{var p=l[0]*Math.PI/180;l=[nl(p,.213,.787,-.213),nl(p,.715,-.715,-.715),nl(p,.072,-.072,.928),0,0,nl(p,.213,-.213,.143),nl(p,.715,.285,.14),nl(p,.072,-.072,-.283),0,0,nl(p,.213,-.213,-.787),nl(p,.715,-.715,.715),nl(p,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=l,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(e,t,s,l,c){for(var{includeOpacity:p,matrix:a}=this,g=e.getImageData(0,0,l,c),_=0;_<c;_++)for(var C=0;C<l;C++){var L=$f(g.data,C,_,l,c,0),M=$f(g.data,C,_,l,c,1),I=$f(g.data,C,_,l,c,2),G=$f(g.data,C,_,l,c,3),j=In(a,0,L)+In(a,1,M)+In(a,2,I)+In(a,3,G)+In(a,4,1),Y=In(a,5,L)+In(a,6,M)+In(a,7,I)+In(a,8,G)+In(a,9,1),q=In(a,10,L)+In(a,11,M)+In(a,12,I)+In(a,13,G)+In(a,14,1),ne=In(a,15,L)+In(a,16,M)+In(a,17,I)+In(a,18,G)+In(a,19,1);p&&(j=0,Y=0,q=0,ne*=G/255),Kf(g.data,C,_,l,c,0,j),Kf(g.data,C,_,l,c,1,Y),Kf(g.data,C,_,l,c,2,q),Kf(g.data,C,_,l,c,3,ne)}e.clearRect(0,0,l,c),e.putImageData(g,0,0)}}class hp extends Ri{constructor(){super(...arguments),this.type="mask"}apply(e,t){var{document:s}=this,l=this.getAttribute("x").getPixels("x"),c=this.getAttribute("y").getPixels("y"),p=this.getStyle("width").getPixels("x"),a=this.getStyle("height").getPixels("y");if(!p&&!a){var g=new Ka;this.children.forEach(G=>{g.addBoundingBox(G.getBoundingBox(e))}),l=Math.floor(g.x1),c=Math.floor(g.y1),p=Math.floor(g.width),a=Math.floor(g.height)}var _=this.removeStyles(t,hp.ignoreStyles),C=s.createCanvas(l+p,c+a),L=C.getContext("2d");s.screen.setDefaults(L),this.renderChildren(L),new my(s,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(L,0,0,l+p,c+a);var M=s.createCanvas(l+p,c+a),I=M.getContext("2d");s.screen.setDefaults(I),t.render(I),I.globalCompositeOperation="destination-in",I.fillStyle=L.createPattern(C,"no-repeat"),I.fillRect(0,0,l+p,c+a),e.fillStyle=I.createPattern(M,"no-repeat"),e.fillRect(0,0,l+p,c+a),this.restoreStyles(t,_)}render(e){}}hp.ignoreStyles=["mask","transform","clip-path"];var $5=()=>{};class K5 extends Ri{constructor(){super(...arguments),this.type="clipPath"}apply(e){var{document:t}=this,s=Reflect.getPrototypeOf(e),{beginPath:l,closePath:c}=e;s&&(s.beginPath=$5,s.closePath=$5),Reflect.apply(l,e,[]),this.children.forEach(p=>{if(!(typeof p.path>"u")){var a=typeof p.elementTransform<"u"?p.elementTransform():null;a||(a=Kl.fromElement(t,p)),a&&a.apply(e),p.path(e),s&&(s.closePath=c),a&&a.unapply(e)}}),Reflect.apply(c,e,[]),e.clip(),s&&(s.beginPath=l,s.closePath=c)}render(e){}}class pp extends Ri{constructor(){super(...arguments),this.type="filter"}apply(e,t){var{document:s,children:l}=this,c=t.getBoundingBox(e);if(c){var p=0,a=0;l.forEach(q=>{var ne=q.extraFilterDistance||0;p=Math.max(p,ne),a=Math.max(a,ne)});var g=Math.floor(c.width),_=Math.floor(c.height),C=g+2*p,L=_+2*a;if(!(C<1||L<1)){var M=Math.floor(c.x),I=Math.floor(c.y),G=this.removeStyles(t,pp.ignoreStyles),j=s.createCanvas(C,L),Y=j.getContext("2d");s.screen.setDefaults(Y),Y.translate(-M+p,-I+a),t.render(Y),l.forEach(q=>{typeof q.apply=="function"&&q.apply(Y,0,0,C,L)}),e.drawImage(j,0,0,C,L,M-p,I-a,C,L),this.restoreStyles(t,G)}}}render(e){}}pp.ignoreStyles=["filter","transform","clip-path"];class W5 extends Ri{constructor(e,t,s){super(e,t,s),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(e,t,s,l,c){}}class Z5 extends Ri{constructor(){super(...arguments),this.type="feMorphology"}apply(e,t,s,l,c){}}class X5 extends Ri{constructor(){super(...arguments),this.type="feComposite"}apply(e,t,s,l,c){}}class Y5 extends Ri{constructor(e,t,s){super(e,t,s),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(e,t,s,l,c){var{document:p,blurRadius:a}=this,g=p.window?p.window.document.body:null,_=e.canvas;_.id=p.getUniqueId(),g&&(_.style.display="none",g.appendChild(_)),az(_,t,s,l,c,a),g&&g.removeChild(_)}}class J5 extends Ri{constructor(){super(...arguments),this.type="title"}}class eC extends Ri{constructor(){super(...arguments),this.type="desc"}}var Iz={svg:Zu,rect:py,circle:B5,ellipse:C5,line:S5,polyline:dy,polygon:E5,path:wi,pattern:F5,marker:I5,defs:L5,linearGradient:T5,radialGradient:U5,stop:P5,animate:Gf,animateColor:M5,animateTransform:Q5,font:k5,"font-face":D5,"missing-glyph":N5,glyph:hy,text:il,tspan:up,tref:O5,a:R5,textPath:H5,image:V5,g:jf,symbol:j5,style:gy,use:q5,mask:hp,clipPath:K5,filter:pp,feDropShadow:W5,feMorphology:Z5,feComposite:X5,feColorMatrix:my,feGaussianBlur:Y5,title:J5,desc:eC};function tC(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable})),t.push.apply(t,s)}return t}function Lz(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tC(Object(t),!0).forEach(function(s){H1(i,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):tC(Object(t)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(t,s))})}return i}function Tz(i,e){var t=document.createElement("canvas");return t.width=i,t.height=e,t}function Uz(i){return yy.apply(this,arguments)}function yy(){return yy=el(function*(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=document.createElement("img");return e&&(t.crossOrigin="Anonymous"),new Promise((s,l)=>{t.onload=()=>{s(t)},t.onerror=(c,p,a,g,_)=>{l(_)},t.src=i})}),yy.apply(this,arguments)}class sl{constructor(e){var{rootEmSize:t=12,emSize:s=12,createCanvas:l=sl.createCanvas,createImage:c=sl.createImage,anonymousCrossOrigin:p}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.canvg=e,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=e.screen,this.rootEmSize=t,this.emSize=s,this.createCanvas=l,this.createImage=this.bindCreateImage(c,p),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(e,t){return typeof t=="boolean"?(s,l)=>e(s,typeof l=="boolean"?l:t):e}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:e}=this;return e[e.length-1]}set emSize(e){var{emSizeStack:t}=this;t.push(e)}popEmSize(){var{emSizeStack:e}=this;e.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(e=>e.loaded)}isFontsLoaded(){return this.fonts.every(e=>e.loaded)}createDocumentElement(e){var t=this.createElement(e.documentElement);return t.root=!0,t.addStylesFromStyleDefinition(),this.documentElement=t,t}createElement(e){var t=e.nodeName.replace(/^[^:]+:/,""),s=sl.elementTypes[t];return typeof s<"u"?new s(this,e):new x5(this,e)}createTextNode(e){return new Ez(this,e)}setViewBox(e){this.screen.setViewBox(Lz({document:this},e))}}sl.createCanvas=Tz,sl.createImage=Uz,sl.elementTypes=Iz;function rC(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable})),t.push.apply(t,s)}return t}function zc(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rC(Object(t),!0).forEach(function(s){H1(i,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):rC(Object(t)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(t,s))})}return i}class Hc{constructor(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.parser=new Vf(s),this.screen=new cp(e,s),this.options=s;var l=new sl(this,s),c=l.createDocumentElement(t);this.document=l,this.documentElement=c}static from(e,t){var s=arguments;return el(function*(){var l=s.length>2&&s[2]!==void 0?s[2]:{},c=new Vf(l),p=yield c.parse(t);return new Hc(e,p,l)})()}static fromString(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=new Vf(s),c=l.parseFromString(t);return new Hc(e,c,s)}fork(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Hc.from(e,t,zc(zc({},this.options),s))}forkString(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Hc.fromString(e,t,zc(zc({},this.options),s))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var e=arguments,t=this;return el(function*(){var s=e.length>0&&e[0]!==void 0?e[0]:{};t.start(zc({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},s)),yield t.ready(),t.stop()})()}start(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:t,screen:s,options:l}=this;s.start(t,zc(zc({enableRedraw:!0},l),e))}stop(){this.screen.stop()}resize(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(e,t,s)}}const Pz=Object.freeze(Object.defineProperty({__proto__:null,AElement:R5,AnimateColorElement:M5,AnimateElement:Gf,AnimateTransformElement:Q5,BoundingBox:Ka,CB1:iy,CB2:ny,CB3:sy,CB4:ay,Canvg:Hc,CircleElement:B5,ClipPathElement:K5,DefsElement:L5,DescElement:eC,Document:sl,Element:Ri,EllipseElement:C5,FeColorMatrixElement:my,FeCompositeElement:X5,FeDropShadowElement:W5,FeGaussianBlurElement:Y5,FeMorphologyElement:Z5,FilterElement:pp,Font:Es,FontElement:k5,FontFaceElement:D5,GElement:jf,GlyphElement:hy,GradientElement:fy,ImageElement:V5,LineElement:S5,LinearGradientElement:T5,MarkerElement:I5,MaskElement:hp,Matrix:cy,MissingGlyphElement:N5,Mouse:f5,PSEUDO_ZERO:Rc,Parser:Vf,PathElement:wi,PathParser:Gr,PatternElement:F5,Point:an,PolygonElement:E5,PolylineElement:dy,Property:xr,QB1:oy,QB2:Ay,QB3:ly,RadialGradientElement:U5,RectElement:py,RenderedElement:Wl,Rotate:v5,SVGElement:Zu,SVGFontLoader:G5,Scale:_5,Screen:cp,Skew:uy,SkewX:w5,SkewY:b5,StopElement:P5,StyleElement:gy,SymbolElement:j5,TRefElement:O5,TSpanElement:up,TextElement:il,TextPathElement:H5,TitleElement:J5,Transform:Kl,Translate:y5,UnknownElement:x5,UseElement:q5,ViewPort:d5,compressSpaces:Nc,default:Hc,getSelectorSpecificity:p5,normalizeAttributeName:u5,normalizeColor:h5,parseExternalUrl:ey,presets:cz,toNumbers:ha,trimLeft:l5,trimRight:c5,vectorMagnitude:ty,vectorsAngle:ry,vectorsRatio:Hf},Symbol.toStringTag,{value:"Module"}));iA.CompareMaps=US,iA.Layers=Bs,iA.Map=SS,iA.Styles=$A,iA.Terrains=Jp,Object.defineProperty(iA,Symbol.toStringTag,{value:"Module"})});
